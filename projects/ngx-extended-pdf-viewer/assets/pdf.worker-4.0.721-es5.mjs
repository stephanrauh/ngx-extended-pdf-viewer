/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2023 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */

/******/ var __webpack_modules__ = ({

/***/ 1782:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isCallable = __webpack_require__(7316);
var tryToString = __webpack_require__(9762);
var $TypeError = TypeError;
module.exports = function (argument) {
 if (isCallable(argument))
  return argument;
 throw new $TypeError(tryToString(argument) + ' is not a function');
};

/***/ }),

/***/ 7073:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isConstructor = __webpack_require__(1694);
var tryToString = __webpack_require__(9762);
var $TypeError = TypeError;
module.exports = function (argument) {
 if (isConstructor(argument))
  return argument;
 throw new $TypeError(tryToString(argument) + ' is not a constructor');
};

/***/ }),

/***/ 4958:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isCallable = __webpack_require__(7316);
var $String = String;
var $TypeError = TypeError;
module.exports = function (argument) {
 if (typeof argument == 'object' || isCallable(argument))
  return argument;
 throw new $TypeError("Can't set " + $String(argument) + ' as a prototype');
};

/***/ }),

/***/ 5690:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var has = (__webpack_require__(23).has);
module.exports = function (it) {
 has(it);
 return it;
};

/***/ }),

/***/ 5463:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(2292);
var create = __webpack_require__(6941);
var defineProperty = (__webpack_require__(7744).f);
var UNSCOPABLES = wellKnownSymbol('unscopables');
var ArrayPrototype = Array.prototype;
if (ArrayPrototype[UNSCOPABLES] === undefined) {
 defineProperty(ArrayPrototype, UNSCOPABLES, {
  configurable: true,
  value: create(null)
 });
}
module.exports = function (key) {
 ArrayPrototype[UNSCOPABLES][key] = true;
};

/***/ }),

/***/ 9047:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var charAt = (__webpack_require__(6819).charAt);
module.exports = function (S, index, unicode) {
 return index + (unicode ? charAt(S, index).length : 1);
};

/***/ }),

/***/ 5834:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isPrototypeOf = __webpack_require__(2658);
var $TypeError = TypeError;
module.exports = function (it, Prototype) {
 if (isPrototypeOf(Prototype, it))
  return it;
 throw new $TypeError('Incorrect invocation');
};

/***/ }),

/***/ 4719:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isObject = __webpack_require__(7633);
var $String = String;
var $TypeError = TypeError;
module.exports = function (argument) {
 if (isObject(argument))
  return argument;
 throw new $TypeError($String(argument) + ' is not an object');
};

/***/ }),

/***/ 5115:
/***/ ((module) => {


module.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';

/***/ }),

/***/ 7585:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThisAccessor = __webpack_require__(1299);
var classof = __webpack_require__(8374);
var $TypeError = TypeError;
module.exports = uncurryThisAccessor(ArrayBuffer.prototype, 'byteLength', 'get') || function (O) {
 if (classof(O) !== 'ArrayBuffer')
  throw new $TypeError('ArrayBuffer expected');
 return O.byteLength;
};

/***/ }),

/***/ 582:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var arrayBufferByteLength = __webpack_require__(7585);
var slice = uncurryThis(ArrayBuffer.prototype.slice);
module.exports = function (O) {
 if (arrayBufferByteLength(O) !== 0)
  return false;
 try {
  slice(O, 0, 0);
  return false;
 } catch (error) {
  return true;
 }
};

/***/ }),

/***/ 6944:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
module.exports = fails(function () {
 if (typeof ArrayBuffer == 'function') {
  var buffer = new ArrayBuffer(8);
  if (Object.isExtensible(buffer))
   Object.defineProperty(buffer, 'a', { value: 8 });
 }
});

/***/ }),

/***/ 4358:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var uncurryThis = __webpack_require__(8403);
var uncurryThisAccessor = __webpack_require__(1299);
var toIndex = __webpack_require__(9548);
var isDetached = __webpack_require__(582);
var arrayBufferByteLength = __webpack_require__(7585);
var detachTransferable = __webpack_require__(8126);
var PROPER_STRUCTURED_CLONE_TRANSFER = __webpack_require__(4837);
var structuredClone = global.structuredClone;
var ArrayBuffer = global.ArrayBuffer;
var DataView = global.DataView;
var TypeError = global.TypeError;
var min = Math.min;
var ArrayBufferPrototype = ArrayBuffer.prototype;
var DataViewPrototype = DataView.prototype;
var slice = uncurryThis(ArrayBufferPrototype.slice);
var isResizable = uncurryThisAccessor(ArrayBufferPrototype, 'resizable', 'get');
var maxByteLength = uncurryThisAccessor(ArrayBufferPrototype, 'maxByteLength', 'get');
var getInt8 = uncurryThis(DataViewPrototype.getInt8);
var setInt8 = uncurryThis(DataViewPrototype.setInt8);
module.exports = (PROPER_STRUCTURED_CLONE_TRANSFER || detachTransferable) && function (arrayBuffer, newLength, preserveResizability) {
 var byteLength = arrayBufferByteLength(arrayBuffer);
 var newByteLength = newLength === undefined ? byteLength : toIndex(newLength);
 var fixedLength = !isResizable || !isResizable(arrayBuffer);
 var newBuffer;
 if (isDetached(arrayBuffer))
  throw new TypeError('ArrayBuffer is detached');
 if (PROPER_STRUCTURED_CLONE_TRANSFER) {
  arrayBuffer = structuredClone(arrayBuffer, { transfer: [arrayBuffer] });
  if (byteLength === newByteLength && (preserveResizability || fixedLength))
   return arrayBuffer;
 }
 if (byteLength >= newByteLength && (!preserveResizability || fixedLength)) {
  newBuffer = slice(arrayBuffer, 0, newByteLength);
 } else {
  var options = preserveResizability && !fixedLength && maxByteLength ? { maxByteLength: maxByteLength(arrayBuffer) } : undefined;
  newBuffer = new ArrayBuffer(newByteLength, options);
  var a = new DataView(arrayBuffer);
  var b = new DataView(newBuffer);
  var copyLength = min(newByteLength, byteLength);
  for (var i = 0; i < copyLength; i++)
   setInt8(b, i, getInt8(a, i));
 }
 if (!PROPER_STRUCTURED_CLONE_TRANSFER)
  detachTransferable(arrayBuffer);
 return newBuffer;
};

/***/ }),

/***/ 5861:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_ARRAY_BUFFER = __webpack_require__(5115);
var DESCRIPTORS = __webpack_require__(940);
var global = __webpack_require__(9298);
var isCallable = __webpack_require__(7316);
var isObject = __webpack_require__(7633);
var hasOwn = __webpack_require__(936);
var classof = __webpack_require__(8329);
var tryToString = __webpack_require__(9762);
var createNonEnumerableProperty = __webpack_require__(9293);
var defineBuiltIn = __webpack_require__(7041);
var defineBuiltInAccessor = __webpack_require__(9691);
var isPrototypeOf = __webpack_require__(2658);
var getPrototypeOf = __webpack_require__(2176);
var setPrototypeOf = __webpack_require__(9763);
var wellKnownSymbol = __webpack_require__(2292);
var uid = __webpack_require__(7561);
var InternalStateModule = __webpack_require__(1649);
var enforceInternalState = InternalStateModule.enforce;
var getInternalState = InternalStateModule.get;
var Int8Array = global.Int8Array;
var Int8ArrayPrototype = Int8Array && Int8Array.prototype;
var Uint8ClampedArray = global.Uint8ClampedArray;
var Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;
var TypedArray = Int8Array && getPrototypeOf(Int8Array);
var TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);
var ObjectPrototype = Object.prototype;
var TypeError = global.TypeError;
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');
var TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';
var NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(global.opera) !== 'Opera';
var TYPED_ARRAY_TAG_REQUIRED = false;
var NAME, Constructor, Prototype;
var TypedArrayConstructorsList = {
 Int8Array: 1,
 Uint8Array: 1,
 Uint8ClampedArray: 1,
 Int16Array: 2,
 Uint16Array: 2,
 Int32Array: 4,
 Uint32Array: 4,
 Float32Array: 4,
 Float64Array: 8
};
var BigIntArrayConstructorsList = {
 BigInt64Array: 8,
 BigUint64Array: 8
};
var isView = function isView(it) {
 if (!isObject(it))
  return false;
 var klass = classof(it);
 return klass === 'DataView' || hasOwn(TypedArrayConstructorsList, klass) || hasOwn(BigIntArrayConstructorsList, klass);
};
var getTypedArrayConstructor = function (it) {
 var proto = getPrototypeOf(it);
 if (!isObject(proto))
  return;
 var state = getInternalState(proto);
 return state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);
};
var isTypedArray = function (it) {
 if (!isObject(it))
  return false;
 var klass = classof(it);
 return hasOwn(TypedArrayConstructorsList, klass) || hasOwn(BigIntArrayConstructorsList, klass);
};
var aTypedArray = function (it) {
 if (isTypedArray(it))
  return it;
 throw new TypeError('Target is not a typed array');
};
var aTypedArrayConstructor = function (C) {
 if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C)))
  return C;
 throw new TypeError(tryToString(C) + ' is not a typed array constructor');
};
var exportTypedArrayMethod = function (KEY, property, forced, options) {
 if (!DESCRIPTORS)
  return;
 if (forced)
  for (var ARRAY in TypedArrayConstructorsList) {
   var TypedArrayConstructor = global[ARRAY];
   if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY))
    try {
     delete TypedArrayConstructor.prototype[KEY];
    } catch (error) {
     try {
      TypedArrayConstructor.prototype[KEY] = property;
     } catch (error2) {
     }
    }
  }
 if (!TypedArrayPrototype[KEY] || forced) {
  defineBuiltIn(TypedArrayPrototype, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);
 }
};
var exportTypedArrayStaticMethod = function (KEY, property, forced) {
 var ARRAY, TypedArrayConstructor;
 if (!DESCRIPTORS)
  return;
 if (setPrototypeOf) {
  if (forced)
   for (ARRAY in TypedArrayConstructorsList) {
    TypedArrayConstructor = global[ARRAY];
    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY))
     try {
      delete TypedArrayConstructor[KEY];
     } catch (error) {
     }
   }
  if (!TypedArray[KEY] || forced) {
   try {
    return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);
   } catch (error) {
   }
  } else
   return;
 }
 for (ARRAY in TypedArrayConstructorsList) {
  TypedArrayConstructor = global[ARRAY];
  if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {
   defineBuiltIn(TypedArrayConstructor, KEY, property);
  }
 }
};
for (NAME in TypedArrayConstructorsList) {
 Constructor = global[NAME];
 Prototype = Constructor && Constructor.prototype;
 if (Prototype)
  enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;
 else
  NATIVE_ARRAY_BUFFER_VIEWS = false;
}
for (NAME in BigIntArrayConstructorsList) {
 Constructor = global[NAME];
 Prototype = Constructor && Constructor.prototype;
 if (Prototype)
  enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;
}
if (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {
 TypedArray = function TypedArray() {
  throw new TypeError('Incorrect invocation');
 };
 if (NATIVE_ARRAY_BUFFER_VIEWS)
  for (NAME in TypedArrayConstructorsList) {
   if (global[NAME])
    setPrototypeOf(global[NAME], TypedArray);
  }
}
if (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {
 TypedArrayPrototype = TypedArray.prototype;
 if (NATIVE_ARRAY_BUFFER_VIEWS)
  for (NAME in TypedArrayConstructorsList) {
   if (global[NAME])
    setPrototypeOf(global[NAME].prototype, TypedArrayPrototype);
  }
}
if (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {
 setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);
}
if (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {
 TYPED_ARRAY_TAG_REQUIRED = true;
 defineBuiltInAccessor(TypedArrayPrototype, TO_STRING_TAG, {
  configurable: true,
  get: function () {
   return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;
  }
 });
 for (NAME in TypedArrayConstructorsList)
  if (global[NAME]) {
   createNonEnumerableProperty(global[NAME], TYPED_ARRAY_TAG, NAME);
  }
}
module.exports = {
 NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,
 TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,
 aTypedArray: aTypedArray,
 aTypedArrayConstructor: aTypedArrayConstructor,
 exportTypedArrayMethod: exportTypedArrayMethod,
 exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,
 getTypedArrayConstructor: getTypedArrayConstructor,
 isView: isView,
 isTypedArray: isTypedArray,
 TypedArray: TypedArray,
 TypedArrayPrototype: TypedArrayPrototype
};

/***/ }),

/***/ 5050:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var uncurryThis = __webpack_require__(8403);
var DESCRIPTORS = __webpack_require__(940);
var NATIVE_ARRAY_BUFFER = __webpack_require__(5115);
var FunctionName = __webpack_require__(5145);
var createNonEnumerableProperty = __webpack_require__(9293);
var defineBuiltInAccessor = __webpack_require__(9691);
var defineBuiltIns = __webpack_require__(6880);
var fails = __webpack_require__(8154);
var anInstance = __webpack_require__(5834);
var toIntegerOrInfinity = __webpack_require__(1003);
var toLength = __webpack_require__(8293);
var toIndex = __webpack_require__(9548);
var fround = __webpack_require__(796);
var IEEE754 = __webpack_require__(3106);
var getPrototypeOf = __webpack_require__(2176);
var setPrototypeOf = __webpack_require__(9763);
var getOwnPropertyNames = (__webpack_require__(5455).f);
var arrayFill = __webpack_require__(8041);
var arraySlice = __webpack_require__(6071);
var setToStringTag = __webpack_require__(7536);
var InternalStateModule = __webpack_require__(1649);
var PROPER_FUNCTION_NAME = FunctionName.PROPER;
var CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;
var ARRAY_BUFFER = 'ArrayBuffer';
var DATA_VIEW = 'DataView';
var PROTOTYPE = 'prototype';
var WRONG_LENGTH = 'Wrong length';
var WRONG_INDEX = 'Wrong index';
var getInternalArrayBufferState = InternalStateModule.getterFor(ARRAY_BUFFER);
var getInternalDataViewState = InternalStateModule.getterFor(DATA_VIEW);
var setInternalState = InternalStateModule.set;
var NativeArrayBuffer = global[ARRAY_BUFFER];
var $ArrayBuffer = NativeArrayBuffer;
var ArrayBufferPrototype = $ArrayBuffer && $ArrayBuffer[PROTOTYPE];
var $DataView = global[DATA_VIEW];
var DataViewPrototype = $DataView && $DataView[PROTOTYPE];
var ObjectPrototype = Object.prototype;
var Array = global.Array;
var RangeError = global.RangeError;
var fill = uncurryThis(arrayFill);
var reverse = uncurryThis([].reverse);
var packIEEE754 = IEEE754.pack;
var unpackIEEE754 = IEEE754.unpack;
var packInt8 = function (number) {
 return [number & 0xFF];
};
var packInt16 = function (number) {
 return [
  number & 0xFF,
  number >> 8 & 0xFF
 ];
};
var packInt32 = function (number) {
 return [
  number & 0xFF,
  number >> 8 & 0xFF,
  number >> 16 & 0xFF,
  number >> 24 & 0xFF
 ];
};
var unpackInt32 = function (buffer) {
 return buffer[3] << 24 | buffer[2] << 16 | buffer[1] << 8 | buffer[0];
};
var packFloat32 = function (number) {
 return packIEEE754(fround(number), 23, 4);
};
var packFloat64 = function (number) {
 return packIEEE754(number, 52, 8);
};
var addGetter = function (Constructor, key, getInternalState) {
 defineBuiltInAccessor(Constructor[PROTOTYPE], key, {
  configurable: true,
  get: function () {
   return getInternalState(this)[key];
  }
 });
};
var get = function (view, count, index, isLittleEndian) {
 var store = getInternalDataViewState(view);
 var intIndex = toIndex(index);
 var boolIsLittleEndian = !!isLittleEndian;
 if (intIndex + count > store.byteLength)
  throw new RangeError(WRONG_INDEX);
 var bytes = store.bytes;
 var start = intIndex + store.byteOffset;
 var pack = arraySlice(bytes, start, start + count);
 return boolIsLittleEndian ? pack : reverse(pack);
};
var set = function (view, count, index, conversion, value, isLittleEndian) {
 var store = getInternalDataViewState(view);
 var intIndex = toIndex(index);
 var pack = conversion(+value);
 var boolIsLittleEndian = !!isLittleEndian;
 if (intIndex + count > store.byteLength)
  throw new RangeError(WRONG_INDEX);
 var bytes = store.bytes;
 var start = intIndex + store.byteOffset;
 for (var i = 0; i < count; i++)
  bytes[start + i] = pack[boolIsLittleEndian ? i : count - i - 1];
};
if (!NATIVE_ARRAY_BUFFER) {
 $ArrayBuffer = function ArrayBuffer(length) {
  anInstance(this, ArrayBufferPrototype);
  var byteLength = toIndex(length);
  setInternalState(this, {
   type: ARRAY_BUFFER,
   bytes: fill(Array(byteLength), 0),
   byteLength: byteLength
  });
  if (!DESCRIPTORS) {
   this.byteLength = byteLength;
   this.detached = false;
  }
 };
 ArrayBufferPrototype = $ArrayBuffer[PROTOTYPE];
 $DataView = function DataView(buffer, byteOffset, byteLength) {
  anInstance(this, DataViewPrototype);
  anInstance(buffer, ArrayBufferPrototype);
  var bufferState = getInternalArrayBufferState(buffer);
  var bufferLength = bufferState.byteLength;
  var offset = toIntegerOrInfinity(byteOffset);
  if (offset < 0 || offset > bufferLength)
   throw new RangeError('Wrong offset');
  byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);
  if (offset + byteLength > bufferLength)
   throw new RangeError(WRONG_LENGTH);
  setInternalState(this, {
   type: DATA_VIEW,
   buffer: buffer,
   byteLength: byteLength,
   byteOffset: offset,
   bytes: bufferState.bytes
  });
  if (!DESCRIPTORS) {
   this.buffer = buffer;
   this.byteLength = byteLength;
   this.byteOffset = offset;
  }
 };
 DataViewPrototype = $DataView[PROTOTYPE];
 if (DESCRIPTORS) {
  addGetter($ArrayBuffer, 'byteLength', getInternalArrayBufferState);
  addGetter($DataView, 'buffer', getInternalDataViewState);
  addGetter($DataView, 'byteLength', getInternalDataViewState);
  addGetter($DataView, 'byteOffset', getInternalDataViewState);
 }
 defineBuiltIns(DataViewPrototype, {
  getInt8: function getInt8(byteOffset) {
   return get(this, 1, byteOffset)[0] << 24 >> 24;
  },
  getUint8: function getUint8(byteOffset) {
   return get(this, 1, byteOffset)[0];
  },
  getInt16: function getInt16(byteOffset) {
   var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : false);
   return (bytes[1] << 8 | bytes[0]) << 16 >> 16;
  },
  getUint16: function getUint16(byteOffset) {
   var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : false);
   return bytes[1] << 8 | bytes[0];
  },
  getInt32: function getInt32(byteOffset) {
   return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false));
  },
  getUint32: function getUint32(byteOffset) {
   return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false)) >>> 0;
  },
  getFloat32: function getFloat32(byteOffset) {
   return unpackIEEE754(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false), 23);
  },
  getFloat64: function getFloat64(byteOffset) {
   return unpackIEEE754(get(this, 8, byteOffset, arguments.length > 1 ? arguments[1] : false), 52);
  },
  setInt8: function setInt8(byteOffset, value) {
   set(this, 1, byteOffset, packInt8, value);
  },
  setUint8: function setUint8(byteOffset, value) {
   set(this, 1, byteOffset, packInt8, value);
  },
  setInt16: function setInt16(byteOffset, value) {
   set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : false);
  },
  setUint16: function setUint16(byteOffset, value) {
   set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : false);
  },
  setInt32: function setInt32(byteOffset, value) {
   set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : false);
  },
  setUint32: function setUint32(byteOffset, value) {
   set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : false);
  },
  setFloat32: function setFloat32(byteOffset, value) {
   set(this, 4, byteOffset, packFloat32, value, arguments.length > 2 ? arguments[2] : false);
  },
  setFloat64: function setFloat64(byteOffset, value) {
   set(this, 8, byteOffset, packFloat64, value, arguments.length > 2 ? arguments[2] : false);
  }
 });
} else {
 var INCORRECT_ARRAY_BUFFER_NAME = PROPER_FUNCTION_NAME && NativeArrayBuffer.name !== ARRAY_BUFFER;
 if (!fails(function () {
   NativeArrayBuffer(1);
  }) || !fails(function () {
   new NativeArrayBuffer(-1);
  }) || fails(function () {
   new NativeArrayBuffer();
   new NativeArrayBuffer(1.5);
   new NativeArrayBuffer(NaN);
   return NativeArrayBuffer.length !== 1 || INCORRECT_ARRAY_BUFFER_NAME && !CONFIGURABLE_FUNCTION_NAME;
  })) {
  $ArrayBuffer = function ArrayBuffer(length) {
   anInstance(this, ArrayBufferPrototype);
   return new NativeArrayBuffer(toIndex(length));
  };
  $ArrayBuffer[PROTOTYPE] = ArrayBufferPrototype;
  for (var keys = getOwnPropertyNames(NativeArrayBuffer), j = 0, key; keys.length > j;) {
   if (!((key = keys[j++]) in $ArrayBuffer)) {
    createNonEnumerableProperty($ArrayBuffer, key, NativeArrayBuffer[key]);
   }
  }
  ArrayBufferPrototype.constructor = $ArrayBuffer;
 } else if (INCORRECT_ARRAY_BUFFER_NAME && CONFIGURABLE_FUNCTION_NAME) {
  createNonEnumerableProperty(NativeArrayBuffer, 'name', ARRAY_BUFFER);
 }
 if (setPrototypeOf && getPrototypeOf(DataViewPrototype) !== ObjectPrototype) {
  setPrototypeOf(DataViewPrototype, ObjectPrototype);
 }
 var testView = new $DataView(new $ArrayBuffer(2));
 var $setInt8 = uncurryThis(DataViewPrototype.setInt8);
 testView.setInt8(0, 2147483648);
 testView.setInt8(1, 2147483649);
 if (testView.getInt8(0) || !testView.getInt8(1))
  defineBuiltIns(DataViewPrototype, {
   setInt8: function setInt8(byteOffset, value) {
    $setInt8(this, byteOffset, value << 24 >> 24);
   },
   setUint8: function setUint8(byteOffset, value) {
    $setInt8(this, byteOffset, value << 24 >> 24);
   }
  }, { unsafe: true });
}
setToStringTag($ArrayBuffer, ARRAY_BUFFER);
setToStringTag($DataView, DATA_VIEW);
module.exports = {
 ArrayBuffer: $ArrayBuffer,
 DataView: $DataView
};

/***/ }),

/***/ 1474:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toObject = __webpack_require__(2007);
var toAbsoluteIndex = __webpack_require__(6985);
var lengthOfArrayLike = __webpack_require__(451);
var deletePropertyOrThrow = __webpack_require__(2322);
var min = Math.min;
module.exports = [].copyWithin || function copyWithin(target, start) {
 var O = toObject(this);
 var len = lengthOfArrayLike(O);
 var to = toAbsoluteIndex(target, len);
 var from = toAbsoluteIndex(start, len);
 var end = arguments.length > 2 ? arguments[2] : undefined;
 var count = min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);
 var inc = 1;
 if (from < to && to < from + count) {
  inc = -1;
  from += count - 1;
  to += count - 1;
 }
 while (count-- > 0) {
  if (from in O)
   O[to] = O[from];
  else
   deletePropertyOrThrow(O, to);
  to += inc;
  from += inc;
 }
 return O;
};

/***/ }),

/***/ 8041:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toObject = __webpack_require__(2007);
var toAbsoluteIndex = __webpack_require__(6985);
var lengthOfArrayLike = __webpack_require__(451);
module.exports = function fill(value) {
 var O = toObject(this);
 var length = lengthOfArrayLike(O);
 var argumentsLength = arguments.length;
 var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);
 var end = argumentsLength > 2 ? arguments[2] : undefined;
 var endPos = end === undefined ? length : toAbsoluteIndex(end, length);
 while (endPos > index)
  O[index++] = value;
 return O;
};

/***/ }),

/***/ 8208:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $forEach = (__webpack_require__(2423).forEach);
var arrayMethodIsStrict = __webpack_require__(8321);
var STRICT_METHOD = arrayMethodIsStrict('forEach');
module.exports = !STRICT_METHOD ? function forEach(callbackfn) {
 return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
} : [].forEach;

/***/ }),

/***/ 7003:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var lengthOfArrayLike = __webpack_require__(451);
module.exports = function (Constructor, list) {
 var index = 0;
 var length = lengthOfArrayLike(list);
 var result = new Constructor(length);
 while (length > index)
  result[index] = list[index++];
 return result;
};

/***/ }),

/***/ 7609:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var bind = __webpack_require__(7789);
var call = __webpack_require__(2026);
var toObject = __webpack_require__(2007);
var callWithSafeIterationClosing = __webpack_require__(5723);
var isArrayIteratorMethod = __webpack_require__(5191);
var isConstructor = __webpack_require__(1694);
var lengthOfArrayLike = __webpack_require__(451);
var createProperty = __webpack_require__(8947);
var getIterator = __webpack_require__(7612);
var getIteratorMethod = __webpack_require__(273);
var $Array = Array;
module.exports = function from(arrayLike) {
 var O = toObject(arrayLike);
 var IS_CONSTRUCTOR = isConstructor(this);
 var argumentsLength = arguments.length;
 var mapfn = argumentsLength > 1 ? arguments[1] : undefined;
 var mapping = mapfn !== undefined;
 if (mapping)
  mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);
 var iteratorMethod = getIteratorMethod(O);
 var index = 0;
 var length, result, step, iterator, next, value;
 if (iteratorMethod && !(this === $Array && isArrayIteratorMethod(iteratorMethod))) {
  iterator = getIterator(O, iteratorMethod);
  next = iterator.next;
  result = IS_CONSTRUCTOR ? new this() : [];
  for (; !(step = call(next, iterator)).done; index++) {
   value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [
    step.value,
    index
   ], true) : step.value;
   createProperty(result, index, value);
  }
 } else {
  length = lengthOfArrayLike(O);
  result = IS_CONSTRUCTOR ? new this(length) : $Array(length);
  for (; length > index; index++) {
   value = mapping ? mapfn(O[index], index) : O[index];
   createProperty(result, index, value);
  }
 }
 result.length = index;
 return result;
};

/***/ }),

/***/ 9773:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIndexedObject = __webpack_require__(4115);
var toAbsoluteIndex = __webpack_require__(6985);
var lengthOfArrayLike = __webpack_require__(451);
var createMethod = function (IS_INCLUDES) {
 return function ($this, el, fromIndex) {
  var O = toIndexedObject($this);
  var length = lengthOfArrayLike(O);
  var index = toAbsoluteIndex(fromIndex, length);
  var value;
  if (IS_INCLUDES && el !== el)
   while (length > index) {
    value = O[index++];
    if (value !== value)
     return true;
   }
  else
   for (; length > index; index++) {
    if ((IS_INCLUDES || index in O) && O[index] === el)
     return IS_INCLUDES || index || 0;
   }
  return !IS_INCLUDES && -1;
 };
};
module.exports = {
 includes: createMethod(true),
 indexOf: createMethod(false)
};

/***/ }),

/***/ 4026:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var bind = __webpack_require__(7789);
var IndexedObject = __webpack_require__(3622);
var toObject = __webpack_require__(2007);
var lengthOfArrayLike = __webpack_require__(451);
var createMethod = function (TYPE) {
 var IS_FIND_LAST_INDEX = TYPE === 1;
 return function ($this, callbackfn, that) {
  var O = toObject($this);
  var self = IndexedObject(O);
  var boundFunction = bind(callbackfn, that);
  var index = lengthOfArrayLike(self);
  var value, result;
  while (index-- > 0) {
   value = self[index];
   result = boundFunction(value, index, O);
   if (result)
    switch (TYPE) {
    case 0:
     return value;
    case 1:
     return index;
    }
  }
  return IS_FIND_LAST_INDEX ? -1 : undefined;
 };
};
module.exports = {
 findLast: createMethod(0),
 findLastIndex: createMethod(1)
};

/***/ }),

/***/ 2423:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var bind = __webpack_require__(7789);
var uncurryThis = __webpack_require__(8403);
var IndexedObject = __webpack_require__(3622);
var toObject = __webpack_require__(2007);
var lengthOfArrayLike = __webpack_require__(451);
var arraySpeciesCreate = __webpack_require__(8097);
var push = uncurryThis([].push);
var createMethod = function (TYPE) {
 var IS_MAP = TYPE === 1;
 var IS_FILTER = TYPE === 2;
 var IS_SOME = TYPE === 3;
 var IS_EVERY = TYPE === 4;
 var IS_FIND_INDEX = TYPE === 6;
 var IS_FILTER_REJECT = TYPE === 7;
 var NO_HOLES = TYPE === 5 || IS_FIND_INDEX;
 return function ($this, callbackfn, that, specificCreate) {
  var O = toObject($this);
  var self = IndexedObject(O);
  var boundFunction = bind(callbackfn, that);
  var length = lengthOfArrayLike(self);
  var index = 0;
  var create = specificCreate || arraySpeciesCreate;
  var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;
  var value, result;
  for (; length > index; index++)
   if (NO_HOLES || index in self) {
    value = self[index];
    result = boundFunction(value, index, O);
    if (TYPE) {
     if (IS_MAP)
      target[index] = result;
     else if (result)
      switch (TYPE) {
      case 3:
       return true;
      case 5:
       return value;
      case 6:
       return index;
      case 2:
       push(target, value);
      }
     else
      switch (TYPE) {
      case 4:
       return false;
      case 7:
       push(target, value);
      }
    }
   }
  return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
 };
};
module.exports = {
 forEach: createMethod(0),
 map: createMethod(1),
 filter: createMethod(2),
 some: createMethod(3),
 every: createMethod(4),
 find: createMethod(5),
 findIndex: createMethod(6),
 filterReject: createMethod(7)
};

/***/ }),

/***/ 8671:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var apply = __webpack_require__(7294);
var toIndexedObject = __webpack_require__(4115);
var toIntegerOrInfinity = __webpack_require__(1003);
var lengthOfArrayLike = __webpack_require__(451);
var arrayMethodIsStrict = __webpack_require__(8321);
var min = Math.min;
var $lastIndexOf = [].lastIndexOf;
var NEGATIVE_ZERO = !!$lastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;
var STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');
var FORCED = NEGATIVE_ZERO || !STRICT_METHOD;
module.exports = FORCED ? function lastIndexOf(searchElement) {
 if (NEGATIVE_ZERO)
  return apply($lastIndexOf, this, arguments) || 0;
 var O = toIndexedObject(this);
 var length = lengthOfArrayLike(O);
 var index = length - 1;
 if (arguments.length > 1)
  index = min(index, toIntegerOrInfinity(arguments[1]));
 if (index < 0)
  index = length + index;
 for (; index >= 0; index--)
  if (index in O && O[index] === searchElement)
   return index || 0;
 return -1;
} : $lastIndexOf;

/***/ }),

/***/ 3577:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
var wellKnownSymbol = __webpack_require__(2292);
var V8_VERSION = __webpack_require__(2171);
var SPECIES = wellKnownSymbol('species');
module.exports = function (METHOD_NAME) {
 return V8_VERSION >= 51 || !fails(function () {
  var array = [];
  var constructor = array.constructor = {};
  constructor[SPECIES] = function () {
   return { foo: 1 };
  };
  return array[METHOD_NAME](Boolean).foo !== 1;
 });
};

/***/ }),

/***/ 8321:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
module.exports = function (METHOD_NAME, argument) {
 var method = [][METHOD_NAME];
 return !!method && fails(function () {
  method.call(null, argument || function () {
   return 1;
  }, 1);
 });
};

/***/ }),

/***/ 2741:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aCallable = __webpack_require__(1782);
var toObject = __webpack_require__(2007);
var IndexedObject = __webpack_require__(3622);
var lengthOfArrayLike = __webpack_require__(451);
var $TypeError = TypeError;
var createMethod = function (IS_RIGHT) {
 return function (that, callbackfn, argumentsLength, memo) {
  aCallable(callbackfn);
  var O = toObject(that);
  var self = IndexedObject(O);
  var length = lengthOfArrayLike(O);
  var index = IS_RIGHT ? length - 1 : 0;
  var i = IS_RIGHT ? -1 : 1;
  if (argumentsLength < 2)
   while (true) {
    if (index in self) {
     memo = self[index];
     index += i;
     break;
    }
    index += i;
    if (IS_RIGHT ? index < 0 : length <= index) {
     throw new $TypeError('Reduce of empty array with no initial value');
    }
   }
  for (; IS_RIGHT ? index >= 0 : length > index; index += i)
   if (index in self) {
    memo = callbackfn(memo, self[index], index, O);
   }
  return memo;
 };
};
module.exports = {
 left: createMethod(false),
 right: createMethod(true)
};

/***/ }),

/***/ 6661:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var isArray = __webpack_require__(6998);
var $TypeError = TypeError;
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !(function () {
 if (this !== undefined)
  return true;
 try {
  Object.defineProperty([], 'length', { writable: false }).length = 1;
 } catch (error) {
  return error instanceof TypeError;
 }
}());
module.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {
 if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {
  throw new $TypeError('Cannot set read only .length');
 }
 return O.length = length;
} : function (O, length) {
 return O.length = length;
};

/***/ }),

/***/ 6071:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toAbsoluteIndex = __webpack_require__(6985);
var lengthOfArrayLike = __webpack_require__(451);
var createProperty = __webpack_require__(8947);
var $Array = Array;
var max = Math.max;
module.exports = function (O, start, end) {
 var length = lengthOfArrayLike(O);
 var k = toAbsoluteIndex(start, length);
 var fin = toAbsoluteIndex(end === undefined ? length : end, length);
 var result = $Array(max(fin - k, 0));
 var n = 0;
 for (; k < fin; k++, n++)
  createProperty(result, n, O[k]);
 result.length = n;
 return result;
};

/***/ }),

/***/ 2251:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
module.exports = uncurryThis([].slice);

/***/ }),

/***/ 4689:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var arraySlice = __webpack_require__(6071);
var floor = Math.floor;
var mergeSort = function (array, comparefn) {
 var length = array.length;
 var middle = floor(length / 2);
 return length < 8 ? insertionSort(array, comparefn) : merge(array, mergeSort(arraySlice(array, 0, middle), comparefn), mergeSort(arraySlice(array, middle), comparefn), comparefn);
};
var insertionSort = function (array, comparefn) {
 var length = array.length;
 var i = 1;
 var element, j;
 while (i < length) {
  j = i;
  element = array[i];
  while (j && comparefn(array[j - 1], element) > 0) {
   array[j] = array[--j];
  }
  if (j !== i++)
   array[j] = element;
 }
 return array;
};
var merge = function (array, left, right, comparefn) {
 var llength = left.length;
 var rlength = right.length;
 var lindex = 0;
 var rindex = 0;
 while (lindex < llength || rindex < rlength) {
  array[lindex + rindex] = lindex < llength && rindex < rlength ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++] : lindex < llength ? left[lindex++] : right[rindex++];
 }
 return array;
};
module.exports = mergeSort;

/***/ }),

/***/ 751:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isArray = __webpack_require__(6998);
var isConstructor = __webpack_require__(1694);
var isObject = __webpack_require__(7633);
var wellKnownSymbol = __webpack_require__(2292);
var SPECIES = wellKnownSymbol('species');
var $Array = Array;
module.exports = function (originalArray) {
 var C;
 if (isArray(originalArray)) {
  C = originalArray.constructor;
  if (isConstructor(C) && (C === $Array || isArray(C.prototype)))
   C = undefined;
  else if (isObject(C)) {
   C = C[SPECIES];
   if (C === null)
    C = undefined;
  }
 }
 return C === undefined ? $Array : C;
};

/***/ }),

/***/ 8097:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var arraySpeciesConstructor = __webpack_require__(751);
module.exports = function (originalArray, length) {
 return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);
};

/***/ }),

/***/ 2304:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var lengthOfArrayLike = __webpack_require__(451);
module.exports = function (O, C) {
 var len = lengthOfArrayLike(O);
 var A = new C(len);
 var k = 0;
 for (; k < len; k++)
  A[k] = O[len - k - 1];
 return A;
};

/***/ }),

/***/ 5886:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var lengthOfArrayLike = __webpack_require__(451);
var toIntegerOrInfinity = __webpack_require__(1003);
var $RangeError = RangeError;
module.exports = function (O, C, index, value) {
 var len = lengthOfArrayLike(O);
 var relativeIndex = toIntegerOrInfinity(index);
 var actualIndex = relativeIndex < 0 ? len + relativeIndex : relativeIndex;
 if (actualIndex >= len || actualIndex < 0)
  throw new $RangeError('Incorrect index');
 var A = new C(len);
 var k = 0;
 for (; k < len; k++)
  A[k] = k === actualIndex ? value : O[k];
 return A;
};

/***/ }),

/***/ 5723:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(4719);
var iteratorClose = __webpack_require__(3316);
module.exports = function (iterator, fn, value, ENTRIES) {
 try {
  return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);
 } catch (error) {
  iteratorClose(iterator, 'throw', error);
 }
};

/***/ }),

/***/ 1374:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(2292);
var ITERATOR = wellKnownSymbol('iterator');
var SAFE_CLOSING = false;
try {
 var called = 0;
 var iteratorWithReturn = {
  next: function () {
   return { done: !!called++ };
  },
  'return': function () {
   SAFE_CLOSING = true;
  }
 };
 iteratorWithReturn[ITERATOR] = function () {
  return this;
 };
 Array.from(iteratorWithReturn, function () {
  throw 2;
 });
} catch (error) {
}
module.exports = function (exec, SKIP_CLOSING) {
 try {
  if (!SKIP_CLOSING && !SAFE_CLOSING)
   return false;
 } catch (error) {
  return false;
 }
 var ITERATION_SUPPORT = false;
 try {
  var object = {};
  object[ITERATOR] = function () {
   return {
    next: function () {
     return { done: ITERATION_SUPPORT = true };
    }
   };
  };
  exec(object);
 } catch (error) {
 }
 return ITERATION_SUPPORT;
};

/***/ }),

/***/ 8374:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var toString = uncurryThis({}.toString);
var stringSlice = uncurryThis(''.slice);
module.exports = function (it) {
 return stringSlice(toString(it), 8, -1);
};

/***/ }),

/***/ 8329:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var TO_STRING_TAG_SUPPORT = __webpack_require__(3077);
var isCallable = __webpack_require__(7316);
var classofRaw = __webpack_require__(8374);
var wellKnownSymbol = __webpack_require__(2292);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var $Object = Object;
var CORRECT_ARGUMENTS = classofRaw((function () {
 return arguments;
}())) === 'Arguments';
var tryGet = function (it, key) {
 try {
  return it[key];
 } catch (error) {
 }
};
module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {
 var O, tag, result;
 return it === undefined ? 'Undefined' : it === null ? 'Null' : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag : CORRECT_ARGUMENTS ? classofRaw(O) : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;
};

/***/ }),

/***/ 6122:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var create = __webpack_require__(6941);
var defineBuiltInAccessor = __webpack_require__(9691);
var defineBuiltIns = __webpack_require__(6880);
var bind = __webpack_require__(7789);
var anInstance = __webpack_require__(5834);
var isNullOrUndefined = __webpack_require__(3734);
var iterate = __webpack_require__(6837);
var defineIterator = __webpack_require__(7301);
var createIterResultObject = __webpack_require__(1111);
var setSpecies = __webpack_require__(5963);
var DESCRIPTORS = __webpack_require__(940);
var fastKey = (__webpack_require__(4694).fastKey);
var InternalStateModule = __webpack_require__(1649);
var setInternalState = InternalStateModule.set;
var internalStateGetterFor = InternalStateModule.getterFor;
module.exports = {
 getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {
  var Constructor = wrapper(function (that, iterable) {
   anInstance(that, Prototype);
   setInternalState(that, {
    type: CONSTRUCTOR_NAME,
    index: create(null),
    first: undefined,
    last: undefined,
    size: 0
   });
   if (!DESCRIPTORS)
    that.size = 0;
   if (!isNullOrUndefined(iterable))
    iterate(iterable, that[ADDER], {
     that: that,
     AS_ENTRIES: IS_MAP
    });
  });
  var Prototype = Constructor.prototype;
  var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);
  var define = function (that, key, value) {
   var state = getInternalState(that);
   var entry = getEntry(that, key);
   var previous, index;
   if (entry) {
    entry.value = value;
   } else {
    state.last = entry = {
     index: index = fastKey(key, true),
     key: key,
     value: value,
     previous: previous = state.last,
     next: undefined,
     removed: false
    };
    if (!state.first)
     state.first = entry;
    if (previous)
     previous.next = entry;
    if (DESCRIPTORS)
     state.size++;
    else
     that.size++;
    if (index !== 'F')
     state.index[index] = entry;
   }
   return that;
  };
  var getEntry = function (that, key) {
   var state = getInternalState(that);
   var index = fastKey(key);
   var entry;
   if (index !== 'F')
    return state.index[index];
   for (entry = state.first; entry; entry = entry.next) {
    if (entry.key === key)
     return entry;
   }
  };
  defineBuiltIns(Prototype, {
   clear: function clear() {
    var that = this;
    var state = getInternalState(that);
    var data = state.index;
    var entry = state.first;
    while (entry) {
     entry.removed = true;
     if (entry.previous)
      entry.previous = entry.previous.next = undefined;
     delete data[entry.index];
     entry = entry.next;
    }
    state.first = state.last = undefined;
    if (DESCRIPTORS)
     state.size = 0;
    else
     that.size = 0;
   },
   'delete': function (key) {
    var that = this;
    var state = getInternalState(that);
    var entry = getEntry(that, key);
    if (entry) {
     var next = entry.next;
     var prev = entry.previous;
     delete state.index[entry.index];
     entry.removed = true;
     if (prev)
      prev.next = next;
     if (next)
      next.previous = prev;
     if (state.first === entry)
      state.first = next;
     if (state.last === entry)
      state.last = prev;
     if (DESCRIPTORS)
      state.size--;
     else
      that.size--;
    }
    return !!entry;
   },
   forEach: function forEach(callbackfn) {
    var state = getInternalState(this);
    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    var entry;
    while (entry = entry ? entry.next : state.first) {
     boundFunction(entry.value, entry.key, this);
     while (entry && entry.removed)
      entry = entry.previous;
    }
   },
   has: function has(key) {
    return !!getEntry(this, key);
   }
  });
  defineBuiltIns(Prototype, IS_MAP ? {
   get: function get(key) {
    var entry = getEntry(this, key);
    return entry && entry.value;
   },
   set: function set(key, value) {
    return define(this, key === 0 ? 0 : key, value);
   }
  } : {
   add: function add(value) {
    return define(this, value = value === 0 ? 0 : value, value);
   }
  });
  if (DESCRIPTORS)
   defineBuiltInAccessor(Prototype, 'size', {
    configurable: true,
    get: function () {
     return getInternalState(this).size;
    }
   });
  return Constructor;
 },
 setStrong: function (Constructor, CONSTRUCTOR_NAME, IS_MAP) {
  var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';
  var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);
  var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);
  defineIterator(Constructor, CONSTRUCTOR_NAME, function (iterated, kind) {
   setInternalState(this, {
    type: ITERATOR_NAME,
    target: iterated,
    state: getInternalCollectionState(iterated),
    kind: kind,
    last: undefined
   });
  }, function () {
   var state = getInternalIteratorState(this);
   var kind = state.kind;
   var entry = state.last;
   while (entry && entry.removed)
    entry = entry.previous;
   if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {
    state.target = undefined;
    return createIterResultObject(undefined, true);
   }
   if (kind === 'keys')
    return createIterResultObject(entry.key, false);
   if (kind === 'values')
    return createIterResultObject(entry.value, false);
   return createIterResultObject([
    entry.key,
    entry.value
   ], false);
  }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);
  setSpecies(CONSTRUCTOR_NAME);
 }
};

/***/ }),

/***/ 9609:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var defineBuiltIns = __webpack_require__(6880);
var getWeakData = (__webpack_require__(4694).getWeakData);
var anInstance = __webpack_require__(5834);
var anObject = __webpack_require__(4719);
var isNullOrUndefined = __webpack_require__(3734);
var isObject = __webpack_require__(7633);
var iterate = __webpack_require__(6837);
var ArrayIterationModule = __webpack_require__(2423);
var hasOwn = __webpack_require__(936);
var InternalStateModule = __webpack_require__(1649);
var setInternalState = InternalStateModule.set;
var internalStateGetterFor = InternalStateModule.getterFor;
var find = ArrayIterationModule.find;
var findIndex = ArrayIterationModule.findIndex;
var splice = uncurryThis([].splice);
var id = 0;
var uncaughtFrozenStore = function (state) {
 return state.frozen || (state.frozen = new UncaughtFrozenStore());
};
var UncaughtFrozenStore = function () {
 this.entries = [];
};
var findUncaughtFrozen = function (store, key) {
 return find(store.entries, function (it) {
  return it[0] === key;
 });
};
UncaughtFrozenStore.prototype = {
 get: function (key) {
  var entry = findUncaughtFrozen(this, key);
  if (entry)
   return entry[1];
 },
 has: function (key) {
  return !!findUncaughtFrozen(this, key);
 },
 set: function (key, value) {
  var entry = findUncaughtFrozen(this, key);
  if (entry)
   entry[1] = value;
  else
   this.entries.push([
    key,
    value
   ]);
 },
 'delete': function (key) {
  var index = findIndex(this.entries, function (it) {
   return it[0] === key;
  });
  if (~index)
   splice(this.entries, index, 1);
  return !!~index;
 }
};
module.exports = {
 getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {
  var Constructor = wrapper(function (that, iterable) {
   anInstance(that, Prototype);
   setInternalState(that, {
    type: CONSTRUCTOR_NAME,
    id: id++,
    frozen: undefined
   });
   if (!isNullOrUndefined(iterable))
    iterate(iterable, that[ADDER], {
     that: that,
     AS_ENTRIES: IS_MAP
    });
  });
  var Prototype = Constructor.prototype;
  var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);
  var define = function (that, key, value) {
   var state = getInternalState(that);
   var data = getWeakData(anObject(key), true);
   if (data === true)
    uncaughtFrozenStore(state).set(key, value);
   else
    data[state.id] = value;
   return that;
  };
  defineBuiltIns(Prototype, {
   'delete': function (key) {
    var state = getInternalState(this);
    if (!isObject(key))
     return false;
    var data = getWeakData(key);
    if (data === true)
     return uncaughtFrozenStore(state)['delete'](key);
    return data && hasOwn(data, state.id) && delete data[state.id];
   },
   has: function has(key) {
    var state = getInternalState(this);
    if (!isObject(key))
     return false;
    var data = getWeakData(key);
    if (data === true)
     return uncaughtFrozenStore(state).has(key);
    return data && hasOwn(data, state.id);
   }
  });
  defineBuiltIns(Prototype, IS_MAP ? {
   get: function get(key) {
    var state = getInternalState(this);
    if (isObject(key)) {
     var data = getWeakData(key);
     if (data === true)
      return uncaughtFrozenStore(state).get(key);
     return data ? data[state.id] : undefined;
    }
   },
   set: function set(key, value) {
    return define(this, key, value);
   }
  } : {
   add: function add(value) {
    return define(this, value, true);
   }
  });
  return Constructor;
 }
};

/***/ }),

/***/ 4981:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var global = __webpack_require__(9298);
var uncurryThis = __webpack_require__(8403);
var isForced = __webpack_require__(7007);
var defineBuiltIn = __webpack_require__(7041);
var InternalMetadataModule = __webpack_require__(4694);
var iterate = __webpack_require__(6837);
var anInstance = __webpack_require__(5834);
var isCallable = __webpack_require__(7316);
var isNullOrUndefined = __webpack_require__(3734);
var isObject = __webpack_require__(7633);
var fails = __webpack_require__(8154);
var checkCorrectnessOfIteration = __webpack_require__(1374);
var setToStringTag = __webpack_require__(7536);
var inheritIfRequired = __webpack_require__(7523);
module.exports = function (CONSTRUCTOR_NAME, wrapper, common) {
 var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;
 var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;
 var ADDER = IS_MAP ? 'set' : 'add';
 var NativeConstructor = global[CONSTRUCTOR_NAME];
 var NativePrototype = NativeConstructor && NativeConstructor.prototype;
 var Constructor = NativeConstructor;
 var exported = {};
 var fixMethod = function (KEY) {
  var uncurriedNativeMethod = uncurryThis(NativePrototype[KEY]);
  defineBuiltIn(NativePrototype, KEY, KEY === 'add' ? function add(value) {
   uncurriedNativeMethod(this, value === 0 ? 0 : value);
   return this;
  } : KEY === 'delete' ? function (key) {
   return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);
  } : KEY === 'get' ? function get(key) {
   return IS_WEAK && !isObject(key) ? undefined : uncurriedNativeMethod(this, key === 0 ? 0 : key);
  } : KEY === 'has' ? function has(key) {
   return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);
  } : function set(key, value) {
   uncurriedNativeMethod(this, key === 0 ? 0 : key, value);
   return this;
  });
 };
 var REPLACE = isForced(CONSTRUCTOR_NAME, !isCallable(NativeConstructor) || !(IS_WEAK || NativePrototype.forEach && !fails(function () {
  new NativeConstructor().entries().next();
 })));
 if (REPLACE) {
  Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);
  InternalMetadataModule.enable();
 } else if (isForced(CONSTRUCTOR_NAME, true)) {
  var instance = new Constructor();
  var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) !== instance;
  var THROWS_ON_PRIMITIVES = fails(function () {
   instance.has(1);
  });
  var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) {
   new NativeConstructor(iterable);
  });
  var BUGGY_ZERO = !IS_WEAK && fails(function () {
   var $instance = new NativeConstructor();
   var index = 5;
   while (index--)
    $instance[ADDER](index, index);
   return !$instance.has(-0);
  });
  if (!ACCEPT_ITERABLES) {
   Constructor = wrapper(function (dummy, iterable) {
    anInstance(dummy, NativePrototype);
    var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);
    if (!isNullOrUndefined(iterable))
     iterate(iterable, that[ADDER], {
      that: that,
      AS_ENTRIES: IS_MAP
     });
    return that;
   });
   Constructor.prototype = NativePrototype;
   NativePrototype.constructor = Constructor;
  }
  if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {
   fixMethod('delete');
   fixMethod('has');
   IS_MAP && fixMethod('get');
  }
  if (BUGGY_ZERO || HASNT_CHAINING)
   fixMethod(ADDER);
  if (IS_WEAK && NativePrototype.clear)
   delete NativePrototype.clear;
 }
 exported[CONSTRUCTOR_NAME] = Constructor;
 $({
  global: true,
  constructor: true,
  forced: Constructor !== NativeConstructor
 }, exported);
 setToStringTag(Constructor, CONSTRUCTOR_NAME);
 if (!IS_WEAK)
  common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);
 return Constructor;
};

/***/ }),

/***/ 1425:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var hasOwn = __webpack_require__(936);
var ownKeys = __webpack_require__(8953);
var getOwnPropertyDescriptorModule = __webpack_require__(5764);
var definePropertyModule = __webpack_require__(7744);
module.exports = function (target, source, exceptions) {
 var keys = ownKeys(source);
 var defineProperty = definePropertyModule.f;
 var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
 for (var i = 0; i < keys.length; i++) {
  var key = keys[i];
  if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {
   defineProperty(target, key, getOwnPropertyDescriptor(source, key));
  }
 }
};

/***/ }),

/***/ 2280:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(2292);
var MATCH = wellKnownSymbol('match');
module.exports = function (METHOD_NAME) {
 var regexp = /./;
 try {
  '/./'[METHOD_NAME](regexp);
 } catch (error1) {
  try {
   regexp[MATCH] = false;
   return '/./'[METHOD_NAME](regexp);
  } catch (error2) {
  }
 }
 return false;
};

/***/ }),

/***/ 7888:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
module.exports = !fails(function () {
 function F() {
 }
 F.prototype.constructor = null;
 return Object.getPrototypeOf(new F()) !== F.prototype;
});

/***/ }),

/***/ 1111:
/***/ ((module) => {


module.exports = function (value, done) {
 return {
  value: value,
  done: done
 };
};

/***/ }),

/***/ 9293:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var definePropertyModule = __webpack_require__(7744);
var createPropertyDescriptor = __webpack_require__(1198);
module.exports = DESCRIPTORS ? function (object, key, value) {
 return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
} : function (object, key, value) {
 object[key] = value;
 return object;
};

/***/ }),

/***/ 1198:
/***/ ((module) => {


module.exports = function (bitmap, value) {
 return {
  enumerable: !(bitmap & 1),
  configurable: !(bitmap & 2),
  writable: !(bitmap & 4),
  value: value
 };
};

/***/ }),

/***/ 8947:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toPropertyKey = __webpack_require__(4871);
var definePropertyModule = __webpack_require__(7744);
var createPropertyDescriptor = __webpack_require__(1198);
module.exports = function (object, key, value) {
 var propertyKey = toPropertyKey(key);
 if (propertyKey in object)
  definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));
 else
  object[propertyKey] = value;
};

/***/ }),

/***/ 3612:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(4719);
var ordinaryToPrimitive = __webpack_require__(2923);
var $TypeError = TypeError;
module.exports = function (hint) {
 anObject(this);
 if (hint === 'string' || hint === 'default')
  hint = 'string';
 else if (hint !== 'number')
  throw new $TypeError('Incorrect hint');
 return ordinaryToPrimitive(this, hint);
};

/***/ }),

/***/ 9691:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var makeBuiltIn = __webpack_require__(9687);
var defineProperty = __webpack_require__(7744);
module.exports = function (target, name, descriptor) {
 if (descriptor.get)
  makeBuiltIn(descriptor.get, name, { getter: true });
 if (descriptor.set)
  makeBuiltIn(descriptor.set, name, { setter: true });
 return defineProperty.f(target, name, descriptor);
};

/***/ }),

/***/ 7041:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isCallable = __webpack_require__(7316);
var definePropertyModule = __webpack_require__(7744);
var makeBuiltIn = __webpack_require__(9687);
var defineGlobalProperty = __webpack_require__(6000);
module.exports = function (O, key, value, options) {
 if (!options)
  options = {};
 var simple = options.enumerable;
 var name = options.name !== undefined ? options.name : key;
 if (isCallable(value))
  makeBuiltIn(value, name, options);
 if (options.global) {
  if (simple)
   O[key] = value;
  else
   defineGlobalProperty(key, value);
 } else {
  try {
   if (!options.unsafe)
    delete O[key];
   else if (O[key])
    simple = true;
  } catch (error) {
  }
  if (simple)
   O[key] = value;
  else
   definePropertyModule.f(O, key, {
    value: value,
    enumerable: false,
    configurable: !options.nonConfigurable,
    writable: !options.nonWritable
   });
 }
 return O;
};

/***/ }),

/***/ 6880:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var defineBuiltIn = __webpack_require__(7041);
module.exports = function (target, src, options) {
 for (var key in src)
  defineBuiltIn(target, key, src[key], options);
 return target;
};

/***/ }),

/***/ 6000:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var defineProperty = Object.defineProperty;
module.exports = function (key, value) {
 try {
  defineProperty(global, key, {
   value: value,
   configurable: true,
   writable: true
  });
 } catch (error) {
  global[key] = value;
 }
 return value;
};

/***/ }),

/***/ 2322:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var tryToString = __webpack_require__(9762);
var $TypeError = TypeError;
module.exports = function (O, P) {
 if (!delete O[P])
  throw new $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));
};

/***/ }),

/***/ 940:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
module.exports = !fails(function () {
 return Object.defineProperty({}, 1, {
  get: function () {
   return 7;
  }
 })[1] !== 7;
});

/***/ }),

/***/ 8126:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var tryNodeRequire = __webpack_require__(2276);
var PROPER_STRUCTURED_CLONE_TRANSFER = __webpack_require__(4837);
var structuredClone = global.structuredClone;
var $ArrayBuffer = global.ArrayBuffer;
var $MessageChannel = global.MessageChannel;
var detach = false;
var WorkerThreads, channel, buffer, $detach;
if (PROPER_STRUCTURED_CLONE_TRANSFER) {
 detach = function (transferable) {
  structuredClone(transferable, { transfer: [transferable] });
 };
} else if ($ArrayBuffer)
 try {
  if (!$MessageChannel) {
   WorkerThreads = tryNodeRequire('worker_threads');
   if (WorkerThreads)
    $MessageChannel = WorkerThreads.MessageChannel;
  }
  if ($MessageChannel) {
   channel = new $MessageChannel();
   buffer = new $ArrayBuffer(2);
   $detach = function (transferable) {
    channel.port1.postMessage(null, [transferable]);
   };
   if (buffer.byteLength === 2) {
    $detach(buffer);
    if (buffer.byteLength === 0)
     detach = $detach;
   }
  }
 } catch (error) {
 }
module.exports = detach;

/***/ }),

/***/ 1558:
/***/ ((module) => {


var documentAll = typeof document == 'object' && document.all;
var IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;
module.exports = {
 all: documentAll,
 IS_HTMLDDA: IS_HTMLDDA
};

/***/ }),

/***/ 5584:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var isObject = __webpack_require__(7633);
var document = global.document;
var EXISTS = isObject(document) && isObject(document.createElement);
module.exports = function (it) {
 return EXISTS ? document.createElement(it) : {};
};

/***/ }),

/***/ 4287:
/***/ ((module) => {


var $TypeError = TypeError;
var MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;
module.exports = function (it) {
 if (it > MAX_SAFE_INTEGER)
  throw $TypeError('Maximum allowed index exceeded');
 return it;
};

/***/ }),

/***/ 8560:
/***/ ((module) => {


module.exports = {
 IndexSizeError: {
  s: 'INDEX_SIZE_ERR',
  c: 1,
  m: 1
 },
 DOMStringSizeError: {
  s: 'DOMSTRING_SIZE_ERR',
  c: 2,
  m: 0
 },
 HierarchyRequestError: {
  s: 'HIERARCHY_REQUEST_ERR',
  c: 3,
  m: 1
 },
 WrongDocumentError: {
  s: 'WRONG_DOCUMENT_ERR',
  c: 4,
  m: 1
 },
 InvalidCharacterError: {
  s: 'INVALID_CHARACTER_ERR',
  c: 5,
  m: 1
 },
 NoDataAllowedError: {
  s: 'NO_DATA_ALLOWED_ERR',
  c: 6,
  m: 0
 },
 NoModificationAllowedError: {
  s: 'NO_MODIFICATION_ALLOWED_ERR',
  c: 7,
  m: 1
 },
 NotFoundError: {
  s: 'NOT_FOUND_ERR',
  c: 8,
  m: 1
 },
 NotSupportedError: {
  s: 'NOT_SUPPORTED_ERR',
  c: 9,
  m: 1
 },
 InUseAttributeError: {
  s: 'INUSE_ATTRIBUTE_ERR',
  c: 10,
  m: 1
 },
 InvalidStateError: {
  s: 'INVALID_STATE_ERR',
  c: 11,
  m: 1
 },
 SyntaxError: {
  s: 'SYNTAX_ERR',
  c: 12,
  m: 1
 },
 InvalidModificationError: {
  s: 'INVALID_MODIFICATION_ERR',
  c: 13,
  m: 1
 },
 NamespaceError: {
  s: 'NAMESPACE_ERR',
  c: 14,
  m: 1
 },
 InvalidAccessError: {
  s: 'INVALID_ACCESS_ERR',
  c: 15,
  m: 1
 },
 ValidationError: {
  s: 'VALIDATION_ERR',
  c: 16,
  m: 0
 },
 TypeMismatchError: {
  s: 'TYPE_MISMATCH_ERR',
  c: 17,
  m: 1
 },
 SecurityError: {
  s: 'SECURITY_ERR',
  c: 18,
  m: 1
 },
 NetworkError: {
  s: 'NETWORK_ERR',
  c: 19,
  m: 1
 },
 AbortError: {
  s: 'ABORT_ERR',
  c: 20,
  m: 1
 },
 URLMismatchError: {
  s: 'URL_MISMATCH_ERR',
  c: 21,
  m: 1
 },
 QuotaExceededError: {
  s: 'QUOTA_EXCEEDED_ERR',
  c: 22,
  m: 1
 },
 TimeoutError: {
  s: 'TIMEOUT_ERR',
  c: 23,
  m: 1
 },
 InvalidNodeTypeError: {
  s: 'INVALID_NODE_TYPE_ERR',
  c: 24,
  m: 1
 },
 DataCloneError: {
  s: 'DATA_CLONE_ERR',
  c: 25,
  m: 1
 }
};

/***/ }),

/***/ 2411:
/***/ ((module) => {


module.exports = {
 CSSRuleList: 0,
 CSSStyleDeclaration: 0,
 CSSValueList: 0,
 ClientRectList: 0,
 DOMRectList: 0,
 DOMStringList: 0,
 DOMTokenList: 1,
 DataTransferItemList: 0,
 FileList: 0,
 HTMLAllCollection: 0,
 HTMLCollection: 0,
 HTMLFormElement: 0,
 HTMLSelectElement: 0,
 MediaList: 0,
 MimeTypeArray: 0,
 NamedNodeMap: 0,
 NodeList: 1,
 PaintRequestList: 0,
 Plugin: 0,
 PluginArray: 0,
 SVGLengthList: 0,
 SVGNumberList: 0,
 SVGPathSegList: 0,
 SVGPointList: 0,
 SVGStringList: 0,
 SVGTransformList: 0,
 SourceBufferList: 0,
 StyleSheetList: 0,
 TextTrackCueList: 0,
 TextTrackList: 0,
 TouchList: 0
};

/***/ }),

/***/ 3942:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var documentCreateElement = __webpack_require__(5584);
var classList = documentCreateElement('span').classList;
var DOMTokenListPrototype = classList && classList.constructor && classList.constructor.prototype;
module.exports = DOMTokenListPrototype === Object.prototype ? undefined : DOMTokenListPrototype;

/***/ }),

/***/ 7614:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(234);
var firefox = userAgent.match(/firefox\/(\d+)/i);
module.exports = !!firefox && +firefox[1];

/***/ }),

/***/ 3413:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var IS_DENO = __webpack_require__(8471);
var IS_NODE = __webpack_require__(4864);
module.exports = !IS_DENO && !IS_NODE && typeof window == 'object' && typeof document == 'object';

/***/ }),

/***/ 8471:
/***/ ((module) => {


module.exports = typeof Deno == 'object' && Deno && typeof Deno.version == 'object';

/***/ }),

/***/ 7463:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var UA = __webpack_require__(234);
module.exports = /MSIE|Trident/.test(UA);

/***/ }),

/***/ 1458:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(234);
module.exports = /ipad|iphone|ipod/i.test(userAgent) && typeof Pebble != 'undefined';

/***/ }),

/***/ 2589:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(234);
module.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent);

/***/ }),

/***/ 4864:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var classof = __webpack_require__(8374);
module.exports = classof(global.process) === 'process';

/***/ }),

/***/ 8173:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(234);
module.exports = /web0s(?!.*chrome)/i.test(userAgent);

/***/ }),

/***/ 234:
/***/ ((module) => {


module.exports = typeof navigator != 'undefined' && String(navigator.userAgent) || '';

/***/ }),

/***/ 2171:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var userAgent = __webpack_require__(234);
var process = global.process;
var Deno = global.Deno;
var versions = process && process.versions || Deno && Deno.version;
var v8 = versions && versions.v8;
var match, version;
if (v8) {
 match = v8.split('.');
 version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);
}
if (!version && userAgent) {
 match = userAgent.match(/Edge\/(\d+)/);
 if (!match || match[1] >= 74) {
  match = userAgent.match(/Chrome\/(\d+)/);
  if (match)
   version = +match[1];
 }
}
module.exports = version;

/***/ }),

/***/ 7906:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(234);
var webkit = userAgent.match(/AppleWebKit\/(\d+)\./);
module.exports = !!webkit && +webkit[1];

/***/ }),

/***/ 298:
/***/ ((module) => {


module.exports = [
 'constructor',
 'hasOwnProperty',
 'isPrototypeOf',
 'propertyIsEnumerable',
 'toLocaleString',
 'toString',
 'valueOf'
];

/***/ }),

/***/ 34:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var $Error = Error;
var replace = uncurryThis(''.replace);
var TEST = function (arg) {
 return String(new $Error(arg).stack);
}('zxcasd');
var V8_OR_CHAKRA_STACK_ENTRY = /\n\s*at [^:]*:[^\n]*/;
var IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);
module.exports = function (stack, dropEntries) {
 if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {
  while (dropEntries--)
   stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');
 }
 return stack;
};

/***/ }),

/***/ 1931:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var createNonEnumerableProperty = __webpack_require__(9293);
var clearErrorStack = __webpack_require__(34);
var ERROR_STACK_INSTALLABLE = __webpack_require__(3437);
var captureStackTrace = Error.captureStackTrace;
module.exports = function (error, C, stack, dropEntries) {
 if (ERROR_STACK_INSTALLABLE) {
  if (captureStackTrace)
   captureStackTrace(error, C);
  else
   createNonEnumerableProperty(error, 'stack', clearErrorStack(stack, dropEntries));
 }
};

/***/ }),

/***/ 3437:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
var createPropertyDescriptor = __webpack_require__(1198);
module.exports = !fails(function () {
 var error = new Error('a');
 if (!('stack' in error))
  return true;
 Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));
 return error.stack !== 7;
});

/***/ }),

/***/ 3522:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var fails = __webpack_require__(8154);
var anObject = __webpack_require__(4719);
var normalizeStringArgument = __webpack_require__(1264);
var nativeErrorToString = Error.prototype.toString;
var INCORRECT_TO_STRING = fails(function () {
 if (DESCRIPTORS) {
  var object = Object.create(Object.defineProperty({}, 'name', {
   get: function () {
    return this === object;
   }
  }));
  if (nativeErrorToString.call(object) !== 'true')
   return true;
 }
 return nativeErrorToString.call({
  message: 1,
  name: 2
 }) !== '2: 1' || nativeErrorToString.call({}) !== 'Error';
});
module.exports = INCORRECT_TO_STRING ? function toString() {
 var O = anObject(this);
 var name = normalizeStringArgument(O.name, 'Error');
 var message = normalizeStringArgument(O.message);
 return !name ? message : !message ? name : name + ': ' + message;
} : nativeErrorToString;

/***/ }),

/***/ 4978:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var getOwnPropertyDescriptor = (__webpack_require__(5764).f);
var createNonEnumerableProperty = __webpack_require__(9293);
var defineBuiltIn = __webpack_require__(7041);
var defineGlobalProperty = __webpack_require__(6000);
var copyConstructorProperties = __webpack_require__(1425);
var isForced = __webpack_require__(7007);
module.exports = function (options, source) {
 var TARGET = options.target;
 var GLOBAL = options.global;
 var STATIC = options.stat;
 var FORCED, target, key, targetProperty, sourceProperty, descriptor;
 if (GLOBAL) {
  target = global;
 } else if (STATIC) {
  target = global[TARGET] || defineGlobalProperty(TARGET, {});
 } else {
  target = (global[TARGET] || {}).prototype;
 }
 if (target)
  for (key in source) {
   sourceProperty = source[key];
   if (options.dontCallGetSet) {
    descriptor = getOwnPropertyDescriptor(target, key);
    targetProperty = descriptor && descriptor.value;
   } else
    targetProperty = target[key];
   FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);
   if (!FORCED && targetProperty !== undefined) {
    if (typeof sourceProperty == typeof targetProperty)
     continue;
    copyConstructorProperties(sourceProperty, targetProperty);
   }
   if (options.sham || targetProperty && targetProperty.sham) {
    createNonEnumerableProperty(sourceProperty, 'sham', true);
   }
   defineBuiltIn(target, key, sourceProperty, options);
  }
};

/***/ }),

/***/ 8154:
/***/ ((module) => {


module.exports = function (exec) {
 try {
  return !!exec();
 } catch (error) {
  return true;
 }
};

/***/ }),

/***/ 4629:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(7942);
var uncurryThis = __webpack_require__(6218);
var defineBuiltIn = __webpack_require__(7041);
var regexpExec = __webpack_require__(2178);
var fails = __webpack_require__(8154);
var wellKnownSymbol = __webpack_require__(2292);
var createNonEnumerableProperty = __webpack_require__(9293);
var SPECIES = wellKnownSymbol('species');
var RegExpPrototype = RegExp.prototype;
module.exports = function (KEY, exec, FORCED, SHAM) {
 var SYMBOL = wellKnownSymbol(KEY);
 var DELEGATES_TO_SYMBOL = !fails(function () {
  var O = {};
  O[SYMBOL] = function () {
   return 7;
  };
  return ''[KEY](O) !== 7;
 });
 var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {
  var execCalled = false;
  var re = /a/;
  if (KEY === 'split') {
   re = {};
   re.constructor = {};
   re.constructor[SPECIES] = function () {
    return re;
   };
   re.flags = '';
   re[SYMBOL] = /./[SYMBOL];
  }
  re.exec = function () {
   execCalled = true;
   return null;
  };
  re[SYMBOL]('');
  return !execCalled;
 });
 if (!DELEGATES_TO_SYMBOL || !DELEGATES_TO_EXEC || FORCED) {
  var uncurriedNativeRegExpMethod = uncurryThis(/./[SYMBOL]);
  var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {
   var uncurriedNativeMethod = uncurryThis(nativeMethod);
   var $exec = regexp.exec;
   if ($exec === regexpExec || $exec === RegExpPrototype.exec) {
    if (DELEGATES_TO_SYMBOL && !forceStringMethod) {
     return {
      done: true,
      value: uncurriedNativeRegExpMethod(regexp, str, arg2)
     };
    }
    return {
     done: true,
     value: uncurriedNativeMethod(str, regexp, arg2)
    };
   }
   return { done: false };
  });
  defineBuiltIn(String.prototype, KEY, methods[0]);
  defineBuiltIn(RegExpPrototype, SYMBOL, methods[1]);
 }
 if (SHAM)
  createNonEnumerableProperty(RegExpPrototype[SYMBOL], 'sham', true);
};

/***/ }),

/***/ 7938:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isArray = __webpack_require__(6998);
var lengthOfArrayLike = __webpack_require__(451);
var doesNotExceedSafeInteger = __webpack_require__(4287);
var bind = __webpack_require__(7789);
var flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {
 var targetIndex = start;
 var sourceIndex = 0;
 var mapFn = mapper ? bind(mapper, thisArg) : false;
 var element, elementLen;
 while (sourceIndex < sourceLen) {
  if (sourceIndex in source) {
   element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];
   if (depth > 0 && isArray(element)) {
    elementLen = lengthOfArrayLike(element);
    targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;
   } else {
    doesNotExceedSafeInteger(targetIndex + 1);
    target[targetIndex] = element;
   }
   targetIndex++;
  }
  sourceIndex++;
 }
 return targetIndex;
};
module.exports = flattenIntoArray;

/***/ }),

/***/ 7010:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
module.exports = !fails(function () {
 return Object.isExtensible(Object.preventExtensions({}));
});

/***/ }),

/***/ 7294:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_BIND = __webpack_require__(2486);
var FunctionPrototype = Function.prototype;
var apply = FunctionPrototype.apply;
var call = FunctionPrototype.call;
module.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {
 return call.apply(apply, arguments);
});

/***/ }),

/***/ 7789:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(6218);
var aCallable = __webpack_require__(1782);
var NATIVE_BIND = __webpack_require__(2486);
var bind = uncurryThis(uncurryThis.bind);
module.exports = function (fn, that) {
 aCallable(fn);
 return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function () {
  return fn.apply(that, arguments);
 };
};

/***/ }),

/***/ 2486:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
module.exports = !fails(function () {
 var test = function () {
 }.bind();
 return typeof test != 'function' || test.hasOwnProperty('prototype');
});

/***/ }),

/***/ 6520:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var aCallable = __webpack_require__(1782);
var isObject = __webpack_require__(7633);
var hasOwn = __webpack_require__(936);
var arraySlice = __webpack_require__(2251);
var NATIVE_BIND = __webpack_require__(2486);
var $Function = Function;
var concat = uncurryThis([].concat);
var join = uncurryThis([].join);
var factories = {};
var construct = function (C, argsLength, args) {
 if (!hasOwn(factories, argsLength)) {
  var list = [];
  var i = 0;
  for (; i < argsLength; i++)
   list[i] = 'a[' + i + ']';
  factories[argsLength] = $Function('C,a', 'return new C(' + join(list, ',') + ')');
 }
 return factories[argsLength](C, args);
};
module.exports = NATIVE_BIND ? $Function.bind : function bind(that) {
 var F = aCallable(this);
 var Prototype = F.prototype;
 var partArgs = arraySlice(arguments, 1);
 var boundFunction = function bound() {
  var args = concat(partArgs, arraySlice(arguments));
  return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);
 };
 if (isObject(Prototype))
  boundFunction.prototype = Prototype;
 return boundFunction;
};

/***/ }),

/***/ 2026:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_BIND = __webpack_require__(2486);
var call = Function.prototype.call;
module.exports = NATIVE_BIND ? call.bind(call) : function () {
 return call.apply(call, arguments);
};

/***/ }),

/***/ 5145:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var hasOwn = __webpack_require__(936);
var FunctionPrototype = Function.prototype;
var getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;
var EXISTS = hasOwn(FunctionPrototype, 'name');
var PROPER = EXISTS && function something() {
}.name === 'something';
var CONFIGURABLE = EXISTS && (!DESCRIPTORS || DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable);
module.exports = {
 EXISTS: EXISTS,
 PROPER: PROPER,
 CONFIGURABLE: CONFIGURABLE
};

/***/ }),

/***/ 1299:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var aCallable = __webpack_require__(1782);
module.exports = function (object, key, method) {
 try {
  return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));
 } catch (error) {
 }
};

/***/ }),

/***/ 6218:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classofRaw = __webpack_require__(8374);
var uncurryThis = __webpack_require__(8403);
module.exports = function (fn) {
 if (classofRaw(fn) === 'Function')
  return uncurryThis(fn);
};

/***/ }),

/***/ 8403:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_BIND = __webpack_require__(2486);
var FunctionPrototype = Function.prototype;
var call = FunctionPrototype.call;
var uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);
module.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {
 return function () {
  return call.apply(fn, arguments);
 };
};

/***/ }),

/***/ 7187:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var isCallable = __webpack_require__(7316);
var aFunction = function (argument) {
 return isCallable(argument) ? argument : undefined;
};
module.exports = function (namespace, method) {
 return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];
};

/***/ }),

/***/ 9235:
/***/ ((module) => {


module.exports = function (obj) {
 return {
  iterator: obj,
  next: obj.next,
  done: false
 };
};

/***/ }),

/***/ 273:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classof = __webpack_require__(8329);
var getMethod = __webpack_require__(8486);
var isNullOrUndefined = __webpack_require__(3734);
var Iterators = __webpack_require__(6596);
var wellKnownSymbol = __webpack_require__(2292);
var ITERATOR = wellKnownSymbol('iterator');
module.exports = function (it) {
 if (!isNullOrUndefined(it))
  return getMethod(it, ITERATOR) || getMethod(it, '@@iterator') || Iterators[classof(it)];
};

/***/ }),

/***/ 7612:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
var aCallable = __webpack_require__(1782);
var anObject = __webpack_require__(4719);
var tryToString = __webpack_require__(9762);
var getIteratorMethod = __webpack_require__(273);
var $TypeError = TypeError;
module.exports = function (argument, usingIterator) {
 var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;
 if (aCallable(iteratorMethod))
  return anObject(call(iteratorMethod, argument));
 throw new $TypeError(tryToString(argument) + ' is not iterable');
};

/***/ }),

/***/ 1801:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var isArray = __webpack_require__(6998);
var isCallable = __webpack_require__(7316);
var classof = __webpack_require__(8374);
var toString = __webpack_require__(5730);
var push = uncurryThis([].push);
module.exports = function (replacer) {
 if (isCallable(replacer))
  return replacer;
 if (!isArray(replacer))
  return;
 var rawLength = replacer.length;
 var keys = [];
 for (var i = 0; i < rawLength; i++) {
  var element = replacer[i];
  if (typeof element == 'string')
   push(keys, element);
  else if (typeof element == 'number' || classof(element) === 'Number' || classof(element) === 'String')
   push(keys, toString(element));
 }
 var keysLength = keys.length;
 var root = true;
 return function (key, value) {
  if (root) {
   root = false;
   return value;
  }
  if (isArray(this))
   return value;
  for (var j = 0; j < keysLength; j++)
   if (keys[j] === key)
    return value;
 };
};

/***/ }),

/***/ 8486:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aCallable = __webpack_require__(1782);
var isNullOrUndefined = __webpack_require__(3734);
module.exports = function (V, P) {
 var func = V[P];
 return isNullOrUndefined(func) ? undefined : aCallable(func);
};

/***/ }),

/***/ 1096:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aCallable = __webpack_require__(1782);
var anObject = __webpack_require__(4719);
var call = __webpack_require__(2026);
var toIntegerOrInfinity = __webpack_require__(1003);
var getIteratorDirect = __webpack_require__(9235);
var INVALID_SIZE = 'Invalid size';
var $RangeError = RangeError;
var $TypeError = TypeError;
var max = Math.max;
var SetRecord = function (set, size, has, keys) {
 this.set = set;
 this.size = size;
 this.has = has;
 this.keys = keys;
};
SetRecord.prototype = {
 getIterator: function () {
  return getIteratorDirect(anObject(call(this.keys, this.set)));
 },
 includes: function (it) {
  return call(this.has, this.set, it);
 }
};
module.exports = function (obj) {
 anObject(obj);
 var numSize = +obj.size;
 if (numSize !== numSize)
  throw new $TypeError(INVALID_SIZE);
 var intSize = toIntegerOrInfinity(numSize);
 if (intSize < 0)
  throw new $RangeError(INVALID_SIZE);
 return new SetRecord(obj, max(intSize, 0), aCallable(obj.has), aCallable(obj.keys));
};

/***/ }),

/***/ 1634:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var toObject = __webpack_require__(2007);
var floor = Math.floor;
var charAt = uncurryThis(''.charAt);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);
var SUBSTITUTION_SYMBOLS = /\$([$&'`]|\d{1,2}|<[^>]*>)/g;
var SUBSTITUTION_SYMBOLS_NO_NAMED = /\$([$&'`]|\d{1,2})/g;
module.exports = function (matched, str, position, captures, namedCaptures, replacement) {
 var tailPos = position + matched.length;
 var m = captures.length;
 var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;
 if (namedCaptures !== undefined) {
  namedCaptures = toObject(namedCaptures);
  symbols = SUBSTITUTION_SYMBOLS;
 }
 return replace(replacement, symbols, function (match, ch) {
  var capture;
  switch (charAt(ch, 0)) {
  case '$':
   return '$';
  case '&':
   return matched;
  case '`':
   return stringSlice(str, 0, position);
  case "'":
   return stringSlice(str, tailPos);
  case '<':
   capture = namedCaptures[stringSlice(ch, 1, -1)];
   break;
  default:
   var n = +ch;
   if (n === 0)
    return match;
   if (n > m) {
    var f = floor(n / 10);
    if (f === 0)
     return match;
    if (f <= m)
     return captures[f - 1] === undefined ? charAt(ch, 1) : captures[f - 1] + charAt(ch, 1);
    return match;
   }
   capture = captures[n - 1];
  }
  return capture === undefined ? '' : capture;
 });
};

/***/ }),

/***/ 9298:
/***/ (function(module) {


var check = function (it) {
 return it && it.Math === Math && it;
};
module.exports = check(typeof globalThis == 'object' && globalThis) || check(typeof window == 'object' && window) || check(typeof self == 'object' && self) || check(typeof global == 'object' && global) || check(typeof this == 'object' && this) || (function () {
 return this;
}()) || Function('return this')();

/***/ }),

/***/ 936:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var toObject = __webpack_require__(2007);
var hasOwnProperty = uncurryThis({}.hasOwnProperty);
module.exports = Object.hasOwn || function hasOwn(it, key) {
 return hasOwnProperty(toObject(it), key);
};

/***/ }),

/***/ 6010:
/***/ ((module) => {


module.exports = {};

/***/ }),

/***/ 5285:
/***/ ((module) => {


module.exports = function (a, b) {
 try {
  arguments.length === 1 ? console.error(a) : console.error(a, b);
 } catch (error) {
 }
};

/***/ }),

/***/ 519:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(7187);
module.exports = getBuiltIn('document', 'documentElement');

/***/ }),

/***/ 9394:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var fails = __webpack_require__(8154);
var createElement = __webpack_require__(5584);
module.exports = !DESCRIPTORS && !fails(function () {
 return Object.defineProperty(createElement('div'), 'a', {
  get: function () {
   return 7;
  }
 }).a !== 7;
});

/***/ }),

/***/ 3106:
/***/ ((module) => {


var $Array = Array;
var abs = Math.abs;
var pow = Math.pow;
var floor = Math.floor;
var log = Math.log;
var LN2 = Math.LN2;
var pack = function (number, mantissaLength, bytes) {
 var buffer = $Array(bytes);
 var exponentLength = bytes * 8 - mantissaLength - 1;
 var eMax = (1 << exponentLength) - 1;
 var eBias = eMax >> 1;
 var rt = mantissaLength === 23 ? pow(2, -24) - pow(2, -77) : 0;
 var sign = number < 0 || number === 0 && 1 / number < 0 ? 1 : 0;
 var index = 0;
 var exponent, mantissa, c;
 number = abs(number);
 if (number !== number || number === Infinity) {
  mantissa = number !== number ? 1 : 0;
  exponent = eMax;
 } else {
  exponent = floor(log(number) / LN2);
  c = pow(2, -exponent);
  if (number * c < 1) {
   exponent--;
   c *= 2;
  }
  if (exponent + eBias >= 1) {
   number += rt / c;
  } else {
   number += rt * pow(2, 1 - eBias);
  }
  if (number * c >= 2) {
   exponent++;
   c /= 2;
  }
  if (exponent + eBias >= eMax) {
   mantissa = 0;
   exponent = eMax;
  } else if (exponent + eBias >= 1) {
   mantissa = (number * c - 1) * pow(2, mantissaLength);
   exponent += eBias;
  } else {
   mantissa = number * pow(2, eBias - 1) * pow(2, mantissaLength);
   exponent = 0;
  }
 }
 while (mantissaLength >= 8) {
  buffer[index++] = mantissa & 255;
  mantissa /= 256;
  mantissaLength -= 8;
 }
 exponent = exponent << mantissaLength | mantissa;
 exponentLength += mantissaLength;
 while (exponentLength > 0) {
  buffer[index++] = exponent & 255;
  exponent /= 256;
  exponentLength -= 8;
 }
 buffer[--index] |= sign * 128;
 return buffer;
};
var unpack = function (buffer, mantissaLength) {
 var bytes = buffer.length;
 var exponentLength = bytes * 8 - mantissaLength - 1;
 var eMax = (1 << exponentLength) - 1;
 var eBias = eMax >> 1;
 var nBits = exponentLength - 7;
 var index = bytes - 1;
 var sign = buffer[index--];
 var exponent = sign & 127;
 var mantissa;
 sign >>= 7;
 while (nBits > 0) {
  exponent = exponent * 256 + buffer[index--];
  nBits -= 8;
 }
 mantissa = exponent & (1 << -nBits) - 1;
 exponent >>= -nBits;
 nBits += mantissaLength;
 while (nBits > 0) {
  mantissa = mantissa * 256 + buffer[index--];
  nBits -= 8;
 }
 if (exponent === 0) {
  exponent = 1 - eBias;
 } else if (exponent === eMax) {
  return mantissa ? NaN : sign ? -Infinity : Infinity;
 } else {
  mantissa += pow(2, mantissaLength);
  exponent -= eBias;
 }
 return (sign ? -1 : 1) * mantissa * pow(2, exponent - mantissaLength);
};
module.exports = {
 pack: pack,
 unpack: unpack
};

/***/ }),

/***/ 3622:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var fails = __webpack_require__(8154);
var classof = __webpack_require__(8374);
var $Object = Object;
var split = uncurryThis(''.split);
module.exports = fails(function () {
 return !$Object('z').propertyIsEnumerable(0);
}) ? function (it) {
 return classof(it) === 'String' ? split(it, '') : $Object(it);
} : $Object;

/***/ }),

/***/ 7523:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isCallable = __webpack_require__(7316);
var isObject = __webpack_require__(7633);
var setPrototypeOf = __webpack_require__(9763);
module.exports = function ($this, dummy, Wrapper) {
 var NewTarget, NewTargetPrototype;
 if (setPrototypeOf && isCallable(NewTarget = dummy.constructor) && NewTarget !== Wrapper && isObject(NewTargetPrototype = NewTarget.prototype) && NewTargetPrototype !== Wrapper.prototype)
  setPrototypeOf($this, NewTargetPrototype);
 return $this;
};

/***/ }),

/***/ 4993:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var isCallable = __webpack_require__(7316);
var store = __webpack_require__(7542);
var functionToString = uncurryThis(Function.toString);
if (!isCallable(store.inspectSource)) {
 store.inspectSource = function (it) {
  return functionToString(it);
 };
}
module.exports = store.inspectSource;

/***/ }),

/***/ 8422:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isObject = __webpack_require__(7633);
var createNonEnumerableProperty = __webpack_require__(9293);
module.exports = function (O, options) {
 if (isObject(options) && 'cause' in options) {
  createNonEnumerableProperty(O, 'cause', options.cause);
 }
};

/***/ }),

/***/ 4694:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var uncurryThis = __webpack_require__(8403);
var hiddenKeys = __webpack_require__(6010);
var isObject = __webpack_require__(7633);
var hasOwn = __webpack_require__(936);
var defineProperty = (__webpack_require__(7744).f);
var getOwnPropertyNamesModule = __webpack_require__(5455);
var getOwnPropertyNamesExternalModule = __webpack_require__(2329);
var isExtensible = __webpack_require__(2191);
var uid = __webpack_require__(7561);
var FREEZING = __webpack_require__(7010);
var REQUIRED = false;
var METADATA = uid('meta');
var id = 0;
var setMetadata = function (it) {
 defineProperty(it, METADATA, {
  value: {
   objectID: 'O' + id++,
   weakData: {}
  }
 });
};
var fastKey = function (it, create) {
 if (!isObject(it))
  return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;
 if (!hasOwn(it, METADATA)) {
  if (!isExtensible(it))
   return 'F';
  if (!create)
   return 'E';
  setMetadata(it);
 }
 return it[METADATA].objectID;
};
var getWeakData = function (it, create) {
 if (!hasOwn(it, METADATA)) {
  if (!isExtensible(it))
   return true;
  if (!create)
   return false;
  setMetadata(it);
 }
 return it[METADATA].weakData;
};
var onFreeze = function (it) {
 if (FREEZING && REQUIRED && isExtensible(it) && !hasOwn(it, METADATA))
  setMetadata(it);
 return it;
};
var enable = function () {
 meta.enable = function () {
 };
 REQUIRED = true;
 var getOwnPropertyNames = getOwnPropertyNamesModule.f;
 var splice = uncurryThis([].splice);
 var test = {};
 test[METADATA] = 1;
 if (getOwnPropertyNames(test).length) {
  getOwnPropertyNamesModule.f = function (it) {
   var result = getOwnPropertyNames(it);
   for (var i = 0, length = result.length; i < length; i++) {
    if (result[i] === METADATA) {
     splice(result, i, 1);
     break;
    }
   }
   return result;
  };
  $({
   target: 'Object',
   stat: true,
   forced: true
  }, { getOwnPropertyNames: getOwnPropertyNamesExternalModule.f });
 }
};
var meta = module.exports = {
 enable: enable,
 fastKey: fastKey,
 getWeakData: getWeakData,
 onFreeze: onFreeze
};
hiddenKeys[METADATA] = true;

/***/ }),

/***/ 1649:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_WEAK_MAP = __webpack_require__(8443);
var global = __webpack_require__(9298);
var isObject = __webpack_require__(7633);
var createNonEnumerableProperty = __webpack_require__(9293);
var hasOwn = __webpack_require__(936);
var shared = __webpack_require__(7542);
var sharedKey = __webpack_require__(3727);
var hiddenKeys = __webpack_require__(6010);
var OBJECT_ALREADY_INITIALIZED = 'Object already initialized';
var TypeError = global.TypeError;
var WeakMap = global.WeakMap;
var set, get, has;
var enforce = function (it) {
 return has(it) ? get(it) : set(it, {});
};
var getterFor = function (TYPE) {
 return function (it) {
  var state;
  if (!isObject(it) || (state = get(it)).type !== TYPE) {
   throw new TypeError('Incompatible receiver, ' + TYPE + ' required');
  }
  return state;
 };
};
if (NATIVE_WEAK_MAP || shared.state) {
 var store = shared.state || (shared.state = new WeakMap());
 store.get = store.get;
 store.has = store.has;
 store.set = store.set;
 set = function (it, metadata) {
  if (store.has(it))
   throw new TypeError(OBJECT_ALREADY_INITIALIZED);
  metadata.facade = it;
  store.set(it, metadata);
  return metadata;
 };
 get = function (it) {
  return store.get(it) || {};
 };
 has = function (it) {
  return store.has(it);
 };
} else {
 var STATE = sharedKey('state');
 hiddenKeys[STATE] = true;
 set = function (it, metadata) {
  if (hasOwn(it, STATE))
   throw new TypeError(OBJECT_ALREADY_INITIALIZED);
  metadata.facade = it;
  createNonEnumerableProperty(it, STATE, metadata);
  return metadata;
 };
 get = function (it) {
  return hasOwn(it, STATE) ? it[STATE] : {};
 };
 has = function (it) {
  return hasOwn(it, STATE);
 };
}
module.exports = {
 set: set,
 get: get,
 has: has,
 enforce: enforce,
 getterFor: getterFor
};

/***/ }),

/***/ 5191:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(2292);
var Iterators = __webpack_require__(6596);
var ITERATOR = wellKnownSymbol('iterator');
var ArrayPrototype = Array.prototype;
module.exports = function (it) {
 return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);
};

/***/ }),

/***/ 6998:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classof = __webpack_require__(8374);
module.exports = Array.isArray || function isArray(argument) {
 return classof(argument) === 'Array';
};

/***/ }),

/***/ 5986:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classof = __webpack_require__(8329);
module.exports = function (it) {
 var klass = classof(it);
 return klass === 'BigInt64Array' || klass === 'BigUint64Array';
};

/***/ }),

/***/ 7316:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $documentAll = __webpack_require__(1558);
var documentAll = $documentAll.all;
module.exports = $documentAll.IS_HTMLDDA ? function (argument) {
 return typeof argument == 'function' || argument === documentAll;
} : function (argument) {
 return typeof argument == 'function';
};

/***/ }),

/***/ 1694:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var fails = __webpack_require__(8154);
var isCallable = __webpack_require__(7316);
var classof = __webpack_require__(8329);
var getBuiltIn = __webpack_require__(7187);
var inspectSource = __webpack_require__(4993);
var noop = function () {
};
var empty = [];
var construct = getBuiltIn('Reflect', 'construct');
var constructorRegExp = /^\s*(?:class|function)\b/;
var exec = uncurryThis(constructorRegExp.exec);
var INCORRECT_TO_STRING = !constructorRegExp.test(noop);
var isConstructorModern = function isConstructor(argument) {
 if (!isCallable(argument))
  return false;
 try {
  construct(noop, empty, argument);
  return true;
 } catch (error) {
  return false;
 }
};
var isConstructorLegacy = function isConstructor(argument) {
 if (!isCallable(argument))
  return false;
 switch (classof(argument)) {
 case 'AsyncFunction':
 case 'GeneratorFunction':
 case 'AsyncGeneratorFunction':
  return false;
 }
 try {
  return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));
 } catch (error) {
  return true;
 }
};
isConstructorLegacy.sham = true;
module.exports = !construct || fails(function () {
 var called;
 return isConstructorModern(isConstructorModern.call) || !isConstructorModern(Object) || !isConstructorModern(function () {
  called = true;
 }) || called;
}) ? isConstructorLegacy : isConstructorModern;

/***/ }),

/***/ 3374:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var hasOwn = __webpack_require__(936);
module.exports = function (descriptor) {
 return descriptor !== undefined && (hasOwn(descriptor, 'value') || hasOwn(descriptor, 'writable'));
};

/***/ }),

/***/ 7007:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
var isCallable = __webpack_require__(7316);
var replacement = /#|\.prototype\./;
var isForced = function (feature, detection) {
 var value = data[normalize(feature)];
 return value === POLYFILL ? true : value === NATIVE ? false : isCallable(detection) ? fails(detection) : !!detection;
};
var normalize = isForced.normalize = function (string) {
 return String(string).replace(replacement, '.').toLowerCase();
};
var data = isForced.data = {};
var NATIVE = isForced.NATIVE = 'N';
var POLYFILL = isForced.POLYFILL = 'P';
module.exports = isForced;

/***/ }),

/***/ 987:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isObject = __webpack_require__(7633);
var floor = Math.floor;
module.exports = Number.isInteger || function isInteger(it) {
 return !isObject(it) && isFinite(it) && floor(it) === it;
};

/***/ }),

/***/ 3734:
/***/ ((module) => {


module.exports = function (it) {
 return it === null || it === undefined;
};

/***/ }),

/***/ 7633:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isCallable = __webpack_require__(7316);
var $documentAll = __webpack_require__(1558);
var documentAll = $documentAll.all;
module.exports = $documentAll.IS_HTMLDDA ? function (it) {
 return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;
} : function (it) {
 return typeof it == 'object' ? it !== null : isCallable(it);
};

/***/ }),

/***/ 2554:
/***/ ((module) => {


module.exports = false;

/***/ }),

/***/ 6660:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isObject = __webpack_require__(7633);
var classof = __webpack_require__(8374);
var wellKnownSymbol = __webpack_require__(2292);
var MATCH = wellKnownSymbol('match');
module.exports = function (it) {
 var isRegExp;
 return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) === 'RegExp');
};

/***/ }),

/***/ 7814:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(7187);
var isCallable = __webpack_require__(7316);
var isPrototypeOf = __webpack_require__(2658);
var USE_SYMBOL_AS_UID = __webpack_require__(7960);
var $Object = Object;
module.exports = USE_SYMBOL_AS_UID ? function (it) {
 return typeof it == 'symbol';
} : function (it) {
 var $Symbol = getBuiltIn('Symbol');
 return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));
};

/***/ }),

/***/ 5504:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
module.exports = function (record, fn, ITERATOR_INSTEAD_OF_RECORD) {
 var iterator = ITERATOR_INSTEAD_OF_RECORD ? record : record.iterator;
 var next = record.next;
 var step, result;
 while (!(step = call(next, iterator)).done) {
  result = fn(step.value);
  if (result !== undefined)
   return result;
 }
};

/***/ }),

/***/ 6837:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var bind = __webpack_require__(7789);
var call = __webpack_require__(2026);
var anObject = __webpack_require__(4719);
var tryToString = __webpack_require__(9762);
var isArrayIteratorMethod = __webpack_require__(5191);
var lengthOfArrayLike = __webpack_require__(451);
var isPrototypeOf = __webpack_require__(2658);
var getIterator = __webpack_require__(7612);
var getIteratorMethod = __webpack_require__(273);
var iteratorClose = __webpack_require__(3316);
var $TypeError = TypeError;
var Result = function (stopped, result) {
 this.stopped = stopped;
 this.result = result;
};
var ResultPrototype = Result.prototype;
module.exports = function (iterable, unboundFunction, options) {
 var that = options && options.that;
 var AS_ENTRIES = !!(options && options.AS_ENTRIES);
 var IS_RECORD = !!(options && options.IS_RECORD);
 var IS_ITERATOR = !!(options && options.IS_ITERATOR);
 var INTERRUPTED = !!(options && options.INTERRUPTED);
 var fn = bind(unboundFunction, that);
 var iterator, iterFn, index, length, result, next, step;
 var stop = function (condition) {
  if (iterator)
   iteratorClose(iterator, 'normal', condition);
  return new Result(true, condition);
 };
 var callFn = function (value) {
  if (AS_ENTRIES) {
   anObject(value);
   return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);
  }
  return INTERRUPTED ? fn(value, stop) : fn(value);
 };
 if (IS_RECORD) {
  iterator = iterable.iterator;
 } else if (IS_ITERATOR) {
  iterator = iterable;
 } else {
  iterFn = getIteratorMethod(iterable);
  if (!iterFn)
   throw new $TypeError(tryToString(iterable) + ' is not iterable');
  if (isArrayIteratorMethod(iterFn)) {
   for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {
    result = callFn(iterable[index]);
    if (result && isPrototypeOf(ResultPrototype, result))
     return result;
   }
   return new Result(false);
  }
  iterator = getIterator(iterable, iterFn);
 }
 next = IS_RECORD ? iterable.next : iterator.next;
 while (!(step = call(next, iterator)).done) {
  try {
   result = callFn(step.value);
  } catch (error) {
   iteratorClose(iterator, 'throw', error);
  }
  if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result))
   return result;
 }
 return new Result(false);
};

/***/ }),

/***/ 3316:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
var anObject = __webpack_require__(4719);
var getMethod = __webpack_require__(8486);
module.exports = function (iterator, kind, value) {
 var innerResult, innerError;
 anObject(iterator);
 try {
  innerResult = getMethod(iterator, 'return');
  if (!innerResult) {
   if (kind === 'throw')
    throw value;
   return value;
  }
  innerResult = call(innerResult, iterator);
 } catch (error) {
  innerError = true;
  innerResult = error;
 }
 if (kind === 'throw')
  throw value;
 if (innerError)
  throw innerResult;
 anObject(innerResult);
 return value;
};

/***/ }),

/***/ 552:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var IteratorPrototype = (__webpack_require__(5238).IteratorPrototype);
var create = __webpack_require__(6941);
var createPropertyDescriptor = __webpack_require__(1198);
var setToStringTag = __webpack_require__(7536);
var Iterators = __webpack_require__(6596);
var returnThis = function () {
 return this;
};
module.exports = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {
 var TO_STRING_TAG = NAME + ' Iterator';
 IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(+!ENUMERABLE_NEXT, next) });
 setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);
 Iterators[TO_STRING_TAG] = returnThis;
 return IteratorConstructor;
};

/***/ }),

/***/ 375:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
var create = __webpack_require__(6941);
var createNonEnumerableProperty = __webpack_require__(9293);
var defineBuiltIns = __webpack_require__(6880);
var wellKnownSymbol = __webpack_require__(2292);
var InternalStateModule = __webpack_require__(1649);
var getMethod = __webpack_require__(8486);
var IteratorPrototype = (__webpack_require__(5238).IteratorPrototype);
var createIterResultObject = __webpack_require__(1111);
var iteratorClose = __webpack_require__(3316);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var ITERATOR_HELPER = 'IteratorHelper';
var WRAP_FOR_VALID_ITERATOR = 'WrapForValidIterator';
var setInternalState = InternalStateModule.set;
var createIteratorProxyPrototype = function (IS_ITERATOR) {
 var getInternalState = InternalStateModule.getterFor(IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER);
 return defineBuiltIns(create(IteratorPrototype), {
  next: function next() {
   var state = getInternalState(this);
   if (IS_ITERATOR)
    return state.nextHandler();
   try {
    var result = state.done ? undefined : state.nextHandler();
    return createIterResultObject(result, state.done);
   } catch (error) {
    state.done = true;
    throw error;
   }
  },
  'return': function () {
   var state = getInternalState(this);
   var iterator = state.iterator;
   state.done = true;
   if (IS_ITERATOR) {
    var returnMethod = getMethod(iterator, 'return');
    return returnMethod ? call(returnMethod, iterator) : createIterResultObject(undefined, true);
   }
   if (state.inner)
    try {
     iteratorClose(state.inner.iterator, 'normal');
    } catch (error) {
     return iteratorClose(iterator, 'throw', error);
    }
   iteratorClose(iterator, 'normal');
   return createIterResultObject(undefined, true);
  }
 });
};
var WrapForValidIteratorPrototype = createIteratorProxyPrototype(true);
var IteratorHelperPrototype = createIteratorProxyPrototype(false);
createNonEnumerableProperty(IteratorHelperPrototype, TO_STRING_TAG, 'Iterator Helper');
module.exports = function (nextHandler, IS_ITERATOR) {
 var IteratorProxy = function Iterator(record, state) {
  if (state) {
   state.iterator = record.iterator;
   state.next = record.next;
  } else
   state = record;
  state.type = IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER;
  state.nextHandler = nextHandler;
  state.counter = 0;
  state.done = false;
  setInternalState(this, state);
 };
 IteratorProxy.prototype = IS_ITERATOR ? WrapForValidIteratorPrototype : IteratorHelperPrototype;
 return IteratorProxy;
};

/***/ }),

/***/ 7301:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var call = __webpack_require__(2026);
var IS_PURE = __webpack_require__(2554);
var FunctionName = __webpack_require__(5145);
var isCallable = __webpack_require__(7316);
var createIteratorConstructor = __webpack_require__(552);
var getPrototypeOf = __webpack_require__(2176);
var setPrototypeOf = __webpack_require__(9763);
var setToStringTag = __webpack_require__(7536);
var createNonEnumerableProperty = __webpack_require__(9293);
var defineBuiltIn = __webpack_require__(7041);
var wellKnownSymbol = __webpack_require__(2292);
var Iterators = __webpack_require__(6596);
var IteratorsCore = __webpack_require__(5238);
var PROPER_FUNCTION_NAME = FunctionName.PROPER;
var CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;
var IteratorPrototype = IteratorsCore.IteratorPrototype;
var BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;
var ITERATOR = wellKnownSymbol('iterator');
var KEYS = 'keys';
var VALUES = 'values';
var ENTRIES = 'entries';
var returnThis = function () {
 return this;
};
module.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {
 createIteratorConstructor(IteratorConstructor, NAME, next);
 var getIterationMethod = function (KIND) {
  if (KIND === DEFAULT && defaultIterator)
   return defaultIterator;
  if (!BUGGY_SAFARI_ITERATORS && KIND && KIND in IterablePrototype)
   return IterablePrototype[KIND];
  switch (KIND) {
  case KEYS:
   return function keys() {
    return new IteratorConstructor(this, KIND);
   };
  case VALUES:
   return function values() {
    return new IteratorConstructor(this, KIND);
   };
  case ENTRIES:
   return function entries() {
    return new IteratorConstructor(this, KIND);
   };
  }
  return function () {
   return new IteratorConstructor(this);
  };
 };
 var TO_STRING_TAG = NAME + ' Iterator';
 var INCORRECT_VALUES_NAME = false;
 var IterablePrototype = Iterable.prototype;
 var nativeIterator = IterablePrototype[ITERATOR] || IterablePrototype['@@iterator'] || DEFAULT && IterablePrototype[DEFAULT];
 var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);
 var anyNativeIterator = NAME === 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;
 var CurrentIteratorPrototype, methods, KEY;
 if (anyNativeIterator) {
  CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));
  if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {
   if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {
    if (setPrototypeOf) {
     setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);
    } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {
     defineBuiltIn(CurrentIteratorPrototype, ITERATOR, returnThis);
    }
   }
   setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);
   if (IS_PURE)
    Iterators[TO_STRING_TAG] = returnThis;
  }
 }
 if (PROPER_FUNCTION_NAME && DEFAULT === VALUES && nativeIterator && nativeIterator.name !== VALUES) {
  if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {
   createNonEnumerableProperty(IterablePrototype, 'name', VALUES);
  } else {
   INCORRECT_VALUES_NAME = true;
   defaultIterator = function values() {
    return call(nativeIterator, this);
   };
  }
 }
 if (DEFAULT) {
  methods = {
   values: getIterationMethod(VALUES),
   keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
   entries: getIterationMethod(ENTRIES)
  };
  if (FORCED)
   for (KEY in methods) {
    if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
     defineBuiltIn(IterablePrototype, KEY, methods[KEY]);
    }
   }
  else
   $({
    target: NAME,
    proto: true,
    forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME
   }, methods);
 }
 if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {
  defineBuiltIn(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });
 }
 Iterators[NAME] = defaultIterator;
 return methods;
};

/***/ }),

/***/ 8142:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
var aCallable = __webpack_require__(1782);
var anObject = __webpack_require__(4719);
var getIteratorDirect = __webpack_require__(9235);
var createIteratorProxy = __webpack_require__(375);
var callWithSafeIterationClosing = __webpack_require__(5723);
var IteratorProxy = createIteratorProxy(function () {
 var iterator = this.iterator;
 var result = anObject(call(this.next, iterator));
 var done = this.done = !!result.done;
 if (!done)
  return callWithSafeIterationClosing(iterator, this.mapper, [
   result.value,
   this.counter++
  ], true);
});
module.exports = function map(mapper) {
 anObject(this);
 aCallable(mapper);
 return new IteratorProxy(getIteratorDirect(this), { mapper: mapper });
};

/***/ }),

/***/ 5238:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
var isCallable = __webpack_require__(7316);
var isObject = __webpack_require__(7633);
var create = __webpack_require__(6941);
var getPrototypeOf = __webpack_require__(2176);
var defineBuiltIn = __webpack_require__(7041);
var wellKnownSymbol = __webpack_require__(2292);
var IS_PURE = __webpack_require__(2554);
var ITERATOR = wellKnownSymbol('iterator');
var BUGGY_SAFARI_ITERATORS = false;
var IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;
if ([].keys) {
 arrayIterator = [].keys();
 if (!('next' in arrayIterator))
  BUGGY_SAFARI_ITERATORS = true;
 else {
  PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));
  if (PrototypeOfArrayIteratorPrototype !== Object.prototype)
   IteratorPrototype = PrototypeOfArrayIteratorPrototype;
 }
}
var NEW_ITERATOR_PROTOTYPE = !isObject(IteratorPrototype) || fails(function () {
 var test = {};
 return IteratorPrototype[ITERATOR].call(test) !== test;
});
if (NEW_ITERATOR_PROTOTYPE)
 IteratorPrototype = {};
else if (IS_PURE)
 IteratorPrototype = create(IteratorPrototype);
if (!isCallable(IteratorPrototype[ITERATOR])) {
 defineBuiltIn(IteratorPrototype, ITERATOR, function () {
  return this;
 });
}
module.exports = {
 IteratorPrototype: IteratorPrototype,
 BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS
};

/***/ }),

/***/ 6596:
/***/ ((module) => {


module.exports = {};

/***/ }),

/***/ 451:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toLength = __webpack_require__(8293);
module.exports = function (obj) {
 return toLength(obj.length);
};

/***/ }),

/***/ 9687:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var fails = __webpack_require__(8154);
var isCallable = __webpack_require__(7316);
var hasOwn = __webpack_require__(936);
var DESCRIPTORS = __webpack_require__(940);
var CONFIGURABLE_FUNCTION_NAME = (__webpack_require__(5145).CONFIGURABLE);
var inspectSource = __webpack_require__(4993);
var InternalStateModule = __webpack_require__(1649);
var enforceInternalState = InternalStateModule.enforce;
var getInternalState = InternalStateModule.get;
var $String = String;
var defineProperty = Object.defineProperty;
var stringSlice = uncurryThis(''.slice);
var replace = uncurryThis(''.replace);
var join = uncurryThis([].join);
var CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {
 return defineProperty(function () {
 }, 'length', { value: 8 }).length !== 8;
});
var TEMPLATE = String(String).split('String');
var makeBuiltIn = module.exports = function (value, name, options) {
 if (stringSlice($String(name), 0, 7) === 'Symbol(') {
  name = '[' + replace($String(name), /^Symbol\(([^)]*)\)/, '$1') + ']';
 }
 if (options && options.getter)
  name = 'get ' + name;
 if (options && options.setter)
  name = 'set ' + name;
 if (!hasOwn(value, 'name') || CONFIGURABLE_FUNCTION_NAME && value.name !== name) {
  if (DESCRIPTORS)
   defineProperty(value, 'name', {
    value: name,
    configurable: true
   });
  else
   value.name = name;
 }
 if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {
  defineProperty(value, 'length', { value: options.arity });
 }
 try {
  if (options && hasOwn(options, 'constructor') && options.constructor) {
   if (DESCRIPTORS)
    defineProperty(value, 'prototype', { writable: false });
  } else if (value.prototype)
   value.prototype = undefined;
 } catch (error) {
 }
 var state = enforceInternalState(value);
 if (!hasOwn(state, 'source')) {
  state.source = join(TEMPLATE, typeof name == 'string' ? name : '');
 }
 return value;
};
Function.prototype.toString = makeBuiltIn(function toString() {
 return isCallable(this) && getInternalState(this).source || inspectSource(this);
}, 'toString');

/***/ }),

/***/ 6336:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var sign = __webpack_require__(4875);
var abs = Math.abs;
var EPSILON = 2.220446049250313e-16;
var INVERSE_EPSILON = 1 / EPSILON;
var roundTiesToEven = function (n) {
 return n + INVERSE_EPSILON - INVERSE_EPSILON;
};
module.exports = function (x, FLOAT_EPSILON, FLOAT_MAX_VALUE, FLOAT_MIN_VALUE) {
 var n = +x;
 var absolute = abs(n);
 var s = sign(n);
 if (absolute < FLOAT_MIN_VALUE)
  return s * roundTiesToEven(absolute / FLOAT_MIN_VALUE / FLOAT_EPSILON) * FLOAT_MIN_VALUE * FLOAT_EPSILON;
 var a = (1 + FLOAT_EPSILON / EPSILON) * absolute;
 var result = a - (a - absolute);
 if (result > FLOAT_MAX_VALUE || result !== result)
  return s * Infinity;
 return s * result;
};

/***/ }),

/***/ 796:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var floatRound = __webpack_require__(6336);
var FLOAT32_EPSILON = 1.1920928955078125e-7;
var FLOAT32_MAX_VALUE = 3.4028234663852886e+38;
var FLOAT32_MIN_VALUE = 1.1754943508222875e-38;
module.exports = Math.fround || function fround(x) {
 return floatRound(x, FLOAT32_EPSILON, FLOAT32_MAX_VALUE, FLOAT32_MIN_VALUE);
};

/***/ }),

/***/ 3081:
/***/ ((module) => {


var log = Math.log;
var LOG10E = Math.LOG10E;
module.exports = Math.log10 || function log10(x) {
 return log(x) * LOG10E;
};

/***/ }),

/***/ 4875:
/***/ ((module) => {


module.exports = Math.sign || function sign(x) {
 var n = +x;
 return n === 0 || n !== n ? n : n < 0 ? -1 : 1;
};

/***/ }),

/***/ 8537:
/***/ ((module) => {


var ceil = Math.ceil;
var floor = Math.floor;
module.exports = Math.trunc || function trunc(x) {
 var n = +x;
 return (n > 0 ? floor : ceil)(n);
};

/***/ }),

/***/ 1627:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var bind = __webpack_require__(7789);
var getOwnPropertyDescriptor = (__webpack_require__(5764).f);
var macrotask = (__webpack_require__(4578).set);
var Queue = __webpack_require__(1397);
var IS_IOS = __webpack_require__(2589);
var IS_IOS_PEBBLE = __webpack_require__(1458);
var IS_WEBOS_WEBKIT = __webpack_require__(8173);
var IS_NODE = __webpack_require__(4864);
var MutationObserver = global.MutationObserver || global.WebKitMutationObserver;
var document = global.document;
var process = global.process;
var Promise = global.Promise;
var queueMicrotaskDescriptor = getOwnPropertyDescriptor(global, 'queueMicrotask');
var microtask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;
var notify, toggle, node, promise, then;
if (!microtask) {
 var queue = new Queue();
 var flush = function () {
  var parent, fn;
  if (IS_NODE && (parent = process.domain))
   parent.exit();
  while (fn = queue.get())
   try {
    fn();
   } catch (error) {
    if (queue.head)
     notify();
    throw error;
   }
  if (parent)
   parent.enter();
 };
 if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver && document) {
  toggle = true;
  node = document.createTextNode('');
  new MutationObserver(flush).observe(node, { characterData: true });
  notify = function () {
   node.data = toggle = !toggle;
  };
 } else if (!IS_IOS_PEBBLE && Promise && Promise.resolve) {
  promise = Promise.resolve(undefined);
  promise.constructor = Promise;
  then = bind(promise.then, promise);
  notify = function () {
   then(flush);
  };
 } else if (IS_NODE) {
  notify = function () {
   process.nextTick(flush);
  };
 } else {
  macrotask = bind(macrotask, global);
  notify = function () {
   macrotask(flush);
  };
 }
 microtask = function (fn) {
  if (!queue.head)
   notify();
  queue.add(fn);
 };
}
module.exports = microtask;

/***/ }),

/***/ 1880:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aCallable = __webpack_require__(1782);
var $TypeError = TypeError;
var PromiseCapability = function (C) {
 var resolve, reject;
 this.promise = new C(function ($$resolve, $$reject) {
  if (resolve !== undefined || reject !== undefined)
   throw new $TypeError('Bad Promise constructor');
  resolve = $$resolve;
  reject = $$reject;
 });
 this.resolve = aCallable(resolve);
 this.reject = aCallable(reject);
};
module.exports.f = function (C) {
 return new PromiseCapability(C);
};

/***/ }),

/***/ 1264:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toString = __webpack_require__(5730);
module.exports = function (argument, $default) {
 return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);
};

/***/ }),

/***/ 9578:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isRegExp = __webpack_require__(6660);
var $TypeError = TypeError;
module.exports = function (it) {
 if (isRegExp(it)) {
  throw new $TypeError("The method doesn't accept regular expressions");
 }
 return it;
};

/***/ }),

/***/ 453:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var uncurryThis = __webpack_require__(8403);
var call = __webpack_require__(2026);
var fails = __webpack_require__(8154);
var objectKeys = __webpack_require__(1706);
var getOwnPropertySymbolsModule = __webpack_require__(1963);
var propertyIsEnumerableModule = __webpack_require__(1879);
var toObject = __webpack_require__(2007);
var IndexedObject = __webpack_require__(3622);
var $assign = Object.assign;
var defineProperty = Object.defineProperty;
var concat = uncurryThis([].concat);
module.exports = !$assign || fails(function () {
 if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {
   enumerable: true,
   get: function () {
    defineProperty(this, 'b', {
     value: 3,
     enumerable: false
    });
   }
  }), { b: 2 })).b !== 1)
  return true;
 var A = {};
 var B = {};
 var symbol = Symbol('assign detection');
 var alphabet = 'abcdefghijklmnopqrst';
 A[symbol] = 7;
 alphabet.split('').forEach(function (chr) {
  B[chr] = chr;
 });
 return $assign({}, A)[symbol] !== 7 || objectKeys($assign({}, B)).join('') !== alphabet;
}) ? function assign(target, source) {
 var T = toObject(target);
 var argumentsLength = arguments.length;
 var index = 1;
 var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
 var propertyIsEnumerable = propertyIsEnumerableModule.f;
 while (argumentsLength > index) {
  var S = IndexedObject(arguments[index++]);
  var keys = getOwnPropertySymbols ? concat(objectKeys(S), getOwnPropertySymbols(S)) : objectKeys(S);
  var length = keys.length;
  var j = 0;
  var key;
  while (length > j) {
   key = keys[j++];
   if (!DESCRIPTORS || call(propertyIsEnumerable, S, key))
    T[key] = S[key];
  }
 }
 return T;
} : $assign;

/***/ }),

/***/ 6941:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(4719);
var definePropertiesModule = __webpack_require__(6617);
var enumBugKeys = __webpack_require__(298);
var hiddenKeys = __webpack_require__(6010);
var html = __webpack_require__(519);
var documentCreateElement = __webpack_require__(5584);
var sharedKey = __webpack_require__(3727);
var GT = '>';
var LT = '<';
var PROTOTYPE = 'prototype';
var SCRIPT = 'script';
var IE_PROTO = sharedKey('IE_PROTO');
var EmptyConstructor = function () {
};
var scriptTag = function (content) {
 return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
};
var NullProtoObjectViaActiveX = function (activeXDocument) {
 activeXDocument.write(scriptTag(''));
 activeXDocument.close();
 var temp = activeXDocument.parentWindow.Object;
 activeXDocument = null;
 return temp;
};
var NullProtoObjectViaIFrame = function () {
 var iframe = documentCreateElement('iframe');
 var JS = 'java' + SCRIPT + ':';
 var iframeDocument;
 iframe.style.display = 'none';
 html.appendChild(iframe);
 iframe.src = String(JS);
 iframeDocument = iframe.contentWindow.document;
 iframeDocument.open();
 iframeDocument.write(scriptTag('document.F=Object'));
 iframeDocument.close();
 return iframeDocument.F;
};
var activeXDocument;
var NullProtoObject = function () {
 try {
  activeXDocument = new ActiveXObject('htmlfile');
 } catch (error) {
 }
 NullProtoObject = typeof document != 'undefined' ? document.domain && activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame() : NullProtoObjectViaActiveX(activeXDocument);
 var length = enumBugKeys.length;
 while (length--)
  delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
 return NullProtoObject();
};
hiddenKeys[IE_PROTO] = true;
module.exports = Object.create || function create(O, Properties) {
 var result;
 if (O !== null) {
  EmptyConstructor[PROTOTYPE] = anObject(O);
  result = new EmptyConstructor();
  EmptyConstructor[PROTOTYPE] = null;
  result[IE_PROTO] = O;
 } else
  result = NullProtoObject();
 return Properties === undefined ? result : definePropertiesModule.f(result, Properties);
};

/***/ }),

/***/ 6617:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(9610);
var definePropertyModule = __webpack_require__(7744);
var anObject = __webpack_require__(4719);
var toIndexedObject = __webpack_require__(4115);
var objectKeys = __webpack_require__(1706);
exports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {
 anObject(O);
 var props = toIndexedObject(Properties);
 var keys = objectKeys(Properties);
 var length = keys.length;
 var index = 0;
 var key;
 while (length > index)
  definePropertyModule.f(O, key = keys[index++], props[key]);
 return O;
};

/***/ }),

/***/ 7744:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var IE8_DOM_DEFINE = __webpack_require__(9394);
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(9610);
var anObject = __webpack_require__(4719);
var toPropertyKey = __webpack_require__(4871);
var $TypeError = TypeError;
var $defineProperty = Object.defineProperty;
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var ENUMERABLE = 'enumerable';
var CONFIGURABLE = 'configurable';
var WRITABLE = 'writable';
exports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {
 anObject(O);
 P = toPropertyKey(P);
 anObject(Attributes);
 if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {
  var current = $getOwnPropertyDescriptor(O, P);
  if (current && current[WRITABLE]) {
   O[P] = Attributes.value;
   Attributes = {
    configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],
    enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],
    writable: false
   };
  }
 }
 return $defineProperty(O, P, Attributes);
} : $defineProperty : function defineProperty(O, P, Attributes) {
 anObject(O);
 P = toPropertyKey(P);
 anObject(Attributes);
 if (IE8_DOM_DEFINE)
  try {
   return $defineProperty(O, P, Attributes);
  } catch (error) {
  }
 if ('get' in Attributes || 'set' in Attributes)
  throw new $TypeError('Accessors not supported');
 if ('value' in Attributes)
  O[P] = Attributes.value;
 return O;
};

/***/ }),

/***/ 5764:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var call = __webpack_require__(2026);
var propertyIsEnumerableModule = __webpack_require__(1879);
var createPropertyDescriptor = __webpack_require__(1198);
var toIndexedObject = __webpack_require__(4115);
var toPropertyKey = __webpack_require__(4871);
var hasOwn = __webpack_require__(936);
var IE8_DOM_DEFINE = __webpack_require__(9394);
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
exports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
 O = toIndexedObject(O);
 P = toPropertyKey(P);
 if (IE8_DOM_DEFINE)
  try {
   return $getOwnPropertyDescriptor(O, P);
  } catch (error) {
  }
 if (hasOwn(O, P))
  return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);
};

/***/ }),

/***/ 2329:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classof = __webpack_require__(8374);
var toIndexedObject = __webpack_require__(4115);
var $getOwnPropertyNames = (__webpack_require__(5455).f);
var arraySlice = __webpack_require__(6071);
var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
var getWindowNames = function (it) {
 try {
  return $getOwnPropertyNames(it);
 } catch (error) {
  return arraySlice(windowNames);
 }
};
module.exports.f = function getOwnPropertyNames(it) {
 return windowNames && classof(it) === 'Window' ? getWindowNames(it) : $getOwnPropertyNames(toIndexedObject(it));
};

/***/ }),

/***/ 5455:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


var internalObjectKeys = __webpack_require__(9138);
var enumBugKeys = __webpack_require__(298);
var hiddenKeys = enumBugKeys.concat('length', 'prototype');
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
 return internalObjectKeys(O, hiddenKeys);
};

/***/ }),

/***/ 1963:
/***/ ((__unused_webpack_module, exports) => {


exports.f = Object.getOwnPropertySymbols;

/***/ }),

/***/ 2176:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var hasOwn = __webpack_require__(936);
var isCallable = __webpack_require__(7316);
var toObject = __webpack_require__(2007);
var sharedKey = __webpack_require__(3727);
var CORRECT_PROTOTYPE_GETTER = __webpack_require__(7888);
var IE_PROTO = sharedKey('IE_PROTO');
var $Object = Object;
var ObjectPrototype = $Object.prototype;
module.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {
 var object = toObject(O);
 if (hasOwn(object, IE_PROTO))
  return object[IE_PROTO];
 var constructor = object.constructor;
 if (isCallable(constructor) && object instanceof constructor) {
  return constructor.prototype;
 }
 return object instanceof $Object ? ObjectPrototype : null;
};

/***/ }),

/***/ 2191:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
var isObject = __webpack_require__(7633);
var classof = __webpack_require__(8374);
var ARRAY_BUFFER_NON_EXTENSIBLE = __webpack_require__(6944);
var $isExtensible = Object.isExtensible;
var FAILS_ON_PRIMITIVES = fails(function () {
 $isExtensible(1);
});
module.exports = FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE ? function isExtensible(it) {
 if (!isObject(it))
  return false;
 if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) === 'ArrayBuffer')
  return false;
 return $isExtensible ? $isExtensible(it) : true;
} : $isExtensible;

/***/ }),

/***/ 2658:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
module.exports = uncurryThis({}.isPrototypeOf);

/***/ }),

/***/ 9138:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var hasOwn = __webpack_require__(936);
var toIndexedObject = __webpack_require__(4115);
var indexOf = (__webpack_require__(9773).indexOf);
var hiddenKeys = __webpack_require__(6010);
var push = uncurryThis([].push);
module.exports = function (object, names) {
 var O = toIndexedObject(object);
 var i = 0;
 var result = [];
 var key;
 for (key in O)
  !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);
 while (names.length > i)
  if (hasOwn(O, key = names[i++])) {
   ~indexOf(result, key) || push(result, key);
  }
 return result;
};

/***/ }),

/***/ 1706:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var internalObjectKeys = __webpack_require__(9138);
var enumBugKeys = __webpack_require__(298);
module.exports = Object.keys || function keys(O) {
 return internalObjectKeys(O, enumBugKeys);
};

/***/ }),

/***/ 1879:
/***/ ((__unused_webpack_module, exports) => {


var $propertyIsEnumerable = {}.propertyIsEnumerable;
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);
exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
 var descriptor = getOwnPropertyDescriptor(this, V);
 return !!descriptor && descriptor.enumerable;
} : $propertyIsEnumerable;

/***/ }),

/***/ 9763:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThisAccessor = __webpack_require__(1299);
var anObject = __webpack_require__(4719);
var aPossiblePrototype = __webpack_require__(4958);
module.exports = Object.setPrototypeOf || ('__proto__' in {} ? (function () {
 var CORRECT_SETTER = false;
 var test = {};
 var setter;
 try {
  setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');
  setter(test, []);
  CORRECT_SETTER = test instanceof Array;
 } catch (error) {
 }
 return function setPrototypeOf(O, proto) {
  anObject(O);
  aPossiblePrototype(proto);
  if (CORRECT_SETTER)
   setter(O, proto);
  else
   O.__proto__ = proto;
  return O;
 };
}()) : undefined);

/***/ }),

/***/ 2492:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var fails = __webpack_require__(8154);
var uncurryThis = __webpack_require__(8403);
var objectGetPrototypeOf = __webpack_require__(2176);
var objectKeys = __webpack_require__(1706);
var toIndexedObject = __webpack_require__(4115);
var $propertyIsEnumerable = (__webpack_require__(1879).f);
var propertyIsEnumerable = uncurryThis($propertyIsEnumerable);
var push = uncurryThis([].push);
var IE_BUG = DESCRIPTORS && fails(function () {
 var O = Object.create(null);
 O[2] = 2;
 return !propertyIsEnumerable(O, 2);
});
var createMethod = function (TO_ENTRIES) {
 return function (it) {
  var O = toIndexedObject(it);
  var keys = objectKeys(O);
  var IE_WORKAROUND = IE_BUG && objectGetPrototypeOf(O) === null;
  var length = keys.length;
  var i = 0;
  var result = [];
  var key;
  while (length > i) {
   key = keys[i++];
   if (!DESCRIPTORS || (IE_WORKAROUND ? key in O : propertyIsEnumerable(O, key))) {
    push(result, TO_ENTRIES ? [
     key,
     O[key]
    ] : O[key]);
   }
  }
  return result;
 };
};
module.exports = {
 entries: createMethod(true),
 values: createMethod(false)
};

/***/ }),

/***/ 759:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var TO_STRING_TAG_SUPPORT = __webpack_require__(3077);
var classof = __webpack_require__(8329);
module.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {
 return '[object ' + classof(this) + ']';
};

/***/ }),

/***/ 2923:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
var isCallable = __webpack_require__(7316);
var isObject = __webpack_require__(7633);
var $TypeError = TypeError;
module.exports = function (input, pref) {
 var fn, val;
 if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input)))
  return val;
 if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input)))
  return val;
 if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input)))
  return val;
 throw new $TypeError("Can't convert object to primitive value");
};

/***/ }),

/***/ 8953:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(7187);
var uncurryThis = __webpack_require__(8403);
var getOwnPropertyNamesModule = __webpack_require__(5455);
var getOwnPropertySymbolsModule = __webpack_require__(1963);
var anObject = __webpack_require__(4719);
var concat = uncurryThis([].concat);
module.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {
 var keys = getOwnPropertyNamesModule.f(anObject(it));
 var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
 return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;
};

/***/ }),

/***/ 1021:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
module.exports = global;

/***/ }),

/***/ 1518:
/***/ ((module) => {


module.exports = function (exec) {
 try {
  return {
   error: false,
   value: exec()
  };
 } catch (error) {
  return {
   error: true,
   value: error
  };
 }
};

/***/ }),

/***/ 8308:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var NativePromiseConstructor = __webpack_require__(6639);
var isCallable = __webpack_require__(7316);
var isForced = __webpack_require__(7007);
var inspectSource = __webpack_require__(4993);
var wellKnownSymbol = __webpack_require__(2292);
var IS_BROWSER = __webpack_require__(3413);
var IS_DENO = __webpack_require__(8471);
var IS_PURE = __webpack_require__(2554);
var V8_VERSION = __webpack_require__(2171);
var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
var SPECIES = wellKnownSymbol('species');
var SUBCLASSING = false;
var NATIVE_PROMISE_REJECTION_EVENT = isCallable(global.PromiseRejectionEvent);
var FORCED_PROMISE_CONSTRUCTOR = isForced('Promise', function () {
 var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(NativePromiseConstructor);
 var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(NativePromiseConstructor);
 if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66)
  return true;
 if (IS_PURE && !(NativePromisePrototype['catch'] && NativePromisePrototype['finally']))
  return true;
 if (!V8_VERSION || V8_VERSION < 51 || !/native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) {
  var promise = new NativePromiseConstructor(function (resolve) {
   resolve(1);
  });
  var FakePromise = function (exec) {
   exec(function () {
   }, function () {
   });
  };
  var constructor = promise.constructor = {};
  constructor[SPECIES] = FakePromise;
  SUBCLASSING = promise.then(function () {
  }) instanceof FakePromise;
  if (!SUBCLASSING)
   return true;
 }
 return !GLOBAL_CORE_JS_PROMISE && (IS_BROWSER || IS_DENO) && !NATIVE_PROMISE_REJECTION_EVENT;
});
module.exports = {
 CONSTRUCTOR: FORCED_PROMISE_CONSTRUCTOR,
 REJECTION_EVENT: NATIVE_PROMISE_REJECTION_EVENT,
 SUBCLASSING: SUBCLASSING
};

/***/ }),

/***/ 6639:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
module.exports = global.Promise;

/***/ }),

/***/ 2506:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(4719);
var isObject = __webpack_require__(7633);
var newPromiseCapability = __webpack_require__(1880);
module.exports = function (C, x) {
 anObject(C);
 if (isObject(x) && x.constructor === C)
  return x;
 var promiseCapability = newPromiseCapability.f(C);
 var resolve = promiseCapability.resolve;
 resolve(x);
 return promiseCapability.promise;
};

/***/ }),

/***/ 3779:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NativePromiseConstructor = __webpack_require__(6639);
var checkCorrectnessOfIteration = __webpack_require__(1374);
var FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(8308).CONSTRUCTOR);
module.exports = FORCED_PROMISE_CONSTRUCTOR || !checkCorrectnessOfIteration(function (iterable) {
 NativePromiseConstructor.all(iterable).then(undefined, function () {
 });
});

/***/ }),

/***/ 6085:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var defineProperty = (__webpack_require__(7744).f);
module.exports = function (Target, Source, key) {
 key in Target || defineProperty(Target, key, {
  configurable: true,
  get: function () {
   return Source[key];
  },
  set: function (it) {
   Source[key] = it;
  }
 });
};

/***/ }),

/***/ 1397:
/***/ ((module) => {


var Queue = function () {
 this.head = null;
 this.tail = null;
};
Queue.prototype = {
 add: function (item) {
  var entry = {
   item: item,
   next: null
  };
  var tail = this.tail;
  if (tail)
   tail.next = entry;
  else
   this.head = entry;
  this.tail = entry;
 },
 get: function () {
  var entry = this.head;
  if (entry) {
   var next = this.head = entry.next;
   if (next === null)
    this.tail = null;
   return entry.item;
  }
 }
};
module.exports = Queue;

/***/ }),

/***/ 8986:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
var anObject = __webpack_require__(4719);
var isCallable = __webpack_require__(7316);
var classof = __webpack_require__(8374);
var regexpExec = __webpack_require__(2178);
var $TypeError = TypeError;
module.exports = function (R, S) {
 var exec = R.exec;
 if (isCallable(exec)) {
  var result = call(exec, R, S);
  if (result !== null)
   anObject(result);
  return result;
 }
 if (classof(R) === 'RegExp')
  return call(regexpExec, R, S);
 throw new $TypeError('RegExp#exec called on incompatible receiver');
};

/***/ }),

/***/ 2178:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
var uncurryThis = __webpack_require__(8403);
var toString = __webpack_require__(5730);
var regexpFlags = __webpack_require__(9272);
var stickyHelpers = __webpack_require__(3286);
var shared = __webpack_require__(6807);
var create = __webpack_require__(6941);
var getInternalState = (__webpack_require__(1649).get);
var UNSUPPORTED_DOT_ALL = __webpack_require__(1714);
var UNSUPPORTED_NCG = __webpack_require__(2513);
var nativeReplace = shared('native-string-replace', String.prototype.replace);
var nativeExec = RegExp.prototype.exec;
var patchedExec = nativeExec;
var charAt = uncurryThis(''.charAt);
var indexOf = uncurryThis(''.indexOf);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);
var UPDATES_LAST_INDEX_WRONG = (function () {
 var re1 = /a/;
 var re2 = /b*/g;
 call(nativeExec, re1, 'a');
 call(nativeExec, re2, 'a');
 return re1.lastIndex !== 0 || re2.lastIndex !== 0;
}());
var UNSUPPORTED_Y = stickyHelpers.BROKEN_CARET;
var NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;
var PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG;
if (PATCH) {
 patchedExec = function exec(string) {
  var re = this;
  var state = getInternalState(re);
  var str = toString(string);
  var raw = state.raw;
  var result, reCopy, lastIndex, match, i, object, group;
  if (raw) {
   raw.lastIndex = re.lastIndex;
   result = call(patchedExec, raw, str);
   re.lastIndex = raw.lastIndex;
   return result;
  }
  var groups = state.groups;
  var sticky = UNSUPPORTED_Y && re.sticky;
  var flags = call(regexpFlags, re);
  var source = re.source;
  var charsAdded = 0;
  var strCopy = str;
  if (sticky) {
   flags = replace(flags, 'y', '');
   if (indexOf(flags, 'g') === -1) {
    flags += 'g';
   }
   strCopy = stringSlice(str, re.lastIndex);
   if (re.lastIndex > 0 && (!re.multiline || re.multiline && charAt(str, re.lastIndex - 1) !== '\n')) {
    source = '(?: ' + source + ')';
    strCopy = ' ' + strCopy;
    charsAdded++;
   }
   reCopy = new RegExp('^(?:' + source + ')', flags);
  }
  if (NPCG_INCLUDED) {
   reCopy = new RegExp('^' + source + '$(?!\\s)', flags);
  }
  if (UPDATES_LAST_INDEX_WRONG)
   lastIndex = re.lastIndex;
  match = call(nativeExec, sticky ? reCopy : re, strCopy);
  if (sticky) {
   if (match) {
    match.input = stringSlice(match.input, charsAdded);
    match[0] = stringSlice(match[0], charsAdded);
    match.index = re.lastIndex;
    re.lastIndex += match[0].length;
   } else
    re.lastIndex = 0;
  } else if (UPDATES_LAST_INDEX_WRONG && match) {
   re.lastIndex = re.global ? match.index + match[0].length : lastIndex;
  }
  if (NPCG_INCLUDED && match && match.length > 1) {
   call(nativeReplace, match[0], reCopy, function () {
    for (i = 1; i < arguments.length - 2; i++) {
     if (arguments[i] === undefined)
      match[i] = undefined;
    }
   });
  }
  if (match && groups) {
   match.groups = object = create(null);
   for (i = 0; i < groups.length; i++) {
    group = groups[i];
    object[group[0]] = match[group[1]];
   }
  }
  return match;
 };
}
module.exports = patchedExec;

/***/ }),

/***/ 9272:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(4719);
module.exports = function () {
 var that = anObject(this);
 var result = '';
 if (that.hasIndices)
  result += 'd';
 if (that.global)
  result += 'g';
 if (that.ignoreCase)
  result += 'i';
 if (that.multiline)
  result += 'm';
 if (that.dotAll)
  result += 's';
 if (that.unicode)
  result += 'u';
 if (that.unicodeSets)
  result += 'v';
 if (that.sticky)
  result += 'y';
 return result;
};

/***/ }),

/***/ 1043:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
var hasOwn = __webpack_require__(936);
var isPrototypeOf = __webpack_require__(2658);
var regExpFlags = __webpack_require__(9272);
var RegExpPrototype = RegExp.prototype;
module.exports = function (R) {
 var flags = R.flags;
 return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R) ? call(regExpFlags, R) : flags;
};

/***/ }),

/***/ 3286:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
var global = __webpack_require__(9298);
var $RegExp = global.RegExp;
var UNSUPPORTED_Y = fails(function () {
 var re = $RegExp('a', 'y');
 re.lastIndex = 2;
 return re.exec('abcd') !== null;
});
var MISSED_STICKY = UNSUPPORTED_Y || fails(function () {
 return !$RegExp('a', 'y').sticky;
});
var BROKEN_CARET = UNSUPPORTED_Y || fails(function () {
 var re = $RegExp('^r', 'gy');
 re.lastIndex = 2;
 return re.exec('str') !== null;
});
module.exports = {
 BROKEN_CARET: BROKEN_CARET,
 MISSED_STICKY: MISSED_STICKY,
 UNSUPPORTED_Y: UNSUPPORTED_Y
};

/***/ }),

/***/ 1714:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
var global = __webpack_require__(9298);
var $RegExp = global.RegExp;
module.exports = fails(function () {
 var re = $RegExp('.', 's');
 return !(re.dotAll && re.test('\n') && re.flags === 's');
});

/***/ }),

/***/ 2513:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
var global = __webpack_require__(9298);
var $RegExp = global.RegExp;
module.exports = fails(function () {
 var re = $RegExp('(?<a>b)', 'g');
 return re.exec('b').groups.a !== 'b' || 'b'.replace(re, '$<a>c') !== 'bc';
});

/***/ }),

/***/ 5645:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isNullOrUndefined = __webpack_require__(3734);
var $TypeError = TypeError;
module.exports = function (it) {
 if (isNullOrUndefined(it))
  throw new $TypeError("Can't call method on " + it);
 return it;
};

/***/ }),

/***/ 4057:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var SetHelpers = __webpack_require__(23);
var iterate = __webpack_require__(8848);
var Set = SetHelpers.Set;
var add = SetHelpers.add;
module.exports = function (set) {
 var result = new Set();
 iterate(set, function (it) {
  add(result, it);
 });
 return result;
};

/***/ }),

/***/ 5656:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(5690);
var SetHelpers = __webpack_require__(23);
var clone = __webpack_require__(4057);
var size = __webpack_require__(6098);
var getSetRecord = __webpack_require__(1096);
var iterateSet = __webpack_require__(8848);
var iterateSimple = __webpack_require__(5504);
var has = SetHelpers.has;
var remove = SetHelpers.remove;
module.exports = function difference(other) {
 var O = aSet(this);
 var otherRec = getSetRecord(other);
 var result = clone(O);
 if (size(O) <= otherRec.size)
  iterateSet(O, function (e) {
   if (otherRec.includes(e))
    remove(result, e);
  });
 else
  iterateSimple(otherRec.getIterator(), function (e) {
   if (has(O, e))
    remove(result, e);
  });
 return result;
};

/***/ }),

/***/ 23:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var SetPrototype = Set.prototype;
module.exports = {
 Set: Set,
 add: uncurryThis(SetPrototype.add),
 has: uncurryThis(SetPrototype.has),
 remove: uncurryThis(SetPrototype['delete']),
 proto: SetPrototype
};

/***/ }),

/***/ 8461:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(5690);
var SetHelpers = __webpack_require__(23);
var size = __webpack_require__(6098);
var getSetRecord = __webpack_require__(1096);
var iterateSet = __webpack_require__(8848);
var iterateSimple = __webpack_require__(5504);
var Set = SetHelpers.Set;
var add = SetHelpers.add;
var has = SetHelpers.has;
module.exports = function intersection(other) {
 var O = aSet(this);
 var otherRec = getSetRecord(other);
 var result = new Set();
 if (size(O) > otherRec.size) {
  iterateSimple(otherRec.getIterator(), function (e) {
   if (has(O, e))
    add(result, e);
  });
 } else {
  iterateSet(O, function (e) {
   if (otherRec.includes(e))
    add(result, e);
  });
 }
 return result;
};

/***/ }),

/***/ 8550:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(5690);
var has = (__webpack_require__(23).has);
var size = __webpack_require__(6098);
var getSetRecord = __webpack_require__(1096);
var iterateSet = __webpack_require__(8848);
var iterateSimple = __webpack_require__(5504);
var iteratorClose = __webpack_require__(3316);
module.exports = function isDisjointFrom(other) {
 var O = aSet(this);
 var otherRec = getSetRecord(other);
 if (size(O) <= otherRec.size)
  return iterateSet(O, function (e) {
   if (otherRec.includes(e))
    return false;
  }, true) !== false;
 var iterator = otherRec.getIterator();
 return iterateSimple(iterator, function (e) {
  if (has(O, e))
   return iteratorClose(iterator, 'normal', false);
 }) !== false;
};

/***/ }),

/***/ 990:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(5690);
var size = __webpack_require__(6098);
var iterate = __webpack_require__(8848);
var getSetRecord = __webpack_require__(1096);
module.exports = function isSubsetOf(other) {
 var O = aSet(this);
 var otherRec = getSetRecord(other);
 if (size(O) > otherRec.size)
  return false;
 return iterate(O, function (e) {
  if (!otherRec.includes(e))
   return false;
 }, true) !== false;
};

/***/ }),

/***/ 194:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(5690);
var has = (__webpack_require__(23).has);
var size = __webpack_require__(6098);
var getSetRecord = __webpack_require__(1096);
var iterateSimple = __webpack_require__(5504);
var iteratorClose = __webpack_require__(3316);
module.exports = function isSupersetOf(other) {
 var O = aSet(this);
 var otherRec = getSetRecord(other);
 if (size(O) < otherRec.size)
  return false;
 var iterator = otherRec.getIterator();
 return iterateSimple(iterator, function (e) {
  if (!has(O, e))
   return iteratorClose(iterator, 'normal', false);
 }) !== false;
};

/***/ }),

/***/ 8848:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var iterateSimple = __webpack_require__(5504);
var SetHelpers = __webpack_require__(23);
var Set = SetHelpers.Set;
var SetPrototype = SetHelpers.proto;
var forEach = uncurryThis(SetPrototype.forEach);
var keys = uncurryThis(SetPrototype.keys);
var next = keys(new Set()).next;
module.exports = function (set, fn, interruptible) {
 return interruptible ? iterateSimple({
  iterator: keys(set),
  next: next
 }, fn) : forEach(set, fn);
};

/***/ }),

/***/ 507:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(7187);
var createSetLike = function (size) {
 return {
  size: size,
  has: function () {
   return false;
  },
  keys: function () {
   return {
    next: function () {
     return { done: true };
    }
   };
  }
 };
};
module.exports = function (name) {
 var Set = getBuiltIn('Set');
 try {
  new Set()[name](createSetLike(0));
  try {
   new Set()[name](createSetLike(-1));
   return false;
  } catch (error2) {
   return true;
  }
 } catch (error) {
  return false;
 }
};

/***/ }),

/***/ 6098:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThisAccessor = __webpack_require__(1299);
var SetHelpers = __webpack_require__(23);
module.exports = uncurryThisAccessor(SetHelpers.proto, 'size', 'get') || function (set) {
 return set.size;
};

/***/ }),

/***/ 5963:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(7187);
var defineBuiltInAccessor = __webpack_require__(9691);
var wellKnownSymbol = __webpack_require__(2292);
var DESCRIPTORS = __webpack_require__(940);
var SPECIES = wellKnownSymbol('species');
module.exports = function (CONSTRUCTOR_NAME) {
 var Constructor = getBuiltIn(CONSTRUCTOR_NAME);
 if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
  defineBuiltInAccessor(Constructor, SPECIES, {
   configurable: true,
   get: function () {
    return this;
   }
  });
 }
};

/***/ }),

/***/ 3194:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(5690);
var SetHelpers = __webpack_require__(23);
var clone = __webpack_require__(4057);
var getSetRecord = __webpack_require__(1096);
var iterateSimple = __webpack_require__(5504);
var add = SetHelpers.add;
var has = SetHelpers.has;
var remove = SetHelpers.remove;
module.exports = function symmetricDifference(other) {
 var O = aSet(this);
 var keysIter = getSetRecord(other).getIterator();
 var result = clone(O);
 iterateSimple(keysIter, function (e) {
  if (has(O, e))
   remove(result, e);
  else
   add(result, e);
 });
 return result;
};

/***/ }),

/***/ 7536:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var defineProperty = (__webpack_require__(7744).f);
var hasOwn = __webpack_require__(936);
var wellKnownSymbol = __webpack_require__(2292);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
module.exports = function (target, TAG, STATIC) {
 if (target && !STATIC)
  target = target.prototype;
 if (target && !hasOwn(target, TO_STRING_TAG)) {
  defineProperty(target, TO_STRING_TAG, {
   configurable: true,
   value: TAG
  });
 }
};

/***/ }),

/***/ 5703:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(5690);
var add = (__webpack_require__(23).add);
var clone = __webpack_require__(4057);
var getSetRecord = __webpack_require__(1096);
var iterateSimple = __webpack_require__(5504);
module.exports = function union(other) {
 var O = aSet(this);
 var keysIter = getSetRecord(other).getIterator();
 var result = clone(O);
 iterateSimple(keysIter, function (it) {
  add(result, it);
 });
 return result;
};

/***/ }),

/***/ 3727:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var shared = __webpack_require__(6807);
var uid = __webpack_require__(7561);
var keys = shared('keys');
module.exports = function (key) {
 return keys[key] || (keys[key] = uid(key));
};

/***/ }),

/***/ 7542:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var defineGlobalProperty = __webpack_require__(6000);
var SHARED = '__core-js_shared__';
var store = global[SHARED] || defineGlobalProperty(SHARED, {});
module.exports = store;

/***/ }),

/***/ 6807:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var IS_PURE = __webpack_require__(2554);
var store = __webpack_require__(7542);
(module.exports = function (key, value) {
 return store[key] || (store[key] = value !== undefined ? value : {});
})('versions', []).push({
 version: '3.33.3',
 mode: IS_PURE ? 'pure' : 'global',
 copyright: ' 2014-2023 Denis Pushkarev (zloirock.ru)',
 license: 'https://github.com/zloirock/core-js/blob/v3.33.3/LICENSE',
 source: 'https://github.com/zloirock/core-js'
});

/***/ }),

/***/ 8180:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(4719);
var aConstructor = __webpack_require__(7073);
var isNullOrUndefined = __webpack_require__(3734);
var wellKnownSymbol = __webpack_require__(2292);
var SPECIES = wellKnownSymbol('species');
module.exports = function (O, defaultConstructor) {
 var C = anObject(O).constructor;
 var S;
 return C === undefined || isNullOrUndefined(S = anObject(C)[SPECIES]) ? defaultConstructor : aConstructor(S);
};

/***/ }),

/***/ 6819:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var toIntegerOrInfinity = __webpack_require__(1003);
var toString = __webpack_require__(5730);
var requireObjectCoercible = __webpack_require__(5645);
var charAt = uncurryThis(''.charAt);
var charCodeAt = uncurryThis(''.charCodeAt);
var stringSlice = uncurryThis(''.slice);
var createMethod = function (CONVERT_TO_STRING) {
 return function ($this, pos) {
  var S = toString(requireObjectCoercible($this));
  var position = toIntegerOrInfinity(pos);
  var size = S.length;
  var first, second;
  if (position < 0 || position >= size)
   return CONVERT_TO_STRING ? '' : undefined;
  first = charCodeAt(S, position);
  return first < 0xD800 || first > 0xDBFF || position + 1 === size || (second = charCodeAt(S, position + 1)) < 0xDC00 || second > 0xDFFF ? CONVERT_TO_STRING ? charAt(S, position) : first : CONVERT_TO_STRING ? stringSlice(S, position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;
 };
};
module.exports = {
 codeAt: createMethod(false),
 charAt: createMethod(true)
};

/***/ }),

/***/ 4819:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(234);
module.exports = /Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(userAgent);

/***/ }),

/***/ 6460:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var toLength = __webpack_require__(8293);
var toString = __webpack_require__(5730);
var $repeat = __webpack_require__(947);
var requireObjectCoercible = __webpack_require__(5645);
var repeat = uncurryThis($repeat);
var stringSlice = uncurryThis(''.slice);
var ceil = Math.ceil;
var createMethod = function (IS_END) {
 return function ($this, maxLength, fillString) {
  var S = toString(requireObjectCoercible($this));
  var intMaxLength = toLength(maxLength);
  var stringLength = S.length;
  var fillStr = fillString === undefined ? ' ' : toString(fillString);
  var fillLen, stringFiller;
  if (intMaxLength <= stringLength || fillStr === '')
   return S;
  fillLen = intMaxLength - stringLength;
  stringFiller = repeat(fillStr, ceil(fillLen / fillStr.length));
  if (stringFiller.length > fillLen)
   stringFiller = stringSlice(stringFiller, 0, fillLen);
  return IS_END ? S + stringFiller : stringFiller + S;
 };
};
module.exports = {
 start: createMethod(false),
 end: createMethod(true)
};

/***/ }),

/***/ 2897:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var maxInt = 2147483647;
var base = 36;
var tMin = 1;
var tMax = 26;
var skew = 38;
var damp = 700;
var initialBias = 72;
var initialN = 128;
var delimiter = '-';
var regexNonASCII = /[^\0-\u007E]/;
var regexSeparators = /[.\u3002\uFF0E\uFF61]/g;
var OVERFLOW_ERROR = 'Overflow: input needs wider integers to process';
var baseMinusTMin = base - tMin;
var $RangeError = RangeError;
var exec = uncurryThis(regexSeparators.exec);
var floor = Math.floor;
var fromCharCode = String.fromCharCode;
var charCodeAt = uncurryThis(''.charCodeAt);
var join = uncurryThis([].join);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var split = uncurryThis(''.split);
var toLowerCase = uncurryThis(''.toLowerCase);
var ucs2decode = function (string) {
 var output = [];
 var counter = 0;
 var length = string.length;
 while (counter < length) {
  var value = charCodeAt(string, counter++);
  if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
   var extra = charCodeAt(string, counter++);
   if ((extra & 0xFC00) === 0xDC00) {
    push(output, ((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
   } else {
    push(output, value);
    counter--;
   }
  } else {
   push(output, value);
  }
 }
 return output;
};
var digitToBasic = function (digit) {
 return digit + 22 + 75 * (digit < 26);
};
var adapt = function (delta, numPoints, firstTime) {
 var k = 0;
 delta = firstTime ? floor(delta / damp) : delta >> 1;
 delta += floor(delta / numPoints);
 while (delta > baseMinusTMin * tMax >> 1) {
  delta = floor(delta / baseMinusTMin);
  k += base;
 }
 return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
};
var encode = function (input) {
 var output = [];
 input = ucs2decode(input);
 var inputLength = input.length;
 var n = initialN;
 var delta = 0;
 var bias = initialBias;
 var i, currentValue;
 for (i = 0; i < input.length; i++) {
  currentValue = input[i];
  if (currentValue < 0x80) {
   push(output, fromCharCode(currentValue));
  }
 }
 var basicLength = output.length;
 var handledCPCount = basicLength;
 if (basicLength) {
  push(output, delimiter);
 }
 while (handledCPCount < inputLength) {
  var m = maxInt;
  for (i = 0; i < input.length; i++) {
   currentValue = input[i];
   if (currentValue >= n && currentValue < m) {
    m = currentValue;
   }
  }
  var handledCPCountPlusOne = handledCPCount + 1;
  if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
   throw new $RangeError(OVERFLOW_ERROR);
  }
  delta += (m - n) * handledCPCountPlusOne;
  n = m;
  for (i = 0; i < input.length; i++) {
   currentValue = input[i];
   if (currentValue < n && ++delta > maxInt) {
    throw new $RangeError(OVERFLOW_ERROR);
   }
   if (currentValue === n) {
    var q = delta;
    var k = base;
    while (true) {
     var t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;
     if (q < t)
      break;
     var qMinusT = q - t;
     var baseMinusT = base - t;
     push(output, fromCharCode(digitToBasic(t + qMinusT % baseMinusT)));
     q = floor(qMinusT / baseMinusT);
     k += base;
    }
    push(output, fromCharCode(digitToBasic(q)));
    bias = adapt(delta, handledCPCountPlusOne, handledCPCount === basicLength);
    delta = 0;
    handledCPCount++;
   }
  }
  delta++;
  n++;
 }
 return join(output, '');
};
module.exports = function (input) {
 var encoded = [];
 var labels = split(replace(toLowerCase(input), regexSeparators, '\u002E'), '.');
 var i, label;
 for (i = 0; i < labels.length; i++) {
  label = labels[i];
  push(encoded, exec(regexNonASCII, label) ? 'xn--' + encode(label) : label);
 }
 return join(encoded, '.');
};

/***/ }),

/***/ 947:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIntegerOrInfinity = __webpack_require__(1003);
var toString = __webpack_require__(5730);
var requireObjectCoercible = __webpack_require__(5645);
var $RangeError = RangeError;
module.exports = function repeat(count) {
 var str = toString(requireObjectCoercible(this));
 var result = '';
 var n = toIntegerOrInfinity(count);
 if (n < 0 || n === Infinity)
  throw new $RangeError('Wrong number of repetitions');
 for (; n > 0; (n >>>= 1) && (str += str))
  if (n & 1)
   result += str;
 return result;
};

/***/ }),

/***/ 8729:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var PROPER_FUNCTION_NAME = (__webpack_require__(5145).PROPER);
var fails = __webpack_require__(8154);
var whitespaces = __webpack_require__(96);
var non = '\u200B\u0085\u180E';
module.exports = function (METHOD_NAME) {
 return fails(function () {
  return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() !== non || PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME;
 });
};

/***/ }),

/***/ 83:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var requireObjectCoercible = __webpack_require__(5645);
var toString = __webpack_require__(5730);
var whitespaces = __webpack_require__(96);
var replace = uncurryThis(''.replace);
var ltrim = RegExp('^[' + whitespaces + ']+');
var rtrim = RegExp('(^|[^' + whitespaces + '])[' + whitespaces + ']+$');
var createMethod = function (TYPE) {
 return function ($this) {
  var string = toString(requireObjectCoercible($this));
  if (TYPE & 1)
   string = replace(string, ltrim, '');
  if (TYPE & 2)
   string = replace(string, rtrim, '$1');
  return string;
 };
};
module.exports = {
 start: createMethod(1),
 end: createMethod(2),
 trim: createMethod(3)
};

/***/ }),

/***/ 4837:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var fails = __webpack_require__(8154);
var V8 = __webpack_require__(2171);
var IS_BROWSER = __webpack_require__(3413);
var IS_DENO = __webpack_require__(8471);
var IS_NODE = __webpack_require__(4864);
var structuredClone = global.structuredClone;
module.exports = !!structuredClone && !fails(function () {
 if (IS_DENO && V8 > 92 || IS_NODE && V8 > 94 || IS_BROWSER && V8 > 97)
  return false;
 var buffer = new ArrayBuffer(8);
 var clone = structuredClone(buffer, { transfer: [buffer] });
 return buffer.byteLength !== 0 || clone.byteLength !== 8;
});

/***/ }),

/***/ 3663:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var V8_VERSION = __webpack_require__(2171);
var fails = __webpack_require__(8154);
var global = __webpack_require__(9298);
var $String = global.String;
module.exports = !!Object.getOwnPropertySymbols && !fails(function () {
 var symbol = Symbol('symbol detection');
 return !$String(symbol) || !(Object(symbol) instanceof Symbol) || !Symbol.sham && V8_VERSION && V8_VERSION < 41;
});

/***/ }),

/***/ 5117:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
var getBuiltIn = __webpack_require__(7187);
var wellKnownSymbol = __webpack_require__(2292);
var defineBuiltIn = __webpack_require__(7041);
module.exports = function () {
 var Symbol = getBuiltIn('Symbol');
 var SymbolPrototype = Symbol && Symbol.prototype;
 var valueOf = SymbolPrototype && SymbolPrototype.valueOf;
 var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');
 if (SymbolPrototype && !SymbolPrototype[TO_PRIMITIVE]) {
  defineBuiltIn(SymbolPrototype, TO_PRIMITIVE, function (hint) {
   return call(valueOf, this);
  }, { arity: 1 });
 }
};

/***/ }),

/***/ 4186:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_SYMBOL = __webpack_require__(3663);
module.exports = NATIVE_SYMBOL && !!Symbol['for'] && !!Symbol.keyFor;

/***/ }),

/***/ 4578:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var apply = __webpack_require__(7294);
var bind = __webpack_require__(7789);
var isCallable = __webpack_require__(7316);
var hasOwn = __webpack_require__(936);
var fails = __webpack_require__(8154);
var html = __webpack_require__(519);
var arraySlice = __webpack_require__(2251);
var createElement = __webpack_require__(5584);
var validateArgumentsLength = __webpack_require__(2743);
var IS_IOS = __webpack_require__(2589);
var IS_NODE = __webpack_require__(4864);
var set = global.setImmediate;
var clear = global.clearImmediate;
var process = global.process;
var Dispatch = global.Dispatch;
var Function = global.Function;
var MessageChannel = global.MessageChannel;
var String = global.String;
var counter = 0;
var queue = {};
var ONREADYSTATECHANGE = 'onreadystatechange';
var $location, defer, channel, port;
fails(function () {
 $location = global.location;
});
var run = function (id) {
 if (hasOwn(queue, id)) {
  var fn = queue[id];
  delete queue[id];
  fn();
 }
};
var runner = function (id) {
 return function () {
  run(id);
 };
};
var eventListener = function (event) {
 run(event.data);
};
var globalPostMessageDefer = function (id) {
 global.postMessage(String(id), $location.protocol + '//' + $location.host);
};
if (!set || !clear) {
 set = function setImmediate(handler) {
  validateArgumentsLength(arguments.length, 1);
  var fn = isCallable(handler) ? handler : Function(handler);
  var args = arraySlice(arguments, 1);
  queue[++counter] = function () {
   apply(fn, undefined, args);
  };
  defer(counter);
  return counter;
 };
 clear = function clearImmediate(id) {
  delete queue[id];
 };
 if (IS_NODE) {
  defer = function (id) {
   process.nextTick(runner(id));
  };
 } else if (Dispatch && Dispatch.now) {
  defer = function (id) {
   Dispatch.now(runner(id));
  };
 } else if (MessageChannel && !IS_IOS) {
  channel = new MessageChannel();
  port = channel.port2;
  channel.port1.onmessage = eventListener;
  defer = bind(port.postMessage, port);
 } else if (global.addEventListener && isCallable(global.postMessage) && !global.importScripts && $location && $location.protocol !== 'file:' && !fails(globalPostMessageDefer)) {
  defer = globalPostMessageDefer;
  global.addEventListener('message', eventListener, false);
 } else if (ONREADYSTATECHANGE in createElement('script')) {
  defer = function (id) {
   html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {
    html.removeChild(this);
    run(id);
   };
  };
 } else {
  defer = function (id) {
   setTimeout(runner(id), 0);
  };
 }
}
module.exports = {
 set: set,
 clear: clear
};

/***/ }),

/***/ 3328:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
module.exports = uncurryThis(1.0.valueOf);

/***/ }),

/***/ 6985:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIntegerOrInfinity = __webpack_require__(1003);
var max = Math.max;
var min = Math.min;
module.exports = function (index, length) {
 var integer = toIntegerOrInfinity(index);
 return integer < 0 ? max(integer + length, 0) : min(integer, length);
};

/***/ }),

/***/ 212:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toPrimitive = __webpack_require__(4151);
var $TypeError = TypeError;
module.exports = function (argument) {
 var prim = toPrimitive(argument, 'number');
 if (typeof prim == 'number')
  throw new $TypeError("Can't convert number to bigint");
 return BigInt(prim);
};

/***/ }),

/***/ 9548:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIntegerOrInfinity = __webpack_require__(1003);
var toLength = __webpack_require__(8293);
var $RangeError = RangeError;
module.exports = function (it) {
 if (it === undefined)
  return 0;
 var number = toIntegerOrInfinity(it);
 var length = toLength(number);
 if (number !== length)
  throw new $RangeError('Wrong length or index');
 return length;
};

/***/ }),

/***/ 4115:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var IndexedObject = __webpack_require__(3622);
var requireObjectCoercible = __webpack_require__(5645);
module.exports = function (it) {
 return IndexedObject(requireObjectCoercible(it));
};

/***/ }),

/***/ 1003:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var trunc = __webpack_require__(8537);
module.exports = function (argument) {
 var number = +argument;
 return number !== number || number === 0 ? 0 : trunc(number);
};

/***/ }),

/***/ 8293:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIntegerOrInfinity = __webpack_require__(1003);
var min = Math.min;
module.exports = function (argument) {
 return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0;
};

/***/ }),

/***/ 2007:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var requireObjectCoercible = __webpack_require__(5645);
var $Object = Object;
module.exports = function (argument) {
 return $Object(requireObjectCoercible(argument));
};

/***/ }),

/***/ 9892:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toPositiveInteger = __webpack_require__(9817);
var $RangeError = RangeError;
module.exports = function (it, BYTES) {
 var offset = toPositiveInteger(it);
 if (offset % BYTES)
  throw new $RangeError('Wrong offset');
 return offset;
};

/***/ }),

/***/ 9817:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIntegerOrInfinity = __webpack_require__(1003);
var $RangeError = RangeError;
module.exports = function (it) {
 var result = toIntegerOrInfinity(it);
 if (result < 0)
  throw new $RangeError("The argument can't be less than 0");
 return result;
};

/***/ }),

/***/ 4151:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
var isObject = __webpack_require__(7633);
var isSymbol = __webpack_require__(7814);
var getMethod = __webpack_require__(8486);
var ordinaryToPrimitive = __webpack_require__(2923);
var wellKnownSymbol = __webpack_require__(2292);
var $TypeError = TypeError;
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');
module.exports = function (input, pref) {
 if (!isObject(input) || isSymbol(input))
  return input;
 var exoticToPrim = getMethod(input, TO_PRIMITIVE);
 var result;
 if (exoticToPrim) {
  if (pref === undefined)
   pref = 'default';
  result = call(exoticToPrim, input, pref);
  if (!isObject(result) || isSymbol(result))
   return result;
  throw new $TypeError("Can't convert object to primitive value");
 }
 if (pref === undefined)
  pref = 'number';
 return ordinaryToPrimitive(input, pref);
};

/***/ }),

/***/ 4871:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toPrimitive = __webpack_require__(4151);
var isSymbol = __webpack_require__(7814);
module.exports = function (argument) {
 var key = toPrimitive(argument, 'string');
 return isSymbol(key) ? key : key + '';
};

/***/ }),

/***/ 3077:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(2292);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};
test[TO_STRING_TAG] = 'z';
module.exports = String(test) === '[object z]';

/***/ }),

/***/ 5730:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classof = __webpack_require__(8329);
var $String = String;
module.exports = function (argument) {
 if (classof(argument) === 'Symbol')
  throw new TypeError('Cannot convert a Symbol value to a string');
 return $String(argument);
};

/***/ }),

/***/ 9671:
/***/ ((module) => {


var round = Math.round;
module.exports = function (it) {
 var value = round(it);
 return value < 0 ? 0 : value > 0xFF ? 0xFF : value & 0xFF;
};

/***/ }),

/***/ 2276:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var IS_NODE = __webpack_require__(4864);
module.exports = function (name) {
 try {
  if (IS_NODE)
   return Function('return require("' + name + '")')();
 } catch (error) {
 }
};

/***/ }),

/***/ 9762:
/***/ ((module) => {


var $String = String;
module.exports = function (argument) {
 try {
  return $String(argument);
 } catch (error) {
  return 'Object';
 }
};

/***/ }),

/***/ 9173:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var global = __webpack_require__(9298);
var call = __webpack_require__(2026);
var DESCRIPTORS = __webpack_require__(940);
var TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = __webpack_require__(2127);
var ArrayBufferViewCore = __webpack_require__(5861);
var ArrayBufferModule = __webpack_require__(5050);
var anInstance = __webpack_require__(5834);
var createPropertyDescriptor = __webpack_require__(1198);
var createNonEnumerableProperty = __webpack_require__(9293);
var isIntegralNumber = __webpack_require__(987);
var toLength = __webpack_require__(8293);
var toIndex = __webpack_require__(9548);
var toOffset = __webpack_require__(9892);
var toUint8Clamped = __webpack_require__(9671);
var toPropertyKey = __webpack_require__(4871);
var hasOwn = __webpack_require__(936);
var classof = __webpack_require__(8329);
var isObject = __webpack_require__(7633);
var isSymbol = __webpack_require__(7814);
var create = __webpack_require__(6941);
var isPrototypeOf = __webpack_require__(2658);
var setPrototypeOf = __webpack_require__(9763);
var getOwnPropertyNames = (__webpack_require__(5455).f);
var typedArrayFrom = __webpack_require__(1675);
var forEach = (__webpack_require__(2423).forEach);
var setSpecies = __webpack_require__(5963);
var defineBuiltInAccessor = __webpack_require__(9691);
var definePropertyModule = __webpack_require__(7744);
var getOwnPropertyDescriptorModule = __webpack_require__(5764);
var InternalStateModule = __webpack_require__(1649);
var inheritIfRequired = __webpack_require__(7523);
var getInternalState = InternalStateModule.get;
var setInternalState = InternalStateModule.set;
var enforceInternalState = InternalStateModule.enforce;
var nativeDefineProperty = definePropertyModule.f;
var nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
var RangeError = global.RangeError;
var ArrayBuffer = ArrayBufferModule.ArrayBuffer;
var ArrayBufferPrototype = ArrayBuffer.prototype;
var DataView = ArrayBufferModule.DataView;
var NATIVE_ARRAY_BUFFER_VIEWS = ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS;
var TYPED_ARRAY_TAG = ArrayBufferViewCore.TYPED_ARRAY_TAG;
var TypedArray = ArrayBufferViewCore.TypedArray;
var TypedArrayPrototype = ArrayBufferViewCore.TypedArrayPrototype;
var aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;
var isTypedArray = ArrayBufferViewCore.isTypedArray;
var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';
var WRONG_LENGTH = 'Wrong length';
var fromList = function (C, list) {
 aTypedArrayConstructor(C);
 var index = 0;
 var length = list.length;
 var result = new C(length);
 while (length > index)
  result[index] = list[index++];
 return result;
};
var addGetter = function (it, key) {
 defineBuiltInAccessor(it, key, {
  configurable: true,
  get: function () {
   return getInternalState(this)[key];
  }
 });
};
var isArrayBuffer = function (it) {
 var klass;
 return isPrototypeOf(ArrayBufferPrototype, it) || (klass = classof(it)) === 'ArrayBuffer' || klass === 'SharedArrayBuffer';
};
var isTypedArrayIndex = function (target, key) {
 return isTypedArray(target) && !isSymbol(key) && key in target && isIntegralNumber(+key) && key >= 0;
};
var wrappedGetOwnPropertyDescriptor = function getOwnPropertyDescriptor(target, key) {
 key = toPropertyKey(key);
 return isTypedArrayIndex(target, key) ? createPropertyDescriptor(2, target[key]) : nativeGetOwnPropertyDescriptor(target, key);
};
var wrappedDefineProperty = function defineProperty(target, key, descriptor) {
 key = toPropertyKey(key);
 if (isTypedArrayIndex(target, key) && isObject(descriptor) && hasOwn(descriptor, 'value') && !hasOwn(descriptor, 'get') && !hasOwn(descriptor, 'set') && !descriptor.configurable && (!hasOwn(descriptor, 'writable') || descriptor.writable) && (!hasOwn(descriptor, 'enumerable') || descriptor.enumerable)) {
  target[key] = descriptor.value;
  return target;
 }
 return nativeDefineProperty(target, key, descriptor);
};
if (DESCRIPTORS) {
 if (!NATIVE_ARRAY_BUFFER_VIEWS) {
  getOwnPropertyDescriptorModule.f = wrappedGetOwnPropertyDescriptor;
  definePropertyModule.f = wrappedDefineProperty;
  addGetter(TypedArrayPrototype, 'buffer');
  addGetter(TypedArrayPrototype, 'byteOffset');
  addGetter(TypedArrayPrototype, 'byteLength');
  addGetter(TypedArrayPrototype, 'length');
 }
 $({
  target: 'Object',
  stat: true,
  forced: !NATIVE_ARRAY_BUFFER_VIEWS
 }, {
  getOwnPropertyDescriptor: wrappedGetOwnPropertyDescriptor,
  defineProperty: wrappedDefineProperty
 });
 module.exports = function (TYPE, wrapper, CLAMPED) {
  var BYTES = TYPE.match(/\d+/)[0] / 8;
  var CONSTRUCTOR_NAME = TYPE + (CLAMPED ? 'Clamped' : '') + 'Array';
  var GETTER = 'get' + TYPE;
  var SETTER = 'set' + TYPE;
  var NativeTypedArrayConstructor = global[CONSTRUCTOR_NAME];
  var TypedArrayConstructor = NativeTypedArrayConstructor;
  var TypedArrayConstructorPrototype = TypedArrayConstructor && TypedArrayConstructor.prototype;
  var exported = {};
  var getter = function (that, index) {
   var data = getInternalState(that);
   return data.view[GETTER](index * BYTES + data.byteOffset, true);
  };
  var setter = function (that, index, value) {
   var data = getInternalState(that);
   data.view[SETTER](index * BYTES + data.byteOffset, CLAMPED ? toUint8Clamped(value) : value, true);
  };
  var addElement = function (that, index) {
   nativeDefineProperty(that, index, {
    get: function () {
     return getter(this, index);
    },
    set: function (value) {
     return setter(this, index, value);
    },
    enumerable: true
   });
  };
  if (!NATIVE_ARRAY_BUFFER_VIEWS) {
   TypedArrayConstructor = wrapper(function (that, data, offset, $length) {
    anInstance(that, TypedArrayConstructorPrototype);
    var index = 0;
    var byteOffset = 0;
    var buffer, byteLength, length;
    if (!isObject(data)) {
     length = toIndex(data);
     byteLength = length * BYTES;
     buffer = new ArrayBuffer(byteLength);
    } else if (isArrayBuffer(data)) {
     buffer = data;
     byteOffset = toOffset(offset, BYTES);
     var $len = data.byteLength;
     if ($length === undefined) {
      if ($len % BYTES)
       throw new RangeError(WRONG_LENGTH);
      byteLength = $len - byteOffset;
      if (byteLength < 0)
       throw new RangeError(WRONG_LENGTH);
     } else {
      byteLength = toLength($length) * BYTES;
      if (byteLength + byteOffset > $len)
       throw new RangeError(WRONG_LENGTH);
     }
     length = byteLength / BYTES;
    } else if (isTypedArray(data)) {
     return fromList(TypedArrayConstructor, data);
    } else {
     return call(typedArrayFrom, TypedArrayConstructor, data);
    }
    setInternalState(that, {
     buffer: buffer,
     byteOffset: byteOffset,
     byteLength: byteLength,
     length: length,
     view: new DataView(buffer)
    });
    while (index < length)
     addElement(that, index++);
   });
   if (setPrototypeOf)
    setPrototypeOf(TypedArrayConstructor, TypedArray);
   TypedArrayConstructorPrototype = TypedArrayConstructor.prototype = create(TypedArrayPrototype);
  } else if (TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS) {
   TypedArrayConstructor = wrapper(function (dummy, data, typedArrayOffset, $length) {
    anInstance(dummy, TypedArrayConstructorPrototype);
    return inheritIfRequired((function () {
     if (!isObject(data))
      return new NativeTypedArrayConstructor(toIndex(data));
     if (isArrayBuffer(data))
      return $length !== undefined ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES), $length) : typedArrayOffset !== undefined ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES)) : new NativeTypedArrayConstructor(data);
     if (isTypedArray(data))
      return fromList(TypedArrayConstructor, data);
     return call(typedArrayFrom, TypedArrayConstructor, data);
    }()), dummy, TypedArrayConstructor);
   });
   if (setPrototypeOf)
    setPrototypeOf(TypedArrayConstructor, TypedArray);
   forEach(getOwnPropertyNames(NativeTypedArrayConstructor), function (key) {
    if (!(key in TypedArrayConstructor)) {
     createNonEnumerableProperty(TypedArrayConstructor, key, NativeTypedArrayConstructor[key]);
    }
   });
   TypedArrayConstructor.prototype = TypedArrayConstructorPrototype;
  }
  if (TypedArrayConstructorPrototype.constructor !== TypedArrayConstructor) {
   createNonEnumerableProperty(TypedArrayConstructorPrototype, 'constructor', TypedArrayConstructor);
  }
  enforceInternalState(TypedArrayConstructorPrototype).TypedArrayConstructor = TypedArrayConstructor;
  if (TYPED_ARRAY_TAG) {
   createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_TAG, CONSTRUCTOR_NAME);
  }
  var FORCED = TypedArrayConstructor !== NativeTypedArrayConstructor;
  exported[CONSTRUCTOR_NAME] = TypedArrayConstructor;
  $({
   global: true,
   constructor: true,
   forced: FORCED,
   sham: !NATIVE_ARRAY_BUFFER_VIEWS
  }, exported);
  if (!(BYTES_PER_ELEMENT in TypedArrayConstructor)) {
   createNonEnumerableProperty(TypedArrayConstructor, BYTES_PER_ELEMENT, BYTES);
  }
  if (!(BYTES_PER_ELEMENT in TypedArrayConstructorPrototype)) {
   createNonEnumerableProperty(TypedArrayConstructorPrototype, BYTES_PER_ELEMENT, BYTES);
  }
  setSpecies(CONSTRUCTOR_NAME);
 };
} else
 module.exports = function () {
 };

/***/ }),

/***/ 2127:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var fails = __webpack_require__(8154);
var checkCorrectnessOfIteration = __webpack_require__(1374);
var NATIVE_ARRAY_BUFFER_VIEWS = (__webpack_require__(5861).NATIVE_ARRAY_BUFFER_VIEWS);
var ArrayBuffer = global.ArrayBuffer;
var Int8Array = global.Int8Array;
module.exports = !NATIVE_ARRAY_BUFFER_VIEWS || !fails(function () {
 Int8Array(1);
}) || !fails(function () {
 new Int8Array(-1);
}) || !checkCorrectnessOfIteration(function (iterable) {
 new Int8Array();
 new Int8Array(null);
 new Int8Array(1.5);
 new Int8Array(iterable);
}, true) || fails(function () {
 return new Int8Array(new ArrayBuffer(2), 1, undefined).length !== 1;
});

/***/ }),

/***/ 5306:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var arrayFromConstructorAndList = __webpack_require__(7003);
var typedArraySpeciesConstructor = __webpack_require__(6239);
module.exports = function (instance, list) {
 return arrayFromConstructorAndList(typedArraySpeciesConstructor(instance), list);
};

/***/ }),

/***/ 1675:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var bind = __webpack_require__(7789);
var call = __webpack_require__(2026);
var aConstructor = __webpack_require__(7073);
var toObject = __webpack_require__(2007);
var lengthOfArrayLike = __webpack_require__(451);
var getIterator = __webpack_require__(7612);
var getIteratorMethod = __webpack_require__(273);
var isArrayIteratorMethod = __webpack_require__(5191);
var isBigIntArray = __webpack_require__(5986);
var aTypedArrayConstructor = (__webpack_require__(5861).aTypedArrayConstructor);
var toBigInt = __webpack_require__(212);
module.exports = function from(source) {
 var C = aConstructor(this);
 var O = toObject(source);
 var argumentsLength = arguments.length;
 var mapfn = argumentsLength > 1 ? arguments[1] : undefined;
 var mapping = mapfn !== undefined;
 var iteratorMethod = getIteratorMethod(O);
 var i, length, result, thisIsBigIntArray, value, step, iterator, next;
 if (iteratorMethod && !isArrayIteratorMethod(iteratorMethod)) {
  iterator = getIterator(O, iteratorMethod);
  next = iterator.next;
  O = [];
  while (!(step = call(next, iterator)).done) {
   O.push(step.value);
  }
 }
 if (mapping && argumentsLength > 2) {
  mapfn = bind(mapfn, arguments[2]);
 }
 length = lengthOfArrayLike(O);
 result = new (aTypedArrayConstructor(C))(length);
 thisIsBigIntArray = isBigIntArray(result);
 for (i = 0; length > i; i++) {
  value = mapping ? mapfn(O[i], i) : O[i];
  result[i] = thisIsBigIntArray ? toBigInt(value) : +value;
 }
 return result;
};

/***/ }),

/***/ 6239:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var speciesConstructor = __webpack_require__(8180);
var aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;
var getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;
module.exports = function (originalArray) {
 return aTypedArrayConstructor(speciesConstructor(originalArray, getTypedArrayConstructor(originalArray)));
};

/***/ }),

/***/ 7561:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var id = 0;
var postfix = Math.random();
var toString = uncurryThis(1.0.toString);
module.exports = function (key) {
 return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);
};

/***/ }),

/***/ 8815:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(8154);
var wellKnownSymbol = __webpack_require__(2292);
var DESCRIPTORS = __webpack_require__(940);
var IS_PURE = __webpack_require__(2554);
var ITERATOR = wellKnownSymbol('iterator');
module.exports = !fails(function () {
 var url = new URL('b?a=1&b=2&c=3', 'http://a');
 var params = url.searchParams;
 var params2 = new URLSearchParams('a=1&a=2&b=3');
 var result = '';
 url.pathname = 'c%20d';
 params.forEach(function (value, key) {
  params['delete']('b');
  result += key + value;
 });
 params2['delete']('a', 2);
 params2['delete']('b', undefined);
 return IS_PURE && (!url.toJSON || !params2.has('a', 1) || params2.has('a', 2) || !params2.has('a', undefined) || params2.has('b')) || !params.size && (IS_PURE || !DESCRIPTORS) || !params.sort || url.href !== 'http://a/c%20d?a=1&c=3' || params.get('c') !== '3' || String(new URLSearchParams('?a=1')) !== 'a=1' || !params[ITERATOR] || new URL('https://a@b').username !== 'a' || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b' || new URL('http://').host !== 'xn--e1aybc' || new URL('http://a#').hash !== '#%D0%B1' || result !== 'a1c3' || new URL('http://x', undefined).host !== 'x';
});

/***/ }),

/***/ 7960:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_SYMBOL = __webpack_require__(3663);
module.exports = NATIVE_SYMBOL && !Symbol.sham && typeof Symbol.iterator == 'symbol';

/***/ }),

/***/ 9610:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var fails = __webpack_require__(8154);
module.exports = DESCRIPTORS && fails(function () {
 return Object.defineProperty(function () {
 }, 'prototype', {
  value: 42,
  writable: false
 }).prototype !== 42;
});

/***/ }),

/***/ 2743:
/***/ ((module) => {


var $TypeError = TypeError;
module.exports = function (passed, required) {
 if (passed < required)
  throw new $TypeError('Not enough arguments');
 return passed;
};

/***/ }),

/***/ 8443:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var isCallable = __webpack_require__(7316);
var WeakMap = global.WeakMap;
module.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));

/***/ }),

/***/ 7120:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var path = __webpack_require__(1021);
var hasOwn = __webpack_require__(936);
var wrappedWellKnownSymbolModule = __webpack_require__(8890);
var defineProperty = (__webpack_require__(7744).f);
module.exports = function (NAME) {
 var Symbol = path.Symbol || (path.Symbol = {});
 if (!hasOwn(Symbol, NAME))
  defineProperty(Symbol, NAME, { value: wrappedWellKnownSymbolModule.f(NAME) });
};

/***/ }),

/***/ 8890:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(2292);
exports.f = wellKnownSymbol;

/***/ }),

/***/ 2292:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var shared = __webpack_require__(6807);
var hasOwn = __webpack_require__(936);
var uid = __webpack_require__(7561);
var NATIVE_SYMBOL = __webpack_require__(3663);
var USE_SYMBOL_AS_UID = __webpack_require__(7960);
var Symbol = global.Symbol;
var WellKnownSymbolsStore = shared('wks');
var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;
module.exports = function (name) {
 if (!hasOwn(WellKnownSymbolsStore, name)) {
  WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name) ? Symbol[name] : createWellKnownSymbol('Symbol.' + name);
 }
 return WellKnownSymbolsStore[name];
};

/***/ }),

/***/ 96:
/***/ ((module) => {


module.exports = '\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u2000\u2001\u2002' + '\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';

/***/ }),

/***/ 7342:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(7187);
var hasOwn = __webpack_require__(936);
var createNonEnumerableProperty = __webpack_require__(9293);
var isPrototypeOf = __webpack_require__(2658);
var setPrototypeOf = __webpack_require__(9763);
var copyConstructorProperties = __webpack_require__(1425);
var proxyAccessor = __webpack_require__(6085);
var inheritIfRequired = __webpack_require__(7523);
var normalizeStringArgument = __webpack_require__(1264);
var installErrorCause = __webpack_require__(8422);
var installErrorStack = __webpack_require__(1931);
var DESCRIPTORS = __webpack_require__(940);
var IS_PURE = __webpack_require__(2554);
module.exports = function (FULL_NAME, wrapper, FORCED, IS_AGGREGATE_ERROR) {
 var STACK_TRACE_LIMIT = 'stackTraceLimit';
 var OPTIONS_POSITION = IS_AGGREGATE_ERROR ? 2 : 1;
 var path = FULL_NAME.split('.');
 var ERROR_NAME = path[path.length - 1];
 var OriginalError = getBuiltIn.apply(null, path);
 if (!OriginalError)
  return;
 var OriginalErrorPrototype = OriginalError.prototype;
 if (!IS_PURE && hasOwn(OriginalErrorPrototype, 'cause'))
  delete OriginalErrorPrototype.cause;
 if (!FORCED)
  return OriginalError;
 var BaseError = getBuiltIn('Error');
 var WrappedError = wrapper(function (a, b) {
  var message = normalizeStringArgument(IS_AGGREGATE_ERROR ? b : a, undefined);
  var result = IS_AGGREGATE_ERROR ? new OriginalError(a) : new OriginalError();
  if (message !== undefined)
   createNonEnumerableProperty(result, 'message', message);
  installErrorStack(result, WrappedError, result.stack, 2);
  if (this && isPrototypeOf(OriginalErrorPrototype, this))
   inheritIfRequired(result, this, WrappedError);
  if (arguments.length > OPTIONS_POSITION)
   installErrorCause(result, arguments[OPTIONS_POSITION]);
  return result;
 });
 WrappedError.prototype = OriginalErrorPrototype;
 if (ERROR_NAME !== 'Error') {
  if (setPrototypeOf)
   setPrototypeOf(WrappedError, BaseError);
  else
   copyConstructorProperties(WrappedError, BaseError, { name: true });
 } else if (DESCRIPTORS && STACK_TRACE_LIMIT in OriginalError) {
  proxyAccessor(WrappedError, OriginalError, STACK_TRACE_LIMIT);
  proxyAccessor(WrappedError, OriginalError, 'prepareStackTrace');
 }
 copyConstructorProperties(WrappedError, OriginalError);
 if (!IS_PURE)
  try {
   if (OriginalErrorPrototype.name !== ERROR_NAME) {
    createNonEnumerableProperty(OriginalErrorPrototype, 'name', ERROR_NAME);
   }
   OriginalErrorPrototype.constructor = WrappedError;
  } catch (error) {
  }
 return WrappedError;
};

/***/ }),

/***/ 6820:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var toObject = __webpack_require__(2007);
var lengthOfArrayLike = __webpack_require__(451);
var toIntegerOrInfinity = __webpack_require__(1003);
var addToUnscopables = __webpack_require__(5463);
$({
 target: 'Array',
 proto: true
}, {
 at: function at(index) {
  var O = toObject(this);
  var len = lengthOfArrayLike(O);
  var relativeIndex = toIntegerOrInfinity(index);
  var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;
  return k < 0 || k >= len ? undefined : O[k];
 }
});
addToUnscopables('at');

/***/ }),

/***/ 7874:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var fails = __webpack_require__(8154);
var isArray = __webpack_require__(6998);
var isObject = __webpack_require__(7633);
var toObject = __webpack_require__(2007);
var lengthOfArrayLike = __webpack_require__(451);
var doesNotExceedSafeInteger = __webpack_require__(4287);
var createProperty = __webpack_require__(8947);
var arraySpeciesCreate = __webpack_require__(8097);
var arrayMethodHasSpeciesSupport = __webpack_require__(3577);
var wellKnownSymbol = __webpack_require__(2292);
var V8_VERSION = __webpack_require__(2171);
var IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');
var IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {
 var array = [];
 array[IS_CONCAT_SPREADABLE] = false;
 return array.concat()[0] !== array;
});
var isConcatSpreadable = function (O) {
 if (!isObject(O))
  return false;
 var spreadable = O[IS_CONCAT_SPREADABLE];
 return spreadable !== undefined ? !!spreadable : isArray(O);
};
var FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !arrayMethodHasSpeciesSupport('concat');
$({
 target: 'Array',
 proto: true,
 arity: 1,
 forced: FORCED
}, {
 concat: function concat(arg) {
  var O = toObject(this);
  var A = arraySpeciesCreate(O, 0);
  var n = 0;
  var i, k, length, len, E;
  for (i = -1, length = arguments.length; i < length; i++) {
   E = i === -1 ? O : arguments[i];
   if (isConcatSpreadable(E)) {
    len = lengthOfArrayLike(E);
    doesNotExceedSafeInteger(n + len);
    for (k = 0; k < len; k++, n++)
     if (k in E)
      createProperty(A, n, E[k]);
   } else {
    doesNotExceedSafeInteger(n + 1);
    createProperty(A, n++, E);
   }
  }
  A.length = n;
  return A;
 }
});

/***/ }),

/***/ 7078:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var copyWithin = __webpack_require__(1474);
var addToUnscopables = __webpack_require__(5463);
$({
 target: 'Array',
 proto: true
}, { copyWithin: copyWithin });
addToUnscopables('copyWithin');

/***/ }),

/***/ 6394:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var fill = __webpack_require__(8041);
var addToUnscopables = __webpack_require__(5463);
$({
 target: 'Array',
 proto: true
}, { fill: fill });
addToUnscopables('fill');

/***/ }),

/***/ 1585:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $filter = (__webpack_require__(2423).filter);
var arrayMethodHasSpeciesSupport = __webpack_require__(3577);
var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');
$({
 target: 'Array',
 proto: true,
 forced: !HAS_SPECIES_SUPPORT
}, {
 filter: function filter(callbackfn) {
  return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
 }
});

/***/ }),

/***/ 5621:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $findIndex = (__webpack_require__(2423).findIndex);
var addToUnscopables = __webpack_require__(5463);
var FIND_INDEX = 'findIndex';
var SKIPS_HOLES = true;
if (FIND_INDEX in [])
 Array(1)[FIND_INDEX](function () {
  SKIPS_HOLES = false;
 });
$({
 target: 'Array',
 proto: true,
 forced: SKIPS_HOLES
}, {
 findIndex: function findIndex(callbackfn) {
  return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
 }
});
addToUnscopables(FIND_INDEX);

/***/ }),

/***/ 275:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $find = (__webpack_require__(2423).find);
var addToUnscopables = __webpack_require__(5463);
var FIND = 'find';
var SKIPS_HOLES = true;
if (FIND in [])
 Array(1)[FIND](function () {
  SKIPS_HOLES = false;
 });
$({
 target: 'Array',
 proto: true,
 forced: SKIPS_HOLES
}, {
 find: function find(callbackfn) {
  return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
 }
});
addToUnscopables(FIND);

/***/ }),

/***/ 4622:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var flattenIntoArray = __webpack_require__(7938);
var toObject = __webpack_require__(2007);
var lengthOfArrayLike = __webpack_require__(451);
var toIntegerOrInfinity = __webpack_require__(1003);
var arraySpeciesCreate = __webpack_require__(8097);
$({
 target: 'Array',
 proto: true
}, {
 flat: function flat() {
  var depthArg = arguments.length ? arguments[0] : undefined;
  var O = toObject(this);
  var sourceLen = lengthOfArrayLike(O);
  var A = arraySpeciesCreate(O, 0);
  A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toIntegerOrInfinity(depthArg));
  return A;
 }
});

/***/ }),

/***/ 9593:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var from = __webpack_require__(7609);
var checkCorrectnessOfIteration = __webpack_require__(1374);
var INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {
 Array.from(iterable);
});
$({
 target: 'Array',
 stat: true,
 forced: INCORRECT_ITERATION
}, { from: from });

/***/ }),

/***/ 2796:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $includes = (__webpack_require__(9773).includes);
var fails = __webpack_require__(8154);
var addToUnscopables = __webpack_require__(5463);
var BROKEN_ON_SPARSE = fails(function () {
 return !Array(1).includes();
});
$({
 target: 'Array',
 proto: true,
 forced: BROKEN_ON_SPARSE
}, {
 includes: function includes(el) {
  return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);
 }
});
addToUnscopables('includes');

/***/ }),

/***/ 8649:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var uncurryThis = __webpack_require__(6218);
var $indexOf = (__webpack_require__(9773).indexOf);
var arrayMethodIsStrict = __webpack_require__(8321);
var nativeIndexOf = uncurryThis([].indexOf);
var NEGATIVE_ZERO = !!nativeIndexOf && 1 / nativeIndexOf([1], 1, -0) < 0;
var FORCED = NEGATIVE_ZERO || !arrayMethodIsStrict('indexOf');
$({
 target: 'Array',
 proto: true,
 forced: FORCED
}, {
 indexOf: function indexOf(searchElement) {
  var fromIndex = arguments.length > 1 ? arguments[1] : undefined;
  return NEGATIVE_ZERO ? nativeIndexOf(this, searchElement, fromIndex) || 0 : $indexOf(this, searchElement, fromIndex);
 }
});

/***/ }),

/***/ 6180:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIndexedObject = __webpack_require__(4115);
var addToUnscopables = __webpack_require__(5463);
var Iterators = __webpack_require__(6596);
var InternalStateModule = __webpack_require__(1649);
var defineProperty = (__webpack_require__(7744).f);
var defineIterator = __webpack_require__(7301);
var createIterResultObject = __webpack_require__(1111);
var IS_PURE = __webpack_require__(2554);
var DESCRIPTORS = __webpack_require__(940);
var ARRAY_ITERATOR = 'Array Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);
module.exports = defineIterator(Array, 'Array', function (iterated, kind) {
 setInternalState(this, {
  type: ARRAY_ITERATOR,
  target: toIndexedObject(iterated),
  index: 0,
  kind: kind
 });
}, function () {
 var state = getInternalState(this);
 var target = state.target;
 var index = state.index++;
 if (!target || index >= target.length) {
  state.target = undefined;
  return createIterResultObject(undefined, true);
 }
 switch (state.kind) {
 case 'keys':
  return createIterResultObject(index, false);
 case 'values':
  return createIterResultObject(target[index], false);
 }
 return createIterResultObject([
  index,
  target[index]
 ], false);
}, 'values');
var values = Iterators.Arguments = Iterators.Array;
addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');
if (!IS_PURE && DESCRIPTORS && values.name !== 'values')
 try {
  defineProperty(values, 'name', { value: 'values' });
 } catch (error) {
 }

/***/ }),

/***/ 5136:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $map = (__webpack_require__(2423).map);
var arrayMethodHasSpeciesSupport = __webpack_require__(3577);
var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');
$({
 target: 'Array',
 proto: true,
 forced: !HAS_SPECIES_SUPPORT
}, {
 map: function map(callbackfn) {
  return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
 }
});

/***/ }),

/***/ 4226:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var toObject = __webpack_require__(2007);
var lengthOfArrayLike = __webpack_require__(451);
var setArrayLength = __webpack_require__(6661);
var doesNotExceedSafeInteger = __webpack_require__(4287);
var fails = __webpack_require__(8154);
var INCORRECT_TO_LENGTH = fails(function () {
 return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;
});
var properErrorOnNonWritableLength = function () {
 try {
  Object.defineProperty([], 'length', { writable: false }).push();
 } catch (error) {
  return error instanceof TypeError;
 }
};
var FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();
$({
 target: 'Array',
 proto: true,
 arity: 1,
 forced: FORCED
}, {
 push: function push(item) {
  var O = toObject(this);
  var len = lengthOfArrayLike(O);
  var argCount = arguments.length;
  doesNotExceedSafeInteger(len + argCount);
  for (var i = 0; i < argCount; i++) {
   O[len] = arguments[i];
   len++;
  }
  setArrayLength(O, len);
  return len;
 }
});

/***/ }),

/***/ 7620:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $reduce = (__webpack_require__(2741).left);
var arrayMethodIsStrict = __webpack_require__(8321);
var CHROME_VERSION = __webpack_require__(2171);
var IS_NODE = __webpack_require__(4864);
var CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;
var FORCED = CHROME_BUG || !arrayMethodIsStrict('reduce');
$({
 target: 'Array',
 proto: true,
 forced: FORCED
}, {
 reduce: function reduce(callbackfn) {
  var length = arguments.length;
  return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);
 }
});

/***/ }),

/***/ 171:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var isArray = __webpack_require__(6998);
var isConstructor = __webpack_require__(1694);
var isObject = __webpack_require__(7633);
var toAbsoluteIndex = __webpack_require__(6985);
var lengthOfArrayLike = __webpack_require__(451);
var toIndexedObject = __webpack_require__(4115);
var createProperty = __webpack_require__(8947);
var wellKnownSymbol = __webpack_require__(2292);
var arrayMethodHasSpeciesSupport = __webpack_require__(3577);
var nativeSlice = __webpack_require__(2251);
var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');
var SPECIES = wellKnownSymbol('species');
var $Array = Array;
var max = Math.max;
$({
 target: 'Array',
 proto: true,
 forced: !HAS_SPECIES_SUPPORT
}, {
 slice: function slice(start, end) {
  var O = toIndexedObject(this);
  var length = lengthOfArrayLike(O);
  var k = toAbsoluteIndex(start, length);
  var fin = toAbsoluteIndex(end === undefined ? length : end, length);
  var Constructor, result, n;
  if (isArray(O)) {
   Constructor = O.constructor;
   if (isConstructor(Constructor) && (Constructor === $Array || isArray(Constructor.prototype))) {
    Constructor = undefined;
   } else if (isObject(Constructor)) {
    Constructor = Constructor[SPECIES];
    if (Constructor === null)
     Constructor = undefined;
   }
   if (Constructor === $Array || Constructor === undefined) {
    return nativeSlice(O, k, fin);
   }
  }
  result = new (Constructor === undefined ? $Array : Constructor)(max(fin - k, 0));
  for (n = 0; k < fin; k++, n++)
   if (k in O)
    createProperty(result, n, O[k]);
  result.length = n;
  return result;
 }
});

/***/ }),

/***/ 8301:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var uncurryThis = __webpack_require__(8403);
var aCallable = __webpack_require__(1782);
var toObject = __webpack_require__(2007);
var lengthOfArrayLike = __webpack_require__(451);
var deletePropertyOrThrow = __webpack_require__(2322);
var toString = __webpack_require__(5730);
var fails = __webpack_require__(8154);
var internalSort = __webpack_require__(4689);
var arrayMethodIsStrict = __webpack_require__(8321);
var FF = __webpack_require__(7614);
var IE_OR_EDGE = __webpack_require__(7463);
var V8 = __webpack_require__(2171);
var WEBKIT = __webpack_require__(7906);
var test = [];
var nativeSort = uncurryThis(test.sort);
var push = uncurryThis(test.push);
var FAILS_ON_UNDEFINED = fails(function () {
 test.sort(undefined);
});
var FAILS_ON_NULL = fails(function () {
 test.sort(null);
});
var STRICT_METHOD = arrayMethodIsStrict('sort');
var STABLE_SORT = !fails(function () {
 if (V8)
  return V8 < 70;
 if (FF && FF > 3)
  return;
 if (IE_OR_EDGE)
  return true;
 if (WEBKIT)
  return WEBKIT < 603;
 var result = '';
 var code, chr, value, index;
 for (code = 65; code < 76; code++) {
  chr = String.fromCharCode(code);
  switch (code) {
  case 66:
  case 69:
  case 70:
  case 72:
   value = 3;
   break;
  case 68:
  case 71:
   value = 4;
   break;
  default:
   value = 2;
  }
  for (index = 0; index < 47; index++) {
   test.push({
    k: chr + index,
    v: value
   });
  }
 }
 test.sort(function (a, b) {
  return b.v - a.v;
 });
 for (index = 0; index < test.length; index++) {
  chr = test[index].k.charAt(0);
  if (result.charAt(result.length - 1) !== chr)
   result += chr;
 }
 return result !== 'DGBEFHACIJK';
});
var FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;
var getSortCompare = function (comparefn) {
 return function (x, y) {
  if (y === undefined)
   return -1;
  if (x === undefined)
   return 1;
  if (comparefn !== undefined)
   return +comparefn(x, y) || 0;
  return toString(x) > toString(y) ? 1 : -1;
 };
};
$({
 target: 'Array',
 proto: true,
 forced: FORCED
}, {
 sort: function sort(comparefn) {
  if (comparefn !== undefined)
   aCallable(comparefn);
  var array = toObject(this);
  if (STABLE_SORT)
   return comparefn === undefined ? nativeSort(array) : nativeSort(array, comparefn);
  var items = [];
  var arrayLength = lengthOfArrayLike(array);
  var itemsLength, index;
  for (index = 0; index < arrayLength; index++) {
   if (index in array)
    push(items, array[index]);
  }
  internalSort(items, getSortCompare(comparefn));
  itemsLength = lengthOfArrayLike(items);
  index = 0;
  while (index < itemsLength)
   array[index] = items[index++];
  while (index < arrayLength)
   deletePropertyOrThrow(array, index++);
  return array;
 }
});

/***/ }),

/***/ 6302:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var toObject = __webpack_require__(2007);
var toAbsoluteIndex = __webpack_require__(6985);
var toIntegerOrInfinity = __webpack_require__(1003);
var lengthOfArrayLike = __webpack_require__(451);
var setArrayLength = __webpack_require__(6661);
var doesNotExceedSafeInteger = __webpack_require__(4287);
var arraySpeciesCreate = __webpack_require__(8097);
var createProperty = __webpack_require__(8947);
var deletePropertyOrThrow = __webpack_require__(2322);
var arrayMethodHasSpeciesSupport = __webpack_require__(3577);
var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');
var max = Math.max;
var min = Math.min;
$({
 target: 'Array',
 proto: true,
 forced: !HAS_SPECIES_SUPPORT
}, {
 splice: function splice(start, deleteCount) {
  var O = toObject(this);
  var len = lengthOfArrayLike(O);
  var actualStart = toAbsoluteIndex(start, len);
  var argumentsLength = arguments.length;
  var insertCount, actualDeleteCount, A, k, from, to;
  if (argumentsLength === 0) {
   insertCount = actualDeleteCount = 0;
  } else if (argumentsLength === 1) {
   insertCount = 0;
   actualDeleteCount = len - actualStart;
  } else {
   insertCount = argumentsLength - 2;
   actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);
  }
  doesNotExceedSafeInteger(len + insertCount - actualDeleteCount);
  A = arraySpeciesCreate(O, actualDeleteCount);
  for (k = 0; k < actualDeleteCount; k++) {
   from = actualStart + k;
   if (from in O)
    createProperty(A, k, O[from]);
  }
  A.length = actualDeleteCount;
  if (insertCount < actualDeleteCount) {
   for (k = actualStart; k < len - actualDeleteCount; k++) {
    from = k + actualDeleteCount;
    to = k + insertCount;
    if (from in O)
     O[to] = O[from];
    else
     deletePropertyOrThrow(O, to);
   }
   for (k = len; k > len - actualDeleteCount + insertCount; k--)
    deletePropertyOrThrow(O, k - 1);
  } else if (insertCount > actualDeleteCount) {
   for (k = len - actualDeleteCount; k > actualStart; k--) {
    from = k + actualDeleteCount - 1;
    to = k + insertCount - 1;
    if (from in O)
     O[to] = O[from];
    else
     deletePropertyOrThrow(O, to);
   }
  }
  for (k = 0; k < insertCount; k++) {
   O[k + actualStart] = arguments[k + 2];
  }
  setArrayLength(O, len - actualDeleteCount + insertCount);
  return A;
 }
});

/***/ }),

/***/ 3295:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var addToUnscopables = __webpack_require__(5463);
addToUnscopables('flat');

/***/ }),

/***/ 9779:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var toObject = __webpack_require__(2007);
var lengthOfArrayLike = __webpack_require__(451);
var setArrayLength = __webpack_require__(6661);
var deletePropertyOrThrow = __webpack_require__(2322);
var doesNotExceedSafeInteger = __webpack_require__(4287);
var INCORRECT_RESULT = [].unshift(0) !== 1;
var properErrorOnNonWritableLength = function () {
 try {
  Object.defineProperty([], 'length', { writable: false }).unshift();
 } catch (error) {
  return error instanceof TypeError;
 }
};
var FORCED = INCORRECT_RESULT || !properErrorOnNonWritableLength();
$({
 target: 'Array',
 proto: true,
 arity: 1,
 forced: FORCED
}, {
 unshift: function unshift(item) {
  var O = toObject(this);
  var len = lengthOfArrayLike(O);
  var argCount = arguments.length;
  if (argCount) {
   doesNotExceedSafeInteger(len + argCount);
   var k = len;
   while (k--) {
    var to = k + argCount;
    if (k in O)
     O[to] = O[k];
    else
     deletePropertyOrThrow(O, to);
   }
   for (var j = 0; j < argCount; j++) {
    O[j] = arguments[j];
   }
  }
  return setArrayLength(O, len + argCount);
 }
});

/***/ }),

/***/ 8806:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var hasOwn = __webpack_require__(936);
var defineBuiltIn = __webpack_require__(7041);
var dateToPrimitive = __webpack_require__(3612);
var wellKnownSymbol = __webpack_require__(2292);
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');
var DatePrototype = Date.prototype;
if (!hasOwn(DatePrototype, TO_PRIMITIVE)) {
 defineBuiltIn(DatePrototype, TO_PRIMITIVE, dateToPrimitive);
}

/***/ }),

/***/ 3352:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var global = __webpack_require__(9298);
var apply = __webpack_require__(7294);
var wrapErrorConstructorWithCause = __webpack_require__(7342);
var WEB_ASSEMBLY = 'WebAssembly';
var WebAssembly = global[WEB_ASSEMBLY];
var FORCED = new Error('e', { cause: 7 }).cause !== 7;
var exportGlobalErrorCauseWrapper = function (ERROR_NAME, wrapper) {
 var O = {};
 O[ERROR_NAME] = wrapErrorConstructorWithCause(ERROR_NAME, wrapper, FORCED);
 $({
  global: true,
  constructor: true,
  arity: 1,
  forced: FORCED
 }, O);
};
var exportWebAssemblyErrorCauseWrapper = function (ERROR_NAME, wrapper) {
 if (WebAssembly && WebAssembly[ERROR_NAME]) {
  var O = {};
  O[ERROR_NAME] = wrapErrorConstructorWithCause(WEB_ASSEMBLY + '.' + ERROR_NAME, wrapper, FORCED);
  $({
   target: WEB_ASSEMBLY,
   stat: true,
   constructor: true,
   arity: 1,
   forced: FORCED
  }, O);
 }
};
exportGlobalErrorCauseWrapper('Error', function (init) {
 return function Error(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('EvalError', function (init) {
 return function EvalError(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('RangeError', function (init) {
 return function RangeError(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('ReferenceError', function (init) {
 return function ReferenceError(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('SyntaxError', function (init) {
 return function SyntaxError(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('TypeError', function (init) {
 return function TypeError(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('URIError', function (init) {
 return function URIError(message) {
  return apply(init, this, arguments);
 };
});
exportWebAssemblyErrorCauseWrapper('CompileError', function (init) {
 return function CompileError(message) {
  return apply(init, this, arguments);
 };
});
exportWebAssemblyErrorCauseWrapper('LinkError', function (init) {
 return function LinkError(message) {
  return apply(init, this, arguments);
 };
});
exportWebAssemblyErrorCauseWrapper('RuntimeError', function (init) {
 return function RuntimeError(message) {
  return apply(init, this, arguments);
 };
});

/***/ }),

/***/ 1210:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var global = __webpack_require__(9298);
$({
 global: true,
 forced: global.globalThis !== global
}, { globalThis: global });

/***/ }),

/***/ 7254:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var getBuiltIn = __webpack_require__(7187);
var apply = __webpack_require__(7294);
var call = __webpack_require__(2026);
var uncurryThis = __webpack_require__(8403);
var fails = __webpack_require__(8154);
var isCallable = __webpack_require__(7316);
var isSymbol = __webpack_require__(7814);
var arraySlice = __webpack_require__(2251);
var getReplacerFunction = __webpack_require__(1801);
var NATIVE_SYMBOL = __webpack_require__(3663);
var $String = String;
var $stringify = getBuiltIn('JSON', 'stringify');
var exec = uncurryThis(/./.exec);
var charAt = uncurryThis(''.charAt);
var charCodeAt = uncurryThis(''.charCodeAt);
var replace = uncurryThis(''.replace);
var numberToString = uncurryThis(1.0.toString);
var tester = /[\uD800-\uDFFF]/g;
var low = /^[\uD800-\uDBFF]$/;
var hi = /^[\uDC00-\uDFFF]$/;
var WRONG_SYMBOLS_CONVERSION = !NATIVE_SYMBOL || fails(function () {
 var symbol = getBuiltIn('Symbol')('stringify detection');
 return $stringify([symbol]) !== '[null]' || $stringify({ a: symbol }) !== '{}' || $stringify(Object(symbol)) !== '{}';
});
var ILL_FORMED_UNICODE = fails(function () {
 return $stringify('\uDF06\uD834') !== '"\\udf06\\ud834"' || $stringify('\uDEAD') !== '"\\udead"';
});
var stringifyWithSymbolsFix = function (it, replacer) {
 var args = arraySlice(arguments);
 var $replacer = getReplacerFunction(replacer);
 if (!isCallable($replacer) && (it === undefined || isSymbol(it)))
  return;
 args[1] = function (key, value) {
  if (isCallable($replacer))
   value = call($replacer, this, $String(key), value);
  if (!isSymbol(value))
   return value;
 };
 return apply($stringify, null, args);
};
var fixIllFormed = function (match, offset, string) {
 var prev = charAt(string, offset - 1);
 var next = charAt(string, offset + 1);
 if (exec(low, match) && !exec(hi, next) || exec(hi, match) && !exec(low, prev)) {
  return '\\u' + numberToString(charCodeAt(match, 0), 16);
 }
 return match;
};
if ($stringify) {
 $({
  target: 'JSON',
  stat: true,
  arity: 3,
  forced: WRONG_SYMBOLS_CONVERSION || ILL_FORMED_UNICODE
 }, {
  stringify: function stringify(it, replacer, space) {
   var args = arraySlice(arguments);
   var result = apply(WRONG_SYMBOLS_CONVERSION ? stringifyWithSymbolsFix : $stringify, null, args);
   return ILL_FORMED_UNICODE && typeof result == 'string' ? replace(result, tester, fixIllFormed) : result;
  }
 });
}

/***/ }),

/***/ 2630:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var setToStringTag = __webpack_require__(7536);
setToStringTag(global.JSON, 'JSON', true);

/***/ }),

/***/ 4147:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var collection = __webpack_require__(4981);
var collectionStrong = __webpack_require__(6122);
collection('Map', function (init) {
 return function Map() {
  return init(this, arguments.length ? arguments[0] : undefined);
 };
}, collectionStrong);

/***/ }),

/***/ 5548:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(4147);

/***/ }),

/***/ 3821:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $hypot = Math.hypot;
var abs = Math.abs;
var sqrt = Math.sqrt;
var FORCED = !!$hypot && $hypot(Infinity, NaN) !== Infinity;
$({
 target: 'Math',
 stat: true,
 arity: 2,
 forced: FORCED
}, {
 hypot: function hypot(value1, value2) {
  var sum = 0;
  var i = 0;
  var aLen = arguments.length;
  var larg = 0;
  var arg, div;
  while (i < aLen) {
   arg = abs(arguments[i++]);
   if (larg < arg) {
    div = larg / arg;
    sum = sum * div * div + 1;
    larg = arg;
   } else if (arg > 0) {
    div = arg / larg;
    sum += div * div;
   } else
    sum += arg;
  }
  return larg === Infinity ? Infinity : larg * sqrt(sum);
 }
});

/***/ }),

/***/ 2466:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var log10 = __webpack_require__(3081);
$({
 target: 'Math',
 stat: true
}, { log10: log10 });

/***/ }),

/***/ 3764:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var log = Math.log;
var LN2 = Math.LN2;
$({
 target: 'Math',
 stat: true
}, {
 log2: function log2(x) {
  return log(x) / LN2;
 }
});

/***/ }),

/***/ 4165:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var sign = __webpack_require__(4875);
$({
 target: 'Math',
 stat: true
}, { sign: sign });

/***/ }),

/***/ 1024:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var setToStringTag = __webpack_require__(7536);
setToStringTag(Math, 'Math', true);

/***/ }),

/***/ 5897:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var IS_PURE = __webpack_require__(2554);
var DESCRIPTORS = __webpack_require__(940);
var global = __webpack_require__(9298);
var path = __webpack_require__(1021);
var uncurryThis = __webpack_require__(8403);
var isForced = __webpack_require__(7007);
var hasOwn = __webpack_require__(936);
var inheritIfRequired = __webpack_require__(7523);
var isPrototypeOf = __webpack_require__(2658);
var isSymbol = __webpack_require__(7814);
var toPrimitive = __webpack_require__(4151);
var fails = __webpack_require__(8154);
var getOwnPropertyNames = (__webpack_require__(5455).f);
var getOwnPropertyDescriptor = (__webpack_require__(5764).f);
var defineProperty = (__webpack_require__(7744).f);
var thisNumberValue = __webpack_require__(3328);
var trim = (__webpack_require__(83).trim);
var NUMBER = 'Number';
var NativeNumber = global[NUMBER];
var PureNumberNamespace = path[NUMBER];
var NumberPrototype = NativeNumber.prototype;
var TypeError = global.TypeError;
var stringSlice = uncurryThis(''.slice);
var charCodeAt = uncurryThis(''.charCodeAt);
var toNumeric = function (value) {
 var primValue = toPrimitive(value, 'number');
 return typeof primValue == 'bigint' ? primValue : toNumber(primValue);
};
var toNumber = function (argument) {
 var it = toPrimitive(argument, 'number');
 var first, third, radix, maxCode, digits, length, index, code;
 if (isSymbol(it))
  throw new TypeError('Cannot convert a Symbol value to a number');
 if (typeof it == 'string' && it.length > 2) {
  it = trim(it);
  first = charCodeAt(it, 0);
  if (first === 43 || first === 45) {
   third = charCodeAt(it, 2);
   if (third === 88 || third === 120)
    return NaN;
  } else if (first === 48) {
   switch (charCodeAt(it, 1)) {
   case 66:
   case 98:
    radix = 2;
    maxCode = 49;
    break;
   case 79:
   case 111:
    radix = 8;
    maxCode = 55;
    break;
   default:
    return +it;
   }
   digits = stringSlice(it, 2);
   length = digits.length;
   for (index = 0; index < length; index++) {
    code = charCodeAt(digits, index);
    if (code < 48 || code > maxCode)
     return NaN;
   }
   return parseInt(digits, radix);
  }
 }
 return +it;
};
var FORCED = isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'));
var calledWithNew = function (dummy) {
 return isPrototypeOf(NumberPrototype, dummy) && fails(function () {
  thisNumberValue(dummy);
 });
};
var NumberWrapper = function Number(value) {
 var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));
 return calledWithNew(this) ? inheritIfRequired(Object(n), this, NumberWrapper) : n;
};
NumberWrapper.prototype = NumberPrototype;
if (FORCED && !IS_PURE)
 NumberPrototype.constructor = NumberWrapper;
$({
 global: true,
 constructor: true,
 wrap: true,
 forced: FORCED
}, { Number: NumberWrapper });
var copyConstructorProperties = function (target, source) {
 for (var keys = DESCRIPTORS ? getOwnPropertyNames(source) : ('MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' + 'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' + 'fromString,range').split(','), j = 0, key; keys.length > j; j++) {
  if (hasOwn(source, key = keys[j]) && !hasOwn(target, key)) {
   defineProperty(target, key, getOwnPropertyDescriptor(source, key));
  }
 }
};
if (IS_PURE && PureNumberNamespace)
 copyConstructorProperties(path[NUMBER], PureNumberNamespace);
if (FORCED || IS_PURE)
 copyConstructorProperties(path[NUMBER], NativeNumber);

/***/ }),

/***/ 9142:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var assign = __webpack_require__(453);
$({
 target: 'Object',
 stat: true,
 arity: 2,
 forced: Object.assign !== assign
}, { assign: assign });

/***/ }),

/***/ 2586:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $entries = (__webpack_require__(2492).entries);
$({
 target: 'Object',
 stat: true
}, {
 entries: function entries(O) {
  return $entries(O);
 }
});

/***/ }),

/***/ 4441:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var FREEZING = __webpack_require__(7010);
var fails = __webpack_require__(8154);
var isObject = __webpack_require__(7633);
var onFreeze = (__webpack_require__(4694).onFreeze);
var $freeze = Object.freeze;
var FAILS_ON_PRIMITIVES = fails(function () {
 $freeze(1);
});
$({
 target: 'Object',
 stat: true,
 forced: FAILS_ON_PRIMITIVES,
 sham: !FREEZING
}, {
 freeze: function freeze(it) {
  return $freeze && isObject(it) ? $freeze(onFreeze(it)) : it;
 }
});

/***/ }),

/***/ 3713:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var fails = __webpack_require__(8154);
var toIndexedObject = __webpack_require__(4115);
var nativeGetOwnPropertyDescriptor = (__webpack_require__(5764).f);
var DESCRIPTORS = __webpack_require__(940);
var FORCED = !DESCRIPTORS || fails(function () {
 nativeGetOwnPropertyDescriptor(1);
});
$({
 target: 'Object',
 stat: true,
 forced: FORCED,
 sham: !DESCRIPTORS
}, {
 getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {
  return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);
 }
});

/***/ }),

/***/ 353:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var fails = __webpack_require__(8154);
var getOwnPropertyNames = (__webpack_require__(2329).f);
var FAILS_ON_PRIMITIVES = fails(function () {
 return !Object.getOwnPropertyNames(1);
});
$({
 target: 'Object',
 stat: true,
 forced: FAILS_ON_PRIMITIVES
}, { getOwnPropertyNames: getOwnPropertyNames });

/***/ }),

/***/ 8564:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var NATIVE_SYMBOL = __webpack_require__(3663);
var fails = __webpack_require__(8154);
var getOwnPropertySymbolsModule = __webpack_require__(1963);
var toObject = __webpack_require__(2007);
var FORCED = !NATIVE_SYMBOL || fails(function () {
 getOwnPropertySymbolsModule.f(1);
});
$({
 target: 'Object',
 stat: true,
 forced: FORCED
}, {
 getOwnPropertySymbols: function getOwnPropertySymbols(it) {
  var $getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  return $getOwnPropertySymbols ? $getOwnPropertySymbols(toObject(it)) : [];
 }
});

/***/ }),

/***/ 13:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var fails = __webpack_require__(8154);
var toObject = __webpack_require__(2007);
var nativeGetPrototypeOf = __webpack_require__(2176);
var CORRECT_PROTOTYPE_GETTER = __webpack_require__(7888);
var FAILS_ON_PRIMITIVES = fails(function () {
 nativeGetPrototypeOf(1);
});
$({
 target: 'Object',
 stat: true,
 forced: FAILS_ON_PRIMITIVES,
 sham: !CORRECT_PROTOTYPE_GETTER
}, {
 getPrototypeOf: function getPrototypeOf(it) {
  return nativeGetPrototypeOf(toObject(it));
 }
});

/***/ }),

/***/ 4668:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var toObject = __webpack_require__(2007);
var nativeKeys = __webpack_require__(1706);
var fails = __webpack_require__(8154);
var FAILS_ON_PRIMITIVES = fails(function () {
 nativeKeys(1);
});
$({
 target: 'Object',
 stat: true,
 forced: FAILS_ON_PRIMITIVES
}, {
 keys: function keys(it) {
  return nativeKeys(toObject(it));
 }
});

/***/ }),

/***/ 895:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var TO_STRING_TAG_SUPPORT = __webpack_require__(3077);
var defineBuiltIn = __webpack_require__(7041);
var toString = __webpack_require__(759);
if (!TO_STRING_TAG_SUPPORT) {
 defineBuiltIn(Object.prototype, 'toString', toString, { unsafe: true });
}

/***/ }),

/***/ 9099:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $values = (__webpack_require__(2492).values);
$({
 target: 'Object',
 stat: true
}, {
 values: function values(O) {
  return $values(O);
 }
});

/***/ }),

/***/ 4060:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var call = __webpack_require__(2026);
var aCallable = __webpack_require__(1782);
var newPromiseCapabilityModule = __webpack_require__(1880);
var perform = __webpack_require__(1518);
var iterate = __webpack_require__(6837);
var PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__(3779);
$({
 target: 'Promise',
 stat: true,
 forced: PROMISE_STATICS_INCORRECT_ITERATION
}, {
 allSettled: function allSettled(iterable) {
  var C = this;
  var capability = newPromiseCapabilityModule.f(C);
  var resolve = capability.resolve;
  var reject = capability.reject;
  var result = perform(function () {
   var promiseResolve = aCallable(C.resolve);
   var values = [];
   var counter = 0;
   var remaining = 1;
   iterate(iterable, function (promise) {
    var index = counter++;
    var alreadyCalled = false;
    remaining++;
    call(promiseResolve, C, promise).then(function (value) {
     if (alreadyCalled)
      return;
     alreadyCalled = true;
     values[index] = {
      status: 'fulfilled',
      value: value
     };
     --remaining || resolve(values);
    }, function (error) {
     if (alreadyCalled)
      return;
     alreadyCalled = true;
     values[index] = {
      status: 'rejected',
      reason: error
     };
     --remaining || resolve(values);
    });
   });
   --remaining || resolve(values);
  });
  if (result.error)
   reject(result.value);
  return capability.promise;
 }
});

/***/ }),

/***/ 8392:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var call = __webpack_require__(2026);
var aCallable = __webpack_require__(1782);
var newPromiseCapabilityModule = __webpack_require__(1880);
var perform = __webpack_require__(1518);
var iterate = __webpack_require__(6837);
var PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__(3779);
$({
 target: 'Promise',
 stat: true,
 forced: PROMISE_STATICS_INCORRECT_ITERATION
}, {
 all: function all(iterable) {
  var C = this;
  var capability = newPromiseCapabilityModule.f(C);
  var resolve = capability.resolve;
  var reject = capability.reject;
  var result = perform(function () {
   var $promiseResolve = aCallable(C.resolve);
   var values = [];
   var counter = 0;
   var remaining = 1;
   iterate(iterable, function (promise) {
    var index = counter++;
    var alreadyCalled = false;
    remaining++;
    call($promiseResolve, C, promise).then(function (value) {
     if (alreadyCalled)
      return;
     alreadyCalled = true;
     values[index] = value;
     --remaining || resolve(values);
    }, reject);
   });
   --remaining || resolve(values);
  });
  if (result.error)
   reject(result.value);
  return capability.promise;
 }
});

/***/ }),

/***/ 3264:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var IS_PURE = __webpack_require__(2554);
var FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(8308).CONSTRUCTOR);
var NativePromiseConstructor = __webpack_require__(6639);
var getBuiltIn = __webpack_require__(7187);
var isCallable = __webpack_require__(7316);
var defineBuiltIn = __webpack_require__(7041);
var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
$({
 target: 'Promise',
 proto: true,
 forced: FORCED_PROMISE_CONSTRUCTOR,
 real: true
}, {
 'catch': function (onRejected) {
  return this.then(undefined, onRejected);
 }
});
if (!IS_PURE && isCallable(NativePromiseConstructor)) {
 var method = getBuiltIn('Promise').prototype['catch'];
 if (NativePromisePrototype['catch'] !== method) {
  defineBuiltIn(NativePromisePrototype, 'catch', method, { unsafe: true });
 }
}

/***/ }),

/***/ 7930:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var IS_PURE = __webpack_require__(2554);
var IS_NODE = __webpack_require__(4864);
var global = __webpack_require__(9298);
var call = __webpack_require__(2026);
var defineBuiltIn = __webpack_require__(7041);
var setPrototypeOf = __webpack_require__(9763);
var setToStringTag = __webpack_require__(7536);
var setSpecies = __webpack_require__(5963);
var aCallable = __webpack_require__(1782);
var isCallable = __webpack_require__(7316);
var isObject = __webpack_require__(7633);
var anInstance = __webpack_require__(5834);
var speciesConstructor = __webpack_require__(8180);
var task = (__webpack_require__(4578).set);
var microtask = __webpack_require__(1627);
var hostReportErrors = __webpack_require__(5285);
var perform = __webpack_require__(1518);
var Queue = __webpack_require__(1397);
var InternalStateModule = __webpack_require__(1649);
var NativePromiseConstructor = __webpack_require__(6639);
var PromiseConstructorDetection = __webpack_require__(8308);
var newPromiseCapabilityModule = __webpack_require__(1880);
var PROMISE = 'Promise';
var FORCED_PROMISE_CONSTRUCTOR = PromiseConstructorDetection.CONSTRUCTOR;
var NATIVE_PROMISE_REJECTION_EVENT = PromiseConstructorDetection.REJECTION_EVENT;
var NATIVE_PROMISE_SUBCLASSING = PromiseConstructorDetection.SUBCLASSING;
var getInternalPromiseState = InternalStateModule.getterFor(PROMISE);
var setInternalState = InternalStateModule.set;
var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
var PromiseConstructor = NativePromiseConstructor;
var PromisePrototype = NativePromisePrototype;
var TypeError = global.TypeError;
var document = global.document;
var process = global.process;
var newPromiseCapability = newPromiseCapabilityModule.f;
var newGenericPromiseCapability = newPromiseCapability;
var DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);
var UNHANDLED_REJECTION = 'unhandledrejection';
var REJECTION_HANDLED = 'rejectionhandled';
var PENDING = 0;
var FULFILLED = 1;
var REJECTED = 2;
var HANDLED = 1;
var UNHANDLED = 2;
var Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;
var isThenable = function (it) {
 var then;
 return isObject(it) && isCallable(then = it.then) ? then : false;
};
var callReaction = function (reaction, state) {
 var value = state.value;
 var ok = state.state === FULFILLED;
 var handler = ok ? reaction.ok : reaction.fail;
 var resolve = reaction.resolve;
 var reject = reaction.reject;
 var domain = reaction.domain;
 var result, then, exited;
 try {
  if (handler) {
   if (!ok) {
    if (state.rejection === UNHANDLED)
     onHandleUnhandled(state);
    state.rejection = HANDLED;
   }
   if (handler === true)
    result = value;
   else {
    if (domain)
     domain.enter();
    result = handler(value);
    if (domain) {
     domain.exit();
     exited = true;
    }
   }
   if (result === reaction.promise) {
    reject(new TypeError('Promise-chain cycle'));
   } else if (then = isThenable(result)) {
    call(then, result, resolve, reject);
   } else
    resolve(result);
  } else
   reject(value);
 } catch (error) {
  if (domain && !exited)
   domain.exit();
  reject(error);
 }
};
var notify = function (state, isReject) {
 if (state.notified)
  return;
 state.notified = true;
 microtask(function () {
  var reactions = state.reactions;
  var reaction;
  while (reaction = reactions.get()) {
   callReaction(reaction, state);
  }
  state.notified = false;
  if (isReject && !state.rejection)
   onUnhandled(state);
 });
};
var dispatchEvent = function (name, promise, reason) {
 var event, handler;
 if (DISPATCH_EVENT) {
  event = document.createEvent('Event');
  event.promise = promise;
  event.reason = reason;
  event.initEvent(name, false, true);
  global.dispatchEvent(event);
 } else
  event = {
   promise: promise,
   reason: reason
  };
 if (!NATIVE_PROMISE_REJECTION_EVENT && (handler = global['on' + name]))
  handler(event);
 else if (name === UNHANDLED_REJECTION)
  hostReportErrors('Unhandled promise rejection', reason);
};
var onUnhandled = function (state) {
 call(task, global, function () {
  var promise = state.facade;
  var value = state.value;
  var IS_UNHANDLED = isUnhandled(state);
  var result;
  if (IS_UNHANDLED) {
   result = perform(function () {
    if (IS_NODE) {
     process.emit('unhandledRejection', value, promise);
    } else
     dispatchEvent(UNHANDLED_REJECTION, promise, value);
   });
   state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;
   if (result.error)
    throw result.value;
  }
 });
};
var isUnhandled = function (state) {
 return state.rejection !== HANDLED && !state.parent;
};
var onHandleUnhandled = function (state) {
 call(task, global, function () {
  var promise = state.facade;
  if (IS_NODE) {
   process.emit('rejectionHandled', promise);
  } else
   dispatchEvent(REJECTION_HANDLED, promise, state.value);
 });
};
var bind = function (fn, state, unwrap) {
 return function (value) {
  fn(state, value, unwrap);
 };
};
var internalReject = function (state, value, unwrap) {
 if (state.done)
  return;
 state.done = true;
 if (unwrap)
  state = unwrap;
 state.value = value;
 state.state = REJECTED;
 notify(state, true);
};
var internalResolve = function (state, value, unwrap) {
 if (state.done)
  return;
 state.done = true;
 if (unwrap)
  state = unwrap;
 try {
  if (state.facade === value)
   throw new TypeError("Promise can't be resolved itself");
  var then = isThenable(value);
  if (then) {
   microtask(function () {
    var wrapper = { done: false };
    try {
     call(then, value, bind(internalResolve, wrapper, state), bind(internalReject, wrapper, state));
    } catch (error) {
     internalReject(wrapper, error, state);
    }
   });
  } else {
   state.value = value;
   state.state = FULFILLED;
   notify(state, false);
  }
 } catch (error) {
  internalReject({ done: false }, error, state);
 }
};
if (FORCED_PROMISE_CONSTRUCTOR) {
 PromiseConstructor = function Promise(executor) {
  anInstance(this, PromisePrototype);
  aCallable(executor);
  call(Internal, this);
  var state = getInternalPromiseState(this);
  try {
   executor(bind(internalResolve, state), bind(internalReject, state));
  } catch (error) {
   internalReject(state, error);
  }
 };
 PromisePrototype = PromiseConstructor.prototype;
 Internal = function Promise(executor) {
  setInternalState(this, {
   type: PROMISE,
   done: false,
   notified: false,
   parent: false,
   reactions: new Queue(),
   rejection: false,
   state: PENDING,
   value: undefined
  });
 };
 Internal.prototype = defineBuiltIn(PromisePrototype, 'then', function then(onFulfilled, onRejected) {
  var state = getInternalPromiseState(this);
  var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));
  state.parent = true;
  reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;
  reaction.fail = isCallable(onRejected) && onRejected;
  reaction.domain = IS_NODE ? process.domain : undefined;
  if (state.state === PENDING)
   state.reactions.add(reaction);
  else
   microtask(function () {
    callReaction(reaction, state);
   });
  return reaction.promise;
 });
 OwnPromiseCapability = function () {
  var promise = new Internal();
  var state = getInternalPromiseState(promise);
  this.promise = promise;
  this.resolve = bind(internalResolve, state);
  this.reject = bind(internalReject, state);
 };
 newPromiseCapabilityModule.f = newPromiseCapability = function (C) {
  return C === PromiseConstructor || C === PromiseWrapper ? new OwnPromiseCapability(C) : newGenericPromiseCapability(C);
 };
 if (!IS_PURE && isCallable(NativePromiseConstructor) && NativePromisePrototype !== Object.prototype) {
  nativeThen = NativePromisePrototype.then;
  if (!NATIVE_PROMISE_SUBCLASSING) {
   defineBuiltIn(NativePromisePrototype, 'then', function then(onFulfilled, onRejected) {
    var that = this;
    return new PromiseConstructor(function (resolve, reject) {
     call(nativeThen, that, resolve, reject);
    }).then(onFulfilled, onRejected);
   }, { unsafe: true });
  }
  try {
   delete NativePromisePrototype.constructor;
  } catch (error) {
  }
  if (setPrototypeOf) {
   setPrototypeOf(NativePromisePrototype, PromisePrototype);
  }
 }
}
$({
 global: true,
 constructor: true,
 wrap: true,
 forced: FORCED_PROMISE_CONSTRUCTOR
}, { Promise: PromiseConstructor });
setToStringTag(PromiseConstructor, PROMISE, false, true);
setSpecies(PROMISE);

/***/ }),

/***/ 4750:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var IS_PURE = __webpack_require__(2554);
var NativePromiseConstructor = __webpack_require__(6639);
var fails = __webpack_require__(8154);
var getBuiltIn = __webpack_require__(7187);
var isCallable = __webpack_require__(7316);
var speciesConstructor = __webpack_require__(8180);
var promiseResolve = __webpack_require__(2506);
var defineBuiltIn = __webpack_require__(7041);
var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
var NON_GENERIC = !!NativePromiseConstructor && fails(function () {
 NativePromisePrototype['finally'].call({
  then: function () {
  }
 }, function () {
 });
});
$({
 target: 'Promise',
 proto: true,
 real: true,
 forced: NON_GENERIC
}, {
 'finally': function (onFinally) {
  var C = speciesConstructor(this, getBuiltIn('Promise'));
  var isFunction = isCallable(onFinally);
  return this.then(isFunction ? function (x) {
   return promiseResolve(C, onFinally()).then(function () {
    return x;
   });
  } : onFinally, isFunction ? function (e) {
   return promiseResolve(C, onFinally()).then(function () {
    throw e;
   });
  } : onFinally);
 }
});
if (!IS_PURE && isCallable(NativePromiseConstructor)) {
 var method = getBuiltIn('Promise').prototype['finally'];
 if (NativePromisePrototype['finally'] !== method) {
  defineBuiltIn(NativePromisePrototype, 'finally', method, { unsafe: true });
 }
}

/***/ }),

/***/ 5666:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(7930);
__webpack_require__(8392);
__webpack_require__(3264);
__webpack_require__(1078);
__webpack_require__(4209);
__webpack_require__(935);

/***/ }),

/***/ 1078:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var call = __webpack_require__(2026);
var aCallable = __webpack_require__(1782);
var newPromiseCapabilityModule = __webpack_require__(1880);
var perform = __webpack_require__(1518);
var iterate = __webpack_require__(6837);
var PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__(3779);
$({
 target: 'Promise',
 stat: true,
 forced: PROMISE_STATICS_INCORRECT_ITERATION
}, {
 race: function race(iterable) {
  var C = this;
  var capability = newPromiseCapabilityModule.f(C);
  var reject = capability.reject;
  var result = perform(function () {
   var $promiseResolve = aCallable(C.resolve);
   iterate(iterable, function (promise) {
    call($promiseResolve, C, promise).then(capability.resolve, reject);
   });
  });
  if (result.error)
   reject(result.value);
  return capability.promise;
 }
});

/***/ }),

/***/ 4209:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var call = __webpack_require__(2026);
var newPromiseCapabilityModule = __webpack_require__(1880);
var FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(8308).CONSTRUCTOR);
$({
 target: 'Promise',
 stat: true,
 forced: FORCED_PROMISE_CONSTRUCTOR
}, {
 reject: function reject(r) {
  var capability = newPromiseCapabilityModule.f(this);
  call(capability.reject, undefined, r);
  return capability.promise;
 }
});

/***/ }),

/***/ 935:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var getBuiltIn = __webpack_require__(7187);
var IS_PURE = __webpack_require__(2554);
var NativePromiseConstructor = __webpack_require__(6639);
var FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(8308).CONSTRUCTOR);
var promiseResolve = __webpack_require__(2506);
var PromiseConstructorWrapper = getBuiltIn('Promise');
var CHECK_WRAPPER = IS_PURE && !FORCED_PROMISE_CONSTRUCTOR;
$({
 target: 'Promise',
 stat: true,
 forced: IS_PURE || FORCED_PROMISE_CONSTRUCTOR
}, {
 resolve: function resolve(x) {
  return promiseResolve(CHECK_WRAPPER && this === PromiseConstructorWrapper ? NativePromiseConstructor : this, x);
 }
});

/***/ }),

/***/ 6128:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var getBuiltIn = __webpack_require__(7187);
var apply = __webpack_require__(7294);
var bind = __webpack_require__(6520);
var aConstructor = __webpack_require__(7073);
var anObject = __webpack_require__(4719);
var isObject = __webpack_require__(7633);
var create = __webpack_require__(6941);
var fails = __webpack_require__(8154);
var nativeConstruct = getBuiltIn('Reflect', 'construct');
var ObjectPrototype = Object.prototype;
var push = [].push;
var NEW_TARGET_BUG = fails(function () {
 function F() {
 }
 return !(nativeConstruct(function () {
 }, [], F) instanceof F);
});
var ARGS_BUG = !fails(function () {
 nativeConstruct(function () {
 });
});
var FORCED = NEW_TARGET_BUG || ARGS_BUG;
$({
 target: 'Reflect',
 stat: true,
 forced: FORCED,
 sham: FORCED
}, {
 construct: function construct(Target, args) {
  aConstructor(Target);
  anObject(args);
  var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);
  if (ARGS_BUG && !NEW_TARGET_BUG)
   return nativeConstruct(Target, args, newTarget);
  if (Target === newTarget) {
   switch (args.length) {
   case 0:
    return new Target();
   case 1:
    return new Target(args[0]);
   case 2:
    return new Target(args[0], args[1]);
   case 3:
    return new Target(args[0], args[1], args[2]);
   case 4:
    return new Target(args[0], args[1], args[2], args[3]);
   }
   var $args = [null];
   apply(push, $args, args);
   return new (apply(bind, Target, $args))();
  }
  var proto = newTarget.prototype;
  var instance = create(isObject(proto) ? proto : ObjectPrototype);
  var result = apply(Target, instance, args);
  return isObject(result) ? result : instance;
 }
});

/***/ }),

/***/ 9718:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var call = __webpack_require__(2026);
var isObject = __webpack_require__(7633);
var anObject = __webpack_require__(4719);
var isDataDescriptor = __webpack_require__(3374);
var getOwnPropertyDescriptorModule = __webpack_require__(5764);
var getPrototypeOf = __webpack_require__(2176);
function get(target, propertyKey) {
 var receiver = arguments.length < 3 ? target : arguments[2];
 var descriptor, prototype;
 if (anObject(target) === receiver)
  return target[propertyKey];
 descriptor = getOwnPropertyDescriptorModule.f(target, propertyKey);
 if (descriptor)
  return isDataDescriptor(descriptor) ? descriptor.value : descriptor.get === undefined ? undefined : call(descriptor.get, receiver);
 if (isObject(prototype = getPrototypeOf(target)))
  return get(prototype, propertyKey, receiver);
}
$({
 target: 'Reflect',
 stat: true
}, { get: get });

/***/ }),

/***/ 9175:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var global = __webpack_require__(9298);
var setToStringTag = __webpack_require__(7536);
$({ global: true }, { Reflect: {} });
setToStringTag(global.Reflect, 'Reflect', true);

/***/ }),

/***/ 3032:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var global = __webpack_require__(9298);
var uncurryThis = __webpack_require__(8403);
var isForced = __webpack_require__(7007);
var inheritIfRequired = __webpack_require__(7523);
var createNonEnumerableProperty = __webpack_require__(9293);
var getOwnPropertyNames = (__webpack_require__(5455).f);
var isPrototypeOf = __webpack_require__(2658);
var isRegExp = __webpack_require__(6660);
var toString = __webpack_require__(5730);
var getRegExpFlags = __webpack_require__(1043);
var stickyHelpers = __webpack_require__(3286);
var proxyAccessor = __webpack_require__(6085);
var defineBuiltIn = __webpack_require__(7041);
var fails = __webpack_require__(8154);
var hasOwn = __webpack_require__(936);
var enforceInternalState = (__webpack_require__(1649).enforce);
var setSpecies = __webpack_require__(5963);
var wellKnownSymbol = __webpack_require__(2292);
var UNSUPPORTED_DOT_ALL = __webpack_require__(1714);
var UNSUPPORTED_NCG = __webpack_require__(2513);
var MATCH = wellKnownSymbol('match');
var NativeRegExp = global.RegExp;
var RegExpPrototype = NativeRegExp.prototype;
var SyntaxError = global.SyntaxError;
var exec = uncurryThis(RegExpPrototype.exec);
var charAt = uncurryThis(''.charAt);
var replace = uncurryThis(''.replace);
var stringIndexOf = uncurryThis(''.indexOf);
var stringSlice = uncurryThis(''.slice);
var IS_NCG = /^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/;
var re1 = /a/g;
var re2 = /a/g;
var CORRECT_NEW = new NativeRegExp(re1) !== re1;
var MISSED_STICKY = stickyHelpers.MISSED_STICKY;
var UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;
var BASE_FORCED = DESCRIPTORS && (!CORRECT_NEW || MISSED_STICKY || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG || fails(function () {
 re2[MATCH] = false;
 return NativeRegExp(re1) !== re1 || NativeRegExp(re2) === re2 || String(NativeRegExp(re1, 'i')) !== '/a/i';
}));
var handleDotAll = function (string) {
 var length = string.length;
 var index = 0;
 var result = '';
 var brackets = false;
 var chr;
 for (; index <= length; index++) {
  chr = charAt(string, index);
  if (chr === '\\') {
   result += chr + charAt(string, ++index);
   continue;
  }
  if (!brackets && chr === '.') {
   result += '[\\s\\S]';
  } else {
   if (chr === '[') {
    brackets = true;
   } else if (chr === ']') {
    brackets = false;
   }
   result += chr;
  }
 }
 return result;
};
var handleNCG = function (string) {
 var length = string.length;
 var index = 0;
 var result = '';
 var named = [];
 var names = {};
 var brackets = false;
 var ncg = false;
 var groupid = 0;
 var groupname = '';
 var chr;
 for (; index <= length; index++) {
  chr = charAt(string, index);
  if (chr === '\\') {
   chr += charAt(string, ++index);
  } else if (chr === ']') {
   brackets = false;
  } else if (!brackets)
   switch (true) {
   case chr === '[':
    brackets = true;
    break;
   case chr === '(':
    if (exec(IS_NCG, stringSlice(string, index + 1))) {
     index += 2;
     ncg = true;
    }
    result += chr;
    groupid++;
    continue;
   case chr === '>' && ncg:
    if (groupname === '' || hasOwn(names, groupname)) {
     throw new SyntaxError('Invalid capture group name');
    }
    names[groupname] = true;
    named[named.length] = [
     groupname,
     groupid
    ];
    ncg = false;
    groupname = '';
    continue;
   }
  if (ncg)
   groupname += chr;
  else
   result += chr;
 }
 return [
  result,
  named
 ];
};
if (isForced('RegExp', BASE_FORCED)) {
 var RegExpWrapper = function RegExp(pattern, flags) {
  var thisIsRegExp = isPrototypeOf(RegExpPrototype, this);
  var patternIsRegExp = isRegExp(pattern);
  var flagsAreUndefined = flags === undefined;
  var groups = [];
  var rawPattern = pattern;
  var rawFlags, dotAll, sticky, handled, result, state;
  if (!thisIsRegExp && patternIsRegExp && flagsAreUndefined && pattern.constructor === RegExpWrapper) {
   return pattern;
  }
  if (patternIsRegExp || isPrototypeOf(RegExpPrototype, pattern)) {
   pattern = pattern.source;
   if (flagsAreUndefined)
    flags = getRegExpFlags(rawPattern);
  }
  pattern = pattern === undefined ? '' : toString(pattern);
  flags = flags === undefined ? '' : toString(flags);
  rawPattern = pattern;
  if (UNSUPPORTED_DOT_ALL && 'dotAll' in re1) {
   dotAll = !!flags && stringIndexOf(flags, 's') > -1;
   if (dotAll)
    flags = replace(flags, /s/g, '');
  }
  rawFlags = flags;
  if (MISSED_STICKY && 'sticky' in re1) {
   sticky = !!flags && stringIndexOf(flags, 'y') > -1;
   if (sticky && UNSUPPORTED_Y)
    flags = replace(flags, /y/g, '');
  }
  if (UNSUPPORTED_NCG) {
   handled = handleNCG(pattern);
   pattern = handled[0];
   groups = handled[1];
  }
  result = inheritIfRequired(NativeRegExp(pattern, flags), thisIsRegExp ? this : RegExpPrototype, RegExpWrapper);
  if (dotAll || sticky || groups.length) {
   state = enforceInternalState(result);
   if (dotAll) {
    state.dotAll = true;
    state.raw = RegExpWrapper(handleDotAll(pattern), rawFlags);
   }
   if (sticky)
    state.sticky = true;
   if (groups.length)
    state.groups = groups;
  }
  if (pattern !== rawPattern)
   try {
    createNonEnumerableProperty(result, 'source', rawPattern === '' ? '(?:)' : rawPattern);
   } catch (error) {
   }
  return result;
 };
 for (var keys = getOwnPropertyNames(NativeRegExp), index = 0; keys.length > index;) {
  proxyAccessor(RegExpWrapper, NativeRegExp, keys[index++]);
 }
 RegExpPrototype.constructor = RegExpWrapper;
 RegExpWrapper.prototype = RegExpPrototype;
 defineBuiltIn(global, 'RegExp', RegExpWrapper, { constructor: true });
}
setSpecies('RegExp');

/***/ }),

/***/ 5619:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var UNSUPPORTED_DOT_ALL = __webpack_require__(1714);
var classof = __webpack_require__(8374);
var defineBuiltInAccessor = __webpack_require__(9691);
var getInternalState = (__webpack_require__(1649).get);
var RegExpPrototype = RegExp.prototype;
var $TypeError = TypeError;
if (DESCRIPTORS && UNSUPPORTED_DOT_ALL) {
 defineBuiltInAccessor(RegExpPrototype, 'dotAll', {
  configurable: true,
  get: function dotAll() {
   if (this === RegExpPrototype)
    return undefined;
   if (classof(this) === 'RegExp') {
    return !!getInternalState(this).dotAll;
   }
   throw new $TypeError('Incompatible receiver, RegExp required');
  }
 });
}

/***/ }),

/***/ 7942:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var exec = __webpack_require__(2178);
$({
 target: 'RegExp',
 proto: true,
 forced: /./.exec !== exec
}, { exec: exec });

/***/ }),

/***/ 2640:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var DESCRIPTORS = __webpack_require__(940);
var defineBuiltInAccessor = __webpack_require__(9691);
var regExpFlags = __webpack_require__(9272);
var fails = __webpack_require__(8154);
var RegExp = global.RegExp;
var RegExpPrototype = RegExp.prototype;
var FORCED = DESCRIPTORS && fails(function () {
 var INDICES_SUPPORT = true;
 try {
  RegExp('.', 'd');
 } catch (error) {
  INDICES_SUPPORT = false;
 }
 var O = {};
 var calls = '';
 var expected = INDICES_SUPPORT ? 'dgimsy' : 'gimsy';
 var addGetter = function (key, chr) {
  Object.defineProperty(O, key, {
   get: function () {
    calls += chr;
    return true;
   }
  });
 };
 var pairs = {
  dotAll: 's',
  global: 'g',
  ignoreCase: 'i',
  multiline: 'm',
  sticky: 'y'
 };
 if (INDICES_SUPPORT)
  pairs.hasIndices = 'd';
 for (var key in pairs)
  addGetter(key, pairs[key]);
 var result = Object.getOwnPropertyDescriptor(RegExpPrototype, 'flags').get.call(O);
 return result !== expected || calls !== expected;
});
if (FORCED)
 defineBuiltInAccessor(RegExpPrototype, 'flags', {
  configurable: true,
  get: regExpFlags
 });

/***/ }),

/***/ 9786:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var MISSED_STICKY = (__webpack_require__(3286).MISSED_STICKY);
var classof = __webpack_require__(8374);
var defineBuiltInAccessor = __webpack_require__(9691);
var getInternalState = (__webpack_require__(1649).get);
var RegExpPrototype = RegExp.prototype;
var $TypeError = TypeError;
if (DESCRIPTORS && MISSED_STICKY) {
 defineBuiltInAccessor(RegExpPrototype, 'sticky', {
  configurable: true,
  get: function sticky() {
   if (this === RegExpPrototype)
    return;
   if (classof(this) === 'RegExp') {
    return !!getInternalState(this).sticky;
   }
   throw new $TypeError('Incompatible receiver, RegExp required');
  }
 });
}

/***/ }),

/***/ 5776:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(7942);
var $ = __webpack_require__(4978);
var call = __webpack_require__(2026);
var isCallable = __webpack_require__(7316);
var anObject = __webpack_require__(4719);
var toString = __webpack_require__(5730);
var DELEGATES_TO_EXEC = (function () {
 var execCalled = false;
 var re = /[ac]/;
 re.exec = function () {
  execCalled = true;
  return /./.exec.apply(this, arguments);
 };
 return re.test('abc') === true && execCalled;
}());
var nativeTest = /./.test;
$({
 target: 'RegExp',
 proto: true,
 forced: !DELEGATES_TO_EXEC
}, {
 test: function (S) {
  var R = anObject(this);
  var string = toString(S);
  var exec = R.exec;
  if (!isCallable(exec))
   return call(nativeTest, R, string);
  var result = call(exec, R, string);
  if (result === null)
   return false;
  anObject(result);
  return true;
 }
});

/***/ }),

/***/ 924:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var PROPER_FUNCTION_NAME = (__webpack_require__(5145).PROPER);
var defineBuiltIn = __webpack_require__(7041);
var anObject = __webpack_require__(4719);
var $toString = __webpack_require__(5730);
var fails = __webpack_require__(8154);
var getRegExpFlags = __webpack_require__(1043);
var TO_STRING = 'toString';
var RegExpPrototype = RegExp.prototype;
var nativeToString = RegExpPrototype[TO_STRING];
var NOT_GENERIC = fails(function () {
 return nativeToString.call({
  source: 'a',
  flags: 'b'
 }) !== '/a/b';
});
var INCORRECT_NAME = PROPER_FUNCTION_NAME && nativeToString.name !== TO_STRING;
if (NOT_GENERIC || INCORRECT_NAME) {
 defineBuiltIn(RegExp.prototype, TO_STRING, function toString() {
  var R = anObject(this);
  var pattern = $toString(R.source);
  var flags = $toString(getRegExpFlags(R));
  return '/' + pattern + '/' + flags;
 }, { unsafe: true });
}

/***/ }),

/***/ 3810:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var collection = __webpack_require__(4981);
var collectionStrong = __webpack_require__(6122);
collection('Set', function (init) {
 return function Set() {
  return init(this, arguments.length ? arguments[0] : undefined);
 };
}, collectionStrong);

/***/ }),

/***/ 2048:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(3810);

/***/ }),

/***/ 10:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var uncurryThis = __webpack_require__(8403);
var requireObjectCoercible = __webpack_require__(5645);
var toIntegerOrInfinity = __webpack_require__(1003);
var toString = __webpack_require__(5730);
var fails = __webpack_require__(8154);
var charAt = uncurryThis(''.charAt);
var FORCED = fails(function () {
 return ''.at(-2) !== '\uD842';
});
$({
 target: 'String',
 proto: true,
 forced: FORCED
}, {
 at: function at(index) {
  var S = toString(requireObjectCoercible(this));
  var len = S.length;
  var relativeIndex = toIntegerOrInfinity(index);
  var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;
  return k < 0 || k >= len ? undefined : charAt(S, k);
 }
});

/***/ }),

/***/ 9689:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var codeAt = (__webpack_require__(6819).codeAt);
$({
 target: 'String',
 proto: true
}, {
 codePointAt: function codePointAt(pos) {
  return codeAt(this, pos);
 }
});

/***/ }),

/***/ 6133:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var uncurryThis = __webpack_require__(6218);
var getOwnPropertyDescriptor = (__webpack_require__(5764).f);
var toLength = __webpack_require__(8293);
var toString = __webpack_require__(5730);
var notARegExp = __webpack_require__(9578);
var requireObjectCoercible = __webpack_require__(5645);
var correctIsRegExpLogic = __webpack_require__(2280);
var IS_PURE = __webpack_require__(2554);
var nativeEndsWith = uncurryThis(''.endsWith);
var slice = uncurryThis(''.slice);
var min = Math.min;
var CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');
var MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!(function () {
 var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');
 return descriptor && !descriptor.writable;
}());
$({
 target: 'String',
 proto: true,
 forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC
}, {
 endsWith: function endsWith(searchString) {
  var that = toString(requireObjectCoercible(this));
  notARegExp(searchString);
  var endPosition = arguments.length > 1 ? arguments[1] : undefined;
  var len = that.length;
  var end = endPosition === undefined ? len : min(toLength(endPosition), len);
  var search = toString(searchString);
  return nativeEndsWith ? nativeEndsWith(that, search, end) : slice(that, end - search.length, end) === search;
 }
});

/***/ }),

/***/ 2707:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var uncurryThis = __webpack_require__(8403);
var toAbsoluteIndex = __webpack_require__(6985);
var $RangeError = RangeError;
var fromCharCode = String.fromCharCode;
var $fromCodePoint = String.fromCodePoint;
var join = uncurryThis([].join);
var INCORRECT_LENGTH = !!$fromCodePoint && $fromCodePoint.length !== 1;
$({
 target: 'String',
 stat: true,
 arity: 1,
 forced: INCORRECT_LENGTH
}, {
 fromCodePoint: function fromCodePoint(x) {
  var elements = [];
  var length = arguments.length;
  var i = 0;
  var code;
  while (length > i) {
   code = +arguments[i++];
   if (toAbsoluteIndex(code, 0x10FFFF) !== code)
    throw new $RangeError(code + ' is not a valid code point');
   elements[i] = code < 0x10000 ? fromCharCode(code) : fromCharCode(((code -= 0x10000) >> 10) + 0xD800, code % 0x400 + 0xDC00);
  }
  return join(elements, '');
 }
});

/***/ }),

/***/ 2613:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var uncurryThis = __webpack_require__(8403);
var notARegExp = __webpack_require__(9578);
var requireObjectCoercible = __webpack_require__(5645);
var toString = __webpack_require__(5730);
var correctIsRegExpLogic = __webpack_require__(2280);
var stringIndexOf = uncurryThis(''.indexOf);
$({
 target: 'String',
 proto: true,
 forced: !correctIsRegExpLogic('includes')
}, {
 includes: function includes(searchString) {
  return !!~stringIndexOf(toString(requireObjectCoercible(this)), toString(notARegExp(searchString)), arguments.length > 1 ? arguments[1] : undefined);
 }
});

/***/ }),

/***/ 1747:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var charAt = (__webpack_require__(6819).charAt);
var toString = __webpack_require__(5730);
var InternalStateModule = __webpack_require__(1649);
var defineIterator = __webpack_require__(7301);
var createIterResultObject = __webpack_require__(1111);
var STRING_ITERATOR = 'String Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);
defineIterator(String, 'String', function (iterated) {
 setInternalState(this, {
  type: STRING_ITERATOR,
  string: toString(iterated),
  index: 0
 });
}, function next() {
 var state = getInternalState(this);
 var string = state.string;
 var index = state.index;
 var point;
 if (index >= string.length)
  return createIterResultObject(undefined, true);
 point = charAt(string, index);
 state.index += point.length;
 return createIterResultObject(point, false);
});

/***/ }),

/***/ 469:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(2026);
var fixRegExpWellKnownSymbolLogic = __webpack_require__(4629);
var anObject = __webpack_require__(4719);
var isNullOrUndefined = __webpack_require__(3734);
var toLength = __webpack_require__(8293);
var toString = __webpack_require__(5730);
var requireObjectCoercible = __webpack_require__(5645);
var getMethod = __webpack_require__(8486);
var advanceStringIndex = __webpack_require__(9047);
var regExpExec = __webpack_require__(8986);
fixRegExpWellKnownSymbolLogic('match', function (MATCH, nativeMatch, maybeCallNative) {
 return [
  function match(regexp) {
   var O = requireObjectCoercible(this);
   var matcher = isNullOrUndefined(regexp) ? undefined : getMethod(regexp, MATCH);
   return matcher ? call(matcher, regexp, O) : new RegExp(regexp)[MATCH](toString(O));
  },
  function (string) {
   var rx = anObject(this);
   var S = toString(string);
   var res = maybeCallNative(nativeMatch, rx, S);
   if (res.done)
    return res.value;
   if (!rx.global)
    return regExpExec(rx, S);
   var fullUnicode = rx.unicode;
   rx.lastIndex = 0;
   var A = [];
   var n = 0;
   var result;
   while ((result = regExpExec(rx, S)) !== null) {
    var matchStr = toString(result[0]);
    A[n] = matchStr;
    if (matchStr === '')
     rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);
    n++;
   }
   return n === 0 ? null : A;
  }
 ];
});

/***/ }),

/***/ 7230:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $padStart = (__webpack_require__(6460).start);
var WEBKIT_BUG = __webpack_require__(4819);
$({
 target: 'String',
 proto: true,
 forced: WEBKIT_BUG
}, {
 padStart: function padStart(maxLength) {
  return $padStart(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);
 }
});

/***/ }),

/***/ 5520:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var repeat = __webpack_require__(947);
$({
 target: 'String',
 proto: true
}, { repeat: repeat });

/***/ }),

/***/ 7600:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var call = __webpack_require__(2026);
var uncurryThis = __webpack_require__(8403);
var requireObjectCoercible = __webpack_require__(5645);
var isCallable = __webpack_require__(7316);
var isNullOrUndefined = __webpack_require__(3734);
var isRegExp = __webpack_require__(6660);
var toString = __webpack_require__(5730);
var getMethod = __webpack_require__(8486);
var getRegExpFlags = __webpack_require__(1043);
var getSubstitution = __webpack_require__(1634);
var wellKnownSymbol = __webpack_require__(2292);
var IS_PURE = __webpack_require__(2554);
var REPLACE = wellKnownSymbol('replace');
var $TypeError = TypeError;
var indexOf = uncurryThis(''.indexOf);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);
var max = Math.max;
var stringIndexOf = function (string, searchValue, fromIndex) {
 if (fromIndex > string.length)
  return -1;
 if (searchValue === '')
  return fromIndex;
 return indexOf(string, searchValue, fromIndex);
};
$({
 target: 'String',
 proto: true
}, {
 replaceAll: function replaceAll(searchValue, replaceValue) {
  var O = requireObjectCoercible(this);
  var IS_REG_EXP, flags, replacer, string, searchString, functionalReplace, searchLength, advanceBy, replacement;
  var position = 0;
  var endOfLastMatch = 0;
  var result = '';
  if (!isNullOrUndefined(searchValue)) {
   IS_REG_EXP = isRegExp(searchValue);
   if (IS_REG_EXP) {
    flags = toString(requireObjectCoercible(getRegExpFlags(searchValue)));
    if (!~indexOf(flags, 'g'))
     throw new $TypeError('`.replaceAll` does not allow non-global regexes');
   }
   replacer = getMethod(searchValue, REPLACE);
   if (replacer) {
    return call(replacer, searchValue, O, replaceValue);
   } else if (IS_PURE && IS_REG_EXP) {
    return replace(toString(O), searchValue, replaceValue);
   }
  }
  string = toString(O);
  searchString = toString(searchValue);
  functionalReplace = isCallable(replaceValue);
  if (!functionalReplace)
   replaceValue = toString(replaceValue);
  searchLength = searchString.length;
  advanceBy = max(1, searchLength);
  position = stringIndexOf(string, searchString, 0);
  while (position !== -1) {
   replacement = functionalReplace ? toString(replaceValue(searchString, position, string)) : getSubstitution(searchString, string, position, [], undefined, replaceValue);
   result += stringSlice(string, endOfLastMatch, position) + replacement;
   endOfLastMatch = position + searchLength;
   position = stringIndexOf(string, searchString, position + advanceBy);
  }
  if (endOfLastMatch < string.length) {
   result += stringSlice(string, endOfLastMatch);
  }
  return result;
 }
});

/***/ }),

/***/ 4711:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var apply = __webpack_require__(7294);
var call = __webpack_require__(2026);
var uncurryThis = __webpack_require__(8403);
var fixRegExpWellKnownSymbolLogic = __webpack_require__(4629);
var fails = __webpack_require__(8154);
var anObject = __webpack_require__(4719);
var isCallable = __webpack_require__(7316);
var isNullOrUndefined = __webpack_require__(3734);
var toIntegerOrInfinity = __webpack_require__(1003);
var toLength = __webpack_require__(8293);
var toString = __webpack_require__(5730);
var requireObjectCoercible = __webpack_require__(5645);
var advanceStringIndex = __webpack_require__(9047);
var getMethod = __webpack_require__(8486);
var getSubstitution = __webpack_require__(1634);
var regExpExec = __webpack_require__(8986);
var wellKnownSymbol = __webpack_require__(2292);
var REPLACE = wellKnownSymbol('replace');
var max = Math.max;
var min = Math.min;
var concat = uncurryThis([].concat);
var push = uncurryThis([].push);
var stringIndexOf = uncurryThis(''.indexOf);
var stringSlice = uncurryThis(''.slice);
var maybeToString = function (it) {
 return it === undefined ? it : String(it);
};
var REPLACE_KEEPS_$0 = (function () {
 return 'a'.replace(/./, '$0') === '$0';
}());
var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {
 if (/./[REPLACE]) {
  return /./[REPLACE]('a', '$0') === '';
 }
 return false;
}());
var REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {
 var re = /./;
 re.exec = function () {
  var result = [];
  result.groups = { a: '7' };
  return result;
 };
 return ''.replace(re, '$<a>') !== '7';
});
fixRegExpWellKnownSymbolLogic('replace', function (_, nativeReplace, maybeCallNative) {
 var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';
 return [
  function replace(searchValue, replaceValue) {
   var O = requireObjectCoercible(this);
   var replacer = isNullOrUndefined(searchValue) ? undefined : getMethod(searchValue, REPLACE);
   return replacer ? call(replacer, searchValue, O, replaceValue) : call(nativeReplace, toString(O), searchValue, replaceValue);
  },
  function (string, replaceValue) {
   var rx = anObject(this);
   var S = toString(string);
   if (typeof replaceValue == 'string' && stringIndexOf(replaceValue, UNSAFE_SUBSTITUTE) === -1 && stringIndexOf(replaceValue, '$<') === -1) {
    var res = maybeCallNative(nativeReplace, rx, S, replaceValue);
    if (res.done)
     return res.value;
   }
   var functionalReplace = isCallable(replaceValue);
   if (!functionalReplace)
    replaceValue = toString(replaceValue);
   var global = rx.global;
   var fullUnicode;
   if (global) {
    fullUnicode = rx.unicode;
    rx.lastIndex = 0;
   }
   var results = [];
   var result;
   while (true) {
    result = regExpExec(rx, S);
    if (result === null)
     break;
    push(results, result);
    if (!global)
     break;
    var matchStr = toString(result[0]);
    if (matchStr === '')
     rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);
   }
   var accumulatedResult = '';
   var nextSourcePosition = 0;
   for (var i = 0; i < results.length; i++) {
    result = results[i];
    var matched = toString(result[0]);
    var position = max(min(toIntegerOrInfinity(result.index), S.length), 0);
    var captures = [];
    var replacement;
    for (var j = 1; j < result.length; j++)
     push(captures, maybeToString(result[j]));
    var namedCaptures = result.groups;
    if (functionalReplace) {
     var replacerArgs = concat([matched], captures, position, S);
     if (namedCaptures !== undefined)
      push(replacerArgs, namedCaptures);
     replacement = toString(apply(replaceValue, undefined, replacerArgs));
    } else {
     replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);
    }
    if (position >= nextSourcePosition) {
     accumulatedResult += stringSlice(S, nextSourcePosition, position) + replacement;
     nextSourcePosition = position + matched.length;
    }
   }
   return accumulatedResult + stringSlice(S, nextSourcePosition);
  }
 ];
}, !REPLACE_SUPPORTS_NAMED_GROUPS || !REPLACE_KEEPS_$0 || REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);

/***/ }),

/***/ 4280:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var apply = __webpack_require__(7294);
var call = __webpack_require__(2026);
var uncurryThis = __webpack_require__(8403);
var fixRegExpWellKnownSymbolLogic = __webpack_require__(4629);
var anObject = __webpack_require__(4719);
var isNullOrUndefined = __webpack_require__(3734);
var isRegExp = __webpack_require__(6660);
var requireObjectCoercible = __webpack_require__(5645);
var speciesConstructor = __webpack_require__(8180);
var advanceStringIndex = __webpack_require__(9047);
var toLength = __webpack_require__(8293);
var toString = __webpack_require__(5730);
var getMethod = __webpack_require__(8486);
var arraySlice = __webpack_require__(6071);
var callRegExpExec = __webpack_require__(8986);
var regexpExec = __webpack_require__(2178);
var stickyHelpers = __webpack_require__(3286);
var fails = __webpack_require__(8154);
var UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;
var MAX_UINT32 = 0xFFFFFFFF;
var min = Math.min;
var $push = [].push;
var exec = uncurryThis(/./.exec);
var push = uncurryThis($push);
var stringSlice = uncurryThis(''.slice);
var SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {
 var re = /(?:)/;
 var originalExec = re.exec;
 re.exec = function () {
  return originalExec.apply(this, arguments);
 };
 var result = 'ab'.split(re);
 return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';
});
fixRegExpWellKnownSymbolLogic('split', function (SPLIT, nativeSplit, maybeCallNative) {
 var internalSplit;
 if ('abbc'.split(/(b)*/)[1] === 'c' || 'test'.split(/(?:)/, -1).length !== 4 || 'ab'.split(/(?:ab)*/).length !== 2 || '.'.split(/(.?)(.?)/).length !== 4 || '.'.split(/()()/).length > 1 || ''.split(/.?/).length) {
  internalSplit = function (separator, limit) {
   var string = toString(requireObjectCoercible(this));
   var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;
   if (lim === 0)
    return [];
   if (separator === undefined)
    return [string];
   if (!isRegExp(separator)) {
    return call(nativeSplit, string, separator, lim);
   }
   var output = [];
   var flags = (separator.ignoreCase ? 'i' : '') + (separator.multiline ? 'm' : '') + (separator.unicode ? 'u' : '') + (separator.sticky ? 'y' : '');
   var lastLastIndex = 0;
   var separatorCopy = new RegExp(separator.source, flags + 'g');
   var match, lastIndex, lastLength;
   while (match = call(regexpExec, separatorCopy, string)) {
    lastIndex = separatorCopy.lastIndex;
    if (lastIndex > lastLastIndex) {
     push(output, stringSlice(string, lastLastIndex, match.index));
     if (match.length > 1 && match.index < string.length)
      apply($push, output, arraySlice(match, 1));
     lastLength = match[0].length;
     lastLastIndex = lastIndex;
     if (output.length >= lim)
      break;
    }
    if (separatorCopy.lastIndex === match.index)
     separatorCopy.lastIndex++;
   }
   if (lastLastIndex === string.length) {
    if (lastLength || !exec(separatorCopy, ''))
     push(output, '');
   } else
    push(output, stringSlice(string, lastLastIndex));
   return output.length > lim ? arraySlice(output, 0, lim) : output;
  };
 } else if ('0'.split(undefined, 0).length) {
  internalSplit = function (separator, limit) {
   return separator === undefined && limit === 0 ? [] : call(nativeSplit, this, separator, limit);
  };
 } else
  internalSplit = nativeSplit;
 return [
  function split(separator, limit) {
   var O = requireObjectCoercible(this);
   var splitter = isNullOrUndefined(separator) ? undefined : getMethod(separator, SPLIT);
   return splitter ? call(splitter, separator, O, limit) : call(internalSplit, toString(O), separator, limit);
  },
  function (string, limit) {
   var rx = anObject(this);
   var S = toString(string);
   var res = maybeCallNative(internalSplit, rx, S, limit, internalSplit !== nativeSplit);
   if (res.done)
    return res.value;
   var C = speciesConstructor(rx, RegExp);
   var unicodeMatching = rx.unicode;
   var flags = (rx.ignoreCase ? 'i' : '') + (rx.multiline ? 'm' : '') + (rx.unicode ? 'u' : '') + (UNSUPPORTED_Y ? 'g' : 'y');
   var splitter = new C(UNSUPPORTED_Y ? '^(?:' + rx.source + ')' : rx, flags);
   var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;
   if (lim === 0)
    return [];
   if (S.length === 0)
    return callRegExpExec(splitter, S) === null ? [S] : [];
   var p = 0;
   var q = 0;
   var A = [];
   while (q < S.length) {
    splitter.lastIndex = UNSUPPORTED_Y ? 0 : q;
    var z = callRegExpExec(splitter, UNSUPPORTED_Y ? stringSlice(S, q) : S);
    var e;
    if (z === null || (e = min(toLength(splitter.lastIndex + (UNSUPPORTED_Y ? q : 0)), S.length)) === p) {
     q = advanceStringIndex(S, q, unicodeMatching);
    } else {
     push(A, stringSlice(S, p, q));
     if (A.length === lim)
      return A;
     for (var i = 1; i <= z.length - 1; i++) {
      push(A, z[i]);
      if (A.length === lim)
       return A;
     }
     q = p = e;
    }
   }
   push(A, stringSlice(S, p));
   return A;
  }
 ];
}, !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC, UNSUPPORTED_Y);

/***/ }),

/***/ 6421:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var uncurryThis = __webpack_require__(6218);
var getOwnPropertyDescriptor = (__webpack_require__(5764).f);
var toLength = __webpack_require__(8293);
var toString = __webpack_require__(5730);
var notARegExp = __webpack_require__(9578);
var requireObjectCoercible = __webpack_require__(5645);
var correctIsRegExpLogic = __webpack_require__(2280);
var IS_PURE = __webpack_require__(2554);
var nativeStartsWith = uncurryThis(''.startsWith);
var stringSlice = uncurryThis(''.slice);
var min = Math.min;
var CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');
var MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!(function () {
 var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');
 return descriptor && !descriptor.writable;
}());
$({
 target: 'String',
 proto: true,
 forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC
}, {
 startsWith: function startsWith(searchString) {
  var that = toString(requireObjectCoercible(this));
  notARegExp(searchString);
  var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));
  var search = toString(searchString);
  return nativeStartsWith ? nativeStartsWith(that, search, index) : stringSlice(that, index, index + search.length) === search;
 }
});

/***/ }),

/***/ 8341:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $trim = (__webpack_require__(83).trim);
var forcedStringTrimMethod = __webpack_require__(8729);
$({
 target: 'String',
 proto: true,
 forced: forcedStringTrimMethod('trim')
}, {
 trim: function trim() {
  return $trim(this);
 }
});

/***/ }),

/***/ 1133:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var defineWellKnownSymbol = __webpack_require__(7120);
defineWellKnownSymbol('asyncIterator');

/***/ }),

/***/ 1532:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var global = __webpack_require__(9298);
var call = __webpack_require__(2026);
var uncurryThis = __webpack_require__(8403);
var IS_PURE = __webpack_require__(2554);
var DESCRIPTORS = __webpack_require__(940);
var NATIVE_SYMBOL = __webpack_require__(3663);
var fails = __webpack_require__(8154);
var hasOwn = __webpack_require__(936);
var isPrototypeOf = __webpack_require__(2658);
var anObject = __webpack_require__(4719);
var toIndexedObject = __webpack_require__(4115);
var toPropertyKey = __webpack_require__(4871);
var $toString = __webpack_require__(5730);
var createPropertyDescriptor = __webpack_require__(1198);
var nativeObjectCreate = __webpack_require__(6941);
var objectKeys = __webpack_require__(1706);
var getOwnPropertyNamesModule = __webpack_require__(5455);
var getOwnPropertyNamesExternal = __webpack_require__(2329);
var getOwnPropertySymbolsModule = __webpack_require__(1963);
var getOwnPropertyDescriptorModule = __webpack_require__(5764);
var definePropertyModule = __webpack_require__(7744);
var definePropertiesModule = __webpack_require__(6617);
var propertyIsEnumerableModule = __webpack_require__(1879);
var defineBuiltIn = __webpack_require__(7041);
var defineBuiltInAccessor = __webpack_require__(9691);
var shared = __webpack_require__(6807);
var sharedKey = __webpack_require__(3727);
var hiddenKeys = __webpack_require__(6010);
var uid = __webpack_require__(7561);
var wellKnownSymbol = __webpack_require__(2292);
var wrappedWellKnownSymbolModule = __webpack_require__(8890);
var defineWellKnownSymbol = __webpack_require__(7120);
var defineSymbolToPrimitive = __webpack_require__(5117);
var setToStringTag = __webpack_require__(7536);
var InternalStateModule = __webpack_require__(1649);
var $forEach = (__webpack_require__(2423).forEach);
var HIDDEN = sharedKey('hidden');
var SYMBOL = 'Symbol';
var PROTOTYPE = 'prototype';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(SYMBOL);
var ObjectPrototype = Object[PROTOTYPE];
var $Symbol = global.Symbol;
var SymbolPrototype = $Symbol && $Symbol[PROTOTYPE];
var RangeError = global.RangeError;
var TypeError = global.TypeError;
var QObject = global.QObject;
var nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
var nativeDefineProperty = definePropertyModule.f;
var nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;
var nativePropertyIsEnumerable = propertyIsEnumerableModule.f;
var push = uncurryThis([].push);
var AllSymbols = shared('symbols');
var ObjectPrototypeSymbols = shared('op-symbols');
var WellKnownSymbolsStore = shared('wks');
var USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;
var fallbackDefineProperty = function (O, P, Attributes) {
 var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);
 if (ObjectPrototypeDescriptor)
  delete ObjectPrototype[P];
 nativeDefineProperty(O, P, Attributes);
 if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {
  nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);
 }
};
var setSymbolDescriptor = DESCRIPTORS && fails(function () {
 return nativeObjectCreate(nativeDefineProperty({}, 'a', {
  get: function () {
   return nativeDefineProperty(this, 'a', { value: 7 }).a;
  }
 })).a !== 7;
}) ? fallbackDefineProperty : nativeDefineProperty;
var wrap = function (tag, description) {
 var symbol = AllSymbols[tag] = nativeObjectCreate(SymbolPrototype);
 setInternalState(symbol, {
  type: SYMBOL,
  tag: tag,
  description: description
 });
 if (!DESCRIPTORS)
  symbol.description = description;
 return symbol;
};
var $defineProperty = function defineProperty(O, P, Attributes) {
 if (O === ObjectPrototype)
  $defineProperty(ObjectPrototypeSymbols, P, Attributes);
 anObject(O);
 var key = toPropertyKey(P);
 anObject(Attributes);
 if (hasOwn(AllSymbols, key)) {
  if (!Attributes.enumerable) {
   if (!hasOwn(O, HIDDEN))
    nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));
   O[HIDDEN][key] = true;
  } else {
   if (hasOwn(O, HIDDEN) && O[HIDDEN][key])
    O[HIDDEN][key] = false;
   Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });
  }
  return setSymbolDescriptor(O, key, Attributes);
 }
 return nativeDefineProperty(O, key, Attributes);
};
var $defineProperties = function defineProperties(O, Properties) {
 anObject(O);
 var properties = toIndexedObject(Properties);
 var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));
 $forEach(keys, function (key) {
  if (!DESCRIPTORS || call($propertyIsEnumerable, properties, key))
   $defineProperty(O, key, properties[key]);
 });
 return O;
};
var $create = function create(O, Properties) {
 return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);
};
var $propertyIsEnumerable = function propertyIsEnumerable(V) {
 var P = toPropertyKey(V);
 var enumerable = call(nativePropertyIsEnumerable, this, P);
 if (this === ObjectPrototype && hasOwn(AllSymbols, P) && !hasOwn(ObjectPrototypeSymbols, P))
  return false;
 return enumerable || !hasOwn(this, P) || !hasOwn(AllSymbols, P) || hasOwn(this, HIDDEN) && this[HIDDEN][P] ? enumerable : true;
};
var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {
 var it = toIndexedObject(O);
 var key = toPropertyKey(P);
 if (it === ObjectPrototype && hasOwn(AllSymbols, key) && !hasOwn(ObjectPrototypeSymbols, key))
  return;
 var descriptor = nativeGetOwnPropertyDescriptor(it, key);
 if (descriptor && hasOwn(AllSymbols, key) && !(hasOwn(it, HIDDEN) && it[HIDDEN][key])) {
  descriptor.enumerable = true;
 }
 return descriptor;
};
var $getOwnPropertyNames = function getOwnPropertyNames(O) {
 var names = nativeGetOwnPropertyNames(toIndexedObject(O));
 var result = [];
 $forEach(names, function (key) {
  if (!hasOwn(AllSymbols, key) && !hasOwn(hiddenKeys, key))
   push(result, key);
 });
 return result;
};
var $getOwnPropertySymbols = function (O) {
 var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;
 var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));
 var result = [];
 $forEach(names, function (key) {
  if (hasOwn(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || hasOwn(ObjectPrototype, key))) {
   push(result, AllSymbols[key]);
  }
 });
 return result;
};
if (!NATIVE_SYMBOL) {
 $Symbol = function Symbol() {
  if (isPrototypeOf(SymbolPrototype, this))
   throw new TypeError('Symbol is not a constructor');
  var description = !arguments.length || arguments[0] === undefined ? undefined : $toString(arguments[0]);
  var tag = uid(description);
  var setter = function (value) {
   var $this = this === undefined ? global : this;
   if ($this === ObjectPrototype)
    call(setter, ObjectPrototypeSymbols, value);
   if (hasOwn($this, HIDDEN) && hasOwn($this[HIDDEN], tag))
    $this[HIDDEN][tag] = false;
   var descriptor = createPropertyDescriptor(1, value);
   try {
    setSymbolDescriptor($this, tag, descriptor);
   } catch (error) {
    if (!(error instanceof RangeError))
     throw error;
    fallbackDefineProperty($this, tag, descriptor);
   }
  };
  if (DESCRIPTORS && USE_SETTER)
   setSymbolDescriptor(ObjectPrototype, tag, {
    configurable: true,
    set: setter
   });
  return wrap(tag, description);
 };
 SymbolPrototype = $Symbol[PROTOTYPE];
 defineBuiltIn(SymbolPrototype, 'toString', function toString() {
  return getInternalState(this).tag;
 });
 defineBuiltIn($Symbol, 'withoutSetter', function (description) {
  return wrap(uid(description), description);
 });
 propertyIsEnumerableModule.f = $propertyIsEnumerable;
 definePropertyModule.f = $defineProperty;
 definePropertiesModule.f = $defineProperties;
 getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;
 getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;
 getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;
 wrappedWellKnownSymbolModule.f = function (name) {
  return wrap(wellKnownSymbol(name), name);
 };
 if (DESCRIPTORS) {
  defineBuiltInAccessor(SymbolPrototype, 'description', {
   configurable: true,
   get: function description() {
    return getInternalState(this).description;
   }
  });
  if (!IS_PURE) {
   defineBuiltIn(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });
  }
 }
}
$({
 global: true,
 constructor: true,
 wrap: true,
 forced: !NATIVE_SYMBOL,
 sham: !NATIVE_SYMBOL
}, { Symbol: $Symbol });
$forEach(objectKeys(WellKnownSymbolsStore), function (name) {
 defineWellKnownSymbol(name);
});
$({
 target: SYMBOL,
 stat: true,
 forced: !NATIVE_SYMBOL
}, {
 useSetter: function () {
  USE_SETTER = true;
 },
 useSimple: function () {
  USE_SETTER = false;
 }
});
$({
 target: 'Object',
 stat: true,
 forced: !NATIVE_SYMBOL,
 sham: !DESCRIPTORS
}, {
 create: $create,
 defineProperty: $defineProperty,
 defineProperties: $defineProperties,
 getOwnPropertyDescriptor: $getOwnPropertyDescriptor
});
$({
 target: 'Object',
 stat: true,
 forced: !NATIVE_SYMBOL
}, { getOwnPropertyNames: $getOwnPropertyNames });
defineSymbolToPrimitive();
setToStringTag($Symbol, SYMBOL);
hiddenKeys[HIDDEN] = true;

/***/ }),

/***/ 6678:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var DESCRIPTORS = __webpack_require__(940);
var global = __webpack_require__(9298);
var uncurryThis = __webpack_require__(8403);
var hasOwn = __webpack_require__(936);
var isCallable = __webpack_require__(7316);
var isPrototypeOf = __webpack_require__(2658);
var toString = __webpack_require__(5730);
var defineBuiltInAccessor = __webpack_require__(9691);
var copyConstructorProperties = __webpack_require__(1425);
var NativeSymbol = global.Symbol;
var SymbolPrototype = NativeSymbol && NativeSymbol.prototype;
if (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in SymbolPrototype) || NativeSymbol().description !== undefined)) {
 var EmptyStringDescriptionStore = {};
 var SymbolWrapper = function Symbol() {
  var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);
  var result = isPrototypeOf(SymbolPrototype, this) ? new NativeSymbol(description) : description === undefined ? NativeSymbol() : NativeSymbol(description);
  if (description === '')
   EmptyStringDescriptionStore[result] = true;
  return result;
 };
 copyConstructorProperties(SymbolWrapper, NativeSymbol);
 SymbolWrapper.prototype = SymbolPrototype;
 SymbolPrototype.constructor = SymbolWrapper;
 var NATIVE_SYMBOL = String(NativeSymbol('description detection')) === 'Symbol(description detection)';
 var thisSymbolValue = uncurryThis(SymbolPrototype.valueOf);
 var symbolDescriptiveString = uncurryThis(SymbolPrototype.toString);
 var regexp = /^Symbol\((.*)\)[^)]+$/;
 var replace = uncurryThis(''.replace);
 var stringSlice = uncurryThis(''.slice);
 defineBuiltInAccessor(SymbolPrototype, 'description', {
  configurable: true,
  get: function description() {
   var symbol = thisSymbolValue(this);
   if (hasOwn(EmptyStringDescriptionStore, symbol))
    return '';
   var string = symbolDescriptiveString(symbol);
   var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');
   return desc === '' ? undefined : desc;
  }
 });
 $({
  global: true,
  constructor: true,
  forced: true
 }, { Symbol: SymbolWrapper });
}

/***/ }),

/***/ 2389:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var getBuiltIn = __webpack_require__(7187);
var hasOwn = __webpack_require__(936);
var toString = __webpack_require__(5730);
var shared = __webpack_require__(6807);
var NATIVE_SYMBOL_REGISTRY = __webpack_require__(4186);
var StringToSymbolRegistry = shared('string-to-symbol-registry');
var SymbolToStringRegistry = shared('symbol-to-string-registry');
$({
 target: 'Symbol',
 stat: true,
 forced: !NATIVE_SYMBOL_REGISTRY
}, {
 'for': function (key) {
  var string = toString(key);
  if (hasOwn(StringToSymbolRegistry, string))
   return StringToSymbolRegistry[string];
  var symbol = getBuiltIn('Symbol')(string);
  StringToSymbolRegistry[string] = symbol;
  SymbolToStringRegistry[symbol] = string;
  return symbol;
 }
});

/***/ }),

/***/ 2926:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var defineWellKnownSymbol = __webpack_require__(7120);
defineWellKnownSymbol('iterator');

/***/ }),

/***/ 9366:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(1532);
__webpack_require__(2389);
__webpack_require__(5876);
__webpack_require__(7254);
__webpack_require__(8564);

/***/ }),

/***/ 5876:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var hasOwn = __webpack_require__(936);
var isSymbol = __webpack_require__(7814);
var tryToString = __webpack_require__(9762);
var shared = __webpack_require__(6807);
var NATIVE_SYMBOL_REGISTRY = __webpack_require__(4186);
var SymbolToStringRegistry = shared('symbol-to-string-registry');
$({
 target: 'Symbol',
 stat: true,
 forced: !NATIVE_SYMBOL_REGISTRY
}, {
 keyFor: function keyFor(sym) {
  if (!isSymbol(sym))
   throw new TypeError(tryToString(sym) + ' is not a symbol');
  if (hasOwn(SymbolToStringRegistry, sym))
   return SymbolToStringRegistry[sym];
 }
});

/***/ }),

/***/ 5598:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var defineWellKnownSymbol = __webpack_require__(7120);
var defineSymbolToPrimitive = __webpack_require__(5117);
defineWellKnownSymbol('toPrimitive');
defineSymbolToPrimitive();

/***/ }),

/***/ 2173:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(7187);
var defineWellKnownSymbol = __webpack_require__(7120);
var setToStringTag = __webpack_require__(7536);
defineWellKnownSymbol('toStringTag');
setToStringTag(getBuiltIn('Symbol'), 'Symbol');

/***/ }),

/***/ 739:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var lengthOfArrayLike = __webpack_require__(451);
var toIntegerOrInfinity = __webpack_require__(1003);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('at', function at(index) {
 var O = aTypedArray(this);
 var len = lengthOfArrayLike(O);
 var relativeIndex = toIntegerOrInfinity(index);
 var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;
 return k < 0 || k >= len ? undefined : O[k];
});

/***/ }),

/***/ 4816:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(8403);
var ArrayBufferViewCore = __webpack_require__(5861);
var $ArrayCopyWithin = __webpack_require__(1474);
var u$ArrayCopyWithin = uncurryThis($ArrayCopyWithin);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('copyWithin', function copyWithin(target, start) {
 return u$ArrayCopyWithin(aTypedArray(this), target, start, arguments.length > 2 ? arguments[2] : undefined);
});

/***/ }),

/***/ 6923:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $every = (__webpack_require__(2423).every);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('every', function every(callbackfn) {
 return $every(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 6775:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $fill = __webpack_require__(8041);
var toBigInt = __webpack_require__(212);
var classof = __webpack_require__(8329);
var call = __webpack_require__(2026);
var uncurryThis = __webpack_require__(8403);
var fails = __webpack_require__(8154);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var slice = uncurryThis(''.slice);
var CONVERSION_BUG = fails(function () {
 var count = 0;
 new Int8Array(2).fill({
  valueOf: function () {
   return count++;
  }
 });
 return count !== 1;
});
exportTypedArrayMethod('fill', function fill(value) {
 var length = arguments.length;
 aTypedArray(this);
 var actualValue = slice(classof(this), 0, 3) === 'Big' ? toBigInt(value) : +value;
 return call($fill, this, actualValue, length > 1 ? arguments[1] : undefined, length > 2 ? arguments[2] : undefined);
}, CONVERSION_BUG);

/***/ }),

/***/ 6474:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $filter = (__webpack_require__(2423).filter);
var fromSpeciesAndList = __webpack_require__(5306);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('filter', function filter(callbackfn) {
 var list = $filter(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
 return fromSpeciesAndList(this, list);
});

/***/ }),

/***/ 1665:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $findIndex = (__webpack_require__(2423).findIndex);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('findIndex', function findIndex(predicate) {
 return $findIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 9803:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $findLastIndex = (__webpack_require__(4026).findLastIndex);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('findLastIndex', function findLastIndex(predicate) {
 return $findLastIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 8837:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $findLast = (__webpack_require__(4026).findLast);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('findLast', function findLast(predicate) {
 return $findLast(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 6450:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $find = (__webpack_require__(2423).find);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('find', function find(predicate) {
 return $find(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 6458:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(9173);
createTypedArrayConstructor('Float32', function (init) {
 return function Float32Array(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
});

/***/ }),

/***/ 8957:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(9173);
createTypedArrayConstructor('Float64', function (init) {
 return function Float64Array(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
});

/***/ }),

/***/ 1293:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $forEach = (__webpack_require__(2423).forEach);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('forEach', function forEach(callbackfn) {
 $forEach(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 1051:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $includes = (__webpack_require__(9773).includes);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('includes', function includes(searchElement) {
 return $includes(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 8260:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $indexOf = (__webpack_require__(9773).indexOf);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('indexOf', function indexOf(searchElement) {
 return $indexOf(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 2314:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(9173);
createTypedArrayConstructor('Int16', function (init) {
 return function Int16Array(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
});

/***/ }),

/***/ 8800:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(9173);
createTypedArrayConstructor('Int32', function (init) {
 return function Int32Array(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
});

/***/ }),

/***/ 8826:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(9173);
createTypedArrayConstructor('Int8', function (init) {
 return function Int8Array(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
});

/***/ }),

/***/ 5746:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var fails = __webpack_require__(8154);
var uncurryThis = __webpack_require__(8403);
var ArrayBufferViewCore = __webpack_require__(5861);
var ArrayIterators = __webpack_require__(6180);
var wellKnownSymbol = __webpack_require__(2292);
var ITERATOR = wellKnownSymbol('iterator');
var Uint8Array = global.Uint8Array;
var arrayValues = uncurryThis(ArrayIterators.values);
var arrayKeys = uncurryThis(ArrayIterators.keys);
var arrayEntries = uncurryThis(ArrayIterators.entries);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var TypedArrayPrototype = Uint8Array && Uint8Array.prototype;
var GENERIC = !fails(function () {
 TypedArrayPrototype[ITERATOR].call([1]);
});
var ITERATOR_IS_VALUES = !!TypedArrayPrototype && TypedArrayPrototype.values && TypedArrayPrototype[ITERATOR] === TypedArrayPrototype.values && TypedArrayPrototype.values.name === 'values';
var typedArrayValues = function values() {
 return arrayValues(aTypedArray(this));
};
exportTypedArrayMethod('entries', function entries() {
 return arrayEntries(aTypedArray(this));
}, GENERIC);
exportTypedArrayMethod('keys', function keys() {
 return arrayKeys(aTypedArray(this));
}, GENERIC);
exportTypedArrayMethod('values', typedArrayValues, GENERIC || !ITERATOR_IS_VALUES, { name: 'values' });
exportTypedArrayMethod(ITERATOR, typedArrayValues, GENERIC || !ITERATOR_IS_VALUES, { name: 'values' });

/***/ }),

/***/ 202:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var uncurryThis = __webpack_require__(8403);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var $join = uncurryThis([].join);
exportTypedArrayMethod('join', function join(separator) {
 return $join(aTypedArray(this), separator);
});

/***/ }),

/***/ 2138:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var apply = __webpack_require__(7294);
var $lastIndexOf = __webpack_require__(8671);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('lastIndexOf', function lastIndexOf(searchElement) {
 var length = arguments.length;
 return apply($lastIndexOf, aTypedArray(this), length > 1 ? [
  searchElement,
  arguments[1]
 ] : [searchElement]);
});

/***/ }),

/***/ 368:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $map = (__webpack_require__(2423).map);
var typedArraySpeciesConstructor = __webpack_require__(6239);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('map', function map(mapfn) {
 return $map(aTypedArray(this), mapfn, arguments.length > 1 ? arguments[1] : undefined, function (O, length) {
  return new (typedArraySpeciesConstructor(O))(length);
 });
});

/***/ }),

/***/ 917:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $reduceRight = (__webpack_require__(2741).right);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('reduceRight', function reduceRight(callbackfn) {
 var length = arguments.length;
 return $reduceRight(aTypedArray(this), callbackfn, length, length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 9782:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $reduce = (__webpack_require__(2741).left);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('reduce', function reduce(callbackfn) {
 var length = arguments.length;
 return $reduce(aTypedArray(this), callbackfn, length, length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 3650:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var floor = Math.floor;
exportTypedArrayMethod('reverse', function reverse() {
 var that = this;
 var length = aTypedArray(that).length;
 var middle = floor(length / 2);
 var index = 0;
 var value;
 while (index < middle) {
  value = that[index];
  that[index++] = that[--length];
  that[length] = value;
 }
 return that;
});

/***/ }),

/***/ 8347:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var call = __webpack_require__(2026);
var ArrayBufferViewCore = __webpack_require__(5861);
var lengthOfArrayLike = __webpack_require__(451);
var toOffset = __webpack_require__(9892);
var toIndexedObject = __webpack_require__(2007);
var fails = __webpack_require__(8154);
var RangeError = global.RangeError;
var Int8Array = global.Int8Array;
var Int8ArrayPrototype = Int8Array && Int8Array.prototype;
var $set = Int8ArrayPrototype && Int8ArrayPrototype.set;
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS = !fails(function () {
 var array = new Uint8ClampedArray(2);
 call($set, array, {
  length: 1,
  0: 3
 }, 1);
 return array[1] !== 3;
});
var TO_OBJECT_BUG = WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS && ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS && fails(function () {
 var array = new Int8Array(2);
 array.set(1);
 array.set('2', 1);
 return array[0] !== 0 || array[1] !== 2;
});
exportTypedArrayMethod('set', function set(arrayLike) {
 aTypedArray(this);
 var offset = toOffset(arguments.length > 1 ? arguments[1] : undefined, 1);
 var src = toIndexedObject(arrayLike);
 if (WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS)
  return call($set, this, src, offset);
 var length = this.length;
 var len = lengthOfArrayLike(src);
 var index = 0;
 if (len + offset > length)
  throw new RangeError('Wrong length');
 while (index < len)
  this[offset + index] = src[index++];
}, !WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS || TO_OBJECT_BUG);

/***/ }),

/***/ 7192:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var typedArraySpeciesConstructor = __webpack_require__(6239);
var fails = __webpack_require__(8154);
var arraySlice = __webpack_require__(2251);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var FORCED = fails(function () {
 new Int8Array(1).slice();
});
exportTypedArrayMethod('slice', function slice(start, end) {
 var list = arraySlice(aTypedArray(this), start, end);
 var C = typedArraySpeciesConstructor(this);
 var index = 0;
 var length = list.length;
 var result = new C(length);
 while (length > index)
  result[index] = list[index++];
 return result;
}, FORCED);

/***/ }),

/***/ 354:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var $some = (__webpack_require__(2423).some);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('some', function some(callbackfn) {
 return $some(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 9080:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var uncurryThis = __webpack_require__(6218);
var fails = __webpack_require__(8154);
var aCallable = __webpack_require__(1782);
var internalSort = __webpack_require__(4689);
var ArrayBufferViewCore = __webpack_require__(5861);
var FF = __webpack_require__(7614);
var IE_OR_EDGE = __webpack_require__(7463);
var V8 = __webpack_require__(2171);
var WEBKIT = __webpack_require__(7906);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var Uint16Array = global.Uint16Array;
var nativeSort = Uint16Array && uncurryThis(Uint16Array.prototype.sort);
var ACCEPT_INCORRECT_ARGUMENTS = !!nativeSort && !(fails(function () {
 nativeSort(new Uint16Array(2), null);
}) && fails(function () {
 nativeSort(new Uint16Array(2), {});
}));
var STABLE_SORT = !!nativeSort && !fails(function () {
 if (V8)
  return V8 < 74;
 if (FF)
  return FF < 67;
 if (IE_OR_EDGE)
  return true;
 if (WEBKIT)
  return WEBKIT < 602;
 var array = new Uint16Array(516);
 var expected = Array(516);
 var index, mod;
 for (index = 0; index < 516; index++) {
  mod = index % 4;
  array[index] = 515 - index;
  expected[index] = index - 2 * mod + 3;
 }
 nativeSort(array, function (a, b) {
  return (a / 4 | 0) - (b / 4 | 0);
 });
 for (index = 0; index < 516; index++) {
  if (array[index] !== expected[index])
   return true;
 }
});
var getSortCompare = function (comparefn) {
 return function (x, y) {
  if (comparefn !== undefined)
   return +comparefn(x, y) || 0;
  if (y !== y)
   return -1;
  if (x !== x)
   return 1;
  if (x === 0 && y === 0)
   return 1 / x > 0 && 1 / y < 0 ? 1 : -1;
  return x > y;
 };
};
exportTypedArrayMethod('sort', function sort(comparefn) {
 if (comparefn !== undefined)
  aCallable(comparefn);
 if (STABLE_SORT)
  return nativeSort(this, comparefn);
 return internalSort(aTypedArray(this), getSortCompare(comparefn));
}, !STABLE_SORT || ACCEPT_INCORRECT_ARGUMENTS);

/***/ }),

/***/ 7238:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var apply = __webpack_require__(7294);
var ArrayBufferViewCore = __webpack_require__(5861);
var fails = __webpack_require__(8154);
var arraySlice = __webpack_require__(2251);
var Int8Array = global.Int8Array;
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var $toLocaleString = [].toLocaleString;
var TO_LOCALE_STRING_BUG = !!Int8Array && fails(function () {
 $toLocaleString.call(new Int8Array(1));
});
var FORCED = fails(function () {
 return [
  1,
  2
 ].toLocaleString() !== new Int8Array([
  1,
  2
 ]).toLocaleString();
}) || !fails(function () {
 Int8Array.prototype.toLocaleString.call([
  1,
  2
 ]);
});
exportTypedArrayMethod('toLocaleString', function toLocaleString() {
 return apply($toLocaleString, TO_LOCALE_STRING_BUG ? arraySlice(aTypedArray(this)) : aTypedArray(this), arraySlice(arguments));
}, FORCED);

/***/ }),

/***/ 7995:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var arrayToReversed = __webpack_require__(2304);
var ArrayBufferViewCore = __webpack_require__(5861);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;
exportTypedArrayMethod('toReversed', function toReversed() {
 return arrayToReversed(aTypedArray(this), getTypedArrayConstructor(this));
});

/***/ }),

/***/ 62:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(5861);
var uncurryThis = __webpack_require__(8403);
var aCallable = __webpack_require__(1782);
var arrayFromConstructorAndList = __webpack_require__(7003);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var sort = uncurryThis(ArrayBufferViewCore.TypedArrayPrototype.sort);
exportTypedArrayMethod('toSorted', function toSorted(compareFn) {
 if (compareFn !== undefined)
  aCallable(compareFn);
 var O = aTypedArray(this);
 var A = arrayFromConstructorAndList(getTypedArrayConstructor(O), O);
 return sort(A, compareFn);
});

/***/ }),

/***/ 6635:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var exportTypedArrayMethod = (__webpack_require__(5861).exportTypedArrayMethod);
var fails = __webpack_require__(8154);
var global = __webpack_require__(9298);
var uncurryThis = __webpack_require__(8403);
var Uint8Array = global.Uint8Array;
var Uint8ArrayPrototype = Uint8Array && Uint8Array.prototype || {};
var arrayToString = [].toString;
var join = uncurryThis([].join);
if (fails(function () {
  arrayToString.call({});
 })) {
 arrayToString = function toString() {
  return join(this);
 };
}
var IS_NOT_ARRAY_METHOD = Uint8ArrayPrototype.toString !== arrayToString;
exportTypedArrayMethod('toString', arrayToString, IS_NOT_ARRAY_METHOD);

/***/ }),

/***/ 2931:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(9173);
createTypedArrayConstructor('Uint16', function (init) {
 return function Uint16Array(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
});

/***/ }),

/***/ 4624:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(9173);
createTypedArrayConstructor('Uint32', function (init) {
 return function Uint32Array(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
});

/***/ }),

/***/ 4699:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(9173);
createTypedArrayConstructor('Uint8', function (init) {
 return function Uint8Array(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
});

/***/ }),

/***/ 312:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(9173);
createTypedArrayConstructor('Uint8', function (init) {
 return function Uint8ClampedArray(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
}, true);

/***/ }),

/***/ 4602:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var arrayWith = __webpack_require__(5886);
var ArrayBufferViewCore = __webpack_require__(5861);
var isBigIntArray = __webpack_require__(5986);
var toIntegerOrInfinity = __webpack_require__(1003);
var toBigInt = __webpack_require__(212);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var PROPER_ORDER = !!(function () {
 try {
  new Int8Array(1)['with'](2, {
   valueOf: function () {
    throw 8;
   }
  });
 } catch (error) {
  return error === 8;
 }
}());
exportTypedArrayMethod('with', {
 'with': function (index, value) {
  var O = aTypedArray(this);
  var relativeIndex = toIntegerOrInfinity(index);
  var actualValue = isBigIntArray(O) ? toBigInt(value) : +value;
  return arrayWith(O, getTypedArrayConstructor(O), relativeIndex, actualValue);
 }
}['with'], !PROPER_ORDER);

/***/ }),

/***/ 4507:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var FREEZING = __webpack_require__(7010);
var global = __webpack_require__(9298);
var uncurryThis = __webpack_require__(8403);
var defineBuiltIns = __webpack_require__(6880);
var InternalMetadataModule = __webpack_require__(4694);
var collection = __webpack_require__(4981);
var collectionWeak = __webpack_require__(9609);
var isObject = __webpack_require__(7633);
var enforceInternalState = (__webpack_require__(1649).enforce);
var fails = __webpack_require__(8154);
var NATIVE_WEAK_MAP = __webpack_require__(8443);
var $Object = Object;
var isArray = Array.isArray;
var isExtensible = $Object.isExtensible;
var isFrozen = $Object.isFrozen;
var isSealed = $Object.isSealed;
var freeze = $Object.freeze;
var seal = $Object.seal;
var FROZEN = {};
var SEALED = {};
var IS_IE11 = !global.ActiveXObject && 'ActiveXObject' in global;
var InternalWeakMap;
var wrapper = function (init) {
 return function WeakMap() {
  return init(this, arguments.length ? arguments[0] : undefined);
 };
};
var $WeakMap = collection('WeakMap', wrapper, collectionWeak);
var WeakMapPrototype = $WeakMap.prototype;
var nativeSet = uncurryThis(WeakMapPrototype.set);
var hasMSEdgeFreezingBug = function () {
 return FREEZING && fails(function () {
  var frozenArray = freeze([]);
  nativeSet(new $WeakMap(), frozenArray, 1);
  return !isFrozen(frozenArray);
 });
};
if (NATIVE_WEAK_MAP)
 if (IS_IE11) {
  InternalWeakMap = collectionWeak.getConstructor(wrapper, 'WeakMap', true);
  InternalMetadataModule.enable();
  var nativeDelete = uncurryThis(WeakMapPrototype['delete']);
  var nativeHas = uncurryThis(WeakMapPrototype.has);
  var nativeGet = uncurryThis(WeakMapPrototype.get);
  defineBuiltIns(WeakMapPrototype, {
   'delete': function (key) {
    if (isObject(key) && !isExtensible(key)) {
     var state = enforceInternalState(this);
     if (!state.frozen)
      state.frozen = new InternalWeakMap();
     return nativeDelete(this, key) || state.frozen['delete'](key);
    }
    return nativeDelete(this, key);
   },
   has: function has(key) {
    if (isObject(key) && !isExtensible(key)) {
     var state = enforceInternalState(this);
     if (!state.frozen)
      state.frozen = new InternalWeakMap();
     return nativeHas(this, key) || state.frozen.has(key);
    }
    return nativeHas(this, key);
   },
   get: function get(key) {
    if (isObject(key) && !isExtensible(key)) {
     var state = enforceInternalState(this);
     if (!state.frozen)
      state.frozen = new InternalWeakMap();
     return nativeHas(this, key) ? nativeGet(this, key) : state.frozen.get(key);
    }
    return nativeGet(this, key);
   },
   set: function set(key, value) {
    if (isObject(key) && !isExtensible(key)) {
     var state = enforceInternalState(this);
     if (!state.frozen)
      state.frozen = new InternalWeakMap();
     nativeHas(this, key) ? nativeSet(this, key, value) : state.frozen.set(key, value);
    } else
     nativeSet(this, key, value);
    return this;
   }
  });
 } else if (hasMSEdgeFreezingBug()) {
  defineBuiltIns(WeakMapPrototype, {
   set: function set(key, value) {
    var arrayIntegrityLevel;
    if (isArray(key)) {
     if (isFrozen(key))
      arrayIntegrityLevel = FROZEN;
     else if (isSealed(key))
      arrayIntegrityLevel = SEALED;
    }
    nativeSet(this, key, value);
    if (arrayIntegrityLevel === FROZEN)
     freeze(key);
    if (arrayIntegrityLevel === SEALED)
     seal(key);
    return this;
   }
  });
 }

/***/ }),

/***/ 3766:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(4507);

/***/ }),

/***/ 5804:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var collection = __webpack_require__(4981);
var collectionWeak = __webpack_require__(9609);
collection('WeakSet', function (init) {
 return function WeakSet() {
  return init(this, arguments.length ? arguments[0] : undefined);
 };
}, collectionWeak);

/***/ }),

/***/ 394:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(5804);

/***/ }),

/***/ 344:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var defineBuiltInAccessor = __webpack_require__(9691);
var isDetached = __webpack_require__(582);
var ArrayBufferPrototype = ArrayBuffer.prototype;
if (DESCRIPTORS && !('detached' in ArrayBufferPrototype)) {
 defineBuiltInAccessor(ArrayBufferPrototype, 'detached', {
  configurable: true,
  get: function detached() {
   return isDetached(this);
  }
 });
}

/***/ }),

/***/ 7583:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $transfer = __webpack_require__(4358);
if ($transfer)
 $({
  target: 'ArrayBuffer',
  proto: true
 }, {
  transferToFixedLength: function transferToFixedLength() {
   return $transfer(this, arguments.length ? arguments[0] : undefined, false);
  }
 });

/***/ }),

/***/ 4305:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var $transfer = __webpack_require__(4358);
if ($transfer)
 $({
  target: 'ArrayBuffer',
  proto: true
 }, {
  transfer: function transfer() {
   return $transfer(this, arguments.length ? arguments[0] : undefined, true);
  }
 });

/***/ }),

/***/ 7121:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var global = __webpack_require__(9298);
var anInstance = __webpack_require__(5834);
var isCallable = __webpack_require__(7316);
var getPrototypeOf = __webpack_require__(2176);
var createNonEnumerableProperty = __webpack_require__(9293);
var fails = __webpack_require__(8154);
var hasOwn = __webpack_require__(936);
var wellKnownSymbol = __webpack_require__(2292);
var IteratorPrototype = (__webpack_require__(5238).IteratorPrototype);
var IS_PURE = __webpack_require__(2554);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var $TypeError = TypeError;
var NativeIterator = global.Iterator;
var FORCED = IS_PURE || !isCallable(NativeIterator) || NativeIterator.prototype !== IteratorPrototype || !fails(function () {
 NativeIterator({});
});
var IteratorConstructor = function Iterator() {
 anInstance(this, IteratorPrototype);
 if (getPrototypeOf(this) === IteratorPrototype)
  throw new $TypeError('Abstract class Iterator not directly constructable');
};
if (!hasOwn(IteratorPrototype, TO_STRING_TAG)) {
 createNonEnumerableProperty(IteratorPrototype, TO_STRING_TAG, 'Iterator');
}
if (FORCED || !hasOwn(IteratorPrototype, 'constructor') || IteratorPrototype.constructor === Object) {
 createNonEnumerableProperty(IteratorPrototype, 'constructor', IteratorConstructor);
}
IteratorConstructor.prototype = IteratorPrototype;
$({
 global: true,
 constructor: true,
 forced: FORCED
}, { Iterator: IteratorConstructor });

/***/ }),

/***/ 385:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var iterate = __webpack_require__(6837);
var aCallable = __webpack_require__(1782);
var anObject = __webpack_require__(4719);
var getIteratorDirect = __webpack_require__(9235);
$({
 target: 'Iterator',
 proto: true,
 real: true
}, {
 every: function every(predicate) {
  anObject(this);
  aCallable(predicate);
  var record = getIteratorDirect(this);
  var counter = 0;
  return !iterate(record, function (value, stop) {
   if (!predicate(value, counter++))
    return stop();
  }, {
   IS_RECORD: true,
   INTERRUPTED: true
  }).stopped;
 }
});

/***/ }),

/***/ 2993:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var call = __webpack_require__(2026);
var aCallable = __webpack_require__(1782);
var anObject = __webpack_require__(4719);
var getIteratorDirect = __webpack_require__(9235);
var createIteratorProxy = __webpack_require__(375);
var callWithSafeIterationClosing = __webpack_require__(5723);
var IS_PURE = __webpack_require__(2554);
var IteratorProxy = createIteratorProxy(function () {
 var iterator = this.iterator;
 var predicate = this.predicate;
 var next = this.next;
 var result, done, value;
 while (true) {
  result = anObject(call(next, iterator));
  done = this.done = !!result.done;
  if (done)
   return;
  value = result.value;
  if (callWithSafeIterationClosing(iterator, predicate, [
    value,
    this.counter++
   ], true))
   return value;
 }
});
$({
 target: 'Iterator',
 proto: true,
 real: true,
 forced: IS_PURE
}, {
 filter: function filter(predicate) {
  anObject(this);
  aCallable(predicate);
  return new IteratorProxy(getIteratorDirect(this), { predicate: predicate });
 }
});

/***/ }),

/***/ 5252:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var iterate = __webpack_require__(6837);
var aCallable = __webpack_require__(1782);
var anObject = __webpack_require__(4719);
var getIteratorDirect = __webpack_require__(9235);
$({
 target: 'Iterator',
 proto: true,
 real: true
}, {
 find: function find(predicate) {
  anObject(this);
  aCallable(predicate);
  var record = getIteratorDirect(this);
  var counter = 0;
  return iterate(record, function (value, stop) {
   if (predicate(value, counter++))
    return stop(value);
  }, {
   IS_RECORD: true,
   INTERRUPTED: true
  }).result;
 }
});

/***/ }),

/***/ 6770:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var iterate = __webpack_require__(6837);
var aCallable = __webpack_require__(1782);
var anObject = __webpack_require__(4719);
var getIteratorDirect = __webpack_require__(9235);
$({
 target: 'Iterator',
 proto: true,
 real: true
}, {
 forEach: function forEach(fn) {
  anObject(this);
  aCallable(fn);
  var record = getIteratorDirect(this);
  var counter = 0;
  iterate(record, function (value) {
   fn(value, counter++);
  }, { IS_RECORD: true });
 }
});

/***/ }),

/***/ 7944:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var map = __webpack_require__(8142);
var IS_PURE = __webpack_require__(2554);
$({
 target: 'Iterator',
 proto: true,
 real: true,
 forced: IS_PURE
}, { map: map });

/***/ }),

/***/ 3371:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var iterate = __webpack_require__(6837);
var aCallable = __webpack_require__(1782);
var anObject = __webpack_require__(4719);
var getIteratorDirect = __webpack_require__(9235);
var $TypeError = TypeError;
$({
 target: 'Iterator',
 proto: true,
 real: true
}, {
 reduce: function reduce(reducer) {
  anObject(this);
  aCallable(reducer);
  var record = getIteratorDirect(this);
  var noInitial = arguments.length < 2;
  var accumulator = noInitial ? undefined : arguments[1];
  var counter = 0;
  iterate(record, function (value) {
   if (noInitial) {
    noInitial = false;
    accumulator = value;
   } else {
    accumulator = reducer(accumulator, value, counter);
   }
   counter++;
  }, { IS_RECORD: true });
  if (noInitial)
   throw new $TypeError('Reduce of empty iterator with no initial value');
  return accumulator;
 }
});

/***/ }),

/***/ 8518:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var iterate = __webpack_require__(6837);
var aCallable = __webpack_require__(1782);
var anObject = __webpack_require__(4719);
var getIteratorDirect = __webpack_require__(9235);
$({
 target: 'Iterator',
 proto: true,
 real: true
}, {
 some: function some(predicate) {
  anObject(this);
  aCallable(predicate);
  var record = getIteratorDirect(this);
  var counter = 0;
  return iterate(record, function (value, stop) {
   if (predicate(value, counter++))
    return stop();
  }, {
   IS_RECORD: true,
   INTERRUPTED: true
  }).stopped;
 }
});

/***/ }),

/***/ 6771:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var anObject = __webpack_require__(4719);
var iterate = __webpack_require__(6837);
var getIteratorDirect = __webpack_require__(9235);
var push = [].push;
$({
 target: 'Iterator',
 proto: true,
 real: true
}, {
 toArray: function toArray() {
  var result = [];
  iterate(getIteratorDirect(anObject(this)), push, {
   that: result,
   IS_RECORD: true
  });
  return result;
 }
});

/***/ }),

/***/ 5561:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var difference = __webpack_require__(5656);
var setMethodAcceptSetLike = __webpack_require__(507);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('difference')
}, { difference: difference });

/***/ }),

/***/ 8587:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var fails = __webpack_require__(8154);
var intersection = __webpack_require__(8461);
var setMethodAcceptSetLike = __webpack_require__(507);
var INCORRECT = !setMethodAcceptSetLike('intersection') || fails(function () {
 return Array.from(new Set([
  1,
  2,
  3
 ]).intersection(new Set([
  3,
  2
 ]))) !== '3,2';
});
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: INCORRECT
}, { intersection: intersection });

/***/ }),

/***/ 3247:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var isDisjointFrom = __webpack_require__(8550);
var setMethodAcceptSetLike = __webpack_require__(507);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('isDisjointFrom')
}, { isDisjointFrom: isDisjointFrom });

/***/ }),

/***/ 3302:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var isSubsetOf = __webpack_require__(990);
var setMethodAcceptSetLike = __webpack_require__(507);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('isSubsetOf')
}, { isSubsetOf: isSubsetOf });

/***/ }),

/***/ 9490:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var isSupersetOf = __webpack_require__(194);
var setMethodAcceptSetLike = __webpack_require__(507);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('isSupersetOf')
}, { isSupersetOf: isSupersetOf });

/***/ }),

/***/ 5438:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var symmetricDifference = __webpack_require__(3194);
var setMethodAcceptSetLike = __webpack_require__(507);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('symmetricDifference')
}, { symmetricDifference: symmetricDifference });

/***/ }),

/***/ 7914:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var union = __webpack_require__(5703);
var setMethodAcceptSetLike = __webpack_require__(507);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('union')
}, { union: union });

/***/ }),

/***/ 1378:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var DOMIterables = __webpack_require__(2411);
var DOMTokenListPrototype = __webpack_require__(3942);
var forEach = __webpack_require__(8208);
var createNonEnumerableProperty = __webpack_require__(9293);
var handlePrototype = function (CollectionPrototype) {
 if (CollectionPrototype && CollectionPrototype.forEach !== forEach)
  try {
   createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);
  } catch (error) {
   CollectionPrototype.forEach = forEach;
  }
};
for (var COLLECTION_NAME in DOMIterables) {
 if (DOMIterables[COLLECTION_NAME]) {
  handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);
 }
}
handlePrototype(DOMTokenListPrototype);

/***/ }),

/***/ 2374:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(9298);
var DOMIterables = __webpack_require__(2411);
var DOMTokenListPrototype = __webpack_require__(3942);
var ArrayIteratorMethods = __webpack_require__(6180);
var createNonEnumerableProperty = __webpack_require__(9293);
var wellKnownSymbol = __webpack_require__(2292);
var ITERATOR = wellKnownSymbol('iterator');
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var ArrayValues = ArrayIteratorMethods.values;
var handlePrototype = function (CollectionPrototype, COLLECTION_NAME) {
 if (CollectionPrototype) {
  if (CollectionPrototype[ITERATOR] !== ArrayValues)
   try {
    createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);
   } catch (error) {
    CollectionPrototype[ITERATOR] = ArrayValues;
   }
  if (!CollectionPrototype[TO_STRING_TAG]) {
   createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);
  }
  if (DOMIterables[COLLECTION_NAME])
   for (var METHOD_NAME in ArrayIteratorMethods) {
    if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME])
     try {
      createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);
     } catch (error) {
      CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];
     }
   }
 }
};
for (var COLLECTION_NAME in DOMIterables) {
 handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype, COLLECTION_NAME);
}
handlePrototype(DOMTokenListPrototype, 'DOMTokenList');

/***/ }),

/***/ 2822:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var tryNodeRequire = __webpack_require__(2276);
var getBuiltIn = __webpack_require__(7187);
var fails = __webpack_require__(8154);
var create = __webpack_require__(6941);
var createPropertyDescriptor = __webpack_require__(1198);
var defineProperty = (__webpack_require__(7744).f);
var defineBuiltIn = __webpack_require__(7041);
var defineBuiltInAccessor = __webpack_require__(9691);
var hasOwn = __webpack_require__(936);
var anInstance = __webpack_require__(5834);
var anObject = __webpack_require__(4719);
var errorToString = __webpack_require__(3522);
var normalizeStringArgument = __webpack_require__(1264);
var DOMExceptionConstants = __webpack_require__(8560);
var clearErrorStack = __webpack_require__(34);
var InternalStateModule = __webpack_require__(1649);
var DESCRIPTORS = __webpack_require__(940);
var IS_PURE = __webpack_require__(2554);
var DOM_EXCEPTION = 'DOMException';
var DATA_CLONE_ERR = 'DATA_CLONE_ERR';
var Error = getBuiltIn('Error');
var NativeDOMException = getBuiltIn(DOM_EXCEPTION) || (function () {
 try {
  var MessageChannel = getBuiltIn('MessageChannel') || tryNodeRequire('worker_threads').MessageChannel;
  new MessageChannel().port1.postMessage(new WeakMap());
 } catch (error) {
  if (error.name === DATA_CLONE_ERR && error.code === 25)
   return error.constructor;
 }
}());
var NativeDOMExceptionPrototype = NativeDOMException && NativeDOMException.prototype;
var ErrorPrototype = Error.prototype;
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(DOM_EXCEPTION);
var HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);
var codeFor = function (name) {
 return hasOwn(DOMExceptionConstants, name) && DOMExceptionConstants[name].m ? DOMExceptionConstants[name].c : 0;
};
var $DOMException = function DOMException() {
 anInstance(this, DOMExceptionPrototype);
 var argumentsLength = arguments.length;
 var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);
 var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');
 var code = codeFor(name);
 setInternalState(this, {
  type: DOM_EXCEPTION,
  name: name,
  message: message,
  code: code
 });
 if (!DESCRIPTORS) {
  this.name = name;
  this.message = message;
  this.code = code;
 }
 if (HAS_STACK) {
  var error = new Error(message);
  error.name = DOM_EXCEPTION;
  defineProperty(this, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));
 }
};
var DOMExceptionPrototype = $DOMException.prototype = create(ErrorPrototype);
var createGetterDescriptor = function (get) {
 return {
  enumerable: true,
  configurable: true,
  get: get
 };
};
var getterFor = function (key) {
 return createGetterDescriptor(function () {
  return getInternalState(this)[key];
 });
};
if (DESCRIPTORS) {
 defineBuiltInAccessor(DOMExceptionPrototype, 'code', getterFor('code'));
 defineBuiltInAccessor(DOMExceptionPrototype, 'message', getterFor('message'));
 defineBuiltInAccessor(DOMExceptionPrototype, 'name', getterFor('name'));
}
defineProperty(DOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, $DOMException));
var INCORRECT_CONSTRUCTOR = fails(function () {
 return !(new NativeDOMException() instanceof Error);
});
var INCORRECT_TO_STRING = INCORRECT_CONSTRUCTOR || fails(function () {
 return ErrorPrototype.toString !== errorToString || String(new NativeDOMException(1, 2)) !== '2: 1';
});
var INCORRECT_CODE = INCORRECT_CONSTRUCTOR || fails(function () {
 return new NativeDOMException(1, 'DataCloneError').code !== 25;
});
var MISSED_CONSTANTS = INCORRECT_CONSTRUCTOR || NativeDOMException[DATA_CLONE_ERR] !== 25 || NativeDOMExceptionPrototype[DATA_CLONE_ERR] !== 25;
var FORCED_CONSTRUCTOR = IS_PURE ? INCORRECT_TO_STRING || INCORRECT_CODE || MISSED_CONSTANTS : INCORRECT_CONSTRUCTOR;
$({
 global: true,
 constructor: true,
 forced: FORCED_CONSTRUCTOR
}, { DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException });
var PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);
var PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;
if (INCORRECT_TO_STRING && (IS_PURE || NativeDOMException === PolyfilledDOMException)) {
 defineBuiltIn(PolyfilledDOMExceptionPrototype, 'toString', errorToString);
}
if (INCORRECT_CODE && DESCRIPTORS && NativeDOMException === PolyfilledDOMException) {
 defineBuiltInAccessor(PolyfilledDOMExceptionPrototype, 'code', createGetterDescriptor(function () {
  return codeFor(anObject(this).name);
 }));
}
for (var key in DOMExceptionConstants)
 if (hasOwn(DOMExceptionConstants, key)) {
  var constant = DOMExceptionConstants[key];
  var constantName = constant.s;
  var descriptor = createPropertyDescriptor(6, constant.c);
  if (!hasOwn(PolyfilledDOMException, constantName)) {
   defineProperty(PolyfilledDOMException, constantName, descriptor);
  }
  if (!hasOwn(PolyfilledDOMExceptionPrototype, constantName)) {
   defineProperty(PolyfilledDOMExceptionPrototype, constantName, descriptor);
  }
 }

/***/ }),

/***/ 9709:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var global = __webpack_require__(9298);
var getBuiltIn = __webpack_require__(7187);
var createPropertyDescriptor = __webpack_require__(1198);
var defineProperty = (__webpack_require__(7744).f);
var hasOwn = __webpack_require__(936);
var anInstance = __webpack_require__(5834);
var inheritIfRequired = __webpack_require__(7523);
var normalizeStringArgument = __webpack_require__(1264);
var DOMExceptionConstants = __webpack_require__(8560);
var clearErrorStack = __webpack_require__(34);
var DESCRIPTORS = __webpack_require__(940);
var IS_PURE = __webpack_require__(2554);
var DOM_EXCEPTION = 'DOMException';
var Error = getBuiltIn('Error');
var NativeDOMException = getBuiltIn(DOM_EXCEPTION);
var $DOMException = function DOMException() {
 anInstance(this, DOMExceptionPrototype);
 var argumentsLength = arguments.length;
 var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);
 var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');
 var that = new NativeDOMException(message, name);
 var error = new Error(message);
 error.name = DOM_EXCEPTION;
 defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));
 inheritIfRequired(that, this, $DOMException);
 return that;
};
var DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;
var ERROR_HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);
var DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);
var descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(global, DOM_EXCEPTION);
var BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);
var FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;
$({
 global: true,
 constructor: true,
 forced: IS_PURE || FORCED_CONSTRUCTOR
}, { DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException });
var PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);
var PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;
if (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {
 if (!IS_PURE) {
  defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));
 }
 for (var key in DOMExceptionConstants)
  if (hasOwn(DOMExceptionConstants, key)) {
   var constant = DOMExceptionConstants[key];
   var constantName = constant.s;
   if (!hasOwn(PolyfilledDOMException, constantName)) {
    defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));
   }
  }
}

/***/ }),

/***/ 2642:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(7187);
var setToStringTag = __webpack_require__(7536);
var DOM_EXCEPTION = 'DOMException';
setToStringTag(getBuiltIn(DOM_EXCEPTION), DOM_EXCEPTION);

/***/ }),

/***/ 5057:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(4978);
var global = __webpack_require__(9298);
var defineBuiltInAccessor = __webpack_require__(9691);
var DESCRIPTORS = __webpack_require__(940);
var $TypeError = TypeError;
var defineProperty = Object.defineProperty;
var INCORRECT_VALUE = global.self !== global;
try {
 if (DESCRIPTORS) {
  var descriptor = Object.getOwnPropertyDescriptor(global, 'self');
  if (INCORRECT_VALUE || !descriptor || !descriptor.get || !descriptor.enumerable) {
   defineBuiltInAccessor(global, 'self', {
    get: function self() {
     return global;
    },
    set: function self(value) {
     if (this !== global)
      throw new $TypeError('Illegal invocation');
     defineProperty(global, 'self', {
      value: value,
      writable: true,
      configurable: true,
      enumerable: true
     });
    },
    configurable: true,
    enumerable: true
   });
  }
 } else
  $({
   global: true,
   simple: true,
   forced: INCORRECT_VALUE
  }, { self: global });
} catch (error) {
}

/***/ }),

/***/ 1872:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(6180);
var $ = __webpack_require__(4978);
var global = __webpack_require__(9298);
var call = __webpack_require__(2026);
var uncurryThis = __webpack_require__(8403);
var DESCRIPTORS = __webpack_require__(940);
var USE_NATIVE_URL = __webpack_require__(8815);
var defineBuiltIn = __webpack_require__(7041);
var defineBuiltInAccessor = __webpack_require__(9691);
var defineBuiltIns = __webpack_require__(6880);
var setToStringTag = __webpack_require__(7536);
var createIteratorConstructor = __webpack_require__(552);
var InternalStateModule = __webpack_require__(1649);
var anInstance = __webpack_require__(5834);
var isCallable = __webpack_require__(7316);
var hasOwn = __webpack_require__(936);
var bind = __webpack_require__(7789);
var classof = __webpack_require__(8329);
var anObject = __webpack_require__(4719);
var isObject = __webpack_require__(7633);
var $toString = __webpack_require__(5730);
var create = __webpack_require__(6941);
var createPropertyDescriptor = __webpack_require__(1198);
var getIterator = __webpack_require__(7612);
var getIteratorMethod = __webpack_require__(273);
var createIterResultObject = __webpack_require__(1111);
var validateArgumentsLength = __webpack_require__(2743);
var wellKnownSymbol = __webpack_require__(2292);
var arraySort = __webpack_require__(4689);
var ITERATOR = wellKnownSymbol('iterator');
var URL_SEARCH_PARAMS = 'URLSearchParams';
var URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + 'Iterator';
var setInternalState = InternalStateModule.set;
var getInternalParamsState = InternalStateModule.getterFor(URL_SEARCH_PARAMS);
var getInternalIteratorState = InternalStateModule.getterFor(URL_SEARCH_PARAMS_ITERATOR);
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var safeGetBuiltIn = function (name) {
 if (!DESCRIPTORS)
  return global[name];
 var descriptor = getOwnPropertyDescriptor(global, name);
 return descriptor && descriptor.value;
};
var nativeFetch = safeGetBuiltIn('fetch');
var NativeRequest = safeGetBuiltIn('Request');
var Headers = safeGetBuiltIn('Headers');
var RequestPrototype = NativeRequest && NativeRequest.prototype;
var HeadersPrototype = Headers && Headers.prototype;
var RegExp = global.RegExp;
var TypeError = global.TypeError;
var decodeURIComponent = global.decodeURIComponent;
var encodeURIComponent = global.encodeURIComponent;
var charAt = uncurryThis(''.charAt);
var join = uncurryThis([].join);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var shift = uncurryThis([].shift);
var splice = uncurryThis([].splice);
var split = uncurryThis(''.split);
var stringSlice = uncurryThis(''.slice);
var plus = /\+/g;
var sequences = Array(4);
var percentSequence = function (bytes) {
 return sequences[bytes - 1] || (sequences[bytes - 1] = RegExp('((?:%[\\da-f]{2}){' + bytes + '})', 'gi'));
};
var percentDecode = function (sequence) {
 try {
  return decodeURIComponent(sequence);
 } catch (error) {
  return sequence;
 }
};
var deserialize = function (it) {
 var result = replace(it, plus, ' ');
 var bytes = 4;
 try {
  return decodeURIComponent(result);
 } catch (error) {
  while (bytes) {
   result = replace(result, percentSequence(bytes--), percentDecode);
  }
  return result;
 }
};
var find = /[!'()~]|%20/g;
var replacements = {
 '!': '%21',
 "'": '%27',
 '(': '%28',
 ')': '%29',
 '~': '%7E',
 '%20': '+'
};
var replacer = function (match) {
 return replacements[match];
};
var serialize = function (it) {
 return replace(encodeURIComponent(it), find, replacer);
};
var URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {
 setInternalState(this, {
  type: URL_SEARCH_PARAMS_ITERATOR,
  target: getInternalParamsState(params).entries,
  index: 0,
  kind: kind
 });
}, URL_SEARCH_PARAMS, function next() {
 var state = getInternalIteratorState(this);
 var target = state.target;
 var index = state.index++;
 if (!target || index >= target.length) {
  state.target = undefined;
  return createIterResultObject(undefined, true);
 }
 var entry = target[index];
 switch (state.kind) {
 case 'keys':
  return createIterResultObject(entry.key, false);
 case 'values':
  return createIterResultObject(entry.value, false);
 }
 return createIterResultObject([
  entry.key,
  entry.value
 ], false);
}, true);
var URLSearchParamsState = function (init) {
 this.entries = [];
 this.url = null;
 if (init !== undefined) {
  if (isObject(init))
   this.parseObject(init);
  else
   this.parseQuery(typeof init == 'string' ? charAt(init, 0) === '?' ? stringSlice(init, 1) : init : $toString(init));
 }
};
URLSearchParamsState.prototype = {
 type: URL_SEARCH_PARAMS,
 bindURL: function (url) {
  this.url = url;
  this.update();
 },
 parseObject: function (object) {
  var entries = this.entries;
  var iteratorMethod = getIteratorMethod(object);
  var iterator, next, step, entryIterator, entryNext, first, second;
  if (iteratorMethod) {
   iterator = getIterator(object, iteratorMethod);
   next = iterator.next;
   while (!(step = call(next, iterator)).done) {
    entryIterator = getIterator(anObject(step.value));
    entryNext = entryIterator.next;
    if ((first = call(entryNext, entryIterator)).done || (second = call(entryNext, entryIterator)).done || !call(entryNext, entryIterator).done)
     throw new TypeError('Expected sequence with length 2');
    push(entries, {
     key: $toString(first.value),
     value: $toString(second.value)
    });
   }
  } else
   for (var key in object)
    if (hasOwn(object, key)) {
     push(entries, {
      key: key,
      value: $toString(object[key])
     });
    }
 },
 parseQuery: function (query) {
  if (query) {
   var entries = this.entries;
   var attributes = split(query, '&');
   var index = 0;
   var attribute, entry;
   while (index < attributes.length) {
    attribute = attributes[index++];
    if (attribute.length) {
     entry = split(attribute, '=');
     push(entries, {
      key: deserialize(shift(entry)),
      value: deserialize(join(entry, '='))
     });
    }
   }
  }
 },
 serialize: function () {
  var entries = this.entries;
  var result = [];
  var index = 0;
  var entry;
  while (index < entries.length) {
   entry = entries[index++];
   push(result, serialize(entry.key) + '=' + serialize(entry.value));
  }
  return join(result, '&');
 },
 update: function () {
  this.entries.length = 0;
  this.parseQuery(this.url.query);
 },
 updateURL: function () {
  if (this.url)
   this.url.update();
 }
};
var URLSearchParamsConstructor = function URLSearchParams() {
 anInstance(this, URLSearchParamsPrototype);
 var init = arguments.length > 0 ? arguments[0] : undefined;
 var state = setInternalState(this, new URLSearchParamsState(init));
 if (!DESCRIPTORS)
  this.size = state.entries.length;
};
var URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;
defineBuiltIns(URLSearchParamsPrototype, {
 append: function append(name, value) {
  var state = getInternalParamsState(this);
  validateArgumentsLength(arguments.length, 2);
  push(state.entries, {
   key: $toString(name),
   value: $toString(value)
  });
  if (!DESCRIPTORS)
   this.length++;
  state.updateURL();
 },
 'delete': function (name) {
  var state = getInternalParamsState(this);
  var length = validateArgumentsLength(arguments.length, 1);
  var entries = state.entries;
  var key = $toString(name);
  var $value = length < 2 ? undefined : arguments[1];
  var value = $value === undefined ? $value : $toString($value);
  var index = 0;
  while (index < entries.length) {
   var entry = entries[index];
   if (entry.key === key && (value === undefined || entry.value === value)) {
    splice(entries, index, 1);
    if (value !== undefined)
     break;
   } else
    index++;
  }
  if (!DESCRIPTORS)
   this.size = entries.length;
  state.updateURL();
 },
 get: function get(name) {
  var entries = getInternalParamsState(this).entries;
  validateArgumentsLength(arguments.length, 1);
  var key = $toString(name);
  var index = 0;
  for (; index < entries.length; index++) {
   if (entries[index].key === key)
    return entries[index].value;
  }
  return null;
 },
 getAll: function getAll(name) {
  var entries = getInternalParamsState(this).entries;
  validateArgumentsLength(arguments.length, 1);
  var key = $toString(name);
  var result = [];
  var index = 0;
  for (; index < entries.length; index++) {
   if (entries[index].key === key)
    push(result, entries[index].value);
  }
  return result;
 },
 has: function has(name) {
  var entries = getInternalParamsState(this).entries;
  var length = validateArgumentsLength(arguments.length, 1);
  var key = $toString(name);
  var $value = length < 2 ? undefined : arguments[1];
  var value = $value === undefined ? $value : $toString($value);
  var index = 0;
  while (index < entries.length) {
   var entry = entries[index++];
   if (entry.key === key && (value === undefined || entry.value === value))
    return true;
  }
  return false;
 },
 set: function set(name, value) {
  var state = getInternalParamsState(this);
  validateArgumentsLength(arguments.length, 1);
  var entries = state.entries;
  var found = false;
  var key = $toString(name);
  var val = $toString(value);
  var index = 0;
  var entry;
  for (; index < entries.length; index++) {
   entry = entries[index];
   if (entry.key === key) {
    if (found)
     splice(entries, index--, 1);
    else {
     found = true;
     entry.value = val;
    }
   }
  }
  if (!found)
   push(entries, {
    key: key,
    value: val
   });
  if (!DESCRIPTORS)
   this.size = entries.length;
  state.updateURL();
 },
 sort: function sort() {
  var state = getInternalParamsState(this);
  arraySort(state.entries, function (a, b) {
   return a.key > b.key ? 1 : -1;
  });
  state.updateURL();
 },
 forEach: function forEach(callback) {
  var entries = getInternalParamsState(this).entries;
  var boundFunction = bind(callback, arguments.length > 1 ? arguments[1] : undefined);
  var index = 0;
  var entry;
  while (index < entries.length) {
   entry = entries[index++];
   boundFunction(entry.value, entry.key, this);
  }
 },
 keys: function keys() {
  return new URLSearchParamsIterator(this, 'keys');
 },
 values: function values() {
  return new URLSearchParamsIterator(this, 'values');
 },
 entries: function entries() {
  return new URLSearchParamsIterator(this, 'entries');
 }
}, { enumerable: true });
defineBuiltIn(URLSearchParamsPrototype, ITERATOR, URLSearchParamsPrototype.entries, { name: 'entries' });
defineBuiltIn(URLSearchParamsPrototype, 'toString', function toString() {
 return getInternalParamsState(this).serialize();
}, { enumerable: true });
if (DESCRIPTORS)
 defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {
  get: function size() {
   return getInternalParamsState(this).entries.length;
  },
  configurable: true,
  enumerable: true
 });
setToStringTag(URLSearchParamsConstructor, URL_SEARCH_PARAMS);
$({
 global: true,
 constructor: true,
 forced: !USE_NATIVE_URL
}, { URLSearchParams: URLSearchParamsConstructor });
if (!USE_NATIVE_URL && isCallable(Headers)) {
 var headersHas = uncurryThis(HeadersPrototype.has);
 var headersSet = uncurryThis(HeadersPrototype.set);
 var wrapRequestOptions = function (init) {
  if (isObject(init)) {
   var body = init.body;
   var headers;
   if (classof(body) === URL_SEARCH_PARAMS) {
    headers = init.headers ? new Headers(init.headers) : new Headers();
    if (!headersHas(headers, 'content-type')) {
     headersSet(headers, 'content-type', 'application/x-www-form-urlencoded;charset=UTF-8');
    }
    return create(init, {
     body: createPropertyDescriptor(0, $toString(body)),
     headers: createPropertyDescriptor(0, headers)
    });
   }
  }
  return init;
 };
 if (isCallable(nativeFetch)) {
  $({
   global: true,
   enumerable: true,
   dontCallGetSet: true,
   forced: true
  }, {
   fetch: function fetch(input) {
    return nativeFetch(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
   }
  });
 }
 if (isCallable(NativeRequest)) {
  var RequestConstructor = function Request(input) {
   anInstance(this, RequestPrototype);
   return new NativeRequest(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
  };
  RequestPrototype.constructor = RequestConstructor;
  RequestConstructor.prototype = RequestPrototype;
  $({
   global: true,
   constructor: true,
   dontCallGetSet: true,
   forced: true
  }, { Request: RequestConstructor });
 }
}
module.exports = {
 URLSearchParams: URLSearchParamsConstructor,
 getState: getInternalParamsState
};

/***/ }),

/***/ 3655:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var defineBuiltIn = __webpack_require__(7041);
var uncurryThis = __webpack_require__(8403);
var toString = __webpack_require__(5730);
var validateArgumentsLength = __webpack_require__(2743);
var $URLSearchParams = URLSearchParams;
var URLSearchParamsPrototype = $URLSearchParams.prototype;
var append = uncurryThis(URLSearchParamsPrototype.append);
var $delete = uncurryThis(URLSearchParamsPrototype['delete']);
var forEach = uncurryThis(URLSearchParamsPrototype.forEach);
var push = uncurryThis([].push);
var params = new $URLSearchParams('a=1&a=2&b=3');
params['delete']('a', 1);
params['delete']('b', undefined);
if (params + '' !== 'a=2') {
 defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name) {
  var length = arguments.length;
  var $value = length < 2 ? undefined : arguments[1];
  if (length && $value === undefined)
   return $delete(this, name);
  var entries = [];
  forEach(this, function (v, k) {
   push(entries, {
    key: k,
    value: v
   });
  });
  validateArgumentsLength(length, 1);
  var key = toString(name);
  var value = toString($value);
  var index = 0;
  var dindex = 0;
  var found = false;
  var entriesLength = entries.length;
  var entry;
  while (index < entriesLength) {
   entry = entries[index++];
   if (found || entry.key === key) {
    found = true;
    $delete(this, entry.key);
   } else
    dindex++;
  }
  while (dindex < entriesLength) {
   entry = entries[dindex++];
   if (!(entry.key === key && entry.value === value))
    append(this, entry.key, entry.value);
  }
 }, {
  enumerable: true,
  unsafe: true
 });
}

/***/ }),

/***/ 2555:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var defineBuiltIn = __webpack_require__(7041);
var uncurryThis = __webpack_require__(8403);
var toString = __webpack_require__(5730);
var validateArgumentsLength = __webpack_require__(2743);
var $URLSearchParams = URLSearchParams;
var URLSearchParamsPrototype = $URLSearchParams.prototype;
var getAll = uncurryThis(URLSearchParamsPrototype.getAll);
var $has = uncurryThis(URLSearchParamsPrototype.has);
var params = new $URLSearchParams('a=1');
if (params.has('a', 2) || !params.has('a', undefined)) {
 defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name) {
  var length = arguments.length;
  var $value = length < 2 ? undefined : arguments[1];
  if (length && $value === undefined)
   return $has(this, name);
  var values = getAll(this, name);
  validateArgumentsLength(length, 1);
  var value = toString($value);
  var index = 0;
  while (index < values.length) {
   if (values[index++] === value)
    return true;
  }
  return false;
 }, {
  enumerable: true,
  unsafe: true
 });
}

/***/ }),

/***/ 3757:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(1872);

/***/ }),

/***/ 2202:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(940);
var uncurryThis = __webpack_require__(8403);
var defineBuiltInAccessor = __webpack_require__(9691);
var URLSearchParamsPrototype = URLSearchParams.prototype;
var forEach = uncurryThis(URLSearchParamsPrototype.forEach);
if (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {
 defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {
  get: function size() {
   var count = 0;
   forEach(this, function () {
    count++;
   });
   return count;
  },
  configurable: true,
  enumerable: true
 });
}

/***/ }),

/***/ 9258:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(1747);
var $ = __webpack_require__(4978);
var DESCRIPTORS = __webpack_require__(940);
var USE_NATIVE_URL = __webpack_require__(8815);
var global = __webpack_require__(9298);
var bind = __webpack_require__(7789);
var uncurryThis = __webpack_require__(8403);
var defineBuiltIn = __webpack_require__(7041);
var defineBuiltInAccessor = __webpack_require__(9691);
var anInstance = __webpack_require__(5834);
var hasOwn = __webpack_require__(936);
var assign = __webpack_require__(453);
var arrayFrom = __webpack_require__(7609);
var arraySlice = __webpack_require__(6071);
var codeAt = (__webpack_require__(6819).codeAt);
var toASCII = __webpack_require__(2897);
var $toString = __webpack_require__(5730);
var setToStringTag = __webpack_require__(7536);
var validateArgumentsLength = __webpack_require__(2743);
var URLSearchParamsModule = __webpack_require__(1872);
var InternalStateModule = __webpack_require__(1649);
var setInternalState = InternalStateModule.set;
var getInternalURLState = InternalStateModule.getterFor('URL');
var URLSearchParams = URLSearchParamsModule.URLSearchParams;
var getInternalSearchParamsState = URLSearchParamsModule.getState;
var NativeURL = global.URL;
var TypeError = global.TypeError;
var parseInt = global.parseInt;
var floor = Math.floor;
var pow = Math.pow;
var charAt = uncurryThis(''.charAt);
var exec = uncurryThis(/./.exec);
var join = uncurryThis([].join);
var numberToString = uncurryThis(1.0.toString);
var pop = uncurryThis([].pop);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var shift = uncurryThis([].shift);
var split = uncurryThis(''.split);
var stringSlice = uncurryThis(''.slice);
var toLowerCase = uncurryThis(''.toLowerCase);
var unshift = uncurryThis([].unshift);
var INVALID_AUTHORITY = 'Invalid authority';
var INVALID_SCHEME = 'Invalid scheme';
var INVALID_HOST = 'Invalid host';
var INVALID_PORT = 'Invalid port';
var ALPHA = /[a-z]/i;
var ALPHANUMERIC = /[\d+-.a-z]/i;
var DIGIT = /\d/;
var HEX_START = /^0x/i;
var OCT = /^[0-7]+$/;
var DEC = /^\d+$/;
var HEX = /^[\da-f]+$/i;
var FORBIDDEN_HOST_CODE_POINT = /[\0\t\n\r #%/:<>?@[\\\]^|]/;
var FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\0\t\n\r #/:<>?@[\\\]^|]/;
var LEADING_C0_CONTROL_OR_SPACE = /^[\u0000-\u0020]+/;
var TRAILING_C0_CONTROL_OR_SPACE = /(^|[^\u0000-\u0020])[\u0000-\u0020]+$/;
var TAB_AND_NEW_LINE = /[\t\n\r]/g;
var EOF;
var parseIPv4 = function (input) {
 var parts = split(input, '.');
 var partsLength, numbers, index, part, radix, number, ipv4;
 if (parts.length && parts[parts.length - 1] === '') {
  parts.length--;
 }
 partsLength = parts.length;
 if (partsLength > 4)
  return input;
 numbers = [];
 for (index = 0; index < partsLength; index++) {
  part = parts[index];
  if (part === '')
   return input;
  radix = 10;
  if (part.length > 1 && charAt(part, 0) === '0') {
   radix = exec(HEX_START, part) ? 16 : 8;
   part = stringSlice(part, radix === 8 ? 1 : 2);
  }
  if (part === '') {
   number = 0;
  } else {
   if (!exec(radix === 10 ? DEC : radix === 8 ? OCT : HEX, part))
    return input;
   number = parseInt(part, radix);
  }
  push(numbers, number);
 }
 for (index = 0; index < partsLength; index++) {
  number = numbers[index];
  if (index === partsLength - 1) {
   if (number >= pow(256, 5 - partsLength))
    return null;
  } else if (number > 255)
   return null;
 }
 ipv4 = pop(numbers);
 for (index = 0; index < numbers.length; index++) {
  ipv4 += numbers[index] * pow(256, 3 - index);
 }
 return ipv4;
};
var parseIPv6 = function (input) {
 var address = [
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
 ];
 var pieceIndex = 0;
 var compress = null;
 var pointer = 0;
 var value, length, numbersSeen, ipv4Piece, number, swaps, swap;
 var chr = function () {
  return charAt(input, pointer);
 };
 if (chr() === ':') {
  if (charAt(input, 1) !== ':')
   return;
  pointer += 2;
  pieceIndex++;
  compress = pieceIndex;
 }
 while (chr()) {
  if (pieceIndex === 8)
   return;
  if (chr() === ':') {
   if (compress !== null)
    return;
   pointer++;
   pieceIndex++;
   compress = pieceIndex;
   continue;
  }
  value = length = 0;
  while (length < 4 && exec(HEX, chr())) {
   value = value * 16 + parseInt(chr(), 16);
   pointer++;
   length++;
  }
  if (chr() === '.') {
   if (length === 0)
    return;
   pointer -= length;
   if (pieceIndex > 6)
    return;
   numbersSeen = 0;
   while (chr()) {
    ipv4Piece = null;
    if (numbersSeen > 0) {
     if (chr() === '.' && numbersSeen < 4)
      pointer++;
     else
      return;
    }
    if (!exec(DIGIT, chr()))
     return;
    while (exec(DIGIT, chr())) {
     number = parseInt(chr(), 10);
     if (ipv4Piece === null)
      ipv4Piece = number;
     else if (ipv4Piece === 0)
      return;
     else
      ipv4Piece = ipv4Piece * 10 + number;
     if (ipv4Piece > 255)
      return;
     pointer++;
    }
    address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;
    numbersSeen++;
    if (numbersSeen === 2 || numbersSeen === 4)
     pieceIndex++;
   }
   if (numbersSeen !== 4)
    return;
   break;
  } else if (chr() === ':') {
   pointer++;
   if (!chr())
    return;
  } else if (chr())
   return;
  address[pieceIndex++] = value;
 }
 if (compress !== null) {
  swaps = pieceIndex - compress;
  pieceIndex = 7;
  while (pieceIndex !== 0 && swaps > 0) {
   swap = address[pieceIndex];
   address[pieceIndex--] = address[compress + swaps - 1];
   address[compress + --swaps] = swap;
  }
 } else if (pieceIndex !== 8)
  return;
 return address;
};
var findLongestZeroSequence = function (ipv6) {
 var maxIndex = null;
 var maxLength = 1;
 var currStart = null;
 var currLength = 0;
 var index = 0;
 for (; index < 8; index++) {
  if (ipv6[index] !== 0) {
   if (currLength > maxLength) {
    maxIndex = currStart;
    maxLength = currLength;
   }
   currStart = null;
   currLength = 0;
  } else {
   if (currStart === null)
    currStart = index;
   ++currLength;
  }
 }
 if (currLength > maxLength) {
  maxIndex = currStart;
  maxLength = currLength;
 }
 return maxIndex;
};
var serializeHost = function (host) {
 var result, index, compress, ignore0;
 if (typeof host == 'number') {
  result = [];
  for (index = 0; index < 4; index++) {
   unshift(result, host % 256);
   host = floor(host / 256);
  }
  return join(result, '.');
 } else if (typeof host == 'object') {
  result = '';
  compress = findLongestZeroSequence(host);
  for (index = 0; index < 8; index++) {
   if (ignore0 && host[index] === 0)
    continue;
   if (ignore0)
    ignore0 = false;
   if (compress === index) {
    result += index ? ':' : '::';
    ignore0 = true;
   } else {
    result += numberToString(host[index], 16);
    if (index < 7)
     result += ':';
   }
  }
  return '[' + result + ']';
 }
 return host;
};
var C0ControlPercentEncodeSet = {};
var fragmentPercentEncodeSet = assign({}, C0ControlPercentEncodeSet, {
 ' ': 1,
 '"': 1,
 '<': 1,
 '>': 1,
 '`': 1
});
var pathPercentEncodeSet = assign({}, fragmentPercentEncodeSet, {
 '#': 1,
 '?': 1,
 '{': 1,
 '}': 1
});
var userinfoPercentEncodeSet = assign({}, pathPercentEncodeSet, {
 '/': 1,
 ':': 1,
 ';': 1,
 '=': 1,
 '@': 1,
 '[': 1,
 '\\': 1,
 ']': 1,
 '^': 1,
 '|': 1
});
var percentEncode = function (chr, set) {
 var code = codeAt(chr, 0);
 return code > 0x20 && code < 0x7F && !hasOwn(set, chr) ? chr : encodeURIComponent(chr);
};
var specialSchemes = {
 ftp: 21,
 file: null,
 http: 80,
 https: 443,
 ws: 80,
 wss: 443
};
var isWindowsDriveLetter = function (string, normalized) {
 var second;
 return string.length === 2 && exec(ALPHA, charAt(string, 0)) && ((second = charAt(string, 1)) === ':' || !normalized && second === '|');
};
var startsWithWindowsDriveLetter = function (string) {
 var third;
 return string.length > 1 && isWindowsDriveLetter(stringSlice(string, 0, 2)) && (string.length === 2 || ((third = charAt(string, 2)) === '/' || third === '\\' || third === '?' || third === '#'));
};
var isSingleDot = function (segment) {
 return segment === '.' || toLowerCase(segment) === '%2e';
};
var isDoubleDot = function (segment) {
 segment = toLowerCase(segment);
 return segment === '..' || segment === '%2e.' || segment === '.%2e' || segment === '%2e%2e';
};
var SCHEME_START = {};
var SCHEME = {};
var NO_SCHEME = {};
var SPECIAL_RELATIVE_OR_AUTHORITY = {};
var PATH_OR_AUTHORITY = {};
var RELATIVE = {};
var RELATIVE_SLASH = {};
var SPECIAL_AUTHORITY_SLASHES = {};
var SPECIAL_AUTHORITY_IGNORE_SLASHES = {};
var AUTHORITY = {};
var HOST = {};
var HOSTNAME = {};
var PORT = {};
var FILE = {};
var FILE_SLASH = {};
var FILE_HOST = {};
var PATH_START = {};
var PATH = {};
var CANNOT_BE_A_BASE_URL_PATH = {};
var QUERY = {};
var FRAGMENT = {};
var URLState = function (url, isBase, base) {
 var urlString = $toString(url);
 var baseState, failure, searchParams;
 if (isBase) {
  failure = this.parse(urlString);
  if (failure)
   throw new TypeError(failure);
  this.searchParams = null;
 } else {
  if (base !== undefined)
   baseState = new URLState(base, true);
  failure = this.parse(urlString, null, baseState);
  if (failure)
   throw new TypeError(failure);
  searchParams = getInternalSearchParamsState(new URLSearchParams());
  searchParams.bindURL(this);
  this.searchParams = searchParams;
 }
};
URLState.prototype = {
 type: 'URL',
 parse: function (input, stateOverride, base) {
  var url = this;
  var state = stateOverride || SCHEME_START;
  var pointer = 0;
  var buffer = '';
  var seenAt = false;
  var seenBracket = false;
  var seenPasswordToken = false;
  var codePoints, chr, bufferCodePoints, failure;
  input = $toString(input);
  if (!stateOverride) {
   url.scheme = '';
   url.username = '';
   url.password = '';
   url.host = null;
   url.port = null;
   url.path = [];
   url.query = null;
   url.fragment = null;
   url.cannotBeABaseURL = false;
   input = replace(input, LEADING_C0_CONTROL_OR_SPACE, '');
   input = replace(input, TRAILING_C0_CONTROL_OR_SPACE, '$1');
  }
  input = replace(input, TAB_AND_NEW_LINE, '');
  codePoints = arrayFrom(input);
  while (pointer <= codePoints.length) {
   chr = codePoints[pointer];
   switch (state) {
   case SCHEME_START:
    if (chr && exec(ALPHA, chr)) {
     buffer += toLowerCase(chr);
     state = SCHEME;
    } else if (!stateOverride) {
     state = NO_SCHEME;
     continue;
    } else
     return INVALID_SCHEME;
    break;
   case SCHEME:
    if (chr && (exec(ALPHANUMERIC, chr) || chr === '+' || chr === '-' || chr === '.')) {
     buffer += toLowerCase(chr);
    } else if (chr === ':') {
     if (stateOverride && (url.isSpecial() !== hasOwn(specialSchemes, buffer) || buffer === 'file' && (url.includesCredentials() || url.port !== null) || url.scheme === 'file' && !url.host))
      return;
     url.scheme = buffer;
     if (stateOverride) {
      if (url.isSpecial() && specialSchemes[url.scheme] === url.port)
       url.port = null;
      return;
     }
     buffer = '';
     if (url.scheme === 'file') {
      state = FILE;
     } else if (url.isSpecial() && base && base.scheme === url.scheme) {
      state = SPECIAL_RELATIVE_OR_AUTHORITY;
     } else if (url.isSpecial()) {
      state = SPECIAL_AUTHORITY_SLASHES;
     } else if (codePoints[pointer + 1] === '/') {
      state = PATH_OR_AUTHORITY;
      pointer++;
     } else {
      url.cannotBeABaseURL = true;
      push(url.path, '');
      state = CANNOT_BE_A_BASE_URL_PATH;
     }
    } else if (!stateOverride) {
     buffer = '';
     state = NO_SCHEME;
     pointer = 0;
     continue;
    } else
     return INVALID_SCHEME;
    break;
   case NO_SCHEME:
    if (!base || base.cannotBeABaseURL && chr !== '#')
     return INVALID_SCHEME;
    if (base.cannotBeABaseURL && chr === '#') {
     url.scheme = base.scheme;
     url.path = arraySlice(base.path);
     url.query = base.query;
     url.fragment = '';
     url.cannotBeABaseURL = true;
     state = FRAGMENT;
     break;
    }
    state = base.scheme === 'file' ? FILE : RELATIVE;
    continue;
   case SPECIAL_RELATIVE_OR_AUTHORITY:
    if (chr === '/' && codePoints[pointer + 1] === '/') {
     state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
     pointer++;
    } else {
     state = RELATIVE;
     continue;
    }
    break;
   case PATH_OR_AUTHORITY:
    if (chr === '/') {
     state = AUTHORITY;
     break;
    } else {
     state = PATH;
     continue;
    }
   case RELATIVE:
    url.scheme = base.scheme;
    if (chr === EOF) {
     url.username = base.username;
     url.password = base.password;
     url.host = base.host;
     url.port = base.port;
     url.path = arraySlice(base.path);
     url.query = base.query;
    } else if (chr === '/' || chr === '\\' && url.isSpecial()) {
     state = RELATIVE_SLASH;
    } else if (chr === '?') {
     url.username = base.username;
     url.password = base.password;
     url.host = base.host;
     url.port = base.port;
     url.path = arraySlice(base.path);
     url.query = '';
     state = QUERY;
    } else if (chr === '#') {
     url.username = base.username;
     url.password = base.password;
     url.host = base.host;
     url.port = base.port;
     url.path = arraySlice(base.path);
     url.query = base.query;
     url.fragment = '';
     state = FRAGMENT;
    } else {
     url.username = base.username;
     url.password = base.password;
     url.host = base.host;
     url.port = base.port;
     url.path = arraySlice(base.path);
     url.path.length--;
     state = PATH;
     continue;
    }
    break;
   case RELATIVE_SLASH:
    if (url.isSpecial() && (chr === '/' || chr === '\\')) {
     state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
    } else if (chr === '/') {
     state = AUTHORITY;
    } else {
     url.username = base.username;
     url.password = base.password;
     url.host = base.host;
     url.port = base.port;
     state = PATH;
     continue;
    }
    break;
   case SPECIAL_AUTHORITY_SLASHES:
    state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
    if (chr !== '/' || charAt(buffer, pointer + 1) !== '/')
     continue;
    pointer++;
    break;
   case SPECIAL_AUTHORITY_IGNORE_SLASHES:
    if (chr !== '/' && chr !== '\\') {
     state = AUTHORITY;
     continue;
    }
    break;
   case AUTHORITY:
    if (chr === '@') {
     if (seenAt)
      buffer = '%40' + buffer;
     seenAt = true;
     bufferCodePoints = arrayFrom(buffer);
     for (var i = 0; i < bufferCodePoints.length; i++) {
      var codePoint = bufferCodePoints[i];
      if (codePoint === ':' && !seenPasswordToken) {
       seenPasswordToken = true;
       continue;
      }
      var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);
      if (seenPasswordToken)
       url.password += encodedCodePoints;
      else
       url.username += encodedCodePoints;
     }
     buffer = '';
    } else if (chr === EOF || chr === '/' || chr === '?' || chr === '#' || chr === '\\' && url.isSpecial()) {
     if (seenAt && buffer === '')
      return INVALID_AUTHORITY;
     pointer -= arrayFrom(buffer).length + 1;
     buffer = '';
     state = HOST;
    } else
     buffer += chr;
    break;
   case HOST:
   case HOSTNAME:
    if (stateOverride && url.scheme === 'file') {
     state = FILE_HOST;
     continue;
    } else if (chr === ':' && !seenBracket) {
     if (buffer === '')
      return INVALID_HOST;
     failure = url.parseHost(buffer);
     if (failure)
      return failure;
     buffer = '';
     state = PORT;
     if (stateOverride === HOSTNAME)
      return;
    } else if (chr === EOF || chr === '/' || chr === '?' || chr === '#' || chr === '\\' && url.isSpecial()) {
     if (url.isSpecial() && buffer === '')
      return INVALID_HOST;
     if (stateOverride && buffer === '' && (url.includesCredentials() || url.port !== null))
      return;
     failure = url.parseHost(buffer);
     if (failure)
      return failure;
     buffer = '';
     state = PATH_START;
     if (stateOverride)
      return;
     continue;
    } else {
     if (chr === '[')
      seenBracket = true;
     else if (chr === ']')
      seenBracket = false;
     buffer += chr;
    }
    break;
   case PORT:
    if (exec(DIGIT, chr)) {
     buffer += chr;
    } else if (chr === EOF || chr === '/' || chr === '?' || chr === '#' || chr === '\\' && url.isSpecial() || stateOverride) {
     if (buffer !== '') {
      var port = parseInt(buffer, 10);
      if (port > 0xFFFF)
       return INVALID_PORT;
      url.port = url.isSpecial() && port === specialSchemes[url.scheme] ? null : port;
      buffer = '';
     }
     if (stateOverride)
      return;
     state = PATH_START;
     continue;
    } else
     return INVALID_PORT;
    break;
   case FILE:
    url.scheme = 'file';
    if (chr === '/' || chr === '\\')
     state = FILE_SLASH;
    else if (base && base.scheme === 'file') {
     switch (chr) {
     case EOF:
      url.host = base.host;
      url.path = arraySlice(base.path);
      url.query = base.query;
      break;
     case '?':
      url.host = base.host;
      url.path = arraySlice(base.path);
      url.query = '';
      state = QUERY;
      break;
     case '#':
      url.host = base.host;
      url.path = arraySlice(base.path);
      url.query = base.query;
      url.fragment = '';
      state = FRAGMENT;
      break;
     default:
      if (!startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {
       url.host = base.host;
       url.path = arraySlice(base.path);
       url.shortenPath();
      }
      state = PATH;
      continue;
     }
    } else {
     state = PATH;
     continue;
    }
    break;
   case FILE_SLASH:
    if (chr === '/' || chr === '\\') {
     state = FILE_HOST;
     break;
    }
    if (base && base.scheme === 'file' && !startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {
     if (isWindowsDriveLetter(base.path[0], true))
      push(url.path, base.path[0]);
     else
      url.host = base.host;
    }
    state = PATH;
    continue;
   case FILE_HOST:
    if (chr === EOF || chr === '/' || chr === '\\' || chr === '?' || chr === '#') {
     if (!stateOverride && isWindowsDriveLetter(buffer)) {
      state = PATH;
     } else if (buffer === '') {
      url.host = '';
      if (stateOverride)
       return;
      state = PATH_START;
     } else {
      failure = url.parseHost(buffer);
      if (failure)
       return failure;
      if (url.host === 'localhost')
       url.host = '';
      if (stateOverride)
       return;
      buffer = '';
      state = PATH_START;
     }
     continue;
    } else
     buffer += chr;
    break;
   case PATH_START:
    if (url.isSpecial()) {
     state = PATH;
     if (chr !== '/' && chr !== '\\')
      continue;
    } else if (!stateOverride && chr === '?') {
     url.query = '';
     state = QUERY;
    } else if (!stateOverride && chr === '#') {
     url.fragment = '';
     state = FRAGMENT;
    } else if (chr !== EOF) {
     state = PATH;
     if (chr !== '/')
      continue;
    }
    break;
   case PATH:
    if (chr === EOF || chr === '/' || chr === '\\' && url.isSpecial() || !stateOverride && (chr === '?' || chr === '#')) {
     if (isDoubleDot(buffer)) {
      url.shortenPath();
      if (chr !== '/' && !(chr === '\\' && url.isSpecial())) {
       push(url.path, '');
      }
     } else if (isSingleDot(buffer)) {
      if (chr !== '/' && !(chr === '\\' && url.isSpecial())) {
       push(url.path, '');
      }
     } else {
      if (url.scheme === 'file' && !url.path.length && isWindowsDriveLetter(buffer)) {
       if (url.host)
        url.host = '';
       buffer = charAt(buffer, 0) + ':';
      }
      push(url.path, buffer);
     }
     buffer = '';
     if (url.scheme === 'file' && (chr === EOF || chr === '?' || chr === '#')) {
      while (url.path.length > 1 && url.path[0] === '') {
       shift(url.path);
      }
     }
     if (chr === '?') {
      url.query = '';
      state = QUERY;
     } else if (chr === '#') {
      url.fragment = '';
      state = FRAGMENT;
     }
    } else {
     buffer += percentEncode(chr, pathPercentEncodeSet);
    }
    break;
   case CANNOT_BE_A_BASE_URL_PATH:
    if (chr === '?') {
     url.query = '';
     state = QUERY;
    } else if (chr === '#') {
     url.fragment = '';
     state = FRAGMENT;
    } else if (chr !== EOF) {
     url.path[0] += percentEncode(chr, C0ControlPercentEncodeSet);
    }
    break;
   case QUERY:
    if (!stateOverride && chr === '#') {
     url.fragment = '';
     state = FRAGMENT;
    } else if (chr !== EOF) {
     if (chr === "'" && url.isSpecial())
      url.query += '%27';
     else if (chr === '#')
      url.query += '%23';
     else
      url.query += percentEncode(chr, C0ControlPercentEncodeSet);
    }
    break;
   case FRAGMENT:
    if (chr !== EOF)
     url.fragment += percentEncode(chr, fragmentPercentEncodeSet);
    break;
   }
   pointer++;
  }
 },
 parseHost: function (input) {
  var result, codePoints, index;
  if (charAt(input, 0) === '[') {
   if (charAt(input, input.length - 1) !== ']')
    return INVALID_HOST;
   result = parseIPv6(stringSlice(input, 1, -1));
   if (!result)
    return INVALID_HOST;
   this.host = result;
  } else if (!this.isSpecial()) {
   if (exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT, input))
    return INVALID_HOST;
   result = '';
   codePoints = arrayFrom(input);
   for (index = 0; index < codePoints.length; index++) {
    result += percentEncode(codePoints[index], C0ControlPercentEncodeSet);
   }
   this.host = result;
  } else {
   input = toASCII(input);
   if (exec(FORBIDDEN_HOST_CODE_POINT, input))
    return INVALID_HOST;
   result = parseIPv4(input);
   if (result === null)
    return INVALID_HOST;
   this.host = result;
  }
 },
 cannotHaveUsernamePasswordPort: function () {
  return !this.host || this.cannotBeABaseURL || this.scheme === 'file';
 },
 includesCredentials: function () {
  return this.username !== '' || this.password !== '';
 },
 isSpecial: function () {
  return hasOwn(specialSchemes, this.scheme);
 },
 shortenPath: function () {
  var path = this.path;
  var pathSize = path.length;
  if (pathSize && (this.scheme !== 'file' || pathSize !== 1 || !isWindowsDriveLetter(path[0], true))) {
   path.length--;
  }
 },
 serialize: function () {
  var url = this;
  var scheme = url.scheme;
  var username = url.username;
  var password = url.password;
  var host = url.host;
  var port = url.port;
  var path = url.path;
  var query = url.query;
  var fragment = url.fragment;
  var output = scheme + ':';
  if (host !== null) {
   output += '//';
   if (url.includesCredentials()) {
    output += username + (password ? ':' + password : '') + '@';
   }
   output += serializeHost(host);
   if (port !== null)
    output += ':' + port;
  } else if (scheme === 'file')
   output += '//';
  output += url.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';
  if (query !== null)
   output += '?' + query;
  if (fragment !== null)
   output += '#' + fragment;
  return output;
 },
 setHref: function (href) {
  var failure = this.parse(href);
  if (failure)
   throw new TypeError(failure);
  this.searchParams.update();
 },
 getOrigin: function () {
  var scheme = this.scheme;
  var port = this.port;
  if (scheme === 'blob')
   try {
    return new URLConstructor(scheme.path[0]).origin;
   } catch (error) {
    return 'null';
   }
  if (scheme === 'file' || !this.isSpecial())
   return 'null';
  return scheme + '://' + serializeHost(this.host) + (port !== null ? ':' + port : '');
 },
 getProtocol: function () {
  return this.scheme + ':';
 },
 setProtocol: function (protocol) {
  this.parse($toString(protocol) + ':', SCHEME_START);
 },
 getUsername: function () {
  return this.username;
 },
 setUsername: function (username) {
  var codePoints = arrayFrom($toString(username));
  if (this.cannotHaveUsernamePasswordPort())
   return;
  this.username = '';
  for (var i = 0; i < codePoints.length; i++) {
   this.username += percentEncode(codePoints[i], userinfoPercentEncodeSet);
  }
 },
 getPassword: function () {
  return this.password;
 },
 setPassword: function (password) {
  var codePoints = arrayFrom($toString(password));
  if (this.cannotHaveUsernamePasswordPort())
   return;
  this.password = '';
  for (var i = 0; i < codePoints.length; i++) {
   this.password += percentEncode(codePoints[i], userinfoPercentEncodeSet);
  }
 },
 getHost: function () {
  var host = this.host;
  var port = this.port;
  return host === null ? '' : port === null ? serializeHost(host) : serializeHost(host) + ':' + port;
 },
 setHost: function (host) {
  if (this.cannotBeABaseURL)
   return;
  this.parse(host, HOST);
 },
 getHostname: function () {
  var host = this.host;
  return host === null ? '' : serializeHost(host);
 },
 setHostname: function (hostname) {
  if (this.cannotBeABaseURL)
   return;
  this.parse(hostname, HOSTNAME);
 },
 getPort: function () {
  var port = this.port;
  return port === null ? '' : $toString(port);
 },
 setPort: function (port) {
  if (this.cannotHaveUsernamePasswordPort())
   return;
  port = $toString(port);
  if (port === '')
   this.port = null;
  else
   this.parse(port, PORT);
 },
 getPathname: function () {
  var path = this.path;
  return this.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';
 },
 setPathname: function (pathname) {
  if (this.cannotBeABaseURL)
   return;
  this.path = [];
  this.parse(pathname, PATH_START);
 },
 getSearch: function () {
  var query = this.query;
  return query ? '?' + query : '';
 },
 setSearch: function (search) {
  search = $toString(search);
  if (search === '') {
   this.query = null;
  } else {
   if (charAt(search, 0) === '?')
    search = stringSlice(search, 1);
   this.query = '';
   this.parse(search, QUERY);
  }
  this.searchParams.update();
 },
 getSearchParams: function () {
  return this.searchParams.facade;
 },
 getHash: function () {
  var fragment = this.fragment;
  return fragment ? '#' + fragment : '';
 },
 setHash: function (hash) {
  hash = $toString(hash);
  if (hash === '') {
   this.fragment = null;
   return;
  }
  if (charAt(hash, 0) === '#')
   hash = stringSlice(hash, 1);
  this.fragment = '';
  this.parse(hash, FRAGMENT);
 },
 update: function () {
  this.query = this.searchParams.serialize() || null;
 }
};
var URLConstructor = function URL(url) {
 var that = anInstance(this, URLPrototype);
 var base = validateArgumentsLength(arguments.length, 1) > 1 ? arguments[1] : undefined;
 var state = setInternalState(that, new URLState(url, false, base));
 if (!DESCRIPTORS) {
  that.href = state.serialize();
  that.origin = state.getOrigin();
  that.protocol = state.getProtocol();
  that.username = state.getUsername();
  that.password = state.getPassword();
  that.host = state.getHost();
  that.hostname = state.getHostname();
  that.port = state.getPort();
  that.pathname = state.getPathname();
  that.search = state.getSearch();
  that.searchParams = state.getSearchParams();
  that.hash = state.getHash();
 }
};
var URLPrototype = URLConstructor.prototype;
var accessorDescriptor = function (getter, setter) {
 return {
  get: function () {
   return getInternalURLState(this)[getter]();
  },
  set: setter && function (value) {
   return getInternalURLState(this)[setter](value);
  },
  configurable: true,
  enumerable: true
 };
};
if (DESCRIPTORS) {
 defineBuiltInAccessor(URLPrototype, 'href', accessorDescriptor('serialize', 'setHref'));
 defineBuiltInAccessor(URLPrototype, 'origin', accessorDescriptor('getOrigin'));
 defineBuiltInAccessor(URLPrototype, 'protocol', accessorDescriptor('getProtocol', 'setProtocol'));
 defineBuiltInAccessor(URLPrototype, 'username', accessorDescriptor('getUsername', 'setUsername'));
 defineBuiltInAccessor(URLPrototype, 'password', accessorDescriptor('getPassword', 'setPassword'));
 defineBuiltInAccessor(URLPrototype, 'host', accessorDescriptor('getHost', 'setHost'));
 defineBuiltInAccessor(URLPrototype, 'hostname', accessorDescriptor('getHostname', 'setHostname'));
 defineBuiltInAccessor(URLPrototype, 'port', accessorDescriptor('getPort', 'setPort'));
 defineBuiltInAccessor(URLPrototype, 'pathname', accessorDescriptor('getPathname', 'setPathname'));
 defineBuiltInAccessor(URLPrototype, 'search', accessorDescriptor('getSearch', 'setSearch'));
 defineBuiltInAccessor(URLPrototype, 'searchParams', accessorDescriptor('getSearchParams'));
 defineBuiltInAccessor(URLPrototype, 'hash', accessorDescriptor('getHash', 'setHash'));
}
defineBuiltIn(URLPrototype, 'toJSON', function toJSON() {
 return getInternalURLState(this).serialize();
}, { enumerable: true });
defineBuiltIn(URLPrototype, 'toString', function toString() {
 return getInternalURLState(this).serialize();
}, { enumerable: true });
if (NativeURL) {
 var nativeCreateObjectURL = NativeURL.createObjectURL;
 var nativeRevokeObjectURL = NativeURL.revokeObjectURL;
 if (nativeCreateObjectURL)
  defineBuiltIn(URLConstructor, 'createObjectURL', bind(nativeCreateObjectURL, NativeURL));
 if (nativeRevokeObjectURL)
  defineBuiltIn(URLConstructor, 'revokeObjectURL', bind(nativeRevokeObjectURL, NativeURL));
}
setToStringTag(URLConstructor, 'URL');
$({
 global: true,
 constructor: true,
 forced: !USE_NATIVE_URL,
 sham: !DESCRIPTORS
}, { URL: URLConstructor });

/***/ }),

/***/ 7529:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(9258);

/***/ })

/******/ });
/************************************************************************/
/******/ // The module cache
/******/ var __webpack_module_cache__ = {};
/******/ 
/******/ // The require function
/******/ function __webpack_require__(moduleId) {
/******/ 	// Check if module is in cache
/******/ 	var cachedModule = __webpack_module_cache__[moduleId];
/******/ 	if (cachedModule !== undefined) {
/******/ 		return cachedModule.exports;
/******/ 	}
/******/ 	// Create a new module (and put it into the cache)
/******/ 	var module = __webpack_module_cache__[moduleId] = {
/******/ 		// no module.id needed
/******/ 		// no module.loaded needed
/******/ 		exports: {}
/******/ 	};
/******/ 
/******/ 	// Execute the module function
/******/ 	__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 
/******/ 	// Return the exports of the module
/******/ 	return module.exports;
/******/ }
/******/ 
/************************************************************************/
/******/ /* webpack/runtime/define property getters */
/******/ (() => {
/******/ 	// define getter functions for harmony exports
/******/ 	__webpack_require__.d = (exports, definition) => {
/******/ 		for(var key in definition) {
/******/ 			if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 				Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 			}
/******/ 		}
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/hasOwnProperty shorthand */
/******/ (() => {
/******/ 	__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ })();
/******/ 
/************************************************************************/
var __webpack_exports__ = globalThis.pdfjsWorker = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  WorkerMessageHandler: () => (/* reexport */ WorkerMessageHandler)
});

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js
var es_array_iterator = __webpack_require__(6180);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
var es_object_to_string = __webpack_require__(895);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.js
var es_promise = __webpack_require__(5666);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.all-settled.js
var es_promise_all_settled = __webpack_require__(4060);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js
var es_string_iterator = __webpack_require__(1747);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js
var web_dom_collections_iterator = __webpack_require__(2374);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js
var es_array_map = __webpack_require__(5136);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.map.js
var esnext_iterator_map = __webpack_require__(7944);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js
var es_array_filter = __webpack_require__(1585);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.constructor.js
var esnext_iterator_constructor = __webpack_require__(7121);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.filter.js
var esnext_iterator_filter = __webpack_require__(2993);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.error.cause.js
var es_error_cause = __webpack_require__(3352);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint8-array.js
var es_typed_array_uint8_array = __webpack_require__(4699);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.at.js
var es_typed_array_at = __webpack_require__(739);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.copy-within.js
var es_typed_array_copy_within = __webpack_require__(4816);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.every.js
var es_typed_array_every = __webpack_require__(6923);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.fill.js
var es_typed_array_fill = __webpack_require__(6775);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.filter.js
var es_typed_array_filter = __webpack_require__(6474);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find.js
var es_typed_array_find = __webpack_require__(6450);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-index.js
var es_typed_array_find_index = __webpack_require__(1665);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-last.js
var es_typed_array_find_last = __webpack_require__(8837);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-last-index.js
var es_typed_array_find_last_index = __webpack_require__(9803);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.for-each.js
var es_typed_array_for_each = __webpack_require__(1293);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.includes.js
var es_typed_array_includes = __webpack_require__(1051);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.index-of.js
var es_typed_array_index_of = __webpack_require__(8260);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.iterator.js
var es_typed_array_iterator = __webpack_require__(5746);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.join.js
var es_typed_array_join = __webpack_require__(202);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.last-index-of.js
var es_typed_array_last_index_of = __webpack_require__(2138);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.map.js
var es_typed_array_map = __webpack_require__(368);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce.js
var es_typed_array_reduce = __webpack_require__(9782);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce-right.js
var es_typed_array_reduce_right = __webpack_require__(917);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reverse.js
var es_typed_array_reverse = __webpack_require__(3650);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.set.js
var es_typed_array_set = __webpack_require__(8347);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.slice.js
var es_typed_array_slice = __webpack_require__(7192);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.some.js
var es_typed_array_some = __webpack_require__(354);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.sort.js
var es_typed_array_sort = __webpack_require__(9080);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-locale-string.js
var es_typed_array_to_locale_string = __webpack_require__(7238);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-reversed.js
var es_typed_array_to_reversed = __webpack_require__(7995);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-sorted.js
var es_typed_array_to_sorted = __webpack_require__(62);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-string.js
var es_typed_array_to_string = __webpack_require__(6635);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.with.js
var es_typed_array_with = __webpack_require__(4602);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.array-buffer.detached.js
var esnext_array_buffer_detached = __webpack_require__(344);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.array-buffer.transfer.js
var esnext_array_buffer_transfer = __webpack_require__(4305);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.array-buffer.transfer-to-fixed-length.js
var esnext_array_buffer_transfer_to_fixed_length = __webpack_require__(7583);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.js
var es_set = __webpack_require__(2048);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.difference.v2.js
var esnext_set_difference_v2 = __webpack_require__(5561);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.intersection.v2.js
var esnext_set_intersection_v2 = __webpack_require__(8587);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.is-disjoint-from.v2.js
var esnext_set_is_disjoint_from_v2 = __webpack_require__(3247);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.is-subset-of.v2.js
var esnext_set_is_subset_of_v2 = __webpack_require__(3302);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.is-superset-of.v2.js
var esnext_set_is_superset_of_v2 = __webpack_require__(9490);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.symmetric-difference.v2.js
var esnext_set_symmetric_difference_v2 = __webpack_require__(5438);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.union.v2.js
var esnext_set_union_v2 = __webpack_require__(7914);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.push.js
var es_array_push = __webpack_require__(4226);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.to-string.js
var es_regexp_to_string = __webpack_require__(924);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.finally.js
var es_promise_finally = __webpack_require__(4750);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.flat.js
var es_array_flat = __webpack_require__(4622);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.unscopables.flat.js
var es_array_unscopables_flat = __webpack_require__(3295);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.some.js
var esnext_iterator_some = __webpack_require__(8518);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.for-each.js
var esnext_iterator_for_each = __webpack_require__(6770);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js
var web_dom_collections_for_each = __webpack_require__(1378);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js
var es_array_concat = __webpack_require__(7874);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.self.js
var web_self = __webpack_require__(5057);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.to-primitive.js
var es_symbol_to_primitive = __webpack_require__(5598);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.date.to-primitive.js
var es_date_to_primitive = __webpack_require__(8806);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.js
var es_symbol = __webpack_require__(9366);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.description.js
var es_symbol_description = __webpack_require__(6678);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.number.constructor.js
var es_number_constructor = __webpack_require__(5897);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.iterator.js
var es_symbol_iterator = __webpack_require__(2926);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js
var es_array_slice = __webpack_require__(171);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.from.js
var es_array_from = __webpack_require__(9593);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js
var es_regexp_exec = __webpack_require__(7942);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.test.js
var es_regexp_test = __webpack_require__(5776);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.async-iterator.js
var es_symbol_async_iterator = __webpack_require__(1133);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.to-string-tag.js
var es_symbol_to_string_tag = __webpack_require__(2173);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.json.to-string-tag.js
var es_json_to_string_tag = __webpack_require__(2630);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.to-string-tag.js
var es_math_to_string_tag = __webpack_require__(1024);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-prototype-of.js
var es_object_get_prototype_of = __webpack_require__(13);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.global-this.js
var es_global_this = __webpack_require__(1210);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.starts-with.js
var es_string_starts_with = __webpack_require__(6421);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.match.js
var es_string_match = __webpack_require__(469);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.js
var web_url = __webpack_require__(7529);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.js
var web_url_search_params = __webpack_require__(3757);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.delete.js
var web_url_search_params_delete = __webpack_require__(3655);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.has.js
var web_url_search_params_has = __webpack_require__(2555);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.size.js
var web_url_search_params_size = __webpack_require__(2202);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js
var es_object_keys = __webpack_require__(4668);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint32-array.js
var es_typed_array_uint32_array = __webpack_require__(4624);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js
var es_array_includes = __webpack_require__(2796);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.includes.js
var es_string_includes = __webpack_require__(2613);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.pad-start.js
var es_string_pad_start = __webpack_require__(7230);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js
var es_string_replace = __webpack_require__(4711);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace-all.js
var es_string_replace_all = __webpack_require__(7600);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.map.js
var es_map = __webpack_require__(5548);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.weak-map.js
var es_weak_map = __webpack_require__(3766);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.reflect.to-string-tag.js
var es_reflect_to_string_tag = __webpack_require__(9175);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.reflect.construct.js
var es_reflect_construct = __webpack_require__(6128);
;// CONCATENATED MODULE: ./src/shared/util.js
function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}var isNodeJS=(typeof process==="undefined"?"undefined":_typeof(process))==="object"&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");var IDENTITY_MATRIX=[1,0,0,1,0,0];var FONT_IDENTITY_MATRIX=[0.001,0,0,0.001,0,0];var MAX_IMAGE_SIZE_TO_CACHE=10e6;var LINE_FACTOR=1.35;var LINE_DESCENT_FACTOR=0.35;var BASELINE_FACTOR=LINE_DESCENT_FACTOR/LINE_FACTOR;var RenderingIntentFlag={ANY:0x01,DISPLAY:0x02,PRINT:0x04,SAVE:0x08,ANNOTATIONS_FORMS:0x10,ANNOTATIONS_STORAGE:0x20,ANNOTATIONS_DISABLE:0x40,OPLIST:0x100};var AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};var AnnotationEditorPrefix="pdfjs_internal_editor_";var AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15};var AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};var PermissionFlag={PRINT:0x04,MODIFY_CONTENTS:0x08,COPY:0x10,MODIFY_ANNOTATIONS:0x20,FILL_INTERACTIVE_FORMS:0x100,COPY_FOR_ACCESSIBILITY:0x200,ASSEMBLE:0x400,PRINT_HIGH_QUALITY:0x800};var TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};var ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};var AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var AnnotationReplyType={GROUP:"Group",REPLY:"R"};var AnnotationFlag={INVISIBLE:0x01,HIDDEN:0x02,PRINT:0x04,NOZOOM:0x08,NOROTATE:0x10,NOVIEW:0x20,READONLY:0x40,LOCKED:0x80,TOGGLENOVIEW:0x100,LOCKEDCONTENTS:0x200};var AnnotationFieldFlag={READONLY:0x0000001,REQUIRED:0x0000002,NOEXPORT:0x0000004,MULTILINE:0x0001000,PASSWORD:0x0002000,NOTOGGLETOOFF:0x0004000,RADIO:0x0008000,PUSHBUTTON:0x0010000,COMBO:0x0020000,EDIT:0x0040000,SORT:0x0080000,FILESELECT:0x0100000,MULTISELECT:0x0200000,DONOTSPELLCHECK:0x0400000,DONOTSCROLL:0x0800000,COMB:0x1000000,RICHTEXT:0x2000000,RADIOSINUNISON:0x2000000,COMMITONSELCHANGE:0x4000000};var AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};var DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};var PageActionEventType={O:"PageOpen",C:"PageClose"};var VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};var CMapCompressionType={NONE:0,BINARY:1};var OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};var PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){if(Number.isInteger(level)){verbosity=level;}}function getVerbosityLevel(){return verbosity;}function info(msg){if(verbosity>=VerbosityLevel.INFOS){if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){console.log("Info: ".concat(msg));}else if(Window&&globalThis.ngxConsole){globalThis.ngxConsole.log("Info: ".concat(msg));}else{console.log("Info: ".concat(msg));}}}function warn(msg){if(verbosity>=VerbosityLevel.WARNINGS){if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){console.log("Warning: ".concat(msg));}else if(Window&&globalThis.ngxConsole){globalThis.ngxConsole.log("Warning: ".concat(msg));}else{console.log("Warning: ".concat(msg));}}}function unreachable(msg){throw new Error(msg);}function assert(cond,msg){if(!cond){unreachable(msg);}}function _isValidProtocol(url){switch(url===null||url===void 0?void 0:url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":case"capacitor":return true;default:return false;}}function createValidAbsoluteUrl(url){var baseUrl=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!url){return null;}try{if(options&&typeof url==="string"){if(options.addDefaultProtocol&&url.startsWith("www.")){var dots=url.match(/\./g);if((dots===null||dots===void 0?void 0:dots.length)>=2){url="http://".concat(url);}}if(options.tryConvertEncoding){try{url=stringToUTF8String(url);}catch(_unused){}}}var absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(_isValidProtocol(absoluteUrl)){return absoluteUrl;}}catch(_unused2){}return null;}function shadow(obj,prop,value){var nonSerializable=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;Object.defineProperty(obj,prop,{value:value,enumerable:!nonSerializable,configurable:true,writable:false});return value;}var BaseException=function BaseExceptionClosure(){function BaseException(message,name){if(this.constructor===BaseException){unreachable("Cannot initialize BaseException.");}this.message=message;this.name=name;}BaseException.prototype=new Error();BaseException.constructor=BaseException;return BaseException;}();var PasswordException=/*#__PURE__*/function(_BaseException){_inherits(PasswordException,_BaseException);var _super=_createSuper(PasswordException);function PasswordException(msg,code){var _this;_classCallCheck(this,PasswordException);_this=_super.call(this,msg,"PasswordException");_this.code=code;return _this;}return _createClass(PasswordException);}(BaseException);var UnknownErrorException=/*#__PURE__*/function(_BaseException2){_inherits(UnknownErrorException,_BaseException2);var _super2=_createSuper(UnknownErrorException);function UnknownErrorException(msg,details){var _this2;_classCallCheck(this,UnknownErrorException);_this2=_super2.call(this,msg,"UnknownErrorException");_this2.details=details;return _this2;}return _createClass(UnknownErrorException);}(BaseException);var InvalidPDFException=/*#__PURE__*/function(_BaseException3){_inherits(InvalidPDFException,_BaseException3);var _super3=_createSuper(InvalidPDFException);function InvalidPDFException(msg){_classCallCheck(this,InvalidPDFException);return _super3.call(this,msg,"InvalidPDFException");}return _createClass(InvalidPDFException);}(BaseException);var MissingPDFException=/*#__PURE__*/function(_BaseException4){_inherits(MissingPDFException,_BaseException4);var _super4=_createSuper(MissingPDFException);function MissingPDFException(msg){_classCallCheck(this,MissingPDFException);return _super4.call(this,msg,"MissingPDFException");}return _createClass(MissingPDFException);}(BaseException);var UnexpectedResponseException=/*#__PURE__*/function(_BaseException5){_inherits(UnexpectedResponseException,_BaseException5);var _super5=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(msg,status){var _this3;_classCallCheck(this,UnexpectedResponseException);_this3=_super5.call(this,msg,"UnexpectedResponseException");_this3.status=status;return _this3;}return _createClass(UnexpectedResponseException);}(BaseException);var FormatError=/*#__PURE__*/function(_BaseException6){_inherits(FormatError,_BaseException6);var _super6=_createSuper(FormatError);function FormatError(msg){_classCallCheck(this,FormatError);return _super6.call(this,msg,"FormatError");}return _createClass(FormatError);}(BaseException);var AbortException=/*#__PURE__*/function(_BaseException7){_inherits(AbortException,_BaseException7);var _super7=_createSuper(AbortException);function AbortException(msg){_classCallCheck(this,AbortException);return _super7.call(this,msg,"AbortException");}return _createClass(AbortException);}(BaseException);function bytesToString(bytes){if(_typeof(bytes)!=="object"||(bytes===null||bytes===void 0?void 0:bytes.length)===undefined){unreachable("Invalid argument for bytesToString");}var length=bytes.length;var MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT){return String.fromCharCode.apply(null,bytes);}var strBuf=[];for(var i=0;i<length;i+=MAX_ARGUMENT_COUNT){var chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length);var chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk));}return strBuf.join("");}function stringToBytes(str){if(typeof str!=="string"){unreachable("Invalid argument for stringToBytes");}var length=str.length;var bytes=new Uint8Array(length);for(var i=0;i<length;++i){bytes[i]=str.charCodeAt(i)&0xff;}return bytes;}function string32(value){return String.fromCharCode(value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff);}function objectSize(obj){return Object.keys(obj).length;}function objectFromMap(map){var obj=Object.create(null);var _iterator=_createForOfIteratorHelper(map),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];obj[key]=value;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return obj;}function isLittleEndian(){var buffer8=new Uint8Array(4);buffer8[0]=1;var view32=new Uint32Array(buffer8.buffer,0,1);return view32[0]===1;}function isEvalSupported(){try{new Function("");return true;}catch(_unused3){return false;}}var FeatureTest=/*#__PURE__*/function(){function FeatureTest(){_classCallCheck(this,FeatureTest);}_createClass(FeatureTest,null,[{key:"isLittleEndian",get:function get(){return shadow(this,"isLittleEndian",isLittleEndian());}},{key:"isEvalSupported",get:function get(){return shadow(this,"isEvalSupported",isEvalSupported());}},{key:"isOffscreenCanvasSupported",get:function get(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!=="undefined");}},{key:"platform",get:function get(){var _navigator;if(typeof navigator!=="undefined"&&typeof((_navigator=navigator)===null||_navigator===void 0?void 0:_navigator.platform)==="string"){return shadow(this,"platform",{isMac:navigator.platform.includes("Mac")});}return shadow(this,"platform",{isMac:false});}},{key:"isCSSRoundSupported",get:function get(){var _globalThis$CSS,_globalThis$CSS$suppo;return shadow(this,"isCSSRoundSupported",(_globalThis$CSS=globalThis.CSS)===null||_globalThis$CSS===void 0||(_globalThis$CSS$suppo=_globalThis$CSS.supports)===null||_globalThis$CSS$suppo===void 0?void 0:_globalThis$CSS$suppo.call(_globalThis$CSS,"width: round(1.5px, 1px)"));}}]);return FeatureTest;}();var hexNumbers=_toConsumableArray(Array(256).keys()).map(function(n){return n.toString(16).padStart(2,"0");});var Util=/*#__PURE__*/function(){function Util(){_classCallCheck(this,Util);}_createClass(Util,null,[{key:"makeHexColor",value:function makeHexColor(r,g,b){return"#".concat(hexNumbers[r]).concat(hexNumbers[g]).concat(hexNumbers[b]);}},{key:"scaleMinMax",value:function scaleMinMax(transform,minMax){var temp;if(transform[0]){if(transform[0]<0){temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;}minMax[0]*=transform[0];minMax[1]*=transform[0];if(transform[3]<0){temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;}minMax[2]*=transform[3];minMax[3]*=transform[3];}else{temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;if(transform[1]<0){temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;}minMax[2]*=transform[1];minMax[3]*=transform[1];if(transform[2]<0){temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;}minMax[0]*=transform[2];minMax[1]*=transform[2];}minMax[0]+=transform[4];minMax[1]+=transform[4];minMax[2]+=transform[5];minMax[3]+=transform[5];}},{key:"transform",value:function transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]];}},{key:"applyTransform",value:function applyTransform(p,m){var xt=p[0]*m[0]+p[1]*m[2]+m[4];var yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt];}},{key:"applyInverseTransform",value:function applyInverseTransform(p,m){var d=m[0]*m[3]-m[1]*m[2];var xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d;var yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt];}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(r,m){var p1=this.applyTransform(r,m);var p2=this.applyTransform(r.slice(2,4),m);var p3=this.applyTransform([r[0],r[3]],m);var p4=this.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])];}},{key:"inverseTransform",value:function inverseTransform(m){var d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d];}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(m){var transpose=[m[0],m[2],m[1],m[3]];var a=m[0]*transpose[0]+m[1]*transpose[2];var b=m[0]*transpose[1]+m[1]*transpose[3];var c=m[2]*transpose[0]+m[3]*transpose[2];var d=m[2]*transpose[1]+m[3]*transpose[3];var first=(a+d)/2;var second=Math.sqrt(Math.pow(a+d,2)-4*(a*d-c*b))/2;var sx=first+second||1;var sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)];}},{key:"normalizeRect",value:function normalizeRect(rect){var r=rect.slice(0);if(rect[0]>rect[2]){r[0]=rect[2];r[2]=rect[0];}if(rect[1]>rect[3]){r[1]=rect[3];r[3]=rect[1];}return r;}},{key:"intersect",value:function intersect(rect1,rect2){var xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2]));var xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh){return null;}var yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3]));var yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));if(yLow>yHigh){return null;}return[xLow,yLow,xHigh,yHigh];}},{key:"bezierBoundingBox",value:function bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3){var tvalues=[],bounds=[[],[]];var a,b,c,t,t1,t2,b2ac,sqrtb2ac;for(var i=0;i<2;++i){if(i===0){b=6*x0-12*x1+6*x2;a=-3*x0+9*x1-9*x2+3*x3;c=3*x1-3*x0;}else{b=6*y0-12*y1+6*y2;a=-3*y0+9*y1-9*y2+3*y3;c=3*y1-3*y0;}if(Math.abs(a)<1e-12){if(Math.abs(b)<1e-12){continue;}t=-c/b;if(0<t&&t<1){tvalues.push(t);}continue;}b2ac=b*b-4*c*a;sqrtb2ac=Math.sqrt(b2ac);if(b2ac<0){continue;}t1=(-b+sqrtb2ac)/(2*a);if(0<t1&&t1<1){tvalues.push(t1);}t2=(-b-sqrtb2ac)/(2*a);if(0<t2&&t2<1){tvalues.push(t2);}}var j=tvalues.length,mt;var jlen=j;while(j--){t=tvalues[j];mt=1-t;bounds[0][j]=mt*mt*mt*x0+3*mt*mt*t*x1+3*mt*t*t*x2+t*t*t*x3;bounds[1][j]=mt*mt*mt*y0+3*mt*mt*t*y1+3*mt*t*t*y2+t*t*t*y3;}bounds[0][jlen]=x0;bounds[1][jlen]=y0;bounds[0][jlen+1]=x3;bounds[1][jlen+1]=y3;bounds[0].length=bounds[1].length=jlen+2;return[Math.min.apply(Math,_toConsumableArray(bounds[0])),Math.min.apply(Math,_toConsumableArray(bounds[1])),Math.max.apply(Math,_toConsumableArray(bounds[0])),Math.max.apply(Math,_toConsumableArray(bounds[1]))];}}]);return Util;}();var PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2d8,0x2c7,0x2c6,0x2d9,0x2dd,0x2db,0x2da,0x2dc,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2022,0x2020,0x2021,0x2026,0x2014,0x2013,0x192,0x2044,0x2039,0x203a,0x2212,0x2030,0x201e,0x201c,0x201d,0x2018,0x2019,0x201a,0x2122,0xfb01,0xfb02,0x141,0x152,0x160,0x178,0x17d,0x131,0x142,0x153,0x161,0x17e,0,0x20ac];function stringToPDFString(str){if(str[0]>="\xEF"){var encoding;if(str[0]==="\xFE"&&str[1]==="\xFF"){encoding="utf-16be";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]==="\xFF"&&str[1]==="\xFE"){encoding="utf-16le";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]==="\xEF"&&str[1]==="\xBB"&&str[2]==="\xBF"){encoding="utf-8";}if(encoding){try{var decoder=new TextDecoder(encoding,{fatal:true});var buffer=stringToBytes(str);var decoded=decoder.decode(buffer);if(!decoded.includes("\x1b")){return decoded;}return decoded.replaceAll(/\x1b[^\x1b]*(?:\x1b|$)/g,"");}catch(ex){warn("stringToPDFString: \"".concat(ex,"\"."));}}}var strBuf=[];for(var i=0,ii=str.length;i<ii;i++){var charCode=str.charCodeAt(i);if(charCode===0x1b){while(++i<ii&&str.charCodeAt(i)!==0x1b){}continue;}var code=PDFStringTranslateTable[charCode];strBuf.push(code?String.fromCharCode(code):str.charAt(i));}return strBuf.join("");}function stringToUTF8String(str){return decodeURIComponent(escape(str));}function utf8StringToString(str){return unescape(encodeURIComponent(str));}function isArrayBuffer(v){return _typeof(v)==="object"&&(v===null||v===void 0?void 0:v.byteLength)!==undefined;}function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length){return false;}for(var i=0,ii=arr1.length;i<ii;i++){if(arr1[i]!==arr2[i]){return false;}}return true;}function getModificationDate(){var date=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date();var buffer=[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")];return buffer.join("");}var _settled=/*#__PURE__*/new WeakMap();var PromiseCapability=/*#__PURE__*/function(){function PromiseCapability(){var _this4=this;_classCallCheck(this,PromiseCapability);_classPrivateFieldInitSpec(this,_settled,{writable:true,value:false});this.promise=new Promise(function(resolve,reject){_this4.resolve=function(data){_classPrivateFieldSet(_this4,_settled,true);resolve(data);};_this4.reject=function(reason){_classPrivateFieldSet(_this4,_settled,true);reject(reason);};});}_createClass(PromiseCapability,[{key:"settled",get:function get(){return _classPrivateFieldGet(this,_settled);}}]);return PromiseCapability;}();var NormalizeRegex=null;var NormalizationMap=null;function normalizeUnicode(str){if(!NormalizeRegex){NormalizeRegex=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g;NormalizationMap=new Map([["","t"]]);}return str.replaceAll(NormalizeRegex,function(_,p1,p2){return p1?p1.normalize("NFKC"):NormalizationMap.get(p2);});}function getUuid(){var _crypto,_crypto2;if(typeof crypto!=="undefined"&&typeof((_crypto=crypto)===null||_crypto===void 0?void 0:_crypto.randomUUID)==="function"){return crypto.randomUUID();}var buf=new Uint8Array(32);if(typeof crypto!=="undefined"&&typeof((_crypto2=crypto)===null||_crypto2===void 0?void 0:_crypto2.getRandomValues)==="function"){crypto.getRandomValues(buf);}else{for(var i=0;i<32;i++){buf[i]=Math.floor(Math.random()*255);}}return bytesToString(buf);}var AnnotationPrefix="pdfjs_internal_id_";
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.log2.js
var es_math_log2 = __webpack_require__(3764);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.code-point-at.js
var es_string_code_point_at = __webpack_require__(9689);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.constructor.js
var es_regexp_constructor = __webpack_require__(3032);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.dot-all.js
var es_regexp_dot_all = __webpack_require__(5619);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.sticky.js
var es_regexp_sticky = __webpack_require__(9786);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.split.js
var es_string_split = __webpack_require__(4280);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.values.js
var es_object_values = __webpack_require__(9099);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.entries.js
var es_object_entries = __webpack_require__(2586);
;// CONCATENATED MODULE: ./src/core/primitives.js
function primitives_typeof(o){"@babel/helpers - typeof";return primitives_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},primitives_typeof(o);}function primitives_slicedToArray(arr,i){return primitives_arrayWithHoles(arr)||primitives_iterableToArrayLimit(arr,i)||primitives_unsupportedIterableToArray(arr,i)||primitives_nonIterableRest();}function primitives_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function primitives_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function primitives_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function primitives_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=primitives_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function primitives_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return primitives_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return primitives_arrayLikeToArray(o,minLen);}function primitives_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==primitives_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(primitives_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function primitives_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function primitives_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,primitives_toPropertyKey(descriptor.key),descriptor);}}function primitives_createClass(Constructor,protoProps,staticProps){if(protoProps)primitives_defineProperties(Constructor.prototype,protoProps);if(staticProps)primitives_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function primitives_toPropertyKey(arg){var key=primitives_toPrimitive(arg,"string");return primitives_typeof(key)==="symbol"?key:String(key);}function primitives_toPrimitive(input,hint){if(primitives_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(primitives_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var CIRCULAR_REF=Symbol("CIRCULAR_REF");var EOF=Symbol("EOF");var CmdCache=Object.create(null);var NameCache=Object.create(null);var RefCache=Object.create(null);function clearPrimitiveCaches(){CmdCache=Object.create(null);NameCache=Object.create(null);RefCache=Object.create(null);}var Name=/*#__PURE__*/function(){function Name(name){primitives_classCallCheck(this,Name);this.name=name;}primitives_createClass(Name,null,[{key:"get",value:function get(name){var _NameCache;return(_NameCache=NameCache)[name]||(_NameCache[name]=new Name(name));}}]);return Name;}();var Cmd=/*#__PURE__*/function(){function Cmd(cmd){primitives_classCallCheck(this,Cmd);this.cmd=cmd;}primitives_createClass(Cmd,null,[{key:"get",value:function get(cmd){var _CmdCache;return(_CmdCache=CmdCache)[cmd]||(_CmdCache[cmd]=new Cmd(cmd));}}]);return Cmd;}();var nonSerializable=function nonSerializableClosure(){return nonSerializable;};var Dict=/*#__PURE__*/function(){function Dict(){var xref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;primitives_classCallCheck(this,Dict);this._map=Object.create(null);this.xref=xref;this.objId=null;this.suppressEncryption=false;this.__nonSerializable__=nonSerializable;}primitives_createClass(Dict,[{key:"assignXref",value:function assignXref(newXref){this.xref=newXref;}},{key:"size",get:function get(){return Object.keys(this._map).length;}},{key:"get",value:function get(key1,key2,key3){var value=this._map[key1];if(value===undefined&&key2!==undefined){value=this._map[key2];if(value===undefined&&key3!==undefined){value=this._map[key3];}}if(value instanceof Ref&&this.xref){return this.xref.fetch(value,this.suppressEncryption);}return value;}},{key:"getAsync",value:function(){var _getAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(key1,key2,key3){var value;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:value=this._map[key1];if(value===undefined&&key2!==undefined){value=this._map[key2];if(value===undefined&&key3!==undefined){value=this._map[key3];}}if(!(value instanceof Ref&&this.xref)){_context.next=4;break;}return _context.abrupt("return",this.xref.fetchAsync(value,this.suppressEncryption));case 4:return _context.abrupt("return",value);case 5:case"end":return _context.stop();}},_callee,this);}));function getAsync(_x,_x2,_x3){return _getAsync.apply(this,arguments);}return getAsync;}()},{key:"getArray",value:function getArray(key1,key2,key3){var value=this._map[key1];if(value===undefined&&key2!==undefined){value=this._map[key2];if(value===undefined&&key3!==undefined){value=this._map[key3];}}if(value instanceof Ref&&this.xref){value=this.xref.fetch(value,this.suppressEncryption);}if(Array.isArray(value)){value=value.slice();for(var i=0,ii=value.length;i<ii;i++){if(value[i]instanceof Ref&&this.xref){value[i]=this.xref.fetch(value[i],this.suppressEncryption);}}}return value;}},{key:"getRaw",value:function getRaw(key){return this._map[key];}},{key:"getKeys",value:function getKeys(){return Object.keys(this._map);}},{key:"getRawValues",value:function getRawValues(){return Object.values(this._map);}},{key:"set",value:function set(key,value){this._map[key]=value;}},{key:"has",value:function has(key){return this._map[key]!==undefined;}},{key:"forEach",value:function forEach(callback){for(var key in this._map){callback(key,this.get(key));}}},{key:"clone",value:function clone(){var dict=new Dict(this.xref);var _iterator=primitives_createForOfIteratorHelper(this.getKeys()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;dict.set(key,this.getRaw(key));}}catch(err){_iterator.e(err);}finally{_iterator.f();}return dict;}}],[{key:"empty",get:function get(){var emptyDict=new Dict(null);emptyDict.set=function(key,value){unreachable("Should not call `set` on the empty dictionary.");};return shadow(this,"empty",emptyDict);}},{key:"merge",value:function merge(_ref){var xref=_ref.xref,dictArray=_ref.dictArray,_ref$mergeSubDicts=_ref.mergeSubDicts,mergeSubDicts=_ref$mergeSubDicts===void 0?false:_ref$mergeSubDicts;var mergedDict=new Dict(xref),properties=new Map();var _iterator2=primitives_createForOfIteratorHelper(dictArray),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var dict=_step2.value;if(!(dict instanceof Dict)){continue;}for(var _i=0,_Object$entries=Object.entries(dict._map);_i<_Object$entries.length;_i++){var _Object$entries$_i=primitives_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];var property=properties.get(key);if(property===undefined){property=[];properties.set(key,property);}else if(!mergeSubDicts||!(value instanceof Dict)){continue;}property.push(value);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var _iterator3=primitives_createForOfIteratorHelper(properties),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step3$value=primitives_slicedToArray(_step3.value,2),name=_step3$value[0],values=_step3$value[1];if(values.length===1||!(values[0]instanceof Dict)){mergedDict._map[name]=values[0];continue;}var subDict=new Dict(xref);var _iterator4=primitives_createForOfIteratorHelper(values),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _dict=_step4.value;for(var _i2=0,_Object$entries2=Object.entries(_dict._map);_i2<_Object$entries2.length;_i2++){var _Object$entries2$_i=primitives_slicedToArray(_Object$entries2[_i2],2),_key=_Object$entries2$_i[0],_value=_Object$entries2$_i[1];if(subDict._map[_key]===undefined){subDict._map[_key]=_value;}}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}if(subDict.size>0){mergedDict._map[name]=subDict;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}properties.clear();return mergedDict.size>0?mergedDict:Dict.empty;}}]);return Dict;}();var Ref=/*#__PURE__*/function(){function Ref(num,gen){primitives_classCallCheck(this,Ref);this.num=num;this.gen=gen;}primitives_createClass(Ref,[{key:"toString",value:function toString(){if(this.gen===0){return"".concat(this.num,"R");}return"".concat(this.num,"R").concat(this.gen);}}],[{key:"fromString",value:function fromString(str){var ref=RefCache[str];if(ref){return ref;}var m=/^(\d+)R(\d*)$/.exec(str);if(!m||m[1]==="0"){return null;}return RefCache[str]=new Ref(parseInt(m[1]),!m[2]?0:parseInt(m[2]));}},{key:"get",value:function get(num,gen){var _RefCache;var key=gen===0?"".concat(num,"R"):"".concat(num,"R").concat(gen);return(_RefCache=RefCache)[key]||(_RefCache[key]=new Ref(num,gen));}}]);return Ref;}();var RefSet=/*#__PURE__*/function(_Symbol$iterator){function RefSet(){var parent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;primitives_classCallCheck(this,RefSet);this._set=new Set(parent===null||parent===void 0?void 0:parent._set);}primitives_createClass(RefSet,[{key:"has",value:function has(ref){return this._set.has(ref.toString());}},{key:"put",value:function put(ref){this._set.add(ref.toString());}},{key:"remove",value:function remove(ref){this._set.delete(ref.toString());}},{key:_Symbol$iterator,value:function value(){return this._set.values();}},{key:"clear",value:function clear(){this._set.clear();}}]);return RefSet;}(Symbol.iterator);var RefSetCache=/*#__PURE__*/function(_Symbol$iterator2){function RefSetCache(){primitives_classCallCheck(this,RefSetCache);this._map=new Map();}primitives_createClass(RefSetCache,[{key:"size",get:function get(){return this._map.size;}},{key:"get",value:function get(ref){return this._map.get(ref.toString());}},{key:"has",value:function has(ref){return this._map.has(ref.toString());}},{key:"put",value:function put(ref,obj){this._map.set(ref.toString(),obj);}},{key:"putAlias",value:function putAlias(ref,aliasRef){this._map.set(ref.toString(),this.get(aliasRef));}},{key:_Symbol$iterator2,value:function value(){return this._map.values();}},{key:"clear",value:function clear(){this._map.clear();}}]);return RefSetCache;}(Symbol.iterator);function isName(v,name){return v instanceof Name&&(name===undefined||v.name===name);}function isCmd(v,cmd){return v instanceof Cmd&&(cmd===undefined||v.cmd===cmd);}function isDict(v,type){return v instanceof Dict&&(type===undefined||isName(v.get("Type"),type));}function isRefsEqual(v1,v2){return v1.num===v2.num&&v1.gen===v2.gen;}
;// CONCATENATED MODULE: ./src/core/base_stream.js
function base_stream_typeof(o){"@babel/helpers - typeof";return base_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},base_stream_typeof(o);}function base_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function base_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,base_stream_toPropertyKey(descriptor.key),descriptor);}}function base_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)base_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)base_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function base_stream_toPropertyKey(arg){var key=base_stream_toPrimitive(arg,"string");return base_stream_typeof(key)==="symbol"?key:String(key);}function base_stream_toPrimitive(input,hint){if(base_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(base_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var BaseStream=/*#__PURE__*/function(){function BaseStream(){base_stream_classCallCheck(this,BaseStream);if(this.constructor===BaseStream){unreachable("Cannot initialize BaseStream.");}}base_stream_createClass(BaseStream,[{key:"length",get:function get(){unreachable("Abstract getter `length` accessed");}},{key:"isEmpty",get:function get(){unreachable("Abstract getter `isEmpty` accessed");}},{key:"isDataLoaded",get:function get(){return shadow(this,"isDataLoaded",true);}},{key:"getByte",value:function getByte(){unreachable("Abstract method `getByte` called");}},{key:"getBytes",value:function getBytes(length){unreachable("Abstract method `getBytes` called");}},{key:"peekByte",value:function peekByte(){var peekedByte=this.getByte();if(peekedByte!==-1){this.pos--;}return peekedByte;}},{key:"peekBytes",value:function peekBytes(length){var bytes=this.getBytes(length);this.pos-=bytes.length;return bytes;}},{key:"getUint16",value:function getUint16(){var b0=this.getByte();var b1=this.getByte();if(b0===-1||b1===-1){return-1;}return(b0<<8)+b1;}},{key:"getInt32",value:function getInt32(){var b0=this.getByte();var b1=this.getByte();var b2=this.getByte();var b3=this.getByte();return(b0<<24)+(b1<<16)+(b2<<8)+b3;}},{key:"getByteRange",value:function getByteRange(begin,end){unreachable("Abstract method `getByteRange` called");}},{key:"getString",value:function getString(length){return bytesToString(this.getBytes(length));}},{key:"skip",value:function skip(n){this.pos+=n||1;}},{key:"reset",value:function reset(){unreachable("Abstract method `reset` called");}},{key:"moveStart",value:function moveStart(){unreachable("Abstract method `moveStart` called");}},{key:"makeSubStream",value:function makeSubStream(start,length){var dict=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;unreachable("Abstract method `makeSubStream` called");}},{key:"getBaseStreams",value:function getBaseStreams(){return null;}}]);return BaseStream;}();
;// CONCATENATED MODULE: ./src/core/core_utils.js
function core_utils_typeof(o){"@babel/helpers - typeof";return core_utils_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},core_utils_typeof(o);}function core_utils_slicedToArray(arr,i){return core_utils_arrayWithHoles(arr)||core_utils_iterableToArrayLimit(arr,i)||core_utils_unsupportedIterableToArray(arr,i)||core_utils_nonIterableRest();}function core_utils_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function core_utils_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function core_utils_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function core_utils_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=core_utils_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function core_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return core_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return core_utils_arrayLikeToArray(o,minLen);}function core_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function core_utils_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,core_utils_toPropertyKey(descriptor.key),descriptor);}}function core_utils_createClass(Constructor,protoProps,staticProps){if(protoProps)core_utils_defineProperties(Constructor.prototype,protoProps);if(staticProps)core_utils_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function core_utils_toPropertyKey(arg){var key=core_utils_toPrimitive(arg,"string");return core_utils_typeof(key)==="symbol"?key:String(key);}function core_utils_toPrimitive(input,hint){if(core_utils_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(core_utils_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function core_utils_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function core_utils_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)core_utils_setPrototypeOf(subClass,superClass);}function core_utils_setPrototypeOf(o,p){core_utils_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return core_utils_setPrototypeOf(o,p);}function core_utils_createSuper(Derived){var hasNativeReflectConstruct=core_utils_isNativeReflectConstruct();return function _createSuperInternal(){var Super=core_utils_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=core_utils_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return core_utils_possibleConstructorReturn(this,result);};}function core_utils_possibleConstructorReturn(self,call){if(call&&(core_utils_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return core_utils_assertThisInitialized(self);}function core_utils_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function core_utils_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function core_utils_getPrototypeOf(o){core_utils_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return core_utils_getPrototypeOf(o);}var PDF_VERSION_REGEXP=/^[1-9]\.\d$/;function getLookupTableFactory(initializer){var lookup;return function(){if(initializer){lookup=Object.create(null);initializer(lookup);initializer=null;}return lookup;};}var MissingDataException=/*#__PURE__*/function(_BaseException){core_utils_inherits(MissingDataException,_BaseException);var _super=core_utils_createSuper(MissingDataException);function MissingDataException(begin,end){var _this;core_utils_classCallCheck(this,MissingDataException);_this=_super.call(this,"Missing data [".concat(begin,", ").concat(end,")"),"MissingDataException");_this.begin=begin;_this.end=end;return _this;}return core_utils_createClass(MissingDataException);}(BaseException);var ParserEOFException=/*#__PURE__*/function(_BaseException2){core_utils_inherits(ParserEOFException,_BaseException2);var _super2=core_utils_createSuper(ParserEOFException);function ParserEOFException(msg){core_utils_classCallCheck(this,ParserEOFException);return _super2.call(this,msg,"ParserEOFException");}return core_utils_createClass(ParserEOFException);}(BaseException);var XRefEntryException=/*#__PURE__*/function(_BaseException3){core_utils_inherits(XRefEntryException,_BaseException3);var _super3=core_utils_createSuper(XRefEntryException);function XRefEntryException(msg){core_utils_classCallCheck(this,XRefEntryException);return _super3.call(this,msg,"XRefEntryException");}return core_utils_createClass(XRefEntryException);}(BaseException);var XRefParseException=/*#__PURE__*/function(_BaseException4){core_utils_inherits(XRefParseException,_BaseException4);var _super4=core_utils_createSuper(XRefParseException);function XRefParseException(msg){core_utils_classCallCheck(this,XRefParseException);return _super4.call(this,msg,"XRefParseException");}return core_utils_createClass(XRefParseException);}(BaseException);function arrayBuffersToBytes(arr){var length=arr.length;if(length===0){return new Uint8Array(0);}if(length===1){return new Uint8Array(arr[0]);}var dataLength=0;for(var i=0;i<length;i++){dataLength+=arr[i].byteLength;}var data=new Uint8Array(dataLength);var pos=0;for(var _i=0;_i<length;_i++){var item=new Uint8Array(arr[_i]);data.set(item,pos);pos+=item.byteLength;}return data;}function getInheritableProperty(_ref){var dict=_ref.dict,key=_ref.key,_ref$getArray=_ref.getArray,getArray=_ref$getArray===void 0?false:_ref$getArray,_ref$stopWhenFound=_ref.stopWhenFound,stopWhenFound=_ref$stopWhenFound===void 0?true:_ref$stopWhenFound;var values;var visited=new RefSet();while(dict instanceof Dict&&!(dict.objId&&visited.has(dict.objId))){if(dict.objId){visited.put(dict.objId);}var value=getArray?dict.getArray(key):dict.get(key);if(value!==undefined){if(stopWhenFound){return value;}(values||(values=[])).push(value);}dict=dict.get("Parent");}return values;}var ROMAN_NUMBER_MAP=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function toRomanNumerals(number){var lowerCase=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;assert(Number.isInteger(number)&&number>0,"The number should be a positive integer.");var romanBuf=[];var pos;while(number>=1000){number-=1000;romanBuf.push("M");}pos=number/100|0;number%=100;romanBuf.push(ROMAN_NUMBER_MAP[pos]);pos=number/10|0;number%=10;romanBuf.push(ROMAN_NUMBER_MAP[10+pos]);romanBuf.push(ROMAN_NUMBER_MAP[20+number]);var romanStr=romanBuf.join("");return lowerCase?romanStr.toLowerCase():romanStr;}function log2(x){if(x<=0){return 0;}return Math.ceil(Math.log2(x));}function readInt8(data,offset){return data[offset]<<24>>24;}function readUint16(data,offset){return data[offset]<<8|data[offset+1];}function readUint32(data,offset){return(data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3])>>>0;}function isWhiteSpace(ch){return ch===0x20||ch===0x09||ch===0x0d||ch===0x0a;}function parseXFAPath(path){var positionPattern=/(.+)\[(\d+)\]$/;return path.split(".").map(function(component){var m=component.match(positionPattern);if(m){return{name:m[1],pos:parseInt(m[2],10)};}return{name:component,pos:0};});}function escapePDFName(str){var buffer=[];var start=0;for(var i=0,ii=str.length;i<ii;i++){var char=str.charCodeAt(i);if(char<0x21||char>0x7e||char===0x23||char===0x28||char===0x29||char===0x3c||char===0x3e||char===0x5b||char===0x5d||char===0x7b||char===0x7d||char===0x2f||char===0x25){if(start<i){buffer.push(str.substring(start,i));}buffer.push("#".concat(char.toString(16)));start=i+1;}}if(buffer.length===0){return str;}if(start<str.length){buffer.push(str.substring(start,str.length));}return buffer.join("");}function escapeString(str){return str.replaceAll(/([()\\\n\r])/g,function(match){if(match==="\n"){return"\\n";}else if(match==="\r"){return"\\r";}return"\\".concat(match);});}function _collectJS(entry,xref,list,parents){if(!entry){return;}var parent=null;if(entry instanceof Ref){if(parents.has(entry)){return;}parent=entry;parents.put(parent);entry=xref.fetch(entry);}if(Array.isArray(entry)){var _iterator=core_utils_createForOfIteratorHelper(entry),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var element=_step.value;_collectJS(element,xref,list,parents);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}else if(entry instanceof Dict){if(isName(entry.get("S"),"JavaScript")){var js=entry.get("JS");var code;if(js instanceof BaseStream){code=js.getString();}else if(typeof js==="string"){code=js;}code&&(code=stringToPDFString(code).replaceAll("\x00",""));if(code){list.push(code);}}_collectJS(entry.getRaw("Next"),xref,list,parents);}if(parent){parents.remove(parent);}}function collectActions(xref,dict,eventType){var actions=Object.create(null);var additionalActionsDicts=getInheritableProperty({dict:dict,key:"AA",stopWhenFound:false});if(additionalActionsDicts){for(var i=additionalActionsDicts.length-1;i>=0;i--){var additionalActions=additionalActionsDicts[i];if(!(additionalActions instanceof Dict)){continue;}var _iterator2=core_utils_createForOfIteratorHelper(additionalActions.getKeys()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;var action=eventType[key];if(!action){continue;}var actionDict=additionalActions.getRaw(key);var parents=new RefSet();var list=[];_collectJS(actionDict,xref,list,parents);if(list.length>0){actions[action]=list;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}if(dict.has("A")){var _actionDict=dict.get("A");var _parents=new RefSet();var _list=[];_collectJS(_actionDict,xref,_list,_parents);if(_list.length>0){actions.Action=_list;}}return objectSize(actions)>0?actions:null;}var XMLEntities={0x3c:"&lt;",0x3e:"&gt;",0x26:"&amp;",0x22:"&quot;",0x27:"&apos;"};function encodeToXmlString(str){var buffer=[];var start=0;for(var i=0,ii=str.length;i<ii;i++){var char=str.codePointAt(i);if(0x20<=char&&char<=0x7e){var entity=XMLEntities[char];if(entity){if(start<i){buffer.push(str.substring(start,i));}buffer.push(entity);start=i+1;}}else{if(start<i){buffer.push(str.substring(start,i));}buffer.push("&#x".concat(char.toString(16).toUpperCase(),";"));if(char>0xd7ff&&(char<0xe000||char>0xfffd)){i++;}start=i+1;}}if(buffer.length===0){return str;}if(start<str.length){buffer.push(str.substring(start,str.length));}return buffer.join("");}function validateFontName(fontFamily){var mustWarn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var m=/^("|').*("|')$/.exec(fontFamily);if(m&&m[1]===m[2]){var re=new RegExp("[^\\\\]".concat(m[1]));if(re.test(fontFamily.slice(1,-1))){if(mustWarn){warn("FontFamily contains unescaped ".concat(m[1],": ").concat(fontFamily,"."));}return false;}}else{var _iterator3=core_utils_createForOfIteratorHelper(fontFamily.split(/[ \t]+/)),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var ident=_step3.value;if(/^(\d|(-(\d|-)))/.test(ident)||!/^[\w-\\]+$/.test(ident)){if(mustWarn){warn("FontFamily contains invalid <custom-ident>: ".concat(fontFamily,"."));}return false;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}return true;}function validateCSSFont(cssFontInfo){var DEFAULT_CSS_FONT_OBLIQUE="14";var DEFAULT_CSS_FONT_WEIGHT="400";var CSS_FONT_WEIGHT_VALUES=new Set(["100","200","300","400","500","600","700","800","900","1000","normal","bold","bolder","lighter"]);var fontFamily=cssFontInfo.fontFamily,fontWeight=cssFontInfo.fontWeight,italicAngle=cssFontInfo.italicAngle;if(!validateFontName(fontFamily,true)){return false;}var weight=fontWeight?fontWeight.toString():"";cssFontInfo.fontWeight=CSS_FONT_WEIGHT_VALUES.has(weight)?weight:DEFAULT_CSS_FONT_WEIGHT;var angle=parseFloat(italicAngle);cssFontInfo.italicAngle=isNaN(angle)||angle<-90||angle>90?DEFAULT_CSS_FONT_OBLIQUE:italicAngle.toString();return true;}function recoverJsURL(str){var URL_OPEN_METHODS=["app.launchURL","window.open","xfa.host.gotoURL"];var regex=new RegExp("^\\s*("+URL_OPEN_METHODS.join("|").replaceAll(".","\\.")+")\\((?:'|\")([^'\"]*)(?:'|\")(?:,\\s*(\\w+)\\)|\\))","i");var jsUrl=regex.exec(str);if(jsUrl!==null&&jsUrl!==void 0&&jsUrl[2]){var url=jsUrl[2];var newWindow=false;if(jsUrl[3]==="true"&&jsUrl[1]==="app.launchURL"){newWindow=true;}return{url:url,newWindow:newWindow};}return null;}function numberToString(value){if(Number.isInteger(value)){return value.toString();}var roundedValue=Math.round(value*100);if(roundedValue%100===0){return(roundedValue/100).toString();}if(roundedValue%10===0){return value.toFixed(1);}return value.toFixed(2);}function getNewAnnotationsMap(annotationStorage){if(!annotationStorage){return null;}var newAnnotationsByPage=new Map();var _iterator4=core_utils_createForOfIteratorHelper(annotationStorage),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step4$value=core_utils_slicedToArray(_step4.value,2),key=_step4$value[0],value=_step4$value[1];if(!key.startsWith(AnnotationEditorPrefix)){continue;}var annotations=newAnnotationsByPage.get(value.pageIndex);if(!annotations){annotations=[];newAnnotationsByPage.set(value.pageIndex,annotations);}annotations.push(value);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return newAnnotationsByPage.size>0?newAnnotationsByPage:null;}function isAscii(str){return /^[\x00-\x7F]*$/.test(str);}function stringToUTF16HexString(str){var buf=[];for(var i=0,ii=str.length;i<ii;i++){var char=str.charCodeAt(i);buf.push((char>>8&0xff).toString(16).padStart(2,"0"),(char&0xff).toString(16).padStart(2,"0"));}return buf.join("");}function stringToUTF16String(str){var bigEndian=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var buf=[];if(bigEndian){buf.push("\xFE\xFF");}for(var i=0,ii=str.length;i<ii;i++){var char=str.charCodeAt(i);buf.push(String.fromCharCode(char>>8&0xff),String.fromCharCode(char&0xff));}return buf.join("");}function core_utils_getRotationMatrix(rotation,width,height){switch(rotation){case 90:return[0,1,-1,0,width,0];case 180:return[-1,0,0,-1,width,height];case 270:return[0,-1,1,0,0,height];default:throw new Error("Invalid rotation");}}
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.sort.js
var es_array_sort = __webpack_require__(8301);
;// CONCATENATED MODULE: ./src/core/stream.js
function stream_typeof(o){"@babel/helpers - typeof";return stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},stream_typeof(o);}function stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,stream_toPropertyKey(descriptor.key),descriptor);}}function stream_createClass(Constructor,protoProps,staticProps){if(protoProps)stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function stream_toPropertyKey(arg){var key=stream_toPrimitive(arg,"string");return stream_typeof(key)==="symbol"?key:String(key);}function stream_toPrimitive(input,hint){if(stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)stream_setPrototypeOf(subClass,superClass);}function stream_setPrototypeOf(o,p){stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return stream_setPrototypeOf(o,p);}function stream_createSuper(Derived){var hasNativeReflectConstruct=stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return stream_possibleConstructorReturn(this,result);};}function stream_possibleConstructorReturn(self,call){if(call&&(stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return stream_assertThisInitialized(self);}function stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function stream_getPrototypeOf(o){stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return stream_getPrototypeOf(o);}var Stream=/*#__PURE__*/function(_BaseStream){stream_inherits(Stream,_BaseStream);var _super=stream_createSuper(Stream);function Stream(arrayBuffer,start,length,dict){var _this;stream_classCallCheck(this,Stream);_this=_super.call(this);_this.bytes=arrayBuffer instanceof Uint8Array?arrayBuffer:new Uint8Array(arrayBuffer);_this.start=start||0;_this.pos=_this.start;_this.end=start+length||_this.bytes.length;_this.dict=dict;return _this;}stream_createClass(Stream,[{key:"length",get:function get(){return this.end-this.start;}},{key:"isEmpty",get:function get(){return this.length===0;}},{key:"getByte",value:function getByte(){if(this.pos>=this.end){return-1;}return this.bytes[this.pos++];}},{key:"getBytes",value:function getBytes(length){var bytes=this.bytes;var pos=this.pos;var strEnd=this.end;if(!length){return bytes.subarray(pos,strEnd);}var end=pos+length;if(end>strEnd){end=strEnd;}this.pos=end;return bytes.subarray(pos,end);}},{key:"getByteRange",value:function getByteRange(begin,end){if(begin<0){begin=0;}if(end>this.end){end=this.end;}return this.bytes.subarray(begin,end);}},{key:"reset",value:function reset(){this.pos=this.start;}},{key:"moveStart",value:function moveStart(){this.start=this.pos;}},{key:"makeSubStream",value:function makeSubStream(start,length){var dict=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return new Stream(this.bytes.buffer,start,length,dict);}}]);return Stream;}(BaseStream);var StringStream=/*#__PURE__*/function(_Stream){stream_inherits(StringStream,_Stream);var _super2=stream_createSuper(StringStream);function StringStream(str){stream_classCallCheck(this,StringStream);return _super2.call(this,stringToBytes(str));}return stream_createClass(StringStream);}(Stream);var NullStream=/*#__PURE__*/function(_Stream2){stream_inherits(NullStream,_Stream2);var _super3=stream_createSuper(NullStream);function NullStream(){stream_classCallCheck(this,NullStream);return _super3.call(this,new Uint8Array(0));}return stream_createClass(NullStream);}(Stream);
;// CONCATENATED MODULE: ./src/core/chunked_stream.js
function chunked_stream_typeof(o){"@babel/helpers - typeof";return chunked_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},chunked_stream_typeof(o);}function chunked_stream_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=chunked_stream_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function chunked_stream_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return chunked_stream_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return chunked_stream_arrayLikeToArray(o,minLen);}function chunked_stream_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function chunked_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function chunked_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,chunked_stream_toPropertyKey(descriptor.key),descriptor);}}function chunked_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)chunked_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)chunked_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function chunked_stream_toPropertyKey(arg){var key=chunked_stream_toPrimitive(arg,"string");return chunked_stream_typeof(key)==="symbol"?key:String(key);}function chunked_stream_toPrimitive(input,hint){if(chunked_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(chunked_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function chunked_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)chunked_stream_setPrototypeOf(subClass,superClass);}function chunked_stream_setPrototypeOf(o,p){chunked_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return chunked_stream_setPrototypeOf(o,p);}function chunked_stream_createSuper(Derived){var hasNativeReflectConstruct=chunked_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=chunked_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=chunked_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return chunked_stream_possibleConstructorReturn(this,result);};}function chunked_stream_possibleConstructorReturn(self,call){if(call&&(chunked_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return chunked_stream_assertThisInitialized(self);}function chunked_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function chunked_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function chunked_stream_getPrototypeOf(o){chunked_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return chunked_stream_getPrototypeOf(o);}var ChunkedStream=/*#__PURE__*/function(_Stream){chunked_stream_inherits(ChunkedStream,_Stream);var _super=chunked_stream_createSuper(ChunkedStream);function ChunkedStream(length,chunkSize,manager){var _this;chunked_stream_classCallCheck(this,ChunkedStream);_this=_super.call(this,new Uint8Array(length),0,length,null);_this.chunkSize=chunkSize;_this._loadedChunks=new Set();_this.numChunks=Math.ceil(length/chunkSize);_this.manager=manager;_this.progressiveDataLength=0;_this.lastSuccessfulEnsureByteChunk=-1;return _this;}chunked_stream_createClass(ChunkedStream,[{key:"getMissingChunks",value:function getMissingChunks(){var chunks=[];for(var chunk=0,n=this.numChunks;chunk<n;++chunk){if(!this._loadedChunks.has(chunk)){chunks.push(chunk);}}return chunks;}},{key:"numChunksLoaded",get:function get(){return this._loadedChunks.size;}},{key:"isDataLoaded",get:function get(){return this.numChunksLoaded===this.numChunks;}},{key:"onReceiveData",value:function onReceiveData(begin,chunk){var chunkSize=this.chunkSize;if(begin%chunkSize!==0){throw new Error("Bad begin offset: ".concat(begin));}var end=begin+chunk.byteLength;if(end%chunkSize!==0&&end!==this.bytes.length){throw new Error("Bad end offset: ".concat(end));}this.bytes.set(new Uint8Array(chunk),begin);var beginChunk=Math.floor(begin/chunkSize);var endChunk=Math.floor((end-1)/chunkSize)+1;for(var curChunk=beginChunk;curChunk<endChunk;++curChunk){this._loadedChunks.add(curChunk);}}},{key:"onReceiveProgressiveData",value:function onReceiveProgressiveData(data){var position=this.progressiveDataLength;var beginChunk=Math.floor(position/this.chunkSize);this.bytes.set(new Uint8Array(data),position);position+=data.byteLength;this.progressiveDataLength=position;var endChunk=position>=this.end?this.numChunks:Math.floor(position/this.chunkSize);for(var curChunk=beginChunk;curChunk<endChunk;++curChunk){this._loadedChunks.add(curChunk);}}},{key:"ensureByte",value:function ensureByte(pos){if(pos<this.progressiveDataLength){return;}var chunk=Math.floor(pos/this.chunkSize);if(chunk>this.numChunks){return;}if(chunk===this.lastSuccessfulEnsureByteChunk){return;}if(!this._loadedChunks.has(chunk)){throw new MissingDataException(pos,pos+1);}this.lastSuccessfulEnsureByteChunk=chunk;}},{key:"ensureRange",value:function ensureRange(begin,end){if(begin>=end){return;}if(end<=this.progressiveDataLength){return;}var beginChunk=Math.floor(begin/this.chunkSize);if(beginChunk>this.numChunks){return;}var endChunk=Math.min(Math.floor((end-1)/this.chunkSize)+1,this.numChunks);for(var chunk=beginChunk;chunk<endChunk;++chunk){if(!this._loadedChunks.has(chunk)){throw new MissingDataException(begin,end);}}}},{key:"nextEmptyChunk",value:function nextEmptyChunk(beginChunk){var numChunks=this.numChunks;for(var i=0;i<numChunks;++i){var chunk=(beginChunk+i)%numChunks;if(!this._loadedChunks.has(chunk)){return chunk;}}return null;}},{key:"hasChunk",value:function hasChunk(chunk){return this._loadedChunks.has(chunk);}},{key:"getByte",value:function getByte(){var pos=this.pos;if(pos>=this.end){return-1;}if(pos>=this.progressiveDataLength){this.ensureByte(pos);}return this.bytes[this.pos++];}},{key:"getBytes",value:function getBytes(length){var bytes=this.bytes;var pos=this.pos;var strEnd=this.end;if(!length){if(strEnd>this.progressiveDataLength){this.ensureRange(pos,strEnd);}return bytes.subarray(pos,strEnd);}var end=pos+length;if(end>strEnd){end=strEnd;}if(end>this.progressiveDataLength){this.ensureRange(pos,end);}this.pos=end;return bytes.subarray(pos,end);}},{key:"getByteRange",value:function getByteRange(begin,end){if(begin<0){begin=0;}if(end>this.end){end=this.end;}if(end>this.progressiveDataLength){this.ensureRange(begin,end);}return this.bytes.subarray(begin,end);}},{key:"makeSubStream",value:function makeSubStream(start,length){var dict=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(length){if(start+length>this.progressiveDataLength){this.ensureRange(start,start+length);}}else if(start>=this.progressiveDataLength){this.ensureByte(start);}function ChunkedStreamSubstream(){}ChunkedStreamSubstream.prototype=Object.create(this);ChunkedStreamSubstream.prototype.getMissingChunks=function(){var chunkSize=this.chunkSize;var beginChunk=Math.floor(this.start/chunkSize);var endChunk=Math.floor((this.end-1)/chunkSize)+1;var missingChunks=[];for(var chunk=beginChunk;chunk<endChunk;++chunk){if(!this._loadedChunks.has(chunk)){missingChunks.push(chunk);}}return missingChunks;};Object.defineProperty(ChunkedStreamSubstream.prototype,"isDataLoaded",{get:function get(){if(this.numChunksLoaded===this.numChunks){return true;}return this.getMissingChunks().length===0;},configurable:true});var subStream=new ChunkedStreamSubstream();subStream.pos=subStream.start=start;subStream.end=start+length||this.end;subStream.dict=dict;return subStream;}},{key:"getBaseStreams",value:function getBaseStreams(){return[this];}}]);return ChunkedStream;}(Stream);var ChunkedStreamManager=/*#__PURE__*/function(){function ChunkedStreamManager(pdfNetworkStream,args){chunked_stream_classCallCheck(this,ChunkedStreamManager);this.length=args.length;this.chunkSize=args.rangeChunkSize;this.stream=new ChunkedStream(this.length,this.chunkSize,this);this.pdfNetworkStream=pdfNetworkStream;this.disableAutoFetch=args.disableAutoFetch;this.msgHandler=args.msgHandler;this.currRequestId=0;this._chunksNeededByRequest=new Map();this._requestsByChunk=new Map();this._promisesByRequest=new Map();this.progressiveDataLength=0;this.aborted=false;this._loadedStreamCapability=new PromiseCapability();}chunked_stream_createClass(ChunkedStreamManager,[{key:"sendRequest",value:function sendRequest(begin,end){var _this2=this;var rangeReader=this.pdfNetworkStream.getRangeReader(begin,end);if(!rangeReader.isStreamingSupported){rangeReader.onProgress=this.onProgress.bind(this);}var chunks=[],loaded=0;return new Promise(function(resolve,reject){var readChunk=function readChunk(_ref){var value=_ref.value,done=_ref.done;try{if(done){var chunkData=arrayBuffersToBytes(chunks);chunks=null;resolve(chunkData);return;}loaded+=value.byteLength;if(rangeReader.isStreamingSupported){_this2.onProgress({loaded:loaded});}chunks.push(value);rangeReader.read().then(readChunk,reject);}catch(e){reject(e);}};rangeReader.read().then(readChunk,reject);}).then(function(data){if(_this2.aborted){return;}_this2.onReceiveData({chunk:data,begin:begin});});}},{key:"requestAllChunks",value:function requestAllChunks(){var noFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!noFetch){var missingChunks=this.stream.getMissingChunks();this._requestChunks(missingChunks);}return this._loadedStreamCapability.promise;}},{key:"_requestChunks",value:function _requestChunks(chunks){var _this3=this;var requestId=this.currRequestId++;var chunksNeeded=new Set();this._chunksNeededByRequest.set(requestId,chunksNeeded);var _iterator=chunked_stream_createForOfIteratorHelper(chunks),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var chunk=_step.value;if(!this.stream.hasChunk(chunk)){chunksNeeded.add(chunk);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(chunksNeeded.size===0){return Promise.resolve();}var capability=new PromiseCapability();this._promisesByRequest.set(requestId,capability);var chunksToRequest=[];var _iterator2=chunked_stream_createForOfIteratorHelper(chunksNeeded),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _chunk=_step2.value;var requestIds=this._requestsByChunk.get(_chunk);if(!requestIds){requestIds=[];this._requestsByChunk.set(_chunk,requestIds);chunksToRequest.push(_chunk);}requestIds.push(requestId);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}if(chunksToRequest.length>0){var groupedChunksToRequest=this.groupChunks(chunksToRequest);var _iterator3=chunked_stream_createForOfIteratorHelper(groupedChunksToRequest),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var groupedChunk=_step3.value;var begin=groupedChunk.beginChunk*this.chunkSize;var end=Math.min(groupedChunk.endChunk*this.chunkSize,this.length);this.sendRequest(begin,end).catch(capability.reject);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}return capability.promise.catch(function(reason){if(_this3.aborted){return;}throw reason;});}},{key:"getStream",value:function getStream(){return this.stream;}},{key:"requestRange",value:function requestRange(begin,end){end=Math.min(end,this.length);var beginChunk=this.getBeginChunk(begin);var endChunk=this.getEndChunk(end);var chunks=[];for(var chunk=beginChunk;chunk<endChunk;++chunk){chunks.push(chunk);}return this._requestChunks(chunks);}},{key:"requestRanges",value:function requestRanges(){var ranges=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var chunksToRequest=[];var _iterator4=chunked_stream_createForOfIteratorHelper(ranges),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var range=_step4.value;var beginChunk=this.getBeginChunk(range.begin);var endChunk=this.getEndChunk(range.end);for(var chunk=beginChunk;chunk<endChunk;++chunk){if(!chunksToRequest.includes(chunk)){chunksToRequest.push(chunk);}}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}chunksToRequest.sort(function(a,b){return a-b;});return this._requestChunks(chunksToRequest);}},{key:"groupChunks",value:function groupChunks(chunks){var groupedChunks=[];var beginChunk=-1;var prevChunk=-1;for(var i=0,ii=chunks.length;i<ii;++i){var chunk=chunks[i];if(beginChunk<0){beginChunk=chunk;}if(prevChunk>=0&&prevChunk+1!==chunk){groupedChunks.push({beginChunk:beginChunk,endChunk:prevChunk+1});beginChunk=chunk;}if(i+1===chunks.length){groupedChunks.push({beginChunk:beginChunk,endChunk:chunk+1});}prevChunk=chunk;}return groupedChunks;}},{key:"onProgress",value:function onProgress(args){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+args.loaded,total:this.length});}},{key:"onReceiveData",value:function onReceiveData(args){var chunk=args.chunk;var isProgressive=args.begin===undefined;var begin=isProgressive?this.progressiveDataLength:args.begin;var end=begin+chunk.byteLength;var beginChunk=Math.floor(begin/this.chunkSize);var endChunk=end<this.length?Math.floor(end/this.chunkSize):Math.ceil(end/this.chunkSize);if(isProgressive){this.stream.onReceiveProgressiveData(chunk);this.progressiveDataLength=end;}else{this.stream.onReceiveData(begin,chunk);}if(this.stream.isDataLoaded){this._loadedStreamCapability.resolve(this.stream);}var loadedRequests=[];for(var curChunk=beginChunk;curChunk<endChunk;++curChunk){var requestIds=this._requestsByChunk.get(curChunk);if(!requestIds){continue;}this._requestsByChunk.delete(curChunk);var _iterator5=chunked_stream_createForOfIteratorHelper(requestIds),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var requestId=_step5.value;var chunksNeeded=this._chunksNeededByRequest.get(requestId);if(chunksNeeded.has(curChunk)){chunksNeeded.delete(curChunk);}if(chunksNeeded.size>0){continue;}loadedRequests.push(requestId);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}if(!this.disableAutoFetch&&this._requestsByChunk.size===0){var nextEmptyChunk;if(this.stream.numChunksLoaded===1){var lastChunk=this.stream.numChunks-1;if(!this.stream.hasChunk(lastChunk)){nextEmptyChunk=lastChunk;}}else{nextEmptyChunk=this.stream.nextEmptyChunk(endChunk);}if(Number.isInteger(nextEmptyChunk)){this._requestChunks([nextEmptyChunk]);}}for(var _i=0,_loadedRequests=loadedRequests;_i<_loadedRequests.length;_i++){var _requestId=_loadedRequests[_i];var capability=this._promisesByRequest.get(_requestId);this._promisesByRequest.delete(_requestId);capability.resolve();}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length});}},{key:"onError",value:function onError(err){this._loadedStreamCapability.reject(err);}},{key:"getBeginChunk",value:function getBeginChunk(begin){return Math.floor(begin/this.chunkSize);}},{key:"getEndChunk",value:function getEndChunk(end){return Math.floor((end-1)/this.chunkSize)+1;}},{key:"abort",value:function abort(reason){var _this$pdfNetworkStrea;this.aborted=true;(_this$pdfNetworkStrea=this.pdfNetworkStream)===null||_this$pdfNetworkStrea===void 0||_this$pdfNetworkStrea.cancelAllRequests(reason);var _iterator6=chunked_stream_createForOfIteratorHelper(this._promisesByRequest.values()),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var capability=_step6.value;capability.reject(reason);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}}]);return ChunkedStreamManager;}();
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.find-index.js
var es_array_find_index = __webpack_require__(5621);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.splice.js
var es_array_splice = __webpack_require__(6302);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.every.js
var esnext_iterator_every = __webpack_require__(385);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.assign.js
var es_object_assign = __webpack_require__(9142);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.at.js
var es_array_at = __webpack_require__(6820);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.at-alternative.js
var es_string_at_alternative = __webpack_require__(10);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.weak-set.js
var es_weak_set = __webpack_require__(394);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js
var es_typed_array_uint8_clamped_array = __webpack_require__(312);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.flags.js
var es_regexp_flags = __webpack_require__(2640);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.unshift.js
var es_array_unshift = __webpack_require__(9779);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.trim.js
var es_string_trim = __webpack_require__(8341);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.find.js
var es_array_find = __webpack_require__(275);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.find.js
var esnext_iterator_find = __webpack_require__(5252);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.reduce.js
var es_array_reduce = __webpack_require__(7620);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.reduce.js
var esnext_iterator_reduce = __webpack_require__(3371);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.reflect.get.js
var es_reflect_get = __webpack_require__(9718);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptor.js
var es_object_get_own_property_descriptor = __webpack_require__(3713);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.hypot.js
var es_math_hypot = __webpack_require__(3821);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint16-array.js
var es_typed_array_uint16_array = __webpack_require__(2931);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.float32-array.js
var es_typed_array_float32_array = __webpack_require__(6458);
;// CONCATENATED MODULE: ./src/core/colorspace.js
function colorspace_typeof(o){"@babel/helpers - typeof";return colorspace_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},colorspace_typeof(o);}var _class3;function _classStaticPrivateFieldSpecGet(receiver,classConstructor,descriptor){_classCheckPrivateStaticAccess(receiver,classConstructor);_classCheckPrivateStaticFieldDescriptor(descriptor,"get");return colorspace_classApplyDescriptorGet(receiver,descriptor);}function _classCheckPrivateStaticFieldDescriptor(descriptor,action){if(descriptor===undefined){throw new TypeError("attempted to "+action+" private static field before its declaration");}}function _classCheckPrivateStaticAccess(receiver,classConstructor){if(receiver!==classConstructor){throw new TypeError("Private static access of wrong provenance");}}function colorspace_classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}function colorspace_slicedToArray(arr,i){return colorspace_arrayWithHoles(arr)||colorspace_iterableToArrayLimit(arr,i)||colorspace_unsupportedIterableToArray(arr,i)||colorspace_nonIterableRest();}function colorspace_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function colorspace_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return colorspace_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return colorspace_arrayLikeToArray(o,minLen);}function colorspace_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function colorspace_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function colorspace_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _classPrivateMethodInitSpec(obj,privateSet){colorspace_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function colorspace_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function colorspace_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)colorspace_setPrototypeOf(subClass,superClass);}function colorspace_setPrototypeOf(o,p){colorspace_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return colorspace_setPrototypeOf(o,p);}function colorspace_createSuper(Derived){var hasNativeReflectConstruct=colorspace_isNativeReflectConstruct();return function _createSuperInternal(){var Super=colorspace_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=colorspace_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return colorspace_possibleConstructorReturn(this,result);};}function colorspace_possibleConstructorReturn(self,call){if(call&&(colorspace_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return colorspace_assertThisInitialized(self);}function colorspace_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function colorspace_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function colorspace_getPrototypeOf(o){colorspace_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return colorspace_getPrototypeOf(o);}function colorspace_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */colorspace_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==colorspace_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(colorspace_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function colorspace_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function colorspace_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){colorspace_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){colorspace_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function colorspace_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function colorspace_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,colorspace_toPropertyKey(descriptor.key),descriptor);}}function colorspace_createClass(Constructor,protoProps,staticProps){if(protoProps)colorspace_defineProperties(Constructor.prototype,protoProps);if(staticProps)colorspace_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function colorspace_toPropertyKey(arg){var key=colorspace_toPrimitive(arg,"string");return colorspace_typeof(key)==="symbol"?key:String(key);}function colorspace_toPrimitive(input,hint){if(colorspace_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(colorspace_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function resizeRgbImage(src,dest,w1,h1,w2,h2,alpha01){var COMPONENTS=3;alpha01=alpha01!==1?0:alpha01;var xRatio=w1/w2;var yRatio=h1/h2;var newIndex=0,oldIndex;var xScaled=new Uint16Array(w2);var w1Scanline=w1*COMPONENTS;for(var i=0;i<w2;i++){xScaled[i]=Math.floor(i*xRatio)*COMPONENTS;}for(var _i=0;_i<h2;_i++){var py=Math.floor(_i*yRatio)*w1Scanline;for(var j=0;j<w2;j++){oldIndex=py+xScaled[j];dest[newIndex++]=src[oldIndex++];dest[newIndex++]=src[oldIndex++];dest[newIndex++]=src[oldIndex++];newIndex+=alpha01;}}}var ColorSpace=/*#__PURE__*/function(){function ColorSpace(name,numComps){colorspace_classCallCheck(this,ColorSpace);if(this.constructor===ColorSpace){unreachable("Cannot initialize ColorSpace.");}this.name=name;this.numComps=numComps;}colorspace_createClass(ColorSpace,[{key:"getRgb",value:function getRgb(src,srcOffset){var rgb=new Uint8ClampedArray(3);this.getRgbItem(src,srcOffset,rgb,0);return rgb;}},{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){unreachable("Should not call ColorSpace.getRgbItem");}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){unreachable("Should not call ColorSpace.getRgbBuffer");}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){unreachable("Should not call ColorSpace.getOutputLength");}},{key:"isPassthrough",value:function isPassthrough(bits){return false;}},{key:"isDefaultDecode",value:function isDefaultDecode(decodeMap,bpc){return ColorSpace.isDefaultDecode(decodeMap,this.numComps);}},{key:"fillRgb",value:function fillRgb(dest,originalWidth,originalHeight,width,height,actualHeight,bpc,comps,alpha01){var count=originalWidth*originalHeight;var rgbBuf=null;var numComponentColors=1<<bpc;var needsResizing=originalHeight!==height||originalWidth!==width;if(this.isPassthrough(bpc)){rgbBuf=comps;}else if(this.numComps===1&&count>numComponentColors&&this.name!=="DeviceGray"&&this.name!=="DeviceRGB"){var allColors=bpc<=8?new Uint8Array(numComponentColors):new Uint16Array(numComponentColors);for(var i=0;i<numComponentColors;i++){allColors[i]=i;}var colorMap=new Uint8ClampedArray(numComponentColors*3);this.getRgbBuffer(allColors,0,numComponentColors,colorMap,0,bpc,0);if(!needsResizing){var destPos=0;for(var _i2=0;_i2<count;++_i2){var key=comps[_i2]*3;dest[destPos++]=colorMap[key];dest[destPos++]=colorMap[key+1];dest[destPos++]=colorMap[key+2];destPos+=alpha01;}}else{rgbBuf=new Uint8Array(count*3);var rgbPos=0;for(var _i3=0;_i3<count;++_i3){var _key=comps[_i3]*3;rgbBuf[rgbPos++]=colorMap[_key];rgbBuf[rgbPos++]=colorMap[_key+1];rgbBuf[rgbPos++]=colorMap[_key+2];}}}else if(!needsResizing){this.getRgbBuffer(comps,0,width*actualHeight,dest,0,bpc,alpha01);}else{rgbBuf=new Uint8ClampedArray(count*3);this.getRgbBuffer(comps,0,count,rgbBuf,0,bpc,0);}if(rgbBuf){if(needsResizing){resizeRgbImage(rgbBuf,dest,originalWidth,originalHeight,width,height,alpha01);}else{var _destPos=0,_rgbPos=0;for(var _i4=0,ii=width*actualHeight;_i4<ii;_i4++){dest[_destPos++]=rgbBuf[_rgbPos++];dest[_destPos++]=rgbBuf[_rgbPos++];dest[_destPos++]=rgbBuf[_rgbPos++];_destPos+=alpha01;}}}}},{key:"usesZeroToOneRange",get:function get(){return shadow(this,"usesZeroToOneRange",true);}}],[{key:"_cache",value:function _cache(cacheKey,xref,localColorSpaceCache,parsedColorSpace){if(!localColorSpaceCache){throw new Error('ColorSpace._cache - expected "localColorSpaceCache" argument.');}if(!parsedColorSpace){throw new Error('ColorSpace._cache - expected "parsedColorSpace" argument.');}var csName,csRef;if(cacheKey instanceof Ref){csRef=cacheKey;cacheKey=xref.fetch(cacheKey);}if(cacheKey instanceof Name){csName=cacheKey.name;}if(csName||csRef){localColorSpaceCache.set(csName,csRef,parsedColorSpace);}}},{key:"getCached",value:function getCached(cacheKey,xref,localColorSpaceCache){if(!localColorSpaceCache){throw new Error('ColorSpace.getCached - expected "localColorSpaceCache" argument.');}if(cacheKey instanceof Ref){var localColorSpace=localColorSpaceCache.getByRef(cacheKey);if(localColorSpace){return localColorSpace;}try{cacheKey=xref.fetch(cacheKey);}catch(ex){if(ex instanceof MissingDataException){throw ex;}}}if(cacheKey instanceof Name){var _localColorSpace=localColorSpaceCache.getByName(cacheKey.name);if(_localColorSpace){return _localColorSpace;}}return null;}},{key:"parseAsync",value:function(){var _parseAsync=colorspace_asyncToGenerator(/*#__PURE__*/colorspace_regeneratorRuntime().mark(function _callee(_ref){var cs,xref,_ref$resources,resources,pdfFunctionFactory,localColorSpaceCache,parsedColorSpace;return colorspace_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:cs=_ref.cs,xref=_ref.xref,_ref$resources=_ref.resources,resources=_ref$resources===void 0?null:_ref$resources,pdfFunctionFactory=_ref.pdfFunctionFactory,localColorSpaceCache=_ref.localColorSpaceCache;parsedColorSpace=this._parse(cs,xref,resources,pdfFunctionFactory);this._cache(cs,xref,localColorSpaceCache,parsedColorSpace);return _context.abrupt("return",parsedColorSpace);case 4:case"end":return _context.stop();}},_callee,this);}));function parseAsync(_x){return _parseAsync.apply(this,arguments);}return parseAsync;}()},{key:"parse",value:function parse(_ref2){var cs=_ref2.cs,xref=_ref2.xref,_ref2$resources=_ref2.resources,resources=_ref2$resources===void 0?null:_ref2$resources,pdfFunctionFactory=_ref2.pdfFunctionFactory,localColorSpaceCache=_ref2.localColorSpaceCache;var cachedColorSpace=this.getCached(cs,xref,localColorSpaceCache);if(cachedColorSpace){return cachedColorSpace;}var parsedColorSpace=this._parse(cs,xref,resources,pdfFunctionFactory);this._cache(cs,xref,localColorSpaceCache,parsedColorSpace);return parsedColorSpace;}},{key:"_parse",value:function _parse(cs,xref){var resources=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var pdfFunctionFactory=arguments.length>3?arguments[3]:undefined;cs=xref.fetchIfRef(cs);if(cs instanceof Name){switch(cs.name){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"Pattern":return new PatternCS(null);default:if(resources instanceof Dict){var colorSpaces=resources.get("ColorSpace");if(colorSpaces instanceof Dict){var resourcesCS=colorSpaces.get(cs.name);if(resourcesCS){if(resourcesCS instanceof Name){return this._parse(resourcesCS,xref,resources,pdfFunctionFactory);}cs=resourcesCS;break;}}}throw new FormatError("Unrecognized ColorSpace: ".concat(cs.name));}}if(Array.isArray(cs)){var mode=xref.fetchIfRef(cs[0]).name;var params,numComps,baseCS,whitePoint,blackPoint,gamma;switch(mode){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"CalGray":params=xref.fetchIfRef(cs[1]);whitePoint=params.getArray("WhitePoint");blackPoint=params.getArray("BlackPoint");gamma=params.get("Gamma");return new CalGrayCS(whitePoint,blackPoint,gamma);case"CalRGB":params=xref.fetchIfRef(cs[1]);whitePoint=params.getArray("WhitePoint");blackPoint=params.getArray("BlackPoint");gamma=params.getArray("Gamma");var matrix=params.getArray("Matrix");return new CalRGBCS(whitePoint,blackPoint,gamma,matrix);case"ICCBased":var stream=xref.fetchIfRef(cs[1]);var dict=stream.dict;numComps=dict.get("N");var alt=dict.get("Alternate");if(alt){var altCS=this._parse(alt,xref,resources,pdfFunctionFactory);if(altCS.numComps===numComps){return altCS;}warn("ICCBased color space: Ignoring incorrect /Alternate entry.");}if(numComps===1){return this.singletons.gray;}else if(numComps===3){return this.singletons.rgb;}else if(numComps===4){return this.singletons.cmyk;}break;case"Pattern":baseCS=cs[1]||null;if(baseCS){baseCS=this._parse(baseCS,xref,resources,pdfFunctionFactory);}return new PatternCS(baseCS);case"I":case"Indexed":baseCS=this._parse(cs[1],xref,resources,pdfFunctionFactory);var hiVal=xref.fetchIfRef(cs[2])+1;var lookup=xref.fetchIfRef(cs[3]);return new IndexedCS(baseCS,hiVal,lookup);case"Separation":case"DeviceN":var name=xref.fetchIfRef(cs[1]);numComps=Array.isArray(name)?name.length:1;baseCS=this._parse(cs[2],xref,resources,pdfFunctionFactory);var tintFn=pdfFunctionFactory.create(cs[3]);return new AlternateCS(numComps,baseCS,tintFn);case"Lab":params=xref.fetchIfRef(cs[1]);whitePoint=params.getArray("WhitePoint");blackPoint=params.getArray("BlackPoint");var range=params.getArray("Range");return new LabCS(whitePoint,blackPoint,range);default:throw new FormatError("Unimplemented ColorSpace object: ".concat(mode));}}throw new FormatError("Unrecognized ColorSpace object: ".concat(cs));}},{key:"isDefaultDecode",value:function isDefaultDecode(decode,numComps){if(!Array.isArray(decode)){return true;}if(numComps*2!==decode.length){warn("The decode map is not the correct length");return true;}for(var i=0,ii=decode.length;i<ii;i+=2){if(decode[i]!==0||decode[i+1]!==1){return false;}}return true;}},{key:"singletons",get:function get(){return shadow(this,"singletons",{get gray(){return shadow(this,"gray",new DeviceGrayCS());},get rgb(){return shadow(this,"rgb",new DeviceRgbCS());},get cmyk(){return shadow(this,"cmyk",new DeviceCmykCS());}});}}]);return ColorSpace;}();var AlternateCS=/*#__PURE__*/function(_ColorSpace){colorspace_inherits(AlternateCS,_ColorSpace);var _super=colorspace_createSuper(AlternateCS);function AlternateCS(numComps,base,tintFn){var _this;colorspace_classCallCheck(this,AlternateCS);_this=_super.call(this,"Alternate",numComps);_this.base=base;_this.tintFn=tintFn;_this.tmpBuf=new Float32Array(base.numComps);return _this;}colorspace_createClass(AlternateCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){var tmpBuf=this.tmpBuf;this.tintFn(src,srcOffset,tmpBuf,0);this.base.getRgbItem(tmpBuf,0,dest,destOffset);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var tintFn=this.tintFn;var base=this.base;var scale=1/((1<<bits)-1);var baseNumComps=base.numComps;var usesZeroToOneRange=base.usesZeroToOneRange;var isPassthrough=(base.isPassthrough(8)||!usesZeroToOneRange)&&alpha01===0;var pos=isPassthrough?destOffset:0;var baseBuf=isPassthrough?dest:new Uint8ClampedArray(baseNumComps*count);var numComps=this.numComps;var scaled=new Float32Array(numComps);var tinted=new Float32Array(baseNumComps);var i,j;for(i=0;i<count;i++){for(j=0;j<numComps;j++){scaled[j]=src[srcOffset++]*scale;}tintFn(scaled,0,tinted,0);if(usesZeroToOneRange){for(j=0;j<baseNumComps;j++){baseBuf[pos++]=tinted[j]*255;}}else{base.getRgbItem(tinted,0,baseBuf,pos);pos+=baseNumComps;}}if(!isPassthrough){base.getRgbBuffer(baseBuf,0,count,dest,destOffset,8,alpha01);}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return this.base.getOutputLength(inputLength*this.base.numComps/this.numComps,alpha01);}}]);return AlternateCS;}(ColorSpace);var PatternCS=/*#__PURE__*/function(_ColorSpace2){colorspace_inherits(PatternCS,_ColorSpace2);var _super2=colorspace_createSuper(PatternCS);function PatternCS(baseCS){var _this2;colorspace_classCallCheck(this,PatternCS);_this2=_super2.call(this,"Pattern",null);_this2.base=baseCS;return _this2;}colorspace_createClass(PatternCS,[{key:"isDefaultDecode",value:function isDefaultDecode(decodeMap,bpc){unreachable("Should not call PatternCS.isDefaultDecode");}}]);return PatternCS;}(ColorSpace);var IndexedCS=/*#__PURE__*/function(_ColorSpace3){colorspace_inherits(IndexedCS,_ColorSpace3);var _super3=colorspace_createSuper(IndexedCS);function IndexedCS(base,highVal,lookup){var _this3;colorspace_classCallCheck(this,IndexedCS);_this3=_super3.call(this,"Indexed",1);_this3.base=base;_this3.highVal=highVal;var length=base.numComps*highVal;_this3.lookup=new Uint8Array(length);if(lookup instanceof BaseStream){var bytes=lookup.getBytes(length);_this3.lookup.set(bytes);}else if(typeof lookup==="string"){for(var i=0;i<length;++i){_this3.lookup[i]=lookup.charCodeAt(i)&0xff;}}else{throw new FormatError("IndexedCS - unrecognized lookup table: ".concat(lookup));}return _this3;}colorspace_createClass(IndexedCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){var numComps=this.base.numComps;var start=src[srcOffset]*numComps;this.base.getRgbBuffer(this.lookup,start,1,dest,destOffset,8,0);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var base=this.base;var numComps=base.numComps;var outputDelta=base.getOutputLength(numComps,alpha01);var lookup=this.lookup;for(var i=0;i<count;++i){var lookupPos=src[srcOffset++]*numComps;base.getRgbBuffer(lookup,lookupPos,1,dest,destOffset,8,alpha01);destOffset+=outputDelta;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return this.base.getOutputLength(inputLength*this.base.numComps,alpha01);}},{key:"isDefaultDecode",value:function isDefaultDecode(decodeMap,bpc){if(!Array.isArray(decodeMap)){return true;}if(decodeMap.length!==2){warn("Decode map length is not correct");return true;}if(!Number.isInteger(bpc)||bpc<1){warn("Bits per component is not correct");return true;}return decodeMap[0]===0&&decodeMap[1]===(1<<bpc)-1;}}]);return IndexedCS;}(ColorSpace);var DeviceGrayCS=/*#__PURE__*/function(_ColorSpace4){colorspace_inherits(DeviceGrayCS,_ColorSpace4);var _super4=colorspace_createSuper(DeviceGrayCS);function DeviceGrayCS(){colorspace_classCallCheck(this,DeviceGrayCS);return _super4.call(this,"DeviceGray",1);}colorspace_createClass(DeviceGrayCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){var c=src[srcOffset]*255;dest[destOffset]=dest[destOffset+1]=dest[destOffset+2]=c;}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var scale=255/((1<<bits)-1);var j=srcOffset,q=destOffset;for(var i=0;i<count;++i){var c=scale*src[j++];dest[q++]=c;dest[q++]=c;dest[q++]=c;q+=alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01);}}]);return DeviceGrayCS;}(ColorSpace);var DeviceRgbCS=/*#__PURE__*/function(_ColorSpace5){colorspace_inherits(DeviceRgbCS,_ColorSpace5);var _super5=colorspace_createSuper(DeviceRgbCS);function DeviceRgbCS(){colorspace_classCallCheck(this,DeviceRgbCS);return _super5.call(this,"DeviceRGB",3);}colorspace_createClass(DeviceRgbCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){dest[destOffset]=src[srcOffset]*255;dest[destOffset+1]=src[srcOffset+1]*255;dest[destOffset+2]=src[srcOffset+2]*255;}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){if(bits===8&&alpha01===0){dest.set(src.subarray(srcOffset,srcOffset+count*3),destOffset);return;}var scale=255/((1<<bits)-1);var j=srcOffset,q=destOffset;for(var i=0;i<count;++i){dest[q++]=scale*src[j++];dest[q++]=scale*src[j++];dest[q++]=scale*src[j++];q+=alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01)/3|0;}},{key:"isPassthrough",value:function isPassthrough(bits){return bits===8;}}]);return DeviceRgbCS;}(ColorSpace);var _toRgb=/*#__PURE__*/new WeakSet();var DeviceCmykCS=/*#__PURE__*/function(_ColorSpace6){colorspace_inherits(DeviceCmykCS,_ColorSpace6);var _super6=colorspace_createSuper(DeviceCmykCS);function DeviceCmykCS(){var _this4;colorspace_classCallCheck(this,DeviceCmykCS);_this4=_super6.call(this,"DeviceCMYK",4);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this4),_toRgb);return _this4;}colorspace_createClass(DeviceCmykCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){_classPrivateMethodGet(this,_toRgb,_toRgb2).call(this,src,srcOffset,1,dest,destOffset);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var scale=1/((1<<bits)-1);for(var i=0;i<count;i++){_classPrivateMethodGet(this,_toRgb,_toRgb2).call(this,src,srcOffset,scale,dest,destOffset);srcOffset+=4;destOffset+=3+alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength/4*(3+alpha01)|0;}}]);return DeviceCmykCS;}(ColorSpace);function _toRgb2(src,srcOffset,srcScale,dest,destOffset){var c=src[srcOffset]*srcScale;var m=src[srcOffset+1]*srcScale;var y=src[srcOffset+2]*srcScale;var k=src[srcOffset+3]*srcScale;dest[destOffset]=255+c*(-4.387332384609988*c+54.48615194189176*m+18.82290502165302*y+212.25662451639585*k+-285.2331026137004)+m*(1.7149763477362134*m-5.6096736904047315*y+-17.873870861415444*k-5.497006427196366)+y*(-2.5217340131683033*y-21.248923337353073*k+17.5119270841813)+k*(-21.86122147463605*k-189.48180835922747);dest[destOffset+1]=255+c*(8.841041422036149*c+60.118027045597366*m+6.871425592049007*y+31.159100130055922*k+-79.2970844816548)+m*(-15.310361306967817*m+17.575251261109482*y+131.35250912493976*k-190.9453302588951)+y*(4.444339102852739*y+9.8632861493405*k-24.86741582555878)+k*(-20.737325471181034*k-187.80453709719578);dest[destOffset+2]=255+c*(0.8842522430003296*c+8.078677503112928*m+30.89978309703729*y-0.23883238689178934*k+-14.183576799673286)+m*(10.49593273432072*m+63.02378494754052*y+50.606957656360734*k-112.23884253719248)+y*(0.03296041114873217*y+115.60384449646641*k+-193.58209356861505)+k*(-22.33816807309886*k-180.12613974708367);}var _toRgb3=/*#__PURE__*/new WeakSet();var CalGrayCS=/*#__PURE__*/function(_ColorSpace7){colorspace_inherits(CalGrayCS,_ColorSpace7);var _super7=colorspace_createSuper(CalGrayCS);function CalGrayCS(whitePoint,blackPoint,gamma){var _this5;colorspace_classCallCheck(this,CalGrayCS);_this5=_super7.call(this,"CalGray",1);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this5),_toRgb3);if(!whitePoint){throw new FormatError("WhitePoint missing - required for color space CalGray");}var _whitePoint=colorspace_slicedToArray(whitePoint,3);_this5.XW=_whitePoint[0];_this5.YW=_whitePoint[1];_this5.ZW=_whitePoint[2];var _ref3=blackPoint||[0,0,0];var _ref4=colorspace_slicedToArray(_ref3,3);_this5.XB=_ref4[0];_this5.YB=_ref4[1];_this5.ZB=_ref4[2];_this5.G=gamma||1;if(_this5.XW<0||_this5.ZW<0||_this5.YW!==1){throw new FormatError("Invalid WhitePoint components for ".concat(_this5.name,", no fallback available"));}if(_this5.XB<0||_this5.YB<0||_this5.ZB<0){info("Invalid BlackPoint for ".concat(_this5.name,", falling back to default."));_this5.XB=_this5.YB=_this5.ZB=0;}if(_this5.XB!==0||_this5.YB!==0||_this5.ZB!==0){warn("".concat(_this5.name,", BlackPoint: XB: ").concat(_this5.XB,", YB: ").concat(_this5.YB,", ")+"ZB: ".concat(_this5.ZB,", only default values are supported."));}if(_this5.G<1){info("Invalid Gamma: ".concat(_this5.G," for ").concat(_this5.name,", falling back to default."));_this5.G=1;}return _this5;}colorspace_createClass(CalGrayCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){_classPrivateMethodGet(this,_toRgb3,_toRgb4).call(this,src,srcOffset,dest,destOffset,1);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var scale=1/((1<<bits)-1);for(var i=0;i<count;++i){_classPrivateMethodGet(this,_toRgb3,_toRgb4).call(this,src,srcOffset,dest,destOffset,scale);srcOffset+=1;destOffset+=3+alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01);}}]);return CalGrayCS;}(ColorSpace);function _toRgb4(src,srcOffset,dest,destOffset,scale){var A=src[srcOffset]*scale;var AG=Math.pow(A,this.G);var L=this.YW*AG;var val=Math.max(295.8*Math.pow(L,0.3333333333333333)-40.8,0);dest[destOffset]=val;dest[destOffset+1]=val;dest[destOffset+2]=val;}var _matrixProduct=/*#__PURE__*/new WeakSet();var _toFlat=/*#__PURE__*/new WeakSet();var _toD=/*#__PURE__*/new WeakSet();var _sRGBTransferFunction=/*#__PURE__*/new WeakSet();var _adjustToRange=/*#__PURE__*/new WeakSet();var _decodeL=/*#__PURE__*/new WeakSet();var _compensateBlackPoint=/*#__PURE__*/new WeakSet();var _normalizeWhitePointToFlat=/*#__PURE__*/new WeakSet();var _normalizeWhitePointToD=/*#__PURE__*/new WeakSet();var _toRgb5=/*#__PURE__*/new WeakSet();var CalRGBCS=/*#__PURE__*/function(_ColorSpace8){colorspace_inherits(CalRGBCS,_ColorSpace8);var _super8=colorspace_createSuper(CalRGBCS);function CalRGBCS(whitePoint,blackPoint,gamma,matrix){var _this6;colorspace_classCallCheck(this,CalRGBCS);_this6=_super8.call(this,"CalRGB",3);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this6),_toRgb5);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this6),_normalizeWhitePointToD);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this6),_normalizeWhitePointToFlat);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this6),_compensateBlackPoint);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this6),_decodeL);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this6),_adjustToRange);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this6),_sRGBTransferFunction);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this6),_toD);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this6),_toFlat);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this6),_matrixProduct);if(!whitePoint){throw new FormatError("WhitePoint missing - required for color space CalRGB");}var _this6$whitePoint=_this6.whitePoint=whitePoint,_this6$whitePoint2=colorspace_slicedToArray(_this6$whitePoint,3),XW=_this6$whitePoint2[0],YW=_this6$whitePoint2[1],ZW=_this6$whitePoint2[2];var _this6$blackPoint=_this6.blackPoint=blackPoint||new Float32Array(3),_this6$blackPoint2=colorspace_slicedToArray(_this6$blackPoint,3),XB=_this6$blackPoint2[0],YB=_this6$blackPoint2[1],ZB=_this6$blackPoint2[2];var _ref5=gamma||new Float32Array([1,1,1]);var _ref6=colorspace_slicedToArray(_ref5,3);_this6.GR=_ref6[0];_this6.GG=_ref6[1];_this6.GB=_ref6[2];var _ref7=matrix||new Float32Array([1,0,0,0,1,0,0,0,1]);var _ref8=colorspace_slicedToArray(_ref7,9);_this6.MXA=_ref8[0];_this6.MYA=_ref8[1];_this6.MZA=_ref8[2];_this6.MXB=_ref8[3];_this6.MYB=_ref8[4];_this6.MZB=_ref8[5];_this6.MXC=_ref8[6];_this6.MYC=_ref8[7];_this6.MZC=_ref8[8];if(XW<0||ZW<0||YW!==1){throw new FormatError("Invalid WhitePoint components for ".concat(_this6.name,", no fallback available"));}if(XB<0||YB<0||ZB<0){info("Invalid BlackPoint for ".concat(_this6.name," [").concat(XB,", ").concat(YB,", ").concat(ZB,"], ")+"falling back to default.");_this6.blackPoint=new Float32Array(3);}if(_this6.GR<0||_this6.GG<0||_this6.GB<0){info("Invalid Gamma [".concat(_this6.GR,", ").concat(_this6.GG,", ").concat(_this6.GB,"] for ")+"".concat(_this6.name,", falling back to default."));_this6.GR=_this6.GG=_this6.GB=1;}return _this6;}colorspace_createClass(CalRGBCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){_classPrivateMethodGet(this,_toRgb5,_toRgb6).call(this,src,srcOffset,dest,destOffset,1);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var scale=1/((1<<bits)-1);for(var i=0;i<count;++i){_classPrivateMethodGet(this,_toRgb5,_toRgb6).call(this,src,srcOffset,dest,destOffset,scale);srcOffset+=3;destOffset+=3+alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01)/3|0;}}]);return CalRGBCS;}(ColorSpace);_class3=CalRGBCS;function _matrixProduct2(a,b,result){result[0]=a[0]*b[0]+a[1]*b[1]+a[2]*b[2];result[1]=a[3]*b[0]+a[4]*b[1]+a[5]*b[2];result[2]=a[6]*b[0]+a[7]*b[1]+a[8]*b[2];}function _toFlat2(sourceWhitePoint,LMS,result){result[0]=LMS[0]*1/sourceWhitePoint[0];result[1]=LMS[1]*1/sourceWhitePoint[1];result[2]=LMS[2]*1/sourceWhitePoint[2];}function _toD2(sourceWhitePoint,LMS,result){var D65X=0.95047;var D65Y=1;var D65Z=1.08883;result[0]=LMS[0]*D65X/sourceWhitePoint[0];result[1]=LMS[1]*D65Y/sourceWhitePoint[1];result[2]=LMS[2]*D65Z/sourceWhitePoint[2];}function _sRGBTransferFunction2(color){if(color<=0.0031308){return _classPrivateMethodGet(this,_adjustToRange,_adjustToRange2).call(this,0,1,12.92*color);}if(color>=0.99554525){return 1;}return _classPrivateMethodGet(this,_adjustToRange,_adjustToRange2).call(this,0,1,(1+0.055)*Math.pow(color,1/2.4)-0.055);}function _adjustToRange2(min,max,value){return Math.max(min,Math.min(max,value));}function _decodeL2(L){if(L<0){return-_classPrivateMethodGet(this,_decodeL,_decodeL2).call(this,-L);}if(L>8.0){return Math.pow((L+16)/116,3);}return L*_classStaticPrivateFieldSpecGet(_class3,_class3,_DECODE_L_CONSTANT);}function _compensateBlackPoint2(sourceBlackPoint,XYZ_Flat,result){if(sourceBlackPoint[0]===0&&sourceBlackPoint[1]===0&&sourceBlackPoint[2]===0){result[0]=XYZ_Flat[0];result[1]=XYZ_Flat[1];result[2]=XYZ_Flat[2];return;}var zeroDecodeL=_classPrivateMethodGet(this,_decodeL,_decodeL2).call(this,0);var X_DST=zeroDecodeL;var X_SRC=_classPrivateMethodGet(this,_decodeL,_decodeL2).call(this,sourceBlackPoint[0]);var Y_DST=zeroDecodeL;var Y_SRC=_classPrivateMethodGet(this,_decodeL,_decodeL2).call(this,sourceBlackPoint[1]);var Z_DST=zeroDecodeL;var Z_SRC=_classPrivateMethodGet(this,_decodeL,_decodeL2).call(this,sourceBlackPoint[2]);var X_Scale=(1-X_DST)/(1-X_SRC);var X_Offset=1-X_Scale;var Y_Scale=(1-Y_DST)/(1-Y_SRC);var Y_Offset=1-Y_Scale;var Z_Scale=(1-Z_DST)/(1-Z_SRC);var Z_Offset=1-Z_Scale;result[0]=XYZ_Flat[0]*X_Scale+X_Offset;result[1]=XYZ_Flat[1]*Y_Scale+Y_Offset;result[2]=XYZ_Flat[2]*Z_Scale+Z_Offset;}function _normalizeWhitePointToFlat2(sourceWhitePoint,XYZ_In,result){if(sourceWhitePoint[0]===1&&sourceWhitePoint[2]===1){result[0]=XYZ_In[0];result[1]=XYZ_In[1];result[2]=XYZ_In[2];return;}var LMS=result;_classPrivateMethodGet(this,_matrixProduct,_matrixProduct2).call(this,_classStaticPrivateFieldSpecGet(_class3,_class3,_BRADFORD_SCALE_MATRIX),XYZ_In,LMS);var LMS_Flat=_classStaticPrivateFieldSpecGet(_class3,_class3,_tempNormalizeMatrix);_classPrivateMethodGet(this,_toFlat,_toFlat2).call(this,sourceWhitePoint,LMS,LMS_Flat);_classPrivateMethodGet(this,_matrixProduct,_matrixProduct2).call(this,_classStaticPrivateFieldSpecGet(_class3,_class3,_BRADFORD_SCALE_INVERSE_MATRIX),LMS_Flat,result);}function _normalizeWhitePointToD2(sourceWhitePoint,XYZ_In,result){var LMS=result;_classPrivateMethodGet(this,_matrixProduct,_matrixProduct2).call(this,_classStaticPrivateFieldSpecGet(_class3,_class3,_BRADFORD_SCALE_MATRIX),XYZ_In,LMS);var LMS_D65=_classStaticPrivateFieldSpecGet(_class3,_class3,_tempNormalizeMatrix);_classPrivateMethodGet(this,_toD,_toD2).call(this,sourceWhitePoint,LMS,LMS_D65);_classPrivateMethodGet(this,_matrixProduct,_matrixProduct2).call(this,_classStaticPrivateFieldSpecGet(_class3,_class3,_BRADFORD_SCALE_INVERSE_MATRIX),LMS_D65,result);}function _toRgb6(src,srcOffset,dest,destOffset,scale){var A=_classPrivateMethodGet(this,_adjustToRange,_adjustToRange2).call(this,0,1,src[srcOffset]*scale);var B=_classPrivateMethodGet(this,_adjustToRange,_adjustToRange2).call(this,0,1,src[srcOffset+1]*scale);var C=_classPrivateMethodGet(this,_adjustToRange,_adjustToRange2).call(this,0,1,src[srcOffset+2]*scale);var AGR=A===1?1:Math.pow(A,this.GR);var BGG=B===1?1:Math.pow(B,this.GG);var CGB=C===1?1:Math.pow(C,this.GB);var X=this.MXA*AGR+this.MXB*BGG+this.MXC*CGB;var Y=this.MYA*AGR+this.MYB*BGG+this.MYC*CGB;var Z=this.MZA*AGR+this.MZB*BGG+this.MZC*CGB;var XYZ=_classStaticPrivateFieldSpecGet(_class3,_class3,_tempConvertMatrix);XYZ[0]=X;XYZ[1]=Y;XYZ[2]=Z;var XYZ_Flat=_classStaticPrivateFieldSpecGet(_class3,_class3,_tempConvertMatrix2);_classPrivateMethodGet(this,_normalizeWhitePointToFlat,_normalizeWhitePointToFlat2).call(this,this.whitePoint,XYZ,XYZ_Flat);var XYZ_Black=_classStaticPrivateFieldSpecGet(_class3,_class3,_tempConvertMatrix);_classPrivateMethodGet(this,_compensateBlackPoint,_compensateBlackPoint2).call(this,this.blackPoint,XYZ_Flat,XYZ_Black);var XYZ_D65=_classStaticPrivateFieldSpecGet(_class3,_class3,_tempConvertMatrix2);_classPrivateMethodGet(this,_normalizeWhitePointToD,_normalizeWhitePointToD2).call(this,_classStaticPrivateFieldSpecGet(_class3,_class3,_FLAT_WHITEPOINT_MATRIX),XYZ_Black,XYZ_D65);var SRGB=_classStaticPrivateFieldSpecGet(_class3,_class3,_tempConvertMatrix);_classPrivateMethodGet(this,_matrixProduct,_matrixProduct2).call(this,_classStaticPrivateFieldSpecGet(_class3,_class3,_SRGB_D65_XYZ_TO_RGB_MATRIX),XYZ_D65,SRGB);dest[destOffset]=_classPrivateMethodGet(this,_sRGBTransferFunction,_sRGBTransferFunction2).call(this,SRGB[0])*255;dest[destOffset+1]=_classPrivateMethodGet(this,_sRGBTransferFunction,_sRGBTransferFunction2).call(this,SRGB[1])*255;dest[destOffset+2]=_classPrivateMethodGet(this,_sRGBTransferFunction,_sRGBTransferFunction2).call(this,SRGB[2])*255;}var _BRADFORD_SCALE_MATRIX={writable:true,value:new Float32Array([0.8951,0.2664,-0.1614,-0.7502,1.7135,0.0367,0.0389,-0.0685,1.0296])};var _BRADFORD_SCALE_INVERSE_MATRIX={writable:true,value:new Float32Array([0.9869929,-0.1470543,0.1599627,0.4323053,0.5183603,0.0492912,-0.0085287,0.0400428,0.9684867])};var _SRGB_D65_XYZ_TO_RGB_MATRIX={writable:true,value:new Float32Array([3.2404542,-1.5371385,-0.4985314,-0.9692660,1.8760108,0.0415560,0.0556434,-0.2040259,1.0572252])};var _FLAT_WHITEPOINT_MATRIX={writable:true,value:new Float32Array([1,1,1])};var _tempNormalizeMatrix={writable:true,value:new Float32Array(3)};var _tempConvertMatrix={writable:true,value:new Float32Array(3)};var _tempConvertMatrix2={writable:true,value:new Float32Array(3)};var _DECODE_L_CONSTANT={writable:true,value:Math.pow((8+16)/116,3)/8.0};var _fn_g=/*#__PURE__*/new WeakSet();var _decode=/*#__PURE__*/new WeakSet();var _toRgb7=/*#__PURE__*/new WeakSet();var LabCS=/*#__PURE__*/function(_ColorSpace9){colorspace_inherits(LabCS,_ColorSpace9);var _super9=colorspace_createSuper(LabCS);function LabCS(whitePoint,blackPoint,range){var _this7;colorspace_classCallCheck(this,LabCS);_this7=_super9.call(this,"Lab",3);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this7),_toRgb7);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this7),_decode);_classPrivateMethodInitSpec(colorspace_assertThisInitialized(_this7),_fn_g);if(!whitePoint){throw new FormatError("WhitePoint missing - required for color space Lab");}var _whitePoint2=colorspace_slicedToArray(whitePoint,3);_this7.XW=_whitePoint2[0];_this7.YW=_whitePoint2[1];_this7.ZW=_whitePoint2[2];var _ref9=range||[-100,100,-100,100];var _ref10=colorspace_slicedToArray(_ref9,4);_this7.amin=_ref10[0];_this7.amax=_ref10[1];_this7.bmin=_ref10[2];_this7.bmax=_ref10[3];var _ref11=blackPoint||[0,0,0];var _ref12=colorspace_slicedToArray(_ref11,3);_this7.XB=_ref12[0];_this7.YB=_ref12[1];_this7.ZB=_ref12[2];if(_this7.XW<0||_this7.ZW<0||_this7.YW!==1){throw new FormatError("Invalid WhitePoint components, no fallback available");}if(_this7.XB<0||_this7.YB<0||_this7.ZB<0){info("Invalid BlackPoint, falling back to default");_this7.XB=_this7.YB=_this7.ZB=0;}if(_this7.amin>_this7.amax||_this7.bmin>_this7.bmax){info("Invalid Range, falling back to defaults");_this7.amin=-100;_this7.amax=100;_this7.bmin=-100;_this7.bmax=100;}return _this7;}colorspace_createClass(LabCS,[{key:"getRgbItem",value:function getRgbItem(src,srcOffset,dest,destOffset){_classPrivateMethodGet(this,_toRgb7,_toRgb8).call(this,src,srcOffset,false,dest,destOffset);}},{key:"getRgbBuffer",value:function getRgbBuffer(src,srcOffset,count,dest,destOffset,bits,alpha01){var maxVal=(1<<bits)-1;for(var i=0;i<count;i++){_classPrivateMethodGet(this,_toRgb7,_toRgb8).call(this,src,srcOffset,maxVal,dest,destOffset);srcOffset+=3;destOffset+=3+alpha01;}}},{key:"getOutputLength",value:function getOutputLength(inputLength,alpha01){return inputLength*(3+alpha01)/3|0;}},{key:"isDefaultDecode",value:function isDefaultDecode(decodeMap,bpc){return true;}},{key:"usesZeroToOneRange",get:function get(){return shadow(this,"usesZeroToOneRange",false);}}]);return LabCS;}(ColorSpace);function _fn_g2(x){return x>=6/29?Math.pow(x,3):108/841*(x-4/29);}function _decode2(value,high1,low2,high2){return low2+value*(high2-low2)/high1;}function _toRgb8(src,srcOffset,maxVal,dest,destOffset){var Ls=src[srcOffset];var as=src[srcOffset+1];var bs=src[srcOffset+2];if(maxVal!==false){Ls=_classPrivateMethodGet(this,_decode,_decode2).call(this,Ls,maxVal,0,100);as=_classPrivateMethodGet(this,_decode,_decode2).call(this,as,maxVal,this.amin,this.amax);bs=_classPrivateMethodGet(this,_decode,_decode2).call(this,bs,maxVal,this.bmin,this.bmax);}if(as>this.amax){as=this.amax;}else if(as<this.amin){as=this.amin;}if(bs>this.bmax){bs=this.bmax;}else if(bs<this.bmin){bs=this.bmin;}var M=(Ls+16)/116;var L=M+as/500;var N=M-bs/200;var X=this.XW*_classPrivateMethodGet(this,_fn_g,_fn_g2).call(this,L);var Y=this.YW*_classPrivateMethodGet(this,_fn_g,_fn_g2).call(this,M);var Z=this.ZW*_classPrivateMethodGet(this,_fn_g,_fn_g2).call(this,N);var r,g,b;if(this.ZW<1){r=X*3.1339+Y*-1.617+Z*-0.4906;g=X*-0.9785+Y*1.916+Z*0.0333;b=X*0.072+Y*-0.229+Z*1.4057;}else{r=X*3.2406+Y*-1.5372+Z*-0.4986;g=X*-0.9689+Y*1.8758+Z*0.0415;b=X*0.0557+Y*-0.204+Z*1.057;}dest[destOffset]=Math.sqrt(r)*255;dest[destOffset+1]=Math.sqrt(g)*255;dest[destOffset+2]=Math.sqrt(b)*255;}
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.freeze.js
var es_object_freeze = __webpack_require__(4441);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.sign.js
var es_math_sign = __webpack_require__(4165);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.from-code-point.js
var es_string_from_code_point = __webpack_require__(2707);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.fill.js
var es_array_fill = __webpack_require__(6394);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.index-of.js
var es_array_index_of = __webpack_require__(8649);
;// CONCATENATED MODULE: ./src/core/binary_cmap.js
function binary_cmap_typeof(o){"@babel/helpers - typeof";return binary_cmap_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},binary_cmap_typeof(o);}function binary_cmap_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */binary_cmap_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==binary_cmap_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(binary_cmap_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function binary_cmap_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function binary_cmap_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){binary_cmap_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){binary_cmap_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function binary_cmap_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function binary_cmap_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,binary_cmap_toPropertyKey(descriptor.key),descriptor);}}function binary_cmap_createClass(Constructor,protoProps,staticProps){if(protoProps)binary_cmap_defineProperties(Constructor.prototype,protoProps);if(staticProps)binary_cmap_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function binary_cmap_toPropertyKey(arg){var key=binary_cmap_toPrimitive(arg,"string");return binary_cmap_typeof(key)==="symbol"?key:String(key);}function binary_cmap_toPrimitive(input,hint){if(binary_cmap_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(binary_cmap_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function binary_cmap_toConsumableArray(arr){return binary_cmap_arrayWithoutHoles(arr)||binary_cmap_iterableToArray(arr)||binary_cmap_unsupportedIterableToArray(arr)||binary_cmap_nonIterableSpread();}function binary_cmap_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function binary_cmap_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return binary_cmap_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return binary_cmap_arrayLikeToArray(o,minLen);}function binary_cmap_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function binary_cmap_arrayWithoutHoles(arr){if(Array.isArray(arr))return binary_cmap_arrayLikeToArray(arr);}function binary_cmap_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function hexToInt(a,size){var n=0;for(var i=0;i<=size;i++){n=n<<8|a[i];}return n>>>0;}function hexToStr(a,size){if(size===1){return String.fromCharCode(a[0],a[1]);}if(size===3){return String.fromCharCode(a[0],a[1],a[2],a[3]);}return String.fromCharCode.apply(String,binary_cmap_toConsumableArray(a.subarray(0,size+1)));}function addHex(a,b,size){var c=0;for(var i=size;i>=0;i--){c+=a[i]+b[i];a[i]=c&255;c>>=8;}}function incHex(a,size){var c=1;for(var i=size;i>=0&&c>0;i--){c+=a[i];a[i]=c&255;c>>=8;}}var MAX_NUM_SIZE=16;var MAX_ENCODED_NUM_SIZE=19;var BinaryCMapStream=/*#__PURE__*/function(){function BinaryCMapStream(data){binary_cmap_classCallCheck(this,BinaryCMapStream);this.buffer=data;this.pos=0;this.end=data.length;this.tmpBuf=new Uint8Array(MAX_ENCODED_NUM_SIZE);}binary_cmap_createClass(BinaryCMapStream,[{key:"readByte",value:function readByte(){if(this.pos>=this.end){return-1;}return this.buffer[this.pos++];}},{key:"readNumber",value:function readNumber(){var n=0;var last;do{var b=this.readByte();if(b<0){throw new FormatError("unexpected EOF in bcmap");}last=!(b&0x80);n=n<<7|b&0x7f;}while(!last);return n;}},{key:"readSigned",value:function readSigned(){var n=this.readNumber();return n&1?~(n>>>1):n>>>1;}},{key:"readHex",value:function readHex(num,size){num.set(this.buffer.subarray(this.pos,this.pos+size+1));this.pos+=size+1;}},{key:"readHexNumber",value:function readHexNumber(num,size){var last;var stack=this.tmpBuf;var sp=0;do{var b=this.readByte();if(b<0){throw new FormatError("unexpected EOF in bcmap");}last=!(b&0x80);stack[sp++]=b&0x7f;}while(!last);var i=size,buffer=0,bufferSize=0;while(i>=0){while(bufferSize<8&&stack.length>0){buffer|=stack[--sp]<<bufferSize;bufferSize+=7;}num[i]=buffer&255;i--;buffer>>=8;bufferSize-=8;}}},{key:"readHexSigned",value:function readHexSigned(num,size){this.readHexNumber(num,size);var sign=num[size]&1?255:0;var c=0;for(var i=0;i<=size;i++){c=(c&1)<<8|num[i];num[i]=c>>1^sign;}}},{key:"readString",value:function readString(){var len=this.readNumber(),buf=new Array(len);for(var i=0;i<len;i++){buf[i]=this.readNumber();}return String.fromCharCode.apply(String,buf);}}]);return BinaryCMapStream;}();var BinaryCMapReader=/*#__PURE__*/function(){function BinaryCMapReader(){binary_cmap_classCallCheck(this,BinaryCMapReader);}binary_cmap_createClass(BinaryCMapReader,[{key:"process",value:function(){var _process=binary_cmap_asyncToGenerator(/*#__PURE__*/binary_cmap_regeneratorRuntime().mark(function _callee(data,cMap,extend){var stream,header,useCMap,start,end,char,charCode,tmp,code,b,type,sequence,dataSize,ucs2DataSize,subitemsCount,i,_i,_i2,_i3,_i4,_i5;return binary_cmap_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:stream=new BinaryCMapStream(data);header=stream.readByte();cMap.vertical=!!(header&1);useCMap=null;start=new Uint8Array(MAX_NUM_SIZE);end=new Uint8Array(MAX_NUM_SIZE);char=new Uint8Array(MAX_NUM_SIZE);charCode=new Uint8Array(MAX_NUM_SIZE);tmp=new Uint8Array(MAX_NUM_SIZE);case 9:if(!((b=stream.readByte())>=0)){_context.next=68;break;}type=b>>5;if(!(type===7)){_context.next=20;break;}_context.t0=b&0x1f;_context.next=_context.t0===0?15:_context.t0===1?17:19;break;case 15:stream.readString();return _context.abrupt("break",19);case 17:useCMap=stream.readString();return _context.abrupt("break",19);case 19:return _context.abrupt("continue",9);case 20:sequence=!!(b&0x10);dataSize=b&15;if(!(dataSize+1>MAX_NUM_SIZE)){_context.next=24;break;}throw new Error("BinaryCMapReader.process: Invalid dataSize.");case 24:ucs2DataSize=1;subitemsCount=stream.readNumber();_context.t1=type;_context.next=_context.t1===0?29:_context.t1===1?35:_context.t1===2?41:_context.t1===3?46:_context.t1===4?53:_context.t1===5?58:65;break;case 29:stream.readHex(start,dataSize);stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);cMap.addCodespaceRange(dataSize+1,hexToInt(start,dataSize),hexToInt(end,dataSize));for(i=1;i<subitemsCount;i++){incHex(end,dataSize);stream.readHexNumber(start,dataSize);addHex(start,end,dataSize);stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);cMap.addCodespaceRange(dataSize+1,hexToInt(start,dataSize),hexToInt(end,dataSize));}return _context.abrupt("break",66);case 35:stream.readHex(start,dataSize);stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);stream.readNumber();for(_i=1;_i<subitemsCount;_i++){incHex(end,dataSize);stream.readHexNumber(start,dataSize);addHex(start,end,dataSize);stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);stream.readNumber();}return _context.abrupt("break",66);case 41:stream.readHex(char,dataSize);code=stream.readNumber();cMap.mapOne(hexToInt(char,dataSize),code);for(_i2=1;_i2<subitemsCount;_i2++){incHex(char,dataSize);if(!sequence){stream.readHexNumber(tmp,dataSize);addHex(char,tmp,dataSize);}code=stream.readSigned()+(code+1);cMap.mapOne(hexToInt(char,dataSize),code);}return _context.abrupt("break",66);case 46:stream.readHex(start,dataSize);stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);code=stream.readNumber();cMap.mapCidRange(hexToInt(start,dataSize),hexToInt(end,dataSize),code);for(_i3=1;_i3<subitemsCount;_i3++){incHex(end,dataSize);if(!sequence){stream.readHexNumber(start,dataSize);addHex(start,end,dataSize);}else{start.set(end);}stream.readHexNumber(end,dataSize);addHex(end,start,dataSize);code=stream.readNumber();cMap.mapCidRange(hexToInt(start,dataSize),hexToInt(end,dataSize),code);}return _context.abrupt("break",66);case 53:stream.readHex(char,ucs2DataSize);stream.readHex(charCode,dataSize);cMap.mapOne(hexToInt(char,ucs2DataSize),hexToStr(charCode,dataSize));for(_i4=1;_i4<subitemsCount;_i4++){incHex(char,ucs2DataSize);if(!sequence){stream.readHexNumber(tmp,ucs2DataSize);addHex(char,tmp,ucs2DataSize);}incHex(charCode,dataSize);stream.readHexSigned(tmp,dataSize);addHex(charCode,tmp,dataSize);cMap.mapOne(hexToInt(char,ucs2DataSize),hexToStr(charCode,dataSize));}return _context.abrupt("break",66);case 58:stream.readHex(start,ucs2DataSize);stream.readHexNumber(end,ucs2DataSize);addHex(end,start,ucs2DataSize);stream.readHex(charCode,dataSize);cMap.mapBfRange(hexToInt(start,ucs2DataSize),hexToInt(end,ucs2DataSize),hexToStr(charCode,dataSize));for(_i5=1;_i5<subitemsCount;_i5++){incHex(end,ucs2DataSize);if(!sequence){stream.readHexNumber(start,ucs2DataSize);addHex(start,end,ucs2DataSize);}else{start.set(end);}stream.readHexNumber(end,ucs2DataSize);addHex(end,start,ucs2DataSize);stream.readHex(charCode,dataSize);cMap.mapBfRange(hexToInt(start,ucs2DataSize),hexToInt(end,ucs2DataSize),hexToStr(charCode,dataSize));}return _context.abrupt("break",66);case 65:throw new Error("BinaryCMapReader.process - unknown type: ".concat(type));case 66:_context.next=9;break;case 68:if(!useCMap){_context.next=70;break;}return _context.abrupt("return",extend(useCMap));case 70:return _context.abrupt("return",cMap);case 71:case"end":return _context.stop();}},_callee);}));function process(_x,_x2,_x3){return _process.apply(this,arguments);}return process;}()}]);return BinaryCMapReader;}();
;// CONCATENATED MODULE: ./src/core/decode_stream.js
function decode_stream_typeof(o){"@babel/helpers - typeof";return decode_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},decode_stream_typeof(o);}function decode_stream_toConsumableArray(arr){return decode_stream_arrayWithoutHoles(arr)||decode_stream_iterableToArray(arr)||decode_stream_unsupportedIterableToArray(arr)||decode_stream_nonIterableSpread();}function decode_stream_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function decode_stream_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function decode_stream_arrayWithoutHoles(arr){if(Array.isArray(arr))return decode_stream_arrayLikeToArray(arr);}function decode_stream_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=decode_stream_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function decode_stream_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return decode_stream_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return decode_stream_arrayLikeToArray(o,minLen);}function decode_stream_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function decode_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function decode_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,decode_stream_toPropertyKey(descriptor.key),descriptor);}}function decode_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)decode_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)decode_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function decode_stream_toPropertyKey(arg){var key=decode_stream_toPrimitive(arg,"string");return decode_stream_typeof(key)==="symbol"?key:String(key);}function decode_stream_toPrimitive(input,hint){if(decode_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(decode_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function decode_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)decode_stream_setPrototypeOf(subClass,superClass);}function decode_stream_setPrototypeOf(o,p){decode_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return decode_stream_setPrototypeOf(o,p);}function decode_stream_createSuper(Derived){var hasNativeReflectConstruct=decode_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=decode_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=decode_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return decode_stream_possibleConstructorReturn(this,result);};}function decode_stream_possibleConstructorReturn(self,call){if(call&&(decode_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return decode_stream_assertThisInitialized(self);}function decode_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function decode_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function decode_stream_getPrototypeOf(o){decode_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return decode_stream_getPrototypeOf(o);}var emptyBuffer=new Uint8Array(0);var DecodeStream=/*#__PURE__*/function(_BaseStream){decode_stream_inherits(DecodeStream,_BaseStream);var _super=decode_stream_createSuper(DecodeStream);function DecodeStream(maybeMinBufferLength){var _this;decode_stream_classCallCheck(this,DecodeStream);_this=_super.call(this);_this._rawMinBufferLength=maybeMinBufferLength||0;_this.pos=0;_this.bufferLength=0;_this.eof=false;_this.buffer=emptyBuffer;_this.minBufferLength=512;if(maybeMinBufferLength){while(_this.minBufferLength<maybeMinBufferLength){_this.minBufferLength*=2;}}return _this;}decode_stream_createClass(DecodeStream,[{key:"isEmpty",get:function get(){while(!this.eof&&this.bufferLength===0){this.readBlock();}return this.bufferLength===0;}},{key:"ensureBuffer",value:function ensureBuffer(requested){var buffer=this.buffer;if(requested<=buffer.byteLength){return buffer;}var size=this.minBufferLength;while(size<requested){size*=2;}var buffer2=new Uint8Array(size);buffer2.set(buffer);return this.buffer=buffer2;}},{key:"getByte",value:function getByte(){var pos=this.pos;while(this.bufferLength<=pos){if(this.eof){return-1;}this.readBlock();}return this.buffer[this.pos++];}},{key:"getBytes",value:function getBytes(length){var pos=this.pos;var end;if(length){this.ensureBuffer(pos+length);end=pos+length;while(!this.eof&&this.bufferLength<end){this.readBlock();}var bufEnd=this.bufferLength;if(end>bufEnd){end=bufEnd;}}else{while(!this.eof){this.readBlock();}end=this.bufferLength;}this.pos=end;return this.buffer.subarray(pos,end);}},{key:"reset",value:function reset(){this.pos=0;}},{key:"makeSubStream",value:function makeSubStream(start,length){var dict=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(length===undefined){while(!this.eof){this.readBlock();}}else{var end=start+length;while(this.bufferLength<=end&&!this.eof){this.readBlock();}}return new Stream(this.buffer,start,length,dict);}},{key:"getBaseStreams",value:function getBaseStreams(){return this.str?this.str.getBaseStreams():null;}}]);return DecodeStream;}(BaseStream);var StreamsSequenceStream=/*#__PURE__*/function(_DecodeStream){decode_stream_inherits(StreamsSequenceStream,_DecodeStream);var _super2=decode_stream_createSuper(StreamsSequenceStream);function StreamsSequenceStream(streams){var _this2;var onError=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;decode_stream_classCallCheck(this,StreamsSequenceStream);var maybeLength=0;var _iterator=decode_stream_createForOfIteratorHelper(streams),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var stream=_step.value;maybeLength+=stream instanceof DecodeStream?stream._rawMinBufferLength:stream.length;}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this2=_super2.call(this,maybeLength);_this2.streams=streams;_this2._onError=onError;return _this2;}decode_stream_createClass(StreamsSequenceStream,[{key:"readBlock",value:function readBlock(){var streams=this.streams;if(streams.length===0){this.eof=true;return;}var stream=streams.shift();var chunk;try{chunk=stream.getBytes();}catch(reason){if(this._onError){var _stream$dict;this._onError(reason,(_stream$dict=stream.dict)===null||_stream$dict===void 0?void 0:_stream$dict.objId);return;}throw reason;}var bufferLength=this.bufferLength;var newLength=bufferLength+chunk.length;var buffer=this.ensureBuffer(newLength);buffer.set(chunk,bufferLength);this.bufferLength=newLength;}},{key:"getBaseStreams",value:function getBaseStreams(){var baseStreamsBuf=[];var _iterator2=decode_stream_createForOfIteratorHelper(this.streams),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var stream=_step2.value;var baseStreams=stream.getBaseStreams();if(baseStreams){baseStreamsBuf.push.apply(baseStreamsBuf,decode_stream_toConsumableArray(baseStreams));}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return baseStreamsBuf.length>0?baseStreamsBuf:null;}}]);return StreamsSequenceStream;}(DecodeStream);
;// CONCATENATED MODULE: ./src/core/ascii_85_stream.js
function ascii_85_stream_typeof(o){"@babel/helpers - typeof";return ascii_85_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},ascii_85_stream_typeof(o);}function ascii_85_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ascii_85_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,ascii_85_stream_toPropertyKey(descriptor.key),descriptor);}}function ascii_85_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)ascii_85_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)ascii_85_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function ascii_85_stream_toPropertyKey(arg){var key=ascii_85_stream_toPrimitive(arg,"string");return ascii_85_stream_typeof(key)==="symbol"?key:String(key);}function ascii_85_stream_toPrimitive(input,hint){if(ascii_85_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(ascii_85_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function ascii_85_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)ascii_85_stream_setPrototypeOf(subClass,superClass);}function ascii_85_stream_setPrototypeOf(o,p){ascii_85_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ascii_85_stream_setPrototypeOf(o,p);}function ascii_85_stream_createSuper(Derived){var hasNativeReflectConstruct=ascii_85_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ascii_85_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ascii_85_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ascii_85_stream_possibleConstructorReturn(this,result);};}function ascii_85_stream_possibleConstructorReturn(self,call){if(call&&(ascii_85_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return ascii_85_stream_assertThisInitialized(self);}function ascii_85_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ascii_85_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ascii_85_stream_getPrototypeOf(o){ascii_85_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ascii_85_stream_getPrototypeOf(o);}var Ascii85Stream=/*#__PURE__*/function(_DecodeStream){ascii_85_stream_inherits(Ascii85Stream,_DecodeStream);var _super=ascii_85_stream_createSuper(Ascii85Stream);function Ascii85Stream(str,maybeLength){var _this;ascii_85_stream_classCallCheck(this,Ascii85Stream);if(maybeLength){maybeLength*=0.8;}_this=_super.call(this,maybeLength);_this.str=str;_this.dict=str.dict;_this.input=new Uint8Array(5);return _this;}ascii_85_stream_createClass(Ascii85Stream,[{key:"readBlock",value:function readBlock(){var TILDA_CHAR=0x7e;var Z_LOWER_CHAR=0x7a;var EOF=-1;var str=this.str;var c=str.getByte();while(isWhiteSpace(c)){c=str.getByte();}if(c===EOF||c===TILDA_CHAR){this.eof=true;return;}var bufferLength=this.bufferLength;var buffer,i;if(c===Z_LOWER_CHAR){buffer=this.ensureBuffer(bufferLength+4);for(i=0;i<4;++i){buffer[bufferLength+i]=0;}this.bufferLength+=4;}else{var input=this.input;input[0]=c;for(i=1;i<5;++i){c=str.getByte();while(isWhiteSpace(c)){c=str.getByte();}input[i]=c;if(c===EOF||c===TILDA_CHAR){break;}}buffer=this.ensureBuffer(bufferLength+i-1);this.bufferLength+=i-1;if(i<5){for(;i<5;++i){input[i]=0x21+84;}this.eof=true;}var t=0;for(i=0;i<5;++i){t=t*85+(input[i]-0x21);}for(i=3;i>=0;--i){buffer[bufferLength+i]=t&0xff;t>>=8;}}}}]);return Ascii85Stream;}(DecodeStream);
;// CONCATENATED MODULE: ./src/core/ascii_hex_stream.js
function ascii_hex_stream_typeof(o){"@babel/helpers - typeof";return ascii_hex_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},ascii_hex_stream_typeof(o);}function ascii_hex_stream_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=ascii_hex_stream_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function ascii_hex_stream_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return ascii_hex_stream_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ascii_hex_stream_arrayLikeToArray(o,minLen);}function ascii_hex_stream_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function ascii_hex_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ascii_hex_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,ascii_hex_stream_toPropertyKey(descriptor.key),descriptor);}}function ascii_hex_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)ascii_hex_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)ascii_hex_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function ascii_hex_stream_toPropertyKey(arg){var key=ascii_hex_stream_toPrimitive(arg,"string");return ascii_hex_stream_typeof(key)==="symbol"?key:String(key);}function ascii_hex_stream_toPrimitive(input,hint){if(ascii_hex_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(ascii_hex_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function ascii_hex_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)ascii_hex_stream_setPrototypeOf(subClass,superClass);}function ascii_hex_stream_setPrototypeOf(o,p){ascii_hex_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ascii_hex_stream_setPrototypeOf(o,p);}function ascii_hex_stream_createSuper(Derived){var hasNativeReflectConstruct=ascii_hex_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ascii_hex_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ascii_hex_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ascii_hex_stream_possibleConstructorReturn(this,result);};}function ascii_hex_stream_possibleConstructorReturn(self,call){if(call&&(ascii_hex_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return ascii_hex_stream_assertThisInitialized(self);}function ascii_hex_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ascii_hex_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ascii_hex_stream_getPrototypeOf(o){ascii_hex_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ascii_hex_stream_getPrototypeOf(o);}var AsciiHexStream=/*#__PURE__*/function(_DecodeStream){ascii_hex_stream_inherits(AsciiHexStream,_DecodeStream);var _super=ascii_hex_stream_createSuper(AsciiHexStream);function AsciiHexStream(str,maybeLength){var _this;ascii_hex_stream_classCallCheck(this,AsciiHexStream);if(maybeLength){maybeLength*=0.5;}_this=_super.call(this,maybeLength);_this.str=str;_this.dict=str.dict;_this.firstDigit=-1;return _this;}ascii_hex_stream_createClass(AsciiHexStream,[{key:"readBlock",value:function readBlock(){var UPSTREAM_BLOCK_SIZE=8000;var bytes=this.str.getBytes(UPSTREAM_BLOCK_SIZE);if(!bytes.length){this.eof=true;return;}var maxDecodeLength=bytes.length+1>>1;var buffer=this.ensureBuffer(this.bufferLength+maxDecodeLength);var bufferLength=this.bufferLength;var firstDigit=this.firstDigit;var _iterator=ascii_hex_stream_createForOfIteratorHelper(bytes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var ch=_step.value;var digit=void 0;if(ch>=0x30&&ch<=0x39){digit=ch&0x0f;}else if(ch>=0x41&&ch<=0x46||ch>=0x61&&ch<=0x66){digit=(ch&0x0f)+9;}else if(ch===0x3e){this.eof=true;break;}else{continue;}if(firstDigit<0){firstDigit=digit;}else{buffer[bufferLength++]=firstDigit<<4|digit;firstDigit=-1;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(firstDigit>=0&&this.eof){buffer[bufferLength++]=firstDigit<<4;firstDigit=-1;}this.firstDigit=firstDigit;this.bufferLength=bufferLength;}}]);return AsciiHexStream;}(DecodeStream);
;// CONCATENATED MODULE: ./src/core/ccitt.js
function ccitt_typeof(o){"@babel/helpers - typeof";return ccitt_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},ccitt_typeof(o);}function ccitt_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ccitt_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,ccitt_toPropertyKey(descriptor.key),descriptor);}}function ccitt_createClass(Constructor,protoProps,staticProps){if(protoProps)ccitt_defineProperties(Constructor.prototype,protoProps);if(staticProps)ccitt_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function ccitt_toPropertyKey(arg){var key=ccitt_toPrimitive(arg,"string");return ccitt_typeof(key)==="symbol"?key:String(key);}function ccitt_toPrimitive(input,hint){if(ccitt_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(ccitt_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var ccittEOL=-2;var ccittEOF=-1;var twoDimPass=0;var twoDimHoriz=1;var twoDimVert0=2;var twoDimVertR1=3;var twoDimVertL1=4;var twoDimVertR2=5;var twoDimVertL2=6;var twoDimVertR3=7;var twoDimVertL3=8;var twoDimTable=[[-1,-1],[-1,-1],[7,twoDimVertL3],[7,twoDimVertR3],[6,twoDimVertL2],[6,twoDimVertL2],[6,twoDimVertR2],[6,twoDimVertR2],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[4,twoDimPass],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimHoriz],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertL1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[3,twoDimVertR1],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0],[1,twoDimVert0]];var whiteTable1=[[-1,-1],[12,ccittEOL],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]];var whiteTable2=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]];var blackTable1=[[-1,-1],[-1,-1],[12,ccittEOL],[12,ccittEOL],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]];var blackTable2=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]];var blackTable3=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];var CCITTFaxDecoder=/*#__PURE__*/function(){function CCITTFaxDecoder(source){var _options$EndOfBlock;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};ccitt_classCallCheck(this,CCITTFaxDecoder);if(!source||typeof source.next!=="function"){throw new Error('CCITTFaxDecoder - invalid "source" parameter.');}this.source=source;this.eof=false;this.encoding=options.K||0;this.eoline=options.EndOfLine||false;this.byteAlign=options.EncodedByteAlign||false;this.columns=options.Columns||1728;this.rows=options.Rows||0;this.eoblock=(_options$EndOfBlock=options.EndOfBlock)!==null&&_options$EndOfBlock!==void 0?_options$EndOfBlock:true;this.black=options.BlackIs1||false;this.codingLine=new Uint32Array(this.columns+1);this.refLine=new Uint32Array(this.columns+2);this.codingLine[0]=this.columns;this.codingPos=0;this.row=0;this.nextLine2D=this.encoding<0;this.inputBits=0;this.inputBuf=0;this.outputBits=0;this.rowsDone=false;var code1;while((code1=this._lookBits(12))===0){this._eatBits(1);}if(code1===1){this._eatBits(12);}if(this.encoding>0){this.nextLine2D=!this._lookBits(1);this._eatBits(1);}}ccitt_createClass(CCITTFaxDecoder,[{key:"readNextChar",value:function readNextChar(){if(this.eof){return-1;}var refLine=this.refLine;var codingLine=this.codingLine;var columns=this.columns;var refPos,blackPixels,bits,i;if(this.outputBits===0){if(this.rowsDone){this.eof=true;}if(this.eof){return-1;}this.err=false;var code1,code2,code3;if(this.nextLine2D){for(i=0;codingLine[i]<columns;++i){refLine[i]=codingLine[i];}refLine[i++]=columns;refLine[i]=columns;codingLine[0]=0;this.codingPos=0;refPos=0;blackPixels=0;while(codingLine[this.codingPos]<columns){code1=this._getTwoDimCode();switch(code1){case twoDimPass:this._addPixels(refLine[refPos+1],blackPixels);if(refLine[refPos+1]<columns){refPos+=2;}break;case twoDimHoriz:code1=code2=0;if(blackPixels){do{code1+=code3=this._getBlackCode();}while(code3>=64);do{code2+=code3=this._getWhiteCode();}while(code3>=64);}else{do{code1+=code3=this._getWhiteCode();}while(code3>=64);do{code2+=code3=this._getBlackCode();}while(code3>=64);}this._addPixels(codingLine[this.codingPos]+code1,blackPixels);if(codingLine[this.codingPos]<columns){this._addPixels(codingLine[this.codingPos]+code2,blackPixels^1);}while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}break;case twoDimVertR3:this._addPixels(refLine[refPos]+3,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){++refPos;while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVertR2:this._addPixels(refLine[refPos]+2,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){++refPos;while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVertR1:this._addPixels(refLine[refPos]+1,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){++refPos;while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVert0:this._addPixels(refLine[refPos],blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){++refPos;while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVertL3:this._addPixelsNeg(refLine[refPos]-3,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){if(refPos>0){--refPos;}else{++refPos;}while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVertL2:this._addPixelsNeg(refLine[refPos]-2,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){if(refPos>0){--refPos;}else{++refPos;}while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case twoDimVertL1:this._addPixelsNeg(refLine[refPos]-1,blackPixels);blackPixels^=1;if(codingLine[this.codingPos]<columns){if(refPos>0){--refPos;}else{++refPos;}while(refLine[refPos]<=codingLine[this.codingPos]&&refLine[refPos]<columns){refPos+=2;}}break;case ccittEOF:this._addPixels(columns,0);this.eof=true;break;default:info("bad 2d code");this._addPixels(columns,0);this.err=true;}}}else{codingLine[0]=0;this.codingPos=0;blackPixels=0;while(codingLine[this.codingPos]<columns){code1=0;if(blackPixels){do{code1+=code3=this._getBlackCode();}while(code3>=64);}else{do{code1+=code3=this._getWhiteCode();}while(code3>=64);}this._addPixels(codingLine[this.codingPos]+code1,blackPixels);blackPixels^=1;}}var gotEOL=false;if(this.byteAlign){this.inputBits&=~7;}if(!this.eoblock&&this.row===this.rows-1){this.rowsDone=true;}else{code1=this._lookBits(12);if(this.eoline){while(code1!==ccittEOF&&code1!==1){this._eatBits(1);code1=this._lookBits(12);}}else{while(code1===0){this._eatBits(1);code1=this._lookBits(12);}}if(code1===1){this._eatBits(12);gotEOL=true;}else if(code1===ccittEOF){this.eof=true;}}if(!this.eof&&this.encoding>0&&!this.rowsDone){this.nextLine2D=!this._lookBits(1);this._eatBits(1);}if(this.eoblock&&gotEOL&&this.byteAlign){code1=this._lookBits(12);if(code1===1){this._eatBits(12);if(this.encoding>0){this._lookBits(1);this._eatBits(1);}if(this.encoding>=0){for(i=0;i<4;++i){code1=this._lookBits(12);if(code1!==1){info("bad rtc code: "+code1);}this._eatBits(12);if(this.encoding>0){this._lookBits(1);this._eatBits(1);}}}this.eof=true;}}else if(this.err&&this.eoline){while(true){code1=this._lookBits(13);if(code1===ccittEOF){this.eof=true;return-1;}if(code1>>1===1){break;}this._eatBits(1);}this._eatBits(12);if(this.encoding>0){this._eatBits(1);this.nextLine2D=!(code1&1);}}this.outputBits=codingLine[0]>0?codingLine[this.codingPos=0]:codingLine[this.codingPos=1];this.row++;}var c;if(this.outputBits>=8){c=this.codingPos&1?0:0xff;this.outputBits-=8;if(this.outputBits===0&&codingLine[this.codingPos]<columns){this.codingPos++;this.outputBits=codingLine[this.codingPos]-codingLine[this.codingPos-1];}}else{bits=8;c=0;do{if(typeof this.outputBits!=="number"){throw new FormatError('Invalid /CCITTFaxDecode data, "outputBits" must be a number.');}if(this.outputBits>bits){c<<=bits;if(!(this.codingPos&1)){c|=0xff>>8-bits;}this.outputBits-=bits;bits=0;}else{c<<=this.outputBits;if(!(this.codingPos&1)){c|=0xff>>8-this.outputBits;}bits-=this.outputBits;this.outputBits=0;if(codingLine[this.codingPos]<columns){this.codingPos++;this.outputBits=codingLine[this.codingPos]-codingLine[this.codingPos-1];}else if(bits>0){c<<=bits;bits=0;}}}while(bits);}if(this.black){c^=0xff;}return c;}},{key:"_addPixels",value:function _addPixels(a1,blackPixels){var codingLine=this.codingLine;var codingPos=this.codingPos;if(a1>codingLine[codingPos]){if(a1>this.columns){info("row is wrong length");this.err=true;a1=this.columns;}if(codingPos&1^blackPixels){++codingPos;}codingLine[codingPos]=a1;}this.codingPos=codingPos;}},{key:"_addPixelsNeg",value:function _addPixelsNeg(a1,blackPixels){var codingLine=this.codingLine;var codingPos=this.codingPos;if(a1>codingLine[codingPos]){if(a1>this.columns){info("row is wrong length");this.err=true;a1=this.columns;}if(codingPos&1^blackPixels){++codingPos;}codingLine[codingPos]=a1;}else if(a1<codingLine[codingPos]){if(a1<0){info("invalid code");this.err=true;a1=0;}while(codingPos>0&&a1<codingLine[codingPos-1]){--codingPos;}codingLine[codingPos]=a1;}this.codingPos=codingPos;}},{key:"_findTableCode",value:function _findTableCode(start,end,table,limit){var limitValue=limit||0;for(var i=start;i<=end;++i){var code=this._lookBits(i);if(code===ccittEOF){return[true,1,false];}if(i<end){code<<=end-i;}if(!limitValue||code>=limitValue){var p=table[code-limitValue];if(p[0]===i){this._eatBits(i);return[true,p[1],true];}}}return[false,0,false];}},{key:"_getTwoDimCode",value:function _getTwoDimCode(){var code=0;var p;if(this.eoblock){var _p;code=this._lookBits(7);p=twoDimTable[code];if(((_p=p)===null||_p===void 0?void 0:_p[0])>0){this._eatBits(p[0]);return p[1];}}else{var result=this._findTableCode(1,7,twoDimTable);if(result[0]&&result[2]){return result[1];}}info("Bad two dim code");return ccittEOF;}},{key:"_getWhiteCode",value:function _getWhiteCode(){var code=0;var p;if(this.eoblock){code=this._lookBits(12);if(code===ccittEOF){return 1;}p=code>>5===0?whiteTable1[code]:whiteTable2[code>>3];if(p[0]>0){this._eatBits(p[0]);return p[1];}}else{var result=this._findTableCode(1,9,whiteTable2);if(result[0]){return result[1];}result=this._findTableCode(11,12,whiteTable1);if(result[0]){return result[1];}}info("bad white code");this._eatBits(1);return 1;}},{key:"_getBlackCode",value:function _getBlackCode(){var code,p;if(this.eoblock){code=this._lookBits(13);if(code===ccittEOF){return 1;}if(code>>7===0){p=blackTable1[code];}else if(code>>9===0&&code>>7!==0){p=blackTable2[(code>>1)-64];}else{p=blackTable3[code>>7];}if(p[0]>0){this._eatBits(p[0]);return p[1];}}else{var result=this._findTableCode(2,6,blackTable3);if(result[0]){return result[1];}result=this._findTableCode(7,12,blackTable2,64);if(result[0]){return result[1];}result=this._findTableCode(10,13,blackTable1);if(result[0]){return result[1];}}info("bad black code");this._eatBits(1);return 1;}},{key:"_lookBits",value:function _lookBits(n){var c;while(this.inputBits<n){if((c=this.source.next())===-1){if(this.inputBits===0){return ccittEOF;}return this.inputBuf<<n-this.inputBits&0xffff>>16-n;}this.inputBuf=this.inputBuf<<8|c;this.inputBits+=8;}return this.inputBuf>>this.inputBits-n&0xffff>>16-n;}},{key:"_eatBits",value:function _eatBits(n){if((this.inputBits-=n)<0){this.inputBits=0;}}}]);return CCITTFaxDecoder;}();
;// CONCATENATED MODULE: ./src/core/ccitt_stream.js
function ccitt_stream_typeof(o){"@babel/helpers - typeof";return ccitt_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},ccitt_stream_typeof(o);}function ccitt_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ccitt_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,ccitt_stream_toPropertyKey(descriptor.key),descriptor);}}function ccitt_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)ccitt_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)ccitt_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function ccitt_stream_toPropertyKey(arg){var key=ccitt_stream_toPrimitive(arg,"string");return ccitt_stream_typeof(key)==="symbol"?key:String(key);}function ccitt_stream_toPrimitive(input,hint){if(ccitt_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(ccitt_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function ccitt_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)ccitt_stream_setPrototypeOf(subClass,superClass);}function ccitt_stream_setPrototypeOf(o,p){ccitt_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ccitt_stream_setPrototypeOf(o,p);}function ccitt_stream_createSuper(Derived){var hasNativeReflectConstruct=ccitt_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ccitt_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ccitt_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ccitt_stream_possibleConstructorReturn(this,result);};}function ccitt_stream_possibleConstructorReturn(self,call){if(call&&(ccitt_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return ccitt_stream_assertThisInitialized(self);}function ccitt_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ccitt_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ccitt_stream_getPrototypeOf(o){ccitt_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ccitt_stream_getPrototypeOf(o);}var CCITTFaxStream=/*#__PURE__*/function(_DecodeStream){ccitt_stream_inherits(CCITTFaxStream,_DecodeStream);var _super=ccitt_stream_createSuper(CCITTFaxStream);function CCITTFaxStream(str,maybeLength,params){var _this;ccitt_stream_classCallCheck(this,CCITTFaxStream);_this=_super.call(this,maybeLength);_this.str=str;_this.dict=str.dict;if(!(params instanceof Dict)){params=Dict.empty;}var source={next:function next(){return str.getByte();}};_this.ccittFaxDecoder=new CCITTFaxDecoder(source,{K:params.get("K"),EndOfLine:params.get("EndOfLine"),EncodedByteAlign:params.get("EncodedByteAlign"),Columns:params.get("Columns"),Rows:params.get("Rows"),EndOfBlock:params.get("EndOfBlock"),BlackIs1:params.get("BlackIs1")});return _this;}ccitt_stream_createClass(CCITTFaxStream,[{key:"readBlock",value:function readBlock(){while(!this.eof){var c=this.ccittFaxDecoder.readNextChar();if(c===-1){this.eof=true;return;}this.ensureBuffer(this.bufferLength+1);this.buffer[this.bufferLength++]=c;}}}]);return CCITTFaxStream;}(DecodeStream);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.int32-array.js
var es_typed_array_int32_array = __webpack_require__(8800);
;// CONCATENATED MODULE: ./src/core/flate_stream.js
function flate_stream_typeof(o){"@babel/helpers - typeof";return flate_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},flate_stream_typeof(o);}function flate_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function flate_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,flate_stream_toPropertyKey(descriptor.key),descriptor);}}function flate_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)flate_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)flate_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function flate_stream_toPropertyKey(arg){var key=flate_stream_toPrimitive(arg,"string");return flate_stream_typeof(key)==="symbol"?key:String(key);}function flate_stream_toPrimitive(input,hint){if(flate_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(flate_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function flate_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)flate_stream_setPrototypeOf(subClass,superClass);}function flate_stream_setPrototypeOf(o,p){flate_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return flate_stream_setPrototypeOf(o,p);}function flate_stream_createSuper(Derived){var hasNativeReflectConstruct=flate_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=flate_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=flate_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return flate_stream_possibleConstructorReturn(this,result);};}function flate_stream_possibleConstructorReturn(self,call){if(call&&(flate_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return flate_stream_assertThisInitialized(self);}function flate_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function flate_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function flate_stream_getPrototypeOf(o){flate_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return flate_stream_getPrototypeOf(o);}var codeLenCodeMap=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);var lengthDecode=new Int32Array([0x00003,0x00004,0x00005,0x00006,0x00007,0x00008,0x00009,0x0000a,0x1000b,0x1000d,0x1000f,0x10011,0x20013,0x20017,0x2001b,0x2001f,0x30023,0x3002b,0x30033,0x3003b,0x40043,0x40053,0x40063,0x40073,0x50083,0x500a3,0x500c3,0x500e3,0x00102,0x00102,0x00102]);var distDecode=new Int32Array([0x00001,0x00002,0x00003,0x00004,0x10005,0x10007,0x20009,0x2000d,0x30011,0x30019,0x40021,0x40031,0x50041,0x50061,0x60081,0x600c1,0x70101,0x70181,0x80201,0x80301,0x90401,0x90601,0xa0801,0xa0c01,0xb1001,0xb1801,0xc2001,0xc3001,0xd4001,0xd6001]);var fixedLitCodeTab=[new Int32Array([0x70100,0x80050,0x80010,0x80118,0x70110,0x80070,0x80030,0x900c0,0x70108,0x80060,0x80020,0x900a0,0x80000,0x80080,0x80040,0x900e0,0x70104,0x80058,0x80018,0x90090,0x70114,0x80078,0x80038,0x900d0,0x7010c,0x80068,0x80028,0x900b0,0x80008,0x80088,0x80048,0x900f0,0x70102,0x80054,0x80014,0x8011c,0x70112,0x80074,0x80034,0x900c8,0x7010a,0x80064,0x80024,0x900a8,0x80004,0x80084,0x80044,0x900e8,0x70106,0x8005c,0x8001c,0x90098,0x70116,0x8007c,0x8003c,0x900d8,0x7010e,0x8006c,0x8002c,0x900b8,0x8000c,0x8008c,0x8004c,0x900f8,0x70101,0x80052,0x80012,0x8011a,0x70111,0x80072,0x80032,0x900c4,0x70109,0x80062,0x80022,0x900a4,0x80002,0x80082,0x80042,0x900e4,0x70105,0x8005a,0x8001a,0x90094,0x70115,0x8007a,0x8003a,0x900d4,0x7010d,0x8006a,0x8002a,0x900b4,0x8000a,0x8008a,0x8004a,0x900f4,0x70103,0x80056,0x80016,0x8011e,0x70113,0x80076,0x80036,0x900cc,0x7010b,0x80066,0x80026,0x900ac,0x80006,0x80086,0x80046,0x900ec,0x70107,0x8005e,0x8001e,0x9009c,0x70117,0x8007e,0x8003e,0x900dc,0x7010f,0x8006e,0x8002e,0x900bc,0x8000e,0x8008e,0x8004e,0x900fc,0x70100,0x80051,0x80011,0x80119,0x70110,0x80071,0x80031,0x900c2,0x70108,0x80061,0x80021,0x900a2,0x80001,0x80081,0x80041,0x900e2,0x70104,0x80059,0x80019,0x90092,0x70114,0x80079,0x80039,0x900d2,0x7010c,0x80069,0x80029,0x900b2,0x80009,0x80089,0x80049,0x900f2,0x70102,0x80055,0x80015,0x8011d,0x70112,0x80075,0x80035,0x900ca,0x7010a,0x80065,0x80025,0x900aa,0x80005,0x80085,0x80045,0x900ea,0x70106,0x8005d,0x8001d,0x9009a,0x70116,0x8007d,0x8003d,0x900da,0x7010e,0x8006d,0x8002d,0x900ba,0x8000d,0x8008d,0x8004d,0x900fa,0x70101,0x80053,0x80013,0x8011b,0x70111,0x80073,0x80033,0x900c6,0x70109,0x80063,0x80023,0x900a6,0x80003,0x80083,0x80043,0x900e6,0x70105,0x8005b,0x8001b,0x90096,0x70115,0x8007b,0x8003b,0x900d6,0x7010d,0x8006b,0x8002b,0x900b6,0x8000b,0x8008b,0x8004b,0x900f6,0x70103,0x80057,0x80017,0x8011f,0x70113,0x80077,0x80037,0x900ce,0x7010b,0x80067,0x80027,0x900ae,0x80007,0x80087,0x80047,0x900ee,0x70107,0x8005f,0x8001f,0x9009e,0x70117,0x8007f,0x8003f,0x900de,0x7010f,0x8006f,0x8002f,0x900be,0x8000f,0x8008f,0x8004f,0x900fe,0x70100,0x80050,0x80010,0x80118,0x70110,0x80070,0x80030,0x900c1,0x70108,0x80060,0x80020,0x900a1,0x80000,0x80080,0x80040,0x900e1,0x70104,0x80058,0x80018,0x90091,0x70114,0x80078,0x80038,0x900d1,0x7010c,0x80068,0x80028,0x900b1,0x80008,0x80088,0x80048,0x900f1,0x70102,0x80054,0x80014,0x8011c,0x70112,0x80074,0x80034,0x900c9,0x7010a,0x80064,0x80024,0x900a9,0x80004,0x80084,0x80044,0x900e9,0x70106,0x8005c,0x8001c,0x90099,0x70116,0x8007c,0x8003c,0x900d9,0x7010e,0x8006c,0x8002c,0x900b9,0x8000c,0x8008c,0x8004c,0x900f9,0x70101,0x80052,0x80012,0x8011a,0x70111,0x80072,0x80032,0x900c5,0x70109,0x80062,0x80022,0x900a5,0x80002,0x80082,0x80042,0x900e5,0x70105,0x8005a,0x8001a,0x90095,0x70115,0x8007a,0x8003a,0x900d5,0x7010d,0x8006a,0x8002a,0x900b5,0x8000a,0x8008a,0x8004a,0x900f5,0x70103,0x80056,0x80016,0x8011e,0x70113,0x80076,0x80036,0x900cd,0x7010b,0x80066,0x80026,0x900ad,0x80006,0x80086,0x80046,0x900ed,0x70107,0x8005e,0x8001e,0x9009d,0x70117,0x8007e,0x8003e,0x900dd,0x7010f,0x8006e,0x8002e,0x900bd,0x8000e,0x8008e,0x8004e,0x900fd,0x70100,0x80051,0x80011,0x80119,0x70110,0x80071,0x80031,0x900c3,0x70108,0x80061,0x80021,0x900a3,0x80001,0x80081,0x80041,0x900e3,0x70104,0x80059,0x80019,0x90093,0x70114,0x80079,0x80039,0x900d3,0x7010c,0x80069,0x80029,0x900b3,0x80009,0x80089,0x80049,0x900f3,0x70102,0x80055,0x80015,0x8011d,0x70112,0x80075,0x80035,0x900cb,0x7010a,0x80065,0x80025,0x900ab,0x80005,0x80085,0x80045,0x900eb,0x70106,0x8005d,0x8001d,0x9009b,0x70116,0x8007d,0x8003d,0x900db,0x7010e,0x8006d,0x8002d,0x900bb,0x8000d,0x8008d,0x8004d,0x900fb,0x70101,0x80053,0x80013,0x8011b,0x70111,0x80073,0x80033,0x900c7,0x70109,0x80063,0x80023,0x900a7,0x80003,0x80083,0x80043,0x900e7,0x70105,0x8005b,0x8001b,0x90097,0x70115,0x8007b,0x8003b,0x900d7,0x7010d,0x8006b,0x8002b,0x900b7,0x8000b,0x8008b,0x8004b,0x900f7,0x70103,0x80057,0x80017,0x8011f,0x70113,0x80077,0x80037,0x900cf,0x7010b,0x80067,0x80027,0x900af,0x80007,0x80087,0x80047,0x900ef,0x70107,0x8005f,0x8001f,0x9009f,0x70117,0x8007f,0x8003f,0x900df,0x7010f,0x8006f,0x8002f,0x900bf,0x8000f,0x8008f,0x8004f,0x900ff]),9];var fixedDistCodeTab=[new Int32Array([0x50000,0x50010,0x50008,0x50018,0x50004,0x50014,0x5000c,0x5001c,0x50002,0x50012,0x5000a,0x5001a,0x50006,0x50016,0x5000e,0x00000,0x50001,0x50011,0x50009,0x50019,0x50005,0x50015,0x5000d,0x5001d,0x50003,0x50013,0x5000b,0x5001b,0x50007,0x50017,0x5000f,0x00000]),5];var FlateStream=/*#__PURE__*/function(_DecodeStream){flate_stream_inherits(FlateStream,_DecodeStream);var _super=flate_stream_createSuper(FlateStream);function FlateStream(str,maybeLength){var _this;flate_stream_classCallCheck(this,FlateStream);_this=_super.call(this,maybeLength);_this.str=str;_this.dict=str.dict;var cmf=str.getByte();var flg=str.getByte();if(cmf===-1||flg===-1){throw new FormatError("Invalid header in flate stream: ".concat(cmf,", ").concat(flg));}if((cmf&0x0f)!==0x08){throw new FormatError("Unknown compression method in flate stream: ".concat(cmf,", ").concat(flg));}if(((cmf<<8)+flg)%31!==0){throw new FormatError("Bad FCHECK in flate stream: ".concat(cmf,", ").concat(flg));}if(flg&0x20){throw new FormatError("FDICT bit set in flate stream: ".concat(cmf,", ").concat(flg));}_this.codeSize=0;_this.codeBuf=0;return _this;}flate_stream_createClass(FlateStream,[{key:"getBits",value:function getBits(bits){var str=this.str;var codeSize=this.codeSize;var codeBuf=this.codeBuf;var b;while(codeSize<bits){if((b=str.getByte())===-1){throw new FormatError("Bad encoding in flate stream");}codeBuf|=b<<codeSize;codeSize+=8;}b=codeBuf&(1<<bits)-1;this.codeBuf=codeBuf>>bits;this.codeSize=codeSize-=bits;return b;}},{key:"getCode",value:function getCode(table){var str=this.str;var codes=table[0];var maxLen=table[1];var codeSize=this.codeSize;var codeBuf=this.codeBuf;var b;while(codeSize<maxLen){if((b=str.getByte())===-1){break;}codeBuf|=b<<codeSize;codeSize+=8;}var code=codes[codeBuf&(1<<maxLen)-1];var codeLen=code>>16;var codeVal=code&0xffff;if(codeLen<1||codeSize<codeLen){throw new FormatError("Bad encoding in flate stream");}this.codeBuf=codeBuf>>codeLen;this.codeSize=codeSize-codeLen;return codeVal;}},{key:"generateHuffmanTable",value:function generateHuffmanTable(lengths){var n=lengths.length;var maxLen=0;var i;for(i=0;i<n;++i){if(lengths[i]>maxLen){maxLen=lengths[i];}}var size=1<<maxLen;var codes=new Int32Array(size);for(var len=1,code=0,skip=2;len<=maxLen;++len,code<<=1,skip<<=1){for(var val=0;val<n;++val){if(lengths[val]===len){var code2=0;var t=code;for(i=0;i<len;++i){code2=code2<<1|t&1;t>>=1;}for(i=code2;i<size;i+=skip){codes[i]=len<<16|val;}++code;}}}return[codes,maxLen];}},{key:"readBlock",value:function readBlock(){var buffer,len;var str=this.str;var hdr=this.getBits(3);if(hdr&1){this.eof=true;}hdr>>=1;if(hdr===0){var b;if((b=str.getByte())===-1){throw new FormatError("Bad block header in flate stream");}var blockLen=b;if((b=str.getByte())===-1){throw new FormatError("Bad block header in flate stream");}blockLen|=b<<8;if((b=str.getByte())===-1){throw new FormatError("Bad block header in flate stream");}var check=b;if((b=str.getByte())===-1){throw new FormatError("Bad block header in flate stream");}check|=b<<8;if(check!==(~blockLen&0xffff)&&(blockLen!==0||check!==0)){throw new FormatError("Bad uncompressed block length in flate stream");}this.codeBuf=0;this.codeSize=0;var bufferLength=this.bufferLength,end=bufferLength+blockLen;buffer=this.ensureBuffer(end);this.bufferLength=end;if(blockLen===0){if(str.peekByte()===-1){this.eof=true;}}else{var block=str.getBytes(blockLen);buffer.set(block,bufferLength);if(block.length<blockLen){this.eof=true;}}return;}var litCodeTable;var distCodeTable;if(hdr===1){litCodeTable=fixedLitCodeTab;distCodeTable=fixedDistCodeTab;}else if(hdr===2){var numLitCodes=this.getBits(5)+257;var numDistCodes=this.getBits(5)+1;var numCodeLenCodes=this.getBits(4)+4;var codeLenCodeLengths=new Uint8Array(codeLenCodeMap.length);var i;for(i=0;i<numCodeLenCodes;++i){codeLenCodeLengths[codeLenCodeMap[i]]=this.getBits(3);}var codeLenCodeTab=this.generateHuffmanTable(codeLenCodeLengths);len=0;i=0;var codes=numLitCodes+numDistCodes;var codeLengths=new Uint8Array(codes);var bitsLength,bitsOffset,what;while(i<codes){var code=this.getCode(codeLenCodeTab);if(code===16){bitsLength=2;bitsOffset=3;what=len;}else if(code===17){bitsLength=3;bitsOffset=3;what=len=0;}else if(code===18){bitsLength=7;bitsOffset=11;what=len=0;}else{codeLengths[i++]=len=code;continue;}var repeatLength=this.getBits(bitsLength)+bitsOffset;while(repeatLength-->0){codeLengths[i++]=what;}}litCodeTable=this.generateHuffmanTable(codeLengths.subarray(0,numLitCodes));distCodeTable=this.generateHuffmanTable(codeLengths.subarray(numLitCodes,codes));}else{throw new FormatError("Unknown block type in flate stream");}buffer=this.buffer;var limit=buffer?buffer.length:0;var pos=this.bufferLength;while(true){var code1=this.getCode(litCodeTable);if(code1<256){if(pos+1>=limit){buffer=this.ensureBuffer(pos+1);limit=buffer.length;}buffer[pos++]=code1;continue;}if(code1===256){this.bufferLength=pos;return;}code1-=257;code1=lengthDecode[code1];var code2=code1>>16;if(code2>0){code2=this.getBits(code2);}len=(code1&0xffff)+code2;code1=this.getCode(distCodeTable);code1=distDecode[code1];code2=code1>>16;if(code2>0){code2=this.getBits(code2);}var dist=(code1&0xffff)+code2;if(pos+len>=limit){buffer=this.ensureBuffer(pos+len);limit=buffer.length;}for(var k=0;k<len;++k,++pos){buffer[pos]=buffer[pos-dist];}}}}]);return FlateStream;}(DecodeStream);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.int8-array.js
var es_typed_array_int8_array = __webpack_require__(8826);
;// CONCATENATED MODULE: ./src/core/arithmetic_decoder.js
function arithmetic_decoder_typeof(o){"@babel/helpers - typeof";return arithmetic_decoder_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},arithmetic_decoder_typeof(o);}function arithmetic_decoder_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function arithmetic_decoder_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,arithmetic_decoder_toPropertyKey(descriptor.key),descriptor);}}function arithmetic_decoder_createClass(Constructor,protoProps,staticProps){if(protoProps)arithmetic_decoder_defineProperties(Constructor.prototype,protoProps);if(staticProps)arithmetic_decoder_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function arithmetic_decoder_toPropertyKey(arg){var key=arithmetic_decoder_toPrimitive(arg,"string");return arithmetic_decoder_typeof(key)==="symbol"?key:String(key);}function arithmetic_decoder_toPrimitive(input,hint){if(arithmetic_decoder_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(arithmetic_decoder_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var QeTable=[{qe:0x5601,nmps:1,nlps:1,switchFlag:1},{qe:0x3401,nmps:2,nlps:6,switchFlag:0},{qe:0x1801,nmps:3,nlps:9,switchFlag:0},{qe:0x0ac1,nmps:4,nlps:12,switchFlag:0},{qe:0x0521,nmps:5,nlps:29,switchFlag:0},{qe:0x0221,nmps:38,nlps:33,switchFlag:0},{qe:0x5601,nmps:7,nlps:6,switchFlag:1},{qe:0x5401,nmps:8,nlps:14,switchFlag:0},{qe:0x4801,nmps:9,nlps:14,switchFlag:0},{qe:0x3801,nmps:10,nlps:14,switchFlag:0},{qe:0x3001,nmps:11,nlps:17,switchFlag:0},{qe:0x2401,nmps:12,nlps:18,switchFlag:0},{qe:0x1c01,nmps:13,nlps:20,switchFlag:0},{qe:0x1601,nmps:29,nlps:21,switchFlag:0},{qe:0x5601,nmps:15,nlps:14,switchFlag:1},{qe:0x5401,nmps:16,nlps:14,switchFlag:0},{qe:0x5101,nmps:17,nlps:15,switchFlag:0},{qe:0x4801,nmps:18,nlps:16,switchFlag:0},{qe:0x3801,nmps:19,nlps:17,switchFlag:0},{qe:0x3401,nmps:20,nlps:18,switchFlag:0},{qe:0x3001,nmps:21,nlps:19,switchFlag:0},{qe:0x2801,nmps:22,nlps:19,switchFlag:0},{qe:0x2401,nmps:23,nlps:20,switchFlag:0},{qe:0x2201,nmps:24,nlps:21,switchFlag:0},{qe:0x1c01,nmps:25,nlps:22,switchFlag:0},{qe:0x1801,nmps:26,nlps:23,switchFlag:0},{qe:0x1601,nmps:27,nlps:24,switchFlag:0},{qe:0x1401,nmps:28,nlps:25,switchFlag:0},{qe:0x1201,nmps:29,nlps:26,switchFlag:0},{qe:0x1101,nmps:30,nlps:27,switchFlag:0},{qe:0x0ac1,nmps:31,nlps:28,switchFlag:0},{qe:0x09c1,nmps:32,nlps:29,switchFlag:0},{qe:0x08a1,nmps:33,nlps:30,switchFlag:0},{qe:0x0521,nmps:34,nlps:31,switchFlag:0},{qe:0x0441,nmps:35,nlps:32,switchFlag:0},{qe:0x02a1,nmps:36,nlps:33,switchFlag:0},{qe:0x0221,nmps:37,nlps:34,switchFlag:0},{qe:0x0141,nmps:38,nlps:35,switchFlag:0},{qe:0x0111,nmps:39,nlps:36,switchFlag:0},{qe:0x0085,nmps:40,nlps:37,switchFlag:0},{qe:0x0049,nmps:41,nlps:38,switchFlag:0},{qe:0x0025,nmps:42,nlps:39,switchFlag:0},{qe:0x0015,nmps:43,nlps:40,switchFlag:0},{qe:0x0009,nmps:44,nlps:41,switchFlag:0},{qe:0x0005,nmps:45,nlps:42,switchFlag:0},{qe:0x0001,nmps:45,nlps:43,switchFlag:0},{qe:0x5601,nmps:46,nlps:46,switchFlag:0}];var ArithmeticDecoder=/*#__PURE__*/function(){function ArithmeticDecoder(data,start,end){arithmetic_decoder_classCallCheck(this,ArithmeticDecoder);this.data=data;this.bp=start;this.dataEnd=end;this.chigh=data[start];this.clow=0;this.byteIn();this.chigh=this.chigh<<7&0xffff|this.clow>>9&0x7f;this.clow=this.clow<<7&0xffff;this.ct-=7;this.a=0x8000;}arithmetic_decoder_createClass(ArithmeticDecoder,[{key:"byteIn",value:function byteIn(){var data=this.data;var bp=this.bp;if(data[bp]===0xff){if(data[bp+1]>0x8f){this.clow+=0xff00;this.ct=8;}else{bp++;this.clow+=data[bp]<<9;this.ct=7;this.bp=bp;}}else{bp++;this.clow+=bp<this.dataEnd?data[bp]<<8:0xff00;this.ct=8;this.bp=bp;}if(this.clow>0xffff){this.chigh+=this.clow>>16;this.clow&=0xffff;}}},{key:"readBit",value:function readBit(contexts,pos){var cx_index=contexts[pos]>>1,cx_mps=contexts[pos]&1;var qeTableIcx=QeTable[cx_index];var qeIcx=qeTableIcx.qe;var d;var a=this.a-qeIcx;if(this.chigh<qeIcx){if(a<qeIcx){a=qeIcx;d=cx_mps;cx_index=qeTableIcx.nmps;}else{a=qeIcx;d=1^cx_mps;if(qeTableIcx.switchFlag===1){cx_mps=d;}cx_index=qeTableIcx.nlps;}}else{this.chigh-=qeIcx;if((a&0x8000)!==0){this.a=a;return cx_mps;}if(a<qeIcx){d=1^cx_mps;if(qeTableIcx.switchFlag===1){cx_mps=d;}cx_index=qeTableIcx.nlps;}else{d=cx_mps;cx_index=qeTableIcx.nmps;}}do{if(this.ct===0){this.byteIn();}a<<=1;this.chigh=this.chigh<<1&0xffff|this.clow>>15&1;this.clow=this.clow<<1&0xffff;this.ct--;}while((a&0x8000)===0);this.a=a;contexts[pos]=cx_index<<1|cx_mps;return d;}}]);return ArithmeticDecoder;}();
;// CONCATENATED MODULE: ./src/core/jbig2.js
function jbig2_typeof(o){"@babel/helpers - typeof";return jbig2_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},jbig2_typeof(o);}function jbig2_toConsumableArray(arr){return jbig2_arrayWithoutHoles(arr)||jbig2_iterableToArray(arr)||jbig2_unsupportedIterableToArray(arr)||jbig2_nonIterableSpread();}function jbig2_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function jbig2_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function jbig2_arrayWithoutHoles(arr){if(Array.isArray(arr))return jbig2_arrayLikeToArray(arr);}function jbig2_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=jbig2_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function jbig2_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return jbig2_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jbig2_arrayLikeToArray(o,minLen);}function jbig2_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function jbig2_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,jbig2_toPropertyKey(descriptor.key),descriptor);}}function jbig2_createClass(Constructor,protoProps,staticProps){if(protoProps)jbig2_defineProperties(Constructor.prototype,protoProps);if(staticProps)jbig2_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function jbig2_toPropertyKey(arg){var key=jbig2_toPrimitive(arg,"string");return jbig2_typeof(key)==="symbol"?key:String(key);}function jbig2_toPrimitive(input,hint){if(jbig2_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(jbig2_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function jbig2_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function jbig2_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)jbig2_setPrototypeOf(subClass,superClass);}function jbig2_setPrototypeOf(o,p){jbig2_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return jbig2_setPrototypeOf(o,p);}function jbig2_createSuper(Derived){var hasNativeReflectConstruct=jbig2_isNativeReflectConstruct();return function _createSuperInternal(){var Super=jbig2_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=jbig2_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return jbig2_possibleConstructorReturn(this,result);};}function jbig2_possibleConstructorReturn(self,call){if(call&&(jbig2_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return jbig2_assertThisInitialized(self);}function jbig2_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function jbig2_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function jbig2_getPrototypeOf(o){jbig2_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return jbig2_getPrototypeOf(o);}var Jbig2Error=/*#__PURE__*/function(_BaseException){jbig2_inherits(Jbig2Error,_BaseException);var _super=jbig2_createSuper(Jbig2Error);function Jbig2Error(msg){jbig2_classCallCheck(this,Jbig2Error);return _super.call(this,"JBIG2 error: ".concat(msg),"Jbig2Error");}return jbig2_createClass(Jbig2Error);}(BaseException);var ContextCache=/*#__PURE__*/function(){function ContextCache(){jbig2_classCallCheck(this,ContextCache);}jbig2_createClass(ContextCache,[{key:"getContexts",value:function getContexts(id){if(id in this){return this[id];}return this[id]=new Int8Array(1<<16);}}]);return ContextCache;}();var DecodingContext=/*#__PURE__*/function(){function DecodingContext(data,start,end){jbig2_classCallCheck(this,DecodingContext);this.data=data;this.start=start;this.end=end;}jbig2_createClass(DecodingContext,[{key:"decoder",get:function get(){var decoder=new ArithmeticDecoder(this.data,this.start,this.end);return shadow(this,"decoder",decoder);}},{key:"contextCache",get:function get(){var cache=new ContextCache();return shadow(this,"contextCache",cache);}}]);return DecodingContext;}();var MAX_INT_32=Math.pow(2,31)-1;var MIN_INT_32=-Math.pow(2,31);function decodeInteger(contextCache,procedure,decoder){var contexts=contextCache.getContexts(procedure);var prev=1;function readBits(length){var v=0;for(var i=0;i<length;i++){var bit=decoder.readBit(contexts,prev);prev=prev<256?prev<<1|bit:(prev<<1|bit)&511|256;v=v<<1|bit;}return v>>>0;}var sign=readBits(1);var value=readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(1)?readBits(32)+4436:readBits(12)+340:readBits(8)+84:readBits(6)+20:readBits(4)+4:readBits(2);var signedValue;if(sign===0){signedValue=value;}else if(value>0){signedValue=-value;}if(signedValue>=MIN_INT_32&&signedValue<=MAX_INT_32){return signedValue;}return null;}function decodeIAID(contextCache,decoder,codeLength){var contexts=contextCache.getContexts("IAID");var prev=1;for(var i=0;i<codeLength;i++){var bit=decoder.readBit(contexts,prev);prev=prev<<1|bit;}if(codeLength<31){return prev&(1<<codeLength)-1;}return prev&0x7fffffff;}var SegmentTypes=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"];var CodingTemplates=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]];var RefinementTemplates=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}];var ReusedContexts=[0x9b25,0x0795,0x00e5,0x0195];var RefinementReusedContexts=[0x0020,0x0008];function decodeBitmapTemplate0(width,height,decodingContext){var decoder=decodingContext.decoder;var contexts=decodingContext.contextCache.getContexts("GB");var bitmap=[];var contextLabel,i,j,pixel,row,row1,row2;var OLD_PIXEL_MASK=0x7bf7;for(i=0;i<height;i++){row=bitmap[i]=new Uint8Array(width);row1=i<1?row:bitmap[i-1];row2=i<2?row:bitmap[i-2];contextLabel=row2[0]<<13|row2[1]<<12|row2[2]<<11|row1[0]<<7|row1[1]<<6|row1[2]<<5|row1[3]<<4;for(j=0;j<width;j++){row[j]=pixel=decoder.readBit(contexts,contextLabel);contextLabel=(contextLabel&OLD_PIXEL_MASK)<<1|(j+3<width?row2[j+3]<<11:0)|(j+4<width?row1[j+4]<<4:0)|pixel;}}return bitmap;}function decodeBitmap(mmr,width,height,templateIndex,prediction,skip,at,decodingContext){if(mmr){var input=new Reader(decodingContext.data,decodingContext.start,decodingContext.end);return decodeMMRBitmap(input,width,height,false);}if(templateIndex===0&&!skip&&!prediction&&at.length===4&&at[0].x===3&&at[0].y===-1&&at[1].x===-3&&at[1].y===-1&&at[2].x===2&&at[2].y===-2&&at[3].x===-2&&at[3].y===-2){return decodeBitmapTemplate0(width,height,decodingContext);}var useskip=!!skip;var template=CodingTemplates[templateIndex].concat(at);template.sort(function(a,b){return a.y-b.y||a.x-b.x;});var templateLength=template.length;var templateX=new Int8Array(templateLength);var templateY=new Int8Array(templateLength);var changingTemplateEntries=[];var reuseMask=0,minX=0,maxX=0,minY=0;var c,k;for(k=0;k<templateLength;k++){templateX[k]=template[k].x;templateY[k]=template[k].y;minX=Math.min(minX,template[k].x);maxX=Math.max(maxX,template[k].x);minY=Math.min(minY,template[k].y);if(k<templateLength-1&&template[k].y===template[k+1].y&&template[k].x===template[k+1].x-1){reuseMask|=1<<templateLength-1-k;}else{changingTemplateEntries.push(k);}}var changingEntriesLength=changingTemplateEntries.length;var changingTemplateX=new Int8Array(changingEntriesLength);var changingTemplateY=new Int8Array(changingEntriesLength);var changingTemplateBit=new Uint16Array(changingEntriesLength);for(c=0;c<changingEntriesLength;c++){k=changingTemplateEntries[c];changingTemplateX[c]=template[k].x;changingTemplateY[c]=template[k].y;changingTemplateBit[c]=1<<templateLength-1-k;}var sbb_left=-minX;var sbb_top=-minY;var sbb_right=width-maxX;var pseudoPixelContext=ReusedContexts[templateIndex];var row=new Uint8Array(width);var bitmap=[];var decoder=decodingContext.decoder;var contexts=decodingContext.contextCache.getContexts("GB");var ltp=0,j,i0,j0,contextLabel=0,bit,shift;for(var i=0;i<height;i++){if(prediction){var sltp=decoder.readBit(contexts,pseudoPixelContext);ltp^=sltp;if(ltp){bitmap.push(row);continue;}}row=new Uint8Array(row);bitmap.push(row);for(j=0;j<width;j++){if(useskip&&skip[i][j]){row[j]=0;continue;}if(j>=sbb_left&&j<sbb_right&&i>=sbb_top){contextLabel=contextLabel<<1&reuseMask;for(k=0;k<changingEntriesLength;k++){i0=i+changingTemplateY[k];j0=j+changingTemplateX[k];bit=bitmap[i0][j0];if(bit){bit=changingTemplateBit[k];contextLabel|=bit;}}}else{contextLabel=0;shift=templateLength-1;for(k=0;k<templateLength;k++,shift--){j0=j+templateX[k];if(j0>=0&&j0<width){i0=i+templateY[k];if(i0>=0){bit=bitmap[i0][j0];if(bit){contextLabel|=bit<<shift;}}}}}var pixel=decoder.readBit(contexts,contextLabel);row[j]=pixel;}}return bitmap;}function decodeRefinement(width,height,templateIndex,referenceBitmap,offsetX,offsetY,prediction,at,decodingContext){var codingTemplate=RefinementTemplates[templateIndex].coding;if(templateIndex===0){codingTemplate=codingTemplate.concat([at[0]]);}var codingTemplateLength=codingTemplate.length;var codingTemplateX=new Int32Array(codingTemplateLength);var codingTemplateY=new Int32Array(codingTemplateLength);var k;for(k=0;k<codingTemplateLength;k++){codingTemplateX[k]=codingTemplate[k].x;codingTemplateY[k]=codingTemplate[k].y;}var referenceTemplate=RefinementTemplates[templateIndex].reference;if(templateIndex===0){referenceTemplate=referenceTemplate.concat([at[1]]);}var referenceTemplateLength=referenceTemplate.length;var referenceTemplateX=new Int32Array(referenceTemplateLength);var referenceTemplateY=new Int32Array(referenceTemplateLength);for(k=0;k<referenceTemplateLength;k++){referenceTemplateX[k]=referenceTemplate[k].x;referenceTemplateY[k]=referenceTemplate[k].y;}var referenceWidth=referenceBitmap[0].length;var referenceHeight=referenceBitmap.length;var pseudoPixelContext=RefinementReusedContexts[templateIndex];var bitmap=[];var decoder=decodingContext.decoder;var contexts=decodingContext.contextCache.getContexts("GR");var ltp=0;for(var i=0;i<height;i++){if(prediction){var sltp=decoder.readBit(contexts,pseudoPixelContext);ltp^=sltp;if(ltp){throw new Jbig2Error("prediction is not supported");}}var row=new Uint8Array(width);bitmap.push(row);for(var j=0;j<width;j++){var i0=void 0,j0=void 0;var contextLabel=0;for(k=0;k<codingTemplateLength;k++){i0=i+codingTemplateY[k];j0=j+codingTemplateX[k];if(i0<0||j0<0||j0>=width){contextLabel<<=1;}else{contextLabel=contextLabel<<1|bitmap[i0][j0];}}for(k=0;k<referenceTemplateLength;k++){i0=i+referenceTemplateY[k]-offsetY;j0=j+referenceTemplateX[k]-offsetX;if(i0<0||i0>=referenceHeight||j0<0||j0>=referenceWidth){contextLabel<<=1;}else{contextLabel=contextLabel<<1|referenceBitmap[i0][j0];}}var pixel=decoder.readBit(contexts,contextLabel);row[j]=pixel;}}return bitmap;}function decodeSymbolDictionary(huffman,refinement,symbols,numberOfNewSymbols,numberOfExportedSymbols,huffmanTables,templateIndex,at,refinementTemplateIndex,refinementAt,decodingContext,huffmanInput){if(huffman&&refinement){throw new Jbig2Error("symbol refinement with Huffman is not supported");}var newSymbols=[];var currentHeight=0;var symbolCodeLength=log2(symbols.length+numberOfNewSymbols);var decoder=decodingContext.decoder;var contextCache=decodingContext.contextCache;var tableB1,symbolWidths;if(huffman){tableB1=getStandardTable(1);symbolWidths=[];symbolCodeLength=Math.max(symbolCodeLength,1);}while(newSymbols.length<numberOfNewSymbols){var deltaHeight=huffman?huffmanTables.tableDeltaHeight.decode(huffmanInput):decodeInteger(contextCache,"IADH",decoder);currentHeight+=deltaHeight;var currentWidth=0,totalWidth=0;var firstSymbol=huffman?symbolWidths.length:0;while(true){var deltaWidth=huffman?huffmanTables.tableDeltaWidth.decode(huffmanInput):decodeInteger(contextCache,"IADW",decoder);if(deltaWidth===null){break;}currentWidth+=deltaWidth;totalWidth+=currentWidth;var bitmap=void 0;if(refinement){var numberOfInstances=decodeInteger(contextCache,"IAAI",decoder);if(numberOfInstances>1){bitmap=decodeTextRegion(huffman,refinement,currentWidth,currentHeight,0,numberOfInstances,1,symbols.concat(newSymbols),symbolCodeLength,0,0,1,0,huffmanTables,refinementTemplateIndex,refinementAt,decodingContext,0,huffmanInput);}else{var symbolId=decodeIAID(contextCache,decoder,symbolCodeLength);var rdx=decodeInteger(contextCache,"IARDX",decoder);var rdy=decodeInteger(contextCache,"IARDY",decoder);var symbol=symbolId<symbols.length?symbols[symbolId]:newSymbols[symbolId-symbols.length];bitmap=decodeRefinement(currentWidth,currentHeight,refinementTemplateIndex,symbol,rdx,rdy,false,refinementAt,decodingContext);}newSymbols.push(bitmap);}else if(huffman){symbolWidths.push(currentWidth);}else{bitmap=decodeBitmap(false,currentWidth,currentHeight,templateIndex,false,null,at,decodingContext);newSymbols.push(bitmap);}}if(huffman&&!refinement){var bitmapSize=huffmanTables.tableBitmapSize.decode(huffmanInput);huffmanInput.byteAlign();var collectiveBitmap=void 0;if(bitmapSize===0){collectiveBitmap=readUncompressedBitmap(huffmanInput,totalWidth,currentHeight);}else{var originalEnd=huffmanInput.end;var bitmapEnd=huffmanInput.position+bitmapSize;huffmanInput.end=bitmapEnd;collectiveBitmap=decodeMMRBitmap(huffmanInput,totalWidth,currentHeight,false);huffmanInput.end=originalEnd;huffmanInput.position=bitmapEnd;}var numberOfSymbolsDecoded=symbolWidths.length;if(firstSymbol===numberOfSymbolsDecoded-1){newSymbols.push(collectiveBitmap);}else{var _i=void 0,y=void 0,xMin=0,xMax=void 0,bitmapWidth=void 0,symbolBitmap=void 0;for(_i=firstSymbol;_i<numberOfSymbolsDecoded;_i++){bitmapWidth=symbolWidths[_i];xMax=xMin+bitmapWidth;symbolBitmap=[];for(y=0;y<currentHeight;y++){symbolBitmap.push(collectiveBitmap[y].subarray(xMin,xMax));}newSymbols.push(symbolBitmap);xMin=xMax;}}}}var exportedSymbols=[],flags=[];var currentFlag=false,i,ii;var totalSymbolsLength=symbols.length+numberOfNewSymbols;while(flags.length<totalSymbolsLength){var runLength=huffman?tableB1.decode(huffmanInput):decodeInteger(contextCache,"IAEX",decoder);while(runLength--){flags.push(currentFlag);}currentFlag=!currentFlag;}for(i=0,ii=symbols.length;i<ii;i++){if(flags[i]){exportedSymbols.push(symbols[i]);}}for(var j=0;j<numberOfNewSymbols;i++,j++){if(flags[i]){exportedSymbols.push(newSymbols[j]);}}return exportedSymbols;}function decodeTextRegion(huffman,refinement,width,height,defaultPixelValue,numberOfSymbolInstances,stripSize,inputSymbols,symbolCodeLength,transposed,dsOffset,referenceCorner,combinationOperator,huffmanTables,refinementTemplateIndex,refinementAt,decodingContext,logStripSize,huffmanInput){if(huffman&&refinement){throw new Jbig2Error("refinement with Huffman is not supported");}var bitmap=[];var i,row;for(i=0;i<height;i++){row=new Uint8Array(width);if(defaultPixelValue){for(var j=0;j<width;j++){row[j]=defaultPixelValue;}}bitmap.push(row);}var decoder=decodingContext.decoder;var contextCache=decodingContext.contextCache;var stripT=huffman?-huffmanTables.tableDeltaT.decode(huffmanInput):-decodeInteger(contextCache,"IADT",decoder);var firstS=0;i=0;while(i<numberOfSymbolInstances){var deltaT=huffman?huffmanTables.tableDeltaT.decode(huffmanInput):decodeInteger(contextCache,"IADT",decoder);stripT+=deltaT;var deltaFirstS=huffman?huffmanTables.tableFirstS.decode(huffmanInput):decodeInteger(contextCache,"IAFS",decoder);firstS+=deltaFirstS;var currentS=firstS;do{var currentT=0;if(stripSize>1){currentT=huffman?huffmanInput.readBits(logStripSize):decodeInteger(contextCache,"IAIT",decoder);}var t=stripSize*stripT+currentT;var symbolId=huffman?huffmanTables.symbolIDTable.decode(huffmanInput):decodeIAID(contextCache,decoder,symbolCodeLength);var applyRefinement=refinement&&(huffman?huffmanInput.readBit():decodeInteger(contextCache,"IARI",decoder));var symbolBitmap=inputSymbols[symbolId];var symbolWidth=symbolBitmap[0].length;var symbolHeight=symbolBitmap.length;if(applyRefinement){var rdw=decodeInteger(contextCache,"IARDW",decoder);var rdh=decodeInteger(contextCache,"IARDH",decoder);var rdx=decodeInteger(contextCache,"IARDX",decoder);var rdy=decodeInteger(contextCache,"IARDY",decoder);symbolWidth+=rdw;symbolHeight+=rdh;symbolBitmap=decodeRefinement(symbolWidth,symbolHeight,refinementTemplateIndex,symbolBitmap,(rdw>>1)+rdx,(rdh>>1)+rdy,false,refinementAt,decodingContext);}var offsetT=t-(referenceCorner&1?0:symbolHeight-1);var offsetS=currentS-(referenceCorner&2?symbolWidth-1:0);var s2=void 0,t2=void 0,symbolRow=void 0;if(transposed){for(s2=0;s2<symbolHeight;s2++){row=bitmap[offsetS+s2];if(!row){continue;}symbolRow=symbolBitmap[s2];var maxWidth=Math.min(width-offsetT,symbolWidth);switch(combinationOperator){case 0:for(t2=0;t2<maxWidth;t2++){row[offsetT+t2]|=symbolRow[t2];}break;case 2:for(t2=0;t2<maxWidth;t2++){row[offsetT+t2]^=symbolRow[t2];}break;default:throw new Jbig2Error("operator ".concat(combinationOperator," is not supported"));}}currentS+=symbolHeight-1;}else{for(t2=0;t2<symbolHeight;t2++){row=bitmap[offsetT+t2];if(!row){continue;}symbolRow=symbolBitmap[t2];switch(combinationOperator){case 0:for(s2=0;s2<symbolWidth;s2++){row[offsetS+s2]|=symbolRow[s2];}break;case 2:for(s2=0;s2<symbolWidth;s2++){row[offsetS+s2]^=symbolRow[s2];}break;default:throw new Jbig2Error("operator ".concat(combinationOperator," is not supported"));}}currentS+=symbolWidth-1;}i++;var deltaS=huffman?huffmanTables.tableDeltaS.decode(huffmanInput):decodeInteger(contextCache,"IADS",decoder);if(deltaS===null){break;}currentS+=deltaS+dsOffset;}while(true);}return bitmap;}function decodePatternDictionary(mmr,patternWidth,patternHeight,maxPatternIndex,template,decodingContext){var at=[];if(!mmr){at.push({x:-patternWidth,y:0});if(template===0){at.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2});}}var collectiveWidth=(maxPatternIndex+1)*patternWidth;var collectiveBitmap=decodeBitmap(mmr,collectiveWidth,patternHeight,template,false,null,at,decodingContext);var patterns=[];for(var i=0;i<=maxPatternIndex;i++){var patternBitmap=[];var xMin=patternWidth*i;var xMax=xMin+patternWidth;for(var y=0;y<patternHeight;y++){patternBitmap.push(collectiveBitmap[y].subarray(xMin,xMax));}patterns.push(patternBitmap);}return patterns;}function decodeHalftoneRegion(mmr,patterns,template,regionWidth,regionHeight,defaultPixelValue,enableSkip,combinationOperator,gridWidth,gridHeight,gridOffsetX,gridOffsetY,gridVectorX,gridVectorY,decodingContext){var skip=null;if(enableSkip){throw new Jbig2Error("skip is not supported");}if(combinationOperator!==0){throw new Jbig2Error("operator \"".concat(combinationOperator,"\" is not supported in halftone region"));}var regionBitmap=[];var i,j,row;for(i=0;i<regionHeight;i++){row=new Uint8Array(regionWidth);if(defaultPixelValue){for(j=0;j<regionWidth;j++){row[j]=defaultPixelValue;}}regionBitmap.push(row);}var numberOfPatterns=patterns.length;var pattern0=patterns[0];var patternWidth=pattern0[0].length,patternHeight=pattern0.length;var bitsPerValue=log2(numberOfPatterns);var at=[];if(!mmr){at.push({x:template<=1?3:2,y:-1});if(template===0){at.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2});}}var grayScaleBitPlanes=[];var mmrInput,bitmap;if(mmr){mmrInput=new Reader(decodingContext.data,decodingContext.start,decodingContext.end);}for(i=bitsPerValue-1;i>=0;i--){if(mmr){bitmap=decodeMMRBitmap(mmrInput,gridWidth,gridHeight,true);}else{bitmap=decodeBitmap(false,gridWidth,gridHeight,template,false,skip,at,decodingContext);}grayScaleBitPlanes[i]=bitmap;}var mg,ng,bit,patternIndex,patternBitmap,x,y,patternRow,regionRow;for(mg=0;mg<gridHeight;mg++){for(ng=0;ng<gridWidth;ng++){bit=0;patternIndex=0;for(j=bitsPerValue-1;j>=0;j--){bit^=grayScaleBitPlanes[j][mg][ng];patternIndex|=bit<<j;}patternBitmap=patterns[patternIndex];x=gridOffsetX+mg*gridVectorY+ng*gridVectorX>>8;y=gridOffsetY+mg*gridVectorX-ng*gridVectorY>>8;if(x>=0&&x+patternWidth<=regionWidth&&y>=0&&y+patternHeight<=regionHeight){for(i=0;i<patternHeight;i++){regionRow=regionBitmap[y+i];patternRow=patternBitmap[i];for(j=0;j<patternWidth;j++){regionRow[x+j]|=patternRow[j];}}}else{var regionX=void 0,regionY=void 0;for(i=0;i<patternHeight;i++){regionY=y+i;if(regionY<0||regionY>=regionHeight){continue;}regionRow=regionBitmap[regionY];patternRow=patternBitmap[i];for(j=0;j<patternWidth;j++){regionX=x+j;if(regionX>=0&&regionX<regionWidth){regionRow[regionX]|=patternRow[j];}}}}}}return regionBitmap;}function readSegmentHeader(data,start){var segmentHeader={};segmentHeader.number=readUint32(data,start);var flags=data[start+4];var segmentType=flags&0x3f;if(!SegmentTypes[segmentType]){throw new Jbig2Error("invalid segment type: "+segmentType);}segmentHeader.type=segmentType;segmentHeader.typeName=SegmentTypes[segmentType];segmentHeader.deferredNonRetain=!!(flags&0x80);var pageAssociationFieldSize=!!(flags&0x40);var referredFlags=data[start+5];var referredToCount=referredFlags>>5&7;var retainBits=[referredFlags&31];var position=start+6;if(referredFlags===7){referredToCount=readUint32(data,position-1)&0x1fffffff;position+=3;var bytes=referredToCount+7>>3;retainBits[0]=data[position++];while(--bytes>0){retainBits.push(data[position++]);}}else if(referredFlags===5||referredFlags===6){throw new Jbig2Error("invalid referred-to flags");}segmentHeader.retainBits=retainBits;var referredToSegmentNumberSize=4;if(segmentHeader.number<=256){referredToSegmentNumberSize=1;}else if(segmentHeader.number<=65536){referredToSegmentNumberSize=2;}var referredTo=[];var i,ii;for(i=0;i<referredToCount;i++){var number=void 0;if(referredToSegmentNumberSize===1){number=data[position];}else if(referredToSegmentNumberSize===2){number=readUint16(data,position);}else{number=readUint32(data,position);}referredTo.push(number);position+=referredToSegmentNumberSize;}segmentHeader.referredTo=referredTo;if(!pageAssociationFieldSize){segmentHeader.pageAssociation=data[position++];}else{segmentHeader.pageAssociation=readUint32(data,position);position+=4;}segmentHeader.length=readUint32(data,position);position+=4;if(segmentHeader.length===0xffffffff){if(segmentType===38){var genericRegionInfo=readRegionSegmentInformation(data,position);var genericRegionSegmentFlags=data[position+RegionSegmentInformationFieldLength];var genericRegionMmr=!!(genericRegionSegmentFlags&1);var searchPatternLength=6;var searchPattern=new Uint8Array(searchPatternLength);if(!genericRegionMmr){searchPattern[0]=0xff;searchPattern[1]=0xac;}searchPattern[2]=genericRegionInfo.height>>>24&0xff;searchPattern[3]=genericRegionInfo.height>>16&0xff;searchPattern[4]=genericRegionInfo.height>>8&0xff;searchPattern[5]=genericRegionInfo.height&0xff;for(i=position,ii=data.length;i<ii;i++){var j=0;while(j<searchPatternLength&&searchPattern[j]===data[i+j]){j++;}if(j===searchPatternLength){segmentHeader.length=i+searchPatternLength;break;}}if(segmentHeader.length===0xffffffff){throw new Jbig2Error("segment end was not found");}}else{throw new Jbig2Error("invalid unknown segment length");}}segmentHeader.headerEnd=position;return segmentHeader;}function readSegments(header,data,start,end){var segments=[];var position=start;while(position<end){var segmentHeader=readSegmentHeader(data,position);position=segmentHeader.headerEnd;var segment={header:segmentHeader,data:data};if(!header.randomAccess){segment.start=position;position+=segmentHeader.length;segment.end=position;}segments.push(segment);if(segmentHeader.type===51){break;}}if(header.randomAccess){for(var i=0,ii=segments.length;i<ii;i++){segments[i].start=position;position+=segments[i].header.length;segments[i].end=position;}}return segments;}function readRegionSegmentInformation(data,start){return{width:readUint32(data,start),height:readUint32(data,start+4),x:readUint32(data,start+8),y:readUint32(data,start+12),combinationOperator:data[start+16]&7};}var RegionSegmentInformationFieldLength=17;function processSegment(segment,visitor){var header=segment.header;var data=segment.data,end=segment.end;var position=segment.start;var args,at,i,atLength;switch(header.type){case 0:var dictionary={};var dictionaryFlags=readUint16(data,position);dictionary.huffman=!!(dictionaryFlags&1);dictionary.refinement=!!(dictionaryFlags&2);dictionary.huffmanDHSelector=dictionaryFlags>>2&3;dictionary.huffmanDWSelector=dictionaryFlags>>4&3;dictionary.bitmapSizeSelector=dictionaryFlags>>6&1;dictionary.aggregationInstancesSelector=dictionaryFlags>>7&1;dictionary.bitmapCodingContextUsed=!!(dictionaryFlags&256);dictionary.bitmapCodingContextRetained=!!(dictionaryFlags&512);dictionary.template=dictionaryFlags>>10&3;dictionary.refinementTemplate=dictionaryFlags>>12&1;position+=2;if(!dictionary.huffman){atLength=dictionary.template===0?4:1;at=[];for(i=0;i<atLength;i++){at.push({x:readInt8(data,position),y:readInt8(data,position+1)});position+=2;}dictionary.at=at;}if(dictionary.refinement&&!dictionary.refinementTemplate){at=[];for(i=0;i<2;i++){at.push({x:readInt8(data,position),y:readInt8(data,position+1)});position+=2;}dictionary.refinementAt=at;}dictionary.numberOfExportedSymbols=readUint32(data,position);position+=4;dictionary.numberOfNewSymbols=readUint32(data,position);position+=4;args=[dictionary,header.number,header.referredTo,data,position,end];break;case 6:case 7:var textRegion={};textRegion.info=readRegionSegmentInformation(data,position);position+=RegionSegmentInformationFieldLength;var textRegionSegmentFlags=readUint16(data,position);position+=2;textRegion.huffman=!!(textRegionSegmentFlags&1);textRegion.refinement=!!(textRegionSegmentFlags&2);textRegion.logStripSize=textRegionSegmentFlags>>2&3;textRegion.stripSize=1<<textRegion.logStripSize;textRegion.referenceCorner=textRegionSegmentFlags>>4&3;textRegion.transposed=!!(textRegionSegmentFlags&64);textRegion.combinationOperator=textRegionSegmentFlags>>7&3;textRegion.defaultPixelValue=textRegionSegmentFlags>>9&1;textRegion.dsOffset=textRegionSegmentFlags<<17>>27;textRegion.refinementTemplate=textRegionSegmentFlags>>15&1;if(textRegion.huffman){var textRegionHuffmanFlags=readUint16(data,position);position+=2;textRegion.huffmanFS=textRegionHuffmanFlags&3;textRegion.huffmanDS=textRegionHuffmanFlags>>2&3;textRegion.huffmanDT=textRegionHuffmanFlags>>4&3;textRegion.huffmanRefinementDW=textRegionHuffmanFlags>>6&3;textRegion.huffmanRefinementDH=textRegionHuffmanFlags>>8&3;textRegion.huffmanRefinementDX=textRegionHuffmanFlags>>10&3;textRegion.huffmanRefinementDY=textRegionHuffmanFlags>>12&3;textRegion.huffmanRefinementSizeSelector=!!(textRegionHuffmanFlags&0x4000);}if(textRegion.refinement&&!textRegion.refinementTemplate){at=[];for(i=0;i<2;i++){at.push({x:readInt8(data,position),y:readInt8(data,position+1)});position+=2;}textRegion.refinementAt=at;}textRegion.numberOfSymbolInstances=readUint32(data,position);position+=4;args=[textRegion,header.referredTo,data,position,end];break;case 16:var patternDictionary={};var patternDictionaryFlags=data[position++];patternDictionary.mmr=!!(patternDictionaryFlags&1);patternDictionary.template=patternDictionaryFlags>>1&3;patternDictionary.patternWidth=data[position++];patternDictionary.patternHeight=data[position++];patternDictionary.maxPatternIndex=readUint32(data,position);position+=4;args=[patternDictionary,header.number,data,position,end];break;case 22:case 23:var halftoneRegion={};halftoneRegion.info=readRegionSegmentInformation(data,position);position+=RegionSegmentInformationFieldLength;var halftoneRegionFlags=data[position++];halftoneRegion.mmr=!!(halftoneRegionFlags&1);halftoneRegion.template=halftoneRegionFlags>>1&3;halftoneRegion.enableSkip=!!(halftoneRegionFlags&8);halftoneRegion.combinationOperator=halftoneRegionFlags>>4&7;halftoneRegion.defaultPixelValue=halftoneRegionFlags>>7&1;halftoneRegion.gridWidth=readUint32(data,position);position+=4;halftoneRegion.gridHeight=readUint32(data,position);position+=4;halftoneRegion.gridOffsetX=readUint32(data,position)&0xffffffff;position+=4;halftoneRegion.gridOffsetY=readUint32(data,position)&0xffffffff;position+=4;halftoneRegion.gridVectorX=readUint16(data,position);position+=2;halftoneRegion.gridVectorY=readUint16(data,position);position+=2;args=[halftoneRegion,header.referredTo,data,position,end];break;case 38:case 39:var genericRegion={};genericRegion.info=readRegionSegmentInformation(data,position);position+=RegionSegmentInformationFieldLength;var genericRegionSegmentFlags=data[position++];genericRegion.mmr=!!(genericRegionSegmentFlags&1);genericRegion.template=genericRegionSegmentFlags>>1&3;genericRegion.prediction=!!(genericRegionSegmentFlags&8);if(!genericRegion.mmr){atLength=genericRegion.template===0?4:1;at=[];for(i=0;i<atLength;i++){at.push({x:readInt8(data,position),y:readInt8(data,position+1)});position+=2;}genericRegion.at=at;}args=[genericRegion,data,position,end];break;case 48:var pageInfo={width:readUint32(data,position),height:readUint32(data,position+4),resolutionX:readUint32(data,position+8),resolutionY:readUint32(data,position+12)};if(pageInfo.height===0xffffffff){delete pageInfo.height;}var pageSegmentFlags=data[position+16];readUint16(data,position+17);pageInfo.lossless=!!(pageSegmentFlags&1);pageInfo.refinement=!!(pageSegmentFlags&2);pageInfo.defaultPixelValue=pageSegmentFlags>>2&1;pageInfo.combinationOperator=pageSegmentFlags>>3&3;pageInfo.requiresBuffer=!!(pageSegmentFlags&32);pageInfo.combinationOperatorOverride=!!(pageSegmentFlags&64);args=[pageInfo];break;case 49:break;case 50:break;case 51:break;case 53:args=[header.number,data,position,end];break;case 62:break;default:throw new Jbig2Error("segment type ".concat(header.typeName,"(").concat(header.type,") is not implemented"));}var callbackName="on"+header.typeName;if(callbackName in visitor){visitor[callbackName].apply(visitor,args);}}function processSegments(segments,visitor){for(var i=0,ii=segments.length;i<ii;i++){processSegment(segments[i],visitor);}}function parseJbig2Chunks(chunks){var visitor=new SimpleSegmentVisitor();for(var i=0,ii=chunks.length;i<ii;i++){var chunk=chunks[i];var segments=readSegments({},chunk.data,chunk.start,chunk.end);processSegments(segments,visitor);}return visitor.buffer;}function parseJbig2(data){throw new Error("Not implemented: parseJbig2");}var SimpleSegmentVisitor=/*#__PURE__*/function(){function SimpleSegmentVisitor(){jbig2_classCallCheck(this,SimpleSegmentVisitor);}jbig2_createClass(SimpleSegmentVisitor,[{key:"onPageInformation",value:function onPageInformation(info){this.currentPageInfo=info;var rowSize=info.width+7>>3;var buffer=new Uint8ClampedArray(rowSize*info.height);if(info.defaultPixelValue){buffer.fill(0xff);}this.buffer=buffer;}},{key:"drawBitmap",value:function drawBitmap(regionInfo,bitmap){var pageInfo=this.currentPageInfo;var width=regionInfo.width,height=regionInfo.height;var rowSize=pageInfo.width+7>>3;var combinationOperator=pageInfo.combinationOperatorOverride?regionInfo.combinationOperator:pageInfo.combinationOperator;var buffer=this.buffer;var mask0=128>>(regionInfo.x&7);var offset0=regionInfo.y*rowSize+(regionInfo.x>>3);var i,j,mask,offset;switch(combinationOperator){case 0:for(i=0;i<height;i++){mask=mask0;offset=offset0;for(j=0;j<width;j++){if(bitmap[i][j]){buffer[offset]|=mask;}mask>>=1;if(!mask){mask=128;offset++;}}offset0+=rowSize;}break;case 2:for(i=0;i<height;i++){mask=mask0;offset=offset0;for(j=0;j<width;j++){if(bitmap[i][j]){buffer[offset]^=mask;}mask>>=1;if(!mask){mask=128;offset++;}}offset0+=rowSize;}break;default:throw new Jbig2Error("operator ".concat(combinationOperator," is not supported"));}}},{key:"onImmediateGenericRegion",value:function onImmediateGenericRegion(region,data,start,end){var regionInfo=region.info;var decodingContext=new DecodingContext(data,start,end);var bitmap=decodeBitmap(region.mmr,regionInfo.width,regionInfo.height,region.template,region.prediction,null,region.at,decodingContext);this.drawBitmap(regionInfo,bitmap);}},{key:"onImmediateLosslessGenericRegion",value:function onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion.apply(this,arguments);}},{key:"onSymbolDictionary",value:function onSymbolDictionary(dictionary,currentSegment,referredSegments,data,start,end){var huffmanTables,huffmanInput;if(dictionary.huffman){huffmanTables=getSymbolDictionaryHuffmanTables(dictionary,referredSegments,this.customTables);huffmanInput=new Reader(data,start,end);}var symbols=this.symbols;if(!symbols){this.symbols=symbols={};}var inputSymbols=[];var _iterator=jbig2_createForOfIteratorHelper(referredSegments),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var referredSegment=_step.value;var referredSymbols=symbols[referredSegment];if(referredSymbols){inputSymbols.push.apply(inputSymbols,jbig2_toConsumableArray(referredSymbols));}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var decodingContext=new DecodingContext(data,start,end);symbols[currentSegment]=decodeSymbolDictionary(dictionary.huffman,dictionary.refinement,inputSymbols,dictionary.numberOfNewSymbols,dictionary.numberOfExportedSymbols,huffmanTables,dictionary.template,dictionary.at,dictionary.refinementTemplate,dictionary.refinementAt,decodingContext,huffmanInput);}},{key:"onImmediateTextRegion",value:function onImmediateTextRegion(region,referredSegments,data,start,end){var regionInfo=region.info;var huffmanTables,huffmanInput;var symbols=this.symbols;var inputSymbols=[];var _iterator2=jbig2_createForOfIteratorHelper(referredSegments),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var referredSegment=_step2.value;var referredSymbols=symbols[referredSegment];if(referredSymbols){inputSymbols.push.apply(inputSymbols,jbig2_toConsumableArray(referredSymbols));}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var symbolCodeLength=log2(inputSymbols.length);if(region.huffman){huffmanInput=new Reader(data,start,end);huffmanTables=getTextRegionHuffmanTables(region,referredSegments,this.customTables,inputSymbols.length,huffmanInput);}var decodingContext=new DecodingContext(data,start,end);var bitmap=decodeTextRegion(region.huffman,region.refinement,regionInfo.width,regionInfo.height,region.defaultPixelValue,region.numberOfSymbolInstances,region.stripSize,inputSymbols,symbolCodeLength,region.transposed,region.dsOffset,region.referenceCorner,region.combinationOperator,huffmanTables,region.refinementTemplate,region.refinementAt,decodingContext,region.logStripSize,huffmanInput);this.drawBitmap(regionInfo,bitmap);}},{key:"onImmediateLosslessTextRegion",value:function onImmediateLosslessTextRegion(){this.onImmediateTextRegion.apply(this,arguments);}},{key:"onPatternDictionary",value:function onPatternDictionary(dictionary,currentSegment,data,start,end){var patterns=this.patterns;if(!patterns){this.patterns=patterns={};}var decodingContext=new DecodingContext(data,start,end);patterns[currentSegment]=decodePatternDictionary(dictionary.mmr,dictionary.patternWidth,dictionary.patternHeight,dictionary.maxPatternIndex,dictionary.template,decodingContext);}},{key:"onImmediateHalftoneRegion",value:function onImmediateHalftoneRegion(region,referredSegments,data,start,end){var patterns=this.patterns[referredSegments[0]];var regionInfo=region.info;var decodingContext=new DecodingContext(data,start,end);var bitmap=decodeHalftoneRegion(region.mmr,patterns,region.template,regionInfo.width,regionInfo.height,region.defaultPixelValue,region.enableSkip,region.combinationOperator,region.gridWidth,region.gridHeight,region.gridOffsetX,region.gridOffsetY,region.gridVectorX,region.gridVectorY,decodingContext);this.drawBitmap(regionInfo,bitmap);}},{key:"onImmediateLosslessHalftoneRegion",value:function onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion.apply(this,arguments);}},{key:"onTables",value:function onTables(currentSegment,data,start,end){var customTables=this.customTables;if(!customTables){this.customTables=customTables={};}customTables[currentSegment]=decodeTablesSegment(data,start,end);}}]);return SimpleSegmentVisitor;}();var HuffmanLine=/*#__PURE__*/jbig2_createClass(function HuffmanLine(lineData){jbig2_classCallCheck(this,HuffmanLine);if(lineData.length===2){this.isOOB=true;this.rangeLow=0;this.prefixLength=lineData[0];this.rangeLength=0;this.prefixCode=lineData[1];this.isLowerRange=false;}else{this.isOOB=false;this.rangeLow=lineData[0];this.prefixLength=lineData[1];this.rangeLength=lineData[2];this.prefixCode=lineData[3];this.isLowerRange=lineData[4]==="lower";}});var HuffmanTreeNode=/*#__PURE__*/function(){function HuffmanTreeNode(line){jbig2_classCallCheck(this,HuffmanTreeNode);this.children=[];if(line){this.isLeaf=true;this.rangeLength=line.rangeLength;this.rangeLow=line.rangeLow;this.isLowerRange=line.isLowerRange;this.isOOB=line.isOOB;}else{this.isLeaf=false;}}jbig2_createClass(HuffmanTreeNode,[{key:"buildTree",value:function buildTree(line,shift){var bit=line.prefixCode>>shift&1;if(shift<=0){this.children[bit]=new HuffmanTreeNode(line);}else{var node=this.children[bit];if(!node){this.children[bit]=node=new HuffmanTreeNode(null);}node.buildTree(line,shift-1);}}},{key:"decodeNode",value:function decodeNode(reader){if(this.isLeaf){if(this.isOOB){return null;}var htOffset=reader.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-htOffset:htOffset);}var node=this.children[reader.readBit()];if(!node){throw new Jbig2Error("invalid Huffman data");}return node.decodeNode(reader);}}]);return HuffmanTreeNode;}();var HuffmanTable=/*#__PURE__*/function(){function HuffmanTable(lines,prefixCodesDone){jbig2_classCallCheck(this,HuffmanTable);if(!prefixCodesDone){this.assignPrefixCodes(lines);}this.rootNode=new HuffmanTreeNode(null);for(var i=0,ii=lines.length;i<ii;i++){var line=lines[i];if(line.prefixLength>0){this.rootNode.buildTree(line,line.prefixLength-1);}}}jbig2_createClass(HuffmanTable,[{key:"decode",value:function decode(reader){return this.rootNode.decodeNode(reader);}},{key:"assignPrefixCodes",value:function assignPrefixCodes(lines){var linesLength=lines.length;var prefixLengthMax=0;for(var i=0;i<linesLength;i++){prefixLengthMax=Math.max(prefixLengthMax,lines[i].prefixLength);}var histogram=new Uint32Array(prefixLengthMax+1);for(var _i2=0;_i2<linesLength;_i2++){histogram[lines[_i2].prefixLength]++;}var currentLength=1,firstCode=0,currentCode,currentTemp,line;histogram[0]=0;while(currentLength<=prefixLengthMax){firstCode=firstCode+histogram[currentLength-1]<<1;currentCode=firstCode;currentTemp=0;while(currentTemp<linesLength){line=lines[currentTemp];if(line.prefixLength===currentLength){line.prefixCode=currentCode;currentCode++;}currentTemp++;}currentLength++;}}}]);return HuffmanTable;}();function decodeTablesSegment(data,start,end){var flags=data[start];var lowestValue=readUint32(data,start+1)&0xffffffff;var highestValue=readUint32(data,start+5)&0xffffffff;var reader=new Reader(data,start+9,end);var prefixSizeBits=(flags>>1&7)+1;var rangeSizeBits=(flags>>4&7)+1;var lines=[];var prefixLength,rangeLength,currentRangeLow=lowestValue;do{prefixLength=reader.readBits(prefixSizeBits);rangeLength=reader.readBits(rangeSizeBits);lines.push(new HuffmanLine([currentRangeLow,prefixLength,rangeLength,0]));currentRangeLow+=1<<rangeLength;}while(currentRangeLow<highestValue);prefixLength=reader.readBits(prefixSizeBits);lines.push(new HuffmanLine([lowestValue-1,prefixLength,32,0,"lower"]));prefixLength=reader.readBits(prefixSizeBits);lines.push(new HuffmanLine([highestValue,prefixLength,32,0]));if(flags&1){prefixLength=reader.readBits(prefixSizeBits);lines.push(new HuffmanLine([prefixLength,0]));}return new HuffmanTable(lines,false);}var standardTablesCache={};function getStandardTable(number){var table=standardTablesCache[number];if(table){return table;}var lines;switch(number){case 1:lines=[[0,1,4,0x0],[16,2,8,0x2],[272,3,16,0x6],[65808,3,32,0x7]];break;case 2:lines=[[0,1,0,0x0],[1,2,0,0x2],[2,3,0,0x6],[3,4,3,0xe],[11,5,6,0x1e],[75,6,32,0x3e],[6,0x3f]];break;case 3:lines=[[-256,8,8,0xfe],[0,1,0,0x0],[1,2,0,0x2],[2,3,0,0x6],[3,4,3,0xe],[11,5,6,0x1e],[-257,8,32,0xff,"lower"],[75,7,32,0x7e],[6,0x3e]];break;case 4:lines=[[1,1,0,0x0],[2,2,0,0x2],[3,3,0,0x6],[4,4,3,0xe],[12,5,6,0x1e],[76,5,32,0x1f]];break;case 5:lines=[[-255,7,8,0x7e],[1,1,0,0x0],[2,2,0,0x2],[3,3,0,0x6],[4,4,3,0xe],[12,5,6,0x1e],[-256,7,32,0x7f,"lower"],[76,6,32,0x3e]];break;case 6:lines=[[-2048,5,10,0x1c],[-1024,4,9,0x8],[-512,4,8,0x9],[-256,4,7,0xa],[-128,5,6,0x1d],[-64,5,5,0x1e],[-32,4,5,0xb],[0,2,7,0x0],[128,3,7,0x2],[256,3,8,0x3],[512,4,9,0xc],[1024,4,10,0xd],[-2049,6,32,0x3e,"lower"],[2048,6,32,0x3f]];break;case 7:lines=[[-1024,4,9,0x8],[-512,3,8,0x0],[-256,4,7,0x9],[-128,5,6,0x1a],[-64,5,5,0x1b],[-32,4,5,0xa],[0,4,5,0xb],[32,5,5,0x1c],[64,5,6,0x1d],[128,4,7,0xc],[256,3,8,0x1],[512,3,9,0x2],[1024,3,10,0x3],[-1025,5,32,0x1e,"lower"],[2048,5,32,0x1f]];break;case 8:lines=[[-15,8,3,0xfc],[-7,9,1,0x1fc],[-5,8,1,0xfd],[-3,9,0,0x1fd],[-2,7,0,0x7c],[-1,4,0,0xa],[0,2,1,0x0],[2,5,0,0x1a],[3,6,0,0x3a],[4,3,4,0x4],[20,6,1,0x3b],[22,4,4,0xb],[38,4,5,0xc],[70,5,6,0x1b],[134,5,7,0x1c],[262,6,7,0x3c],[390,7,8,0x7d],[646,6,10,0x3d],[-16,9,32,0x1fe,"lower"],[1670,9,32,0x1ff],[2,0x1]];break;case 9:lines=[[-31,8,4,0xfc],[-15,9,2,0x1fc],[-11,8,2,0xfd],[-7,9,1,0x1fd],[-5,7,1,0x7c],[-3,4,1,0xa],[-1,3,1,0x2],[1,3,1,0x3],[3,5,1,0x1a],[5,6,1,0x3a],[7,3,5,0x4],[39,6,2,0x3b],[43,4,5,0xb],[75,4,6,0xc],[139,5,7,0x1b],[267,5,8,0x1c],[523,6,8,0x3c],[779,7,9,0x7d],[1291,6,11,0x3d],[-32,9,32,0x1fe,"lower"],[3339,9,32,0x1ff],[2,0x0]];break;case 10:lines=[[-21,7,4,0x7a],[-5,8,0,0xfc],[-4,7,0,0x7b],[-3,5,0,0x18],[-2,2,2,0x0],[2,5,0,0x19],[3,6,0,0x36],[4,7,0,0x7c],[5,8,0,0xfd],[6,2,6,0x1],[70,5,5,0x1a],[102,6,5,0x37],[134,6,6,0x38],[198,6,7,0x39],[326,6,8,0x3a],[582,6,9,0x3b],[1094,6,10,0x3c],[2118,7,11,0x7d],[-22,8,32,0xfe,"lower"],[4166,8,32,0xff],[2,0x2]];break;case 11:lines=[[1,1,0,0x0],[2,2,1,0x2],[4,4,0,0xc],[5,4,1,0xd],[7,5,1,0x1c],[9,5,2,0x1d],[13,6,2,0x3c],[17,7,2,0x7a],[21,7,3,0x7b],[29,7,4,0x7c],[45,7,5,0x7d],[77,7,6,0x7e],[141,7,32,0x7f]];break;case 12:lines=[[1,1,0,0x0],[2,2,0,0x2],[3,3,1,0x6],[5,5,0,0x1c],[6,5,1,0x1d],[8,6,1,0x3c],[10,7,0,0x7a],[11,7,1,0x7b],[13,7,2,0x7c],[17,7,3,0x7d],[25,7,4,0x7e],[41,8,5,0xfe],[73,8,32,0xff]];break;case 13:lines=[[1,1,0,0x0],[2,3,0,0x4],[3,4,0,0xc],[4,5,0,0x1c],[5,4,1,0xd],[7,3,3,0x5],[15,6,1,0x3a],[17,6,2,0x3b],[21,6,3,0x3c],[29,6,4,0x3d],[45,6,5,0x3e],[77,7,6,0x7e],[141,7,32,0x7f]];break;case 14:lines=[[-2,3,0,0x4],[-1,3,0,0x5],[0,1,0,0x0],[1,3,0,0x6],[2,3,0,0x7]];break;case 15:lines=[[-24,7,4,0x7c],[-8,6,2,0x3c],[-4,5,1,0x1c],[-2,4,0,0xc],[-1,3,0,0x4],[0,1,0,0x0],[1,3,0,0x5],[2,4,0,0xd],[3,5,1,0x1d],[5,6,2,0x3d],[9,7,4,0x7d],[-25,7,32,0x7e,"lower"],[25,7,32,0x7f]];break;default:throw new Jbig2Error("standard table B.".concat(number," does not exist"));}for(var i=0,ii=lines.length;i<ii;i++){lines[i]=new HuffmanLine(lines[i]);}table=new HuffmanTable(lines,true);standardTablesCache[number]=table;return table;}var Reader=/*#__PURE__*/function(){function Reader(data,start,end){jbig2_classCallCheck(this,Reader);this.data=data;this.start=start;this.end=end;this.position=start;this.shift=-1;this.currentByte=0;}jbig2_createClass(Reader,[{key:"readBit",value:function readBit(){if(this.shift<0){if(this.position>=this.end){throw new Jbig2Error("end of data while reading bit");}this.currentByte=this.data[this.position++];this.shift=7;}var bit=this.currentByte>>this.shift&1;this.shift--;return bit;}},{key:"readBits",value:function readBits(numBits){var result=0,i;for(i=numBits-1;i>=0;i--){result|=this.readBit()<<i;}return result;}},{key:"byteAlign",value:function byteAlign(){this.shift=-1;}},{key:"next",value:function next(){if(this.position>=this.end){return-1;}return this.data[this.position++];}}]);return Reader;}();function getCustomHuffmanTable(index,referredTo,customTables){var currentIndex=0;for(var i=0,ii=referredTo.length;i<ii;i++){var table=customTables[referredTo[i]];if(table){if(index===currentIndex){return table;}currentIndex++;}}throw new Jbig2Error("can't find custom Huffman table");}function getTextRegionHuffmanTables(textRegion,referredTo,customTables,numberOfSymbols,reader){var codes=[];for(var i=0;i<=34;i++){var codeLength=reader.readBits(4);codes.push(new HuffmanLine([i,codeLength,0,0]));}var runCodesTable=new HuffmanTable(codes,false);codes.length=0;for(var _i3=0;_i3<numberOfSymbols;){var _codeLength=runCodesTable.decode(reader);if(_codeLength>=32){var repeatedLength=void 0,numberOfRepeats=void 0,j=void 0;switch(_codeLength){case 32:if(_i3===0){throw new Jbig2Error("no previous value in symbol ID table");}numberOfRepeats=reader.readBits(2)+3;repeatedLength=codes[_i3-1].prefixLength;break;case 33:numberOfRepeats=reader.readBits(3)+3;repeatedLength=0;break;case 34:numberOfRepeats=reader.readBits(7)+11;repeatedLength=0;break;default:throw new Jbig2Error("invalid code length in symbol ID table");}for(j=0;j<numberOfRepeats;j++){codes.push(new HuffmanLine([_i3,repeatedLength,0,0]));_i3++;}}else{codes.push(new HuffmanLine([_i3,_codeLength,0,0]));_i3++;}}reader.byteAlign();var symbolIDTable=new HuffmanTable(codes,false);var customIndex=0,tableFirstS,tableDeltaS,tableDeltaT;switch(textRegion.huffmanFS){case 0:case 1:tableFirstS=getStandardTable(textRegion.huffmanFS+6);break;case 3:tableFirstS=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;break;default:throw new Jbig2Error("invalid Huffman FS selector");}switch(textRegion.huffmanDS){case 0:case 1:case 2:tableDeltaS=getStandardTable(textRegion.huffmanDS+8);break;case 3:tableDeltaS=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;break;default:throw new Jbig2Error("invalid Huffman DS selector");}switch(textRegion.huffmanDT){case 0:case 1:case 2:tableDeltaT=getStandardTable(textRegion.huffmanDT+11);break;case 3:tableDeltaT=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;break;default:throw new Jbig2Error("invalid Huffman DT selector");}if(textRegion.refinement){throw new Jbig2Error("refinement with Huffman is not supported");}return{symbolIDTable:symbolIDTable,tableFirstS:tableFirstS,tableDeltaS:tableDeltaS,tableDeltaT:tableDeltaT};}function getSymbolDictionaryHuffmanTables(dictionary,referredTo,customTables){var customIndex=0,tableDeltaHeight,tableDeltaWidth;switch(dictionary.huffmanDHSelector){case 0:case 1:tableDeltaHeight=getStandardTable(dictionary.huffmanDHSelector+4);break;case 3:tableDeltaHeight=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;break;default:throw new Jbig2Error("invalid Huffman DH selector");}switch(dictionary.huffmanDWSelector){case 0:case 1:tableDeltaWidth=getStandardTable(dictionary.huffmanDWSelector+2);break;case 3:tableDeltaWidth=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;break;default:throw new Jbig2Error("invalid Huffman DW selector");}var tableBitmapSize,tableAggregateInstances;if(dictionary.bitmapSizeSelector){tableBitmapSize=getCustomHuffmanTable(customIndex,referredTo,customTables);customIndex++;}else{tableBitmapSize=getStandardTable(1);}if(dictionary.aggregationInstancesSelector){tableAggregateInstances=getCustomHuffmanTable(customIndex,referredTo,customTables);}else{tableAggregateInstances=getStandardTable(1);}return{tableDeltaHeight:tableDeltaHeight,tableDeltaWidth:tableDeltaWidth,tableBitmapSize:tableBitmapSize,tableAggregateInstances:tableAggregateInstances};}function readUncompressedBitmap(reader,width,height){var bitmap=[];for(var y=0;y<height;y++){var row=new Uint8Array(width);bitmap.push(row);for(var x=0;x<width;x++){row[x]=reader.readBit();}reader.byteAlign();}return bitmap;}function decodeMMRBitmap(input,width,height,endOfBlock){var params={K:-1,Columns:width,Rows:height,BlackIs1:true,EndOfBlock:endOfBlock};var decoder=new CCITTFaxDecoder(input,params);var bitmap=[];var currentByte,eof=false;for(var y=0;y<height;y++){var row=new Uint8Array(width);bitmap.push(row);var shift=-1;for(var x=0;x<width;x++){if(shift<0){currentByte=decoder.readNextChar();if(currentByte===-1){currentByte=0;eof=true;}shift=7;}row[x]=currentByte>>shift&1;shift--;}}if(endOfBlock&&!eof){var lookForEOFLimit=5;for(var i=0;i<lookForEOFLimit;i++){if(decoder.readNextChar()===-1){break;}}}return bitmap;}var Jbig2Image=/*#__PURE__*/function(){function Jbig2Image(){jbig2_classCallCheck(this,Jbig2Image);}jbig2_createClass(Jbig2Image,[{key:"parseChunks",value:function parseChunks(chunks){return parseJbig2Chunks(chunks);}},{key:"parse",value:function parse(data){throw new Error("Not implemented: Jbig2Image.parse");}}]);return Jbig2Image;}();
;// CONCATENATED MODULE: ./src/core/jbig2_stream.js
function jbig2_stream_typeof(o){"@babel/helpers - typeof";return jbig2_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},jbig2_stream_typeof(o);}function jbig2_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function jbig2_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,jbig2_stream_toPropertyKey(descriptor.key),descriptor);}}function jbig2_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)jbig2_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)jbig2_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function jbig2_stream_toPropertyKey(arg){var key=jbig2_stream_toPrimitive(arg,"string");return jbig2_stream_typeof(key)==="symbol"?key:String(key);}function jbig2_stream_toPrimitive(input,hint){if(jbig2_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(jbig2_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function jbig2_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)jbig2_stream_setPrototypeOf(subClass,superClass);}function jbig2_stream_setPrototypeOf(o,p){jbig2_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return jbig2_stream_setPrototypeOf(o,p);}function jbig2_stream_createSuper(Derived){var hasNativeReflectConstruct=jbig2_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=jbig2_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=jbig2_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return jbig2_stream_possibleConstructorReturn(this,result);};}function jbig2_stream_possibleConstructorReturn(self,call){if(call&&(jbig2_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return jbig2_stream_assertThisInitialized(self);}function jbig2_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function jbig2_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function jbig2_stream_getPrototypeOf(o){jbig2_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return jbig2_stream_getPrototypeOf(o);}var Jbig2Stream=/*#__PURE__*/function(_DecodeStream){jbig2_stream_inherits(Jbig2Stream,_DecodeStream);var _super=jbig2_stream_createSuper(Jbig2Stream);function Jbig2Stream(stream,maybeLength,params){var _this;jbig2_stream_classCallCheck(this,Jbig2Stream);_this=_super.call(this,maybeLength);_this.stream=stream;_this.dict=stream.dict;_this.maybeLength=maybeLength;_this.params=params;return _this;}jbig2_stream_createClass(Jbig2Stream,[{key:"bytes",get:function get(){return shadow(this,"bytes",this.stream.getBytes(this.maybeLength));}},{key:"ensureBuffer",value:function ensureBuffer(requested){}},{key:"readBlock",value:function readBlock(){if(this.eof){return;}var jbig2Image=new Jbig2Image();var chunks=[];if(this.params instanceof Dict){var globalsStream=this.params.get("JBIG2Globals");if(globalsStream instanceof BaseStream){var globals=globalsStream.getBytes();chunks.push({data:globals,start:0,end:globals.length});}}chunks.push({data:this.bytes,start:0,end:this.bytes.length});var data=jbig2Image.parseChunks(chunks);var dataLength=data.length;for(var i=0;i<dataLength;i++){data[i]^=0xff;}this.buffer=data;this.bufferLength=dataLength;this.eof=true;}}]);return Jbig2Stream;}(DecodeStream);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.int16-array.js
var es_typed_array_int16_array = __webpack_require__(2314);
;// CONCATENATED MODULE: ./src/shared/image_utils.js
function image_utils_slicedToArray(arr,i){return image_utils_arrayWithHoles(arr)||image_utils_iterableToArrayLimit(arr,i)||image_utils_unsupportedIterableToArray(arr,i)||image_utils_nonIterableRest();}function image_utils_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function image_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return image_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return image_utils_arrayLikeToArray(o,minLen);}function image_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function image_utils_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function image_utils_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function convertToRGBA(params){switch(params.kind){case ImageKind.GRAYSCALE_1BPP:return convertBlackAndWhiteToRGBA(params);case ImageKind.RGB_24BPP:return convertRGBToRGBA(params);}return null;}function convertBlackAndWhiteToRGBA(_ref){var src=_ref.src,_ref$srcPos=_ref.srcPos,srcPos=_ref$srcPos===void 0?0:_ref$srcPos,dest=_ref.dest,width=_ref.width,height=_ref.height,_ref$nonBlackColor=_ref.nonBlackColor,nonBlackColor=_ref$nonBlackColor===void 0?0xffffffff:_ref$nonBlackColor,_ref$inverseDecode=_ref.inverseDecode,inverseDecode=_ref$inverseDecode===void 0?false:_ref$inverseDecode;var black=FeatureTest.isLittleEndian?0xff000000:0x000000ff;var _ref2=inverseDecode?[nonBlackColor,black]:[black,nonBlackColor],_ref3=image_utils_slicedToArray(_ref2,2),zeroMapping=_ref3[0],oneMapping=_ref3[1];var widthInSource=width>>3;var widthRemainder=width&7;var srcLength=src.length;dest=new Uint32Array(dest.buffer);var destPos=0;for(var i=0;i<height;i++){for(var max=srcPos+widthInSource;srcPos<max;srcPos++){var _elem=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=_elem&128?oneMapping:zeroMapping;dest[destPos++]=_elem&64?oneMapping:zeroMapping;dest[destPos++]=_elem&32?oneMapping:zeroMapping;dest[destPos++]=_elem&16?oneMapping:zeroMapping;dest[destPos++]=_elem&8?oneMapping:zeroMapping;dest[destPos++]=_elem&4?oneMapping:zeroMapping;dest[destPos++]=_elem&2?oneMapping:zeroMapping;dest[destPos++]=_elem&1?oneMapping:zeroMapping;}if(widthRemainder===0){continue;}var elem=srcPos<srcLength?src[srcPos++]:255;for(var j=0;j<widthRemainder;j++){dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping;}}return{srcPos:srcPos,destPos:destPos};}function convertRGBToRGBA(_ref4){var src=_ref4.src,_ref4$srcPos=_ref4.srcPos,srcPos=_ref4$srcPos===void 0?0:_ref4$srcPos,dest=_ref4.dest,_ref4$destPos=_ref4.destPos,destPos=_ref4$destPos===void 0?0:_ref4$destPos,width=_ref4.width,height=_ref4.height;var i=0;var len32=src.length>>2;var src32=new Uint32Array(src.buffer,srcPos,len32);if(FeatureTest.isLittleEndian){for(;i<len32-2;i+=3,destPos+=4){var s1=src32[i];var s2=src32[i+1];var s3=src32[i+2];dest[destPos]=s1|0xff000000;dest[destPos+1]=s1>>>24|s2<<8|0xff000000;dest[destPos+2]=s2>>>16|s3<<16|0xff000000;dest[destPos+3]=s3>>>8|0xff000000;}for(var j=i*4,jj=src.length;j<jj;j+=3){dest[destPos++]=src[j]|src[j+1]<<8|src[j+2]<<16|0xff000000;}}else{for(;i<len32-2;i+=3,destPos+=4){var _s=src32[i];var _s2=src32[i+1];var _s3=src32[i+2];dest[destPos]=_s|0xff;dest[destPos+1]=_s<<24|_s2>>>8|0xff;dest[destPos+2]=_s2<<16|_s3>>>16|0xff;dest[destPos+3]=_s3<<8|0xff;}for(var _j=i*4,_jj=src.length;_j<_jj;_j+=3){dest[destPos++]=src[_j]<<24|src[_j+1]<<16|src[_j+2]<<8|0xff;}}return{srcPos:srcPos,destPos:destPos};}function grayToRGBA(src,dest){if(FeatureTest.isLittleEndian){for(var i=0,ii=src.length;i<ii;i++){dest[i]=src[i]*0x10101|0xff000000;}}else{for(var _i=0,_ii=src.length;_i<_ii;_i++){dest[_i]=src[_i]*0x1010100|0x000000ff;}}}
;// CONCATENATED MODULE: ./src/core/jpg.js
function jpg_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=jpg_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function jpg_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return jpg_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jpg_arrayLikeToArray(o,minLen);}function jpg_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function jpg_typeof(o){"@babel/helpers - typeof";return jpg_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},jpg_typeof(o);}function jpg_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,jpg_toPropertyKey(descriptor.key),descriptor);}}function jpg_createClass(Constructor,protoProps,staticProps){if(protoProps)jpg_defineProperties(Constructor.prototype,protoProps);if(staticProps)jpg_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function jpg_toPropertyKey(arg){var key=jpg_toPrimitive(arg,"string");return jpg_typeof(key)==="symbol"?key:String(key);}function jpg_toPrimitive(input,hint){if(jpg_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(jpg_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function jpg_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function jpg_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)jpg_setPrototypeOf(subClass,superClass);}function jpg_setPrototypeOf(o,p){jpg_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return jpg_setPrototypeOf(o,p);}function jpg_createSuper(Derived){var hasNativeReflectConstruct=jpg_isNativeReflectConstruct();return function _createSuperInternal(){var Super=jpg_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=jpg_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return jpg_possibleConstructorReturn(this,result);};}function jpg_possibleConstructorReturn(self,call){if(call&&(jpg_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return jpg_assertThisInitialized(self);}function jpg_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function jpg_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function jpg_getPrototypeOf(o){jpg_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return jpg_getPrototypeOf(o);}var JpegError=/*#__PURE__*/function(_BaseException){jpg_inherits(JpegError,_BaseException);var _super=jpg_createSuper(JpegError);function JpegError(msg){jpg_classCallCheck(this,JpegError);return _super.call(this,"JPEG error: ".concat(msg),"JpegError");}return jpg_createClass(JpegError);}(BaseException);var DNLMarkerError=/*#__PURE__*/function(_BaseException2){jpg_inherits(DNLMarkerError,_BaseException2);var _super2=jpg_createSuper(DNLMarkerError);function DNLMarkerError(message,scanLines){var _this;jpg_classCallCheck(this,DNLMarkerError);_this=_super2.call(this,message,"DNLMarkerError");_this.scanLines=scanLines;return _this;}return jpg_createClass(DNLMarkerError);}(BaseException);var EOIMarkerError=/*#__PURE__*/function(_BaseException3){jpg_inherits(EOIMarkerError,_BaseException3);var _super3=jpg_createSuper(EOIMarkerError);function EOIMarkerError(msg){jpg_classCallCheck(this,EOIMarkerError);return _super3.call(this,msg,"EOIMarkerError");}return jpg_createClass(EOIMarkerError);}(BaseException);var dctZigZag=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);var dctCos1=4017;var dctSin1=799;var dctCos3=3406;var dctSin3=2276;var dctCos6=1567;var dctSin6=3784;var dctSqrt2=5793;var dctSqrt1d2=2896;function buildHuffmanTable(codeLengths,values){var k=0,i,j,length=16;while(length>0&&!codeLengths[length-1]){length--;}var code=[{children:[],index:0}];var p=code[0],q;for(i=0;i<length;i++){for(j=0;j<codeLengths[i];j++){p=code.pop();p.children[p.index]=values[k];while(p.index>0){p=code.pop();}p.index++;code.push(p);while(code.length<=i){code.push(q={children:[],index:0});p.children[p.index]=q.children;p=q;}k++;}if(i+1<length){code.push(q={children:[],index:0});p.children[p.index]=q.children;p=q;}}return code[0].children;}function getBlockBufferOffset(component,row,col){return 64*((component.blocksPerLine+1)*row+col);}function decodeScan(data,offset,frame,components,resetInterval,spectralStart,spectralEnd,successivePrev,successive){var parseDNLMarker=arguments.length>9&&arguments[9]!==undefined?arguments[9]:false;var mcusPerLine=frame.mcusPerLine;var progressive=frame.progressive;var startOffset=offset;var bitsData=0,bitsCount=0;function readBit(){if(bitsCount>0){bitsCount--;return bitsData>>bitsCount&1;}bitsData=data[offset++];if(bitsData===0xff){var nextByte=data[offset++];if(nextByte){if(nextByte===0xdc&&parseDNLMarker){offset+=2;var scanLines=readUint16(data,offset);offset+=2;if(scanLines>0&&scanLines!==frame.scanLines){throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",scanLines);}}else if(nextByte===0xd9){if(parseDNLMarker){var maybeScanLines=blockRow*(frame.precision===8?8:0);if(maybeScanLines>0&&Math.round(frame.scanLines/maybeScanLines)>=5){throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, "+"possibly caused by incorrect `scanLines` parameter",maybeScanLines);}}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data");}throw new JpegError("unexpected marker ".concat((bitsData<<8|nextByte).toString(16)));}}bitsCount=7;return bitsData>>>7;}function decodeHuffman(tree){var node=tree;while(true){node=node[readBit()];switch(jpg_typeof(node)){case"number":return node;case"object":continue;}throw new JpegError("invalid huffman sequence");}}function receive(length){var n=0;while(length>0){n=n<<1|readBit();length--;}return n;}function receiveAndExtend(length){if(length===1){return readBit()===1?1:-1;}var n=receive(length);if(n>=1<<length-1){return n;}return n+(-1<<length)+1;}function decodeBaseline(component,blockOffset){var t=decodeHuffman(component.huffmanTableDC);var diff=t===0?0:receiveAndExtend(t);component.blockData[blockOffset]=component.pred+=diff;var k=1;while(k<64){var rs=decodeHuffman(component.huffmanTableAC);var s=rs&15,r=rs>>4;if(s===0){if(r<15){break;}k+=16;continue;}k+=r;var z=dctZigZag[k];component.blockData[blockOffset+z]=receiveAndExtend(s);k++;}}function decodeDCFirst(component,blockOffset){var t=decodeHuffman(component.huffmanTableDC);var diff=t===0?0:receiveAndExtend(t)<<successive;component.blockData[blockOffset]=component.pred+=diff;}function decodeDCSuccessive(component,blockOffset){component.blockData[blockOffset]|=readBit()<<successive;}var eobrun=0;function decodeACFirst(component,blockOffset){if(eobrun>0){eobrun--;return;}var k=spectralStart;var e=spectralEnd;while(k<=e){var rs=decodeHuffman(component.huffmanTableAC);var s=rs&15,r=rs>>4;if(s===0){if(r<15){eobrun=receive(r)+(1<<r)-1;break;}k+=16;continue;}k+=r;var z=dctZigZag[k];component.blockData[blockOffset+z]=receiveAndExtend(s)*(1<<successive);k++;}}var successiveACState=0,successiveACNextValue;function decodeACSuccessive(component,blockOffset){var k=spectralStart;var e=spectralEnd;var r=0;var s;var rs;while(k<=e){var offsetZ=blockOffset+dctZigZag[k];var sign=component.blockData[offsetZ]<0?-1:1;switch(successiveACState){case 0:rs=decodeHuffman(component.huffmanTableAC);s=rs&15;r=rs>>4;if(s===0){if(r<15){eobrun=receive(r)+(1<<r);successiveACState=4;}else{r=16;successiveACState=1;}}else{if(s!==1){throw new JpegError("invalid ACn encoding");}successiveACNextValue=receiveAndExtend(s);successiveACState=r?2:3;}continue;case 1:case 2:if(component.blockData[offsetZ]){component.blockData[offsetZ]+=sign*(readBit()<<successive);}else{r--;if(r===0){successiveACState=successiveACState===2?3:0;}}break;case 3:if(component.blockData[offsetZ]){component.blockData[offsetZ]+=sign*(readBit()<<successive);}else{component.blockData[offsetZ]=successiveACNextValue<<successive;successiveACState=0;}break;case 4:if(component.blockData[offsetZ]){component.blockData[offsetZ]+=sign*(readBit()<<successive);}break;}k++;}if(successiveACState===4){eobrun--;if(eobrun===0){successiveACState=0;}}}var blockRow=0;function decodeMcu(component,decode,mcu,row,col){var mcuRow=mcu/mcusPerLine|0;var mcuCol=mcu%mcusPerLine;blockRow=mcuRow*component.v+row;var blockCol=mcuCol*component.h+col;var blockOffset=getBlockBufferOffset(component,blockRow,blockCol);decode(component,blockOffset);}function decodeBlock(component,decode,mcu){blockRow=mcu/component.blocksPerLine|0;var blockCol=mcu%component.blocksPerLine;var blockOffset=getBlockBufferOffset(component,blockRow,blockCol);decode(component,blockOffset);}var componentsLength=components.length;var component,i,j,k,n;var decodeFn;if(progressive){if(spectralStart===0){decodeFn=successivePrev===0?decodeDCFirst:decodeDCSuccessive;}else{decodeFn=successivePrev===0?decodeACFirst:decodeACSuccessive;}}else{decodeFn=decodeBaseline;}var mcu=0,fileMarker;var mcuExpected=componentsLength===1?components[0].blocksPerLine*components[0].blocksPerColumn:mcusPerLine*frame.mcusPerColumn;var h,v;while(mcu<=mcuExpected){var mcuToRead=resetInterval?Math.min(mcuExpected-mcu,resetInterval):mcuExpected;if(mcuToRead>0){for(i=0;i<componentsLength;i++){components[i].pred=0;}eobrun=0;if(componentsLength===1){component=components[0];for(n=0;n<mcuToRead;n++){decodeBlock(component,decodeFn,mcu);mcu++;}}else{for(n=0;n<mcuToRead;n++){for(i=0;i<componentsLength;i++){component=components[i];h=component.h;v=component.v;for(j=0;j<v;j++){for(k=0;k<h;k++){decodeMcu(component,decodeFn,mcu,j,k);}}}mcu++;}}}bitsCount=0;fileMarker=findNextFileMarker(data,offset);if(!fileMarker){break;}if(fileMarker.invalid){var partialMsg=mcuToRead>0?"unexpected":"excessive";warn("decodeScan - ".concat(partialMsg," MCU data, current marker is: ").concat(fileMarker.invalid));offset=fileMarker.offset;}if(fileMarker.marker>=0xffd0&&fileMarker.marker<=0xffd7){offset+=2;}else{break;}}return offset-startOffset;}function quantizeAndInverse(component,blockBufferOffset,p){var qt=component.quantizationTable,blockData=component.blockData;var v0,v1,v2,v3,v4,v5,v6,v7;var p0,p1,p2,p3,p4,p5,p6,p7;var t;if(!qt){throw new JpegError("missing required Quantization Table.");}for(var row=0;row<64;row+=8){p0=blockData[blockBufferOffset+row];p1=blockData[blockBufferOffset+row+1];p2=blockData[blockBufferOffset+row+2];p3=blockData[blockBufferOffset+row+3];p4=blockData[blockBufferOffset+row+4];p5=blockData[blockBufferOffset+row+5];p6=blockData[blockBufferOffset+row+6];p7=blockData[blockBufferOffset+row+7];p0*=qt[row];if((p1|p2|p3|p4|p5|p6|p7)===0){t=dctSqrt2*p0+512>>10;p[row]=t;p[row+1]=t;p[row+2]=t;p[row+3]=t;p[row+4]=t;p[row+5]=t;p[row+6]=t;p[row+7]=t;continue;}p1*=qt[row+1];p2*=qt[row+2];p3*=qt[row+3];p4*=qt[row+4];p5*=qt[row+5];p6*=qt[row+6];p7*=qt[row+7];v0=dctSqrt2*p0+128>>8;v1=dctSqrt2*p4+128>>8;v2=p2;v3=p6;v4=dctSqrt1d2*(p1-p7)+128>>8;v7=dctSqrt1d2*(p1+p7)+128>>8;v5=p3<<4;v6=p5<<4;v0=v0+v1+1>>1;v1=v0-v1;t=v2*dctSin6+v3*dctCos6+128>>8;v2=v2*dctCos6-v3*dctSin6+128>>8;v3=t;v4=v4+v6+1>>1;v6=v4-v6;v7=v7+v5+1>>1;v5=v7-v5;v0=v0+v3+1>>1;v3=v0-v3;v1=v1+v2+1>>1;v2=v1-v2;t=v4*dctSin3+v7*dctCos3+2048>>12;v4=v4*dctCos3-v7*dctSin3+2048>>12;v7=t;t=v5*dctSin1+v6*dctCos1+2048>>12;v5=v5*dctCos1-v6*dctSin1+2048>>12;v6=t;p[row]=v0+v7;p[row+7]=v0-v7;p[row+1]=v1+v6;p[row+6]=v1-v6;p[row+2]=v2+v5;p[row+5]=v2-v5;p[row+3]=v3+v4;p[row+4]=v3-v4;}for(var col=0;col<8;++col){p0=p[col];p1=p[col+8];p2=p[col+16];p3=p[col+24];p4=p[col+32];p5=p[col+40];p6=p[col+48];p7=p[col+56];if((p1|p2|p3|p4|p5|p6|p7)===0){t=dctSqrt2*p0+8192>>14;if(t<-2040){t=0;}else if(t>=2024){t=255;}else{t=t+2056>>4;}blockData[blockBufferOffset+col]=t;blockData[blockBufferOffset+col+8]=t;blockData[blockBufferOffset+col+16]=t;blockData[blockBufferOffset+col+24]=t;blockData[blockBufferOffset+col+32]=t;blockData[blockBufferOffset+col+40]=t;blockData[blockBufferOffset+col+48]=t;blockData[blockBufferOffset+col+56]=t;continue;}v0=dctSqrt2*p0+2048>>12;v1=dctSqrt2*p4+2048>>12;v2=p2;v3=p6;v4=dctSqrt1d2*(p1-p7)+2048>>12;v7=dctSqrt1d2*(p1+p7)+2048>>12;v5=p3;v6=p5;v0=(v0+v1+1>>1)+4112;v1=v0-v1;t=v2*dctSin6+v3*dctCos6+2048>>12;v2=v2*dctCos6-v3*dctSin6+2048>>12;v3=t;v4=v4+v6+1>>1;v6=v4-v6;v7=v7+v5+1>>1;v5=v7-v5;v0=v0+v3+1>>1;v3=v0-v3;v1=v1+v2+1>>1;v2=v1-v2;t=v4*dctSin3+v7*dctCos3+2048>>12;v4=v4*dctCos3-v7*dctSin3+2048>>12;v7=t;t=v5*dctSin1+v6*dctCos1+2048>>12;v5=v5*dctCos1-v6*dctSin1+2048>>12;v6=t;p0=v0+v7;p7=v0-v7;p1=v1+v6;p6=v1-v6;p2=v2+v5;p5=v2-v5;p3=v3+v4;p4=v3-v4;if(p0<16){p0=0;}else if(p0>=4080){p0=255;}else{p0>>=4;}if(p1<16){p1=0;}else if(p1>=4080){p1=255;}else{p1>>=4;}if(p2<16){p2=0;}else if(p2>=4080){p2=255;}else{p2>>=4;}if(p3<16){p3=0;}else if(p3>=4080){p3=255;}else{p3>>=4;}if(p4<16){p4=0;}else if(p4>=4080){p4=255;}else{p4>>=4;}if(p5<16){p5=0;}else if(p5>=4080){p5=255;}else{p5>>=4;}if(p6<16){p6=0;}else if(p6>=4080){p6=255;}else{p6>>=4;}if(p7<16){p7=0;}else if(p7>=4080){p7=255;}else{p7>>=4;}blockData[blockBufferOffset+col]=p0;blockData[blockBufferOffset+col+8]=p1;blockData[blockBufferOffset+col+16]=p2;blockData[blockBufferOffset+col+24]=p3;blockData[blockBufferOffset+col+32]=p4;blockData[blockBufferOffset+col+40]=p5;blockData[blockBufferOffset+col+48]=p6;blockData[blockBufferOffset+col+56]=p7;}}function buildComponentData(frame,component){var blocksPerLine=component.blocksPerLine;var blocksPerColumn=component.blocksPerColumn;var computationBuffer=new Int16Array(64);for(var blockRow=0;blockRow<blocksPerColumn;blockRow++){for(var blockCol=0;blockCol<blocksPerLine;blockCol++){var offset=getBlockBufferOffset(component,blockRow,blockCol);quantizeAndInverse(component,offset,computationBuffer);}}return component.blockData;}function findNextFileMarker(data,currentPos){var startPos=arguments.length>2&&arguments[2]!==undefined?arguments[2]:currentPos;var maxPos=data.length-1;var newPos=startPos<currentPos?startPos:currentPos;if(currentPos>=maxPos){return null;}var currentMarker=readUint16(data,currentPos);if(currentMarker>=0xffc0&&currentMarker<=0xfffe){return{invalid:null,marker:currentMarker,offset:currentPos};}var newMarker=readUint16(data,newPos);while(!(newMarker>=0xffc0&&newMarker<=0xfffe)){if(++newPos>=maxPos){return null;}newMarker=readUint16(data,newPos);}return{invalid:currentMarker.toString(16),marker:newMarker,offset:newPos};}var JpegImage=/*#__PURE__*/function(){function JpegImage(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$decodeTransform=_ref.decodeTransform,decodeTransform=_ref$decodeTransform===void 0?null:_ref$decodeTransform,_ref$colorTransform=_ref.colorTransform,colorTransform=_ref$colorTransform===void 0?-1:_ref$colorTransform;jpg_classCallCheck(this,JpegImage);this._decodeTransform=decodeTransform;this._colorTransform=colorTransform;}jpg_createClass(JpegImage,[{key:"parse",value:function parse(data){var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref2$dnlScanLines=_ref2.dnlScanLines,dnlScanLines=_ref2$dnlScanLines===void 0?null:_ref2$dnlScanLines;function readDataBlock(){var length=readUint16(data,offset);offset+=2;var endOffset=offset+length-2;var fileMarker=findNextFileMarker(data,endOffset,offset);if(fileMarker!==null&&fileMarker!==void 0&&fileMarker.invalid){warn("readDataBlock - incorrect length, current marker is: "+fileMarker.invalid);endOffset=fileMarker.offset;}var array=data.subarray(offset,endOffset);offset+=array.length;return array;}function prepareComponents(frame){var mcusPerLine=Math.ceil(frame.samplesPerLine/8/frame.maxH);var mcusPerColumn=Math.ceil(frame.scanLines/8/frame.maxV);var _iterator=jpg_createForOfIteratorHelper(frame.components),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var component=_step.value;var blocksPerLine=Math.ceil(Math.ceil(frame.samplesPerLine/8)*component.h/frame.maxH);var blocksPerColumn=Math.ceil(Math.ceil(frame.scanLines/8)*component.v/frame.maxV);var blocksPerLineForMcu=mcusPerLine*component.h;var blocksPerColumnForMcu=mcusPerColumn*component.v;var blocksBufferSize=64*blocksPerColumnForMcu*(blocksPerLineForMcu+1);component.blockData=new Int16Array(blocksBufferSize);component.blocksPerLine=blocksPerLine;component.blocksPerColumn=blocksPerColumn;}}catch(err){_iterator.e(err);}finally{_iterator.f();}frame.mcusPerLine=mcusPerLine;frame.mcusPerColumn=mcusPerColumn;}var offset=0;var jfif=null;var adobe=null;var frame,resetInterval;var numSOSMarkers=0;var quantizationTables=[];var huffmanTablesAC=[],huffmanTablesDC=[];var fileMarker=readUint16(data,offset);offset+=2;if(fileMarker!==0xffd8){throw new JpegError("SOI not found");}fileMarker=readUint16(data,offset);offset+=2;markerLoop:while(fileMarker!==0xffd9){var i=void 0,j=void 0,l=void 0;switch(fileMarker){case 0xffe0:case 0xffe1:case 0xffe2:case 0xffe3:case 0xffe4:case 0xffe5:case 0xffe6:case 0xffe7:case 0xffe8:case 0xffe9:case 0xffea:case 0xffeb:case 0xffec:case 0xffed:case 0xffee:case 0xffef:case 0xfffe:var appData=readDataBlock();if(fileMarker===0xffe0){if(appData[0]===0x4a&&appData[1]===0x46&&appData[2]===0x49&&appData[3]===0x46&&appData[4]===0){jfif={version:{major:appData[5],minor:appData[6]},densityUnits:appData[7],xDensity:appData[8]<<8|appData[9],yDensity:appData[10]<<8|appData[11],thumbWidth:appData[12],thumbHeight:appData[13],thumbData:appData.subarray(14,14+3*appData[12]*appData[13])};}}if(fileMarker===0xffee){if(appData[0]===0x41&&appData[1]===0x64&&appData[2]===0x6f&&appData[3]===0x62&&appData[4]===0x65){adobe={version:appData[5]<<8|appData[6],flags0:appData[7]<<8|appData[8],flags1:appData[9]<<8|appData[10],transformCode:appData[11]};}}break;case 0xffdb:var quantizationTablesLength=readUint16(data,offset);offset+=2;var quantizationTablesEnd=quantizationTablesLength+offset-2;var z=void 0;while(offset<quantizationTablesEnd){var quantizationTableSpec=data[offset++];var tableData=new Uint16Array(64);if(quantizationTableSpec>>4===0){for(j=0;j<64;j++){z=dctZigZag[j];tableData[z]=data[offset++];}}else if(quantizationTableSpec>>4===1){for(j=0;j<64;j++){z=dctZigZag[j];tableData[z]=readUint16(data,offset);offset+=2;}}else{throw new JpegError("DQT - invalid table spec");}quantizationTables[quantizationTableSpec&15]=tableData;}break;case 0xffc0:case 0xffc1:case 0xffc2:if(frame){throw new JpegError("Only single frame JPEGs supported");}offset+=2;frame={};frame.extended=fileMarker===0xffc1;frame.progressive=fileMarker===0xffc2;frame.precision=data[offset++];var sofScanLines=readUint16(data,offset);offset+=2;frame.scanLines=dnlScanLines||sofScanLines;frame.samplesPerLine=readUint16(data,offset);offset+=2;frame.components=[];frame.componentIds={};var componentsCount=data[offset++];var maxH=0,maxV=0;for(i=0;i<componentsCount;i++){var componentId=data[offset];var h=data[offset+1]>>4;var v=data[offset+1]&15;if(maxH<h){maxH=h;}if(maxV<v){maxV=v;}var qId=data[offset+2];l=frame.components.push({h:h,v:v,quantizationId:qId,quantizationTable:null});frame.componentIds[componentId]=l-1;offset+=3;}frame.maxH=maxH;frame.maxV=maxV;prepareComponents(frame);break;case 0xffc4:var huffmanLength=readUint16(data,offset);offset+=2;for(i=2;i<huffmanLength;){var huffmanTableSpec=data[offset++];var codeLengths=new Uint8Array(16);var codeLengthSum=0;for(j=0;j<16;j++,offset++){codeLengthSum+=codeLengths[j]=data[offset];}var huffmanValues=new Uint8Array(codeLengthSum);for(j=0;j<codeLengthSum;j++,offset++){huffmanValues[j]=data[offset];}i+=17+codeLengthSum;(huffmanTableSpec>>4===0?huffmanTablesDC:huffmanTablesAC)[huffmanTableSpec&15]=buildHuffmanTable(codeLengths,huffmanValues);}break;case 0xffdd:offset+=2;resetInterval=readUint16(data,offset);offset+=2;break;case 0xffda:var parseDNLMarker=++numSOSMarkers===1&&!dnlScanLines;offset+=2;var selectorsCount=data[offset++],components=[];for(i=0;i<selectorsCount;i++){var index=data[offset++];var componentIndex=frame.componentIds[index];var component=frame.components[componentIndex];component.index=index;var tableSpec=data[offset++];component.huffmanTableDC=huffmanTablesDC[tableSpec>>4];component.huffmanTableAC=huffmanTablesAC[tableSpec&15];components.push(component);}var spectralStart=data[offset++],spectralEnd=data[offset++],successiveApproximation=data[offset++];try{var processed=decodeScan(data,offset,frame,components,resetInterval,spectralStart,spectralEnd,successiveApproximation>>4,successiveApproximation&15,parseDNLMarker);offset+=processed;}catch(ex){if(ex instanceof DNLMarkerError){warn("".concat(ex.message," -- attempting to re-parse the JPEG image."));return this.parse(data,{dnlScanLines:ex.scanLines});}else if(ex instanceof EOIMarkerError){warn("".concat(ex.message," -- ignoring the rest of the image data."));break markerLoop;}throw ex;}break;case 0xffdc:offset+=4;break;case 0xffff:if(data[offset]!==0xff){offset--;}break;default:var nextFileMarker=findNextFileMarker(data,offset-2,offset-3);if(nextFileMarker!==null&&nextFileMarker!==void 0&&nextFileMarker.invalid){warn("JpegImage.parse - unexpected data, current marker is: "+nextFileMarker.invalid);offset=nextFileMarker.offset;break;}if(!nextFileMarker||offset>=data.length-1){warn("JpegImage.parse - reached the end of the image data "+"without finding an EOI marker (0xFFD9).");break markerLoop;}throw new JpegError("JpegImage.parse - unknown marker: "+fileMarker.toString(16));}fileMarker=readUint16(data,offset);offset+=2;}if(!frame){throw new JpegError("JpegImage.parse - no frame data found.");}this.width=frame.samplesPerLine;this.height=frame.scanLines;this.jfif=jfif;this.adobe=adobe;this.components=[];var _iterator2=jpg_createForOfIteratorHelper(frame.components),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _component=_step2.value;var quantizationTable=quantizationTables[_component.quantizationId];if(quantizationTable){_component.quantizationTable=quantizationTable;}this.components.push({index:_component.index,output:buildComponentData(frame,_component),scaleX:_component.h/frame.maxH,scaleY:_component.v/frame.maxV,blocksPerLine:_component.blocksPerLine,blocksPerColumn:_component.blocksPerColumn});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this.numComponents=this.components.length;return undefined;}},{key:"_getLinearizedBlockData",value:function _getLinearizedBlockData(width,height){var isSourcePDF=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var scaleX=this.width/width,scaleY=this.height/height;var component,componentScaleX,componentScaleY,blocksPerScanline;var x,y,i,j,k;var index;var offset=0;var output;var numComponents=this.components.length;var dataLength=width*height*numComponents;var data=new Uint8ClampedArray(dataLength);var xScaleBlockOffset=new Uint32Array(width);var mask3LSB=0xfffffff8;var lastComponentScaleX;for(i=0;i<numComponents;i++){component=this.components[i];componentScaleX=component.scaleX*scaleX;componentScaleY=component.scaleY*scaleY;offset=i;output=component.output;blocksPerScanline=component.blocksPerLine+1<<3;if(componentScaleX!==lastComponentScaleX){for(x=0;x<width;x++){j=0|x*componentScaleX;xScaleBlockOffset[x]=(j&mask3LSB)<<3|j&7;}lastComponentScaleX=componentScaleX;}for(y=0;y<height;y++){j=0|y*componentScaleY;index=blocksPerScanline*(j&mask3LSB)|(j&7)<<3;for(x=0;x<width;x++){data[offset]=output[index+xScaleBlockOffset[x]];offset+=numComponents;}}}var transform=this._decodeTransform;if(!isSourcePDF&&numComponents===4&&!transform){transform=new Int32Array([-256,255,-256,255,-256,255,-256,255]);}if(transform){for(i=0;i<dataLength;){for(j=0,k=0;j<numComponents;j++,i++,k+=2){data[i]=(data[i]*transform[k]>>8)+transform[k+1];}}}return data;}},{key:"_isColorConversionNeeded",get:function get(){if(this.adobe){return!!this.adobe.transformCode;}if(this.numComponents===3){if(this._colorTransform===0){return false;}else if(this.components[0].index===0x52&&this.components[1].index===0x47&&this.components[2].index===0x42){return false;}return true;}if(this._colorTransform===1){return true;}return false;}},{key:"_convertYccToRgb",value:function _convertYccToRgb(data){var Y,Cb,Cr;for(var i=0,length=data.length;i<length;i+=3){Y=data[i];Cb=data[i+1];Cr=data[i+2];data[i]=Y-179.456+1.402*Cr;data[i+1]=Y+135.459-0.344*Cb-0.714*Cr;data[i+2]=Y-226.816+1.772*Cb;}return data;}},{key:"_convertYccToRgba",value:function _convertYccToRgba(data,out){for(var i=0,j=0,length=data.length;i<length;i+=3,j+=4){var Y=data[i];var Cb=data[i+1];var Cr=data[i+2];out[j]=Y-179.456+1.402*Cr;out[j+1]=Y+135.459-0.344*Cb-0.714*Cr;out[j+2]=Y-226.816+1.772*Cb;out[j+3]=255;}return out;}},{key:"_convertYcckToRgb",value:function _convertYcckToRgb(data){var Y,Cb,Cr,k;var offset=0;for(var i=0,length=data.length;i<length;i+=4){Y=data[i];Cb=data[i+1];Cr=data[i+2];k=data[i+3];data[offset++]=-122.67195406894+Cb*(-6.60635669420364e-5*Cb+0.000437130475926232*Cr-5.4080610064599e-5*Y+0.00048449797120281*k-0.154362151871126)+Cr*(-0.000957964378445773*Cr+0.000817076911346625*Y-0.00477271405408747*k+1.53380253221734)+Y*(0.000961250184130688*Y-0.00266257332283933*k+0.48357088451265)+k*(-0.000336197177618394*k+0.484791561490776);data[offset++]=107.268039397724+Cb*(2.19927104525741e-5*Cb-0.000640992018297945*Cr+0.000659397001245577*Y+0.000426105652938837*k-0.176491792462875)+Cr*(-0.000778269941513683*Cr+0.00130872261408275*Y+0.000770482631801132*k-0.151051492775562)+Y*(0.00126935368114843*Y-0.00265090189010898*k+0.25802910206845)+k*(-0.000318913117588328*k-0.213742400323665);data[offset++]=-20.810012546947+Cb*(-0.000570115196973677*Cb-2.63409051004589e-5*Cr+0.0020741088115012*Y-0.00288260236853442*k+0.814272968359295)+Cr*(-1.53496057440975e-5*Cr-0.000132689043961446*Y+0.000560833691242812*k-0.195152027534049)+Y*(0.00174418132927582*Y-0.00255243321439347*k+0.116935020465145)+k*(-0.000343531996510555*k+0.24165260232407);}return data.subarray(0,offset);}},{key:"_convertYcckToRgba",value:function _convertYcckToRgba(data){for(var i=0,length=data.length;i<length;i+=4){var Y=data[i];var Cb=data[i+1];var Cr=data[i+2];var k=data[i+3];data[i]=-122.67195406894+Cb*(-6.60635669420364e-5*Cb+0.000437130475926232*Cr-5.4080610064599e-5*Y+0.00048449797120281*k-0.154362151871126)+Cr*(-0.000957964378445773*Cr+0.000817076911346625*Y-0.00477271405408747*k+1.53380253221734)+Y*(0.000961250184130688*Y-0.00266257332283933*k+0.48357088451265)+k*(-0.000336197177618394*k+0.484791561490776);data[i+1]=107.268039397724+Cb*(2.19927104525741e-5*Cb-0.000640992018297945*Cr+0.000659397001245577*Y+0.000426105652938837*k-0.176491792462875)+Cr*(-0.000778269941513683*Cr+0.00130872261408275*Y+0.000770482631801132*k-0.151051492775562)+Y*(0.00126935368114843*Y-0.00265090189010898*k+0.25802910206845)+k*(-0.000318913117588328*k-0.213742400323665);data[i+2]=-20.810012546947+Cb*(-0.000570115196973677*Cb-2.63409051004589e-5*Cr+0.0020741088115012*Y-0.00288260236853442*k+0.814272968359295)+Cr*(-1.53496057440975e-5*Cr-0.000132689043961446*Y+0.000560833691242812*k-0.195152027534049)+Y*(0.00174418132927582*Y-0.00255243321439347*k+0.116935020465145)+k*(-0.000343531996510555*k+0.24165260232407);data[i+3]=255;}return data;}},{key:"_convertYcckToCmyk",value:function _convertYcckToCmyk(data){var Y,Cb,Cr;for(var i=0,length=data.length;i<length;i+=4){Y=data[i];Cb=data[i+1];Cr=data[i+2];data[i]=434.456-Y-1.402*Cr;data[i+1]=119.541-Y+0.344*Cb+0.714*Cr;data[i+2]=481.816-Y-1.772*Cb;}return data;}},{key:"_convertCmykToRgb",value:function _convertCmykToRgb(data){var c,m,y,k;var offset=0;for(var i=0,length=data.length;i<length;i+=4){c=data[i];m=data[i+1];y=data[i+2];k=data[i+3];data[offset++]=255+c*(-0.00006747147073602441*c+0.0008379262121013727*m+0.0002894718188643294*y+0.003264231057537806*k-1.1185611867203937)+m*(0.000026374107616089405*m-0.00008626949158638572*y-0.0002748769067499491*k-0.02155688794978967)+y*(-0.00003878099212869363*y-0.0003267808279485286*k+0.0686742238595345)-k*(0.0003361971776183937*k+0.7430659151342254);data[offset++]=255+c*(0.00013596372813588848*c+0.000924537132573585*m+0.00010567359618683593*y+0.0004791864687436512*k-0.3109689587515875)+m*(-0.00023545346108370344*m+0.0002702845253534714*y+0.0020200308977307156*k-0.7488052167015494)+y*(0.00006834815998235662*y+0.00015168452363460973*k-0.09751927774728933)-k*(0.0003189131175883281*k+0.7364883807733168);data[offset++]=255+c*(0.000013598650411385307*c+0.00012423956175490851*m+0.0004751985097583589*y-0.0000036729317476630422*k-0.05562186980264034)+m*(0.00016141380598724676*m+0.0009692239130725186*y+0.0007782692450036253*k-0.44015232367526463)+y*(5.068882914068769e-7*y+0.0017778369011375071*k-0.7591454649749609)-k*(0.0003435319965105553*k+0.7063770186160144);}return data.subarray(0,offset);}},{key:"_convertCmykToRgba",value:function _convertCmykToRgba(data){for(var i=0,length=data.length;i<length;i+=4){var c=data[i];var m=data[i+1];var y=data[i+2];var k=data[i+3];data[i]=255+c*(-0.00006747147073602441*c+0.0008379262121013727*m+0.0002894718188643294*y+0.003264231057537806*k-1.1185611867203937)+m*(0.000026374107616089405*m-0.00008626949158638572*y-0.0002748769067499491*k-0.02155688794978967)+y*(-0.00003878099212869363*y-0.0003267808279485286*k+0.0686742238595345)-k*(0.0003361971776183937*k+0.7430659151342254);data[i+1]=255+c*(0.00013596372813588848*c+0.000924537132573585*m+0.00010567359618683593*y+0.0004791864687436512*k-0.3109689587515875)+m*(-0.00023545346108370344*m+0.0002702845253534714*y+0.0020200308977307156*k-0.7488052167015494)+y*(0.00006834815998235662*y+0.00015168452363460973*k-0.09751927774728933)-k*(0.0003189131175883281*k+0.7364883807733168);data[i+2]=255+c*(0.000013598650411385307*c+0.00012423956175490851*m+0.0004751985097583589*y-0.0000036729317476630422*k-0.05562186980264034)+m*(0.00016141380598724676*m+0.0009692239130725186*y+0.0007782692450036253*k-0.44015232367526463)+y*(5.068882914068769e-7*y+0.0017778369011375071*k-0.7591454649749609)-k*(0.0003435319965105553*k+0.7063770186160144);data[i+3]=255;}return data;}},{key:"getData",value:function getData(_ref3){var width=_ref3.width,height=_ref3.height,_ref3$forceRGBA=_ref3.forceRGBA,forceRGBA=_ref3$forceRGBA===void 0?false:_ref3$forceRGBA,_ref3$forceRGB=_ref3.forceRGB,forceRGB=_ref3$forceRGB===void 0?false:_ref3$forceRGB,_ref3$isSourcePDF=_ref3.isSourcePDF,isSourcePDF=_ref3$isSourcePDF===void 0?false:_ref3$isSourcePDF;if(this.numComponents>4){throw new JpegError("Unsupported color mode");}var data=this._getLinearizedBlockData(width,height,isSourcePDF);if(this.numComponents===1&&(forceRGBA||forceRGB)){var len=data.length*(forceRGBA?4:3);var rgbaData=new Uint8ClampedArray(len);var offset=0;if(forceRGBA){grayToRGBA(data,new Uint32Array(rgbaData.buffer));}else{var _iterator3=jpg_createForOfIteratorHelper(data),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var grayColor=_step3.value;rgbaData[offset++]=grayColor;rgbaData[offset++]=grayColor;rgbaData[offset++]=grayColor;}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}return rgbaData;}else if(this.numComponents===3&&this._isColorConversionNeeded){if(forceRGBA){var _rgbaData=new Uint8ClampedArray(data.length/3*4);return this._convertYccToRgba(data,_rgbaData);}return this._convertYccToRgb(data);}else if(this.numComponents===4){if(this._isColorConversionNeeded){if(forceRGBA){return this._convertYcckToRgba(data);}if(forceRGB){return this._convertYcckToRgb(data);}return this._convertYcckToCmyk(data);}else if(forceRGBA){return this._convertCmykToRgba(data);}else if(forceRGB){return this._convertCmykToRgb(data);}}return data;}}]);return JpegImage;}();
;// CONCATENATED MODULE: ./src/core/jpeg_stream.js
function jpeg_stream_typeof(o){"@babel/helpers - typeof";return jpeg_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},jpeg_stream_typeof(o);}function jpeg_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function jpeg_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,jpeg_stream_toPropertyKey(descriptor.key),descriptor);}}function jpeg_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)jpeg_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)jpeg_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function jpeg_stream_toPropertyKey(arg){var key=jpeg_stream_toPrimitive(arg,"string");return jpeg_stream_typeof(key)==="symbol"?key:String(key);}function jpeg_stream_toPrimitive(input,hint){if(jpeg_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(jpeg_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function jpeg_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)jpeg_stream_setPrototypeOf(subClass,superClass);}function jpeg_stream_setPrototypeOf(o,p){jpeg_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return jpeg_stream_setPrototypeOf(o,p);}function jpeg_stream_createSuper(Derived){var hasNativeReflectConstruct=jpeg_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=jpeg_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=jpeg_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return jpeg_stream_possibleConstructorReturn(this,result);};}function jpeg_stream_possibleConstructorReturn(self,call){if(call&&(jpeg_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return jpeg_stream_assertThisInitialized(self);}function jpeg_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function jpeg_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function jpeg_stream_getPrototypeOf(o){jpeg_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return jpeg_stream_getPrototypeOf(o);}var JpegStream=/*#__PURE__*/function(_DecodeStream){jpeg_stream_inherits(JpegStream,_DecodeStream);var _super=jpeg_stream_createSuper(JpegStream);function JpegStream(stream,maybeLength,params){var _this;jpeg_stream_classCallCheck(this,JpegStream);var ch;while((ch=stream.getByte())!==-1){if(ch===0xff){stream.skip(-1);break;}}_this=_super.call(this,maybeLength);_this.stream=stream;_this.dict=stream.dict;_this.maybeLength=maybeLength;_this.params=params;return _this;}jpeg_stream_createClass(JpegStream,[{key:"bytes",get:function get(){return shadow(this,"bytes",this.stream.getBytes(this.maybeLength));}},{key:"ensureBuffer",value:function ensureBuffer(requested){}},{key:"readBlock",value:function readBlock(){if(this.eof){return;}var jpegOptions={decodeTransform:undefined,colorTransform:undefined};var decodeArr=this.dict.getArray("D","Decode");if((this.forceRGBA||this.forceRGB)&&Array.isArray(decodeArr)){var bitsPerComponent=this.dict.get("BPC","BitsPerComponent")||8;var decodeArrLength=decodeArr.length;var transform=new Int32Array(decodeArrLength);var transformNeeded=false;var maxValue=(1<<bitsPerComponent)-1;for(var i=0;i<decodeArrLength;i+=2){transform[i]=(decodeArr[i+1]-decodeArr[i])*256|0;transform[i+1]=decodeArr[i]*maxValue|0;if(transform[i]!==256||transform[i+1]!==0){transformNeeded=true;}}if(transformNeeded){jpegOptions.decodeTransform=transform;}}if(this.params instanceof Dict){var colorTransform=this.params.get("ColorTransform");if(Number.isInteger(colorTransform)){jpegOptions.colorTransform=colorTransform;}}var jpegImage=new JpegImage(jpegOptions);jpegImage.parse(this.bytes);var data=jpegImage.getData({width:this.drawWidth,height:this.drawHeight,forceRGBA:this.forceRGBA,forceRGB:this.forceRGB,isSourcePDF:true});this.buffer=data;this.bufferLength=data.length;this.eof=true;}}]);return JpegStream;}(DecodeStream);
;// CONCATENATED MODULE: ./src/core/jpx.js
function jpx_typeof(o){"@babel/helpers - typeof";return jpx_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},jpx_typeof(o);}function _defineProperty(obj,key,value){key=jpx_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function jpx_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,jpx_toPropertyKey(descriptor.key),descriptor);}}function jpx_createClass(Constructor,protoProps,staticProps){if(protoProps)jpx_defineProperties(Constructor.prototype,protoProps);if(staticProps)jpx_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function jpx_toPropertyKey(arg){var key=jpx_toPrimitive(arg,"string");return jpx_typeof(key)==="symbol"?key:String(key);}function jpx_toPrimitive(input,hint){if(jpx_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(jpx_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function jpx_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function jpx_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)jpx_setPrototypeOf(subClass,superClass);}function jpx_setPrototypeOf(o,p){jpx_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return jpx_setPrototypeOf(o,p);}function jpx_createSuper(Derived){var hasNativeReflectConstruct=jpx_isNativeReflectConstruct();return function _createSuperInternal(){var Super=jpx_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=jpx_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return jpx_possibleConstructorReturn(this,result);};}function jpx_possibleConstructorReturn(self,call){if(call&&(jpx_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return jpx_assertThisInitialized(self);}function jpx_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function jpx_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function jpx_getPrototypeOf(o){jpx_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return jpx_getPrototypeOf(o);}var JpxError=/*#__PURE__*/function(_BaseException){jpx_inherits(JpxError,_BaseException);var _super=jpx_createSuper(JpxError);function JpxError(msg){jpx_classCallCheck(this,JpxError);return _super.call(this,"JPX error: ".concat(msg),"JpxError");}return jpx_createClass(JpxError);}(BaseException);var SubbandsGainLog2={LL:0,LH:1,HL:1,HH:2};var JpxImage=/*#__PURE__*/function(){function JpxImage(){jpx_classCallCheck(this,JpxImage);this.failOnCorruptedImage=false;}jpx_createClass(JpxImage,[{key:"parse",value:function parse(data){var head=readUint16(data,0);if(head===0xff4f){this.parseCodestream(data,0,data.length);return;}var length=data.length;var position=0;while(position<length){var headerSize=8;var lbox=readUint32(data,position);var tbox=readUint32(data,position+4);position+=headerSize;if(lbox===1){lbox=readUint32(data,position)*4294967296+readUint32(data,position+4);position+=8;headerSize+=8;}if(lbox===0){lbox=length-position+headerSize;}if(lbox<headerSize){throw new JpxError("Invalid box field size");}var dataLength=lbox-headerSize;var jumpDataLength=true;switch(tbox){case 0x6a703268:jumpDataLength=false;break;case 0x636f6c72:var method=data[position];if(method===1){var colorspace=readUint32(data,position+3);switch(colorspace){case 16:case 17:case 18:break;default:warn("Unknown colorspace "+colorspace);break;}}else if(method===2){info("ICC profile not supported");}break;case 0x6a703263:this.parseCodestream(data,position,position+dataLength);break;case 0x6a502020:if(readUint32(data,position)!==0x0d0a870a){warn("Invalid JP2 signature");}break;case 0x6a501a1a:case 0x66747970:case 0x72726571:case 0x72657320:case 0x69686472:break;default:var headerType=String.fromCharCode(tbox>>24&0xff,tbox>>16&0xff,tbox>>8&0xff,tbox&0xff);warn("Unsupported header type ".concat(tbox," (").concat(headerType,")."));break;}if(jumpDataLength){position+=dataLength;}}}},{key:"parseImageProperties",value:function parseImageProperties(stream){var newByte=stream.getByte();while(newByte>=0){var oldByte=newByte;newByte=stream.getByte();var code=oldByte<<8|newByte;if(code===0xff51){stream.skip(4);var Xsiz=stream.getInt32()>>>0;var Ysiz=stream.getInt32()>>>0;var XOsiz=stream.getInt32()>>>0;var YOsiz=stream.getInt32()>>>0;stream.skip(16);var Csiz=stream.getUint16();this.width=Xsiz-XOsiz;this.height=Ysiz-YOsiz;this.componentsCount=Csiz;this.bitsPerComponent=8;return;}}throw new JpxError("No size marker found in JPX stream");}},{key:"parseCodestream",value:function parseCodestream(data,start,end){var context={};var doNotRecover=false;try{var position=start;while(position+1<end){var code=readUint16(data,position);position+=2;var length=0,j=void 0,sqcd=void 0,spqcds=void 0,spqcdSize=void 0,scalarExpounded=void 0,tile=void 0;switch(code){case 0xff4f:context.mainHeader=true;break;case 0xffd9:break;case 0xff51:length=readUint16(data,position);var siz={};siz.Xsiz=readUint32(data,position+4);siz.Ysiz=readUint32(data,position+8);siz.XOsiz=readUint32(data,position+12);siz.YOsiz=readUint32(data,position+16);siz.XTsiz=readUint32(data,position+20);siz.YTsiz=readUint32(data,position+24);siz.XTOsiz=readUint32(data,position+28);siz.YTOsiz=readUint32(data,position+32);var componentsCount=readUint16(data,position+36);siz.Csiz=componentsCount;var components=[];j=position+38;for(var i=0;i<componentsCount;i++){var component={precision:(data[j]&0x7f)+1,isSigned:!!(data[j]&0x80),XRsiz:data[j+1],YRsiz:data[j+2]};j+=3;calculateComponentDimensions(component,siz);components.push(component);}context.SIZ=siz;context.components=components;calculateTileGrids(context,components);context.QCC=[];context.COC=[];break;case 0xff5c:length=readUint16(data,position);var qcd={};j=position+2;sqcd=data[j++];switch(sqcd&0x1f){case 0:spqcdSize=8;scalarExpounded=true;break;case 1:spqcdSize=16;scalarExpounded=false;break;case 2:spqcdSize=16;scalarExpounded=true;break;default:throw new Error("Invalid SQcd value "+sqcd);}qcd.noQuantization=spqcdSize===8;qcd.scalarExpounded=scalarExpounded;qcd.guardBits=sqcd>>5;spqcds=[];while(j<length+position){var spqcd={};if(spqcdSize===8){spqcd.epsilon=data[j++]>>3;spqcd.mu=0;}else{spqcd.epsilon=data[j]>>3;spqcd.mu=(data[j]&0x7)<<8|data[j+1];j+=2;}spqcds.push(spqcd);}qcd.SPqcds=spqcds;if(context.mainHeader){context.QCD=qcd;}else{context.currentTile.QCD=qcd;context.currentTile.QCC=[];}break;case 0xff5d:length=readUint16(data,position);var qcc={};j=position+2;var cqcc=void 0;if(context.SIZ.Csiz<257){cqcc=data[j++];}else{cqcc=readUint16(data,j);j+=2;}sqcd=data[j++];switch(sqcd&0x1f){case 0:spqcdSize=8;scalarExpounded=true;break;case 1:spqcdSize=16;scalarExpounded=false;break;case 2:spqcdSize=16;scalarExpounded=true;break;default:throw new Error("Invalid SQcd value "+sqcd);}qcc.noQuantization=spqcdSize===8;qcc.scalarExpounded=scalarExpounded;qcc.guardBits=sqcd>>5;spqcds=[];while(j<length+position){var _spqcd={};if(spqcdSize===8){_spqcd.epsilon=data[j++]>>3;_spqcd.mu=0;}else{_spqcd.epsilon=data[j]>>3;_spqcd.mu=(data[j]&0x7)<<8|data[j+1];j+=2;}spqcds.push(_spqcd);}qcc.SPqcds=spqcds;if(context.mainHeader){context.QCC[cqcc]=qcc;}else{context.currentTile.QCC[cqcc]=qcc;}break;case 0xff52:length=readUint16(data,position);var cod={};j=position+2;var scod=data[j++];cod.entropyCoderWithCustomPrecincts=!!(scod&1);cod.sopMarkerUsed=!!(scod&2);cod.ephMarkerUsed=!!(scod&4);cod.progressionOrder=data[j++];cod.layersCount=readUint16(data,j);j+=2;cod.multipleComponentTransform=data[j++];cod.decompositionLevelsCount=data[j++];cod.xcb=(data[j++]&0xf)+2;cod.ycb=(data[j++]&0xf)+2;var blockStyle=data[j++];cod.selectiveArithmeticCodingBypass=!!(blockStyle&1);cod.resetContextProbabilities=!!(blockStyle&2);cod.terminationOnEachCodingPass=!!(blockStyle&4);cod.verticallyStripe=!!(blockStyle&8);cod.predictableTermination=!!(blockStyle&16);cod.segmentationSymbolUsed=!!(blockStyle&32);cod.reversibleTransformation=data[j++];if(cod.entropyCoderWithCustomPrecincts){var precinctsSizes=[];while(j<length+position){var precinctsSize=data[j++];precinctsSizes.push({PPx:precinctsSize&0xf,PPy:precinctsSize>>4});}cod.precinctsSizes=precinctsSizes;}var unsupported=[];if(cod.selectiveArithmeticCodingBypass){unsupported.push("selectiveArithmeticCodingBypass");}if(cod.terminationOnEachCodingPass){unsupported.push("terminationOnEachCodingPass");}if(cod.verticallyStripe){unsupported.push("verticallyStripe");}if(cod.predictableTermination){unsupported.push("predictableTermination");}if(unsupported.length>0){doNotRecover=true;warn("JPX: Unsupported COD options (".concat(unsupported.join(", "),")."));}if(context.mainHeader){context.COD=cod;}else{context.currentTile.COD=cod;context.currentTile.COC=[];}break;case 0xff90:length=readUint16(data,position);tile={};tile.index=readUint16(data,position+2);tile.length=readUint32(data,position+4);tile.dataEnd=tile.length+position-2;tile.partIndex=data[position+8];tile.partsCount=data[position+9];context.mainHeader=false;if(tile.partIndex===0){tile.COD=context.COD;tile.COC=context.COC.slice(0);tile.QCD=context.QCD;tile.QCC=context.QCC.slice(0);}context.currentTile=tile;break;case 0xff93:tile=context.currentTile;if(tile.partIndex===0){initializeTile(context,tile.index);buildPackets(context);}length=tile.dataEnd-position;parseTilePackets(context,data,position,length);break;case 0xff53:warn("JPX: Codestream code 0xFF53 (COC) is not implemented.");case 0xff55:case 0xff57:case 0xff58:case 0xff64:length=readUint16(data,position);break;default:throw new Error("Unknown codestream code: "+code.toString(16));}position+=length;}}catch(e){if(doNotRecover||this.failOnCorruptedImage){throw new JpxError(e.message);}else{warn("JPX: Trying to recover from: \"".concat(e.message,"\"."));}}this.tiles=transformComponents(context);this.width=context.SIZ.Xsiz-context.SIZ.XOsiz;this.height=context.SIZ.Ysiz-context.SIZ.YOsiz;this.componentsCount=context.SIZ.Csiz;}}]);return JpxImage;}();function calculateComponentDimensions(component,siz){component.x0=Math.ceil(siz.XOsiz/component.XRsiz);component.x1=Math.ceil(siz.Xsiz/component.XRsiz);component.y0=Math.ceil(siz.YOsiz/component.YRsiz);component.y1=Math.ceil(siz.Ysiz/component.YRsiz);component.width=component.x1-component.x0;component.height=component.y1-component.y0;}function calculateTileGrids(context,components){var siz=context.SIZ;var tiles=[];var tile;var numXtiles=Math.ceil((siz.Xsiz-siz.XTOsiz)/siz.XTsiz);var numYtiles=Math.ceil((siz.Ysiz-siz.YTOsiz)/siz.YTsiz);for(var q=0;q<numYtiles;q++){for(var p=0;p<numXtiles;p++){tile={};tile.tx0=Math.max(siz.XTOsiz+p*siz.XTsiz,siz.XOsiz);tile.ty0=Math.max(siz.YTOsiz+q*siz.YTsiz,siz.YOsiz);tile.tx1=Math.min(siz.XTOsiz+(p+1)*siz.XTsiz,siz.Xsiz);tile.ty1=Math.min(siz.YTOsiz+(q+1)*siz.YTsiz,siz.Ysiz);tile.width=tile.tx1-tile.tx0;tile.height=tile.ty1-tile.ty0;tile.components=[];tiles.push(tile);}}context.tiles=tiles;var componentsCount=siz.Csiz;for(var i=0,ii=componentsCount;i<ii;i++){var component=components[i];for(var j=0,jj=tiles.length;j<jj;j++){var tileComponent={};tile=tiles[j];tileComponent.tcx0=Math.ceil(tile.tx0/component.XRsiz);tileComponent.tcy0=Math.ceil(tile.ty0/component.YRsiz);tileComponent.tcx1=Math.ceil(tile.tx1/component.XRsiz);tileComponent.tcy1=Math.ceil(tile.ty1/component.YRsiz);tileComponent.width=tileComponent.tcx1-tileComponent.tcx0;tileComponent.height=tileComponent.tcy1-tileComponent.tcy0;tile.components[i]=tileComponent;}}}function getBlocksDimensions(context,component,r){var codOrCoc=component.codingStyleParameters;var result={};if(!codOrCoc.entropyCoderWithCustomPrecincts){result.PPx=15;result.PPy=15;}else{result.PPx=codOrCoc.precinctsSizes[r].PPx;result.PPy=codOrCoc.precinctsSizes[r].PPy;}result.xcb_=r>0?Math.min(codOrCoc.xcb,result.PPx-1):Math.min(codOrCoc.xcb,result.PPx);result.ycb_=r>0?Math.min(codOrCoc.ycb,result.PPy-1):Math.min(codOrCoc.ycb,result.PPy);return result;}function buildPrecincts(context,resolution,dimensions){var precinctWidth=1<<dimensions.PPx;var precinctHeight=1<<dimensions.PPy;var isZeroRes=resolution.resLevel===0;var precinctWidthInSubband=1<<dimensions.PPx+(isZeroRes?0:-1);var precinctHeightInSubband=1<<dimensions.PPy+(isZeroRes?0:-1);var numprecinctswide=resolution.trx1>resolution.trx0?Math.ceil(resolution.trx1/precinctWidth)-Math.floor(resolution.trx0/precinctWidth):0;var numprecinctshigh=resolution.try1>resolution.try0?Math.ceil(resolution.try1/precinctHeight)-Math.floor(resolution.try0/precinctHeight):0;var numprecincts=numprecinctswide*numprecinctshigh;resolution.precinctParameters={precinctWidth:precinctWidth,precinctHeight:precinctHeight,numprecinctswide:numprecinctswide,numprecinctshigh:numprecinctshigh,numprecincts:numprecincts,precinctWidthInSubband:precinctWidthInSubband,precinctHeightInSubband:precinctHeightInSubband};}function buildCodeblocks(context,subband,dimensions){var xcb_=dimensions.xcb_;var ycb_=dimensions.ycb_;var codeblockWidth=1<<xcb_;var codeblockHeight=1<<ycb_;var cbx0=subband.tbx0>>xcb_;var cby0=subband.tby0>>ycb_;var cbx1=subband.tbx1+codeblockWidth-1>>xcb_;var cby1=subband.tby1+codeblockHeight-1>>ycb_;var precinctParameters=subband.resolution.precinctParameters;var codeblocks=[];var precincts=[];var i,j,codeblock,precinctNumber;for(j=cby0;j<cby1;j++){for(i=cbx0;i<cbx1;i++){codeblock={cbx:i,cby:j,tbx0:codeblockWidth*i,tby0:codeblockHeight*j,tbx1:codeblockWidth*(i+1),tby1:codeblockHeight*(j+1)};codeblock.tbx0_=Math.max(subband.tbx0,codeblock.tbx0);codeblock.tby0_=Math.max(subband.tby0,codeblock.tby0);codeblock.tbx1_=Math.min(subband.tbx1,codeblock.tbx1);codeblock.tby1_=Math.min(subband.tby1,codeblock.tby1);var pi=Math.floor((codeblock.tbx0_-subband.tbx0)/precinctParameters.precinctWidthInSubband);var pj=Math.floor((codeblock.tby0_-subband.tby0)/precinctParameters.precinctHeightInSubband);precinctNumber=pi+pj*precinctParameters.numprecinctswide;codeblock.precinctNumber=precinctNumber;codeblock.subbandType=subband.type;codeblock.Lblock=3;if(codeblock.tbx1_<=codeblock.tbx0_||codeblock.tby1_<=codeblock.tby0_){continue;}codeblocks.push(codeblock);var precinct=precincts[precinctNumber];if(precinct!==undefined){if(i<precinct.cbxMin){precinct.cbxMin=i;}else if(i>precinct.cbxMax){precinct.cbxMax=i;}if(j<precinct.cbyMin){precinct.cbxMin=j;}else if(j>precinct.cbyMax){precinct.cbyMax=j;}}else{precincts[precinctNumber]=precinct={cbxMin:i,cbyMin:j,cbxMax:i,cbyMax:j};}codeblock.precinct=precinct;}}subband.codeblockParameters={codeblockWidth:xcb_,codeblockHeight:ycb_,numcodeblockwide:cbx1-cbx0+1,numcodeblockhigh:cby1-cby0+1};subband.codeblocks=codeblocks;subband.precincts=precincts;}function createPacket(resolution,precinctNumber,layerNumber){var precinctCodeblocks=[];var subbands=resolution.subbands;for(var i=0,ii=subbands.length;i<ii;i++){var subband=subbands[i];var codeblocks=subband.codeblocks;for(var j=0,jj=codeblocks.length;j<jj;j++){var codeblock=codeblocks[j];if(codeblock.precinctNumber!==precinctNumber){continue;}precinctCodeblocks.push(codeblock);}}return{layerNumber:layerNumber,codeblocks:precinctCodeblocks};}function LayerResolutionComponentPositionIterator(context){var siz=context.SIZ;var tileIndex=context.currentTile.index;var tile=context.tiles[tileIndex];var layersCount=tile.codingStyleDefaultParameters.layersCount;var componentsCount=siz.Csiz;var maxDecompositionLevelsCount=0;for(var q=0;q<componentsCount;q++){maxDecompositionLevelsCount=Math.max(maxDecompositionLevelsCount,tile.components[q].codingStyleParameters.decompositionLevelsCount);}var l=0,r=0,i=0,k=0;this.nextPacket=function JpxImage_nextPacket(){for(;l<layersCount;l++){for(;r<=maxDecompositionLevelsCount;r++){for(;i<componentsCount;i++){var component=tile.components[i];if(r>component.codingStyleParameters.decompositionLevelsCount){continue;}var resolution=component.resolutions[r];var numprecincts=resolution.precinctParameters.numprecincts;for(;k<numprecincts;){var packet=createPacket(resolution,k,l);k++;return packet;}k=0;}i=0;}r=0;}throw new JpxError("Out of packets");};}function ResolutionLayerComponentPositionIterator(context){var siz=context.SIZ;var tileIndex=context.currentTile.index;var tile=context.tiles[tileIndex];var layersCount=tile.codingStyleDefaultParameters.layersCount;var componentsCount=siz.Csiz;var maxDecompositionLevelsCount=0;for(var q=0;q<componentsCount;q++){maxDecompositionLevelsCount=Math.max(maxDecompositionLevelsCount,tile.components[q].codingStyleParameters.decompositionLevelsCount);}var r=0,l=0,i=0,k=0;this.nextPacket=function JpxImage_nextPacket(){for(;r<=maxDecompositionLevelsCount;r++){for(;l<layersCount;l++){for(;i<componentsCount;i++){var component=tile.components[i];if(r>component.codingStyleParameters.decompositionLevelsCount){continue;}var resolution=component.resolutions[r];var numprecincts=resolution.precinctParameters.numprecincts;for(;k<numprecincts;){var packet=createPacket(resolution,k,l);k++;return packet;}k=0;}i=0;}l=0;}throw new JpxError("Out of packets");};}function ResolutionPositionComponentLayerIterator(context){var siz=context.SIZ;var tileIndex=context.currentTile.index;var tile=context.tiles[tileIndex];var layersCount=tile.codingStyleDefaultParameters.layersCount;var componentsCount=siz.Csiz;var l,r,c,p;var maxDecompositionLevelsCount=0;for(c=0;c<componentsCount;c++){var component=tile.components[c];maxDecompositionLevelsCount=Math.max(maxDecompositionLevelsCount,component.codingStyleParameters.decompositionLevelsCount);}var maxNumPrecinctsInLevel=new Int32Array(maxDecompositionLevelsCount+1);for(r=0;r<=maxDecompositionLevelsCount;++r){var maxNumPrecincts=0;for(c=0;c<componentsCount;++c){var resolutions=tile.components[c].resolutions;if(r<resolutions.length){maxNumPrecincts=Math.max(maxNumPrecincts,resolutions[r].precinctParameters.numprecincts);}}maxNumPrecinctsInLevel[r]=maxNumPrecincts;}l=0;r=0;c=0;p=0;this.nextPacket=function JpxImage_nextPacket(){for(;r<=maxDecompositionLevelsCount;r++){for(;p<maxNumPrecinctsInLevel[r];p++){for(;c<componentsCount;c++){var _component=tile.components[c];if(r>_component.codingStyleParameters.decompositionLevelsCount){continue;}var resolution=_component.resolutions[r];var numprecincts=resolution.precinctParameters.numprecincts;if(p>=numprecincts){continue;}for(;l<layersCount;){var packet=createPacket(resolution,p,l);l++;return packet;}l=0;}c=0;}p=0;}throw new JpxError("Out of packets");};}function PositionComponentResolutionLayerIterator(context){var siz=context.SIZ;var tileIndex=context.currentTile.index;var tile=context.tiles[tileIndex];var layersCount=tile.codingStyleDefaultParameters.layersCount;var componentsCount=siz.Csiz;var precinctsSizes=getPrecinctSizesInImageScale(tile);var precinctsIterationSizes=precinctsSizes;var l=0,r=0,c=0,px=0,py=0;this.nextPacket=function JpxImage_nextPacket(){for(;py<precinctsIterationSizes.maxNumHigh;py++){for(;px<precinctsIterationSizes.maxNumWide;px++){for(;c<componentsCount;c++){var component=tile.components[c];var decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount;for(;r<=decompositionLevelsCount;r++){var resolution=component.resolutions[r];var sizeInImageScale=precinctsSizes.components[c].resolutions[r];var k=getPrecinctIndexIfExist(px,py,sizeInImageScale,precinctsIterationSizes,resolution);if(k===null){continue;}for(;l<layersCount;){var packet=createPacket(resolution,k,l);l++;return packet;}l=0;}r=0;}c=0;}px=0;}throw new JpxError("Out of packets");};}function ComponentPositionResolutionLayerIterator(context){var siz=context.SIZ;var tileIndex=context.currentTile.index;var tile=context.tiles[tileIndex];var layersCount=tile.codingStyleDefaultParameters.layersCount;var componentsCount=siz.Csiz;var precinctsSizes=getPrecinctSizesInImageScale(tile);var l=0,r=0,c=0,px=0,py=0;this.nextPacket=function JpxImage_nextPacket(){for(;c<componentsCount;++c){var component=tile.components[c];var precinctsIterationSizes=precinctsSizes.components[c];var decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount;for(;py<precinctsIterationSizes.maxNumHigh;py++){for(;px<precinctsIterationSizes.maxNumWide;px++){for(;r<=decompositionLevelsCount;r++){var resolution=component.resolutions[r];var sizeInImageScale=precinctsIterationSizes.resolutions[r];var k=getPrecinctIndexIfExist(px,py,sizeInImageScale,precinctsIterationSizes,resolution);if(k===null){continue;}for(;l<layersCount;){var packet=createPacket(resolution,k,l);l++;return packet;}l=0;}r=0;}px=0;}py=0;}throw new JpxError("Out of packets");};}function getPrecinctIndexIfExist(pxIndex,pyIndex,sizeInImageScale,precinctIterationSizes,resolution){var posX=pxIndex*precinctIterationSizes.minWidth;var posY=pyIndex*precinctIterationSizes.minHeight;if(posX%sizeInImageScale.width!==0||posY%sizeInImageScale.height!==0){return null;}var startPrecinctRowIndex=posY/sizeInImageScale.width*resolution.precinctParameters.numprecinctswide;return posX/sizeInImageScale.height+startPrecinctRowIndex;}function getPrecinctSizesInImageScale(tile){var componentsCount=tile.components.length;var minWidth=Number.MAX_VALUE;var minHeight=Number.MAX_VALUE;var maxNumWide=0;var maxNumHigh=0;var sizePerComponent=new Array(componentsCount);for(var c=0;c<componentsCount;c++){var component=tile.components[c];var decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount;var sizePerResolution=new Array(decompositionLevelsCount+1);var minWidthCurrentComponent=Number.MAX_VALUE;var minHeightCurrentComponent=Number.MAX_VALUE;var maxNumWideCurrentComponent=0;var maxNumHighCurrentComponent=0;var scale=1;for(var r=decompositionLevelsCount;r>=0;--r){var resolution=component.resolutions[r];var widthCurrentResolution=scale*resolution.precinctParameters.precinctWidth;var heightCurrentResolution=scale*resolution.precinctParameters.precinctHeight;minWidthCurrentComponent=Math.min(minWidthCurrentComponent,widthCurrentResolution);minHeightCurrentComponent=Math.min(minHeightCurrentComponent,heightCurrentResolution);maxNumWideCurrentComponent=Math.max(maxNumWideCurrentComponent,resolution.precinctParameters.numprecinctswide);maxNumHighCurrentComponent=Math.max(maxNumHighCurrentComponent,resolution.precinctParameters.numprecinctshigh);sizePerResolution[r]={width:widthCurrentResolution,height:heightCurrentResolution};scale<<=1;}minWidth=Math.min(minWidth,minWidthCurrentComponent);minHeight=Math.min(minHeight,minHeightCurrentComponent);maxNumWide=Math.max(maxNumWide,maxNumWideCurrentComponent);maxNumHigh=Math.max(maxNumHigh,maxNumHighCurrentComponent);sizePerComponent[c]={resolutions:sizePerResolution,minWidth:minWidthCurrentComponent,minHeight:minHeightCurrentComponent,maxNumWide:maxNumWideCurrentComponent,maxNumHigh:maxNumHighCurrentComponent};}return{components:sizePerComponent,minWidth:minWidth,minHeight:minHeight,maxNumWide:maxNumWide,maxNumHigh:maxNumHigh};}function buildPackets(context){var siz=context.SIZ;var tileIndex=context.currentTile.index;var tile=context.tiles[tileIndex];var componentsCount=siz.Csiz;for(var c=0;c<componentsCount;c++){var component=tile.components[c];var decompositionLevelsCount=component.codingStyleParameters.decompositionLevelsCount;var resolutions=[];var subbands=[];for(var r=0;r<=decompositionLevelsCount;r++){var blocksDimensions=getBlocksDimensions(context,component,r);var resolution={};var scale=1<<decompositionLevelsCount-r;resolution.trx0=Math.ceil(component.tcx0/scale);resolution.try0=Math.ceil(component.tcy0/scale);resolution.trx1=Math.ceil(component.tcx1/scale);resolution.try1=Math.ceil(component.tcy1/scale);resolution.resLevel=r;buildPrecincts(context,resolution,blocksDimensions);resolutions.push(resolution);var subband=void 0;if(r===0){subband={};subband.type="LL";subband.tbx0=Math.ceil(component.tcx0/scale);subband.tby0=Math.ceil(component.tcy0/scale);subband.tbx1=Math.ceil(component.tcx1/scale);subband.tby1=Math.ceil(component.tcy1/scale);subband.resolution=resolution;buildCodeblocks(context,subband,blocksDimensions);subbands.push(subband);resolution.subbands=[subband];}else{var bscale=1<<decompositionLevelsCount-r+1;var resolutionSubbands=[];subband={};subband.type="HL";subband.tbx0=Math.ceil(component.tcx0/bscale-0.5);subband.tby0=Math.ceil(component.tcy0/bscale);subband.tbx1=Math.ceil(component.tcx1/bscale-0.5);subband.tby1=Math.ceil(component.tcy1/bscale);subband.resolution=resolution;buildCodeblocks(context,subband,blocksDimensions);subbands.push(subband);resolutionSubbands.push(subband);subband={};subband.type="LH";subband.tbx0=Math.ceil(component.tcx0/bscale);subband.tby0=Math.ceil(component.tcy0/bscale-0.5);subband.tbx1=Math.ceil(component.tcx1/bscale);subband.tby1=Math.ceil(component.tcy1/bscale-0.5);subband.resolution=resolution;buildCodeblocks(context,subband,blocksDimensions);subbands.push(subband);resolutionSubbands.push(subband);subband={};subband.type="HH";subband.tbx0=Math.ceil(component.tcx0/bscale-0.5);subband.tby0=Math.ceil(component.tcy0/bscale-0.5);subband.tbx1=Math.ceil(component.tcx1/bscale-0.5);subband.tby1=Math.ceil(component.tcy1/bscale-0.5);subband.resolution=resolution;buildCodeblocks(context,subband,blocksDimensions);subbands.push(subband);resolutionSubbands.push(subband);resolution.subbands=resolutionSubbands;}}component.resolutions=resolutions;component.subbands=subbands;}var progressionOrder=tile.codingStyleDefaultParameters.progressionOrder;switch(progressionOrder){case 0:tile.packetsIterator=new LayerResolutionComponentPositionIterator(context);break;case 1:tile.packetsIterator=new ResolutionLayerComponentPositionIterator(context);break;case 2:tile.packetsIterator=new ResolutionPositionComponentLayerIterator(context);break;case 3:tile.packetsIterator=new PositionComponentResolutionLayerIterator(context);break;case 4:tile.packetsIterator=new ComponentPositionResolutionLayerIterator(context);break;default:throw new JpxError("Unsupported progression order ".concat(progressionOrder));}}function parseTilePackets(context,data,offset,dataLength){var position=0;var buffer,bufferSize=0,skipNextBit=false;function readBits(count){while(bufferSize<count){var b=data[offset+position];position++;if(skipNextBit){buffer=buffer<<7|b;bufferSize+=7;skipNextBit=false;}else{buffer=buffer<<8|b;bufferSize+=8;}if(b===0xff){skipNextBit=true;}}bufferSize-=count;return buffer>>>bufferSize&(1<<count)-1;}function skipMarkerIfEqual(value){if(data[offset+position-1]===0xff&&data[offset+position]===value){skipBytes(1);return true;}else if(data[offset+position]===0xff&&data[offset+position+1]===value){skipBytes(2);return true;}return false;}function skipBytes(count){position+=count;}function alignToByte(){bufferSize=0;if(skipNextBit){position++;skipNextBit=false;}}function readCodingpasses(){if(readBits(1)===0){return 1;}if(readBits(1)===0){return 2;}var value=readBits(2);if(value<3){return value+3;}value=readBits(5);if(value<31){return value+6;}value=readBits(7);return value+37;}var tileIndex=context.currentTile.index;var tile=context.tiles[tileIndex];var sopMarkerUsed=context.COD.sopMarkerUsed;var ephMarkerUsed=context.COD.ephMarkerUsed;var packetsIterator=tile.packetsIterator;while(position<dataLength){alignToByte();if(sopMarkerUsed&&skipMarkerIfEqual(0x91)){skipBytes(4);}var packet=packetsIterator.nextPacket();if(!readBits(1)){continue;}var layerNumber=packet.layerNumber,queue=[];var codeblock=void 0;for(var i=0,ii=packet.codeblocks.length;i<ii;i++){codeblock=packet.codeblocks[i];var precinct=codeblock.precinct;var codeblockColumn=codeblock.cbx-precinct.cbxMin;var codeblockRow=codeblock.cby-precinct.cbyMin;var codeblockIncluded=false;var firstTimeInclusion=false;var valueReady=void 0,zeroBitPlanesTree=void 0;if(codeblock.included!==undefined){codeblockIncluded=!!readBits(1);}else{precinct=codeblock.precinct;var inclusionTree=void 0;if(precinct.inclusionTree!==undefined){inclusionTree=precinct.inclusionTree;}else{var width=precinct.cbxMax-precinct.cbxMin+1;var height=precinct.cbyMax-precinct.cbyMin+1;inclusionTree=new InclusionTree(width,height,layerNumber);zeroBitPlanesTree=new TagTree(width,height);precinct.inclusionTree=inclusionTree;precinct.zeroBitPlanesTree=zeroBitPlanesTree;for(var l=0;l<layerNumber;l++){if(readBits(1)!==0){throw new JpxError("Invalid tag tree");}}}if(inclusionTree.reset(codeblockColumn,codeblockRow,layerNumber)){while(true){if(readBits(1)){valueReady=!inclusionTree.nextLevel();if(valueReady){codeblock.included=true;codeblockIncluded=firstTimeInclusion=true;break;}}else{inclusionTree.incrementValue(layerNumber);break;}}}}if(!codeblockIncluded){continue;}if(firstTimeInclusion){zeroBitPlanesTree=precinct.zeroBitPlanesTree;zeroBitPlanesTree.reset(codeblockColumn,codeblockRow);while(true){if(readBits(1)){valueReady=!zeroBitPlanesTree.nextLevel();if(valueReady){break;}}else{zeroBitPlanesTree.incrementValue();}}codeblock.zeroBitPlanes=zeroBitPlanesTree.value;}var codingpasses=readCodingpasses();while(readBits(1)){codeblock.Lblock++;}var codingpassesLog2=log2(codingpasses);var bits=(codingpasses<1<<codingpassesLog2?codingpassesLog2-1:codingpassesLog2)+codeblock.Lblock;var codedDataLength=readBits(bits);queue.push({codeblock:codeblock,codingpasses:codingpasses,dataLength:codedDataLength});}alignToByte();if(ephMarkerUsed){skipMarkerIfEqual(0x92);}while(queue.length>0){var packetItem=queue.shift();codeblock=packetItem.codeblock;if(codeblock.data===undefined){codeblock.data=[];}codeblock.data.push({data:data,start:offset+position,end:offset+position+packetItem.dataLength,codingpasses:packetItem.codingpasses});position+=packetItem.dataLength;}}return position;}function copyCoefficients(coefficients,levelWidth,levelHeight,subband,delta,mb,reversible,segmentationSymbolUsed,resetContextProbabilities){var x0=subband.tbx0;var y0=subband.tby0;var width=subband.tbx1-subband.tbx0;var codeblocks=subband.codeblocks;var right=subband.type.charAt(0)==="H"?1:0;var bottom=subband.type.charAt(1)==="H"?levelWidth:0;for(var i=0,ii=codeblocks.length;i<ii;++i){var codeblock=codeblocks[i];var blockWidth=codeblock.tbx1_-codeblock.tbx0_;var blockHeight=codeblock.tby1_-codeblock.tby0_;if(blockWidth===0||blockHeight===0){continue;}if(codeblock.data===undefined){continue;}var bitModel=new BitModel(blockWidth,blockHeight,codeblock.subbandType,codeblock.zeroBitPlanes,mb);var currentCodingpassType=2;var data=codeblock.data;var totalLength=0,codingpasses=0;var j=void 0,jj=void 0,dataItem=void 0;for(j=0,jj=data.length;j<jj;j++){dataItem=data[j];totalLength+=dataItem.end-dataItem.start;codingpasses+=dataItem.codingpasses;}var encodedData=new Uint8Array(totalLength);var position=0;for(j=0,jj=data.length;j<jj;j++){dataItem=data[j];var chunk=dataItem.data.subarray(dataItem.start,dataItem.end);encodedData.set(chunk,position);position+=chunk.length;}var decoder=new ArithmeticDecoder(encodedData,0,totalLength);bitModel.setDecoder(decoder);for(j=0;j<codingpasses;j++){switch(currentCodingpassType){case 0:bitModel.runSignificancePropagationPass();break;case 1:bitModel.runMagnitudeRefinementPass();break;case 2:bitModel.runCleanupPass();if(segmentationSymbolUsed){bitModel.checkSegmentationSymbol();}break;}if(resetContextProbabilities){bitModel.reset();}currentCodingpassType=(currentCodingpassType+1)%3;}var offset=codeblock.tbx0_-x0+(codeblock.tby0_-y0)*width;var sign=bitModel.coefficentsSign;var magnitude=bitModel.coefficentsMagnitude;var bitsDecoded=bitModel.bitsDecoded;var magnitudeCorrection=reversible?0:0.5;var k=void 0,n=void 0,nb=void 0;position=0;var interleave=subband.type!=="LL";for(j=0;j<blockHeight;j++){var row=offset/width|0;var levelOffset=2*row*(levelWidth-width)+right+bottom;for(k=0;k<blockWidth;k++){n=magnitude[position];if(n!==0){n=(n+magnitudeCorrection)*delta;if(sign[position]!==0){n=-n;}nb=bitsDecoded[position];var pos=interleave?levelOffset+(offset<<1):offset;coefficients[pos]=reversible&&nb>=mb?n:n*(1<<mb-nb);}offset++;position++;}offset+=width-blockWidth;}}}function transformTile(context,tile,c){var component=tile.components[c];var codingStyleParameters=component.codingStyleParameters;var quantizationParameters=component.quantizationParameters;var decompositionLevelsCount=codingStyleParameters.decompositionLevelsCount;var spqcds=quantizationParameters.SPqcds;var scalarExpounded=quantizationParameters.scalarExpounded;var guardBits=quantizationParameters.guardBits;var segmentationSymbolUsed=codingStyleParameters.segmentationSymbolUsed;var resetContextProbabilities=codingStyleParameters.resetContextProbabilities;var precision=context.components[c].precision;var reversible=codingStyleParameters.reversibleTransformation;var transform=reversible?new ReversibleTransform():new IrreversibleTransform();var subbandCoefficients=[];var b=0;for(var i=0;i<=decompositionLevelsCount;i++){var resolution=component.resolutions[i];var width=resolution.trx1-resolution.trx0;var height=resolution.try1-resolution.try0;var coefficients=new Float32Array(width*height);for(var j=0,jj=resolution.subbands.length;j<jj;j++){var mu=void 0,epsilon=void 0;if(!scalarExpounded){mu=spqcds[0].mu;epsilon=spqcds[0].epsilon+(i>0?1-i:0);}else{mu=spqcds[b].mu;epsilon=spqcds[b].epsilon;b++;}var subband=resolution.subbands[j];var gainLog2=SubbandsGainLog2[subband.type];var delta=reversible?1:Math.pow(2,precision+gainLog2-epsilon)*(1+mu/2048);var mb=guardBits+epsilon-1;copyCoefficients(coefficients,width,height,subband,delta,mb,reversible,segmentationSymbolUsed,resetContextProbabilities);}subbandCoefficients.push({width:width,height:height,items:coefficients});}var result=transform.calculate(subbandCoefficients,component.tcx0,component.tcy0);return{left:component.tcx0,top:component.tcy0,width:result.width,height:result.height,items:result.items};}function transformComponents(context){var siz=context.SIZ;var components=context.components;var componentsCount=siz.Csiz;var resultImages=[];for(var i=0,ii=context.tiles.length;i<ii;i++){var tile=context.tiles[i];var transformedTiles=[];for(var c=0;c<componentsCount;c++){transformedTiles[c]=transformTile(context,tile,c);}var tile0=transformedTiles[0];var out=new Uint8ClampedArray(tile0.items.length*componentsCount);var result={left:tile0.left,top:tile0.top,width:tile0.width,height:tile0.height,items:out};var shift=void 0,offset=void 0;var pos=0,j=void 0,jj=void 0,y0=void 0,y1=void 0,y2=void 0;if(tile.codingStyleDefaultParameters.multipleComponentTransform){var fourComponents=componentsCount===4;var y0items=transformedTiles[0].items;var y1items=transformedTiles[1].items;var y2items=transformedTiles[2].items;var y3items=fourComponents?transformedTiles[3].items:null;shift=components[0].precision-8;offset=(128<<shift)+0.5;var component0=tile.components[0];var alpha01=componentsCount-3;jj=y0items.length;if(!component0.codingStyleParameters.reversibleTransformation){for(j=0;j<jj;j++,pos+=alpha01){y0=y0items[j]+offset;y1=y1items[j];y2=y2items[j];out[pos++]=y0+1.402*y2>>shift;out[pos++]=y0-0.34413*y1-0.71414*y2>>shift;out[pos++]=y0+1.772*y1>>shift;}}else{for(j=0;j<jj;j++,pos+=alpha01){y0=y0items[j]+offset;y1=y1items[j];y2=y2items[j];var g=y0-(y2+y1>>2);out[pos++]=g+y2>>shift;out[pos++]=g>>shift;out[pos++]=g+y1>>shift;}}if(fourComponents){for(j=0,pos=3;j<jj;j++,pos+=4){out[pos]=y3items[j]+offset>>shift;}}}else{for(var _c=0;_c<componentsCount;_c++){var items=transformedTiles[_c].items;shift=components[_c].precision-8;offset=(128<<shift)+0.5;for(pos=_c,j=0,jj=items.length;j<jj;j++){out[pos]=items[j]+offset>>shift;pos+=componentsCount;}}}resultImages.push(result);}return resultImages;}function initializeTile(context,tileIndex){var siz=context.SIZ;var componentsCount=siz.Csiz;var tile=context.tiles[tileIndex];for(var c=0;c<componentsCount;c++){var component=tile.components[c];var qcdOrQcc=context.currentTile.QCC[c]!==undefined?context.currentTile.QCC[c]:context.currentTile.QCD;component.quantizationParameters=qcdOrQcc;var codOrCoc=context.currentTile.COC[c]!==undefined?context.currentTile.COC[c]:context.currentTile.COD;component.codingStyleParameters=codOrCoc;}tile.codingStyleDefaultParameters=context.currentTile.COD;}var TagTree=/*#__PURE__*/function(){function TagTree(width,height){jpx_classCallCheck(this,TagTree);var levelsLength=log2(Math.max(width,height))+1;this.levels=[];for(var i=0;i<levelsLength;i++){var level={width:width,height:height,items:[]};this.levels.push(level);width=Math.ceil(width/2);height=Math.ceil(height/2);}}jpx_createClass(TagTree,[{key:"reset",value:function reset(i,j){var currentLevel=0,value=0,level;while(currentLevel<this.levels.length){level=this.levels[currentLevel];var index=i+j*level.width;if(level.items[index]!==undefined){value=level.items[index];break;}level.index=index;i>>=1;j>>=1;currentLevel++;}currentLevel--;level=this.levels[currentLevel];level.items[level.index]=value;this.currentLevel=currentLevel;delete this.value;}},{key:"incrementValue",value:function incrementValue(){var level=this.levels[this.currentLevel];level.items[level.index]++;}},{key:"nextLevel",value:function nextLevel(){var currentLevel=this.currentLevel;var level=this.levels[currentLevel];var value=level.items[level.index];currentLevel--;if(currentLevel<0){this.value=value;return false;}this.currentLevel=currentLevel;level=this.levels[currentLevel];level.items[level.index]=value;return true;}}]);return TagTree;}();var InclusionTree=/*#__PURE__*/function(){function InclusionTree(width,height,defaultValue){jpx_classCallCheck(this,InclusionTree);var levelsLength=log2(Math.max(width,height))+1;this.levels=[];for(var i=0;i<levelsLength;i++){var items=new Uint8Array(width*height);for(var j=0,jj=items.length;j<jj;j++){items[j]=defaultValue;}var level={width:width,height:height,items:items};this.levels.push(level);width=Math.ceil(width/2);height=Math.ceil(height/2);}}jpx_createClass(InclusionTree,[{key:"reset",value:function reset(i,j,stopValue){var currentLevel=0;while(currentLevel<this.levels.length){var level=this.levels[currentLevel];var index=i+j*level.width;level.index=index;var value=level.items[index];if(value===0xff){break;}if(value>stopValue){this.currentLevel=currentLevel;this.propagateValues();return false;}i>>=1;j>>=1;currentLevel++;}this.currentLevel=currentLevel-1;return true;}},{key:"incrementValue",value:function incrementValue(stopValue){var level=this.levels[this.currentLevel];level.items[level.index]=stopValue+1;this.propagateValues();}},{key:"propagateValues",value:function propagateValues(){var levelIndex=this.currentLevel;var level=this.levels[levelIndex];var currentValue=level.items[level.index];while(--levelIndex>=0){level=this.levels[levelIndex];level.items[level.index]=currentValue;}}},{key:"nextLevel",value:function nextLevel(){var currentLevel=this.currentLevel;var level=this.levels[currentLevel];var value=level.items[level.index];level.items[level.index]=0xff;currentLevel--;if(currentLevel<0){return false;}this.currentLevel=currentLevel;level=this.levels[currentLevel];level.items[level.index]=value;return true;}}]);return InclusionTree;}();var BitModel=/*#__PURE__*/function(){function BitModel(width,height,subband,zeroBitPlanes,mb){jpx_classCallCheck(this,BitModel);this.width=width;this.height=height;var contextLabelTable;if(subband==="HH"){contextLabelTable=BitModel.HHContextLabel;}else if(subband==="HL"){contextLabelTable=BitModel.HLContextLabel;}else{contextLabelTable=BitModel.LLAndLHContextsLabel;}this.contextLabelTable=contextLabelTable;var coefficientCount=width*height;this.neighborsSignificance=new Uint8Array(coefficientCount);this.coefficentsSign=new Uint8Array(coefficientCount);var coefficentsMagnitude;if(mb>14){coefficentsMagnitude=new Uint32Array(coefficientCount);}else if(mb>6){coefficentsMagnitude=new Uint16Array(coefficientCount);}else{coefficentsMagnitude=new Uint8Array(coefficientCount);}this.coefficentsMagnitude=coefficentsMagnitude;this.processingFlags=new Uint8Array(coefficientCount);var bitsDecoded=new Uint8Array(coefficientCount);if(zeroBitPlanes!==0){for(var i=0;i<coefficientCount;i++){bitsDecoded[i]=zeroBitPlanes;}}this.bitsDecoded=bitsDecoded;this.reset();}jpx_createClass(BitModel,[{key:"setDecoder",value:function setDecoder(decoder){this.decoder=decoder;}},{key:"reset",value:function reset(){this.contexts=new Int8Array(19);this.contexts[0]=4<<1|0;this.contexts[BitModel.UNIFORM_CONTEXT]=46<<1|0;this.contexts[BitModel.RUNLENGTH_CONTEXT]=3<<1|0;}},{key:"setNeighborsSignificance",value:function setNeighborsSignificance(row,column,index){var neighborsSignificance=this.neighborsSignificance;var width=this.width,height=this.height;var left=column>0;var right=column+1<width;var i;if(row>0){i=index-width;if(left){neighborsSignificance[i-1]+=0x10;}if(right){neighborsSignificance[i+1]+=0x10;}neighborsSignificance[i]+=0x04;}if(row+1<height){i=index+width;if(left){neighborsSignificance[i-1]+=0x10;}if(right){neighborsSignificance[i+1]+=0x10;}neighborsSignificance[i]+=0x04;}if(left){neighborsSignificance[index-1]+=0x01;}if(right){neighborsSignificance[index+1]+=0x01;}neighborsSignificance[index]|=0x80;}},{key:"runSignificancePropagationPass",value:function runSignificancePropagationPass(){var decoder=this.decoder;var width=this.width,height=this.height;var coefficentsMagnitude=this.coefficentsMagnitude;var coefficentsSign=this.coefficentsSign;var neighborsSignificance=this.neighborsSignificance;var processingFlags=this.processingFlags;var contexts=this.contexts;var labels=this.contextLabelTable;var bitsDecoded=this.bitsDecoded;var processedInverseMask=~1;var processedMask=1;var firstMagnitudeBitMask=2;for(var i0=0;i0<height;i0+=4){for(var j=0;j<width;j++){var index=i0*width+j;for(var i1=0;i1<4;i1++,index+=width){var i=i0+i1;if(i>=height){break;}processingFlags[index]&=processedInverseMask;if(coefficentsMagnitude[index]||!neighborsSignificance[index]){continue;}var contextLabel=labels[neighborsSignificance[index]];var decision=decoder.readBit(contexts,contextLabel);if(decision){var sign=this.decodeSignBit(i,j,index);coefficentsSign[index]=sign;coefficentsMagnitude[index]=1;this.setNeighborsSignificance(i,j,index);processingFlags[index]|=firstMagnitudeBitMask;}bitsDecoded[index]++;processingFlags[index]|=processedMask;}}}}},{key:"decodeSignBit",value:function decodeSignBit(row,column,index){var width=this.width,height=this.height;var coefficentsMagnitude=this.coefficentsMagnitude;var coefficentsSign=this.coefficentsSign;var contribution,sign0,sign1,significance1;var contextLabel,decoded;significance1=column>0&&coefficentsMagnitude[index-1]!==0;if(column+1<width&&coefficentsMagnitude[index+1]!==0){sign1=coefficentsSign[index+1];if(significance1){sign0=coefficentsSign[index-1];contribution=1-sign1-sign0;}else{contribution=1-sign1-sign1;}}else if(significance1){sign0=coefficentsSign[index-1];contribution=1-sign0-sign0;}else{contribution=0;}var horizontalContribution=3*contribution;significance1=row>0&&coefficentsMagnitude[index-width]!==0;if(row+1<height&&coefficentsMagnitude[index+width]!==0){sign1=coefficentsSign[index+width];if(significance1){sign0=coefficentsSign[index-width];contribution=1-sign1-sign0+horizontalContribution;}else{contribution=1-sign1-sign1+horizontalContribution;}}else if(significance1){sign0=coefficentsSign[index-width];contribution=1-sign0-sign0+horizontalContribution;}else{contribution=horizontalContribution;}if(contribution>=0){contextLabel=9+contribution;decoded=this.decoder.readBit(this.contexts,contextLabel);}else{contextLabel=9-contribution;decoded=this.decoder.readBit(this.contexts,contextLabel)^1;}return decoded;}},{key:"runMagnitudeRefinementPass",value:function runMagnitudeRefinementPass(){var decoder=this.decoder;var width=this.width,height=this.height;var coefficentsMagnitude=this.coefficentsMagnitude;var neighborsSignificance=this.neighborsSignificance;var contexts=this.contexts;var bitsDecoded=this.bitsDecoded;var processingFlags=this.processingFlags;var processedMask=1;var firstMagnitudeBitMask=2;var length=width*height;var width4=width*4;for(var index0=0,indexNext;index0<length;index0=indexNext){indexNext=Math.min(length,index0+width4);for(var j=0;j<width;j++){for(var index=index0+j;index<indexNext;index+=width){if(!coefficentsMagnitude[index]||(processingFlags[index]&processedMask)!==0){continue;}var contextLabel=16;if((processingFlags[index]&firstMagnitudeBitMask)!==0){processingFlags[index]^=firstMagnitudeBitMask;var significance=neighborsSignificance[index]&127;contextLabel=significance===0?15:14;}var bit=decoder.readBit(contexts,contextLabel);coefficentsMagnitude[index]=coefficentsMagnitude[index]<<1|bit;bitsDecoded[index]++;processingFlags[index]|=processedMask;}}}}},{key:"runCleanupPass",value:function runCleanupPass(){var decoder=this.decoder;var width=this.width,height=this.height;var neighborsSignificance=this.neighborsSignificance;var coefficentsMagnitude=this.coefficentsMagnitude;var coefficentsSign=this.coefficentsSign;var contexts=this.contexts;var labels=this.contextLabelTable;var bitsDecoded=this.bitsDecoded;var processingFlags=this.processingFlags;var processedMask=1;var firstMagnitudeBitMask=2;var oneRowDown=width;var twoRowsDown=width*2;var threeRowsDown=width*3;var iNext;for(var i0=0;i0<height;i0=iNext){iNext=Math.min(i0+4,height);var indexBase=i0*width;var checkAllEmpty=i0+3<height;for(var j=0;j<width;j++){var index0=indexBase+j;var allEmpty=checkAllEmpty&&processingFlags[index0]===0&&processingFlags[index0+oneRowDown]===0&&processingFlags[index0+twoRowsDown]===0&&processingFlags[index0+threeRowsDown]===0&&neighborsSignificance[index0]===0&&neighborsSignificance[index0+oneRowDown]===0&&neighborsSignificance[index0+twoRowsDown]===0&&neighborsSignificance[index0+threeRowsDown]===0;var i1=0,index=index0;var i=i0,sign=void 0;if(allEmpty){var hasSignificantCoefficent=decoder.readBit(contexts,BitModel.RUNLENGTH_CONTEXT);if(!hasSignificantCoefficent){bitsDecoded[index0]++;bitsDecoded[index0+oneRowDown]++;bitsDecoded[index0+twoRowsDown]++;bitsDecoded[index0+threeRowsDown]++;continue;}i1=decoder.readBit(contexts,BitModel.UNIFORM_CONTEXT)<<1|decoder.readBit(contexts,BitModel.UNIFORM_CONTEXT);if(i1!==0){i=i0+i1;index+=i1*width;}sign=this.decodeSignBit(i,j,index);coefficentsSign[index]=sign;coefficentsMagnitude[index]=1;this.setNeighborsSignificance(i,j,index);processingFlags[index]|=firstMagnitudeBitMask;index=index0;for(var i2=i0;i2<=i;i2++,index+=width){bitsDecoded[index]++;}i1++;}for(i=i0+i1;i<iNext;i++,index+=width){if(coefficentsMagnitude[index]||(processingFlags[index]&processedMask)!==0){continue;}var contextLabel=labels[neighborsSignificance[index]];var decision=decoder.readBit(contexts,contextLabel);if(decision===1){sign=this.decodeSignBit(i,j,index);coefficentsSign[index]=sign;coefficentsMagnitude[index]=1;this.setNeighborsSignificance(i,j,index);processingFlags[index]|=firstMagnitudeBitMask;}bitsDecoded[index]++;}}}}},{key:"checkSegmentationSymbol",value:function checkSegmentationSymbol(){var decoder=this.decoder;var contexts=this.contexts;var symbol=decoder.readBit(contexts,BitModel.UNIFORM_CONTEXT)<<3|decoder.readBit(contexts,BitModel.UNIFORM_CONTEXT)<<2|decoder.readBit(contexts,BitModel.UNIFORM_CONTEXT)<<1|decoder.readBit(contexts,BitModel.UNIFORM_CONTEXT);if(symbol!==0xa){throw new JpxError("Invalid segmentation symbol");}}}]);return BitModel;}();_defineProperty(BitModel,"UNIFORM_CONTEXT",17);_defineProperty(BitModel,"RUNLENGTH_CONTEXT",18);_defineProperty(BitModel,"LLAndLHContextsLabel",new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]));_defineProperty(BitModel,"HLContextLabel",new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]));_defineProperty(BitModel,"HHContextLabel",new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]));var Transform=/*#__PURE__*/function(){function Transform(){jpx_classCallCheck(this,Transform);if(this.constructor===Transform){unreachable("Cannot initialize Transform.");}}jpx_createClass(Transform,[{key:"calculate",value:function calculate(subbands,u0,v0){var ll=subbands[0];for(var i=1,ii=subbands.length;i<ii;i++){ll=this.iterate(ll,subbands[i],u0,v0);}return ll;}},{key:"extend",value:function extend(buffer,offset,size){var i1=offset-1,j1=offset+1;var i2=offset+size-2,j2=offset+size;buffer[i1--]=buffer[j1++];buffer[j2++]=buffer[i2--];buffer[i1--]=buffer[j1++];buffer[j2++]=buffer[i2--];buffer[i1--]=buffer[j1++];buffer[j2++]=buffer[i2--];buffer[i1]=buffer[j1];buffer[j2]=buffer[i2];}},{key:"filter",value:function filter(x,offset,length){unreachable("Abstract method `filter` called");}},{key:"iterate",value:function iterate(ll,hl_lh_hh,u0,v0){var llWidth=ll.width,llHeight=ll.height;var llItems=ll.items;var width=hl_lh_hh.width;var height=hl_lh_hh.height;var items=hl_lh_hh.items;var i,j,k,l,u,v;for(k=0,i=0;i<llHeight;i++){l=i*2*width;for(j=0;j<llWidth;j++,k++,l+=2){items[l]=llItems[k];}}llItems=ll.items=null;var bufferPadding=4;var rowBuffer=new Float32Array(width+2*bufferPadding);if(width===1){if((u0&1)!==0){for(v=0,k=0;v<height;v++,k+=width){items[k]*=0.5;}}}else{for(v=0,k=0;v<height;v++,k+=width){rowBuffer.set(items.subarray(k,k+width),bufferPadding);this.extend(rowBuffer,bufferPadding,width);this.filter(rowBuffer,bufferPadding,width);items.set(rowBuffer.subarray(bufferPadding,bufferPadding+width),k);}}var numBuffers=16;var colBuffers=[];for(i=0;i<numBuffers;i++){colBuffers.push(new Float32Array(height+2*bufferPadding));}var b,currentBuffer=0;ll=bufferPadding+height;if(height===1){if((v0&1)!==0){for(u=0;u<width;u++){items[u]*=0.5;}}}else{for(u=0;u<width;u++){if(currentBuffer===0){numBuffers=Math.min(width-u,numBuffers);for(k=u,l=bufferPadding;l<ll;k+=width,l++){for(b=0;b<numBuffers;b++){colBuffers[b][l]=items[k+b];}}currentBuffer=numBuffers;}currentBuffer--;var buffer=colBuffers[currentBuffer];this.extend(buffer,bufferPadding,height);this.filter(buffer,bufferPadding,height);if(currentBuffer===0){k=u-numBuffers+1;for(l=bufferPadding;l<ll;k+=width,l++){for(b=0;b<numBuffers;b++){items[k+b]=colBuffers[b][l];}}}}}return{width:width,height:height,items:items};}}]);return Transform;}();var IrreversibleTransform=/*#__PURE__*/function(_Transform){jpx_inherits(IrreversibleTransform,_Transform);var _super2=jpx_createSuper(IrreversibleTransform);function IrreversibleTransform(){jpx_classCallCheck(this,IrreversibleTransform);return _super2.apply(this,arguments);}jpx_createClass(IrreversibleTransform,[{key:"filter",value:function filter(x,offset,length){var len=length>>1;offset|=0;var j,n,current,next;var alpha=-1.586134342059924;var beta=-0.052980118572961;var gamma=0.882911075530934;var delta=0.443506852043971;var K=1.230174104914001;var K_=1/K;j=offset-3;for(n=len+4;n--;j+=2){x[j]*=K_;}j=offset-2;current=delta*x[j-1];for(n=len+3;n--;j+=2){next=delta*x[j+1];x[j]=K*x[j]-current-next;if(n--){j+=2;current=delta*x[j+1];x[j]=K*x[j]-current-next;}else{break;}}j=offset-1;current=gamma*x[j-1];for(n=len+2;n--;j+=2){next=gamma*x[j+1];x[j]-=current+next;if(n--){j+=2;current=gamma*x[j+1];x[j]-=current+next;}else{break;}}j=offset;current=beta*x[j-1];for(n=len+1;n--;j+=2){next=beta*x[j+1];x[j]-=current+next;if(n--){j+=2;current=beta*x[j+1];x[j]-=current+next;}else{break;}}if(len!==0){j=offset+1;current=alpha*x[j-1];for(n=len;n--;j+=2){next=alpha*x[j+1];x[j]-=current+next;if(n--){j+=2;current=alpha*x[j+1];x[j]-=current+next;}else{break;}}}}}]);return IrreversibleTransform;}(Transform);var ReversibleTransform=/*#__PURE__*/function(_Transform2){jpx_inherits(ReversibleTransform,_Transform2);var _super3=jpx_createSuper(ReversibleTransform);function ReversibleTransform(){jpx_classCallCheck(this,ReversibleTransform);return _super3.apply(this,arguments);}jpx_createClass(ReversibleTransform,[{key:"filter",value:function filter(x,offset,length){var len=length>>1;offset|=0;var j,n;for(j=offset,n=len+1;n--;j+=2){x[j]-=x[j-1]+x[j+1]+2>>2;}for(j=offset+1,n=len;n--;j+=2){x[j]+=x[j-1]+x[j+1]>>1;}}}]);return ReversibleTransform;}(Transform);
;// CONCATENATED MODULE: ./src/core/jpx_stream.js
function jpx_stream_typeof(o){"@babel/helpers - typeof";return jpx_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},jpx_stream_typeof(o);}function jpx_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function jpx_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,jpx_stream_toPropertyKey(descriptor.key),descriptor);}}function jpx_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)jpx_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)jpx_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function jpx_stream_toPropertyKey(arg){var key=jpx_stream_toPrimitive(arg,"string");return jpx_stream_typeof(key)==="symbol"?key:String(key);}function jpx_stream_toPrimitive(input,hint){if(jpx_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(jpx_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function jpx_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)jpx_stream_setPrototypeOf(subClass,superClass);}function jpx_stream_setPrototypeOf(o,p){jpx_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return jpx_stream_setPrototypeOf(o,p);}function jpx_stream_createSuper(Derived){var hasNativeReflectConstruct=jpx_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=jpx_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=jpx_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return jpx_stream_possibleConstructorReturn(this,result);};}function jpx_stream_possibleConstructorReturn(self,call){if(call&&(jpx_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return jpx_stream_assertThisInitialized(self);}function jpx_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function jpx_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function jpx_stream_getPrototypeOf(o){jpx_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return jpx_stream_getPrototypeOf(o);}var JpxStream=/*#__PURE__*/function(_DecodeStream){jpx_stream_inherits(JpxStream,_DecodeStream);var _super=jpx_stream_createSuper(JpxStream);function JpxStream(stream,maybeLength,params){var _this;jpx_stream_classCallCheck(this,JpxStream);_this=_super.call(this,maybeLength);_this.stream=stream;_this.dict=stream.dict;_this.maybeLength=maybeLength;_this.params=params;return _this;}jpx_stream_createClass(JpxStream,[{key:"bytes",get:function get(){return shadow(this,"bytes",this.stream.getBytes(this.maybeLength));}},{key:"ensureBuffer",value:function ensureBuffer(requested){}},{key:"readBlock",value:function readBlock(){if(this.eof){return;}var jpxImage=new JpxImage();jpxImage.parse(this.bytes);var width=jpxImage.width;var height=jpxImage.height;var componentsCount=jpxImage.componentsCount;var tileCount=jpxImage.tiles.length;if(tileCount===1){this.buffer=jpxImage.tiles[0].items;}else{var data=new Uint8ClampedArray(width*height*componentsCount);for(var k=0;k<tileCount;k++){var tileComponents=jpxImage.tiles[k];var tileWidth=tileComponents.width;var tileHeight=tileComponents.height;var tileLeft=tileComponents.left;var tileTop=tileComponents.top;var src=tileComponents.items;var srcPosition=0;var dataPosition=(width*tileTop+tileLeft)*componentsCount;var imgRowSize=width*componentsCount;var tileRowSize=tileWidth*componentsCount;for(var j=0;j<tileHeight;j++){var rowBytes=src.subarray(srcPosition,srcPosition+tileRowSize);data.set(rowBytes,dataPosition);srcPosition+=tileRowSize;dataPosition+=imgRowSize;}}this.buffer=data;}this.bufferLength=this.buffer.length;this.eof=true;}}]);return JpxStream;}(DecodeStream);
;// CONCATENATED MODULE: ./src/core/lzw_stream.js
function lzw_stream_typeof(o){"@babel/helpers - typeof";return lzw_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},lzw_stream_typeof(o);}function lzw_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function lzw_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,lzw_stream_toPropertyKey(descriptor.key),descriptor);}}function lzw_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)lzw_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)lzw_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function lzw_stream_toPropertyKey(arg){var key=lzw_stream_toPrimitive(arg,"string");return lzw_stream_typeof(key)==="symbol"?key:String(key);}function lzw_stream_toPrimitive(input,hint){if(lzw_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(lzw_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function lzw_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)lzw_stream_setPrototypeOf(subClass,superClass);}function lzw_stream_setPrototypeOf(o,p){lzw_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return lzw_stream_setPrototypeOf(o,p);}function lzw_stream_createSuper(Derived){var hasNativeReflectConstruct=lzw_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=lzw_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=lzw_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return lzw_stream_possibleConstructorReturn(this,result);};}function lzw_stream_possibleConstructorReturn(self,call){if(call&&(lzw_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return lzw_stream_assertThisInitialized(self);}function lzw_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function lzw_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function lzw_stream_getPrototypeOf(o){lzw_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return lzw_stream_getPrototypeOf(o);}var LZWStream=/*#__PURE__*/function(_DecodeStream){lzw_stream_inherits(LZWStream,_DecodeStream);var _super=lzw_stream_createSuper(LZWStream);function LZWStream(str,maybeLength,earlyChange){var _this;lzw_stream_classCallCheck(this,LZWStream);_this=_super.call(this,maybeLength);_this.str=str;_this.dict=str.dict;_this.cachedData=0;_this.bitsCached=0;var maxLzwDictionarySize=4096;var lzwState={earlyChange:earlyChange,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(maxLzwDictionarySize),dictionaryLengths:new Uint16Array(maxLzwDictionarySize),dictionaryPrevCodes:new Uint16Array(maxLzwDictionarySize),currentSequence:new Uint8Array(maxLzwDictionarySize),currentSequenceLength:0};for(var i=0;i<256;++i){lzwState.dictionaryValues[i]=i;lzwState.dictionaryLengths[i]=1;}_this.lzwState=lzwState;return _this;}lzw_stream_createClass(LZWStream,[{key:"readBits",value:function readBits(n){var bitsCached=this.bitsCached;var cachedData=this.cachedData;while(bitsCached<n){var c=this.str.getByte();if(c===-1){this.eof=true;return null;}cachedData=cachedData<<8|c;bitsCached+=8;}this.bitsCached=bitsCached-=n;this.cachedData=cachedData;this.lastCode=null;return cachedData>>>bitsCached&(1<<n)-1;}},{key:"readBlock",value:function readBlock(){var blockSize=512,decodedSizeDelta=blockSize;var estimatedDecodedSize=blockSize*2;var i,j,q;var lzwState=this.lzwState;if(!lzwState){return;}var earlyChange=lzwState.earlyChange;var nextCode=lzwState.nextCode;var dictionaryValues=lzwState.dictionaryValues;var dictionaryLengths=lzwState.dictionaryLengths;var dictionaryPrevCodes=lzwState.dictionaryPrevCodes;var codeLength=lzwState.codeLength;var prevCode=lzwState.prevCode;var currentSequence=lzwState.currentSequence;var currentSequenceLength=lzwState.currentSequenceLength;var decodedLength=0;var currentBufferLength=this.bufferLength;var buffer=this.ensureBuffer(this.bufferLength+estimatedDecodedSize);for(i=0;i<blockSize;i++){var code=this.readBits(codeLength);var hasPrev=currentSequenceLength>0;if(code<256){currentSequence[0]=code;currentSequenceLength=1;}else if(code>=258){if(code<nextCode){currentSequenceLength=dictionaryLengths[code];for(j=currentSequenceLength-1,q=code;j>=0;j--){currentSequence[j]=dictionaryValues[q];q=dictionaryPrevCodes[q];}}else{currentSequence[currentSequenceLength++]=currentSequence[0];}}else if(code===256){codeLength=9;nextCode=258;currentSequenceLength=0;continue;}else{this.eof=true;delete this.lzwState;break;}if(hasPrev){dictionaryPrevCodes[nextCode]=prevCode;dictionaryLengths[nextCode]=dictionaryLengths[prevCode]+1;dictionaryValues[nextCode]=currentSequence[0];nextCode++;codeLength=nextCode+earlyChange&nextCode+earlyChange-1?codeLength:Math.min(Math.log(nextCode+earlyChange)/0.6931471805599453+1,12)|0;}prevCode=code;decodedLength+=currentSequenceLength;if(estimatedDecodedSize<decodedLength){do{estimatedDecodedSize+=decodedSizeDelta;}while(estimatedDecodedSize<decodedLength);buffer=this.ensureBuffer(this.bufferLength+estimatedDecodedSize);}for(j=0;j<currentSequenceLength;j++){buffer[currentBufferLength++]=currentSequence[j];}}lzwState.nextCode=nextCode;lzwState.codeLength=codeLength;lzwState.prevCode=prevCode;lzwState.currentSequenceLength=currentSequenceLength;this.bufferLength=currentBufferLength;}}]);return LZWStream;}(DecodeStream);
;// CONCATENATED MODULE: ./src/core/predictor_stream.js
function predictor_stream_typeof(o){"@babel/helpers - typeof";return predictor_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},predictor_stream_typeof(o);}function predictor_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function predictor_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,predictor_stream_toPropertyKey(descriptor.key),descriptor);}}function predictor_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)predictor_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)predictor_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function predictor_stream_toPropertyKey(arg){var key=predictor_stream_toPrimitive(arg,"string");return predictor_stream_typeof(key)==="symbol"?key:String(key);}function predictor_stream_toPrimitive(input,hint){if(predictor_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(predictor_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function predictor_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)predictor_stream_setPrototypeOf(subClass,superClass);}function predictor_stream_setPrototypeOf(o,p){predictor_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return predictor_stream_setPrototypeOf(o,p);}function predictor_stream_createSuper(Derived){var hasNativeReflectConstruct=predictor_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=predictor_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=predictor_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return predictor_stream_possibleConstructorReturn(this,result);};}function predictor_stream_possibleConstructorReturn(self,call){if(call&&(predictor_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return predictor_stream_assertThisInitialized(self);}function predictor_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function predictor_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function predictor_stream_getPrototypeOf(o){predictor_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return predictor_stream_getPrototypeOf(o);}var PredictorStream=/*#__PURE__*/function(_DecodeStream){predictor_stream_inherits(PredictorStream,_DecodeStream);var _super=predictor_stream_createSuper(PredictorStream);function PredictorStream(str,maybeLength,params){var _this;predictor_stream_classCallCheck(this,PredictorStream);_this=_super.call(this,maybeLength);if(!(params instanceof Dict)){return predictor_stream_possibleConstructorReturn(_this,str);}var predictor=_this.predictor=params.get("Predictor")||1;if(predictor<=1){return predictor_stream_possibleConstructorReturn(_this,str);}if(predictor!==2&&(predictor<10||predictor>15)){throw new FormatError("Unsupported predictor: ".concat(predictor));}_this.readBlock=predictor===2?_this.readBlockTiff:_this.readBlockPng;_this.str=str;_this.dict=str.dict;var colors=_this.colors=params.get("Colors")||1;var bits=_this.bits=params.get("BPC","BitsPerComponent")||8;var columns=_this.columns=params.get("Columns")||1;_this.pixBytes=colors*bits+7>>3;_this.rowBytes=columns*colors*bits+7>>3;return predictor_stream_possibleConstructorReturn(_this,predictor_stream_assertThisInitialized(_this));}predictor_stream_createClass(PredictorStream,[{key:"readBlockTiff",value:function readBlockTiff(){var rowBytes=this.rowBytes;var bufferLength=this.bufferLength;var buffer=this.ensureBuffer(bufferLength+rowBytes);var bits=this.bits;var colors=this.colors;var rawBytes=this.str.getBytes(rowBytes);this.eof=!rawBytes.length;if(this.eof){return;}var inbuf=0,outbuf=0;var inbits=0,outbits=0;var pos=bufferLength;var i;if(bits===1&&colors===1){for(i=0;i<rowBytes;++i){var c=rawBytes[i]^inbuf;c^=c>>1;c^=c>>2;c^=c>>4;inbuf=(c&1)<<7;buffer[pos++]=c;}}else if(bits===8){for(i=0;i<colors;++i){buffer[pos++]=rawBytes[i];}for(;i<rowBytes;++i){buffer[pos]=buffer[pos-colors]+rawBytes[i];pos++;}}else if(bits===16){var bytesPerPixel=colors*2;for(i=0;i<bytesPerPixel;++i){buffer[pos++]=rawBytes[i];}for(;i<rowBytes;i+=2){var sum=((rawBytes[i]&0xff)<<8)+(rawBytes[i+1]&0xff)+((buffer[pos-bytesPerPixel]&0xff)<<8)+(buffer[pos-bytesPerPixel+1]&0xff);buffer[pos++]=sum>>8&0xff;buffer[pos++]=sum&0xff;}}else{var compArray=new Uint8Array(colors+1);var bitMask=(1<<bits)-1;var j=0,k=bufferLength;var columns=this.columns;for(i=0;i<columns;++i){for(var kk=0;kk<colors;++kk){if(inbits<bits){inbuf=inbuf<<8|rawBytes[j++]&0xff;inbits+=8;}compArray[kk]=compArray[kk]+(inbuf>>inbits-bits)&bitMask;inbits-=bits;outbuf=outbuf<<bits|compArray[kk];outbits+=bits;if(outbits>=8){buffer[k++]=outbuf>>outbits-8&0xff;outbits-=8;}}}if(outbits>0){buffer[k++]=(outbuf<<8-outbits)+(inbuf&(1<<8-outbits)-1);}}this.bufferLength+=rowBytes;}},{key:"readBlockPng",value:function readBlockPng(){var rowBytes=this.rowBytes;var pixBytes=this.pixBytes;var predictor=this.str.getByte();var rawBytes=this.str.getBytes(rowBytes);this.eof=!rawBytes.length;if(this.eof){return;}var bufferLength=this.bufferLength;var buffer=this.ensureBuffer(bufferLength+rowBytes);var prevRow=buffer.subarray(bufferLength-rowBytes,bufferLength);if(prevRow.length===0){prevRow=new Uint8Array(rowBytes);}var i,j=bufferLength,up,c;switch(predictor){case 0:for(i=0;i<rowBytes;++i){buffer[j++]=rawBytes[i];}break;case 1:for(i=0;i<pixBytes;++i){buffer[j++]=rawBytes[i];}for(;i<rowBytes;++i){buffer[j]=buffer[j-pixBytes]+rawBytes[i]&0xff;j++;}break;case 2:for(i=0;i<rowBytes;++i){buffer[j++]=prevRow[i]+rawBytes[i]&0xff;}break;case 3:for(i=0;i<pixBytes;++i){buffer[j++]=(prevRow[i]>>1)+rawBytes[i];}for(;i<rowBytes;++i){buffer[j]=(prevRow[i]+buffer[j-pixBytes]>>1)+rawBytes[i]&0xff;j++;}break;case 4:for(i=0;i<pixBytes;++i){up=prevRow[i];c=rawBytes[i];buffer[j++]=up+c;}for(;i<rowBytes;++i){up=prevRow[i];var upLeft=prevRow[i-pixBytes];var left=buffer[j-pixBytes];var p=left+up-upLeft;var pa=p-left;if(pa<0){pa=-pa;}var pb=p-up;if(pb<0){pb=-pb;}var pc=p-upLeft;if(pc<0){pc=-pc;}c=rawBytes[i];if(pa<=pb&&pa<=pc){buffer[j++]=left+c;}else if(pb<=pc){buffer[j++]=up+c;}else{buffer[j++]=upLeft+c;}}break;default:throw new FormatError("Unsupported predictor: ".concat(predictor));}this.bufferLength+=rowBytes;}}]);return PredictorStream;}(DecodeStream);
;// CONCATENATED MODULE: ./src/core/run_length_stream.js
function run_length_stream_typeof(o){"@babel/helpers - typeof";return run_length_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},run_length_stream_typeof(o);}function run_length_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function run_length_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,run_length_stream_toPropertyKey(descriptor.key),descriptor);}}function run_length_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)run_length_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)run_length_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function run_length_stream_toPropertyKey(arg){var key=run_length_stream_toPrimitive(arg,"string");return run_length_stream_typeof(key)==="symbol"?key:String(key);}function run_length_stream_toPrimitive(input,hint){if(run_length_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(run_length_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function run_length_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)run_length_stream_setPrototypeOf(subClass,superClass);}function run_length_stream_setPrototypeOf(o,p){run_length_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return run_length_stream_setPrototypeOf(o,p);}function run_length_stream_createSuper(Derived){var hasNativeReflectConstruct=run_length_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=run_length_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=run_length_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return run_length_stream_possibleConstructorReturn(this,result);};}function run_length_stream_possibleConstructorReturn(self,call){if(call&&(run_length_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return run_length_stream_assertThisInitialized(self);}function run_length_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function run_length_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function run_length_stream_getPrototypeOf(o){run_length_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return run_length_stream_getPrototypeOf(o);}var RunLengthStream=/*#__PURE__*/function(_DecodeStream){run_length_stream_inherits(RunLengthStream,_DecodeStream);var _super=run_length_stream_createSuper(RunLengthStream);function RunLengthStream(str,maybeLength){var _this;run_length_stream_classCallCheck(this,RunLengthStream);_this=_super.call(this,maybeLength);_this.str=str;_this.dict=str.dict;return _this;}run_length_stream_createClass(RunLengthStream,[{key:"readBlock",value:function readBlock(){var repeatHeader=this.str.getBytes(2);if(!repeatHeader||repeatHeader.length<2||repeatHeader[0]===128){this.eof=true;return;}var buffer;var bufferLength=this.bufferLength;var n=repeatHeader[0];if(n<128){buffer=this.ensureBuffer(bufferLength+n+1);buffer[bufferLength++]=repeatHeader[1];if(n>0){var source=this.str.getBytes(n);buffer.set(source,bufferLength);bufferLength+=n;}}else{n=257-n;var b=repeatHeader[1];buffer=this.ensureBuffer(bufferLength+n+1);for(var i=0;i<n;i++){buffer[bufferLength++]=b;}}this.bufferLength=bufferLength;}}]);return RunLengthStream;}(DecodeStream);
;// CONCATENATED MODULE: ./src/core/parser.js
function parser_typeof(o){"@babel/helpers - typeof";return parser_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},parser_typeof(o);}function parser_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function parser_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,parser_toPropertyKey(descriptor.key),descriptor);}}function parser_createClass(Constructor,protoProps,staticProps){if(protoProps)parser_defineProperties(Constructor.prototype,protoProps);if(staticProps)parser_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function parser_toPropertyKey(arg){var key=parser_toPrimitive(arg,"string");return parser_typeof(key)==="symbol"?key:String(key);}function parser_toPrimitive(input,hint){if(parser_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(parser_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var MAX_LENGTH_TO_CACHE=1000;function getInlineImageCacheKey(bytes){var strBuf=[],ii=bytes.length;var i=0;while(i<ii-1){strBuf.push(bytes[i++]<<8|bytes[i++]);}if(i<ii){strBuf.push(bytes[i]);}return ii+"_"+String.fromCharCode.apply(null,strBuf);}var Parser=/*#__PURE__*/function(){function Parser(_ref){var lexer=_ref.lexer,xref=_ref.xref,_ref$allowStreams=_ref.allowStreams,allowStreams=_ref$allowStreams===void 0?false:_ref$allowStreams,_ref$recoveryMode=_ref.recoveryMode,recoveryMode=_ref$recoveryMode===void 0?false:_ref$recoveryMode;parser_classCallCheck(this,Parser);this.lexer=lexer;this.xref=xref;this.allowStreams=allowStreams;this.recoveryMode=recoveryMode;this.imageCache=Object.create(null);this._imageId=0;this.refill();}parser_createClass(Parser,[{key:"refill",value:function refill(){this.buf1=this.lexer.getObj();this.buf2=this.lexer.getObj();}},{key:"shift",value:function shift(){if(this.buf2 instanceof Cmd&&this.buf2.cmd==="ID"){this.buf1=this.buf2;this.buf2=null;}else{this.buf1=this.buf2;this.buf2=this.lexer.getObj();}}},{key:"tryShift",value:function tryShift(){try{this.shift();return true;}catch(e){if(e instanceof MissingDataException){throw e;}return false;}}},{key:"getObj",value:function getObj(){var cipherTransform=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var buf1=this.buf1;this.shift();if(buf1 instanceof Cmd){switch(buf1.cmd){case"BI":return this.makeInlineImage(cipherTransform);case"[":var array=[];while(!isCmd(this.buf1,"]")&&this.buf1!==EOF){array.push(this.getObj(cipherTransform));}if(this.buf1===EOF){if(this.recoveryMode){return array;}throw new ParserEOFException("End of file inside array.");}this.shift();return array;case"<<":var dict=new Dict(this.xref);while(!isCmd(this.buf1,">>")&&this.buf1!==EOF){if(!(this.buf1 instanceof Name)){info("Malformed dictionary: key must be a name object");this.shift();continue;}var key=this.buf1.name;this.shift();if(this.buf1===EOF){break;}dict.set(key,this.getObj(cipherTransform));}if(this.buf1===EOF){if(this.recoveryMode){return dict;}throw new ParserEOFException("End of file inside dictionary.");}if(isCmd(this.buf2,"stream")){return this.allowStreams?this.makeStream(dict,cipherTransform):dict;}this.shift();return dict;default:return buf1;}}if(Number.isInteger(buf1)){if(Number.isInteger(this.buf1)&&isCmd(this.buf2,"R")){var ref=Ref.get(buf1,this.buf1);this.shift();this.shift();return ref;}return buf1;}if(typeof buf1==="string"){if(cipherTransform){return cipherTransform.decryptString(buf1);}return buf1;}return buf1;}},{key:"findDefaultInlineStreamEnd",value:function findDefaultInlineStreamEnd(stream){var E=0x45,I=0x49,SPACE=0x20,LF=0xa,CR=0xd,NUL=0x0;var knownCommands=this.lexer.knownCommands,startPos=stream.pos,n=15;var state=0,ch,maybeEIPos;while((ch=stream.getByte())!==-1){if(state===0){state=ch===E?1:0;}else if(state===1){state=ch===I?2:0;}else{if(ch===SPACE||ch===LF||ch===CR){maybeEIPos=stream.pos;var followingBytes=stream.peekBytes(n);var ii=followingBytes.length;if(ii===0){break;}for(var i=0;i<ii;i++){ch=followingBytes[i];if(ch===NUL&&followingBytes[i+1]!==NUL){continue;}if(ch!==LF&&ch!==CR&&(ch<SPACE||ch>0x7f)){state=0;break;}}if(state!==2){continue;}if(!knownCommands){warn("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");continue;}var tmpLexer=new Lexer(new Stream(followingBytes.slice()),knownCommands);tmpLexer._hexStringWarn=function(){};var numArgs=0;while(true){var nextObj=tmpLexer.getObj();if(nextObj===EOF){state=0;break;}if(nextObj instanceof Cmd){var knownCommand=knownCommands[nextObj.cmd];if(!knownCommand){state=0;break;}else if(knownCommand.variableArgs?numArgs<=knownCommand.numArgs:numArgs===knownCommand.numArgs){break;}numArgs=0;continue;}numArgs++;}if(state===2){break;}}else{state=0;}}}if(ch===-1){warn("findDefaultInlineStreamEnd: "+"Reached the end of the stream without finding a valid EI marker");if(maybeEIPos){warn('... trying to recover by using the last "EI" occurrence.');stream.skip(-(stream.pos-maybeEIPos));}}var endOffset=4;stream.skip(-endOffset);ch=stream.peekByte();stream.skip(endOffset);if(!isWhiteSpace(ch)){endOffset--;}return stream.pos-endOffset-startPos;}},{key:"findDCTDecodeInlineStreamEnd",value:function findDCTDecodeInlineStreamEnd(stream){var startPos=stream.pos;var foundEOI=false,b,markerLength;while((b=stream.getByte())!==-1){if(b!==0xff){continue;}switch(stream.getByte()){case 0x00:break;case 0xff:stream.skip(-1);break;case 0xd9:foundEOI=true;break;case 0xc0:case 0xc1:case 0xc2:case 0xc3:case 0xc5:case 0xc6:case 0xc7:case 0xc9:case 0xca:case 0xcb:case 0xcd:case 0xce:case 0xcf:case 0xc4:case 0xcc:case 0xda:case 0xdb:case 0xdc:case 0xdd:case 0xde:case 0xdf:case 0xe0:case 0xe1:case 0xe2:case 0xe3:case 0xe4:case 0xe5:case 0xe6:case 0xe7:case 0xe8:case 0xe9:case 0xea:case 0xeb:case 0xec:case 0xed:case 0xee:case 0xef:case 0xfe:markerLength=stream.getUint16();if(markerLength>2){stream.skip(markerLength-2);}else{stream.skip(-2);}break;}if(foundEOI){break;}}var length=stream.pos-startPos;if(b===-1){warn("Inline DCTDecode image stream: "+"EOI marker not found, searching for /EI/ instead.");stream.skip(-length);return this.findDefaultInlineStreamEnd(stream);}this.inlineStreamSkipEI(stream);return length;}},{key:"findASCII85DecodeInlineStreamEnd",value:function findASCII85DecodeInlineStreamEnd(stream){var TILDE=0x7e,GT=0x3e;var startPos=stream.pos;var ch;while((ch=stream.getByte())!==-1){if(ch===TILDE){var tildePos=stream.pos;ch=stream.peekByte();while(isWhiteSpace(ch)){stream.skip();ch=stream.peekByte();}if(ch===GT){stream.skip();break;}if(stream.pos>tildePos){var maybeEI=stream.peekBytes(2);if(maybeEI[0]===0x45&&maybeEI[1]===0x49){break;}}}}var length=stream.pos-startPos;if(ch===-1){warn("Inline ASCII85Decode image stream: "+"EOD marker not found, searching for /EI/ instead.");stream.skip(-length);return this.findDefaultInlineStreamEnd(stream);}this.inlineStreamSkipEI(stream);return length;}},{key:"findASCIIHexDecodeInlineStreamEnd",value:function findASCIIHexDecodeInlineStreamEnd(stream){var GT=0x3e;var startPos=stream.pos;var ch;while((ch=stream.getByte())!==-1){if(ch===GT){break;}}var length=stream.pos-startPos;if(ch===-1){warn("Inline ASCIIHexDecode image stream: "+"EOD marker not found, searching for /EI/ instead.");stream.skip(-length);return this.findDefaultInlineStreamEnd(stream);}this.inlineStreamSkipEI(stream);return length;}},{key:"inlineStreamSkipEI",value:function inlineStreamSkipEI(stream){var E=0x45,I=0x49;var state=0,ch;while((ch=stream.getByte())!==-1){if(state===0){state=ch===E?1:0;}else if(state===1){state=ch===I?2:0;}else if(state===2){break;}}}},{key:"makeInlineImage",value:function makeInlineImage(cipherTransform){var lexer=this.lexer;var stream=lexer.stream;var dictMap=Object.create(null);var dictLength;while(!isCmd(this.buf1,"ID")&&this.buf1!==EOF){if(!(this.buf1 instanceof Name)){throw new FormatError("Dictionary key must be a name object");}var key=this.buf1.name;this.shift();if(this.buf1===EOF){break;}dictMap[key]=this.getObj(cipherTransform);}if(lexer.beginInlineImagePos!==-1){dictLength=stream.pos-lexer.beginInlineImagePos;}var filter=this.xref.fetchIfRef(dictMap.F||dictMap.Filter);var filterName;if(filter instanceof Name){filterName=filter.name;}else if(Array.isArray(filter)){var filterZero=this.xref.fetchIfRef(filter[0]);if(filterZero instanceof Name){filterName=filterZero.name;}}var startPos=stream.pos;var length;switch(filterName){case"DCT":case"DCTDecode":length=this.findDCTDecodeInlineStreamEnd(stream);break;case"A85":case"ASCII85Decode":length=this.findASCII85DecodeInlineStreamEnd(stream);break;case"AHx":case"ASCIIHexDecode":length=this.findASCIIHexDecodeInlineStreamEnd(stream);break;default:length=this.findDefaultInlineStreamEnd(stream);}var cacheKey;if(length<MAX_LENGTH_TO_CACHE&&dictLength>0){var initialStreamPos=stream.pos;stream.pos=lexer.beginInlineImagePos;cacheKey=getInlineImageCacheKey(stream.getBytes(dictLength+length));stream.pos=initialStreamPos;var cacheEntry=this.imageCache[cacheKey];if(cacheEntry!==undefined){this.buf2=Cmd.get("EI");this.shift();cacheEntry.reset();return cacheEntry;}}var dict=new Dict(this.xref);for(var _key in dictMap){dict.set(_key,dictMap[_key]);}var imageStream=stream.makeSubStream(startPos,length,dict);if(cipherTransform){imageStream=cipherTransform.createStream(imageStream,length);}imageStream=this.filter(imageStream,dict,length);imageStream.dict=dict;if(cacheKey!==undefined){imageStream.cacheKey="inline_img_".concat(++this._imageId);this.imageCache[cacheKey]=imageStream;}this.buf2=Cmd.get("EI");this.shift();return imageStream;}},{key:"_findStreamLength",value:function _findStreamLength(startPos,signature){var stream=this.lexer.stream;stream.pos=startPos;var SCAN_BLOCK_LENGTH=2048;var signatureLength=signature.length;while(stream.pos<stream.end){var scanBytes=stream.peekBytes(SCAN_BLOCK_LENGTH);var scanLength=scanBytes.length-signatureLength;if(scanLength<=0){break;}var pos=0;while(pos<scanLength){var j=0;while(j<signatureLength&&scanBytes[pos+j]===signature[j]){j++;}if(j>=signatureLength){stream.pos+=pos;return stream.pos-startPos;}pos++;}stream.pos+=scanLength;}return-1;}},{key:"makeStream",value:function makeStream(dict,cipherTransform){var lexer=this.lexer;var stream=lexer.stream;lexer.skipToNextLine();var startPos=stream.pos-1;var length=dict.get("Length");if(!Number.isInteger(length)){info("Bad length \"".concat(length&&length.toString(),"\" in stream."));length=0;}stream.pos=startPos+length;lexer.nextChar();if(this.tryShift()&&isCmd(this.buf2,"endstream")){this.shift();}else{var ENDSTREAM_SIGNATURE=new Uint8Array([0x65,0x6e,0x64,0x73,0x74,0x72,0x65,0x61,0x6d]);var actualLength=this._findStreamLength(startPos,ENDSTREAM_SIGNATURE);if(actualLength<0){var MAX_TRUNCATION=1;for(var i=1;i<=MAX_TRUNCATION;i++){var end=ENDSTREAM_SIGNATURE.length-i;var TRUNCATED_SIGNATURE=ENDSTREAM_SIGNATURE.slice(0,end);var maybeLength=this._findStreamLength(startPos,TRUNCATED_SIGNATURE);if(maybeLength>=0){var lastByte=stream.peekBytes(end+1)[end];if(!isWhiteSpace(lastByte)){break;}info("Found \"".concat(bytesToString(TRUNCATED_SIGNATURE),"\" when ")+"searching for endstream command.");actualLength=maybeLength;break;}}if(actualLength<0){throw new FormatError("Missing endstream command.");}}length=actualLength;lexer.nextChar();this.shift();this.shift();}this.shift();stream=stream.makeSubStream(startPos,length,dict);if(cipherTransform){stream=cipherTransform.createStream(stream,length);}stream=this.filter(stream,dict,length);stream.dict=dict;return stream;}},{key:"filter",value:function filter(stream,dict,length){var filter=dict.get("F","Filter");var params=dict.get("DP","DecodeParms");if(filter instanceof Name){if(Array.isArray(params)){warn("/DecodeParms should not be an Array, when /Filter is a Name.");}return this.makeFilter(stream,filter.name,length,params);}var maybeLength=length;if(Array.isArray(filter)){var filterArray=filter;var paramsArray=params;for(var i=0,ii=filterArray.length;i<ii;++i){filter=this.xref.fetchIfRef(filterArray[i]);if(!(filter instanceof Name)){throw new FormatError("Bad filter name \"".concat(filter,"\""));}params=null;if(Array.isArray(paramsArray)&&i in paramsArray){params=this.xref.fetchIfRef(paramsArray[i]);}stream=this.makeFilter(stream,filter.name,maybeLength,params);maybeLength=null;}}return stream;}},{key:"makeFilter",value:function makeFilter(stream,name,maybeLength,params){if(maybeLength===0){warn("Empty \"".concat(name,"\" stream."));return new NullStream();}try{switch(name){case"Fl":case"FlateDecode":if(params){return new PredictorStream(new FlateStream(stream,maybeLength),maybeLength,params);}return new FlateStream(stream,maybeLength);case"LZW":case"LZWDecode":var earlyChange=1;if(params){if(params.has("EarlyChange")){earlyChange=params.get("EarlyChange");}return new PredictorStream(new LZWStream(stream,maybeLength,earlyChange),maybeLength,params);}return new LZWStream(stream,maybeLength,earlyChange);case"DCT":case"DCTDecode":return new JpegStream(stream,maybeLength,params);case"JPX":case"JPXDecode":return new JpxStream(stream,maybeLength,params);case"A85":case"ASCII85Decode":return new Ascii85Stream(stream,maybeLength);case"AHx":case"ASCIIHexDecode":return new AsciiHexStream(stream,maybeLength);case"CCF":case"CCITTFaxDecode":return new CCITTFaxStream(stream,maybeLength,params);case"RL":case"RunLengthDecode":return new RunLengthStream(stream,maybeLength);case"JBIG2Decode":return new Jbig2Stream(stream,maybeLength,params);}warn("Filter \"".concat(name,"\" is not supported."));return stream;}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Invalid stream: \"".concat(ex,"\""));return new NullStream();}}}]);return Parser;}();var specialChars=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function toHexDigit(ch){if(ch>=0x30&&ch<=0x39){return ch&0x0f;}if(ch>=0x41&&ch<=0x46||ch>=0x61&&ch<=0x66){return(ch&0x0f)+9;}return-1;}var Lexer=/*#__PURE__*/function(){function Lexer(stream){var knownCommands=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;parser_classCallCheck(this,Lexer);this.stream=stream;this.nextChar();this.strBuf=[];this.knownCommands=knownCommands;this._hexStringNumWarn=0;this.beginInlineImagePos=-1;}parser_createClass(Lexer,[{key:"nextChar",value:function nextChar(){return this.currentChar=this.stream.getByte();}},{key:"peekChar",value:function peekChar(){return this.stream.peekByte();}},{key:"getNumber",value:function getNumber(){var ch=this.currentChar;var eNotation=false;var divideBy=0;var sign=1;if(ch===0x2d){sign=-1;ch=this.nextChar();if(ch===0x2d){ch=this.nextChar();}}else if(ch===0x2b){ch=this.nextChar();}if(ch===0x0a||ch===0x0d){do{ch=this.nextChar();}while(ch===0x0a||ch===0x0d);}if(ch===0x2e){divideBy=10;ch=this.nextChar();}if(ch<0x30||ch>0x39){var msg="Invalid number: ".concat(String.fromCharCode(ch)," (charCode ").concat(ch,")");if(isWhiteSpace(ch)||ch===-1){info("Lexer.getNumber - \"".concat(msg,"\"."));return 0;}throw new FormatError(msg);}var baseValue=ch-0x30;var powerValue=0;var powerValueSign=1;while((ch=this.nextChar())>=0){if(ch>=0x30&&ch<=0x39){var currentDigit=ch-0x30;if(eNotation){powerValue=powerValue*10+currentDigit;}else{if(divideBy!==0){divideBy*=10;}baseValue=baseValue*10+currentDigit;}}else if(ch===0x2e){if(divideBy===0){divideBy=1;}else{break;}}else if(ch===0x2d){warn("Badly formatted number: minus sign in the middle");}else if(ch===0x45||ch===0x65){ch=this.peekChar();if(ch===0x2b||ch===0x2d){powerValueSign=ch===0x2d?-1:1;this.nextChar();}else if(ch<0x30||ch>0x39){break;}eNotation=true;}else{break;}}if(divideBy!==0){baseValue/=divideBy;}if(eNotation){baseValue*=Math.pow(10,powerValueSign*powerValue);}return sign*baseValue;}},{key:"getString",value:function getString(){var numParen=1;var done=false;var strBuf=this.strBuf;strBuf.length=0;var ch=this.nextChar();while(true){var charBuffered=false;switch(ch|0){case-1:warn("Unterminated string");done=true;break;case 0x28:++numParen;strBuf.push("(");break;case 0x29:if(--numParen===0){this.nextChar();done=true;}else{strBuf.push(")");}break;case 0x5c:ch=this.nextChar();switch(ch){case-1:warn("Unterminated string");done=true;break;case 0x6e:strBuf.push("\n");break;case 0x72:strBuf.push("\r");break;case 0x74:strBuf.push("\t");break;case 0x62:strBuf.push("\b");break;case 0x66:strBuf.push("\f");break;case 0x5c:case 0x28:case 0x29:strBuf.push(String.fromCharCode(ch));break;case 0x30:case 0x31:case 0x32:case 0x33:case 0x34:case 0x35:case 0x36:case 0x37:var x=ch&0x0f;ch=this.nextChar();charBuffered=true;if(ch>=0x30&&ch<=0x37){x=(x<<3)+(ch&0x0f);ch=this.nextChar();if(ch>=0x30&&ch<=0x37){charBuffered=false;x=(x<<3)+(ch&0x0f);}}strBuf.push(String.fromCharCode(x));break;case 0x0d:if(this.peekChar()===0x0a){this.nextChar();}break;case 0x0a:break;default:strBuf.push(String.fromCharCode(ch));break;}break;default:strBuf.push(String.fromCharCode(ch));break;}if(done){break;}if(!charBuffered){ch=this.nextChar();}}return strBuf.join("");}},{key:"getName",value:function getName(){var ch,previousCh;var strBuf=this.strBuf;strBuf.length=0;while((ch=this.nextChar())>=0&&!specialChars[ch]){if(ch===0x23){ch=this.nextChar();if(specialChars[ch]){warn("Lexer_getName: "+"NUMBER SIGN (#) should be followed by a hexadecimal number.");strBuf.push("#");break;}var x=toHexDigit(ch);if(x!==-1){previousCh=ch;ch=this.nextChar();var x2=toHexDigit(ch);if(x2===-1){warn("Lexer_getName: Illegal digit (".concat(String.fromCharCode(ch),") ")+"in hexadecimal number.");strBuf.push("#",String.fromCharCode(previousCh));if(specialChars[ch]){break;}strBuf.push(String.fromCharCode(ch));continue;}strBuf.push(String.fromCharCode(x<<4|x2));}else{strBuf.push("#",String.fromCharCode(ch));}}else{strBuf.push(String.fromCharCode(ch));}}if(strBuf.length>127){warn("Name token is longer than allowed by the spec: ".concat(strBuf.length));}return Name.get(strBuf.join(""));}},{key:"_hexStringWarn",value:function _hexStringWarn(ch){var MAX_HEX_STRING_NUM_WARN=5;if(this._hexStringNumWarn++===MAX_HEX_STRING_NUM_WARN){warn("getHexString - ignoring additional invalid characters.");return;}if(this._hexStringNumWarn>MAX_HEX_STRING_NUM_WARN){return;}warn("getHexString - ignoring invalid character: ".concat(ch));}},{key:"getHexString",value:function getHexString(){var strBuf=this.strBuf;strBuf.length=0;var ch=this.currentChar;var isFirstHex=true;var firstDigit,secondDigit;this._hexStringNumWarn=0;while(true){if(ch<0){warn("Unterminated hex string");break;}else if(ch===0x3e){this.nextChar();break;}else if(specialChars[ch]===1){ch=this.nextChar();continue;}else{if(isFirstHex){firstDigit=toHexDigit(ch);if(firstDigit===-1){this._hexStringWarn(ch);ch=this.nextChar();continue;}}else{secondDigit=toHexDigit(ch);if(secondDigit===-1){this._hexStringWarn(ch);ch=this.nextChar();continue;}strBuf.push(String.fromCharCode(firstDigit<<4|secondDigit));}isFirstHex=!isFirstHex;ch=this.nextChar();}}return strBuf.join("");}},{key:"getObj",value:function getObj(){var comment=false;var ch=this.currentChar;while(true){if(ch<0){return EOF;}if(comment){if(ch===0x0a||ch===0x0d){comment=false;}}else if(ch===0x25){comment=true;}else if(specialChars[ch]!==1){break;}ch=this.nextChar();}switch(ch|0){case 0x30:case 0x31:case 0x32:case 0x33:case 0x34:case 0x35:case 0x36:case 0x37:case 0x38:case 0x39:case 0x2b:case 0x2d:case 0x2e:return this.getNumber();case 0x28:return this.getString();case 0x2f:return this.getName();case 0x5b:this.nextChar();return Cmd.get("[");case 0x5d:this.nextChar();return Cmd.get("]");case 0x3c:ch=this.nextChar();if(ch===0x3c){this.nextChar();return Cmd.get("<<");}return this.getHexString();case 0x3e:ch=this.nextChar();if(ch===0x3e){this.nextChar();return Cmd.get(">>");}return Cmd.get(">");case 0x7b:this.nextChar();return Cmd.get("{");case 0x7d:this.nextChar();return Cmd.get("}");case 0x29:this.nextChar();throw new FormatError("Illegal character: ".concat(ch));}var str=String.fromCharCode(ch);if(ch<0x20||ch>0x7f){var nextCh=this.peekChar();if(nextCh>=0x20&&nextCh<=0x7f){this.nextChar();return Cmd.get(str);}}var knownCommands=this.knownCommands;var knownCommandFound=(knownCommands===null||knownCommands===void 0?void 0:knownCommands[str])!==undefined;while((ch=this.nextChar())>=0&&!specialChars[ch]){var possibleCommand=str+String.fromCharCode(ch);if(knownCommandFound&&knownCommands[possibleCommand]===undefined){break;}if(str.length===128){throw new FormatError("Command token too long: ".concat(str.length));}str=possibleCommand;knownCommandFound=(knownCommands===null||knownCommands===void 0?void 0:knownCommands[str])!==undefined;}if(str==="true"){return true;}if(str==="false"){return false;}if(str==="null"){return null;}if(str==="BI"){this.beginInlineImagePos=this.stream.pos;}return Cmd.get(str);}},{key:"skipToNextLine",value:function skipToNextLine(){var ch=this.currentChar;while(ch>=0){if(ch===0x0d){ch=this.nextChar();if(ch===0x0a){this.nextChar();}break;}else if(ch===0x0a){this.nextChar();break;}ch=this.nextChar();}}}]);return Lexer;}();var Linearization=/*#__PURE__*/function(){function Linearization(){parser_classCallCheck(this,Linearization);}parser_createClass(Linearization,null,[{key:"create",value:function create(stream){function getInt(linDict,name){var allowZeroValue=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var obj=linDict.get(name);if(Number.isInteger(obj)&&(allowZeroValue?obj>=0:obj>0)){return obj;}throw new Error("The \"".concat(name,"\" parameter in the linearization ")+"dictionary is invalid.");}function getHints(linDict){var hints=linDict.get("H");var hintsLength;if(Array.isArray(hints)&&((hintsLength=hints.length)===2||hintsLength===4)){for(var index=0;index<hintsLength;index++){var hint=hints[index];if(!(Number.isInteger(hint)&&hint>0)){throw new Error("Hint (".concat(index,") in the linearization dictionary is invalid."));}}return hints;}throw new Error("Hint array in the linearization dictionary is invalid.");}var parser=new Parser({lexer:new Lexer(stream),xref:null});var obj1=parser.getObj();var obj2=parser.getObj();var obj3=parser.getObj();var linDict=parser.getObj();var obj,length;if(!(Number.isInteger(obj1)&&Number.isInteger(obj2)&&isCmd(obj3,"obj")&&linDict instanceof Dict&&typeof(obj=linDict.get("Linearized"))==="number"&&obj>0)){return null;}else if((length=getInt(linDict,"L"))!==stream.length){throw new Error('The "L" parameter in the linearization dictionary '+"does not equal the stream length.");}return{length:length,hints:getHints(linDict),objectNumberFirst:getInt(linDict,"O"),endFirst:getInt(linDict,"E"),numPages:getInt(linDict,"N"),mainXRefEntriesOffset:getInt(linDict,"T"),pageFirst:linDict.has("P")?getInt(linDict,"P",true):0};}}]);return Linearization;}();
;// CONCATENATED MODULE: ./src/core/cmap.js
function cmap_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */cmap_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==cmap_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(cmap_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function cmap_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function cmap_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){cmap_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){cmap_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function cmap_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)cmap_setPrototypeOf(subClass,superClass);}function cmap_setPrototypeOf(o,p){cmap_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return cmap_setPrototypeOf(o,p);}function cmap_createSuper(Derived){var hasNativeReflectConstruct=cmap_isNativeReflectConstruct();return function _createSuperInternal(){var Super=cmap_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=cmap_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return cmap_possibleConstructorReturn(this,result);};}function cmap_possibleConstructorReturn(self,call){if(call&&(cmap_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return cmap_assertThisInitialized(self);}function cmap_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function cmap_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function cmap_getPrototypeOf(o){cmap_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return cmap_getPrototypeOf(o);}function cmap_typeof(o){"@babel/helpers - typeof";return cmap_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},cmap_typeof(o);}function cmap_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function cmap_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,cmap_toPropertyKey(descriptor.key),descriptor);}}function cmap_createClass(Constructor,protoProps,staticProps){if(protoProps)cmap_defineProperties(Constructor.prototype,protoProps);if(staticProps)cmap_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function cmap_toPropertyKey(arg){var key=cmap_toPrimitive(arg,"string");return cmap_typeof(key)==="symbol"?key:String(key);}function cmap_toPrimitive(input,hint){if(cmap_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(cmap_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var BUILT_IN_CMAPS=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"];var MAX_MAP_RANGE=Math.pow(2,24)-1;var CMap=/*#__PURE__*/function(){function CMap(){var builtInCMap=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;cmap_classCallCheck(this,CMap);this.codespaceRanges=[[],[],[],[]];this.numCodespaceRanges=0;this._map=[];this.name="";this.vertical=false;this.useCMap=null;this.builtInCMap=builtInCMap;}cmap_createClass(CMap,[{key:"addCodespaceRange",value:function addCodespaceRange(n,low,high){this.codespaceRanges[n-1].push(low,high);this.numCodespaceRanges++;}},{key:"mapCidRange",value:function mapCidRange(low,high,dstLow){if(high-low>MAX_MAP_RANGE){throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");}while(low<=high){this._map[low++]=dstLow++;}}},{key:"mapBfRange",value:function mapBfRange(low,high,dstLow){if(high-low>MAX_MAP_RANGE){throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");}var lastByte=dstLow.length-1;while(low<=high){this._map[low++]=dstLow;var nextCharCode=dstLow.charCodeAt(lastByte)+1;if(nextCharCode>0xff){dstLow=dstLow.substring(0,lastByte-1)+String.fromCharCode(dstLow.charCodeAt(lastByte-1)+1)+"\x00";continue;}dstLow=dstLow.substring(0,lastByte)+String.fromCharCode(nextCharCode);}}},{key:"mapBfRangeToArray",value:function mapBfRangeToArray(low,high,array){if(high-low>MAX_MAP_RANGE){throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");}var ii=array.length;var i=0;while(low<=high&&i<ii){this._map[low]=array[i++];++low;}}},{key:"mapOne",value:function mapOne(src,dst){this._map[src]=dst;}},{key:"lookup",value:function lookup(code){return this._map[code];}},{key:"contains",value:function contains(code){return this._map[code]!==undefined;}},{key:"forEach",value:function forEach(callback){var map=this._map;var length=map.length;if(length<=0x10000){for(var i=0;i<length;i++){if(map[i]!==undefined){callback(i,map[i]);}}}else{for(var _i in map){callback(_i,map[_i]);}}}},{key:"charCodeOf",value:function charCodeOf(value){var map=this._map;if(map.length<=0x10000){return map.indexOf(value);}for(var charCode in map){if(map[charCode]===value){return charCode|0;}}return-1;}},{key:"getMap",value:function getMap(){return this._map;}},{key:"readCharCode",value:function readCharCode(str,offset,out){var c=0;var codespaceRanges=this.codespaceRanges;for(var n=0,nn=codespaceRanges.length;n<nn;n++){c=(c<<8|str.charCodeAt(offset+n))>>>0;var codespaceRange=codespaceRanges[n];for(var k=0,kk=codespaceRange.length;k<kk;){var low=codespaceRange[k++];var high=codespaceRange[k++];if(c>=low&&c<=high){out.charcode=c;out.length=n+1;return;}}}out.charcode=0;out.length=1;}},{key:"getCharCodeLength",value:function getCharCodeLength(charCode){var codespaceRanges=this.codespaceRanges;for(var n=0,nn=codespaceRanges.length;n<nn;n++){var codespaceRange=codespaceRanges[n];for(var k=0,kk=codespaceRange.length;k<kk;){var low=codespaceRange[k++];var high=codespaceRange[k++];if(charCode>=low&&charCode<=high){return n+1;}}}return 1;}},{key:"length",get:function get(){return this._map.length;}},{key:"isIdentityCMap",get:function get(){if(!(this.name==="Identity-H"||this.name==="Identity-V")){return false;}if(this._map.length!==0x10000){return false;}for(var i=0;i<0x10000;i++){if(this._map[i]!==i){return false;}}return true;}}]);return CMap;}();var IdentityCMap=/*#__PURE__*/function(_CMap){cmap_inherits(IdentityCMap,_CMap);var _super=cmap_createSuper(IdentityCMap);function IdentityCMap(vertical,n){var _this;cmap_classCallCheck(this,IdentityCMap);_this=_super.call(this);_this.vertical=vertical;_this.addCodespaceRange(n,0,0xffff);return _this;}cmap_createClass(IdentityCMap,[{key:"mapCidRange",value:function mapCidRange(low,high,dstLow){unreachable("should not call mapCidRange");}},{key:"mapBfRange",value:function mapBfRange(low,high,dstLow){unreachable("should not call mapBfRange");}},{key:"mapBfRangeToArray",value:function mapBfRangeToArray(low,high,array){unreachable("should not call mapBfRangeToArray");}},{key:"mapOne",value:function mapOne(src,dst){unreachable("should not call mapCidOne");}},{key:"lookup",value:function lookup(code){return Number.isInteger(code)&&code<=0xffff?code:undefined;}},{key:"contains",value:function contains(code){return Number.isInteger(code)&&code<=0xffff;}},{key:"forEach",value:function forEach(callback){for(var i=0;i<=0xffff;i++){callback(i,i);}}},{key:"charCodeOf",value:function charCodeOf(value){return Number.isInteger(value)&&value<=0xffff?value:-1;}},{key:"getMap",value:function getMap(){var map=new Array(0x10000);for(var i=0;i<=0xffff;i++){map[i]=i;}return map;}},{key:"length",get:function get(){return 0x10000;}},{key:"isIdentityCMap",get:function get(){unreachable("should not access .isIdentityCMap");}}]);return IdentityCMap;}(CMap);function strToInt(str){var a=0;for(var i=0;i<str.length;i++){a=a<<8|str.charCodeAt(i);}return a>>>0;}function expectString(obj){if(typeof obj!=="string"){throw new FormatError("Malformed CMap: expected string.");}}function expectInt(obj){if(!Number.isInteger(obj)){throw new FormatError("Malformed CMap: expected int.");}}function parseBfChar(cMap,lexer){while(true){var obj=lexer.getObj();if(obj===EOF){break;}if(isCmd(obj,"endbfchar")){return;}expectString(obj);var src=strToInt(obj);obj=lexer.getObj();expectString(obj);var dst=obj;cMap.mapOne(src,dst);}}function parseBfRange(cMap,lexer){while(true){var obj=lexer.getObj();if(obj===EOF){break;}if(isCmd(obj,"endbfrange")){return;}expectString(obj);var low=strToInt(obj);obj=lexer.getObj();expectString(obj);var high=strToInt(obj);obj=lexer.getObj();if(Number.isInteger(obj)||typeof obj==="string"){var dstLow=Number.isInteger(obj)?String.fromCharCode(obj):obj;cMap.mapBfRange(low,high,dstLow);}else if(isCmd(obj,"[")){obj=lexer.getObj();var array=[];while(!isCmd(obj,"]")&&obj!==EOF){array.push(obj);obj=lexer.getObj();}cMap.mapBfRangeToArray(low,high,array);}else{break;}}throw new FormatError("Invalid bf range.");}function parseCidChar(cMap,lexer){while(true){var obj=lexer.getObj();if(obj===EOF){break;}if(isCmd(obj,"endcidchar")){return;}expectString(obj);var src=strToInt(obj);obj=lexer.getObj();expectInt(obj);var dst=obj;cMap.mapOne(src,dst);}}function parseCidRange(cMap,lexer){while(true){var obj=lexer.getObj();if(obj===EOF){break;}if(isCmd(obj,"endcidrange")){return;}expectString(obj);var low=strToInt(obj);obj=lexer.getObj();expectString(obj);var high=strToInt(obj);obj=lexer.getObj();expectInt(obj);var dstLow=obj;cMap.mapCidRange(low,high,dstLow);}}function parseCodespaceRange(cMap,lexer){while(true){var obj=lexer.getObj();if(obj===EOF){break;}if(isCmd(obj,"endcodespacerange")){return;}if(typeof obj!=="string"){break;}var low=strToInt(obj);obj=lexer.getObj();if(typeof obj!=="string"){break;}var high=strToInt(obj);cMap.addCodespaceRange(obj.length,low,high);}throw new FormatError("Invalid codespace range.");}function parseWMode(cMap,lexer){var obj=lexer.getObj();if(Number.isInteger(obj)){cMap.vertical=!!obj;}}function parseCMapName(cMap,lexer){var obj=lexer.getObj();if(obj instanceof Name){cMap.name=obj.name;}}function parseCMap(_x,_x2,_x3,_x4){return _parseCMap.apply(this,arguments);}function _parseCMap(){_parseCMap=cmap_asyncToGenerator(/*#__PURE__*/cmap_regeneratorRuntime().mark(function _callee2(cMap,lexer,fetchBuiltInCMap,useCMap){var previous,embeddedUseCMap,obj;return cmap_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(false){}_context2.prev=1;obj=lexer.getObj();if(!(obj===EOF)){_context2.next=7;break;}return _context2.abrupt("break",39);case 7:if(!(obj instanceof Name)){_context2.next=12;break;}if(obj.name==="WMode"){parseWMode(cMap,lexer);}else if(obj.name==="CMapName"){parseCMapName(cMap,lexer);}previous=obj;_context2.next=29;break;case 12:if(!(obj instanceof Cmd)){_context2.next=29;break;}_context2.t0=obj.cmd;_context2.next=_context2.t0==="endcmap"?16:_context2.t0==="usecmap"?17:_context2.t0==="begincodespacerange"?19:_context2.t0==="beginbfchar"?21:_context2.t0==="begincidchar"?23:_context2.t0==="beginbfrange"?25:_context2.t0==="begincidrange"?27:29;break;case 16:return _context2.abrupt("break",39);case 17:if(previous instanceof Name){embeddedUseCMap=previous.name;}return _context2.abrupt("break",29);case 19:parseCodespaceRange(cMap,lexer);return _context2.abrupt("break",29);case 21:parseBfChar(cMap,lexer);return _context2.abrupt("break",29);case 23:parseCidChar(cMap,lexer);return _context2.abrupt("break",29);case 25:parseBfRange(cMap,lexer);return _context2.abrupt("break",29);case 27:parseCidRange(cMap,lexer);return _context2.abrupt("break",29);case 29:_context2.next=37;break;case 31:_context2.prev=31;_context2.t1=_context2["catch"](1);if(!(_context2.t1 instanceof MissingDataException)){_context2.next=35;break;}throw _context2.t1;case 35:warn("Invalid cMap data: "+_context2.t1);return _context2.abrupt("continue",0);case 37:_context2.next=0;break;case 39:if(!useCMap&&embeddedUseCMap){useCMap=embeddedUseCMap;}if(!useCMap){_context2.next=42;break;}return _context2.abrupt("return",extendCMap(cMap,fetchBuiltInCMap,useCMap));case 42:return _context2.abrupt("return",cMap);case 43:case"end":return _context2.stop();}},_callee2,null,[[1,31]]);}));return _parseCMap.apply(this,arguments);}function extendCMap(_x5,_x6,_x7){return _extendCMap.apply(this,arguments);}function _extendCMap(){_extendCMap=cmap_asyncToGenerator(/*#__PURE__*/cmap_regeneratorRuntime().mark(function _callee3(cMap,fetchBuiltInCMap,useCMap){var useCodespaceRanges,i;return cmap_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return createBuiltInCMap(useCMap,fetchBuiltInCMap);case 2:cMap.useCMap=_context3.sent;if(cMap.numCodespaceRanges===0){useCodespaceRanges=cMap.useCMap.codespaceRanges;for(i=0;i<useCodespaceRanges.length;i++){cMap.codespaceRanges[i]=useCodespaceRanges[i].slice();}cMap.numCodespaceRanges=cMap.useCMap.numCodespaceRanges;}cMap.useCMap.forEach(function(key,value){if(!cMap.contains(key)){cMap.mapOne(key,cMap.useCMap.lookup(key));}});return _context3.abrupt("return",cMap);case 6:case"end":return _context3.stop();}},_callee3);}));return _extendCMap.apply(this,arguments);}function createBuiltInCMap(_x8,_x9){return _createBuiltInCMap.apply(this,arguments);}function _createBuiltInCMap(){_createBuiltInCMap=cmap_asyncToGenerator(/*#__PURE__*/cmap_regeneratorRuntime().mark(function _callee4(name,fetchBuiltInCMap){var _yield$fetchBuiltInCM,cMapData,compressionType,cMap,lexer;return cmap_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!(name==="Identity-H")){_context4.next=4;break;}return _context4.abrupt("return",new IdentityCMap(false,2));case 4:if(!(name==="Identity-V")){_context4.next=6;break;}return _context4.abrupt("return",new IdentityCMap(true,2));case 6:if(BUILT_IN_CMAPS.includes(name)){_context4.next=8;break;}throw new Error("Unknown CMap name: "+name);case 8:if(fetchBuiltInCMap){_context4.next=10;break;}throw new Error("Built-in CMap parameters are not provided.");case 10:_context4.next=12;return fetchBuiltInCMap(name);case 12:_yield$fetchBuiltInCM=_context4.sent;cMapData=_yield$fetchBuiltInCM.cMapData;compressionType=_yield$fetchBuiltInCM.compressionType;cMap=new CMap(true);if(!(compressionType===CMapCompressionType.BINARY)){_context4.next=18;break;}return _context4.abrupt("return",new BinaryCMapReader().process(cMapData,cMap,function(useCMap){return extendCMap(cMap,fetchBuiltInCMap,useCMap);}));case 18:if(!(compressionType===CMapCompressionType.NONE)){_context4.next=21;break;}lexer=new Lexer(new Stream(cMapData));return _context4.abrupt("return",parseCMap(cMap,lexer,fetchBuiltInCMap,null));case 21:throw new Error("Invalid CMap \"compressionType\" value: ".concat(compressionType));case 22:case"end":return _context4.stop();}},_callee4);}));return _createBuiltInCMap.apply(this,arguments);}var CMapFactory=/*#__PURE__*/function(){function CMapFactory(){cmap_classCallCheck(this,CMapFactory);}cmap_createClass(CMapFactory,null,[{key:"create",value:function(){var _create=cmap_asyncToGenerator(/*#__PURE__*/cmap_regeneratorRuntime().mark(function _callee(_ref){var encoding,fetchBuiltInCMap,useCMap,parsedCMap;return cmap_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:encoding=_ref.encoding,fetchBuiltInCMap=_ref.fetchBuiltInCMap,useCMap=_ref.useCMap;if(!(encoding instanceof Name)){_context.next=5;break;}return _context.abrupt("return",createBuiltInCMap(encoding.name,fetchBuiltInCMap));case 5:if(!(encoding instanceof BaseStream)){_context.next=12;break;}_context.next=8;return parseCMap(new CMap(),new Lexer(encoding),fetchBuiltInCMap,useCMap);case 8:parsedCMap=_context.sent;if(!parsedCMap.isIdentityCMap){_context.next=11;break;}return _context.abrupt("return",createBuiltInCMap(parsedCMap.name,fetchBuiltInCMap));case 11:return _context.abrupt("return",parsedCMap);case 12:throw new Error("Encoding required.");case 13:case"end":return _context.stop();}},_callee);}));function create(_x10){return _create.apply(this,arguments);}return create;}()}]);return CMapFactory;}();
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.to-array.js
var esnext_iterator_to_array = __webpack_require__(6771);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.copy-within.js
var es_array_copy_within = __webpack_require__(7078);
;// CONCATENATED MODULE: ./src/core/charsets.js
var ISOAdobeCharset=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"];var ExpertCharset=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];var ExpertSubsetCharset=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"];
;// CONCATENATED MODULE: ./src/core/encodings.js
var ExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];var MacExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""];var MacRomanEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];var StandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];var WinAnsiEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];var SymbolSetEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];var ZapfDingbatsEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];function getEncoding(encodingName){switch(encodingName){case"WinAnsiEncoding":return WinAnsiEncoding;case"StandardEncoding":return StandardEncoding;case"MacRomanEncoding":return MacRomanEncoding;case"SymbolSetEncoding":return SymbolSetEncoding;case"ZapfDingbatsEncoding":return ZapfDingbatsEncoding;case"ExpertEncoding":return ExpertEncoding;case"MacExpertEncoding":return MacExpertEncoding;default:return null;}}
;// CONCATENATED MODULE: ./src/core/cff_parser.js
function cff_parser_toConsumableArray(arr){return cff_parser_arrayWithoutHoles(arr)||cff_parser_iterableToArray(arr)||cff_parser_unsupportedIterableToArray(arr)||cff_parser_nonIterableSpread();}function cff_parser_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function cff_parser_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function cff_parser_arrayWithoutHoles(arr){if(Array.isArray(arr))return cff_parser_arrayLikeToArray(arr);}function cff_parser_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)cff_parser_setPrototypeOf(subClass,superClass);}function cff_parser_setPrototypeOf(o,p){cff_parser_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return cff_parser_setPrototypeOf(o,p);}function cff_parser_createSuper(Derived){var hasNativeReflectConstruct=cff_parser_isNativeReflectConstruct();return function _createSuperInternal(){var Super=cff_parser_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=cff_parser_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return cff_parser_possibleConstructorReturn(this,result);};}function cff_parser_possibleConstructorReturn(self,call){if(call&&(cff_parser_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return cff_parser_assertThisInitialized(self);}function cff_parser_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function cff_parser_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function cff_parser_getPrototypeOf(o){cff_parser_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return cff_parser_getPrototypeOf(o);}function cff_parser_typeof(o){"@babel/helpers - typeof";return cff_parser_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},cff_parser_typeof(o);}function cff_parser_slicedToArray(arr,i){return cff_parser_arrayWithHoles(arr)||cff_parser_iterableToArrayLimit(arr,i)||cff_parser_unsupportedIterableToArray(arr,i)||cff_parser_nonIterableRest();}function cff_parser_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function cff_parser_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function cff_parser_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function cff_parser_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=cff_parser_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function cff_parser_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return cff_parser_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cff_parser_arrayLikeToArray(o,minLen);}function cff_parser_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function cff_parser_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function cff_parser_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,cff_parser_toPropertyKey(descriptor.key),descriptor);}}function cff_parser_createClass(Constructor,protoProps,staticProps){if(protoProps)cff_parser_defineProperties(Constructor.prototype,protoProps);if(staticProps)cff_parser_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function cff_parser_toPropertyKey(arg){var key=cff_parser_toPrimitive(arg,"string");return cff_parser_typeof(key)==="symbol"?key:String(key);}function cff_parser_toPrimitive(input,hint){if(cff_parser_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(cff_parser_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var MAX_SUBR_NESTING=10;var CFFStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];var NUM_STANDARD_CFF_STRINGS=391;var CharstringValidationData=[null,{id:"hstem",min:2,stackClearing:true,stem:true},null,{id:"vstem",min:2,stackClearing:true,stem:true},{id:"vmoveto",min:1,stackClearing:true},{id:"rlineto",min:2,resetStack:true},{id:"hlineto",min:1,resetStack:true},{id:"vlineto",min:1,resetStack:true},{id:"rrcurveto",min:6,resetStack:true},null,{id:"callsubr",min:1,undefStack:true},{id:"return",min:0,undefStack:true},null,null,{id:"endchar",min:0,stackClearing:true},null,null,null,{id:"hstemhm",min:2,stackClearing:true,stem:true},{id:"hintmask",min:0,stackClearing:true},{id:"cntrmask",min:0,stackClearing:true},{id:"rmoveto",min:2,stackClearing:true},{id:"hmoveto",min:1,stackClearing:true},{id:"vstemhm",min:2,stackClearing:true,stem:true},{id:"rcurveline",min:8,resetStack:true},{id:"rlinecurve",min:8,resetStack:true},{id:"vvcurveto",min:4,resetStack:true},{id:"hhcurveto",min:4,resetStack:true},null,{id:"callgsubr",min:1,undefStack:true},{id:"vhcurveto",min:4,resetStack:true},{id:"hvcurveto",min:4,resetStack:true}];var CharstringValidationData12=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn:function stackFn(stack,index){stack[index-2]=stack[index-2]+stack[index-1];}},{id:"sub",min:2,stackDelta:-1,stackFn:function stackFn(stack,index){stack[index-2]=stack[index-2]-stack[index-1];}},{id:"div",min:2,stackDelta:-1,stackFn:function stackFn(stack,index){stack[index-2]=stack[index-2]/stack[index-1];}},null,{id:"neg",min:1,stackDelta:0,stackFn:function stackFn(stack,index){stack[index-1]=-stack[index-1];}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn:function stackFn(stack,index){stack[index-2]=stack[index-2]*stack[index-1];}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:true},{id:"flex",min:13,resetStack:true},{id:"hflex1",min:9,resetStack:true},{id:"flex1",min:11,resetStack:true}];var CFFParser=/*#__PURE__*/function(){function CFFParser(file,properties,seacAnalysisEnabled){cff_parser_classCallCheck(this,CFFParser);this.bytes=file.getBytes();this.properties=properties;this.seacAnalysisEnabled=!!seacAnalysisEnabled;}cff_parser_createClass(CFFParser,[{key:"parse",value:function parse(){var properties=this.properties;var cff=new CFF();this.cff=cff;var header=this.parseHeader();var nameIndex=this.parseIndex(header.endPos);var topDictIndex=this.parseIndex(nameIndex.endPos);var stringIndex=this.parseIndex(topDictIndex.endPos);var globalSubrIndex=this.parseIndex(stringIndex.endPos);var topDictParsed=this.parseDict(topDictIndex.obj.get(0));var topDict=this.createDict(CFFTopDict,topDictParsed,cff.strings);cff.header=header.obj;cff.names=this.parseNameIndex(nameIndex.obj);cff.strings=this.parseStringIndex(stringIndex.obj);cff.topDict=topDict;cff.globalSubrIndex=globalSubrIndex.obj;this.parsePrivateDict(cff.topDict);cff.isCIDFont=topDict.hasName("ROS");var charStringOffset=topDict.getByName("CharStrings");var charStringIndex=this.parseIndex(charStringOffset).obj;var fontMatrix=topDict.getByName("FontMatrix");if(fontMatrix){properties.fontMatrix=fontMatrix;}var fontBBox=topDict.getByName("FontBBox");if(fontBBox){properties.ascent=Math.max(fontBBox[3],fontBBox[1]);properties.descent=Math.min(fontBBox[1],fontBBox[3]);properties.ascentScaled=true;}var charset,encoding;if(cff.isCIDFont){var fdArrayIndex=this.parseIndex(topDict.getByName("FDArray")).obj;for(var i=0,ii=fdArrayIndex.count;i<ii;++i){var dictRaw=fdArrayIndex.get(i);var fontDict=this.createDict(CFFTopDict,this.parseDict(dictRaw),cff.strings);this.parsePrivateDict(fontDict);cff.fdArray.push(fontDict);}encoding=null;charset=this.parseCharsets(topDict.getByName("charset"),charStringIndex.count,cff.strings,true);cff.fdSelect=this.parseFDSelect(topDict.getByName("FDSelect"),charStringIndex.count);}else{charset=this.parseCharsets(topDict.getByName("charset"),charStringIndex.count,cff.strings,false);encoding=this.parseEncoding(topDict.getByName("Encoding"),properties,cff.strings,charset.charset);}cff.charset=charset;cff.encoding=encoding;var charStringsAndSeacs=this.parseCharStrings({charStrings:charStringIndex,localSubrIndex:topDict.privateDict.subrsIndex,globalSubrIndex:globalSubrIndex.obj,fdSelect:cff.fdSelect,fdArray:cff.fdArray,privateDict:topDict.privateDict});cff.charStrings=charStringsAndSeacs.charStrings;cff.seacs=charStringsAndSeacs.seacs;cff.widths=charStringsAndSeacs.widths;return cff;}},{key:"parseHeader",value:function parseHeader(){var bytes=this.bytes;var bytesLength=bytes.length;var offset=0;while(offset<bytesLength&&bytes[offset]!==1){++offset;}if(offset>=bytesLength){throw new FormatError("Invalid CFF header");}if(offset!==0){info("cff data is shifted");bytes=bytes.subarray(offset);this.bytes=bytes;}var major=bytes[0];var minor=bytes[1];var hdrSize=bytes[2];var offSize=bytes[3];var header=new CFFHeader(major,minor,hdrSize,offSize);return{obj:header,endPos:hdrSize};}},{key:"parseDict",value:function parseDict(dict){var pos=0;function parseOperand(){var value=dict[pos++];if(value===30){return parseFloatOperand();}else if(value===28){value=dict[pos++];value=(value<<24|dict[pos++]<<16)>>16;return value;}else if(value===29){value=dict[pos++];value=value<<8|dict[pos++];value=value<<8|dict[pos++];value=value<<8|dict[pos++];return value;}else if(value>=32&&value<=246){return value-139;}else if(value>=247&&value<=250){return(value-247)*256+dict[pos++]+108;}else if(value>=251&&value<=254){return-((value-251)*256)-dict[pos++]-108;}warn('CFFParser_parseDict: "'+value+'" is a reserved command.');return NaN;}function parseFloatOperand(){var str="";var eof=15;var lookup=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];var length=dict.length;while(pos<length){var b=dict[pos++];var b1=b>>4;var b2=b&15;if(b1===eof){break;}str+=lookup[b1];if(b2===eof){break;}str+=lookup[b2];}return parseFloat(str);}var operands=[];var entries=[];pos=0;var end=dict.length;while(pos<end){var b=dict[pos];if(b<=21){if(b===12){b=b<<8|dict[++pos];}entries.push([b,operands]);operands=[];++pos;}else{operands.push(parseOperand());}}return entries;}},{key:"parseIndex",value:function parseIndex(pos){var cffIndex=new CFFIndex();var bytes=this.bytes;var count=bytes[pos++]<<8|bytes[pos++];var offsets=[];var end=pos;var i,ii;if(count!==0){var offsetSize=bytes[pos++];var startPos=pos+(count+1)*offsetSize-1;for(i=0,ii=count+1;i<ii;++i){var offset=0;for(var j=0;j<offsetSize;++j){offset<<=8;offset+=bytes[pos++];}offsets.push(startPos+offset);}end=offsets[count];}for(i=0,ii=offsets.length-1;i<ii;++i){var offsetStart=offsets[i];var offsetEnd=offsets[i+1];cffIndex.add(bytes.subarray(offsetStart,offsetEnd));}return{obj:cffIndex,endPos:end};}},{key:"parseNameIndex",value:function parseNameIndex(index){var names=[];for(var i=0,ii=index.count;i<ii;++i){var name=index.get(i);names.push(bytesToString(name));}return names;}},{key:"parseStringIndex",value:function parseStringIndex(index){var strings=new CFFStrings();for(var i=0,ii=index.count;i<ii;++i){var data=index.get(i);strings.add(bytesToString(data));}return strings;}},{key:"createDict",value:function createDict(Type,dict,strings){var cffDict=new Type(strings);var _iterator=cff_parser_createForOfIteratorHelper(dict),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=cff_parser_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];cffDict.setByKey(key,value);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return cffDict;}},{key:"parseCharString",value:function parseCharString(state,data,localSubrIndex,globalSubrIndex){if(!data||state.callDepth>MAX_SUBR_NESTING){return false;}var stackSize=state.stackSize;var stack=state.stack;var length=data.length;for(var j=0;j<length;){var value=data[j++];var validationCommand=null;if(value===12){var q=data[j++];if(q===0){data[j-2]=139;data[j-1]=22;stackSize=0;}else{validationCommand=CharstringValidationData12[q];}}else if(value===28){stack[stackSize]=(data[j]<<24|data[j+1]<<16)>>16;j+=2;stackSize++;}else if(value===14){if(stackSize>=4){stackSize-=4;if(this.seacAnalysisEnabled){state.seac=stack.slice(stackSize,stackSize+4);return false;}}validationCommand=CharstringValidationData[value];}else if(value>=32&&value<=246){stack[stackSize]=value-139;stackSize++;}else if(value>=247&&value<=254){stack[stackSize]=value<251?(value-247<<8)+data[j]+108:-(value-251<<8)-data[j]-108;j++;stackSize++;}else if(value===255){stack[stackSize]=(data[j]<<24|data[j+1]<<16|data[j+2]<<8|data[j+3])/65536;j+=4;stackSize++;}else if(value===19||value===20){state.hints+=stackSize>>1;if(state.hints===0){data.copyWithin(j-1,j,-1);j-=1;length-=1;continue;}j+=state.hints+7>>3;stackSize%=2;validationCommand=CharstringValidationData[value];}else if(value===10||value===29){var subrsIndex=value===10?localSubrIndex:globalSubrIndex;if(!subrsIndex){validationCommand=CharstringValidationData[value];warn("Missing subrsIndex for "+validationCommand.id);return false;}var bias=32768;if(subrsIndex.count<1240){bias=107;}else if(subrsIndex.count<33900){bias=1131;}var subrNumber=stack[--stackSize]+bias;if(subrNumber<0||subrNumber>=subrsIndex.count||isNaN(subrNumber)){validationCommand=CharstringValidationData[value];warn("Out of bounds subrIndex for "+validationCommand.id);return false;}state.stackSize=stackSize;state.callDepth++;var valid=this.parseCharString(state,subrsIndex.get(subrNumber),localSubrIndex,globalSubrIndex);if(!valid){return false;}state.callDepth--;stackSize=state.stackSize;continue;}else if(value===11){state.stackSize=stackSize;return true;}else if(value===0&&j===data.length){data[j-1]=14;validationCommand=CharstringValidationData[14];}else if(value===9){data.copyWithin(j-1,j,-1);j-=1;length-=1;continue;}else{validationCommand=CharstringValidationData[value];}if(validationCommand){if(validationCommand.stem){state.hints+=stackSize>>1;if(value===3||value===23){state.hasVStems=true;}else if(state.hasVStems&&(value===1||value===18)){warn("CFF stem hints are in wrong order");data[j-1]=value===1?3:23;}}if("min"in validationCommand){if(!state.undefStack&&stackSize<validationCommand.min){warn("Not enough parameters for "+validationCommand.id+"; actual: "+stackSize+", expected: "+validationCommand.min);if(stackSize===0){data[j-1]=14;return true;}return false;}}if(state.firstStackClearing&&validationCommand.stackClearing){state.firstStackClearing=false;stackSize-=validationCommand.min;if(stackSize>=2&&validationCommand.stem){stackSize%=2;}else if(stackSize>1){warn("Found too many parameters for stack-clearing command");}if(stackSize>0){state.width=stack[stackSize-1];}}if("stackDelta"in validationCommand){if("stackFn"in validationCommand){validationCommand.stackFn(stack,stackSize);}stackSize+=validationCommand.stackDelta;}else if(validationCommand.stackClearing){stackSize=0;}else if(validationCommand.resetStack){stackSize=0;state.undefStack=false;}else if(validationCommand.undefStack){stackSize=0;state.undefStack=true;state.firstStackClearing=false;}}}if(length<data.length){data.fill(14,length);}state.stackSize=stackSize;return true;}},{key:"parseCharStrings",value:function parseCharStrings(_ref){var charStrings=_ref.charStrings,localSubrIndex=_ref.localSubrIndex,globalSubrIndex=_ref.globalSubrIndex,fdSelect=_ref.fdSelect,fdArray=_ref.fdArray,privateDict=_ref.privateDict;var seacs=[];var widths=[];var count=charStrings.count;for(var i=0;i<count;i++){var charstring=charStrings.get(i);var state={callDepth:0,stackSize:0,stack:[],undefStack:true,hints:0,firstStackClearing:true,seac:null,width:null,hasVStems:false};var valid=true;var localSubrToUse=null;var privateDictToUse=privateDict;if(fdSelect&&fdArray.length){var fdIndex=fdSelect.getFDIndex(i);if(fdIndex===-1){warn("Glyph index is not in fd select.");valid=false;}if(fdIndex>=fdArray.length){warn("Invalid fd index for glyph index.");valid=false;}if(valid){privateDictToUse=fdArray[fdIndex].privateDict;localSubrToUse=privateDictToUse.subrsIndex;}}else if(localSubrIndex){localSubrToUse=localSubrIndex;}if(valid){valid=this.parseCharString(state,charstring,localSubrToUse,globalSubrIndex);}if(state.width!==null){var nominalWidth=privateDictToUse.getByName("nominalWidthX");widths[i]=nominalWidth+state.width;}else{var defaultWidth=privateDictToUse.getByName("defaultWidthX");widths[i]=defaultWidth;}if(state.seac!==null){seacs[i]=state.seac;}if(!valid){charStrings.set(i,new Uint8Array([14]));}}return{charStrings:charStrings,seacs:seacs,widths:widths};}},{key:"emptyPrivateDictionary",value:function emptyPrivateDictionary(parentDict){var privateDict=this.createDict(CFFPrivateDict,[],parentDict.strings);parentDict.setByKey(18,[0,0]);parentDict.privateDict=privateDict;}},{key:"parsePrivateDict",value:function parsePrivateDict(parentDict){if(!parentDict.hasName("Private")){this.emptyPrivateDictionary(parentDict);return;}var privateOffset=parentDict.getByName("Private");if(!Array.isArray(privateOffset)||privateOffset.length!==2){parentDict.removeByName("Private");return;}var size=privateOffset[0];var offset=privateOffset[1];if(size===0||offset>=this.bytes.length){this.emptyPrivateDictionary(parentDict);return;}var privateDictEnd=offset+size;var dictData=this.bytes.subarray(offset,privateDictEnd);var dict=this.parseDict(dictData);var privateDict=this.createDict(CFFPrivateDict,dict,parentDict.strings);parentDict.privateDict=privateDict;if(privateDict.getByName("ExpansionFactor")===0){privateDict.setByName("ExpansionFactor",0.06);}if(!privateDict.getByName("Subrs")){return;}var subrsOffset=privateDict.getByName("Subrs");var relativeOffset=offset+subrsOffset;if(subrsOffset===0||relativeOffset>=this.bytes.length){this.emptyPrivateDictionary(parentDict);return;}var subrsIndex=this.parseIndex(relativeOffset);privateDict.subrsIndex=subrsIndex.obj;}},{key:"parseCharsets",value:function parseCharsets(pos,length,strings,cid){if(pos===0){return new CFFCharset(true,CFFCharsetPredefinedTypes.ISO_ADOBE,ISOAdobeCharset);}else if(pos===1){return new CFFCharset(true,CFFCharsetPredefinedTypes.EXPERT,ExpertCharset);}else if(pos===2){return new CFFCharset(true,CFFCharsetPredefinedTypes.EXPERT_SUBSET,ExpertSubsetCharset);}var bytes=this.bytes;var start=pos;var format=bytes[pos++];var charset=[cid?0:".notdef"];var id,count,i;length-=1;switch(format){case 0:for(i=0;i<length;i++){id=bytes[pos++]<<8|bytes[pos++];charset.push(cid?id:strings.get(id));}break;case 1:while(charset.length<=length){id=bytes[pos++]<<8|bytes[pos++];count=bytes[pos++];for(i=0;i<=count;i++){charset.push(cid?id++:strings.get(id++));}}break;case 2:while(charset.length<=length){id=bytes[pos++]<<8|bytes[pos++];count=bytes[pos++]<<8|bytes[pos++];for(i=0;i<=count;i++){charset.push(cid?id++:strings.get(id++));}}break;default:throw new FormatError("Unknown charset format");}var end=pos;var raw=bytes.subarray(start,end);return new CFFCharset(false,format,charset,raw);}},{key:"parseEncoding",value:function parseEncoding(pos,properties,strings,charset){var encoding=Object.create(null);var bytes=this.bytes;var predefined=false;var format,i,ii;var raw=null;function readSupplement(){var supplementsCount=bytes[pos++];for(i=0;i<supplementsCount;i++){var code=bytes[pos++];var sid=(bytes[pos++]<<8)+(bytes[pos++]&0xff);encoding[code]=charset.indexOf(strings.get(sid));}}if(pos===0||pos===1){predefined=true;format=pos;var baseEncoding=pos?ExpertEncoding:StandardEncoding;for(i=0,ii=charset.length;i<ii;i++){var index=baseEncoding.indexOf(charset[i]);if(index!==-1){encoding[index]=i;}}}else{var dataStart=pos;format=bytes[pos++];switch(format&0x7f){case 0:var glyphsCount=bytes[pos++];for(i=1;i<=glyphsCount;i++){encoding[bytes[pos++]]=i;}break;case 1:var rangesCount=bytes[pos++];var gid=1;for(i=0;i<rangesCount;i++){var start=bytes[pos++];var left=bytes[pos++];for(var j=start;j<=start+left;j++){encoding[j]=gid++;}}break;default:throw new FormatError("Unknown encoding format: ".concat(format," in CFF"));}var dataEnd=pos;if(format&0x80){bytes[dataStart]&=0x7f;readSupplement();}raw=bytes.subarray(dataStart,dataEnd);}format&=0x7f;return new CFFEncoding(predefined,format,encoding,raw);}},{key:"parseFDSelect",value:function parseFDSelect(pos,length){var bytes=this.bytes;var format=bytes[pos++];var fdSelect=[];var i;switch(format){case 0:for(i=0;i<length;++i){var id=bytes[pos++];fdSelect.push(id);}break;case 3:var rangesCount=bytes[pos++]<<8|bytes[pos++];for(i=0;i<rangesCount;++i){var first=bytes[pos++]<<8|bytes[pos++];if(i===0&&first!==0){warn("parseFDSelect: The first range must have a first GID of 0"+" -- trying to recover.");first=0;}var fdIndex=bytes[pos++];var next=bytes[pos]<<8|bytes[pos+1];for(var j=first;j<next;++j){fdSelect.push(fdIndex);}}pos+=2;break;default:throw new FormatError("parseFDSelect: Unknown format \"".concat(format,"\"."));}if(fdSelect.length!==length){throw new FormatError("parseFDSelect: Invalid font data.");}return new CFFFDSelect(format,fdSelect);}}]);return CFFParser;}();var CFF=/*#__PURE__*/function(){function CFF(){cff_parser_classCallCheck(this,CFF);this.header=null;this.names=[];this.topDict=null;this.strings=new CFFStrings();this.globalSubrIndex=null;this.encoding=null;this.charset=null;this.charStrings=null;this.fdArray=[];this.fdSelect=null;this.isCIDFont=false;}cff_parser_createClass(CFF,[{key:"duplicateFirstGlyph",value:function duplicateFirstGlyph(){if(this.charStrings.count>=65535){warn("Not enough space in charstrings to duplicate first glyph.");return;}var glyphZero=this.charStrings.get(0);this.charStrings.add(glyphZero);if(this.isCIDFont){this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0]);}}},{key:"hasGlyphId",value:function hasGlyphId(id){if(id<0||id>=this.charStrings.count){return false;}var glyph=this.charStrings.get(id);return glyph.length>0;}}]);return CFF;}();var CFFHeader=/*#__PURE__*/cff_parser_createClass(function CFFHeader(major,minor,hdrSize,offSize){cff_parser_classCallCheck(this,CFFHeader);this.major=major;this.minor=minor;this.hdrSize=hdrSize;this.offSize=offSize;});var CFFStrings=/*#__PURE__*/function(){function CFFStrings(){cff_parser_classCallCheck(this,CFFStrings);this.strings=[];}cff_parser_createClass(CFFStrings,[{key:"get",value:function get(index){if(index>=0&&index<=NUM_STANDARD_CFF_STRINGS-1){return CFFStandardStrings[index];}if(index-NUM_STANDARD_CFF_STRINGS<=this.strings.length){return this.strings[index-NUM_STANDARD_CFF_STRINGS];}return CFFStandardStrings[0];}},{key:"getSID",value:function getSID(str){var index=CFFStandardStrings.indexOf(str);if(index!==-1){return index;}index=this.strings.indexOf(str);if(index!==-1){return index+NUM_STANDARD_CFF_STRINGS;}return-1;}},{key:"add",value:function add(value){this.strings.push(value);}},{key:"count",get:function get(){return this.strings.length;}}]);return CFFStrings;}();var CFFIndex=/*#__PURE__*/function(){function CFFIndex(){cff_parser_classCallCheck(this,CFFIndex);this.objects=[];this.length=0;}cff_parser_createClass(CFFIndex,[{key:"add",value:function add(data){this.length+=data.length;this.objects.push(data);}},{key:"set",value:function set(index,data){this.length+=data.length-this.objects[index].length;this.objects[index]=data;}},{key:"get",value:function get(index){return this.objects[index];}},{key:"count",get:function get(){return this.objects.length;}}]);return CFFIndex;}();var CFFDict=/*#__PURE__*/function(){function CFFDict(tables,strings){cff_parser_classCallCheck(this,CFFDict);this.keyToNameMap=tables.keyToNameMap;this.nameToKeyMap=tables.nameToKeyMap;this.defaults=tables.defaults;this.types=tables.types;this.opcodes=tables.opcodes;this.order=tables.order;this.strings=strings;this.values=Object.create(null);}cff_parser_createClass(CFFDict,[{key:"setByKey",value:function setByKey(key,value){if(!(key in this.keyToNameMap)){return false;}if(value.length===0){return true;}var _iterator2=cff_parser_createForOfIteratorHelper(value),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var val=_step2.value;if(isNaN(val)){warn("Invalid CFFDict value: \"".concat(value,"\" for key \"").concat(key,"\"."));return true;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var type=this.types[key];if(type==="num"||type==="sid"||type==="offset"){value=value[0];}this.values[key]=value;return true;}},{key:"setByName",value:function setByName(name,value){if(!(name in this.nameToKeyMap)){throw new FormatError("Invalid dictionary name \"".concat(name,"\""));}this.values[this.nameToKeyMap[name]]=value;}},{key:"hasName",value:function hasName(name){return this.nameToKeyMap[name]in this.values;}},{key:"getByName",value:function getByName(name){if(!(name in this.nameToKeyMap)){throw new FormatError("Invalid dictionary name ".concat(name,"\""));}var key=this.nameToKeyMap[name];if(!(key in this.values)){return this.defaults[key];}return this.values[key];}},{key:"removeByName",value:function removeByName(name){delete this.values[this.nameToKeyMap[name]];}}],[{key:"createTables",value:function createTables(layout){var tables={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]};var _iterator3=cff_parser_createForOfIteratorHelper(layout),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var entry=_step3.value;var key=Array.isArray(entry[0])?(entry[0][0]<<8)+entry[0][1]:entry[0];tables.keyToNameMap[key]=entry[1];tables.nameToKeyMap[entry[1]]=key;tables.types[key]=entry[2];tables.defaults[key]=entry[3];tables.opcodes[key]=Array.isArray(entry[0])?entry[0]:[entry[0]];tables.order.push(key);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return tables;}}]);return CFFDict;}();var CFFTopDictLayout=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[0.001,0,0,0.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]];var CFFTopDict=/*#__PURE__*/function(_CFFDict){cff_parser_inherits(CFFTopDict,_CFFDict);var _super=cff_parser_createSuper(CFFTopDict);function CFFTopDict(strings){var _this;cff_parser_classCallCheck(this,CFFTopDict);_this=_super.call(this,CFFTopDict.tables,strings);_this.privateDict=null;return _this;}cff_parser_createClass(CFFTopDict,null,[{key:"tables",get:function get(){return shadow(this,"tables",this.createTables(CFFTopDictLayout));}}]);return CFFTopDict;}(CFFDict);var CFFPrivateDictLayout=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",0.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",0.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]];var CFFPrivateDict=/*#__PURE__*/function(_CFFDict2){cff_parser_inherits(CFFPrivateDict,_CFFDict2);var _super2=cff_parser_createSuper(CFFPrivateDict);function CFFPrivateDict(strings){var _this2;cff_parser_classCallCheck(this,CFFPrivateDict);_this2=_super2.call(this,CFFPrivateDict.tables,strings);_this2.subrsIndex=null;return _this2;}cff_parser_createClass(CFFPrivateDict,null,[{key:"tables",get:function get(){return shadow(this,"tables",this.createTables(CFFPrivateDictLayout));}}]);return CFFPrivateDict;}(CFFDict);var CFFCharsetPredefinedTypes={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2};var CFFCharset=/*#__PURE__*/cff_parser_createClass(function CFFCharset(predefined,format,charset,raw){cff_parser_classCallCheck(this,CFFCharset);this.predefined=predefined;this.format=format;this.charset=charset;this.raw=raw;});var CFFEncoding=/*#__PURE__*/cff_parser_createClass(function CFFEncoding(predefined,format,encoding,raw){cff_parser_classCallCheck(this,CFFEncoding);this.predefined=predefined;this.format=format;this.encoding=encoding;this.raw=raw;});var CFFFDSelect=/*#__PURE__*/function(){function CFFFDSelect(format,fdSelect){cff_parser_classCallCheck(this,CFFFDSelect);this.format=format;this.fdSelect=fdSelect;}cff_parser_createClass(CFFFDSelect,[{key:"getFDIndex",value:function getFDIndex(glyphIndex){if(glyphIndex<0||glyphIndex>=this.fdSelect.length){return-1;}return this.fdSelect[glyphIndex];}}]);return CFFFDSelect;}();var CFFOffsetTracker=/*#__PURE__*/function(){function CFFOffsetTracker(){cff_parser_classCallCheck(this,CFFOffsetTracker);this.offsets=Object.create(null);}cff_parser_createClass(CFFOffsetTracker,[{key:"isTracking",value:function isTracking(key){return key in this.offsets;}},{key:"track",value:function track(key,location){if(key in this.offsets){throw new FormatError("Already tracking location of ".concat(key));}this.offsets[key]=location;}},{key:"offset",value:function offset(value){for(var key in this.offsets){this.offsets[key]+=value;}}},{key:"setEntryLocation",value:function setEntryLocation(key,values,output){if(!(key in this.offsets)){throw new FormatError("Not tracking location of ".concat(key));}var data=output.data;var dataOffset=this.offsets[key];var size=5;for(var i=0,ii=values.length;i<ii;++i){var offset0=i*size+dataOffset;var offset1=offset0+1;var offset2=offset0+2;var offset3=offset0+3;var offset4=offset0+4;if(data[offset0]!==0x1d||data[offset1]!==0||data[offset2]!==0||data[offset3]!==0||data[offset4]!==0){throw new FormatError("writing to an offset that is not empty");}var value=values[i];data[offset0]=0x1d;data[offset1]=value>>24&0xff;data[offset2]=value>>16&0xff;data[offset3]=value>>8&0xff;data[offset4]=value&0xff;}}}]);return CFFOffsetTracker;}();var CFFCompiler=/*#__PURE__*/function(){function CFFCompiler(cff){cff_parser_classCallCheck(this,CFFCompiler);this.cff=cff;}cff_parser_createClass(CFFCompiler,[{key:"compile",value:function compile(){var cff=this.cff;var output={data:[],length:0,add:function add(data){try{var _this$data;(_this$data=this.data).push.apply(_this$data,cff_parser_toConsumableArray(data));}catch(_unused){this.data=this.data.concat(data);}this.length=this.data.length;}};var header=this.compileHeader(cff.header);output.add(header);var nameIndex=this.compileNameIndex(cff.names);output.add(nameIndex);if(cff.isCIDFont){if(cff.topDict.hasName("FontMatrix")){var base=cff.topDict.getByName("FontMatrix");cff.topDict.removeByName("FontMatrix");var _iterator4=cff_parser_createForOfIteratorHelper(cff.fdArray),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var subDict=_step4.value;var matrix=base.slice(0);if(subDict.hasName("FontMatrix")){matrix=Util.transform(matrix,subDict.getByName("FontMatrix"));}subDict.setByName("FontMatrix",matrix);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}}var xuid=cff.topDict.getByName("XUID");if((xuid===null||xuid===void 0?void 0:xuid.length)>16){cff.topDict.removeByName("XUID");}cff.topDict.setByName("charset",0);var compiled=this.compileTopDicts([cff.topDict],output.length,cff.isCIDFont);output.add(compiled.output);var topDictTracker=compiled.trackers[0];var stringIndex=this.compileStringIndex(cff.strings.strings);output.add(stringIndex);var globalSubrIndex=this.compileIndex(cff.globalSubrIndex);output.add(globalSubrIndex);if(cff.encoding&&cff.topDict.hasName("Encoding")){if(cff.encoding.predefined){topDictTracker.setEntryLocation("Encoding",[cff.encoding.format],output);}else{var encoding=this.compileEncoding(cff.encoding);topDictTracker.setEntryLocation("Encoding",[output.length],output);output.add(encoding);}}var charset=this.compileCharset(cff.charset,cff.charStrings.count,cff.strings,cff.isCIDFont);topDictTracker.setEntryLocation("charset",[output.length],output);output.add(charset);var charStrings=this.compileCharStrings(cff.charStrings);topDictTracker.setEntryLocation("CharStrings",[output.length],output);output.add(charStrings);if(cff.isCIDFont){topDictTracker.setEntryLocation("FDSelect",[output.length],output);var fdSelect=this.compileFDSelect(cff.fdSelect);output.add(fdSelect);compiled=this.compileTopDicts(cff.fdArray,output.length,true);topDictTracker.setEntryLocation("FDArray",[output.length],output);output.add(compiled.output);var fontDictTrackers=compiled.trackers;this.compilePrivateDicts(cff.fdArray,fontDictTrackers,output);}this.compilePrivateDicts([cff.topDict],[topDictTracker],output);output.add([0]);return output.data;}},{key:"encodeNumber",value:function encodeNumber(value){if(Number.isInteger(value)){return this.encodeInteger(value);}return this.encodeFloat(value);}},{key:"encodeFloat",value:function encodeFloat(num){var value=num.toString();var m=CFFCompiler.EncodeFloatRegExp.exec(value);if(m){var epsilon=parseFloat("1e"+((m[2]?+m[2]:0)+m[1].length));value=(Math.round(num*epsilon)/epsilon).toString();}var nibbles="";var i,ii;for(i=0,ii=value.length;i<ii;++i){var a=value[i];if(a==="e"){nibbles+=value[++i]==="-"?"c":"b";}else if(a==="."){nibbles+="a";}else if(a==="-"){nibbles+="e";}else{nibbles+=a;}}nibbles+=nibbles.length&1?"f":"ff";var out=[30];for(i=0,ii=nibbles.length;i<ii;i+=2){out.push(parseInt(nibbles.substring(i,i+2),16));}return out;}},{key:"encodeInteger",value:function encodeInteger(value){var code;if(value>=-107&&value<=107){code=[value+139];}else if(value>=108&&value<=1131){value-=108;code=[(value>>8)+247,value&0xff];}else if(value>=-1131&&value<=-108){value=-value-108;code=[(value>>8)+251,value&0xff];}else if(value>=-32768&&value<=32767){code=[0x1c,value>>8&0xff,value&0xff];}else{code=[0x1d,value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff];}return code;}},{key:"compileHeader",value:function compileHeader(header){return[header.major,header.minor,4,header.offSize];}},{key:"compileNameIndex",value:function compileNameIndex(names){var nameIndex=new CFFIndex();var _iterator5=cff_parser_createForOfIteratorHelper(names),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var name=_step5.value;var length=Math.min(name.length,127);var sanitizedName=new Array(length);for(var j=0;j<length;j++){var char=name[j];if(char<"!"||char>"~"||char==="["||char==="]"||char==="("||char===")"||char==="{"||char==="}"||char==="<"||char===">"||char==="/"||char==="%"){char="_";}sanitizedName[j]=char;}sanitizedName=sanitizedName.join("");if(sanitizedName===""){sanitizedName="Bad_Font_Name";}nameIndex.add(stringToBytes(sanitizedName));}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}return this.compileIndex(nameIndex);}},{key:"compileTopDicts",value:function compileTopDicts(dicts,length,removeCidKeys){var fontDictTrackers=[];var fdArrayIndex=new CFFIndex();var _iterator6=cff_parser_createForOfIteratorHelper(dicts),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var fontDict=_step6.value;if(removeCidKeys){fontDict.removeByName("CIDFontVersion");fontDict.removeByName("CIDFontRevision");fontDict.removeByName("CIDFontType");fontDict.removeByName("CIDCount");fontDict.removeByName("UIDBase");}var fontDictTracker=new CFFOffsetTracker();var fontDictData=this.compileDict(fontDict,fontDictTracker);fontDictTrackers.push(fontDictTracker);fdArrayIndex.add(fontDictData);fontDictTracker.offset(length);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}fdArrayIndex=this.compileIndex(fdArrayIndex,fontDictTrackers);return{trackers:fontDictTrackers,output:fdArrayIndex};}},{key:"compilePrivateDicts",value:function compilePrivateDicts(dicts,trackers,output){for(var i=0,ii=dicts.length;i<ii;++i){var fontDict=dicts[i];var privateDict=fontDict.privateDict;if(!privateDict||!fontDict.hasName("Private")){throw new FormatError("There must be a private dictionary.");}var privateDictTracker=new CFFOffsetTracker();var privateDictData=this.compileDict(privateDict,privateDictTracker);var outputLength=output.length;privateDictTracker.offset(outputLength);if(!privateDictData.length){outputLength=0;}trackers[i].setEntryLocation("Private",[privateDictData.length,outputLength],output);output.add(privateDictData);if(privateDict.subrsIndex&&privateDict.hasName("Subrs")){var subrs=this.compileIndex(privateDict.subrsIndex);privateDictTracker.setEntryLocation("Subrs",[privateDictData.length],output);output.add(subrs);}}}},{key:"compileDict",value:function compileDict(dict,offsetTracker){var out=[];var _iterator7=cff_parser_createForOfIteratorHelper(dict.order),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var key=_step7.value;if(!(key in dict.values)){continue;}var values=dict.values[key];var types=dict.types[key];if(!Array.isArray(types)){types=[types];}if(!Array.isArray(values)){values=[values];}if(values.length===0){continue;}for(var j=0,jj=types.length;j<jj;++j){var type=types[j];var value=values[j];switch(type){case"num":case"sid":out.push.apply(out,cff_parser_toConsumableArray(this.encodeNumber(value)));break;case"offset":var name=dict.keyToNameMap[key];if(!offsetTracker.isTracking(name)){offsetTracker.track(name,out.length);}out.push(0x1d,0,0,0,0);break;case"array":case"delta":out.push.apply(out,cff_parser_toConsumableArray(this.encodeNumber(value)));for(var k=1,kk=values.length;k<kk;++k){out.push.apply(out,cff_parser_toConsumableArray(this.encodeNumber(values[k])));}break;default:throw new FormatError("Unknown data type of ".concat(type));}}out.push.apply(out,cff_parser_toConsumableArray(dict.opcodes[key]));}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return out;}},{key:"compileStringIndex",value:function compileStringIndex(strings){var stringIndex=new CFFIndex();var _iterator8=cff_parser_createForOfIteratorHelper(strings),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var string=_step8.value;stringIndex.add(stringToBytes(string));}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}return this.compileIndex(stringIndex);}},{key:"compileCharStrings",value:function compileCharStrings(charStrings){var charStringsIndex=new CFFIndex();for(var i=0;i<charStrings.count;i++){var glyph=charStrings.get(i);if(glyph.length===0){charStringsIndex.add(new Uint8Array([0x8b,0x0e]));continue;}charStringsIndex.add(glyph);}return this.compileIndex(charStringsIndex);}},{key:"compileCharset",value:function compileCharset(charset,numGlyphs,strings,isCIDFont){var out;var numGlyphsLessNotDef=numGlyphs-1;if(isCIDFont){out=new Uint8Array([2,0,0,numGlyphsLessNotDef>>8&0xff,numGlyphsLessNotDef&0xff]);}else{var length=1+numGlyphsLessNotDef*2;out=new Uint8Array(length);out[0]=0;var charsetIndex=0;var numCharsets=charset.charset.length;var warned=false;for(var i=1;i<out.length;i+=2){var sid=0;if(charsetIndex<numCharsets){var name=charset.charset[charsetIndex++];sid=strings.getSID(name);if(sid===-1){sid=0;if(!warned){warned=true;warn("Couldn't find ".concat(name," in CFF strings"));}}}out[i]=sid>>8&0xff;out[i+1]=sid&0xff;}}return this.compileTypedArray(out);}},{key:"compileEncoding",value:function compileEncoding(encoding){return this.compileTypedArray(encoding.raw);}},{key:"compileFDSelect",value:function compileFDSelect(fdSelect){var format=fdSelect.format;var out,i;switch(format){case 0:out=new Uint8Array(1+fdSelect.fdSelect.length);out[0]=format;for(i=0;i<fdSelect.fdSelect.length;i++){out[i+1]=fdSelect.fdSelect[i];}break;case 3:var start=0;var lastFD=fdSelect.fdSelect[0];var ranges=[format,0,0,start>>8&0xff,start&0xff,lastFD];for(i=1;i<fdSelect.fdSelect.length;i++){var currentFD=fdSelect.fdSelect[i];if(currentFD!==lastFD){ranges.push(i>>8&0xff,i&0xff,currentFD);lastFD=currentFD;}}var numRanges=(ranges.length-3)/3;ranges[1]=numRanges>>8&0xff;ranges[2]=numRanges&0xff;ranges.push(i>>8&0xff,i&0xff);out=new Uint8Array(ranges);break;}return this.compileTypedArray(out);}},{key:"compileTypedArray",value:function compileTypedArray(data){return Array.from(data);}},{key:"compileIndex",value:function compileIndex(index){var trackers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var objects=index.objects;var count=objects.length;if(count===0){return[0,0];}var data=[count>>8&0xff,count&0xff];var lastOffset=1,i;for(i=0;i<count;++i){lastOffset+=objects[i].length;}var offsetSize;if(lastOffset<0x100){offsetSize=1;}else if(lastOffset<0x10000){offsetSize=2;}else if(lastOffset<0x1000000){offsetSize=3;}else{offsetSize=4;}data.push(offsetSize);var relativeOffset=1;for(i=0;i<count+1;i++){if(offsetSize===1){data.push(relativeOffset&0xff);}else if(offsetSize===2){data.push(relativeOffset>>8&0xff,relativeOffset&0xff);}else if(offsetSize===3){data.push(relativeOffset>>16&0xff,relativeOffset>>8&0xff,relativeOffset&0xff);}else{data.push(relativeOffset>>>24&0xff,relativeOffset>>16&0xff,relativeOffset>>8&0xff,relativeOffset&0xff);}if(objects[i]){relativeOffset+=objects[i].length;}}for(i=0;i<count;i++){if(trackers[i]){trackers[i].offset(data.length);}data.push.apply(data,cff_parser_toConsumableArray(objects[i]));}return data;}}],[{key:"EncodeFloatRegExp",get:function get(){return shadow(this,"EncodeFloatRegExp",/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/);}}]);return CFFCompiler;}();
;// CONCATENATED MODULE: ./src/core/glyphlist.js
var getGlyphsUnicode=getLookupTableFactory(function(t){t.A=0x0041;t.AE=0x00c6;t.AEacute=0x01fc;t.AEmacron=0x01e2;t.AEsmall=0xf7e6;t.Aacute=0x00c1;t.Aacutesmall=0xf7e1;t.Abreve=0x0102;t.Abreveacute=0x1eae;t.Abrevecyrillic=0x04d0;t.Abrevedotbelow=0x1eb6;t.Abrevegrave=0x1eb0;t.Abrevehookabove=0x1eb2;t.Abrevetilde=0x1eb4;t.Acaron=0x01cd;t.Acircle=0x24b6;t.Acircumflex=0x00c2;t.Acircumflexacute=0x1ea4;t.Acircumflexdotbelow=0x1eac;t.Acircumflexgrave=0x1ea6;t.Acircumflexhookabove=0x1ea8;t.Acircumflexsmall=0xf7e2;t.Acircumflextilde=0x1eaa;t.Acute=0xf6c9;t.Acutesmall=0xf7b4;t.Acyrillic=0x0410;t.Adblgrave=0x0200;t.Adieresis=0x00c4;t.Adieresiscyrillic=0x04d2;t.Adieresismacron=0x01de;t.Adieresissmall=0xf7e4;t.Adotbelow=0x1ea0;t.Adotmacron=0x01e0;t.Agrave=0x00c0;t.Agravesmall=0xf7e0;t.Ahookabove=0x1ea2;t.Aiecyrillic=0x04d4;t.Ainvertedbreve=0x0202;t.Alpha=0x0391;t.Alphatonos=0x0386;t.Amacron=0x0100;t.Amonospace=0xff21;t.Aogonek=0x0104;t.Aring=0x00c5;t.Aringacute=0x01fa;t.Aringbelow=0x1e00;t.Aringsmall=0xf7e5;t.Asmall=0xf761;t.Atilde=0x00c3;t.Atildesmall=0xf7e3;t.Aybarmenian=0x0531;t.B=0x0042;t.Bcircle=0x24b7;t.Bdotaccent=0x1e02;t.Bdotbelow=0x1e04;t.Becyrillic=0x0411;t.Benarmenian=0x0532;t.Beta=0x0392;t.Bhook=0x0181;t.Blinebelow=0x1e06;t.Bmonospace=0xff22;t.Brevesmall=0xf6f4;t.Bsmall=0xf762;t.Btopbar=0x0182;t.C=0x0043;t.Caarmenian=0x053e;t.Cacute=0x0106;t.Caron=0xf6ca;t.Caronsmall=0xf6f5;t.Ccaron=0x010c;t.Ccedilla=0x00c7;t.Ccedillaacute=0x1e08;t.Ccedillasmall=0xf7e7;t.Ccircle=0x24b8;t.Ccircumflex=0x0108;t.Cdot=0x010a;t.Cdotaccent=0x010a;t.Cedillasmall=0xf7b8;t.Chaarmenian=0x0549;t.Cheabkhasiancyrillic=0x04bc;t.Checyrillic=0x0427;t.Chedescenderabkhasiancyrillic=0x04be;t.Chedescendercyrillic=0x04b6;t.Chedieresiscyrillic=0x04f4;t.Cheharmenian=0x0543;t.Chekhakassiancyrillic=0x04cb;t.Cheverticalstrokecyrillic=0x04b8;t.Chi=0x03a7;t.Chook=0x0187;t.Circumflexsmall=0xf6f6;t.Cmonospace=0xff23;t.Coarmenian=0x0551;t.Csmall=0xf763;t.D=0x0044;t.DZ=0x01f1;t.DZcaron=0x01c4;t.Daarmenian=0x0534;t.Dafrican=0x0189;t.Dcaron=0x010e;t.Dcedilla=0x1e10;t.Dcircle=0x24b9;t.Dcircumflexbelow=0x1e12;t.Dcroat=0x0110;t.Ddotaccent=0x1e0a;t.Ddotbelow=0x1e0c;t.Decyrillic=0x0414;t.Deicoptic=0x03ee;t.Delta=0x2206;t.Deltagreek=0x0394;t.Dhook=0x018a;t.Dieresis=0xf6cb;t.DieresisAcute=0xf6cc;t.DieresisGrave=0xf6cd;t.Dieresissmall=0xf7a8;t.Digammagreek=0x03dc;t.Djecyrillic=0x0402;t.Dlinebelow=0x1e0e;t.Dmonospace=0xff24;t.Dotaccentsmall=0xf6f7;t.Dslash=0x0110;t.Dsmall=0xf764;t.Dtopbar=0x018b;t.Dz=0x01f2;t.Dzcaron=0x01c5;t.Dzeabkhasiancyrillic=0x04e0;t.Dzecyrillic=0x0405;t.Dzhecyrillic=0x040f;t.E=0x0045;t.Eacute=0x00c9;t.Eacutesmall=0xf7e9;t.Ebreve=0x0114;t.Ecaron=0x011a;t.Ecedillabreve=0x1e1c;t.Echarmenian=0x0535;t.Ecircle=0x24ba;t.Ecircumflex=0x00ca;t.Ecircumflexacute=0x1ebe;t.Ecircumflexbelow=0x1e18;t.Ecircumflexdotbelow=0x1ec6;t.Ecircumflexgrave=0x1ec0;t.Ecircumflexhookabove=0x1ec2;t.Ecircumflexsmall=0xf7ea;t.Ecircumflextilde=0x1ec4;t.Ecyrillic=0x0404;t.Edblgrave=0x0204;t.Edieresis=0x00cb;t.Edieresissmall=0xf7eb;t.Edot=0x0116;t.Edotaccent=0x0116;t.Edotbelow=0x1eb8;t.Efcyrillic=0x0424;t.Egrave=0x00c8;t.Egravesmall=0xf7e8;t.Eharmenian=0x0537;t.Ehookabove=0x1eba;t.Eightroman=0x2167;t.Einvertedbreve=0x0206;t.Eiotifiedcyrillic=0x0464;t.Elcyrillic=0x041b;t.Elevenroman=0x216a;t.Emacron=0x0112;t.Emacronacute=0x1e16;t.Emacrongrave=0x1e14;t.Emcyrillic=0x041c;t.Emonospace=0xff25;t.Encyrillic=0x041d;t.Endescendercyrillic=0x04a2;t.Eng=0x014a;t.Enghecyrillic=0x04a4;t.Enhookcyrillic=0x04c7;t.Eogonek=0x0118;t.Eopen=0x0190;t.Epsilon=0x0395;t.Epsilontonos=0x0388;t.Ercyrillic=0x0420;t.Ereversed=0x018e;t.Ereversedcyrillic=0x042d;t.Escyrillic=0x0421;t.Esdescendercyrillic=0x04aa;t.Esh=0x01a9;t.Esmall=0xf765;t.Eta=0x0397;t.Etarmenian=0x0538;t.Etatonos=0x0389;t.Eth=0x00d0;t.Ethsmall=0xf7f0;t.Etilde=0x1ebc;t.Etildebelow=0x1e1a;t.Euro=0x20ac;t.Ezh=0x01b7;t.Ezhcaron=0x01ee;t.Ezhreversed=0x01b8;t.F=0x0046;t.Fcircle=0x24bb;t.Fdotaccent=0x1e1e;t.Feharmenian=0x0556;t.Feicoptic=0x03e4;t.Fhook=0x0191;t.Fitacyrillic=0x0472;t.Fiveroman=0x2164;t.Fmonospace=0xff26;t.Fourroman=0x2163;t.Fsmall=0xf766;t.G=0x0047;t.GBsquare=0x3387;t.Gacute=0x01f4;t.Gamma=0x0393;t.Gammaafrican=0x0194;t.Gangiacoptic=0x03ea;t.Gbreve=0x011e;t.Gcaron=0x01e6;t.Gcedilla=0x0122;t.Gcircle=0x24bc;t.Gcircumflex=0x011c;t.Gcommaaccent=0x0122;t.Gdot=0x0120;t.Gdotaccent=0x0120;t.Gecyrillic=0x0413;t.Ghadarmenian=0x0542;t.Ghemiddlehookcyrillic=0x0494;t.Ghestrokecyrillic=0x0492;t.Gheupturncyrillic=0x0490;t.Ghook=0x0193;t.Gimarmenian=0x0533;t.Gjecyrillic=0x0403;t.Gmacron=0x1e20;t.Gmonospace=0xff27;t.Grave=0xf6ce;t.Gravesmall=0xf760;t.Gsmall=0xf767;t.Gsmallhook=0x029b;t.Gstroke=0x01e4;t.H=0x0048;t.H18533=0x25cf;t.H18543=0x25aa;t.H18551=0x25ab;t.H22073=0x25a1;t.HPsquare=0x33cb;t.Haabkhasiancyrillic=0x04a8;t.Hadescendercyrillic=0x04b2;t.Hardsigncyrillic=0x042a;t.Hbar=0x0126;t.Hbrevebelow=0x1e2a;t.Hcedilla=0x1e28;t.Hcircle=0x24bd;t.Hcircumflex=0x0124;t.Hdieresis=0x1e26;t.Hdotaccent=0x1e22;t.Hdotbelow=0x1e24;t.Hmonospace=0xff28;t.Hoarmenian=0x0540;t.Horicoptic=0x03e8;t.Hsmall=0xf768;t.Hungarumlaut=0xf6cf;t.Hungarumlautsmall=0xf6f8;t.Hzsquare=0x3390;t.I=0x0049;t.IAcyrillic=0x042f;t.IJ=0x0132;t.IUcyrillic=0x042e;t.Iacute=0x00cd;t.Iacutesmall=0xf7ed;t.Ibreve=0x012c;t.Icaron=0x01cf;t.Icircle=0x24be;t.Icircumflex=0x00ce;t.Icircumflexsmall=0xf7ee;t.Icyrillic=0x0406;t.Idblgrave=0x0208;t.Idieresis=0x00cf;t.Idieresisacute=0x1e2e;t.Idieresiscyrillic=0x04e4;t.Idieresissmall=0xf7ef;t.Idot=0x0130;t.Idotaccent=0x0130;t.Idotbelow=0x1eca;t.Iebrevecyrillic=0x04d6;t.Iecyrillic=0x0415;t.Ifraktur=0x2111;t.Igrave=0x00cc;t.Igravesmall=0xf7ec;t.Ihookabove=0x1ec8;t.Iicyrillic=0x0418;t.Iinvertedbreve=0x020a;t.Iishortcyrillic=0x0419;t.Imacron=0x012a;t.Imacroncyrillic=0x04e2;t.Imonospace=0xff29;t.Iniarmenian=0x053b;t.Iocyrillic=0x0401;t.Iogonek=0x012e;t.Iota=0x0399;t.Iotaafrican=0x0196;t.Iotadieresis=0x03aa;t.Iotatonos=0x038a;t.Ismall=0xf769;t.Istroke=0x0197;t.Itilde=0x0128;t.Itildebelow=0x1e2c;t.Izhitsacyrillic=0x0474;t.Izhitsadblgravecyrillic=0x0476;t.J=0x004a;t.Jaarmenian=0x0541;t.Jcircle=0x24bf;t.Jcircumflex=0x0134;t.Jecyrillic=0x0408;t.Jheharmenian=0x054b;t.Jmonospace=0xff2a;t.Jsmall=0xf76a;t.K=0x004b;t.KBsquare=0x3385;t.KKsquare=0x33cd;t.Kabashkircyrillic=0x04a0;t.Kacute=0x1e30;t.Kacyrillic=0x041a;t.Kadescendercyrillic=0x049a;t.Kahookcyrillic=0x04c3;t.Kappa=0x039a;t.Kastrokecyrillic=0x049e;t.Kaverticalstrokecyrillic=0x049c;t.Kcaron=0x01e8;t.Kcedilla=0x0136;t.Kcircle=0x24c0;t.Kcommaaccent=0x0136;t.Kdotbelow=0x1e32;t.Keharmenian=0x0554;t.Kenarmenian=0x053f;t.Khacyrillic=0x0425;t.Kheicoptic=0x03e6;t.Khook=0x0198;t.Kjecyrillic=0x040c;t.Klinebelow=0x1e34;t.Kmonospace=0xff2b;t.Koppacyrillic=0x0480;t.Koppagreek=0x03de;t.Ksicyrillic=0x046e;t.Ksmall=0xf76b;t.L=0x004c;t.LJ=0x01c7;t.LL=0xf6bf;t.Lacute=0x0139;t.Lambda=0x039b;t.Lcaron=0x013d;t.Lcedilla=0x013b;t.Lcircle=0x24c1;t.Lcircumflexbelow=0x1e3c;t.Lcommaaccent=0x013b;t.Ldot=0x013f;t.Ldotaccent=0x013f;t.Ldotbelow=0x1e36;t.Ldotbelowmacron=0x1e38;t.Liwnarmenian=0x053c;t.Lj=0x01c8;t.Ljecyrillic=0x0409;t.Llinebelow=0x1e3a;t.Lmonospace=0xff2c;t.Lslash=0x0141;t.Lslashsmall=0xf6f9;t.Lsmall=0xf76c;t.M=0x004d;t.MBsquare=0x3386;t.Macron=0xf6d0;t.Macronsmall=0xf7af;t.Macute=0x1e3e;t.Mcircle=0x24c2;t.Mdotaccent=0x1e40;t.Mdotbelow=0x1e42;t.Menarmenian=0x0544;t.Mmonospace=0xff2d;t.Msmall=0xf76d;t.Mturned=0x019c;t.Mu=0x039c;t.N=0x004e;t.NJ=0x01ca;t.Nacute=0x0143;t.Ncaron=0x0147;t.Ncedilla=0x0145;t.Ncircle=0x24c3;t.Ncircumflexbelow=0x1e4a;t.Ncommaaccent=0x0145;t.Ndotaccent=0x1e44;t.Ndotbelow=0x1e46;t.Nhookleft=0x019d;t.Nineroman=0x2168;t.Nj=0x01cb;t.Njecyrillic=0x040a;t.Nlinebelow=0x1e48;t.Nmonospace=0xff2e;t.Nowarmenian=0x0546;t.Nsmall=0xf76e;t.Ntilde=0x00d1;t.Ntildesmall=0xf7f1;t.Nu=0x039d;t.O=0x004f;t.OE=0x0152;t.OEsmall=0xf6fa;t.Oacute=0x00d3;t.Oacutesmall=0xf7f3;t.Obarredcyrillic=0x04e8;t.Obarreddieresiscyrillic=0x04ea;t.Obreve=0x014e;t.Ocaron=0x01d1;t.Ocenteredtilde=0x019f;t.Ocircle=0x24c4;t.Ocircumflex=0x00d4;t.Ocircumflexacute=0x1ed0;t.Ocircumflexdotbelow=0x1ed8;t.Ocircumflexgrave=0x1ed2;t.Ocircumflexhookabove=0x1ed4;t.Ocircumflexsmall=0xf7f4;t.Ocircumflextilde=0x1ed6;t.Ocyrillic=0x041e;t.Odblacute=0x0150;t.Odblgrave=0x020c;t.Odieresis=0x00d6;t.Odieresiscyrillic=0x04e6;t.Odieresissmall=0xf7f6;t.Odotbelow=0x1ecc;t.Ogoneksmall=0xf6fb;t.Ograve=0x00d2;t.Ogravesmall=0xf7f2;t.Oharmenian=0x0555;t.Ohm=0x2126;t.Ohookabove=0x1ece;t.Ohorn=0x01a0;t.Ohornacute=0x1eda;t.Ohorndotbelow=0x1ee2;t.Ohorngrave=0x1edc;t.Ohornhookabove=0x1ede;t.Ohorntilde=0x1ee0;t.Ohungarumlaut=0x0150;t.Oi=0x01a2;t.Oinvertedbreve=0x020e;t.Omacron=0x014c;t.Omacronacute=0x1e52;t.Omacrongrave=0x1e50;t.Omega=0x2126;t.Omegacyrillic=0x0460;t.Omegagreek=0x03a9;t.Omegaroundcyrillic=0x047a;t.Omegatitlocyrillic=0x047c;t.Omegatonos=0x038f;t.Omicron=0x039f;t.Omicrontonos=0x038c;t.Omonospace=0xff2f;t.Oneroman=0x2160;t.Oogonek=0x01ea;t.Oogonekmacron=0x01ec;t.Oopen=0x0186;t.Oslash=0x00d8;t.Oslashacute=0x01fe;t.Oslashsmall=0xf7f8;t.Osmall=0xf76f;t.Ostrokeacute=0x01fe;t.Otcyrillic=0x047e;t.Otilde=0x00d5;t.Otildeacute=0x1e4c;t.Otildedieresis=0x1e4e;t.Otildesmall=0xf7f5;t.P=0x0050;t.Pacute=0x1e54;t.Pcircle=0x24c5;t.Pdotaccent=0x1e56;t.Pecyrillic=0x041f;t.Peharmenian=0x054a;t.Pemiddlehookcyrillic=0x04a6;t.Phi=0x03a6;t.Phook=0x01a4;t.Pi=0x03a0;t.Piwrarmenian=0x0553;t.Pmonospace=0xff30;t.Psi=0x03a8;t.Psicyrillic=0x0470;t.Psmall=0xf770;t.Q=0x0051;t.Qcircle=0x24c6;t.Qmonospace=0xff31;t.Qsmall=0xf771;t.R=0x0052;t.Raarmenian=0x054c;t.Racute=0x0154;t.Rcaron=0x0158;t.Rcedilla=0x0156;t.Rcircle=0x24c7;t.Rcommaaccent=0x0156;t.Rdblgrave=0x0210;t.Rdotaccent=0x1e58;t.Rdotbelow=0x1e5a;t.Rdotbelowmacron=0x1e5c;t.Reharmenian=0x0550;t.Rfraktur=0x211c;t.Rho=0x03a1;t.Ringsmall=0xf6fc;t.Rinvertedbreve=0x0212;t.Rlinebelow=0x1e5e;t.Rmonospace=0xff32;t.Rsmall=0xf772;t.Rsmallinverted=0x0281;t.Rsmallinvertedsuperior=0x02b6;t.S=0x0053;t.SF010000=0x250c;t.SF020000=0x2514;t.SF030000=0x2510;t.SF040000=0x2518;t.SF050000=0x253c;t.SF060000=0x252c;t.SF070000=0x2534;t.SF080000=0x251c;t.SF090000=0x2524;t.SF100000=0x2500;t.SF110000=0x2502;t.SF190000=0x2561;t.SF200000=0x2562;t.SF210000=0x2556;t.SF220000=0x2555;t.SF230000=0x2563;t.SF240000=0x2551;t.SF250000=0x2557;t.SF260000=0x255d;t.SF270000=0x255c;t.SF280000=0x255b;t.SF360000=0x255e;t.SF370000=0x255f;t.SF380000=0x255a;t.SF390000=0x2554;t.SF400000=0x2569;t.SF410000=0x2566;t.SF420000=0x2560;t.SF430000=0x2550;t.SF440000=0x256c;t.SF450000=0x2567;t.SF460000=0x2568;t.SF470000=0x2564;t.SF480000=0x2565;t.SF490000=0x2559;t.SF500000=0x2558;t.SF510000=0x2552;t.SF520000=0x2553;t.SF530000=0x256b;t.SF540000=0x256a;t.Sacute=0x015a;t.Sacutedotaccent=0x1e64;t.Sampigreek=0x03e0;t.Scaron=0x0160;t.Scarondotaccent=0x1e66;t.Scaronsmall=0xf6fd;t.Scedilla=0x015e;t.Schwa=0x018f;t.Schwacyrillic=0x04d8;t.Schwadieresiscyrillic=0x04da;t.Scircle=0x24c8;t.Scircumflex=0x015c;t.Scommaaccent=0x0218;t.Sdotaccent=0x1e60;t.Sdotbelow=0x1e62;t.Sdotbelowdotaccent=0x1e68;t.Seharmenian=0x054d;t.Sevenroman=0x2166;t.Shaarmenian=0x0547;t.Shacyrillic=0x0428;t.Shchacyrillic=0x0429;t.Sheicoptic=0x03e2;t.Shhacyrillic=0x04ba;t.Shimacoptic=0x03ec;t.Sigma=0x03a3;t.Sixroman=0x2165;t.Smonospace=0xff33;t.Softsigncyrillic=0x042c;t.Ssmall=0xf773;t.Stigmagreek=0x03da;t.T=0x0054;t.Tau=0x03a4;t.Tbar=0x0166;t.Tcaron=0x0164;t.Tcedilla=0x0162;t.Tcircle=0x24c9;t.Tcircumflexbelow=0x1e70;t.Tcommaaccent=0x0162;t.Tdotaccent=0x1e6a;t.Tdotbelow=0x1e6c;t.Tecyrillic=0x0422;t.Tedescendercyrillic=0x04ac;t.Tenroman=0x2169;t.Tetsecyrillic=0x04b4;t.Theta=0x0398;t.Thook=0x01ac;t.Thorn=0x00de;t.Thornsmall=0xf7fe;t.Threeroman=0x2162;t.Tildesmall=0xf6fe;t.Tiwnarmenian=0x054f;t.Tlinebelow=0x1e6e;t.Tmonospace=0xff34;t.Toarmenian=0x0539;t.Tonefive=0x01bc;t.Tonesix=0x0184;t.Tonetwo=0x01a7;t.Tretroflexhook=0x01ae;t.Tsecyrillic=0x0426;t.Tshecyrillic=0x040b;t.Tsmall=0xf774;t.Twelveroman=0x216b;t.Tworoman=0x2161;t.U=0x0055;t.Uacute=0x00da;t.Uacutesmall=0xf7fa;t.Ubreve=0x016c;t.Ucaron=0x01d3;t.Ucircle=0x24ca;t.Ucircumflex=0x00db;t.Ucircumflexbelow=0x1e76;t.Ucircumflexsmall=0xf7fb;t.Ucyrillic=0x0423;t.Udblacute=0x0170;t.Udblgrave=0x0214;t.Udieresis=0x00dc;t.Udieresisacute=0x01d7;t.Udieresisbelow=0x1e72;t.Udieresiscaron=0x01d9;t.Udieresiscyrillic=0x04f0;t.Udieresisgrave=0x01db;t.Udieresismacron=0x01d5;t.Udieresissmall=0xf7fc;t.Udotbelow=0x1ee4;t.Ugrave=0x00d9;t.Ugravesmall=0xf7f9;t.Uhookabove=0x1ee6;t.Uhorn=0x01af;t.Uhornacute=0x1ee8;t.Uhorndotbelow=0x1ef0;t.Uhorngrave=0x1eea;t.Uhornhookabove=0x1eec;t.Uhorntilde=0x1eee;t.Uhungarumlaut=0x0170;t.Uhungarumlautcyrillic=0x04f2;t.Uinvertedbreve=0x0216;t.Ukcyrillic=0x0478;t.Umacron=0x016a;t.Umacroncyrillic=0x04ee;t.Umacrondieresis=0x1e7a;t.Umonospace=0xff35;t.Uogonek=0x0172;t.Upsilon=0x03a5;t.Upsilon1=0x03d2;t.Upsilonacutehooksymbolgreek=0x03d3;t.Upsilonafrican=0x01b1;t.Upsilondieresis=0x03ab;t.Upsilondieresishooksymbolgreek=0x03d4;t.Upsilonhooksymbol=0x03d2;t.Upsilontonos=0x038e;t.Uring=0x016e;t.Ushortcyrillic=0x040e;t.Usmall=0xf775;t.Ustraightcyrillic=0x04ae;t.Ustraightstrokecyrillic=0x04b0;t.Utilde=0x0168;t.Utildeacute=0x1e78;t.Utildebelow=0x1e74;t.V=0x0056;t.Vcircle=0x24cb;t.Vdotbelow=0x1e7e;t.Vecyrillic=0x0412;t.Vewarmenian=0x054e;t.Vhook=0x01b2;t.Vmonospace=0xff36;t.Voarmenian=0x0548;t.Vsmall=0xf776;t.Vtilde=0x1e7c;t.W=0x0057;t.Wacute=0x1e82;t.Wcircle=0x24cc;t.Wcircumflex=0x0174;t.Wdieresis=0x1e84;t.Wdotaccent=0x1e86;t.Wdotbelow=0x1e88;t.Wgrave=0x1e80;t.Wmonospace=0xff37;t.Wsmall=0xf777;t.X=0x0058;t.Xcircle=0x24cd;t.Xdieresis=0x1e8c;t.Xdotaccent=0x1e8a;t.Xeharmenian=0x053d;t.Xi=0x039e;t.Xmonospace=0xff38;t.Xsmall=0xf778;t.Y=0x0059;t.Yacute=0x00dd;t.Yacutesmall=0xf7fd;t.Yatcyrillic=0x0462;t.Ycircle=0x24ce;t.Ycircumflex=0x0176;t.Ydieresis=0x0178;t.Ydieresissmall=0xf7ff;t.Ydotaccent=0x1e8e;t.Ydotbelow=0x1ef4;t.Yericyrillic=0x042b;t.Yerudieresiscyrillic=0x04f8;t.Ygrave=0x1ef2;t.Yhook=0x01b3;t.Yhookabove=0x1ef6;t.Yiarmenian=0x0545;t.Yicyrillic=0x0407;t.Yiwnarmenian=0x0552;t.Ymonospace=0xff39;t.Ysmall=0xf779;t.Ytilde=0x1ef8;t.Yusbigcyrillic=0x046a;t.Yusbigiotifiedcyrillic=0x046c;t.Yuslittlecyrillic=0x0466;t.Yuslittleiotifiedcyrillic=0x0468;t.Z=0x005a;t.Zaarmenian=0x0536;t.Zacute=0x0179;t.Zcaron=0x017d;t.Zcaronsmall=0xf6ff;t.Zcircle=0x24cf;t.Zcircumflex=0x1e90;t.Zdot=0x017b;t.Zdotaccent=0x017b;t.Zdotbelow=0x1e92;t.Zecyrillic=0x0417;t.Zedescendercyrillic=0x0498;t.Zedieresiscyrillic=0x04de;t.Zeta=0x0396;t.Zhearmenian=0x053a;t.Zhebrevecyrillic=0x04c1;t.Zhecyrillic=0x0416;t.Zhedescendercyrillic=0x0496;t.Zhedieresiscyrillic=0x04dc;t.Zlinebelow=0x1e94;t.Zmonospace=0xff3a;t.Zsmall=0xf77a;t.Zstroke=0x01b5;t.a=0x0061;t.aabengali=0x0986;t.aacute=0x00e1;t.aadeva=0x0906;t.aagujarati=0x0a86;t.aagurmukhi=0x0a06;t.aamatragurmukhi=0x0a3e;t.aarusquare=0x3303;t.aavowelsignbengali=0x09be;t.aavowelsigndeva=0x093e;t.aavowelsigngujarati=0x0abe;t.abbreviationmarkarmenian=0x055f;t.abbreviationsigndeva=0x0970;t.abengali=0x0985;t.abopomofo=0x311a;t.abreve=0x0103;t.abreveacute=0x1eaf;t.abrevecyrillic=0x04d1;t.abrevedotbelow=0x1eb7;t.abrevegrave=0x1eb1;t.abrevehookabove=0x1eb3;t.abrevetilde=0x1eb5;t.acaron=0x01ce;t.acircle=0x24d0;t.acircumflex=0x00e2;t.acircumflexacute=0x1ea5;t.acircumflexdotbelow=0x1ead;t.acircumflexgrave=0x1ea7;t.acircumflexhookabove=0x1ea9;t.acircumflextilde=0x1eab;t.acute=0x00b4;t.acutebelowcmb=0x0317;t.acutecmb=0x0301;t.acutecomb=0x0301;t.acutedeva=0x0954;t.acutelowmod=0x02cf;t.acutetonecmb=0x0341;t.acyrillic=0x0430;t.adblgrave=0x0201;t.addakgurmukhi=0x0a71;t.adeva=0x0905;t.adieresis=0x00e4;t.adieresiscyrillic=0x04d3;t.adieresismacron=0x01df;t.adotbelow=0x1ea1;t.adotmacron=0x01e1;t.ae=0x00e6;t.aeacute=0x01fd;t.aekorean=0x3150;t.aemacron=0x01e3;t.afii00208=0x2015;t.afii08941=0x20a4;t.afii10017=0x0410;t.afii10018=0x0411;t.afii10019=0x0412;t.afii10020=0x0413;t.afii10021=0x0414;t.afii10022=0x0415;t.afii10023=0x0401;t.afii10024=0x0416;t.afii10025=0x0417;t.afii10026=0x0418;t.afii10027=0x0419;t.afii10028=0x041a;t.afii10029=0x041b;t.afii10030=0x041c;t.afii10031=0x041d;t.afii10032=0x041e;t.afii10033=0x041f;t.afii10034=0x0420;t.afii10035=0x0421;t.afii10036=0x0422;t.afii10037=0x0423;t.afii10038=0x0424;t.afii10039=0x0425;t.afii10040=0x0426;t.afii10041=0x0427;t.afii10042=0x0428;t.afii10043=0x0429;t.afii10044=0x042a;t.afii10045=0x042b;t.afii10046=0x042c;t.afii10047=0x042d;t.afii10048=0x042e;t.afii10049=0x042f;t.afii10050=0x0490;t.afii10051=0x0402;t.afii10052=0x0403;t.afii10053=0x0404;t.afii10054=0x0405;t.afii10055=0x0406;t.afii10056=0x0407;t.afii10057=0x0408;t.afii10058=0x0409;t.afii10059=0x040a;t.afii10060=0x040b;t.afii10061=0x040c;t.afii10062=0x040e;t.afii10063=0xf6c4;t.afii10064=0xf6c5;t.afii10065=0x0430;t.afii10066=0x0431;t.afii10067=0x0432;t.afii10068=0x0433;t.afii10069=0x0434;t.afii10070=0x0435;t.afii10071=0x0451;t.afii10072=0x0436;t.afii10073=0x0437;t.afii10074=0x0438;t.afii10075=0x0439;t.afii10076=0x043a;t.afii10077=0x043b;t.afii10078=0x043c;t.afii10079=0x043d;t.afii10080=0x043e;t.afii10081=0x043f;t.afii10082=0x0440;t.afii10083=0x0441;t.afii10084=0x0442;t.afii10085=0x0443;t.afii10086=0x0444;t.afii10087=0x0445;t.afii10088=0x0446;t.afii10089=0x0447;t.afii10090=0x0448;t.afii10091=0x0449;t.afii10092=0x044a;t.afii10093=0x044b;t.afii10094=0x044c;t.afii10095=0x044d;t.afii10096=0x044e;t.afii10097=0x044f;t.afii10098=0x0491;t.afii10099=0x0452;t.afii10100=0x0453;t.afii10101=0x0454;t.afii10102=0x0455;t.afii10103=0x0456;t.afii10104=0x0457;t.afii10105=0x0458;t.afii10106=0x0459;t.afii10107=0x045a;t.afii10108=0x045b;t.afii10109=0x045c;t.afii10110=0x045e;t.afii10145=0x040f;t.afii10146=0x0462;t.afii10147=0x0472;t.afii10148=0x0474;t.afii10192=0xf6c6;t.afii10193=0x045f;t.afii10194=0x0463;t.afii10195=0x0473;t.afii10196=0x0475;t.afii10831=0xf6c7;t.afii10832=0xf6c8;t.afii10846=0x04d9;t.afii299=0x200e;t.afii300=0x200f;t.afii301=0x200d;t.afii57381=0x066a;t.afii57388=0x060c;t.afii57392=0x0660;t.afii57393=0x0661;t.afii57394=0x0662;t.afii57395=0x0663;t.afii57396=0x0664;t.afii57397=0x0665;t.afii57398=0x0666;t.afii57399=0x0667;t.afii57400=0x0668;t.afii57401=0x0669;t.afii57403=0x061b;t.afii57407=0x061f;t.afii57409=0x0621;t.afii57410=0x0622;t.afii57411=0x0623;t.afii57412=0x0624;t.afii57413=0x0625;t.afii57414=0x0626;t.afii57415=0x0627;t.afii57416=0x0628;t.afii57417=0x0629;t.afii57418=0x062a;t.afii57419=0x062b;t.afii57420=0x062c;t.afii57421=0x062d;t.afii57422=0x062e;t.afii57423=0x062f;t.afii57424=0x0630;t.afii57425=0x0631;t.afii57426=0x0632;t.afii57427=0x0633;t.afii57428=0x0634;t.afii57429=0x0635;t.afii57430=0x0636;t.afii57431=0x0637;t.afii57432=0x0638;t.afii57433=0x0639;t.afii57434=0x063a;t.afii57440=0x0640;t.afii57441=0x0641;t.afii57442=0x0642;t.afii57443=0x0643;t.afii57444=0x0644;t.afii57445=0x0645;t.afii57446=0x0646;t.afii57448=0x0648;t.afii57449=0x0649;t.afii57450=0x064a;t.afii57451=0x064b;t.afii57452=0x064c;t.afii57453=0x064d;t.afii57454=0x064e;t.afii57455=0x064f;t.afii57456=0x0650;t.afii57457=0x0651;t.afii57458=0x0652;t.afii57470=0x0647;t.afii57505=0x06a4;t.afii57506=0x067e;t.afii57507=0x0686;t.afii57508=0x0698;t.afii57509=0x06af;t.afii57511=0x0679;t.afii57512=0x0688;t.afii57513=0x0691;t.afii57514=0x06ba;t.afii57519=0x06d2;t.afii57534=0x06d5;t.afii57636=0x20aa;t.afii57645=0x05be;t.afii57658=0x05c3;t.afii57664=0x05d0;t.afii57665=0x05d1;t.afii57666=0x05d2;t.afii57667=0x05d3;t.afii57668=0x05d4;t.afii57669=0x05d5;t.afii57670=0x05d6;t.afii57671=0x05d7;t.afii57672=0x05d8;t.afii57673=0x05d9;t.afii57674=0x05da;t.afii57675=0x05db;t.afii57676=0x05dc;t.afii57677=0x05dd;t.afii57678=0x05de;t.afii57679=0x05df;t.afii57680=0x05e0;t.afii57681=0x05e1;t.afii57682=0x05e2;t.afii57683=0x05e3;t.afii57684=0x05e4;t.afii57685=0x05e5;t.afii57686=0x05e6;t.afii57687=0x05e7;t.afii57688=0x05e8;t.afii57689=0x05e9;t.afii57690=0x05ea;t.afii57694=0xfb2a;t.afii57695=0xfb2b;t.afii57700=0xfb4b;t.afii57705=0xfb1f;t.afii57716=0x05f0;t.afii57717=0x05f1;t.afii57718=0x05f2;t.afii57723=0xfb35;t.afii57793=0x05b4;t.afii57794=0x05b5;t.afii57795=0x05b6;t.afii57796=0x05bb;t.afii57797=0x05b8;t.afii57798=0x05b7;t.afii57799=0x05b0;t.afii57800=0x05b2;t.afii57801=0x05b1;t.afii57802=0x05b3;t.afii57803=0x05c2;t.afii57804=0x05c1;t.afii57806=0x05b9;t.afii57807=0x05bc;t.afii57839=0x05bd;t.afii57841=0x05bf;t.afii57842=0x05c0;t.afii57929=0x02bc;t.afii61248=0x2105;t.afii61289=0x2113;t.afii61352=0x2116;t.afii61573=0x202c;t.afii61574=0x202d;t.afii61575=0x202e;t.afii61664=0x200c;t.afii63167=0x066d;t.afii64937=0x02bd;t.agrave=0x00e0;t.agujarati=0x0a85;t.agurmukhi=0x0a05;t.ahiragana=0x3042;t.ahookabove=0x1ea3;t.aibengali=0x0990;t.aibopomofo=0x311e;t.aideva=0x0910;t.aiecyrillic=0x04d5;t.aigujarati=0x0a90;t.aigurmukhi=0x0a10;t.aimatragurmukhi=0x0a48;t.ainarabic=0x0639;t.ainfinalarabic=0xfeca;t.aininitialarabic=0xfecb;t.ainmedialarabic=0xfecc;t.ainvertedbreve=0x0203;t.aivowelsignbengali=0x09c8;t.aivowelsigndeva=0x0948;t.aivowelsigngujarati=0x0ac8;t.akatakana=0x30a2;t.akatakanahalfwidth=0xff71;t.akorean=0x314f;t.alef=0x05d0;t.alefarabic=0x0627;t.alefdageshhebrew=0xfb30;t.aleffinalarabic=0xfe8e;t.alefhamzaabovearabic=0x0623;t.alefhamzaabovefinalarabic=0xfe84;t.alefhamzabelowarabic=0x0625;t.alefhamzabelowfinalarabic=0xfe88;t.alefhebrew=0x05d0;t.aleflamedhebrew=0xfb4f;t.alefmaddaabovearabic=0x0622;t.alefmaddaabovefinalarabic=0xfe82;t.alefmaksuraarabic=0x0649;t.alefmaksurafinalarabic=0xfef0;t.alefmaksurainitialarabic=0xfef3;t.alefmaksuramedialarabic=0xfef4;t.alefpatahhebrew=0xfb2e;t.alefqamatshebrew=0xfb2f;t.aleph=0x2135;t.allequal=0x224c;t.alpha=0x03b1;t.alphatonos=0x03ac;t.amacron=0x0101;t.amonospace=0xff41;t.ampersand=0x0026;t.ampersandmonospace=0xff06;t.ampersandsmall=0xf726;t.amsquare=0x33c2;t.anbopomofo=0x3122;t.angbopomofo=0x3124;t.angbracketleft=0x3008;t.angbracketright=0x3009;t.angkhankhuthai=0x0e5a;t.angle=0x2220;t.anglebracketleft=0x3008;t.anglebracketleftvertical=0xfe3f;t.anglebracketright=0x3009;t.anglebracketrightvertical=0xfe40;t.angleleft=0x2329;t.angleright=0x232a;t.angstrom=0x212b;t.anoteleia=0x0387;t.anudattadeva=0x0952;t.anusvarabengali=0x0982;t.anusvaradeva=0x0902;t.anusvaragujarati=0x0a82;t.aogonek=0x0105;t.apaatosquare=0x3300;t.aparen=0x249c;t.apostrophearmenian=0x055a;t.apostrophemod=0x02bc;t.apple=0xf8ff;t.approaches=0x2250;t.approxequal=0x2248;t.approxequalorimage=0x2252;t.approximatelyequal=0x2245;t.araeaekorean=0x318e;t.araeakorean=0x318d;t.arc=0x2312;t.arighthalfring=0x1e9a;t.aring=0x00e5;t.aringacute=0x01fb;t.aringbelow=0x1e01;t.arrowboth=0x2194;t.arrowdashdown=0x21e3;t.arrowdashleft=0x21e0;t.arrowdashright=0x21e2;t.arrowdashup=0x21e1;t.arrowdblboth=0x21d4;t.arrowdbldown=0x21d3;t.arrowdblleft=0x21d0;t.arrowdblright=0x21d2;t.arrowdblup=0x21d1;t.arrowdown=0x2193;t.arrowdownleft=0x2199;t.arrowdownright=0x2198;t.arrowdownwhite=0x21e9;t.arrowheaddownmod=0x02c5;t.arrowheadleftmod=0x02c2;t.arrowheadrightmod=0x02c3;t.arrowheadupmod=0x02c4;t.arrowhorizex=0xf8e7;t.arrowleft=0x2190;t.arrowleftdbl=0x21d0;t.arrowleftdblstroke=0x21cd;t.arrowleftoverright=0x21c6;t.arrowleftwhite=0x21e6;t.arrowright=0x2192;t.arrowrightdblstroke=0x21cf;t.arrowrightheavy=0x279e;t.arrowrightoverleft=0x21c4;t.arrowrightwhite=0x21e8;t.arrowtableft=0x21e4;t.arrowtabright=0x21e5;t.arrowup=0x2191;t.arrowupdn=0x2195;t.arrowupdnbse=0x21a8;t.arrowupdownbase=0x21a8;t.arrowupleft=0x2196;t.arrowupleftofdown=0x21c5;t.arrowupright=0x2197;t.arrowupwhite=0x21e7;t.arrowvertex=0xf8e6;t.asciicircum=0x005e;t.asciicircummonospace=0xff3e;t.asciitilde=0x007e;t.asciitildemonospace=0xff5e;t.ascript=0x0251;t.ascriptturned=0x0252;t.asmallhiragana=0x3041;t.asmallkatakana=0x30a1;t.asmallkatakanahalfwidth=0xff67;t.asterisk=0x002a;t.asteriskaltonearabic=0x066d;t.asteriskarabic=0x066d;t.asteriskmath=0x2217;t.asteriskmonospace=0xff0a;t.asterisksmall=0xfe61;t.asterism=0x2042;t.asuperior=0xf6e9;t.asymptoticallyequal=0x2243;t.at=0x0040;t.atilde=0x00e3;t.atmonospace=0xff20;t.atsmall=0xfe6b;t.aturned=0x0250;t.aubengali=0x0994;t.aubopomofo=0x3120;t.audeva=0x0914;t.augujarati=0x0a94;t.augurmukhi=0x0a14;t.aulengthmarkbengali=0x09d7;t.aumatragurmukhi=0x0a4c;t.auvowelsignbengali=0x09cc;t.auvowelsigndeva=0x094c;t.auvowelsigngujarati=0x0acc;t.avagrahadeva=0x093d;t.aybarmenian=0x0561;t.ayin=0x05e2;t.ayinaltonehebrew=0xfb20;t.ayinhebrew=0x05e2;t.b=0x0062;t.babengali=0x09ac;t.backslash=0x005c;t.backslashmonospace=0xff3c;t.badeva=0x092c;t.bagujarati=0x0aac;t.bagurmukhi=0x0a2c;t.bahiragana=0x3070;t.bahtthai=0x0e3f;t.bakatakana=0x30d0;t.bar=0x007c;t.barmonospace=0xff5c;t.bbopomofo=0x3105;t.bcircle=0x24d1;t.bdotaccent=0x1e03;t.bdotbelow=0x1e05;t.beamedsixteenthnotes=0x266c;t.because=0x2235;t.becyrillic=0x0431;t.beharabic=0x0628;t.behfinalarabic=0xfe90;t.behinitialarabic=0xfe91;t.behiragana=0x3079;t.behmedialarabic=0xfe92;t.behmeeminitialarabic=0xfc9f;t.behmeemisolatedarabic=0xfc08;t.behnoonfinalarabic=0xfc6d;t.bekatakana=0x30d9;t.benarmenian=0x0562;t.bet=0x05d1;t.beta=0x03b2;t.betasymbolgreek=0x03d0;t.betdagesh=0xfb31;t.betdageshhebrew=0xfb31;t.bethebrew=0x05d1;t.betrafehebrew=0xfb4c;t.bhabengali=0x09ad;t.bhadeva=0x092d;t.bhagujarati=0x0aad;t.bhagurmukhi=0x0a2d;t.bhook=0x0253;t.bihiragana=0x3073;t.bikatakana=0x30d3;t.bilabialclick=0x0298;t.bindigurmukhi=0x0a02;t.birusquare=0x3331;t.blackcircle=0x25cf;t.blackdiamond=0x25c6;t.blackdownpointingtriangle=0x25bc;t.blackleftpointingpointer=0x25c4;t.blackleftpointingtriangle=0x25c0;t.blacklenticularbracketleft=0x3010;t.blacklenticularbracketleftvertical=0xfe3b;t.blacklenticularbracketright=0x3011;t.blacklenticularbracketrightvertical=0xfe3c;t.blacklowerlefttriangle=0x25e3;t.blacklowerrighttriangle=0x25e2;t.blackrectangle=0x25ac;t.blackrightpointingpointer=0x25ba;t.blackrightpointingtriangle=0x25b6;t.blacksmallsquare=0x25aa;t.blacksmilingface=0x263b;t.blacksquare=0x25a0;t.blackstar=0x2605;t.blackupperlefttriangle=0x25e4;t.blackupperrighttriangle=0x25e5;t.blackuppointingsmalltriangle=0x25b4;t.blackuppointingtriangle=0x25b2;t.blank=0x2423;t.blinebelow=0x1e07;t.block=0x2588;t.bmonospace=0xff42;t.bobaimaithai=0x0e1a;t.bohiragana=0x307c;t.bokatakana=0x30dc;t.bparen=0x249d;t.bqsquare=0x33c3;t.braceex=0xf8f4;t.braceleft=0x007b;t.braceleftbt=0xf8f3;t.braceleftmid=0xf8f2;t.braceleftmonospace=0xff5b;t.braceleftsmall=0xfe5b;t.bracelefttp=0xf8f1;t.braceleftvertical=0xfe37;t.braceright=0x007d;t.bracerightbt=0xf8fe;t.bracerightmid=0xf8fd;t.bracerightmonospace=0xff5d;t.bracerightsmall=0xfe5c;t.bracerighttp=0xf8fc;t.bracerightvertical=0xfe38;t.bracketleft=0x005b;t.bracketleftbt=0xf8f0;t.bracketleftex=0xf8ef;t.bracketleftmonospace=0xff3b;t.bracketlefttp=0xf8ee;t.bracketright=0x005d;t.bracketrightbt=0xf8fb;t.bracketrightex=0xf8fa;t.bracketrightmonospace=0xff3d;t.bracketrighttp=0xf8f9;t.breve=0x02d8;t.brevebelowcmb=0x032e;t.brevecmb=0x0306;t.breveinvertedbelowcmb=0x032f;t.breveinvertedcmb=0x0311;t.breveinverteddoublecmb=0x0361;t.bridgebelowcmb=0x032a;t.bridgeinvertedbelowcmb=0x033a;t.brokenbar=0x00a6;t.bstroke=0x0180;t.bsuperior=0xf6ea;t.btopbar=0x0183;t.buhiragana=0x3076;t.bukatakana=0x30d6;t.bullet=0x2022;t.bulletinverse=0x25d8;t.bulletoperator=0x2219;t.bullseye=0x25ce;t.c=0x0063;t.caarmenian=0x056e;t.cabengali=0x099a;t.cacute=0x0107;t.cadeva=0x091a;t.cagujarati=0x0a9a;t.cagurmukhi=0x0a1a;t.calsquare=0x3388;t.candrabindubengali=0x0981;t.candrabinducmb=0x0310;t.candrabindudeva=0x0901;t.candrabindugujarati=0x0a81;t.capslock=0x21ea;t.careof=0x2105;t.caron=0x02c7;t.caronbelowcmb=0x032c;t.caroncmb=0x030c;t.carriagereturn=0x21b5;t.cbopomofo=0x3118;t.ccaron=0x010d;t.ccedilla=0x00e7;t.ccedillaacute=0x1e09;t.ccircle=0x24d2;t.ccircumflex=0x0109;t.ccurl=0x0255;t.cdot=0x010b;t.cdotaccent=0x010b;t.cdsquare=0x33c5;t.cedilla=0x00b8;t.cedillacmb=0x0327;t.cent=0x00a2;t.centigrade=0x2103;t.centinferior=0xf6df;t.centmonospace=0xffe0;t.centoldstyle=0xf7a2;t.centsuperior=0xf6e0;t.chaarmenian=0x0579;t.chabengali=0x099b;t.chadeva=0x091b;t.chagujarati=0x0a9b;t.chagurmukhi=0x0a1b;t.chbopomofo=0x3114;t.cheabkhasiancyrillic=0x04bd;t.checkmark=0x2713;t.checyrillic=0x0447;t.chedescenderabkhasiancyrillic=0x04bf;t.chedescendercyrillic=0x04b7;t.chedieresiscyrillic=0x04f5;t.cheharmenian=0x0573;t.chekhakassiancyrillic=0x04cc;t.cheverticalstrokecyrillic=0x04b9;t.chi=0x03c7;t.chieuchacirclekorean=0x3277;t.chieuchaparenkorean=0x3217;t.chieuchcirclekorean=0x3269;t.chieuchkorean=0x314a;t.chieuchparenkorean=0x3209;t.chochangthai=0x0e0a;t.chochanthai=0x0e08;t.chochingthai=0x0e09;t.chochoethai=0x0e0c;t.chook=0x0188;t.cieucacirclekorean=0x3276;t.cieucaparenkorean=0x3216;t.cieuccirclekorean=0x3268;t.cieuckorean=0x3148;t.cieucparenkorean=0x3208;t.cieucuparenkorean=0x321c;t.circle=0x25cb;t.circlecopyrt=0x00a9;t.circlemultiply=0x2297;t.circleot=0x2299;t.circleplus=0x2295;t.circlepostalmark=0x3036;t.circlewithlefthalfblack=0x25d0;t.circlewithrighthalfblack=0x25d1;t.circumflex=0x02c6;t.circumflexbelowcmb=0x032d;t.circumflexcmb=0x0302;t.clear=0x2327;t.clickalveolar=0x01c2;t.clickdental=0x01c0;t.clicklateral=0x01c1;t.clickretroflex=0x01c3;t.club=0x2663;t.clubsuitblack=0x2663;t.clubsuitwhite=0x2667;t.cmcubedsquare=0x33a4;t.cmonospace=0xff43;t.cmsquaredsquare=0x33a0;t.coarmenian=0x0581;t.colon=0x003a;t.colonmonetary=0x20a1;t.colonmonospace=0xff1a;t.colonsign=0x20a1;t.colonsmall=0xfe55;t.colontriangularhalfmod=0x02d1;t.colontriangularmod=0x02d0;t.comma=0x002c;t.commaabovecmb=0x0313;t.commaaboverightcmb=0x0315;t.commaaccent=0xf6c3;t.commaarabic=0x060c;t.commaarmenian=0x055d;t.commainferior=0xf6e1;t.commamonospace=0xff0c;t.commareversedabovecmb=0x0314;t.commareversedmod=0x02bd;t.commasmall=0xfe50;t.commasuperior=0xf6e2;t.commaturnedabovecmb=0x0312;t.commaturnedmod=0x02bb;t.compass=0x263c;t.congruent=0x2245;t.contourintegral=0x222e;t.control=0x2303;t.controlACK=0x0006;t.controlBEL=0x0007;t.controlBS=0x0008;t.controlCAN=0x0018;t.controlCR=0x000d;t.controlDC1=0x0011;t.controlDC2=0x0012;t.controlDC3=0x0013;t.controlDC4=0x0014;t.controlDEL=0x007f;t.controlDLE=0x0010;t.controlEM=0x0019;t.controlENQ=0x0005;t.controlEOT=0x0004;t.controlESC=0x001b;t.controlETB=0x0017;t.controlETX=0x0003;t.controlFF=0x000c;t.controlFS=0x001c;t.controlGS=0x001d;t.controlHT=0x0009;t.controlLF=0x000a;t.controlNAK=0x0015;t.controlNULL=0x0000;t.controlRS=0x001e;t.controlSI=0x000f;t.controlSO=0x000e;t.controlSOT=0x0002;t.controlSTX=0x0001;t.controlSUB=0x001a;t.controlSYN=0x0016;t.controlUS=0x001f;t.controlVT=0x000b;t.copyright=0x00a9;t.copyrightsans=0xf8e9;t.copyrightserif=0xf6d9;t.cornerbracketleft=0x300c;t.cornerbracketlefthalfwidth=0xff62;t.cornerbracketleftvertical=0xfe41;t.cornerbracketright=0x300d;t.cornerbracketrighthalfwidth=0xff63;t.cornerbracketrightvertical=0xfe42;t.corporationsquare=0x337f;t.cosquare=0x33c7;t.coverkgsquare=0x33c6;t.cparen=0x249e;t.cruzeiro=0x20a2;t.cstretched=0x0297;t.curlyand=0x22cf;t.curlyor=0x22ce;t.currency=0x00a4;t.cyrBreve=0xf6d1;t.cyrFlex=0xf6d2;t.cyrbreve=0xf6d4;t.cyrflex=0xf6d5;t.d=0x0064;t.daarmenian=0x0564;t.dabengali=0x09a6;t.dadarabic=0x0636;t.dadeva=0x0926;t.dadfinalarabic=0xfebe;t.dadinitialarabic=0xfebf;t.dadmedialarabic=0xfec0;t.dagesh=0x05bc;t.dageshhebrew=0x05bc;t.dagger=0x2020;t.daggerdbl=0x2021;t.dagujarati=0x0aa6;t.dagurmukhi=0x0a26;t.dahiragana=0x3060;t.dakatakana=0x30c0;t.dalarabic=0x062f;t.dalet=0x05d3;t.daletdagesh=0xfb33;t.daletdageshhebrew=0xfb33;t.dalethebrew=0x05d3;t.dalfinalarabic=0xfeaa;t.dammaarabic=0x064f;t.dammalowarabic=0x064f;t.dammatanaltonearabic=0x064c;t.dammatanarabic=0x064c;t.danda=0x0964;t.dargahebrew=0x05a7;t.dargalefthebrew=0x05a7;t.dasiapneumatacyrilliccmb=0x0485;t.dblGrave=0xf6d3;t.dblanglebracketleft=0x300a;t.dblanglebracketleftvertical=0xfe3d;t.dblanglebracketright=0x300b;t.dblanglebracketrightvertical=0xfe3e;t.dblarchinvertedbelowcmb=0x032b;t.dblarrowleft=0x21d4;t.dblarrowright=0x21d2;t.dbldanda=0x0965;t.dblgrave=0xf6d6;t.dblgravecmb=0x030f;t.dblintegral=0x222c;t.dbllowline=0x2017;t.dbllowlinecmb=0x0333;t.dbloverlinecmb=0x033f;t.dblprimemod=0x02ba;t.dblverticalbar=0x2016;t.dblverticallineabovecmb=0x030e;t.dbopomofo=0x3109;t.dbsquare=0x33c8;t.dcaron=0x010f;t.dcedilla=0x1e11;t.dcircle=0x24d3;t.dcircumflexbelow=0x1e13;t.dcroat=0x0111;t.ddabengali=0x09a1;t.ddadeva=0x0921;t.ddagujarati=0x0aa1;t.ddagurmukhi=0x0a21;t.ddalarabic=0x0688;t.ddalfinalarabic=0xfb89;t.dddhadeva=0x095c;t.ddhabengali=0x09a2;t.ddhadeva=0x0922;t.ddhagujarati=0x0aa2;t.ddhagurmukhi=0x0a22;t.ddotaccent=0x1e0b;t.ddotbelow=0x1e0d;t.decimalseparatorarabic=0x066b;t.decimalseparatorpersian=0x066b;t.decyrillic=0x0434;t.degree=0x00b0;t.dehihebrew=0x05ad;t.dehiragana=0x3067;t.deicoptic=0x03ef;t.dekatakana=0x30c7;t.deleteleft=0x232b;t.deleteright=0x2326;t.delta=0x03b4;t.deltaturned=0x018d;t.denominatorminusonenumeratorbengali=0x09f8;t.dezh=0x02a4;t.dhabengali=0x09a7;t.dhadeva=0x0927;t.dhagujarati=0x0aa7;t.dhagurmukhi=0x0a27;t.dhook=0x0257;t.dialytikatonos=0x0385;t.dialytikatonoscmb=0x0344;t.diamond=0x2666;t.diamondsuitwhite=0x2662;t.dieresis=0x00a8;t.dieresisacute=0xf6d7;t.dieresisbelowcmb=0x0324;t.dieresiscmb=0x0308;t.dieresisgrave=0xf6d8;t.dieresistonos=0x0385;t.dihiragana=0x3062;t.dikatakana=0x30c2;t.dittomark=0x3003;t.divide=0x00f7;t.divides=0x2223;t.divisionslash=0x2215;t.djecyrillic=0x0452;t.dkshade=0x2593;t.dlinebelow=0x1e0f;t.dlsquare=0x3397;t.dmacron=0x0111;t.dmonospace=0xff44;t.dnblock=0x2584;t.dochadathai=0x0e0e;t.dodekthai=0x0e14;t.dohiragana=0x3069;t.dokatakana=0x30c9;t.dollar=0x0024;t.dollarinferior=0xf6e3;t.dollarmonospace=0xff04;t.dollaroldstyle=0xf724;t.dollarsmall=0xfe69;t.dollarsuperior=0xf6e4;t.dong=0x20ab;t.dorusquare=0x3326;t.dotaccent=0x02d9;t.dotaccentcmb=0x0307;t.dotbelowcmb=0x0323;t.dotbelowcomb=0x0323;t.dotkatakana=0x30fb;t.dotlessi=0x0131;t.dotlessj=0xf6be;t.dotlessjstrokehook=0x0284;t.dotmath=0x22c5;t.dottedcircle=0x25cc;t.doubleyodpatah=0xfb1f;t.doubleyodpatahhebrew=0xfb1f;t.downtackbelowcmb=0x031e;t.downtackmod=0x02d5;t.dparen=0x249f;t.dsuperior=0xf6eb;t.dtail=0x0256;t.dtopbar=0x018c;t.duhiragana=0x3065;t.dukatakana=0x30c5;t.dz=0x01f3;t.dzaltone=0x02a3;t.dzcaron=0x01c6;t.dzcurl=0x02a5;t.dzeabkhasiancyrillic=0x04e1;t.dzecyrillic=0x0455;t.dzhecyrillic=0x045f;t.e=0x0065;t.eacute=0x00e9;t.earth=0x2641;t.ebengali=0x098f;t.ebopomofo=0x311c;t.ebreve=0x0115;t.ecandradeva=0x090d;t.ecandragujarati=0x0a8d;t.ecandravowelsigndeva=0x0945;t.ecandravowelsigngujarati=0x0ac5;t.ecaron=0x011b;t.ecedillabreve=0x1e1d;t.echarmenian=0x0565;t.echyiwnarmenian=0x0587;t.ecircle=0x24d4;t.ecircumflex=0x00ea;t.ecircumflexacute=0x1ebf;t.ecircumflexbelow=0x1e19;t.ecircumflexdotbelow=0x1ec7;t.ecircumflexgrave=0x1ec1;t.ecircumflexhookabove=0x1ec3;t.ecircumflextilde=0x1ec5;t.ecyrillic=0x0454;t.edblgrave=0x0205;t.edeva=0x090f;t.edieresis=0x00eb;t.edot=0x0117;t.edotaccent=0x0117;t.edotbelow=0x1eb9;t.eegurmukhi=0x0a0f;t.eematragurmukhi=0x0a47;t.efcyrillic=0x0444;t.egrave=0x00e8;t.egujarati=0x0a8f;t.eharmenian=0x0567;t.ehbopomofo=0x311d;t.ehiragana=0x3048;t.ehookabove=0x1ebb;t.eibopomofo=0x311f;t.eight=0x0038;t.eightarabic=0x0668;t.eightbengali=0x09ee;t.eightcircle=0x2467;t.eightcircleinversesansserif=0x2791;t.eightdeva=0x096e;t.eighteencircle=0x2471;t.eighteenparen=0x2485;t.eighteenperiod=0x2499;t.eightgujarati=0x0aee;t.eightgurmukhi=0x0a6e;t.eighthackarabic=0x0668;t.eighthangzhou=0x3028;t.eighthnotebeamed=0x266b;t.eightideographicparen=0x3227;t.eightinferior=0x2088;t.eightmonospace=0xff18;t.eightoldstyle=0xf738;t.eightparen=0x247b;t.eightperiod=0x248f;t.eightpersian=0x06f8;t.eightroman=0x2177;t.eightsuperior=0x2078;t.eightthai=0x0e58;t.einvertedbreve=0x0207;t.eiotifiedcyrillic=0x0465;t.ekatakana=0x30a8;t.ekatakanahalfwidth=0xff74;t.ekonkargurmukhi=0x0a74;t.ekorean=0x3154;t.elcyrillic=0x043b;t.element=0x2208;t.elevencircle=0x246a;t.elevenparen=0x247e;t.elevenperiod=0x2492;t.elevenroman=0x217a;t.ellipsis=0x2026;t.ellipsisvertical=0x22ee;t.emacron=0x0113;t.emacronacute=0x1e17;t.emacrongrave=0x1e15;t.emcyrillic=0x043c;t.emdash=0x2014;t.emdashvertical=0xfe31;t.emonospace=0xff45;t.emphasismarkarmenian=0x055b;t.emptyset=0x2205;t.enbopomofo=0x3123;t.encyrillic=0x043d;t.endash=0x2013;t.endashvertical=0xfe32;t.endescendercyrillic=0x04a3;t.eng=0x014b;t.engbopomofo=0x3125;t.enghecyrillic=0x04a5;t.enhookcyrillic=0x04c8;t.enspace=0x2002;t.eogonek=0x0119;t.eokorean=0x3153;t.eopen=0x025b;t.eopenclosed=0x029a;t.eopenreversed=0x025c;t.eopenreversedclosed=0x025e;t.eopenreversedhook=0x025d;t.eparen=0x24a0;t.epsilon=0x03b5;t.epsilontonos=0x03ad;t.equal=0x003d;t.equalmonospace=0xff1d;t.equalsmall=0xfe66;t.equalsuperior=0x207c;t.equivalence=0x2261;t.erbopomofo=0x3126;t.ercyrillic=0x0440;t.ereversed=0x0258;t.ereversedcyrillic=0x044d;t.escyrillic=0x0441;t.esdescendercyrillic=0x04ab;t.esh=0x0283;t.eshcurl=0x0286;t.eshortdeva=0x090e;t.eshortvowelsigndeva=0x0946;t.eshreversedloop=0x01aa;t.eshsquatreversed=0x0285;t.esmallhiragana=0x3047;t.esmallkatakana=0x30a7;t.esmallkatakanahalfwidth=0xff6a;t.estimated=0x212e;t.esuperior=0xf6ec;t.eta=0x03b7;t.etarmenian=0x0568;t.etatonos=0x03ae;t.eth=0x00f0;t.etilde=0x1ebd;t.etildebelow=0x1e1b;t.etnahtafoukhhebrew=0x0591;t.etnahtafoukhlefthebrew=0x0591;t.etnahtahebrew=0x0591;t.etnahtalefthebrew=0x0591;t.eturned=0x01dd;t.eukorean=0x3161;t.euro=0x20ac;t.evowelsignbengali=0x09c7;t.evowelsigndeva=0x0947;t.evowelsigngujarati=0x0ac7;t.exclam=0x0021;t.exclamarmenian=0x055c;t.exclamdbl=0x203c;t.exclamdown=0x00a1;t.exclamdownsmall=0xf7a1;t.exclammonospace=0xff01;t.exclamsmall=0xf721;t.existential=0x2203;t.ezh=0x0292;t.ezhcaron=0x01ef;t.ezhcurl=0x0293;t.ezhreversed=0x01b9;t.ezhtail=0x01ba;t.f=0x0066;t.fadeva=0x095e;t.fagurmukhi=0x0a5e;t.fahrenheit=0x2109;t.fathaarabic=0x064e;t.fathalowarabic=0x064e;t.fathatanarabic=0x064b;t.fbopomofo=0x3108;t.fcircle=0x24d5;t.fdotaccent=0x1e1f;t.feharabic=0x0641;t.feharmenian=0x0586;t.fehfinalarabic=0xfed2;t.fehinitialarabic=0xfed3;t.fehmedialarabic=0xfed4;t.feicoptic=0x03e5;t.female=0x2640;t.ff=0xfb00;t.f_f=0xfb00;t.ffi=0xfb03;t.f_f_i=0xfb03;t.ffl=0xfb04;t.f_f_l=0xfb04;t.fi=0xfb01;t.f_i=0xfb01;t.fifteencircle=0x246e;t.fifteenparen=0x2482;t.fifteenperiod=0x2496;t.figuredash=0x2012;t.filledbox=0x25a0;t.filledrect=0x25ac;t.finalkaf=0x05da;t.finalkafdagesh=0xfb3a;t.finalkafdageshhebrew=0xfb3a;t.finalkafhebrew=0x05da;t.finalmem=0x05dd;t.finalmemhebrew=0x05dd;t.finalnun=0x05df;t.finalnunhebrew=0x05df;t.finalpe=0x05e3;t.finalpehebrew=0x05e3;t.finaltsadi=0x05e5;t.finaltsadihebrew=0x05e5;t.firsttonechinese=0x02c9;t.fisheye=0x25c9;t.fitacyrillic=0x0473;t.five=0x0035;t.fivearabic=0x0665;t.fivebengali=0x09eb;t.fivecircle=0x2464;t.fivecircleinversesansserif=0x278e;t.fivedeva=0x096b;t.fiveeighths=0x215d;t.fivegujarati=0x0aeb;t.fivegurmukhi=0x0a6b;t.fivehackarabic=0x0665;t.fivehangzhou=0x3025;t.fiveideographicparen=0x3224;t.fiveinferior=0x2085;t.fivemonospace=0xff15;t.fiveoldstyle=0xf735;t.fiveparen=0x2478;t.fiveperiod=0x248c;t.fivepersian=0x06f5;t.fiveroman=0x2174;t.fivesuperior=0x2075;t.fivethai=0x0e55;t.fl=0xfb02;t.f_l=0xfb02;t.florin=0x0192;t.fmonospace=0xff46;t.fmsquare=0x3399;t.fofanthai=0x0e1f;t.fofathai=0x0e1d;t.fongmanthai=0x0e4f;t.forall=0x2200;t.four=0x0034;t.fourarabic=0x0664;t.fourbengali=0x09ea;t.fourcircle=0x2463;t.fourcircleinversesansserif=0x278d;t.fourdeva=0x096a;t.fourgujarati=0x0aea;t.fourgurmukhi=0x0a6a;t.fourhackarabic=0x0664;t.fourhangzhou=0x3024;t.fourideographicparen=0x3223;t.fourinferior=0x2084;t.fourmonospace=0xff14;t.fournumeratorbengali=0x09f7;t.fouroldstyle=0xf734;t.fourparen=0x2477;t.fourperiod=0x248b;t.fourpersian=0x06f4;t.fourroman=0x2173;t.foursuperior=0x2074;t.fourteencircle=0x246d;t.fourteenparen=0x2481;t.fourteenperiod=0x2495;t.fourthai=0x0e54;t.fourthtonechinese=0x02cb;t.fparen=0x24a1;t.fraction=0x2044;t.franc=0x20a3;t.g=0x0067;t.gabengali=0x0997;t.gacute=0x01f5;t.gadeva=0x0917;t.gafarabic=0x06af;t.gaffinalarabic=0xfb93;t.gafinitialarabic=0xfb94;t.gafmedialarabic=0xfb95;t.gagujarati=0x0a97;t.gagurmukhi=0x0a17;t.gahiragana=0x304c;t.gakatakana=0x30ac;t.gamma=0x03b3;t.gammalatinsmall=0x0263;t.gammasuperior=0x02e0;t.gangiacoptic=0x03eb;t.gbopomofo=0x310d;t.gbreve=0x011f;t.gcaron=0x01e7;t.gcedilla=0x0123;t.gcircle=0x24d6;t.gcircumflex=0x011d;t.gcommaaccent=0x0123;t.gdot=0x0121;t.gdotaccent=0x0121;t.gecyrillic=0x0433;t.gehiragana=0x3052;t.gekatakana=0x30b2;t.geometricallyequal=0x2251;t.gereshaccenthebrew=0x059c;t.gereshhebrew=0x05f3;t.gereshmuqdamhebrew=0x059d;t.germandbls=0x00df;t.gershayimaccenthebrew=0x059e;t.gershayimhebrew=0x05f4;t.getamark=0x3013;t.ghabengali=0x0998;t.ghadarmenian=0x0572;t.ghadeva=0x0918;t.ghagujarati=0x0a98;t.ghagurmukhi=0x0a18;t.ghainarabic=0x063a;t.ghainfinalarabic=0xfece;t.ghaininitialarabic=0xfecf;t.ghainmedialarabic=0xfed0;t.ghemiddlehookcyrillic=0x0495;t.ghestrokecyrillic=0x0493;t.gheupturncyrillic=0x0491;t.ghhadeva=0x095a;t.ghhagurmukhi=0x0a5a;t.ghook=0x0260;t.ghzsquare=0x3393;t.gihiragana=0x304e;t.gikatakana=0x30ae;t.gimarmenian=0x0563;t.gimel=0x05d2;t.gimeldagesh=0xfb32;t.gimeldageshhebrew=0xfb32;t.gimelhebrew=0x05d2;t.gjecyrillic=0x0453;t.glottalinvertedstroke=0x01be;t.glottalstop=0x0294;t.glottalstopinverted=0x0296;t.glottalstopmod=0x02c0;t.glottalstopreversed=0x0295;t.glottalstopreversedmod=0x02c1;t.glottalstopreversedsuperior=0x02e4;t.glottalstopstroke=0x02a1;t.glottalstopstrokereversed=0x02a2;t.gmacron=0x1e21;t.gmonospace=0xff47;t.gohiragana=0x3054;t.gokatakana=0x30b4;t.gparen=0x24a2;t.gpasquare=0x33ac;t.gradient=0x2207;t.grave=0x0060;t.gravebelowcmb=0x0316;t.gravecmb=0x0300;t.gravecomb=0x0300;t.gravedeva=0x0953;t.gravelowmod=0x02ce;t.gravemonospace=0xff40;t.gravetonecmb=0x0340;t.greater=0x003e;t.greaterequal=0x2265;t.greaterequalorless=0x22db;t.greatermonospace=0xff1e;t.greaterorequivalent=0x2273;t.greaterorless=0x2277;t.greateroverequal=0x2267;t.greatersmall=0xfe65;t.gscript=0x0261;t.gstroke=0x01e5;t.guhiragana=0x3050;t.guillemotleft=0x00ab;t.guillemotright=0x00bb;t.guilsinglleft=0x2039;t.guilsinglright=0x203a;t.gukatakana=0x30b0;t.guramusquare=0x3318;t.gysquare=0x33c9;t.h=0x0068;t.haabkhasiancyrillic=0x04a9;t.haaltonearabic=0x06c1;t.habengali=0x09b9;t.hadescendercyrillic=0x04b3;t.hadeva=0x0939;t.hagujarati=0x0ab9;t.hagurmukhi=0x0a39;t.haharabic=0x062d;t.hahfinalarabic=0xfea2;t.hahinitialarabic=0xfea3;t.hahiragana=0x306f;t.hahmedialarabic=0xfea4;t.haitusquare=0x332a;t.hakatakana=0x30cf;t.hakatakanahalfwidth=0xff8a;t.halantgurmukhi=0x0a4d;t.hamzaarabic=0x0621;t.hamzalowarabic=0x0621;t.hangulfiller=0x3164;t.hardsigncyrillic=0x044a;t.harpoonleftbarbup=0x21bc;t.harpoonrightbarbup=0x21c0;t.hasquare=0x33ca;t.hatafpatah=0x05b2;t.hatafpatah16=0x05b2;t.hatafpatah23=0x05b2;t.hatafpatah2f=0x05b2;t.hatafpatahhebrew=0x05b2;t.hatafpatahnarrowhebrew=0x05b2;t.hatafpatahquarterhebrew=0x05b2;t.hatafpatahwidehebrew=0x05b2;t.hatafqamats=0x05b3;t.hatafqamats1b=0x05b3;t.hatafqamats28=0x05b3;t.hatafqamats34=0x05b3;t.hatafqamatshebrew=0x05b3;t.hatafqamatsnarrowhebrew=0x05b3;t.hatafqamatsquarterhebrew=0x05b3;t.hatafqamatswidehebrew=0x05b3;t.hatafsegol=0x05b1;t.hatafsegol17=0x05b1;t.hatafsegol24=0x05b1;t.hatafsegol30=0x05b1;t.hatafsegolhebrew=0x05b1;t.hatafsegolnarrowhebrew=0x05b1;t.hatafsegolquarterhebrew=0x05b1;t.hatafsegolwidehebrew=0x05b1;t.hbar=0x0127;t.hbopomofo=0x310f;t.hbrevebelow=0x1e2b;t.hcedilla=0x1e29;t.hcircle=0x24d7;t.hcircumflex=0x0125;t.hdieresis=0x1e27;t.hdotaccent=0x1e23;t.hdotbelow=0x1e25;t.he=0x05d4;t.heart=0x2665;t.heartsuitblack=0x2665;t.heartsuitwhite=0x2661;t.hedagesh=0xfb34;t.hedageshhebrew=0xfb34;t.hehaltonearabic=0x06c1;t.heharabic=0x0647;t.hehebrew=0x05d4;t.hehfinalaltonearabic=0xfba7;t.hehfinalalttwoarabic=0xfeea;t.hehfinalarabic=0xfeea;t.hehhamzaabovefinalarabic=0xfba5;t.hehhamzaaboveisolatedarabic=0xfba4;t.hehinitialaltonearabic=0xfba8;t.hehinitialarabic=0xfeeb;t.hehiragana=0x3078;t.hehmedialaltonearabic=0xfba9;t.hehmedialarabic=0xfeec;t.heiseierasquare=0x337b;t.hekatakana=0x30d8;t.hekatakanahalfwidth=0xff8d;t.hekutaarusquare=0x3336;t.henghook=0x0267;t.herutusquare=0x3339;t.het=0x05d7;t.hethebrew=0x05d7;t.hhook=0x0266;t.hhooksuperior=0x02b1;t.hieuhacirclekorean=0x327b;t.hieuhaparenkorean=0x321b;t.hieuhcirclekorean=0x326d;t.hieuhkorean=0x314e;t.hieuhparenkorean=0x320d;t.hihiragana=0x3072;t.hikatakana=0x30d2;t.hikatakanahalfwidth=0xff8b;t.hiriq=0x05b4;t.hiriq14=0x05b4;t.hiriq21=0x05b4;t.hiriq2d=0x05b4;t.hiriqhebrew=0x05b4;t.hiriqnarrowhebrew=0x05b4;t.hiriqquarterhebrew=0x05b4;t.hiriqwidehebrew=0x05b4;t.hlinebelow=0x1e96;t.hmonospace=0xff48;t.hoarmenian=0x0570;t.hohipthai=0x0e2b;t.hohiragana=0x307b;t.hokatakana=0x30db;t.hokatakanahalfwidth=0xff8e;t.holam=0x05b9;t.holam19=0x05b9;t.holam26=0x05b9;t.holam32=0x05b9;t.holamhebrew=0x05b9;t.holamnarrowhebrew=0x05b9;t.holamquarterhebrew=0x05b9;t.holamwidehebrew=0x05b9;t.honokhukthai=0x0e2e;t.hookabovecomb=0x0309;t.hookcmb=0x0309;t.hookpalatalizedbelowcmb=0x0321;t.hookretroflexbelowcmb=0x0322;t.hoonsquare=0x3342;t.horicoptic=0x03e9;t.horizontalbar=0x2015;t.horncmb=0x031b;t.hotsprings=0x2668;t.house=0x2302;t.hparen=0x24a3;t.hsuperior=0x02b0;t.hturned=0x0265;t.huhiragana=0x3075;t.huiitosquare=0x3333;t.hukatakana=0x30d5;t.hukatakanahalfwidth=0xff8c;t.hungarumlaut=0x02dd;t.hungarumlautcmb=0x030b;t.hv=0x0195;t.hyphen=0x002d;t.hypheninferior=0xf6e5;t.hyphenmonospace=0xff0d;t.hyphensmall=0xfe63;t.hyphensuperior=0xf6e6;t.hyphentwo=0x2010;t.i=0x0069;t.iacute=0x00ed;t.iacyrillic=0x044f;t.ibengali=0x0987;t.ibopomofo=0x3127;t.ibreve=0x012d;t.icaron=0x01d0;t.icircle=0x24d8;t.icircumflex=0x00ee;t.icyrillic=0x0456;t.idblgrave=0x0209;t.ideographearthcircle=0x328f;t.ideographfirecircle=0x328b;t.ideographicallianceparen=0x323f;t.ideographiccallparen=0x323a;t.ideographiccentrecircle=0x32a5;t.ideographicclose=0x3006;t.ideographiccomma=0x3001;t.ideographiccommaleft=0xff64;t.ideographiccongratulationparen=0x3237;t.ideographiccorrectcircle=0x32a3;t.ideographicearthparen=0x322f;t.ideographicenterpriseparen=0x323d;t.ideographicexcellentcircle=0x329d;t.ideographicfestivalparen=0x3240;t.ideographicfinancialcircle=0x3296;t.ideographicfinancialparen=0x3236;t.ideographicfireparen=0x322b;t.ideographichaveparen=0x3232;t.ideographichighcircle=0x32a4;t.ideographiciterationmark=0x3005;t.ideographiclaborcircle=0x3298;t.ideographiclaborparen=0x3238;t.ideographicleftcircle=0x32a7;t.ideographiclowcircle=0x32a6;t.ideographicmedicinecircle=0x32a9;t.ideographicmetalparen=0x322e;t.ideographicmoonparen=0x322a;t.ideographicnameparen=0x3234;t.ideographicperiod=0x3002;t.ideographicprintcircle=0x329e;t.ideographicreachparen=0x3243;t.ideographicrepresentparen=0x3239;t.ideographicresourceparen=0x323e;t.ideographicrightcircle=0x32a8;t.ideographicsecretcircle=0x3299;t.ideographicselfparen=0x3242;t.ideographicsocietyparen=0x3233;t.ideographicspace=0x3000;t.ideographicspecialparen=0x3235;t.ideographicstockparen=0x3231;t.ideographicstudyparen=0x323b;t.ideographicsunparen=0x3230;t.ideographicsuperviseparen=0x323c;t.ideographicwaterparen=0x322c;t.ideographicwoodparen=0x322d;t.ideographiczero=0x3007;t.ideographmetalcircle=0x328e;t.ideographmooncircle=0x328a;t.ideographnamecircle=0x3294;t.ideographsuncircle=0x3290;t.ideographwatercircle=0x328c;t.ideographwoodcircle=0x328d;t.ideva=0x0907;t.idieresis=0x00ef;t.idieresisacute=0x1e2f;t.idieresiscyrillic=0x04e5;t.idotbelow=0x1ecb;t.iebrevecyrillic=0x04d7;t.iecyrillic=0x0435;t.ieungacirclekorean=0x3275;t.ieungaparenkorean=0x3215;t.ieungcirclekorean=0x3267;t.ieungkorean=0x3147;t.ieungparenkorean=0x3207;t.igrave=0x00ec;t.igujarati=0x0a87;t.igurmukhi=0x0a07;t.ihiragana=0x3044;t.ihookabove=0x1ec9;t.iibengali=0x0988;t.iicyrillic=0x0438;t.iideva=0x0908;t.iigujarati=0x0a88;t.iigurmukhi=0x0a08;t.iimatragurmukhi=0x0a40;t.iinvertedbreve=0x020b;t.iishortcyrillic=0x0439;t.iivowelsignbengali=0x09c0;t.iivowelsigndeva=0x0940;t.iivowelsigngujarati=0x0ac0;t.ij=0x0133;t.ikatakana=0x30a4;t.ikatakanahalfwidth=0xff72;t.ikorean=0x3163;t.ilde=0x02dc;t.iluyhebrew=0x05ac;t.imacron=0x012b;t.imacroncyrillic=0x04e3;t.imageorapproximatelyequal=0x2253;t.imatragurmukhi=0x0a3f;t.imonospace=0xff49;t.increment=0x2206;t.infinity=0x221e;t.iniarmenian=0x056b;t.integral=0x222b;t.integralbottom=0x2321;t.integralbt=0x2321;t.integralex=0xf8f5;t.integraltop=0x2320;t.integraltp=0x2320;t.intersection=0x2229;t.intisquare=0x3305;t.invbullet=0x25d8;t.invcircle=0x25d9;t.invsmileface=0x263b;t.iocyrillic=0x0451;t.iogonek=0x012f;t.iota=0x03b9;t.iotadieresis=0x03ca;t.iotadieresistonos=0x0390;t.iotalatin=0x0269;t.iotatonos=0x03af;t.iparen=0x24a4;t.irigurmukhi=0x0a72;t.ismallhiragana=0x3043;t.ismallkatakana=0x30a3;t.ismallkatakanahalfwidth=0xff68;t.issharbengali=0x09fa;t.istroke=0x0268;t.isuperior=0xf6ed;t.iterationhiragana=0x309d;t.iterationkatakana=0x30fd;t.itilde=0x0129;t.itildebelow=0x1e2d;t.iubopomofo=0x3129;t.iucyrillic=0x044e;t.ivowelsignbengali=0x09bf;t.ivowelsigndeva=0x093f;t.ivowelsigngujarati=0x0abf;t.izhitsacyrillic=0x0475;t.izhitsadblgravecyrillic=0x0477;t.j=0x006a;t.jaarmenian=0x0571;t.jabengali=0x099c;t.jadeva=0x091c;t.jagujarati=0x0a9c;t.jagurmukhi=0x0a1c;t.jbopomofo=0x3110;t.jcaron=0x01f0;t.jcircle=0x24d9;t.jcircumflex=0x0135;t.jcrossedtail=0x029d;t.jdotlessstroke=0x025f;t.jecyrillic=0x0458;t.jeemarabic=0x062c;t.jeemfinalarabic=0xfe9e;t.jeeminitialarabic=0xfe9f;t.jeemmedialarabic=0xfea0;t.jeharabic=0x0698;t.jehfinalarabic=0xfb8b;t.jhabengali=0x099d;t.jhadeva=0x091d;t.jhagujarati=0x0a9d;t.jhagurmukhi=0x0a1d;t.jheharmenian=0x057b;t.jis=0x3004;t.jmonospace=0xff4a;t.jparen=0x24a5;t.jsuperior=0x02b2;t.k=0x006b;t.kabashkircyrillic=0x04a1;t.kabengali=0x0995;t.kacute=0x1e31;t.kacyrillic=0x043a;t.kadescendercyrillic=0x049b;t.kadeva=0x0915;t.kaf=0x05db;t.kafarabic=0x0643;t.kafdagesh=0xfb3b;t.kafdageshhebrew=0xfb3b;t.kaffinalarabic=0xfeda;t.kafhebrew=0x05db;t.kafinitialarabic=0xfedb;t.kafmedialarabic=0xfedc;t.kafrafehebrew=0xfb4d;t.kagujarati=0x0a95;t.kagurmukhi=0x0a15;t.kahiragana=0x304b;t.kahookcyrillic=0x04c4;t.kakatakana=0x30ab;t.kakatakanahalfwidth=0xff76;t.kappa=0x03ba;t.kappasymbolgreek=0x03f0;t.kapyeounmieumkorean=0x3171;t.kapyeounphieuphkorean=0x3184;t.kapyeounpieupkorean=0x3178;t.kapyeounssangpieupkorean=0x3179;t.karoriisquare=0x330d;t.kashidaautoarabic=0x0640;t.kashidaautonosidebearingarabic=0x0640;t.kasmallkatakana=0x30f5;t.kasquare=0x3384;t.kasraarabic=0x0650;t.kasratanarabic=0x064d;t.kastrokecyrillic=0x049f;t.katahiraprolongmarkhalfwidth=0xff70;t.kaverticalstrokecyrillic=0x049d;t.kbopomofo=0x310e;t.kcalsquare=0x3389;t.kcaron=0x01e9;t.kcedilla=0x0137;t.kcircle=0x24da;t.kcommaaccent=0x0137;t.kdotbelow=0x1e33;t.keharmenian=0x0584;t.kehiragana=0x3051;t.kekatakana=0x30b1;t.kekatakanahalfwidth=0xff79;t.kenarmenian=0x056f;t.kesmallkatakana=0x30f6;t.kgreenlandic=0x0138;t.khabengali=0x0996;t.khacyrillic=0x0445;t.khadeva=0x0916;t.khagujarati=0x0a96;t.khagurmukhi=0x0a16;t.khaharabic=0x062e;t.khahfinalarabic=0xfea6;t.khahinitialarabic=0xfea7;t.khahmedialarabic=0xfea8;t.kheicoptic=0x03e7;t.khhadeva=0x0959;t.khhagurmukhi=0x0a59;t.khieukhacirclekorean=0x3278;t.khieukhaparenkorean=0x3218;t.khieukhcirclekorean=0x326a;t.khieukhkorean=0x314b;t.khieukhparenkorean=0x320a;t.khokhaithai=0x0e02;t.khokhonthai=0x0e05;t.khokhuatthai=0x0e03;t.khokhwaithai=0x0e04;t.khomutthai=0x0e5b;t.khook=0x0199;t.khorakhangthai=0x0e06;t.khzsquare=0x3391;t.kihiragana=0x304d;t.kikatakana=0x30ad;t.kikatakanahalfwidth=0xff77;t.kiroguramusquare=0x3315;t.kiromeetorusquare=0x3316;t.kirosquare=0x3314;t.kiyeokacirclekorean=0x326e;t.kiyeokaparenkorean=0x320e;t.kiyeokcirclekorean=0x3260;t.kiyeokkorean=0x3131;t.kiyeokparenkorean=0x3200;t.kiyeoksioskorean=0x3133;t.kjecyrillic=0x045c;t.klinebelow=0x1e35;t.klsquare=0x3398;t.kmcubedsquare=0x33a6;t.kmonospace=0xff4b;t.kmsquaredsquare=0x33a2;t.kohiragana=0x3053;t.kohmsquare=0x33c0;t.kokaithai=0x0e01;t.kokatakana=0x30b3;t.kokatakanahalfwidth=0xff7a;t.kooposquare=0x331e;t.koppacyrillic=0x0481;t.koreanstandardsymbol=0x327f;t.koroniscmb=0x0343;t.kparen=0x24a6;t.kpasquare=0x33aa;t.ksicyrillic=0x046f;t.ktsquare=0x33cf;t.kturned=0x029e;t.kuhiragana=0x304f;t.kukatakana=0x30af;t.kukatakanahalfwidth=0xff78;t.kvsquare=0x33b8;t.kwsquare=0x33be;t.l=0x006c;t.labengali=0x09b2;t.lacute=0x013a;t.ladeva=0x0932;t.lagujarati=0x0ab2;t.lagurmukhi=0x0a32;t.lakkhangyaothai=0x0e45;t.lamaleffinalarabic=0xfefc;t.lamalefhamzaabovefinalarabic=0xfef8;t.lamalefhamzaaboveisolatedarabic=0xfef7;t.lamalefhamzabelowfinalarabic=0xfefa;t.lamalefhamzabelowisolatedarabic=0xfef9;t.lamalefisolatedarabic=0xfefb;t.lamalefmaddaabovefinalarabic=0xfef6;t.lamalefmaddaaboveisolatedarabic=0xfef5;t.lamarabic=0x0644;t.lambda=0x03bb;t.lambdastroke=0x019b;t.lamed=0x05dc;t.lameddagesh=0xfb3c;t.lameddageshhebrew=0xfb3c;t.lamedhebrew=0x05dc;t.lamfinalarabic=0xfede;t.lamhahinitialarabic=0xfcca;t.laminitialarabic=0xfedf;t.lamjeeminitialarabic=0xfcc9;t.lamkhahinitialarabic=0xfccb;t.lamlamhehisolatedarabic=0xfdf2;t.lammedialarabic=0xfee0;t.lammeemhahinitialarabic=0xfd88;t.lammeeminitialarabic=0xfccc;t.largecircle=0x25ef;t.lbar=0x019a;t.lbelt=0x026c;t.lbopomofo=0x310c;t.lcaron=0x013e;t.lcedilla=0x013c;t.lcircle=0x24db;t.lcircumflexbelow=0x1e3d;t.lcommaaccent=0x013c;t.ldot=0x0140;t.ldotaccent=0x0140;t.ldotbelow=0x1e37;t.ldotbelowmacron=0x1e39;t.leftangleabovecmb=0x031a;t.lefttackbelowcmb=0x0318;t.less=0x003c;t.lessequal=0x2264;t.lessequalorgreater=0x22da;t.lessmonospace=0xff1c;t.lessorequivalent=0x2272;t.lessorgreater=0x2276;t.lessoverequal=0x2266;t.lesssmall=0xfe64;t.lezh=0x026e;t.lfblock=0x258c;t.lhookretroflex=0x026d;t.lira=0x20a4;t.liwnarmenian=0x056c;t.lj=0x01c9;t.ljecyrillic=0x0459;t.ll=0xf6c0;t.lladeva=0x0933;t.llagujarati=0x0ab3;t.llinebelow=0x1e3b;t.llladeva=0x0934;t.llvocalicbengali=0x09e1;t.llvocalicdeva=0x0961;t.llvocalicvowelsignbengali=0x09e3;t.llvocalicvowelsigndeva=0x0963;t.lmiddletilde=0x026b;t.lmonospace=0xff4c;t.lmsquare=0x33d0;t.lochulathai=0x0e2c;t.logicaland=0x2227;t.logicalnot=0x00ac;t.logicalnotreversed=0x2310;t.logicalor=0x2228;t.lolingthai=0x0e25;t.longs=0x017f;t.lowlinecenterline=0xfe4e;t.lowlinecmb=0x0332;t.lowlinedashed=0xfe4d;t.lozenge=0x25ca;t.lparen=0x24a7;t.lslash=0x0142;t.lsquare=0x2113;t.lsuperior=0xf6ee;t.ltshade=0x2591;t.luthai=0x0e26;t.lvocalicbengali=0x098c;t.lvocalicdeva=0x090c;t.lvocalicvowelsignbengali=0x09e2;t.lvocalicvowelsigndeva=0x0962;t.lxsquare=0x33d3;t.m=0x006d;t.mabengali=0x09ae;t.macron=0x00af;t.macronbelowcmb=0x0331;t.macroncmb=0x0304;t.macronlowmod=0x02cd;t.macronmonospace=0xffe3;t.macute=0x1e3f;t.madeva=0x092e;t.magujarati=0x0aae;t.magurmukhi=0x0a2e;t.mahapakhhebrew=0x05a4;t.mahapakhlefthebrew=0x05a4;t.mahiragana=0x307e;t.maichattawalowleftthai=0xf895;t.maichattawalowrightthai=0xf894;t.maichattawathai=0x0e4b;t.maichattawaupperleftthai=0xf893;t.maieklowleftthai=0xf88c;t.maieklowrightthai=0xf88b;t.maiekthai=0x0e48;t.maiekupperleftthai=0xf88a;t.maihanakatleftthai=0xf884;t.maihanakatthai=0x0e31;t.maitaikhuleftthai=0xf889;t.maitaikhuthai=0x0e47;t.maitholowleftthai=0xf88f;t.maitholowrightthai=0xf88e;t.maithothai=0x0e49;t.maithoupperleftthai=0xf88d;t.maitrilowleftthai=0xf892;t.maitrilowrightthai=0xf891;t.maitrithai=0x0e4a;t.maitriupperleftthai=0xf890;t.maiyamokthai=0x0e46;t.makatakana=0x30de;t.makatakanahalfwidth=0xff8f;t.male=0x2642;t.mansyonsquare=0x3347;t.maqafhebrew=0x05be;t.mars=0x2642;t.masoracirclehebrew=0x05af;t.masquare=0x3383;t.mbopomofo=0x3107;t.mbsquare=0x33d4;t.mcircle=0x24dc;t.mcubedsquare=0x33a5;t.mdotaccent=0x1e41;t.mdotbelow=0x1e43;t.meemarabic=0x0645;t.meemfinalarabic=0xfee2;t.meeminitialarabic=0xfee3;t.meemmedialarabic=0xfee4;t.meemmeeminitialarabic=0xfcd1;t.meemmeemisolatedarabic=0xfc48;t.meetorusquare=0x334d;t.mehiragana=0x3081;t.meizierasquare=0x337e;t.mekatakana=0x30e1;t.mekatakanahalfwidth=0xff92;t.mem=0x05de;t.memdagesh=0xfb3e;t.memdageshhebrew=0xfb3e;t.memhebrew=0x05de;t.menarmenian=0x0574;t.merkhahebrew=0x05a5;t.merkhakefulahebrew=0x05a6;t.merkhakefulalefthebrew=0x05a6;t.merkhalefthebrew=0x05a5;t.mhook=0x0271;t.mhzsquare=0x3392;t.middledotkatakanahalfwidth=0xff65;t.middot=0x00b7;t.mieumacirclekorean=0x3272;t.mieumaparenkorean=0x3212;t.mieumcirclekorean=0x3264;t.mieumkorean=0x3141;t.mieumpansioskorean=0x3170;t.mieumparenkorean=0x3204;t.mieumpieupkorean=0x316e;t.mieumsioskorean=0x316f;t.mihiragana=0x307f;t.mikatakana=0x30df;t.mikatakanahalfwidth=0xff90;t.minus=0x2212;t.minusbelowcmb=0x0320;t.minuscircle=0x2296;t.minusmod=0x02d7;t.minusplus=0x2213;t.minute=0x2032;t.miribaarusquare=0x334a;t.mirisquare=0x3349;t.mlonglegturned=0x0270;t.mlsquare=0x3396;t.mmcubedsquare=0x33a3;t.mmonospace=0xff4d;t.mmsquaredsquare=0x339f;t.mohiragana=0x3082;t.mohmsquare=0x33c1;t.mokatakana=0x30e2;t.mokatakanahalfwidth=0xff93;t.molsquare=0x33d6;t.momathai=0x0e21;t.moverssquare=0x33a7;t.moverssquaredsquare=0x33a8;t.mparen=0x24a8;t.mpasquare=0x33ab;t.mssquare=0x33b3;t.msuperior=0xf6ef;t.mturned=0x026f;t.mu=0x00b5;t.mu1=0x00b5;t.muasquare=0x3382;t.muchgreater=0x226b;t.muchless=0x226a;t.mufsquare=0x338c;t.mugreek=0x03bc;t.mugsquare=0x338d;t.muhiragana=0x3080;t.mukatakana=0x30e0;t.mukatakanahalfwidth=0xff91;t.mulsquare=0x3395;t.multiply=0x00d7;t.mumsquare=0x339b;t.munahhebrew=0x05a3;t.munahlefthebrew=0x05a3;t.musicalnote=0x266a;t.musicalnotedbl=0x266b;t.musicflatsign=0x266d;t.musicsharpsign=0x266f;t.mussquare=0x33b2;t.muvsquare=0x33b6;t.muwsquare=0x33bc;t.mvmegasquare=0x33b9;t.mvsquare=0x33b7;t.mwmegasquare=0x33bf;t.mwsquare=0x33bd;t.n=0x006e;t.nabengali=0x09a8;t.nabla=0x2207;t.nacute=0x0144;t.nadeva=0x0928;t.nagujarati=0x0aa8;t.nagurmukhi=0x0a28;t.nahiragana=0x306a;t.nakatakana=0x30ca;t.nakatakanahalfwidth=0xff85;t.napostrophe=0x0149;t.nasquare=0x3381;t.nbopomofo=0x310b;t.nbspace=0x00a0;t.ncaron=0x0148;t.ncedilla=0x0146;t.ncircle=0x24dd;t.ncircumflexbelow=0x1e4b;t.ncommaaccent=0x0146;t.ndotaccent=0x1e45;t.ndotbelow=0x1e47;t.nehiragana=0x306d;t.nekatakana=0x30cd;t.nekatakanahalfwidth=0xff88;t.newsheqelsign=0x20aa;t.nfsquare=0x338b;t.ngabengali=0x0999;t.ngadeva=0x0919;t.ngagujarati=0x0a99;t.ngagurmukhi=0x0a19;t.ngonguthai=0x0e07;t.nhiragana=0x3093;t.nhookleft=0x0272;t.nhookretroflex=0x0273;t.nieunacirclekorean=0x326f;t.nieunaparenkorean=0x320f;t.nieuncieuckorean=0x3135;t.nieuncirclekorean=0x3261;t.nieunhieuhkorean=0x3136;t.nieunkorean=0x3134;t.nieunpansioskorean=0x3168;t.nieunparenkorean=0x3201;t.nieunsioskorean=0x3167;t.nieuntikeutkorean=0x3166;t.nihiragana=0x306b;t.nikatakana=0x30cb;t.nikatakanahalfwidth=0xff86;t.nikhahitleftthai=0xf899;t.nikhahitthai=0x0e4d;t.nine=0x0039;t.ninearabic=0x0669;t.ninebengali=0x09ef;t.ninecircle=0x2468;t.ninecircleinversesansserif=0x2792;t.ninedeva=0x096f;t.ninegujarati=0x0aef;t.ninegurmukhi=0x0a6f;t.ninehackarabic=0x0669;t.ninehangzhou=0x3029;t.nineideographicparen=0x3228;t.nineinferior=0x2089;t.ninemonospace=0xff19;t.nineoldstyle=0xf739;t.nineparen=0x247c;t.nineperiod=0x2490;t.ninepersian=0x06f9;t.nineroman=0x2178;t.ninesuperior=0x2079;t.nineteencircle=0x2472;t.nineteenparen=0x2486;t.nineteenperiod=0x249a;t.ninethai=0x0e59;t.nj=0x01cc;t.njecyrillic=0x045a;t.nkatakana=0x30f3;t.nkatakanahalfwidth=0xff9d;t.nlegrightlong=0x019e;t.nlinebelow=0x1e49;t.nmonospace=0xff4e;t.nmsquare=0x339a;t.nnabengali=0x09a3;t.nnadeva=0x0923;t.nnagujarati=0x0aa3;t.nnagurmukhi=0x0a23;t.nnnadeva=0x0929;t.nohiragana=0x306e;t.nokatakana=0x30ce;t.nokatakanahalfwidth=0xff89;t.nonbreakingspace=0x00a0;t.nonenthai=0x0e13;t.nonuthai=0x0e19;t.noonarabic=0x0646;t.noonfinalarabic=0xfee6;t.noonghunnaarabic=0x06ba;t.noonghunnafinalarabic=0xfb9f;t.nooninitialarabic=0xfee7;t.noonjeeminitialarabic=0xfcd2;t.noonjeemisolatedarabic=0xfc4b;t.noonmedialarabic=0xfee8;t.noonmeeminitialarabic=0xfcd5;t.noonmeemisolatedarabic=0xfc4e;t.noonnoonfinalarabic=0xfc8d;t.notcontains=0x220c;t.notelement=0x2209;t.notelementof=0x2209;t.notequal=0x2260;t.notgreater=0x226f;t.notgreaternorequal=0x2271;t.notgreaternorless=0x2279;t.notidentical=0x2262;t.notless=0x226e;t.notlessnorequal=0x2270;t.notparallel=0x2226;t.notprecedes=0x2280;t.notsubset=0x2284;t.notsucceeds=0x2281;t.notsuperset=0x2285;t.nowarmenian=0x0576;t.nparen=0x24a9;t.nssquare=0x33b1;t.nsuperior=0x207f;t.ntilde=0x00f1;t.nu=0x03bd;t.nuhiragana=0x306c;t.nukatakana=0x30cc;t.nukatakanahalfwidth=0xff87;t.nuktabengali=0x09bc;t.nuktadeva=0x093c;t.nuktagujarati=0x0abc;t.nuktagurmukhi=0x0a3c;t.numbersign=0x0023;t.numbersignmonospace=0xff03;t.numbersignsmall=0xfe5f;t.numeralsigngreek=0x0374;t.numeralsignlowergreek=0x0375;t.numero=0x2116;t.nun=0x05e0;t.nundagesh=0xfb40;t.nundageshhebrew=0xfb40;t.nunhebrew=0x05e0;t.nvsquare=0x33b5;t.nwsquare=0x33bb;t.nyabengali=0x099e;t.nyadeva=0x091e;t.nyagujarati=0x0a9e;t.nyagurmukhi=0x0a1e;t.o=0x006f;t.oacute=0x00f3;t.oangthai=0x0e2d;t.obarred=0x0275;t.obarredcyrillic=0x04e9;t.obarreddieresiscyrillic=0x04eb;t.obengali=0x0993;t.obopomofo=0x311b;t.obreve=0x014f;t.ocandradeva=0x0911;t.ocandragujarati=0x0a91;t.ocandravowelsigndeva=0x0949;t.ocandravowelsigngujarati=0x0ac9;t.ocaron=0x01d2;t.ocircle=0x24de;t.ocircumflex=0x00f4;t.ocircumflexacute=0x1ed1;t.ocircumflexdotbelow=0x1ed9;t.ocircumflexgrave=0x1ed3;t.ocircumflexhookabove=0x1ed5;t.ocircumflextilde=0x1ed7;t.ocyrillic=0x043e;t.odblacute=0x0151;t.odblgrave=0x020d;t.odeva=0x0913;t.odieresis=0x00f6;t.odieresiscyrillic=0x04e7;t.odotbelow=0x1ecd;t.oe=0x0153;t.oekorean=0x315a;t.ogonek=0x02db;t.ogonekcmb=0x0328;t.ograve=0x00f2;t.ogujarati=0x0a93;t.oharmenian=0x0585;t.ohiragana=0x304a;t.ohookabove=0x1ecf;t.ohorn=0x01a1;t.ohornacute=0x1edb;t.ohorndotbelow=0x1ee3;t.ohorngrave=0x1edd;t.ohornhookabove=0x1edf;t.ohorntilde=0x1ee1;t.ohungarumlaut=0x0151;t.oi=0x01a3;t.oinvertedbreve=0x020f;t.okatakana=0x30aa;t.okatakanahalfwidth=0xff75;t.okorean=0x3157;t.olehebrew=0x05ab;t.omacron=0x014d;t.omacronacute=0x1e53;t.omacrongrave=0x1e51;t.omdeva=0x0950;t.omega=0x03c9;t.omega1=0x03d6;t.omegacyrillic=0x0461;t.omegalatinclosed=0x0277;t.omegaroundcyrillic=0x047b;t.omegatitlocyrillic=0x047d;t.omegatonos=0x03ce;t.omgujarati=0x0ad0;t.omicron=0x03bf;t.omicrontonos=0x03cc;t.omonospace=0xff4f;t.one=0x0031;t.onearabic=0x0661;t.onebengali=0x09e7;t.onecircle=0x2460;t.onecircleinversesansserif=0x278a;t.onedeva=0x0967;t.onedotenleader=0x2024;t.oneeighth=0x215b;t.onefitted=0xf6dc;t.onegujarati=0x0ae7;t.onegurmukhi=0x0a67;t.onehackarabic=0x0661;t.onehalf=0x00bd;t.onehangzhou=0x3021;t.oneideographicparen=0x3220;t.oneinferior=0x2081;t.onemonospace=0xff11;t.onenumeratorbengali=0x09f4;t.oneoldstyle=0xf731;t.oneparen=0x2474;t.oneperiod=0x2488;t.onepersian=0x06f1;t.onequarter=0x00bc;t.oneroman=0x2170;t.onesuperior=0x00b9;t.onethai=0x0e51;t.onethird=0x2153;t.oogonek=0x01eb;t.oogonekmacron=0x01ed;t.oogurmukhi=0x0a13;t.oomatragurmukhi=0x0a4b;t.oopen=0x0254;t.oparen=0x24aa;t.openbullet=0x25e6;t.option=0x2325;t.ordfeminine=0x00aa;t.ordmasculine=0x00ba;t.orthogonal=0x221f;t.oshortdeva=0x0912;t.oshortvowelsigndeva=0x094a;t.oslash=0x00f8;t.oslashacute=0x01ff;t.osmallhiragana=0x3049;t.osmallkatakana=0x30a9;t.osmallkatakanahalfwidth=0xff6b;t.ostrokeacute=0x01ff;t.osuperior=0xf6f0;t.otcyrillic=0x047f;t.otilde=0x00f5;t.otildeacute=0x1e4d;t.otildedieresis=0x1e4f;t.oubopomofo=0x3121;t.overline=0x203e;t.overlinecenterline=0xfe4a;t.overlinecmb=0x0305;t.overlinedashed=0xfe49;t.overlinedblwavy=0xfe4c;t.overlinewavy=0xfe4b;t.overscore=0x00af;t.ovowelsignbengali=0x09cb;t.ovowelsigndeva=0x094b;t.ovowelsigngujarati=0x0acb;t.p=0x0070;t.paampssquare=0x3380;t.paasentosquare=0x332b;t.pabengali=0x09aa;t.pacute=0x1e55;t.padeva=0x092a;t.pagedown=0x21df;t.pageup=0x21de;t.pagujarati=0x0aaa;t.pagurmukhi=0x0a2a;t.pahiragana=0x3071;t.paiyannoithai=0x0e2f;t.pakatakana=0x30d1;t.palatalizationcyrilliccmb=0x0484;t.palochkacyrillic=0x04c0;t.pansioskorean=0x317f;t.paragraph=0x00b6;t.parallel=0x2225;t.parenleft=0x0028;t.parenleftaltonearabic=0xfd3e;t.parenleftbt=0xf8ed;t.parenleftex=0xf8ec;t.parenleftinferior=0x208d;t.parenleftmonospace=0xff08;t.parenleftsmall=0xfe59;t.parenleftsuperior=0x207d;t.parenlefttp=0xf8eb;t.parenleftvertical=0xfe35;t.parenright=0x0029;t.parenrightaltonearabic=0xfd3f;t.parenrightbt=0xf8f8;t.parenrightex=0xf8f7;t.parenrightinferior=0x208e;t.parenrightmonospace=0xff09;t.parenrightsmall=0xfe5a;t.parenrightsuperior=0x207e;t.parenrighttp=0xf8f6;t.parenrightvertical=0xfe36;t.partialdiff=0x2202;t.paseqhebrew=0x05c0;t.pashtahebrew=0x0599;t.pasquare=0x33a9;t.patah=0x05b7;t.patah11=0x05b7;t.patah1d=0x05b7;t.patah2a=0x05b7;t.patahhebrew=0x05b7;t.patahnarrowhebrew=0x05b7;t.patahquarterhebrew=0x05b7;t.patahwidehebrew=0x05b7;t.pazerhebrew=0x05a1;t.pbopomofo=0x3106;t.pcircle=0x24df;t.pdotaccent=0x1e57;t.pe=0x05e4;t.pecyrillic=0x043f;t.pedagesh=0xfb44;t.pedageshhebrew=0xfb44;t.peezisquare=0x333b;t.pefinaldageshhebrew=0xfb43;t.peharabic=0x067e;t.peharmenian=0x057a;t.pehebrew=0x05e4;t.pehfinalarabic=0xfb57;t.pehinitialarabic=0xfb58;t.pehiragana=0x307a;t.pehmedialarabic=0xfb59;t.pekatakana=0x30da;t.pemiddlehookcyrillic=0x04a7;t.perafehebrew=0xfb4e;t.percent=0x0025;t.percentarabic=0x066a;t.percentmonospace=0xff05;t.percentsmall=0xfe6a;t.period=0x002e;t.periodarmenian=0x0589;t.periodcentered=0x00b7;t.periodhalfwidth=0xff61;t.periodinferior=0xf6e7;t.periodmonospace=0xff0e;t.periodsmall=0xfe52;t.periodsuperior=0xf6e8;t.perispomenigreekcmb=0x0342;t.perpendicular=0x22a5;t.perthousand=0x2030;t.peseta=0x20a7;t.pfsquare=0x338a;t.phabengali=0x09ab;t.phadeva=0x092b;t.phagujarati=0x0aab;t.phagurmukhi=0x0a2b;t.phi=0x03c6;t.phi1=0x03d5;t.phieuphacirclekorean=0x327a;t.phieuphaparenkorean=0x321a;t.phieuphcirclekorean=0x326c;t.phieuphkorean=0x314d;t.phieuphparenkorean=0x320c;t.philatin=0x0278;t.phinthuthai=0x0e3a;t.phisymbolgreek=0x03d5;t.phook=0x01a5;t.phophanthai=0x0e1e;t.phophungthai=0x0e1c;t.phosamphaothai=0x0e20;t.pi=0x03c0;t.pieupacirclekorean=0x3273;t.pieupaparenkorean=0x3213;t.pieupcieuckorean=0x3176;t.pieupcirclekorean=0x3265;t.pieupkiyeokkorean=0x3172;t.pieupkorean=0x3142;t.pieupparenkorean=0x3205;t.pieupsioskiyeokkorean=0x3174;t.pieupsioskorean=0x3144;t.pieupsiostikeutkorean=0x3175;t.pieupthieuthkorean=0x3177;t.pieuptikeutkorean=0x3173;t.pihiragana=0x3074;t.pikatakana=0x30d4;t.pisymbolgreek=0x03d6;t.piwrarmenian=0x0583;t.planckover2pi=0x210f;t.planckover2pi1=0x210f;t.plus=0x002b;t.plusbelowcmb=0x031f;t.pluscircle=0x2295;t.plusminus=0x00b1;t.plusmod=0x02d6;t.plusmonospace=0xff0b;t.plussmall=0xfe62;t.plussuperior=0x207a;t.pmonospace=0xff50;t.pmsquare=0x33d8;t.pohiragana=0x307d;t.pointingindexdownwhite=0x261f;t.pointingindexleftwhite=0x261c;t.pointingindexrightwhite=0x261e;t.pointingindexupwhite=0x261d;t.pokatakana=0x30dd;t.poplathai=0x0e1b;t.postalmark=0x3012;t.postalmarkface=0x3020;t.pparen=0x24ab;t.precedes=0x227a;t.prescription=0x211e;t.primemod=0x02b9;t.primereversed=0x2035;t.product=0x220f;t.projective=0x2305;t.prolongedkana=0x30fc;t.propellor=0x2318;t.propersubset=0x2282;t.propersuperset=0x2283;t.proportion=0x2237;t.proportional=0x221d;t.psi=0x03c8;t.psicyrillic=0x0471;t.psilipneumatacyrilliccmb=0x0486;t.pssquare=0x33b0;t.puhiragana=0x3077;t.pukatakana=0x30d7;t.pvsquare=0x33b4;t.pwsquare=0x33ba;t.q=0x0071;t.qadeva=0x0958;t.qadmahebrew=0x05a8;t.qafarabic=0x0642;t.qaffinalarabic=0xfed6;t.qafinitialarabic=0xfed7;t.qafmedialarabic=0xfed8;t.qamats=0x05b8;t.qamats10=0x05b8;t.qamats1a=0x05b8;t.qamats1c=0x05b8;t.qamats27=0x05b8;t.qamats29=0x05b8;t.qamats33=0x05b8;t.qamatsde=0x05b8;t.qamatshebrew=0x05b8;t.qamatsnarrowhebrew=0x05b8;t.qamatsqatanhebrew=0x05b8;t.qamatsqatannarrowhebrew=0x05b8;t.qamatsqatanquarterhebrew=0x05b8;t.qamatsqatanwidehebrew=0x05b8;t.qamatsquarterhebrew=0x05b8;t.qamatswidehebrew=0x05b8;t.qarneyparahebrew=0x059f;t.qbopomofo=0x3111;t.qcircle=0x24e0;t.qhook=0x02a0;t.qmonospace=0xff51;t.qof=0x05e7;t.qofdagesh=0xfb47;t.qofdageshhebrew=0xfb47;t.qofhebrew=0x05e7;t.qparen=0x24ac;t.quarternote=0x2669;t.qubuts=0x05bb;t.qubuts18=0x05bb;t.qubuts25=0x05bb;t.qubuts31=0x05bb;t.qubutshebrew=0x05bb;t.qubutsnarrowhebrew=0x05bb;t.qubutsquarterhebrew=0x05bb;t.qubutswidehebrew=0x05bb;t.question=0x003f;t.questionarabic=0x061f;t.questionarmenian=0x055e;t.questiondown=0x00bf;t.questiondownsmall=0xf7bf;t.questiongreek=0x037e;t.questionmonospace=0xff1f;t.questionsmall=0xf73f;t.quotedbl=0x0022;t.quotedblbase=0x201e;t.quotedblleft=0x201c;t.quotedblmonospace=0xff02;t.quotedblprime=0x301e;t.quotedblprimereversed=0x301d;t.quotedblright=0x201d;t.quoteleft=0x2018;t.quoteleftreversed=0x201b;t.quotereversed=0x201b;t.quoteright=0x2019;t.quoterightn=0x0149;t.quotesinglbase=0x201a;t.quotesingle=0x0027;t.quotesinglemonospace=0xff07;t.r=0x0072;t.raarmenian=0x057c;t.rabengali=0x09b0;t.racute=0x0155;t.radeva=0x0930;t.radical=0x221a;t.radicalex=0xf8e5;t.radoverssquare=0x33ae;t.radoverssquaredsquare=0x33af;t.radsquare=0x33ad;t.rafe=0x05bf;t.rafehebrew=0x05bf;t.ragujarati=0x0ab0;t.ragurmukhi=0x0a30;t.rahiragana=0x3089;t.rakatakana=0x30e9;t.rakatakanahalfwidth=0xff97;t.ralowerdiagonalbengali=0x09f1;t.ramiddlediagonalbengali=0x09f0;t.ramshorn=0x0264;t.ratio=0x2236;t.rbopomofo=0x3116;t.rcaron=0x0159;t.rcedilla=0x0157;t.rcircle=0x24e1;t.rcommaaccent=0x0157;t.rdblgrave=0x0211;t.rdotaccent=0x1e59;t.rdotbelow=0x1e5b;t.rdotbelowmacron=0x1e5d;t.referencemark=0x203b;t.reflexsubset=0x2286;t.reflexsuperset=0x2287;t.registered=0x00ae;t.registersans=0xf8e8;t.registerserif=0xf6da;t.reharabic=0x0631;t.reharmenian=0x0580;t.rehfinalarabic=0xfeae;t.rehiragana=0x308c;t.rekatakana=0x30ec;t.rekatakanahalfwidth=0xff9a;t.resh=0x05e8;t.reshdageshhebrew=0xfb48;t.reshhebrew=0x05e8;t.reversedtilde=0x223d;t.reviahebrew=0x0597;t.reviamugrashhebrew=0x0597;t.revlogicalnot=0x2310;t.rfishhook=0x027e;t.rfishhookreversed=0x027f;t.rhabengali=0x09dd;t.rhadeva=0x095d;t.rho=0x03c1;t.rhook=0x027d;t.rhookturned=0x027b;t.rhookturnedsuperior=0x02b5;t.rhosymbolgreek=0x03f1;t.rhotichookmod=0x02de;t.rieulacirclekorean=0x3271;t.rieulaparenkorean=0x3211;t.rieulcirclekorean=0x3263;t.rieulhieuhkorean=0x3140;t.rieulkiyeokkorean=0x313a;t.rieulkiyeoksioskorean=0x3169;t.rieulkorean=0x3139;t.rieulmieumkorean=0x313b;t.rieulpansioskorean=0x316c;t.rieulparenkorean=0x3203;t.rieulphieuphkorean=0x313f;t.rieulpieupkorean=0x313c;t.rieulpieupsioskorean=0x316b;t.rieulsioskorean=0x313d;t.rieulthieuthkorean=0x313e;t.rieultikeutkorean=0x316a;t.rieulyeorinhieuhkorean=0x316d;t.rightangle=0x221f;t.righttackbelowcmb=0x0319;t.righttriangle=0x22bf;t.rihiragana=0x308a;t.rikatakana=0x30ea;t.rikatakanahalfwidth=0xff98;t.ring=0x02da;t.ringbelowcmb=0x0325;t.ringcmb=0x030a;t.ringhalfleft=0x02bf;t.ringhalfleftarmenian=0x0559;t.ringhalfleftbelowcmb=0x031c;t.ringhalfleftcentered=0x02d3;t.ringhalfright=0x02be;t.ringhalfrightbelowcmb=0x0339;t.ringhalfrightcentered=0x02d2;t.rinvertedbreve=0x0213;t.rittorusquare=0x3351;t.rlinebelow=0x1e5f;t.rlongleg=0x027c;t.rlonglegturned=0x027a;t.rmonospace=0xff52;t.rohiragana=0x308d;t.rokatakana=0x30ed;t.rokatakanahalfwidth=0xff9b;t.roruathai=0x0e23;t.rparen=0x24ad;t.rrabengali=0x09dc;t.rradeva=0x0931;t.rragurmukhi=0x0a5c;t.rreharabic=0x0691;t.rrehfinalarabic=0xfb8d;t.rrvocalicbengali=0x09e0;t.rrvocalicdeva=0x0960;t.rrvocalicgujarati=0x0ae0;t.rrvocalicvowelsignbengali=0x09c4;t.rrvocalicvowelsigndeva=0x0944;t.rrvocalicvowelsigngujarati=0x0ac4;t.rsuperior=0xf6f1;t.rtblock=0x2590;t.rturned=0x0279;t.rturnedsuperior=0x02b4;t.ruhiragana=0x308b;t.rukatakana=0x30eb;t.rukatakanahalfwidth=0xff99;t.rupeemarkbengali=0x09f2;t.rupeesignbengali=0x09f3;t.rupiah=0xf6dd;t.ruthai=0x0e24;t.rvocalicbengali=0x098b;t.rvocalicdeva=0x090b;t.rvocalicgujarati=0x0a8b;t.rvocalicvowelsignbengali=0x09c3;t.rvocalicvowelsigndeva=0x0943;t.rvocalicvowelsigngujarati=0x0ac3;t.s=0x0073;t.sabengali=0x09b8;t.sacute=0x015b;t.sacutedotaccent=0x1e65;t.sadarabic=0x0635;t.sadeva=0x0938;t.sadfinalarabic=0xfeba;t.sadinitialarabic=0xfebb;t.sadmedialarabic=0xfebc;t.sagujarati=0x0ab8;t.sagurmukhi=0x0a38;t.sahiragana=0x3055;t.sakatakana=0x30b5;t.sakatakanahalfwidth=0xff7b;t.sallallahoualayhewasallamarabic=0xfdfa;t.samekh=0x05e1;t.samekhdagesh=0xfb41;t.samekhdageshhebrew=0xfb41;t.samekhhebrew=0x05e1;t.saraaathai=0x0e32;t.saraaethai=0x0e41;t.saraaimaimalaithai=0x0e44;t.saraaimaimuanthai=0x0e43;t.saraamthai=0x0e33;t.saraathai=0x0e30;t.saraethai=0x0e40;t.saraiileftthai=0xf886;t.saraiithai=0x0e35;t.saraileftthai=0xf885;t.saraithai=0x0e34;t.saraothai=0x0e42;t.saraueeleftthai=0xf888;t.saraueethai=0x0e37;t.saraueleftthai=0xf887;t.sarauethai=0x0e36;t.sarauthai=0x0e38;t.sarauuthai=0x0e39;t.sbopomofo=0x3119;t.scaron=0x0161;t.scarondotaccent=0x1e67;t.scedilla=0x015f;t.schwa=0x0259;t.schwacyrillic=0x04d9;t.schwadieresiscyrillic=0x04db;t.schwahook=0x025a;t.scircle=0x24e2;t.scircumflex=0x015d;t.scommaaccent=0x0219;t.sdotaccent=0x1e61;t.sdotbelow=0x1e63;t.sdotbelowdotaccent=0x1e69;t.seagullbelowcmb=0x033c;t.second=0x2033;t.secondtonechinese=0x02ca;t.section=0x00a7;t.seenarabic=0x0633;t.seenfinalarabic=0xfeb2;t.seeninitialarabic=0xfeb3;t.seenmedialarabic=0xfeb4;t.segol=0x05b6;t.segol13=0x05b6;t.segol1f=0x05b6;t.segol2c=0x05b6;t.segolhebrew=0x05b6;t.segolnarrowhebrew=0x05b6;t.segolquarterhebrew=0x05b6;t.segoltahebrew=0x0592;t.segolwidehebrew=0x05b6;t.seharmenian=0x057d;t.sehiragana=0x305b;t.sekatakana=0x30bb;t.sekatakanahalfwidth=0xff7e;t.semicolon=0x003b;t.semicolonarabic=0x061b;t.semicolonmonospace=0xff1b;t.semicolonsmall=0xfe54;t.semivoicedmarkkana=0x309c;t.semivoicedmarkkanahalfwidth=0xff9f;t.sentisquare=0x3322;t.sentosquare=0x3323;t.seven=0x0037;t.sevenarabic=0x0667;t.sevenbengali=0x09ed;t.sevencircle=0x2466;t.sevencircleinversesansserif=0x2790;t.sevendeva=0x096d;t.seveneighths=0x215e;t.sevengujarati=0x0aed;t.sevengurmukhi=0x0a6d;t.sevenhackarabic=0x0667;t.sevenhangzhou=0x3027;t.sevenideographicparen=0x3226;t.seveninferior=0x2087;t.sevenmonospace=0xff17;t.sevenoldstyle=0xf737;t.sevenparen=0x247a;t.sevenperiod=0x248e;t.sevenpersian=0x06f7;t.sevenroman=0x2176;t.sevensuperior=0x2077;t.seventeencircle=0x2470;t.seventeenparen=0x2484;t.seventeenperiod=0x2498;t.seventhai=0x0e57;t.sfthyphen=0x00ad;t.shaarmenian=0x0577;t.shabengali=0x09b6;t.shacyrillic=0x0448;t.shaddaarabic=0x0651;t.shaddadammaarabic=0xfc61;t.shaddadammatanarabic=0xfc5e;t.shaddafathaarabic=0xfc60;t.shaddakasraarabic=0xfc62;t.shaddakasratanarabic=0xfc5f;t.shade=0x2592;t.shadedark=0x2593;t.shadelight=0x2591;t.shademedium=0x2592;t.shadeva=0x0936;t.shagujarati=0x0ab6;t.shagurmukhi=0x0a36;t.shalshelethebrew=0x0593;t.shbopomofo=0x3115;t.shchacyrillic=0x0449;t.sheenarabic=0x0634;t.sheenfinalarabic=0xfeb6;t.sheeninitialarabic=0xfeb7;t.sheenmedialarabic=0xfeb8;t.sheicoptic=0x03e3;t.sheqel=0x20aa;t.sheqelhebrew=0x20aa;t.sheva=0x05b0;t.sheva115=0x05b0;t.sheva15=0x05b0;t.sheva22=0x05b0;t.sheva2e=0x05b0;t.shevahebrew=0x05b0;t.shevanarrowhebrew=0x05b0;t.shevaquarterhebrew=0x05b0;t.shevawidehebrew=0x05b0;t.shhacyrillic=0x04bb;t.shimacoptic=0x03ed;t.shin=0x05e9;t.shindagesh=0xfb49;t.shindageshhebrew=0xfb49;t.shindageshshindot=0xfb2c;t.shindageshshindothebrew=0xfb2c;t.shindageshsindot=0xfb2d;t.shindageshsindothebrew=0xfb2d;t.shindothebrew=0x05c1;t.shinhebrew=0x05e9;t.shinshindot=0xfb2a;t.shinshindothebrew=0xfb2a;t.shinsindot=0xfb2b;t.shinsindothebrew=0xfb2b;t.shook=0x0282;t.sigma=0x03c3;t.sigma1=0x03c2;t.sigmafinal=0x03c2;t.sigmalunatesymbolgreek=0x03f2;t.sihiragana=0x3057;t.sikatakana=0x30b7;t.sikatakanahalfwidth=0xff7c;t.siluqhebrew=0x05bd;t.siluqlefthebrew=0x05bd;t.similar=0x223c;t.sindothebrew=0x05c2;t.siosacirclekorean=0x3274;t.siosaparenkorean=0x3214;t.sioscieuckorean=0x317e;t.sioscirclekorean=0x3266;t.sioskiyeokkorean=0x317a;t.sioskorean=0x3145;t.siosnieunkorean=0x317b;t.siosparenkorean=0x3206;t.siospieupkorean=0x317d;t.siostikeutkorean=0x317c;t.six=0x0036;t.sixarabic=0x0666;t.sixbengali=0x09ec;t.sixcircle=0x2465;t.sixcircleinversesansserif=0x278f;t.sixdeva=0x096c;t.sixgujarati=0x0aec;t.sixgurmukhi=0x0a6c;t.sixhackarabic=0x0666;t.sixhangzhou=0x3026;t.sixideographicparen=0x3225;t.sixinferior=0x2086;t.sixmonospace=0xff16;t.sixoldstyle=0xf736;t.sixparen=0x2479;t.sixperiod=0x248d;t.sixpersian=0x06f6;t.sixroman=0x2175;t.sixsuperior=0x2076;t.sixteencircle=0x246f;t.sixteencurrencydenominatorbengali=0x09f9;t.sixteenparen=0x2483;t.sixteenperiod=0x2497;t.sixthai=0x0e56;t.slash=0x002f;t.slashmonospace=0xff0f;t.slong=0x017f;t.slongdotaccent=0x1e9b;t.smileface=0x263a;t.smonospace=0xff53;t.sofpasuqhebrew=0x05c3;t.softhyphen=0x00ad;t.softsigncyrillic=0x044c;t.sohiragana=0x305d;t.sokatakana=0x30bd;t.sokatakanahalfwidth=0xff7f;t.soliduslongoverlaycmb=0x0338;t.solidusshortoverlaycmb=0x0337;t.sorusithai=0x0e29;t.sosalathai=0x0e28;t.sosothai=0x0e0b;t.sosuathai=0x0e2a;t.space=0x0020;t.spacehackarabic=0x0020;t.spade=0x2660;t.spadesuitblack=0x2660;t.spadesuitwhite=0x2664;t.sparen=0x24ae;t.squarebelowcmb=0x033b;t.squarecc=0x33c4;t.squarecm=0x339d;t.squarediagonalcrosshatchfill=0x25a9;t.squarehorizontalfill=0x25a4;t.squarekg=0x338f;t.squarekm=0x339e;t.squarekmcapital=0x33ce;t.squareln=0x33d1;t.squarelog=0x33d2;t.squaremg=0x338e;t.squaremil=0x33d5;t.squaremm=0x339c;t.squaremsquared=0x33a1;t.squareorthogonalcrosshatchfill=0x25a6;t.squareupperlefttolowerrightfill=0x25a7;t.squareupperrighttolowerleftfill=0x25a8;t.squareverticalfill=0x25a5;t.squarewhitewithsmallblack=0x25a3;t.srsquare=0x33db;t.ssabengali=0x09b7;t.ssadeva=0x0937;t.ssagujarati=0x0ab7;t.ssangcieuckorean=0x3149;t.ssanghieuhkorean=0x3185;t.ssangieungkorean=0x3180;t.ssangkiyeokkorean=0x3132;t.ssangnieunkorean=0x3165;t.ssangpieupkorean=0x3143;t.ssangsioskorean=0x3146;t.ssangtikeutkorean=0x3138;t.ssuperior=0xf6f2;t.sterling=0x00a3;t.sterlingmonospace=0xffe1;t.strokelongoverlaycmb=0x0336;t.strokeshortoverlaycmb=0x0335;t.subset=0x2282;t.subsetnotequal=0x228a;t.subsetorequal=0x2286;t.succeeds=0x227b;t.suchthat=0x220b;t.suhiragana=0x3059;t.sukatakana=0x30b9;t.sukatakanahalfwidth=0xff7d;t.sukunarabic=0x0652;t.summation=0x2211;t.sun=0x263c;t.superset=0x2283;t.supersetnotequal=0x228b;t.supersetorequal=0x2287;t.svsquare=0x33dc;t.syouwaerasquare=0x337c;t.t=0x0074;t.tabengali=0x09a4;t.tackdown=0x22a4;t.tackleft=0x22a3;t.tadeva=0x0924;t.tagujarati=0x0aa4;t.tagurmukhi=0x0a24;t.taharabic=0x0637;t.tahfinalarabic=0xfec2;t.tahinitialarabic=0xfec3;t.tahiragana=0x305f;t.tahmedialarabic=0xfec4;t.taisyouerasquare=0x337d;t.takatakana=0x30bf;t.takatakanahalfwidth=0xff80;t.tatweelarabic=0x0640;t.tau=0x03c4;t.tav=0x05ea;t.tavdages=0xfb4a;t.tavdagesh=0xfb4a;t.tavdageshhebrew=0xfb4a;t.tavhebrew=0x05ea;t.tbar=0x0167;t.tbopomofo=0x310a;t.tcaron=0x0165;t.tccurl=0x02a8;t.tcedilla=0x0163;t.tcheharabic=0x0686;t.tchehfinalarabic=0xfb7b;t.tchehinitialarabic=0xfb7c;t.tchehmedialarabic=0xfb7d;t.tcircle=0x24e3;t.tcircumflexbelow=0x1e71;t.tcommaaccent=0x0163;t.tdieresis=0x1e97;t.tdotaccent=0x1e6b;t.tdotbelow=0x1e6d;t.tecyrillic=0x0442;t.tedescendercyrillic=0x04ad;t.teharabic=0x062a;t.tehfinalarabic=0xfe96;t.tehhahinitialarabic=0xfca2;t.tehhahisolatedarabic=0xfc0c;t.tehinitialarabic=0xfe97;t.tehiragana=0x3066;t.tehjeeminitialarabic=0xfca1;t.tehjeemisolatedarabic=0xfc0b;t.tehmarbutaarabic=0x0629;t.tehmarbutafinalarabic=0xfe94;t.tehmedialarabic=0xfe98;t.tehmeeminitialarabic=0xfca4;t.tehmeemisolatedarabic=0xfc0e;t.tehnoonfinalarabic=0xfc73;t.tekatakana=0x30c6;t.tekatakanahalfwidth=0xff83;t.telephone=0x2121;t.telephoneblack=0x260e;t.telishagedolahebrew=0x05a0;t.telishaqetanahebrew=0x05a9;t.tencircle=0x2469;t.tenideographicparen=0x3229;t.tenparen=0x247d;t.tenperiod=0x2491;t.tenroman=0x2179;t.tesh=0x02a7;t.tet=0x05d8;t.tetdagesh=0xfb38;t.tetdageshhebrew=0xfb38;t.tethebrew=0x05d8;t.tetsecyrillic=0x04b5;t.tevirhebrew=0x059b;t.tevirlefthebrew=0x059b;t.thabengali=0x09a5;t.thadeva=0x0925;t.thagujarati=0x0aa5;t.thagurmukhi=0x0a25;t.thalarabic=0x0630;t.thalfinalarabic=0xfeac;t.thanthakhatlowleftthai=0xf898;t.thanthakhatlowrightthai=0xf897;t.thanthakhatthai=0x0e4c;t.thanthakhatupperleftthai=0xf896;t.theharabic=0x062b;t.thehfinalarabic=0xfe9a;t.thehinitialarabic=0xfe9b;t.thehmedialarabic=0xfe9c;t.thereexists=0x2203;t.therefore=0x2234;t.theta=0x03b8;t.theta1=0x03d1;t.thetasymbolgreek=0x03d1;t.thieuthacirclekorean=0x3279;t.thieuthaparenkorean=0x3219;t.thieuthcirclekorean=0x326b;t.thieuthkorean=0x314c;t.thieuthparenkorean=0x320b;t.thirteencircle=0x246c;t.thirteenparen=0x2480;t.thirteenperiod=0x2494;t.thonangmonthothai=0x0e11;t.thook=0x01ad;t.thophuthaothai=0x0e12;t.thorn=0x00fe;t.thothahanthai=0x0e17;t.thothanthai=0x0e10;t.thothongthai=0x0e18;t.thothungthai=0x0e16;t.thousandcyrillic=0x0482;t.thousandsseparatorarabic=0x066c;t.thousandsseparatorpersian=0x066c;t.three=0x0033;t.threearabic=0x0663;t.threebengali=0x09e9;t.threecircle=0x2462;t.threecircleinversesansserif=0x278c;t.threedeva=0x0969;t.threeeighths=0x215c;t.threegujarati=0x0ae9;t.threegurmukhi=0x0a69;t.threehackarabic=0x0663;t.threehangzhou=0x3023;t.threeideographicparen=0x3222;t.threeinferior=0x2083;t.threemonospace=0xff13;t.threenumeratorbengali=0x09f6;t.threeoldstyle=0xf733;t.threeparen=0x2476;t.threeperiod=0x248a;t.threepersian=0x06f3;t.threequarters=0x00be;t.threequartersemdash=0xf6de;t.threeroman=0x2172;t.threesuperior=0x00b3;t.threethai=0x0e53;t.thzsquare=0x3394;t.tihiragana=0x3061;t.tikatakana=0x30c1;t.tikatakanahalfwidth=0xff81;t.tikeutacirclekorean=0x3270;t.tikeutaparenkorean=0x3210;t.tikeutcirclekorean=0x3262;t.tikeutkorean=0x3137;t.tikeutparenkorean=0x3202;t.tilde=0x02dc;t.tildebelowcmb=0x0330;t.tildecmb=0x0303;t.tildecomb=0x0303;t.tildedoublecmb=0x0360;t.tildeoperator=0x223c;t.tildeoverlaycmb=0x0334;t.tildeverticalcmb=0x033e;t.timescircle=0x2297;t.tipehahebrew=0x0596;t.tipehalefthebrew=0x0596;t.tippigurmukhi=0x0a70;t.titlocyrilliccmb=0x0483;t.tiwnarmenian=0x057f;t.tlinebelow=0x1e6f;t.tmonospace=0xff54;t.toarmenian=0x0569;t.tohiragana=0x3068;t.tokatakana=0x30c8;t.tokatakanahalfwidth=0xff84;t.tonebarextrahighmod=0x02e5;t.tonebarextralowmod=0x02e9;t.tonebarhighmod=0x02e6;t.tonebarlowmod=0x02e8;t.tonebarmidmod=0x02e7;t.tonefive=0x01bd;t.tonesix=0x0185;t.tonetwo=0x01a8;t.tonos=0x0384;t.tonsquare=0x3327;t.topatakthai=0x0e0f;t.tortoiseshellbracketleft=0x3014;t.tortoiseshellbracketleftsmall=0xfe5d;t.tortoiseshellbracketleftvertical=0xfe39;t.tortoiseshellbracketright=0x3015;t.tortoiseshellbracketrightsmall=0xfe5e;t.tortoiseshellbracketrightvertical=0xfe3a;t.totaothai=0x0e15;t.tpalatalhook=0x01ab;t.tparen=0x24af;t.trademark=0x2122;t.trademarksans=0xf8ea;t.trademarkserif=0xf6db;t.tretroflexhook=0x0288;t.triagdn=0x25bc;t.triaglf=0x25c4;t.triagrt=0x25ba;t.triagup=0x25b2;t.ts=0x02a6;t.tsadi=0x05e6;t.tsadidagesh=0xfb46;t.tsadidageshhebrew=0xfb46;t.tsadihebrew=0x05e6;t.tsecyrillic=0x0446;t.tsere=0x05b5;t.tsere12=0x05b5;t.tsere1e=0x05b5;t.tsere2b=0x05b5;t.tserehebrew=0x05b5;t.tserenarrowhebrew=0x05b5;t.tserequarterhebrew=0x05b5;t.tserewidehebrew=0x05b5;t.tshecyrillic=0x045b;t.tsuperior=0xf6f3;t.ttabengali=0x099f;t.ttadeva=0x091f;t.ttagujarati=0x0a9f;t.ttagurmukhi=0x0a1f;t.tteharabic=0x0679;t.ttehfinalarabic=0xfb67;t.ttehinitialarabic=0xfb68;t.ttehmedialarabic=0xfb69;t.tthabengali=0x09a0;t.tthadeva=0x0920;t.tthagujarati=0x0aa0;t.tthagurmukhi=0x0a20;t.tturned=0x0287;t.tuhiragana=0x3064;t.tukatakana=0x30c4;t.tukatakanahalfwidth=0xff82;t.tusmallhiragana=0x3063;t.tusmallkatakana=0x30c3;t.tusmallkatakanahalfwidth=0xff6f;t.twelvecircle=0x246b;t.twelveparen=0x247f;t.twelveperiod=0x2493;t.twelveroman=0x217b;t.twentycircle=0x2473;t.twentyhangzhou=0x5344;t.twentyparen=0x2487;t.twentyperiod=0x249b;t.two=0x0032;t.twoarabic=0x0662;t.twobengali=0x09e8;t.twocircle=0x2461;t.twocircleinversesansserif=0x278b;t.twodeva=0x0968;t.twodotenleader=0x2025;t.twodotleader=0x2025;t.twodotleadervertical=0xfe30;t.twogujarati=0x0ae8;t.twogurmukhi=0x0a68;t.twohackarabic=0x0662;t.twohangzhou=0x3022;t.twoideographicparen=0x3221;t.twoinferior=0x2082;t.twomonospace=0xff12;t.twonumeratorbengali=0x09f5;t.twooldstyle=0xf732;t.twoparen=0x2475;t.twoperiod=0x2489;t.twopersian=0x06f2;t.tworoman=0x2171;t.twostroke=0x01bb;t.twosuperior=0x00b2;t.twothai=0x0e52;t.twothirds=0x2154;t.u=0x0075;t.uacute=0x00fa;t.ubar=0x0289;t.ubengali=0x0989;t.ubopomofo=0x3128;t.ubreve=0x016d;t.ucaron=0x01d4;t.ucircle=0x24e4;t.ucircumflex=0x00fb;t.ucircumflexbelow=0x1e77;t.ucyrillic=0x0443;t.udattadeva=0x0951;t.udblacute=0x0171;t.udblgrave=0x0215;t.udeva=0x0909;t.udieresis=0x00fc;t.udieresisacute=0x01d8;t.udieresisbelow=0x1e73;t.udieresiscaron=0x01da;t.udieresiscyrillic=0x04f1;t.udieresisgrave=0x01dc;t.udieresismacron=0x01d6;t.udotbelow=0x1ee5;t.ugrave=0x00f9;t.ugujarati=0x0a89;t.ugurmukhi=0x0a09;t.uhiragana=0x3046;t.uhookabove=0x1ee7;t.uhorn=0x01b0;t.uhornacute=0x1ee9;t.uhorndotbelow=0x1ef1;t.uhorngrave=0x1eeb;t.uhornhookabove=0x1eed;t.uhorntilde=0x1eef;t.uhungarumlaut=0x0171;t.uhungarumlautcyrillic=0x04f3;t.uinvertedbreve=0x0217;t.ukatakana=0x30a6;t.ukatakanahalfwidth=0xff73;t.ukcyrillic=0x0479;t.ukorean=0x315c;t.umacron=0x016b;t.umacroncyrillic=0x04ef;t.umacrondieresis=0x1e7b;t.umatragurmukhi=0x0a41;t.umonospace=0xff55;t.underscore=0x005f;t.underscoredbl=0x2017;t.underscoremonospace=0xff3f;t.underscorevertical=0xfe33;t.underscorewavy=0xfe4f;t.union=0x222a;t.universal=0x2200;t.uogonek=0x0173;t.uparen=0x24b0;t.upblock=0x2580;t.upperdothebrew=0x05c4;t.upsilon=0x03c5;t.upsilondieresis=0x03cb;t.upsilondieresistonos=0x03b0;t.upsilonlatin=0x028a;t.upsilontonos=0x03cd;t.uptackbelowcmb=0x031d;t.uptackmod=0x02d4;t.uragurmukhi=0x0a73;t.uring=0x016f;t.ushortcyrillic=0x045e;t.usmallhiragana=0x3045;t.usmallkatakana=0x30a5;t.usmallkatakanahalfwidth=0xff69;t.ustraightcyrillic=0x04af;t.ustraightstrokecyrillic=0x04b1;t.utilde=0x0169;t.utildeacute=0x1e79;t.utildebelow=0x1e75;t.uubengali=0x098a;t.uudeva=0x090a;t.uugujarati=0x0a8a;t.uugurmukhi=0x0a0a;t.uumatragurmukhi=0x0a42;t.uuvowelsignbengali=0x09c2;t.uuvowelsigndeva=0x0942;t.uuvowelsigngujarati=0x0ac2;t.uvowelsignbengali=0x09c1;t.uvowelsigndeva=0x0941;t.uvowelsigngujarati=0x0ac1;t.v=0x0076;t.vadeva=0x0935;t.vagujarati=0x0ab5;t.vagurmukhi=0x0a35;t.vakatakana=0x30f7;t.vav=0x05d5;t.vavdagesh=0xfb35;t.vavdagesh65=0xfb35;t.vavdageshhebrew=0xfb35;t.vavhebrew=0x05d5;t.vavholam=0xfb4b;t.vavholamhebrew=0xfb4b;t.vavvavhebrew=0x05f0;t.vavyodhebrew=0x05f1;t.vcircle=0x24e5;t.vdotbelow=0x1e7f;t.vecyrillic=0x0432;t.veharabic=0x06a4;t.vehfinalarabic=0xfb6b;t.vehinitialarabic=0xfb6c;t.vehmedialarabic=0xfb6d;t.vekatakana=0x30f9;t.venus=0x2640;t.verticalbar=0x007c;t.verticallineabovecmb=0x030d;t.verticallinebelowcmb=0x0329;t.verticallinelowmod=0x02cc;t.verticallinemod=0x02c8;t.vewarmenian=0x057e;t.vhook=0x028b;t.vikatakana=0x30f8;t.viramabengali=0x09cd;t.viramadeva=0x094d;t.viramagujarati=0x0acd;t.visargabengali=0x0983;t.visargadeva=0x0903;t.visargagujarati=0x0a83;t.vmonospace=0xff56;t.voarmenian=0x0578;t.voicediterationhiragana=0x309e;t.voicediterationkatakana=0x30fe;t.voicedmarkkana=0x309b;t.voicedmarkkanahalfwidth=0xff9e;t.vokatakana=0x30fa;t.vparen=0x24b1;t.vtilde=0x1e7d;t.vturned=0x028c;t.vuhiragana=0x3094;t.vukatakana=0x30f4;t.w=0x0077;t.wacute=0x1e83;t.waekorean=0x3159;t.wahiragana=0x308f;t.wakatakana=0x30ef;t.wakatakanahalfwidth=0xff9c;t.wakorean=0x3158;t.wasmallhiragana=0x308e;t.wasmallkatakana=0x30ee;t.wattosquare=0x3357;t.wavedash=0x301c;t.wavyunderscorevertical=0xfe34;t.wawarabic=0x0648;t.wawfinalarabic=0xfeee;t.wawhamzaabovearabic=0x0624;t.wawhamzaabovefinalarabic=0xfe86;t.wbsquare=0x33dd;t.wcircle=0x24e6;t.wcircumflex=0x0175;t.wdieresis=0x1e85;t.wdotaccent=0x1e87;t.wdotbelow=0x1e89;t.wehiragana=0x3091;t.weierstrass=0x2118;t.wekatakana=0x30f1;t.wekorean=0x315e;t.weokorean=0x315d;t.wgrave=0x1e81;t.whitebullet=0x25e6;t.whitecircle=0x25cb;t.whitecircleinverse=0x25d9;t.whitecornerbracketleft=0x300e;t.whitecornerbracketleftvertical=0xfe43;t.whitecornerbracketright=0x300f;t.whitecornerbracketrightvertical=0xfe44;t.whitediamond=0x25c7;t.whitediamondcontainingblacksmalldiamond=0x25c8;t.whitedownpointingsmalltriangle=0x25bf;t.whitedownpointingtriangle=0x25bd;t.whiteleftpointingsmalltriangle=0x25c3;t.whiteleftpointingtriangle=0x25c1;t.whitelenticularbracketleft=0x3016;t.whitelenticularbracketright=0x3017;t.whiterightpointingsmalltriangle=0x25b9;t.whiterightpointingtriangle=0x25b7;t.whitesmallsquare=0x25ab;t.whitesmilingface=0x263a;t.whitesquare=0x25a1;t.whitestar=0x2606;t.whitetelephone=0x260f;t.whitetortoiseshellbracketleft=0x3018;t.whitetortoiseshellbracketright=0x3019;t.whiteuppointingsmalltriangle=0x25b5;t.whiteuppointingtriangle=0x25b3;t.wihiragana=0x3090;t.wikatakana=0x30f0;t.wikorean=0x315f;t.wmonospace=0xff57;t.wohiragana=0x3092;t.wokatakana=0x30f2;t.wokatakanahalfwidth=0xff66;t.won=0x20a9;t.wonmonospace=0xffe6;t.wowaenthai=0x0e27;t.wparen=0x24b2;t.wring=0x1e98;t.wsuperior=0x02b7;t.wturned=0x028d;t.wynn=0x01bf;t.x=0x0078;t.xabovecmb=0x033d;t.xbopomofo=0x3112;t.xcircle=0x24e7;t.xdieresis=0x1e8d;t.xdotaccent=0x1e8b;t.xeharmenian=0x056d;t.xi=0x03be;t.xmonospace=0xff58;t.xparen=0x24b3;t.xsuperior=0x02e3;t.y=0x0079;t.yaadosquare=0x334e;t.yabengali=0x09af;t.yacute=0x00fd;t.yadeva=0x092f;t.yaekorean=0x3152;t.yagujarati=0x0aaf;t.yagurmukhi=0x0a2f;t.yahiragana=0x3084;t.yakatakana=0x30e4;t.yakatakanahalfwidth=0xff94;t.yakorean=0x3151;t.yamakkanthai=0x0e4e;t.yasmallhiragana=0x3083;t.yasmallkatakana=0x30e3;t.yasmallkatakanahalfwidth=0xff6c;t.yatcyrillic=0x0463;t.ycircle=0x24e8;t.ycircumflex=0x0177;t.ydieresis=0x00ff;t.ydotaccent=0x1e8f;t.ydotbelow=0x1ef5;t.yeharabic=0x064a;t.yehbarreearabic=0x06d2;t.yehbarreefinalarabic=0xfbaf;t.yehfinalarabic=0xfef2;t.yehhamzaabovearabic=0x0626;t.yehhamzaabovefinalarabic=0xfe8a;t.yehhamzaaboveinitialarabic=0xfe8b;t.yehhamzaabovemedialarabic=0xfe8c;t.yehinitialarabic=0xfef3;t.yehmedialarabic=0xfef4;t.yehmeeminitialarabic=0xfcdd;t.yehmeemisolatedarabic=0xfc58;t.yehnoonfinalarabic=0xfc94;t.yehthreedotsbelowarabic=0x06d1;t.yekorean=0x3156;t.yen=0x00a5;t.yenmonospace=0xffe5;t.yeokorean=0x3155;t.yeorinhieuhkorean=0x3186;t.yerahbenyomohebrew=0x05aa;t.yerahbenyomolefthebrew=0x05aa;t.yericyrillic=0x044b;t.yerudieresiscyrillic=0x04f9;t.yesieungkorean=0x3181;t.yesieungpansioskorean=0x3183;t.yesieungsioskorean=0x3182;t.yetivhebrew=0x059a;t.ygrave=0x1ef3;t.yhook=0x01b4;t.yhookabove=0x1ef7;t.yiarmenian=0x0575;t.yicyrillic=0x0457;t.yikorean=0x3162;t.yinyang=0x262f;t.yiwnarmenian=0x0582;t.ymonospace=0xff59;t.yod=0x05d9;t.yoddagesh=0xfb39;t.yoddageshhebrew=0xfb39;t.yodhebrew=0x05d9;t.yodyodhebrew=0x05f2;t.yodyodpatahhebrew=0xfb1f;t.yohiragana=0x3088;t.yoikorean=0x3189;t.yokatakana=0x30e8;t.yokatakanahalfwidth=0xff96;t.yokorean=0x315b;t.yosmallhiragana=0x3087;t.yosmallkatakana=0x30e7;t.yosmallkatakanahalfwidth=0xff6e;t.yotgreek=0x03f3;t.yoyaekorean=0x3188;t.yoyakorean=0x3187;t.yoyakthai=0x0e22;t.yoyingthai=0x0e0d;t.yparen=0x24b4;t.ypogegrammeni=0x037a;t.ypogegrammenigreekcmb=0x0345;t.yr=0x01a6;t.yring=0x1e99;t.ysuperior=0x02b8;t.ytilde=0x1ef9;t.yturned=0x028e;t.yuhiragana=0x3086;t.yuikorean=0x318c;t.yukatakana=0x30e6;t.yukatakanahalfwidth=0xff95;t.yukorean=0x3160;t.yusbigcyrillic=0x046b;t.yusbigiotifiedcyrillic=0x046d;t.yuslittlecyrillic=0x0467;t.yuslittleiotifiedcyrillic=0x0469;t.yusmallhiragana=0x3085;t.yusmallkatakana=0x30e5;t.yusmallkatakanahalfwidth=0xff6d;t.yuyekorean=0x318b;t.yuyeokorean=0x318a;t.yyabengali=0x09df;t.yyadeva=0x095f;t.z=0x007a;t.zaarmenian=0x0566;t.zacute=0x017a;t.zadeva=0x095b;t.zagurmukhi=0x0a5b;t.zaharabic=0x0638;t.zahfinalarabic=0xfec6;t.zahinitialarabic=0xfec7;t.zahiragana=0x3056;t.zahmedialarabic=0xfec8;t.zainarabic=0x0632;t.zainfinalarabic=0xfeb0;t.zakatakana=0x30b6;t.zaqefgadolhebrew=0x0595;t.zaqefqatanhebrew=0x0594;t.zarqahebrew=0x0598;t.zayin=0x05d6;t.zayindagesh=0xfb36;t.zayindageshhebrew=0xfb36;t.zayinhebrew=0x05d6;t.zbopomofo=0x3117;t.zcaron=0x017e;t.zcircle=0x24e9;t.zcircumflex=0x1e91;t.zcurl=0x0291;t.zdot=0x017c;t.zdotaccent=0x017c;t.zdotbelow=0x1e93;t.zecyrillic=0x0437;t.zedescendercyrillic=0x0499;t.zedieresiscyrillic=0x04df;t.zehiragana=0x305c;t.zekatakana=0x30bc;t.zero=0x0030;t.zeroarabic=0x0660;t.zerobengali=0x09e6;t.zerodeva=0x0966;t.zerogujarati=0x0ae6;t.zerogurmukhi=0x0a66;t.zerohackarabic=0x0660;t.zeroinferior=0x2080;t.zeromonospace=0xff10;t.zerooldstyle=0xf730;t.zeropersian=0x06f0;t.zerosuperior=0x2070;t.zerothai=0x0e50;t.zerowidthjoiner=0xfeff;t.zerowidthnonjoiner=0x200c;t.zerowidthspace=0x200b;t.zeta=0x03b6;t.zhbopomofo=0x3113;t.zhearmenian=0x056a;t.zhebrevecyrillic=0x04c2;t.zhecyrillic=0x0436;t.zhedescendercyrillic=0x0497;t.zhedieresiscyrillic=0x04dd;t.zihiragana=0x3058;t.zikatakana=0x30b8;t.zinorhebrew=0x05ae;t.zlinebelow=0x1e95;t.zmonospace=0xff5a;t.zohiragana=0x305e;t.zokatakana=0x30be;t.zparen=0x24b5;t.zretroflexhook=0x0290;t.zstroke=0x01b6;t.zuhiragana=0x305a;t.zukatakana=0x30ba;t[".notdef"]=0x0000;t.angbracketleftbig=0x2329;t.angbracketleftBig=0x2329;t.angbracketleftbigg=0x2329;t.angbracketleftBigg=0x2329;t.angbracketrightBig=0x232a;t.angbracketrightbig=0x232a;t.angbracketrightBigg=0x232a;t.angbracketrightbigg=0x232a;t.arrowhookleft=0x21aa;t.arrowhookright=0x21a9;t.arrowlefttophalf=0x21bc;t.arrowleftbothalf=0x21bd;t.arrownortheast=0x2197;t.arrownorthwest=0x2196;t.arrowrighttophalf=0x21c0;t.arrowrightbothalf=0x21c1;t.arrowsoutheast=0x2198;t.arrowsouthwest=0x2199;t.backslashbig=0x2216;t.backslashBig=0x2216;t.backslashBigg=0x2216;t.backslashbigg=0x2216;t.bardbl=0x2016;t.bracehtipdownleft=0xfe37;t.bracehtipdownright=0xfe37;t.bracehtipupleft=0xfe38;t.bracehtipupright=0xfe38;t.braceleftBig=0x007b;t.braceleftbig=0x007b;t.braceleftbigg=0x007b;t.braceleftBigg=0x007b;t.bracerightBig=0x007d;t.bracerightbig=0x007d;t.bracerightbigg=0x007d;t.bracerightBigg=0x007d;t.bracketleftbig=0x005b;t.bracketleftBig=0x005b;t.bracketleftbigg=0x005b;t.bracketleftBigg=0x005b;t.bracketrightBig=0x005d;t.bracketrightbig=0x005d;t.bracketrightbigg=0x005d;t.bracketrightBigg=0x005d;t.ceilingleftbig=0x2308;t.ceilingleftBig=0x2308;t.ceilingleftBigg=0x2308;t.ceilingleftbigg=0x2308;t.ceilingrightbig=0x2309;t.ceilingrightBig=0x2309;t.ceilingrightbigg=0x2309;t.ceilingrightBigg=0x2309;t.circledotdisplay=0x2299;t.circledottext=0x2299;t.circlemultiplydisplay=0x2297;t.circlemultiplytext=0x2297;t.circleplusdisplay=0x2295;t.circleplustext=0x2295;t.contintegraldisplay=0x222e;t.contintegraltext=0x222e;t.coproductdisplay=0x2210;t.coproducttext=0x2210;t.floorleftBig=0x230a;t.floorleftbig=0x230a;t.floorleftbigg=0x230a;t.floorleftBigg=0x230a;t.floorrightbig=0x230b;t.floorrightBig=0x230b;t.floorrightBigg=0x230b;t.floorrightbigg=0x230b;t.hatwide=0x0302;t.hatwider=0x0302;t.hatwidest=0x0302;t.intercal=0x1d40;t.integraldisplay=0x222b;t.integraltext=0x222b;t.intersectiondisplay=0x22c2;t.intersectiontext=0x22c2;t.logicalanddisplay=0x2227;t.logicalandtext=0x2227;t.logicalordisplay=0x2228;t.logicalortext=0x2228;t.parenleftBig=0x0028;t.parenleftbig=0x0028;t.parenleftBigg=0x0028;t.parenleftbigg=0x0028;t.parenrightBig=0x0029;t.parenrightbig=0x0029;t.parenrightBigg=0x0029;t.parenrightbigg=0x0029;t.prime=0x2032;t.productdisplay=0x220f;t.producttext=0x220f;t.radicalbig=0x221a;t.radicalBig=0x221a;t.radicalBigg=0x221a;t.radicalbigg=0x221a;t.radicalbt=0x221a;t.radicaltp=0x221a;t.radicalvertex=0x221a;t.slashbig=0x002f;t.slashBig=0x002f;t.slashBigg=0x002f;t.slashbigg=0x002f;t.summationdisplay=0x2211;t.summationtext=0x2211;t.tildewide=0x02dc;t.tildewider=0x02dc;t.tildewidest=0x02dc;t.uniondisplay=0x22c3;t.unionmultidisplay=0x228e;t.unionmultitext=0x228e;t.unionsqdisplay=0x2294;t.unionsqtext=0x2294;t.uniontext=0x22c3;t.vextenddouble=0x2225;t.vextendsingle=0x2223;});var getDingbatsGlyphsUnicode=getLookupTableFactory(function(t){t.space=0x0020;t.a1=0x2701;t.a2=0x2702;t.a202=0x2703;t.a3=0x2704;t.a4=0x260e;t.a5=0x2706;t.a119=0x2707;t.a118=0x2708;t.a117=0x2709;t.a11=0x261b;t.a12=0x261e;t.a13=0x270c;t.a14=0x270d;t.a15=0x270e;t.a16=0x270f;t.a105=0x2710;t.a17=0x2711;t.a18=0x2712;t.a19=0x2713;t.a20=0x2714;t.a21=0x2715;t.a22=0x2716;t.a23=0x2717;t.a24=0x2718;t.a25=0x2719;t.a26=0x271a;t.a27=0x271b;t.a28=0x271c;t.a6=0x271d;t.a7=0x271e;t.a8=0x271f;t.a9=0x2720;t.a10=0x2721;t.a29=0x2722;t.a30=0x2723;t.a31=0x2724;t.a32=0x2725;t.a33=0x2726;t.a34=0x2727;t.a35=0x2605;t.a36=0x2729;t.a37=0x272a;t.a38=0x272b;t.a39=0x272c;t.a40=0x272d;t.a41=0x272e;t.a42=0x272f;t.a43=0x2730;t.a44=0x2731;t.a45=0x2732;t.a46=0x2733;t.a47=0x2734;t.a48=0x2735;t.a49=0x2736;t.a50=0x2737;t.a51=0x2738;t.a52=0x2739;t.a53=0x273a;t.a54=0x273b;t.a55=0x273c;t.a56=0x273d;t.a57=0x273e;t.a58=0x273f;t.a59=0x2740;t.a60=0x2741;t.a61=0x2742;t.a62=0x2743;t.a63=0x2744;t.a64=0x2745;t.a65=0x2746;t.a66=0x2747;t.a67=0x2748;t.a68=0x2749;t.a69=0x274a;t.a70=0x274b;t.a71=0x25cf;t.a72=0x274d;t.a73=0x25a0;t.a74=0x274f;t.a203=0x2750;t.a75=0x2751;t.a204=0x2752;t.a76=0x25b2;t.a77=0x25bc;t.a78=0x25c6;t.a79=0x2756;t.a81=0x25d7;t.a82=0x2758;t.a83=0x2759;t.a84=0x275a;t.a97=0x275b;t.a98=0x275c;t.a99=0x275d;t.a100=0x275e;t.a101=0x2761;t.a102=0x2762;t.a103=0x2763;t.a104=0x2764;t.a106=0x2765;t.a107=0x2766;t.a108=0x2767;t.a112=0x2663;t.a111=0x2666;t.a110=0x2665;t.a109=0x2660;t.a120=0x2460;t.a121=0x2461;t.a122=0x2462;t.a123=0x2463;t.a124=0x2464;t.a125=0x2465;t.a126=0x2466;t.a127=0x2467;t.a128=0x2468;t.a129=0x2469;t.a130=0x2776;t.a131=0x2777;t.a132=0x2778;t.a133=0x2779;t.a134=0x277a;t.a135=0x277b;t.a136=0x277c;t.a137=0x277d;t.a138=0x277e;t.a139=0x277f;t.a140=0x2780;t.a141=0x2781;t.a142=0x2782;t.a143=0x2783;t.a144=0x2784;t.a145=0x2785;t.a146=0x2786;t.a147=0x2787;t.a148=0x2788;t.a149=0x2789;t.a150=0x278a;t.a151=0x278b;t.a152=0x278c;t.a153=0x278d;t.a154=0x278e;t.a155=0x278f;t.a156=0x2790;t.a157=0x2791;t.a158=0x2792;t.a159=0x2793;t.a160=0x2794;t.a161=0x2192;t.a163=0x2194;t.a164=0x2195;t.a196=0x2798;t.a165=0x2799;t.a192=0x279a;t.a166=0x279b;t.a167=0x279c;t.a168=0x279d;t.a169=0x279e;t.a170=0x279f;t.a171=0x27a0;t.a172=0x27a1;t.a173=0x27a2;t.a162=0x27a3;t.a174=0x27a4;t.a175=0x27a5;t.a176=0x27a6;t.a177=0x27a7;t.a178=0x27a8;t.a179=0x27a9;t.a193=0x27aa;t.a180=0x27ab;t.a199=0x27ac;t.a181=0x27ad;t.a200=0x27ae;t.a182=0x27af;t.a201=0x27b1;t.a183=0x27b2;t.a184=0x27b3;t.a197=0x27b4;t.a185=0x27b5;t.a194=0x27b6;t.a198=0x27b7;t.a186=0x27b8;t.a195=0x27b9;t.a187=0x27ba;t.a188=0x27bb;t.a189=0x27bc;t.a190=0x27bd;t.a191=0x27be;t.a89=0x2768;t.a90=0x2769;t.a93=0x276a;t.a94=0x276b;t.a91=0x276c;t.a92=0x276d;t.a205=0x276e;t.a85=0x276f;t.a206=0x2770;t.a86=0x2771;t.a87=0x2772;t.a88=0x2773;t.a95=0x2774;t.a96=0x2775;t[".notdef"]=0x0000;});
;// CONCATENATED MODULE: ./src/core/unicode.js
var getSpecialPUASymbols=getLookupTableFactory(function(t){t[63721]=0x00a9;t[63193]=0x00a9;t[63720]=0x00ae;t[63194]=0x00ae;t[63722]=0x2122;t[63195]=0x2122;t[63729]=0x23a7;t[63730]=0x23a8;t[63731]=0x23a9;t[63740]=0x23ab;t[63741]=0x23ac;t[63742]=0x23ad;t[63726]=0x23a1;t[63727]=0x23a2;t[63728]=0x23a3;t[63737]=0x23a4;t[63738]=0x23a5;t[63739]=0x23a6;t[63723]=0x239b;t[63724]=0x239c;t[63725]=0x239d;t[63734]=0x239e;t[63735]=0x239f;t[63736]=0x23a0;});function mapSpecialUnicodeValues(code){if(code>=0xfff0&&code<=0xffff){return 0;}else if(code>=0xf600&&code<=0xf8ff){return getSpecialPUASymbols()[code]||code;}else if(code===0x00ad){return 0x002d;}return code;}function getUnicodeForGlyph(name,glyphsUnicodeMap){var unicode=glyphsUnicodeMap[name];if(unicode!==undefined){return unicode;}if(!name){return-1;}if(name[0]==="u"){var nameLen=name.length;var hexStr;if(nameLen===7&&name[1]==="n"&&name[2]==="i"){hexStr=name.substring(3);}else if(nameLen>=5&&nameLen<=7){hexStr=name.substring(1);}else{return-1;}if(hexStr===hexStr.toUpperCase()){unicode=parseInt(hexStr,16);if(unicode>=0){return unicode;}}}return-1;}var UnicodeRanges=[[0x0000,0x007f],[0x0080,0x00ff],[0x0100,0x017f],[0x0180,0x024f],[0x0250,0x02af,0x1d00,0x1d7f,0x1d80,0x1dbf],[0x02b0,0x02ff,0xa700,0xa71f],[0x0300,0x036f,0x1dc0,0x1dff],[0x0370,0x03ff],[0x2c80,0x2cff],[0x0400,0x04ff,0x0500,0x052f,0x2de0,0x2dff,0xa640,0xa69f],[0x0530,0x058f],[0x0590,0x05ff],[0xa500,0xa63f],[0x0600,0x06ff,0x0750,0x077f],[0x07c0,0x07ff],[0x0900,0x097f],[0x0980,0x09ff],[0x0a00,0x0a7f],[0x0a80,0x0aff],[0x0b00,0x0b7f],[0x0b80,0x0bff],[0x0c00,0x0c7f],[0x0c80,0x0cff],[0x0d00,0x0d7f],[0x0e00,0x0e7f],[0x0e80,0x0eff],[0x10a0,0x10ff,0x2d00,0x2d2f],[0x1b00,0x1b7f],[0x1100,0x11ff],[0x1e00,0x1eff,0x2c60,0x2c7f,0xa720,0xa7ff],[0x1f00,0x1fff],[0x2000,0x206f,0x2e00,0x2e7f],[0x2070,0x209f],[0x20a0,0x20cf],[0x20d0,0x20ff],[0x2100,0x214f],[0x2150,0x218f],[0x2190,0x21ff,0x27f0,0x27ff,0x2900,0x297f,0x2b00,0x2bff],[0x2200,0x22ff,0x2a00,0x2aff,0x27c0,0x27ef,0x2980,0x29ff],[0x2300,0x23ff],[0x2400,0x243f],[0x2440,0x245f],[0x2460,0x24ff],[0x2500,0x257f],[0x2580,0x259f],[0x25a0,0x25ff],[0x2600,0x26ff],[0x2700,0x27bf],[0x3000,0x303f],[0x3040,0x309f],[0x30a0,0x30ff,0x31f0,0x31ff],[0x3100,0x312f,0x31a0,0x31bf],[0x3130,0x318f],[0xa840,0xa87f],[0x3200,0x32ff],[0x3300,0x33ff],[0xac00,0xd7af],[0xd800,0xdfff],[0x10900,0x1091f],[0x4e00,0x9fff,0x2e80,0x2eff,0x2f00,0x2fdf,0x2ff0,0x2fff,0x3400,0x4dbf,0x20000,0x2a6df,0x3190,0x319f],[0xe000,0xf8ff],[0x31c0,0x31ef,0xf900,0xfaff,0x2f800,0x2fa1f],[0xfb00,0xfb4f],[0xfb50,0xfdff],[0xfe20,0xfe2f],[0xfe10,0xfe1f],[0xfe50,0xfe6f],[0xfe70,0xfeff],[0xff00,0xffef],[0xfff0,0xffff],[0x0f00,0x0fff],[0x0700,0x074f],[0x0780,0x07bf],[0x0d80,0x0dff],[0x1000,0x109f],[0x1200,0x137f,0x1380,0x139f,0x2d80,0x2ddf],[0x13a0,0x13ff],[0x1400,0x167f],[0x1680,0x169f],[0x16a0,0x16ff],[0x1780,0x17ff],[0x1800,0x18af],[0x2800,0x28ff],[0xa000,0xa48f],[0x1700,0x171f,0x1720,0x173f,0x1740,0x175f,0x1760,0x177f],[0x10300,0x1032f],[0x10330,0x1034f],[0x10400,0x1044f],[0x1d000,0x1d0ff,0x1d100,0x1d1ff,0x1d200,0x1d24f],[0x1d400,0x1d7ff],[0xff000,0xffffd],[0xfe00,0xfe0f,0xe0100,0xe01ef],[0xe0000,0xe007f],[0x1900,0x194f],[0x1950,0x197f],[0x1980,0x19df],[0x1a00,0x1a1f],[0x2c00,0x2c5f],[0x2d30,0x2d7f],[0x4dc0,0x4dff],[0xa800,0xa82f],[0x10000,0x1007f,0x10080,0x100ff,0x10100,0x1013f],[0x10140,0x1018f],[0x10380,0x1039f],[0x103a0,0x103df],[0x10450,0x1047f],[0x10480,0x104af],[0x10800,0x1083f],[0x10a00,0x10a5f],[0x1d300,0x1d35f],[0x12000,0x123ff,0x12400,0x1247f],[0x1d360,0x1d37f],[0x1b80,0x1bbf],[0x1c00,0x1c4f],[0x1c50,0x1c7f],[0xa880,0xa8df],[0xa900,0xa92f],[0xa930,0xa95f],[0xaa00,0xaa5f],[0x10190,0x101cf],[0x101d0,0x101ff],[0x102a0,0x102df,0x10280,0x1029f,0x10920,0x1093f],[0x1f030,0x1f09f,0x1f000,0x1f02f]];function getUnicodeRangeFor(value){var lastPosition=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;if(lastPosition!==-1){var range=UnicodeRanges[lastPosition];for(var i=0,ii=range.length;i<ii;i+=2){if(value>=range[i]&&value<=range[i+1]){return lastPosition;}}}for(var _i=0,_ii=UnicodeRanges.length;_i<_ii;_i++){var _range=UnicodeRanges[_i];for(var j=0,jj=_range.length;j<jj;j+=2){if(value>=_range[j]&&value<=_range[j+1]){return _i;}}}return-1;}var SpecialCharRegExp=new RegExp("^(\\s)|(\\p{Mn})|(\\p{Cf})$","u");var CategoryCache=new Map();function getCharUnicodeCategory(char){var cachedCategory=CategoryCache.get(char);if(cachedCategory){return cachedCategory;}var groups=char.match(SpecialCharRegExp);var category={isWhitespace:!!(groups!==null&&groups!==void 0&&groups[1]),isZeroWidthDiacritic:!!(groups!==null&&groups!==void 0&&groups[2]),isInvisibleFormatMark:!!(groups!==null&&groups!==void 0&&groups[3])};CategoryCache.set(char,category);return category;}function clearUnicodeCaches(){CategoryCache.clear();}
;// CONCATENATED MODULE: ./src/core/fonts_utils.js
var SEAC_ANALYSIS_ENABLED=true;var FontFlags={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};var MacStandardGlyphOrdering=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function recoverGlyphName(name,glyphsUnicodeMap){if(glyphsUnicodeMap[name]!==undefined){return name;}var unicode=getUnicodeForGlyph(name,glyphsUnicodeMap);if(unicode!==-1){for(var key in glyphsUnicodeMap){if(glyphsUnicodeMap[key]===unicode){return key;}}}info("Unable to recover a standard glyph name for: "+name);return name;}function type1FontGlyphMapping(properties,builtInEncoding,glyphNames){var charCodeToGlyphId=Object.create(null);var glyphId,charCode,baseEncoding;var isSymbolicFont=!!(properties.flags&FontFlags.Symbolic);if(properties.isInternalFont){baseEncoding=builtInEncoding;for(charCode=0;charCode<baseEncoding.length;charCode++){glyphId=glyphNames.indexOf(baseEncoding[charCode]);charCodeToGlyphId[charCode]=glyphId>=0?glyphId:0;}}else if(properties.baseEncodingName){baseEncoding=getEncoding(properties.baseEncodingName);for(charCode=0;charCode<baseEncoding.length;charCode++){glyphId=glyphNames.indexOf(baseEncoding[charCode]);charCodeToGlyphId[charCode]=glyphId>=0?glyphId:0;}}else if(isSymbolicFont){for(charCode in builtInEncoding){charCodeToGlyphId[charCode]=builtInEncoding[charCode];}}else{baseEncoding=StandardEncoding;for(charCode=0;charCode<baseEncoding.length;charCode++){glyphId=glyphNames.indexOf(baseEncoding[charCode]);charCodeToGlyphId[charCode]=glyphId>=0?glyphId:0;}}var differences=properties.differences;var glyphsUnicodeMap;if(differences){for(charCode in differences){var glyphName=differences[charCode];glyphId=glyphNames.indexOf(glyphName);if(glyphId===-1){if(!glyphsUnicodeMap){glyphsUnicodeMap=getGlyphsUnicode();}var standardGlyphName=recoverGlyphName(glyphName,glyphsUnicodeMap);if(standardGlyphName!==glyphName){glyphId=glyphNames.indexOf(standardGlyphName);}}charCodeToGlyphId[charCode]=glyphId>=0?glyphId:0;}}return charCodeToGlyphId;}function normalizeFontName(name){return name.replaceAll(/[,_]/g,"-").replaceAll(/\s/g,"");}
;// CONCATENATED MODULE: ./src/core/standard_fonts.js
var getStdFontMap=getLookupTableFactory(function(t){t["Times-Roman"]="Times-Roman";t.Helvetica="Helvetica";t.Courier="Courier";t.Symbol="Symbol";t["Times-Bold"]="Times-Bold";t["Helvetica-Bold"]="Helvetica-Bold";t["Courier-Bold"]="Courier-Bold";t.ZapfDingbats="ZapfDingbats";t["Times-Italic"]="Times-Italic";t["Helvetica-Oblique"]="Helvetica-Oblique";t["Courier-Oblique"]="Courier-Oblique";t["Times-BoldItalic"]="Times-BoldItalic";t["Helvetica-BoldOblique"]="Helvetica-BoldOblique";t["Courier-BoldOblique"]="Courier-BoldOblique";t.ArialNarrow="Helvetica";t["ArialNarrow-Bold"]="Helvetica-Bold";t["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique";t["ArialNarrow-Italic"]="Helvetica-Oblique";t.ArialBlack="Helvetica";t["ArialBlack-Bold"]="Helvetica-Bold";t["ArialBlack-BoldItalic"]="Helvetica-BoldOblique";t["ArialBlack-Italic"]="Helvetica-Oblique";t["Arial-Black"]="Helvetica";t["Arial-Black-Bold"]="Helvetica-Bold";t["Arial-Black-BoldItalic"]="Helvetica-BoldOblique";t["Arial-Black-Italic"]="Helvetica-Oblique";t.Arial="Helvetica";t["Arial-Bold"]="Helvetica-Bold";t["Arial-BoldItalic"]="Helvetica-BoldOblique";t["Arial-Italic"]="Helvetica-Oblique";t.ArialMT="Helvetica";t["Arial-BoldItalicMT"]="Helvetica-BoldOblique";t["Arial-BoldMT"]="Helvetica-Bold";t["Arial-ItalicMT"]="Helvetica-Oblique";t["Arial-BoldItalicMT-BoldItalic"]="Helvetica-BoldOblique";t["Arial-BoldMT-Bold"]="Helvetica-Bold";t["Arial-ItalicMT-Italic"]="Helvetica-Oblique";t.ArialUnicodeMS="Helvetica";t["ArialUnicodeMS-Bold"]="Helvetica-Bold";t["ArialUnicodeMS-BoldItalic"]="Helvetica-BoldOblique";t["ArialUnicodeMS-Italic"]="Helvetica-Oblique";t["Courier-BoldItalic"]="Courier-BoldOblique";t["Courier-Italic"]="Courier-Oblique";t.CourierNew="Courier";t["CourierNew-Bold"]="Courier-Bold";t["CourierNew-BoldItalic"]="Courier-BoldOblique";t["CourierNew-Italic"]="Courier-Oblique";t["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique";t["CourierNewPS-BoldMT"]="Courier-Bold";t["CourierNewPS-ItalicMT"]="Courier-Oblique";t.CourierNewPSMT="Courier";t["Helvetica-BoldItalic"]="Helvetica-BoldOblique";t["Helvetica-Italic"]="Helvetica-Oblique";t["Symbol-Bold"]="Symbol";t["Symbol-BoldItalic"]="Symbol";t["Symbol-Italic"]="Symbol";t.TimesNewRoman="Times-Roman";t["TimesNewRoman-Bold"]="Times-Bold";t["TimesNewRoman-BoldItalic"]="Times-BoldItalic";t["TimesNewRoman-Italic"]="Times-Italic";t.TimesNewRomanPS="Times-Roman";t["TimesNewRomanPS-Bold"]="Times-Bold";t["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic";t["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic";t["TimesNewRomanPS-BoldMT"]="Times-Bold";t["TimesNewRomanPS-Italic"]="Times-Italic";t["TimesNewRomanPS-ItalicMT"]="Times-Italic";t.TimesNewRomanPSMT="Times-Roman";t["TimesNewRomanPSMT-Bold"]="Times-Bold";t["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic";t["TimesNewRomanPSMT-Italic"]="Times-Italic";});var getFontNameToFileMap=getLookupTableFactory(function(t){t.Courier="FoxitFixed.pfb";t["Courier-Bold"]="FoxitFixedBold.pfb";t["Courier-BoldOblique"]="FoxitFixedBoldItalic.pfb";t["Courier-Oblique"]="FoxitFixedItalic.pfb";t.Helvetica="LiberationSans-Regular.ttf";t["Helvetica-Bold"]="LiberationSans-Bold.ttf";t["Helvetica-BoldOblique"]="LiberationSans-BoldItalic.ttf";t["Helvetica-Oblique"]="LiberationSans-Italic.ttf";t["Times-Roman"]="FoxitSerif.pfb";t["Times-Bold"]="FoxitSerifBold.pfb";t["Times-BoldItalic"]="FoxitSerifBoldItalic.pfb";t["Times-Italic"]="FoxitSerifItalic.pfb";t.Symbol="FoxitSymbol.pfb";t.ZapfDingbats="FoxitDingbats.pfb";t["LiberationSans-Regular"]="LiberationSans-Regular.ttf";t["LiberationSans-Bold"]="LiberationSans-Bold.ttf";t["LiberationSans-Italic"]="LiberationSans-Italic.ttf";t["LiberationSans-BoldItalic"]="LiberationSans-BoldItalic.ttf";});var getNonStdFontMap=getLookupTableFactory(function(t){t.Calibri="Helvetica";t["Calibri-Bold"]="Helvetica-Bold";t["Calibri-BoldItalic"]="Helvetica-BoldOblique";t["Calibri-Italic"]="Helvetica-Oblique";t.CenturyGothic="Helvetica";t["CenturyGothic-Bold"]="Helvetica-Bold";t["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique";t["CenturyGothic-Italic"]="Helvetica-Oblique";t.ComicSansMS="Comic Sans MS";t["ComicSansMS-Bold"]="Comic Sans MS-Bold";t["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic";t["ComicSansMS-Italic"]="Comic Sans MS-Italic";t.Impact="Helvetica";t["ItcSymbol-Bold"]="Helvetica-Bold";t["ItcSymbol-BoldItalic"]="Helvetica-BoldOblique";t["ItcSymbol-Book"]="Helvetica";t["ItcSymbol-BookItalic"]="Helvetica-Oblique";t["ItcSymbol-Medium"]="Helvetica";t["ItcSymbol-MediumItalic"]="Helvetica-Oblique";t.LucidaConsole="Courier";t["LucidaConsole-Bold"]="Courier-Bold";t["LucidaConsole-BoldItalic"]="Courier-BoldOblique";t["LucidaConsole-Italic"]="Courier-Oblique";t["LucidaSans-Demi"]="Helvetica-Bold";t["MS-Gothic"]="MS Gothic";t["MS-Gothic-Bold"]="MS Gothic-Bold";t["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic";t["MS-Gothic-Italic"]="MS Gothic-Italic";t["MS-Mincho"]="MS Mincho";t["MS-Mincho-Bold"]="MS Mincho-Bold";t["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic";t["MS-Mincho-Italic"]="MS Mincho-Italic";t["MS-PGothic"]="MS PGothic";t["MS-PGothic-Bold"]="MS PGothic-Bold";t["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic";t["MS-PGothic-Italic"]="MS PGothic-Italic";t["MS-PMincho"]="MS PMincho";t["MS-PMincho-Bold"]="MS PMincho-Bold";t["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic";t["MS-PMincho-Italic"]="MS PMincho-Italic";t.NuptialScript="Times-Italic";t.SegoeUISymbol="Helvetica";});var getSerifFonts=getLookupTableFactory(function(t){t["Adobe Jenson"]=true;t["Adobe Text"]=true;t.Albertus=true;t.Aldus=true;t.Alexandria=true;t.Algerian=true;t["American Typewriter"]=true;t.Antiqua=true;t.Apex=true;t.Arno=true;t.Aster=true;t.Aurora=true;t.Baskerville=true;t.Bell=true;t.Bembo=true;t["Bembo Schoolbook"]=true;t.Benguiat=true;t["Berkeley Old Style"]=true;t["Bernhard Modern"]=true;t["Berthold City"]=true;t.Bodoni=true;t["Bauer Bodoni"]=true;t["Book Antiqua"]=true;t.Bookman=true;t["Bordeaux Roman"]=true;t["Californian FB"]=true;t.Calisto=true;t.Calvert=true;t.Capitals=true;t.Cambria=true;t.Cartier=true;t.Caslon=true;t.Catull=true;t.Centaur=true;t["Century Old Style"]=true;t["Century Schoolbook"]=true;t.Chaparral=true;t["Charis SIL"]=true;t.Cheltenham=true;t["Cholla Slab"]=true;t.Clarendon=true;t.Clearface=true;t.Cochin=true;t.Colonna=true;t["Computer Modern"]=true;t["Concrete Roman"]=true;t.Constantia=true;t["Cooper Black"]=true;t.Corona=true;t.Ecotype=true;t.Egyptienne=true;t.Elephant=true;t.Excelsior=true;t.Fairfield=true;t["FF Scala"]=true;t.Folkard=true;t.Footlight=true;t.FreeSerif=true;t["Friz Quadrata"]=true;t.Garamond=true;t.Gentium=true;t.Georgia=true;t.Gloucester=true;t["Goudy Old Style"]=true;t["Goudy Schoolbook"]=true;t["Goudy Pro Font"]=true;t.Granjon=true;t["Guardian Egyptian"]=true;t.Heather=true;t.Hercules=true;t["High Tower Text"]=true;t.Hiroshige=true;t["Hoefler Text"]=true;t["Humana Serif"]=true;t.Imprint=true;t["Ionic No. 5"]=true;t.Janson=true;t.Joanna=true;t.Korinna=true;t.Lexicon=true;t.LiberationSerif=true;t["Liberation Serif"]=true;t["Linux Libertine"]=true;t.Literaturnaya=true;t.Lucida=true;t["Lucida Bright"]=true;t.Melior=true;t.Memphis=true;t.Miller=true;t.Minion=true;t.Modern=true;t["Mona Lisa"]=true;t["Mrs Eaves"]=true;t["MS Serif"]=true;t["Museo Slab"]=true;t["New York"]=true;t["Nimbus Roman"]=true;t["NPS Rawlinson Roadway"]=true;t.NuptialScript=true;t.Palatino=true;t.Perpetua=true;t.Plantin=true;t["Plantin Schoolbook"]=true;t.Playbill=true;t["Poor Richard"]=true;t["Rawlinson Roadway"]=true;t.Renault=true;t.Requiem=true;t.Rockwell=true;t.Roman=true;t["Rotis Serif"]=true;t.Sabon=true;t.Scala=true;t.Seagull=true;t.Sistina=true;t.Souvenir=true;t.STIX=true;t["Stone Informal"]=true;t["Stone Serif"]=true;t.Sylfaen=true;t.Times=true;t.Trajan=true;t["Trinit"]=true;t["Trump Mediaeval"]=true;t.Utopia=true;t["Vale Type"]=true;t["Bitstream Vera"]=true;t["Vera Serif"]=true;t.Versailles=true;t.Wanted=true;t.Weiss=true;t["Wide Latin"]=true;t.Windsor=true;t.XITS=true;});var getSymbolsFonts=getLookupTableFactory(function(t){t.Dingbats=true;t.Symbol=true;t.ZapfDingbats=true;t.Wingdings=true;t["Wingdings-Bold"]=true;t["Wingdings-Regular"]=true;});var getGlyphMapForStandardFonts=getLookupTableFactory(function(t){t[2]=10;t[3]=32;t[4]=33;t[5]=34;t[6]=35;t[7]=36;t[8]=37;t[9]=38;t[10]=39;t[11]=40;t[12]=41;t[13]=42;t[14]=43;t[15]=44;t[16]=45;t[17]=46;t[18]=47;t[19]=48;t[20]=49;t[21]=50;t[22]=51;t[23]=52;t[24]=53;t[25]=54;t[26]=55;t[27]=56;t[28]=57;t[29]=58;t[30]=894;t[31]=60;t[32]=61;t[33]=62;t[34]=63;t[35]=64;t[36]=65;t[37]=66;t[38]=67;t[39]=68;t[40]=69;t[41]=70;t[42]=71;t[43]=72;t[44]=73;t[45]=74;t[46]=75;t[47]=76;t[48]=77;t[49]=78;t[50]=79;t[51]=80;t[52]=81;t[53]=82;t[54]=83;t[55]=84;t[56]=85;t[57]=86;t[58]=87;t[59]=88;t[60]=89;t[61]=90;t[62]=91;t[63]=92;t[64]=93;t[65]=94;t[66]=95;t[67]=96;t[68]=97;t[69]=98;t[70]=99;t[71]=100;t[72]=101;t[73]=102;t[74]=103;t[75]=104;t[76]=105;t[77]=106;t[78]=107;t[79]=108;t[80]=109;t[81]=110;t[82]=111;t[83]=112;t[84]=113;t[85]=114;t[86]=115;t[87]=116;t[88]=117;t[89]=118;t[90]=119;t[91]=120;t[92]=121;t[93]=122;t[94]=123;t[95]=124;t[96]=125;t[97]=126;t[98]=196;t[99]=197;t[100]=199;t[101]=201;t[102]=209;t[103]=214;t[104]=220;t[105]=225;t[106]=224;t[107]=226;t[108]=228;t[109]=227;t[110]=229;t[111]=231;t[112]=233;t[113]=232;t[114]=234;t[115]=235;t[116]=237;t[117]=236;t[118]=238;t[119]=239;t[120]=241;t[121]=243;t[122]=242;t[123]=244;t[124]=246;t[125]=245;t[126]=250;t[127]=249;t[128]=251;t[129]=252;t[130]=8224;t[131]=176;t[132]=162;t[133]=163;t[134]=167;t[135]=8226;t[136]=182;t[137]=223;t[138]=174;t[139]=169;t[140]=8482;t[141]=180;t[142]=168;t[143]=8800;t[144]=198;t[145]=216;t[146]=8734;t[147]=177;t[148]=8804;t[149]=8805;t[150]=165;t[151]=181;t[152]=8706;t[153]=8721;t[154]=8719;t[156]=8747;t[157]=170;t[158]=186;t[159]=8486;t[160]=230;t[161]=248;t[162]=191;t[163]=161;t[164]=172;t[165]=8730;t[166]=402;t[167]=8776;t[168]=8710;t[169]=171;t[170]=187;t[171]=8230;t[179]=8220;t[180]=8221;t[181]=8216;t[182]=8217;t[200]=193;t[203]=205;t[207]=211;t[210]=218;t[223]=711;t[224]=321;t[225]=322;t[226]=352;t[227]=353;t[228]=381;t[229]=382;t[233]=221;t[234]=253;t[252]=263;t[253]=268;t[254]=269;t[258]=258;t[260]=260;t[261]=261;t[265]=280;t[266]=281;t[267]=282;t[268]=283;t[269]=313;t[275]=323;t[276]=324;t[278]=328;t[283]=344;t[284]=345;t[285]=346;t[286]=347;t[292]=367;t[295]=377;t[296]=378;t[298]=380;t[305]=963;t[306]=964;t[307]=966;t[308]=8215;t[309]=8252;t[310]=8319;t[311]=8359;t[312]=8592;t[313]=8593;t[337]=9552;t[493]=1039;t[494]=1040;t[672]=1488;t[673]=1489;t[674]=1490;t[675]=1491;t[676]=1492;t[677]=1493;t[678]=1494;t[679]=1495;t[680]=1496;t[681]=1497;t[682]=1498;t[683]=1499;t[684]=1500;t[685]=1501;t[686]=1502;t[687]=1503;t[688]=1504;t[689]=1505;t[690]=1506;t[691]=1507;t[692]=1508;t[693]=1509;t[694]=1510;t[695]=1511;t[696]=1512;t[697]=1513;t[698]=1514;t[705]=1524;t[706]=8362;t[710]=64288;t[711]=64298;t[759]=1617;t[761]=1776;t[763]=1778;t[775]=1652;t[777]=1764;t[778]=1780;t[779]=1781;t[780]=1782;t[782]=771;t[783]=64726;t[786]=8363;t[788]=8532;t[790]=768;t[791]=769;t[792]=768;t[795]=803;t[797]=64336;t[798]=64337;t[799]=64342;t[800]=64343;t[801]=64344;t[802]=64345;t[803]=64362;t[804]=64363;t[805]=64364;t[2424]=7821;t[2425]=7822;t[2426]=7823;t[2427]=7824;t[2428]=7825;t[2429]=7826;t[2430]=7827;t[2433]=7682;t[2678]=8045;t[2679]=8046;t[2830]=1552;t[2838]=686;t[2840]=751;t[2842]=753;t[2843]=754;t[2844]=755;t[2846]=757;t[2856]=767;t[2857]=848;t[2858]=849;t[2862]=853;t[2863]=854;t[2864]=855;t[2865]=861;t[2866]=862;t[2906]=7460;t[2908]=7462;t[2909]=7463;t[2910]=7464;t[2912]=7466;t[2913]=7467;t[2914]=7468;t[2916]=7470;t[2917]=7471;t[2918]=7472;t[2920]=7474;t[2921]=7475;t[2922]=7476;t[2924]=7478;t[2925]=7479;t[2926]=7480;t[2928]=7482;t[2929]=7483;t[2930]=7484;t[2932]=7486;t[2933]=7487;t[2934]=7488;t[2936]=7490;t[2937]=7491;t[2938]=7492;t[2940]=7494;t[2941]=7495;t[2942]=7496;t[2944]=7498;t[2946]=7500;t[2948]=7502;t[2950]=7504;t[2951]=7505;t[2952]=7506;t[2954]=7508;t[2955]=7509;t[2956]=7510;t[2958]=7512;t[2959]=7513;t[2960]=7514;t[2962]=7516;t[2963]=7517;t[2964]=7518;t[2966]=7520;t[2967]=7521;t[2968]=7522;t[2970]=7524;t[2971]=7525;t[2972]=7526;t[2974]=7528;t[2975]=7529;t[2976]=7530;t[2978]=1537;t[2979]=1538;t[2980]=1539;t[2982]=1549;t[2983]=1551;t[2984]=1552;t[2986]=1554;t[2987]=1555;t[2988]=1556;t[2990]=1623;t[2991]=1624;t[2995]=1775;t[2999]=1791;t[3002]=64290;t[3003]=64291;t[3004]=64292;t[3006]=64294;t[3007]=64295;t[3008]=64296;t[3011]=1900;t[3014]=8223;t[3015]=8244;t[3017]=7532;t[3018]=7533;t[3019]=7534;t[3075]=7590;t[3076]=7591;t[3079]=7594;t[3080]=7595;t[3083]=7598;t[3084]=7599;t[3087]=7602;t[3088]=7603;t[3091]=7606;t[3092]=7607;t[3095]=7610;t[3096]=7611;t[3099]=7614;t[3100]=7615;t[3103]=7618;t[3104]=7619;t[3107]=8337;t[3108]=8338;t[3116]=1884;t[3119]=1885;t[3120]=1885;t[3123]=1886;t[3124]=1886;t[3127]=1887;t[3128]=1887;t[3131]=1888;t[3132]=1888;t[3135]=1889;t[3136]=1889;t[3139]=1890;t[3140]=1890;t[3143]=1891;t[3144]=1891;t[3147]=1892;t[3148]=1892;t[3153]=580;t[3154]=581;t[3157]=584;t[3158]=585;t[3161]=588;t[3162]=589;t[3165]=891;t[3166]=892;t[3169]=1274;t[3170]=1275;t[3173]=1278;t[3174]=1279;t[3181]=7622;t[3182]=7623;t[3282]=11799;t[3316]=578;t[3379]=42785;t[3393]=1159;t[3416]=8377;});var getSupplementalGlyphMapForArialBlack=getLookupTableFactory(function(t){t[227]=322;t[264]=261;t[291]=346;});var getSupplementalGlyphMapForCalibri=getLookupTableFactory(function(t){t[1]=32;t[4]=65;t[5]=192;t[6]=193;t[9]=196;t[17]=66;t[18]=67;t[21]=268;t[24]=68;t[28]=69;t[29]=200;t[30]=201;t[32]=282;t[38]=70;t[39]=71;t[44]=72;t[47]=73;t[48]=204;t[49]=205;t[58]=74;t[60]=75;t[62]=76;t[68]=77;t[69]=78;t[75]=79;t[76]=210;t[80]=214;t[87]=80;t[89]=81;t[90]=82;t[92]=344;t[94]=83;t[97]=352;t[100]=84;t[104]=85;t[109]=220;t[115]=86;t[116]=87;t[121]=88;t[122]=89;t[124]=221;t[127]=90;t[129]=381;t[258]=97;t[259]=224;t[260]=225;t[263]=228;t[268]=261;t[271]=98;t[272]=99;t[273]=263;t[275]=269;t[282]=100;t[286]=101;t[287]=232;t[288]=233;t[290]=283;t[295]=281;t[296]=102;t[336]=103;t[346]=104;t[349]=105;t[350]=236;t[351]=237;t[361]=106;t[364]=107;t[367]=108;t[371]=322;t[373]=109;t[374]=110;t[381]=111;t[382]=242;t[383]=243;t[386]=246;t[393]=112;t[395]=113;t[396]=114;t[398]=345;t[400]=115;t[401]=347;t[403]=353;t[410]=116;t[437]=117;t[442]=252;t[448]=118;t[449]=119;t[454]=120;t[455]=121;t[457]=253;t[460]=122;t[462]=382;t[463]=380;t[853]=44;t[855]=58;t[856]=46;t[876]=47;t[878]=45;t[882]=45;t[894]=40;t[895]=41;t[896]=91;t[897]=93;t[923]=64;t[1004]=48;t[1005]=49;t[1006]=50;t[1007]=51;t[1008]=52;t[1009]=53;t[1010]=54;t[1011]=55;t[1012]=56;t[1013]=57;t[1081]=37;t[1085]=43;t[1086]=45;});function getStandardFontName(name){var fontName=normalizeFontName(name);var stdFontMap=getStdFontMap();return stdFontMap[fontName];}function isKnownFontName(name){var fontName=normalizeFontName(name);return!!(getStdFontMap()[fontName]||getNonStdFontMap()[fontName]||getSerifFonts()[fontName]||getSymbolsFonts()[fontName]);}
;// CONCATENATED MODULE: ./src/core/to_unicode_map.js
function to_unicode_map_typeof(o){"@babel/helpers - typeof";return to_unicode_map_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},to_unicode_map_typeof(o);}function to_unicode_map_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function to_unicode_map_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,to_unicode_map_toPropertyKey(descriptor.key),descriptor);}}function to_unicode_map_createClass(Constructor,protoProps,staticProps){if(protoProps)to_unicode_map_defineProperties(Constructor.prototype,protoProps);if(staticProps)to_unicode_map_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function to_unicode_map_toPropertyKey(arg){var key=to_unicode_map_toPrimitive(arg,"string");return to_unicode_map_typeof(key)==="symbol"?key:String(key);}function to_unicode_map_toPrimitive(input,hint){if(to_unicode_map_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(to_unicode_map_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var ToUnicodeMap=/*#__PURE__*/function(){function ToUnicodeMap(){var cmap=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];to_unicode_map_classCallCheck(this,ToUnicodeMap);this._map=cmap;}to_unicode_map_createClass(ToUnicodeMap,[{key:"length",get:function get(){return this._map.length;}},{key:"forEach",value:function forEach(callback){for(var charCode in this._map){callback(charCode,this._map[charCode].charCodeAt(0));}}},{key:"has",value:function has(i){return this._map[i]!==undefined;}},{key:"get",value:function get(i){return this._map[i];}},{key:"charCodeOf",value:function charCodeOf(value){var map=this._map;if(map.length<=0x10000){return map.indexOf(value);}for(var charCode in map){if(map[charCode]===value){return charCode|0;}}return-1;}},{key:"amend",value:function amend(map){for(var charCode in map){this._map[charCode]=map[charCode];}}}]);return ToUnicodeMap;}();var IdentityToUnicodeMap=/*#__PURE__*/function(){function IdentityToUnicodeMap(firstChar,lastChar){to_unicode_map_classCallCheck(this,IdentityToUnicodeMap);this.firstChar=firstChar;this.lastChar=lastChar;}to_unicode_map_createClass(IdentityToUnicodeMap,[{key:"length",get:function get(){return this.lastChar+1-this.firstChar;}},{key:"forEach",value:function forEach(callback){for(var i=this.firstChar,ii=this.lastChar;i<=ii;i++){callback(i,i);}}},{key:"has",value:function has(i){return this.firstChar<=i&&i<=this.lastChar;}},{key:"get",value:function get(i){if(this.firstChar<=i&&i<=this.lastChar){return String.fromCharCode(i);}return undefined;}},{key:"charCodeOf",value:function charCodeOf(v){return Number.isInteger(v)&&v>=this.firstChar&&v<=this.lastChar?v:-1;}},{key:"amend",value:function amend(map){unreachable("Should not call amend()");}}]);return IdentityToUnicodeMap;}();
;// CONCATENATED MODULE: ./src/core/cff_font.js
function cff_font_typeof(o){"@babel/helpers - typeof";return cff_font_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},cff_font_typeof(o);}function cff_font_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function cff_font_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,cff_font_toPropertyKey(descriptor.key),descriptor);}}function cff_font_createClass(Constructor,protoProps,staticProps){if(protoProps)cff_font_defineProperties(Constructor.prototype,protoProps);if(staticProps)cff_font_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function cff_font_toPropertyKey(arg){var key=cff_font_toPrimitive(arg,"string");return cff_font_typeof(key)==="symbol"?key:String(key);}function cff_font_toPrimitive(input,hint){if(cff_font_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(cff_font_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var CFFFont=/*#__PURE__*/function(){function CFFFont(file,properties){cff_font_classCallCheck(this,CFFFont);this.properties=properties;var parser=new CFFParser(file,properties,SEAC_ANALYSIS_ENABLED);this.cff=parser.parse();this.cff.duplicateFirstGlyph();var compiler=new CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=compiler.compile();}catch(_unused){warn("Failed to compile font "+properties.loadedName);this.data=file;}this._createBuiltInEncoding();}cff_font_createClass(CFFFont,[{key:"numGlyphs",get:function get(){return this.cff.charStrings.count;}},{key:"getCharset",value:function getCharset(){return this.cff.charset.charset;}},{key:"getGlyphMapping",value:function getGlyphMapping(){var cff=this.cff;var properties=this.properties;var cidToGidMap=properties.cidToGidMap,cMap=properties.cMap;var charsets=cff.charset.charset;var charCodeToGlyphId;var glyphId;if(properties.composite){var invCidToGidMap;if((cidToGidMap===null||cidToGidMap===void 0?void 0:cidToGidMap.length)>0){invCidToGidMap=Object.create(null);for(var i=0,ii=cidToGidMap.length;i<ii;i++){var gid=cidToGidMap[i];if(gid!==undefined){invCidToGidMap[gid]=i;}}}charCodeToGlyphId=Object.create(null);var charCode;if(cff.isCIDFont){for(glyphId=0;glyphId<charsets.length;glyphId++){var _invCidToGidMap;var cid=charsets[glyphId];charCode=cMap.charCodeOf(cid);if(((_invCidToGidMap=invCidToGidMap)===null||_invCidToGidMap===void 0?void 0:_invCidToGidMap[charCode])!==undefined){charCode=invCidToGidMap[charCode];}charCodeToGlyphId[charCode]=glyphId;}}else{for(glyphId=0;glyphId<cff.charStrings.count;glyphId++){charCode=cMap.charCodeOf(glyphId);charCodeToGlyphId[charCode]=glyphId;}}return charCodeToGlyphId;}var encoding=cff.encoding?cff.encoding.encoding:null;if(properties.isInternalFont){encoding=properties.defaultEncoding;}charCodeToGlyphId=type1FontGlyphMapping(properties,encoding,charsets);return charCodeToGlyphId;}},{key:"hasGlyphId",value:function hasGlyphId(id){return this.cff.hasGlyphId(id);}},{key:"_createBuiltInEncoding",value:function _createBuiltInEncoding(){var _this$cff=this.cff,charset=_this$cff.charset,encoding=_this$cff.encoding;if(!charset||!encoding){return;}var charsets=charset.charset,encodings=encoding.encoding;var map=[];for(var charCode in encodings){var glyphId=encodings[charCode];if(glyphId>=0){var glyphName=charsets[glyphId];if(glyphName){map[charCode]=glyphName;}}}if(map.length>0){this.properties.builtInEncoding=map;}}}]);return CFFFont;}();
;// CONCATENATED MODULE: ./src/core/font_renderer.js
function font_renderer_typeof(o){"@babel/helpers - typeof";return font_renderer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},font_renderer_typeof(o);}function font_renderer_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)font_renderer_setPrototypeOf(subClass,superClass);}function font_renderer_setPrototypeOf(o,p){font_renderer_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return font_renderer_setPrototypeOf(o,p);}function font_renderer_createSuper(Derived){var hasNativeReflectConstruct=font_renderer_isNativeReflectConstruct();return function _createSuperInternal(){var Super=font_renderer_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=font_renderer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return font_renderer_possibleConstructorReturn(this,result);};}function font_renderer_possibleConstructorReturn(self,call){if(call&&(font_renderer_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return font_renderer_assertThisInitialized(self);}function font_renderer_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function font_renderer_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function font_renderer_getPrototypeOf(o){font_renderer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return font_renderer_getPrototypeOf(o);}function font_renderer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function font_renderer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,font_renderer_toPropertyKey(descriptor.key),descriptor);}}function font_renderer_createClass(Constructor,protoProps,staticProps){if(protoProps)font_renderer_defineProperties(Constructor.prototype,protoProps);if(staticProps)font_renderer_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function font_renderer_toPropertyKey(arg){var key=font_renderer_toPrimitive(arg,"string");return font_renderer_typeof(key)==="symbol"?key:String(key);}function font_renderer_toPrimitive(input,hint){if(font_renderer_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(font_renderer_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function getUint32(data,offset){return(data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3])>>>0;}function getUint16(data,offset){return data[offset]<<8|data[offset+1];}function getInt16(data,offset){return(data[offset]<<24|data[offset+1]<<16)>>16;}function getInt8(data,offset){return data[offset]<<24>>24;}function getFloat214(data,offset){return getInt16(data,offset)/16384;}function getSubroutineBias(subrs){var numSubrs=subrs.length;var bias=32768;if(numSubrs<1240){bias=107;}else if(numSubrs<33900){bias=1131;}return bias;}function parseCmap(data,start,end){var offset=getUint16(data,start+2)===1?getUint32(data,start+8):getUint32(data,start+16);var format=getUint16(data,start+offset);var ranges,p,i;if(format===4){getUint16(data,start+offset+2);var segCount=getUint16(data,start+offset+6)>>1;p=start+offset+14;ranges=[];for(i=0;i<segCount;i++,p+=2){ranges[i]={end:getUint16(data,p)};}p+=2;for(i=0;i<segCount;i++,p+=2){ranges[i].start=getUint16(data,p);}for(i=0;i<segCount;i++,p+=2){ranges[i].idDelta=getUint16(data,p);}for(i=0;i<segCount;i++,p+=2){var idOffset=getUint16(data,p);if(idOffset===0){continue;}ranges[i].ids=[];for(var j=0,jj=ranges[i].end-ranges[i].start+1;j<jj;j++){ranges[i].ids[j]=getUint16(data,p+idOffset);idOffset+=2;}}return ranges;}else if(format===12){var groups=getUint32(data,start+offset+12);p=start+offset+16;ranges=[];for(i=0;i<groups;i++){start=getUint32(data,p);ranges.push({start:start,end:getUint32(data,p+4),idDelta:getUint32(data,p+8)-start});p+=12;}return ranges;}throw new FormatError("unsupported cmap: ".concat(format));}function parseCff(data,start,end,seacAnalysisEnabled){var _cff$topDict$privateD,_cff$globalSubrIndex;var properties={};var parser=new CFFParser(new Stream(data,start,end-start),properties,seacAnalysisEnabled);var cff=parser.parse();return{glyphs:cff.charStrings.objects,subrs:(_cff$topDict$privateD=cff.topDict.privateDict)===null||_cff$topDict$privateD===void 0||(_cff$topDict$privateD=_cff$topDict$privateD.subrsIndex)===null||_cff$topDict$privateD===void 0?void 0:_cff$topDict$privateD.objects,gsubrs:(_cff$globalSubrIndex=cff.globalSubrIndex)===null||_cff$globalSubrIndex===void 0?void 0:_cff$globalSubrIndex.objects,isCFFCIDFont:cff.isCIDFont,fdSelect:cff.fdSelect,fdArray:cff.fdArray};}function parseGlyfTable(glyf,loca,isGlyphLocationsLong){var itemSize,itemDecode;if(isGlyphLocationsLong){itemSize=4;itemDecode=getUint32;}else{itemSize=2;itemDecode=function itemDecode(data,offset){return 2*getUint16(data,offset);};}var glyphs=[];var startOffset=itemDecode(loca,0);for(var j=itemSize;j<loca.length;j+=itemSize){var endOffset=itemDecode(loca,j);glyphs.push(glyf.subarray(startOffset,endOffset));startOffset=endOffset;}return glyphs;}function lookupCmap(ranges,unicode){var code=unicode.codePointAt(0);var gid=0,l=0,r=ranges.length-1;while(l<r){var c=l+r+1>>1;if(code<ranges[c].start){r=c-1;}else{l=c;}}if(ranges[l].start<=code&&code<=ranges[l].end){gid=ranges[l].idDelta+(ranges[l].ids?ranges[l].ids[code-ranges[l].start]:code)&0xffff;}return{charCode:code,glyphId:gid};}function compileGlyf(code,cmds,font){function moveTo(x,y){cmds.push({cmd:"moveTo",args:[x,y]});}function lineTo(x,y){cmds.push({cmd:"lineTo",args:[x,y]});}function quadraticCurveTo(xa,ya,x,y){cmds.push({cmd:"quadraticCurveTo",args:[xa,ya,x,y]});}var i=0;var numberOfContours=getInt16(code,i);var flags;var x=0,y=0;i+=10;if(numberOfContours<0){do{flags=getUint16(code,i);var glyphIndex=getUint16(code,i+2);i+=4;var arg1=void 0,arg2=void 0;if(flags&0x01){if(flags&0x02){arg1=getInt16(code,i);arg2=getInt16(code,i+2);}else{arg1=getUint16(code,i);arg2=getUint16(code,i+2);}i+=4;}else if(flags&0x02){arg1=getInt8(code,i++);arg2=getInt8(code,i++);}else{arg1=code[i++];arg2=code[i++];}if(flags&0x02){x=arg1;y=arg2;}else{x=0;y=0;}var scaleX=1,scaleY=1,scale01=0,scale10=0;if(flags&0x08){scaleX=scaleY=getFloat214(code,i);i+=2;}else if(flags&0x40){scaleX=getFloat214(code,i);scaleY=getFloat214(code,i+2);i+=4;}else if(flags&0x80){scaleX=getFloat214(code,i);scale01=getFloat214(code,i+2);scale10=getFloat214(code,i+4);scaleY=getFloat214(code,i+6);i+=8;}var subglyph=font.glyphs[glyphIndex];if(subglyph){cmds.push({cmd:"save"},{cmd:"transform",args:[scaleX,scale01,scale10,scaleY,x,y]});if(!(flags&0x02)){}compileGlyf(subglyph,cmds,font);cmds.push({cmd:"restore"});}}while(flags&0x20);}else{var endPtsOfContours=[];var j,jj;for(j=0;j<numberOfContours;j++){endPtsOfContours.push(getUint16(code,i));i+=2;}var instructionLength=getUint16(code,i);i+=2+instructionLength;var numberOfPoints=endPtsOfContours.at(-1)+1;var points=[];while(points.length<numberOfPoints){flags=code[i++];var repeat=1;if(flags&0x08){repeat+=code[i++];}while(repeat-->0){points.push({flags:flags});}}for(j=0;j<numberOfPoints;j++){switch(points[j].flags&0x12){case 0x00:x+=getInt16(code,i);i+=2;break;case 0x02:x-=code[i++];break;case 0x12:x+=code[i++];break;}points[j].x=x;}for(j=0;j<numberOfPoints;j++){switch(points[j].flags&0x24){case 0x00:y+=getInt16(code,i);i+=2;break;case 0x04:y-=code[i++];break;case 0x24:y+=code[i++];break;}points[j].y=y;}var startPoint=0;for(i=0;i<numberOfContours;i++){var endPoint=endPtsOfContours[i];var contour=points.slice(startPoint,endPoint+1);if(contour[0].flags&1){contour.push(contour[0]);}else if(contour.at(-1).flags&1){contour.unshift(contour.at(-1));}else{var p={flags:1,x:(contour[0].x+contour.at(-1).x)/2,y:(contour[0].y+contour.at(-1).y)/2};contour.unshift(p);contour.push(p);}moveTo(contour[0].x,contour[0].y);for(j=1,jj=contour.length;j<jj;j++){if(contour[j].flags&1){lineTo(contour[j].x,contour[j].y);}else if(contour[j+1].flags&1){quadraticCurveTo(contour[j].x,contour[j].y,contour[j+1].x,contour[j+1].y);j++;}else{quadraticCurveTo(contour[j].x,contour[j].y,(contour[j].x+contour[j+1].x)/2,(contour[j].y+contour[j+1].y)/2);}}startPoint=endPoint+1;}}}function compileCharString(charStringCode,cmds,font,glyphId){function moveTo(x,y){cmds.push({cmd:"moveTo",args:[x,y]});}function lineTo(x,y){cmds.push({cmd:"lineTo",args:[x,y]});}function bezierCurveTo(x1,y1,x2,y2,x,y){cmds.push({cmd:"bezierCurveTo",args:[x1,y1,x2,y2,x,y]});}var stack=[];var x=0,y=0;var stems=0;function parse(code){var i=0;while(i<code.length){var stackClean=false;var v=code[i++];var xa=void 0,xb=void 0,ya=void 0,yb=void 0,y1=void 0,y2=void 0,y3=void 0,n=void 0,subrCode=void 0;switch(v){case 1:stems+=stack.length>>1;stackClean=true;break;case 3:stems+=stack.length>>1;stackClean=true;break;case 4:y+=stack.pop();moveTo(x,y);stackClean=true;break;case 5:while(stack.length>0){x+=stack.shift();y+=stack.shift();lineTo(x,y);}break;case 6:while(stack.length>0){x+=stack.shift();lineTo(x,y);if(stack.length===0){break;}y+=stack.shift();lineTo(x,y);}break;case 7:while(stack.length>0){y+=stack.shift();lineTo(x,y);if(stack.length===0){break;}x+=stack.shift();lineTo(x,y);}break;case 8:while(stack.length>0){xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);}break;case 10:n=stack.pop();subrCode=null;if(font.isCFFCIDFont){var fdIndex=font.fdSelect.getFDIndex(glyphId);if(fdIndex>=0&&fdIndex<font.fdArray.length){var _fontDict$privateDict;var fontDict=font.fdArray[fdIndex];var subrs=void 0;if((_fontDict$privateDict=fontDict.privateDict)!==null&&_fontDict$privateDict!==void 0&&_fontDict$privateDict.subrsIndex){subrs=fontDict.privateDict.subrsIndex.objects;}if(subrs){n+=getSubroutineBias(subrs);subrCode=subrs[n];}}else{warn("Invalid fd index for glyph index.");}}else{subrCode=font.subrs[n+font.subrsBias];}if(subrCode){parse(subrCode);}break;case 11:return;case 12:v=code[i++];switch(v){case 34:xa=x+stack.shift();xb=xa+stack.shift();y1=y+stack.shift();x=xb+stack.shift();bezierCurveTo(xa,y,xb,y1,x,y1);xa=x+stack.shift();xb=xa+stack.shift();x=xb+stack.shift();bezierCurveTo(xa,y1,xb,y,x,y);break;case 35:xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);stack.pop();break;case 36:xa=x+stack.shift();y1=y+stack.shift();xb=xa+stack.shift();y2=y1+stack.shift();x=xb+stack.shift();bezierCurveTo(xa,y1,xb,y2,x,y2);xa=x+stack.shift();xb=xa+stack.shift();y3=y2+stack.shift();x=xb+stack.shift();bezierCurveTo(xa,y2,xb,y3,x,y);break;case 37:var x0=x,y0=y;xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb;y=yb;if(Math.abs(x-x0)>Math.abs(y-y0)){x+=stack.shift();}else{y+=stack.shift();}bezierCurveTo(xa,ya,xb,yb,x,y);break;default:throw new FormatError("unknown operator: 12 ".concat(v));}break;case 14:if(stack.length>=4){var achar=stack.pop();var bchar=stack.pop();y=stack.pop();x=stack.pop();cmds.push({cmd:"save"},{cmd:"translate",args:[x,y]});var cmap=lookupCmap(font.cmap,String.fromCharCode(font.glyphNameMap[StandardEncoding[achar]]));compileCharString(font.glyphs[cmap.glyphId],cmds,font,cmap.glyphId);cmds.push({cmd:"restore"});cmap=lookupCmap(font.cmap,String.fromCharCode(font.glyphNameMap[StandardEncoding[bchar]]));compileCharString(font.glyphs[cmap.glyphId],cmds,font,cmap.glyphId);}return;case 18:stems+=stack.length>>1;stackClean=true;break;case 19:stems+=stack.length>>1;i+=stems+7>>3;stackClean=true;break;case 20:stems+=stack.length>>1;i+=stems+7>>3;stackClean=true;break;case 21:y+=stack.pop();x+=stack.pop();moveTo(x,y);stackClean=true;break;case 22:x+=stack.pop();moveTo(x,y);stackClean=true;break;case 23:stems+=stack.length>>1;stackClean=true;break;case 24:while(stack.length>2){xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);}x+=stack.shift();y+=stack.shift();lineTo(x,y);break;case 25:while(stack.length>6){x+=stack.shift();y+=stack.shift();lineTo(x,y);}xa=x+stack.shift();ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);break;case 26:if(stack.length%2){x+=stack.shift();}while(stack.length>0){xa=x;ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb;y=yb+stack.shift();bezierCurveTo(xa,ya,xb,yb,x,y);}break;case 27:if(stack.length%2){y+=stack.shift();}while(stack.length>0){xa=x+stack.shift();ya=y;xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb;bezierCurveTo(xa,ya,xb,yb,x,y);}break;case 28:stack.push((code[i]<<24|code[i+1]<<16)>>16);i+=2;break;case 29:n=stack.pop()+font.gsubrsBias;subrCode=font.gsubrs[n];if(subrCode){parse(subrCode);}break;case 30:while(stack.length>0){xa=x;ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+(stack.length===1?stack.shift():0);bezierCurveTo(xa,ya,xb,yb,x,y);if(stack.length===0){break;}xa=x+stack.shift();ya=y;xb=xa+stack.shift();yb=ya+stack.shift();y=yb+stack.shift();x=xb+(stack.length===1?stack.shift():0);bezierCurveTo(xa,ya,xb,yb,x,y);}break;case 31:while(stack.length>0){xa=x+stack.shift();ya=y;xb=xa+stack.shift();yb=ya+stack.shift();y=yb+stack.shift();x=xb+(stack.length===1?stack.shift():0);bezierCurveTo(xa,ya,xb,yb,x,y);if(stack.length===0){break;}xa=x;ya=y+stack.shift();xb=xa+stack.shift();yb=ya+stack.shift();x=xb+stack.shift();y=yb+(stack.length===1?stack.shift():0);bezierCurveTo(xa,ya,xb,yb,x,y);}break;default:if(v<32){throw new FormatError("unknown operator: ".concat(v));}if(v<247){stack.push(v-139);}else if(v<251){stack.push((v-247)*256+code[i++]+108);}else if(v<255){stack.push(-(v-251)*256-code[i++]-108);}else{stack.push((code[i]<<24|code[i+1]<<16|code[i+2]<<8|code[i+3])/65536);i+=4;}break;}if(stackClean){stack.length=0;}}}parse(charStringCode);}var NOOP=[];var CompiledFont=/*#__PURE__*/function(){function CompiledFont(fontMatrix){font_renderer_classCallCheck(this,CompiledFont);if(this.constructor===CompiledFont){unreachable("Cannot initialize CompiledFont.");}this.fontMatrix=fontMatrix;this.compiledGlyphs=Object.create(null);this.compiledCharCodeToGlyphId=Object.create(null);}font_renderer_createClass(CompiledFont,[{key:"getPathJs",value:function getPathJs(unicode){var _lookupCmap=lookupCmap(this.cmap,unicode),charCode=_lookupCmap.charCode,glyphId=_lookupCmap.glyphId;var fn=this.compiledGlyphs[glyphId];if(!fn){try{fn=this.compileGlyph(this.glyphs[glyphId],glyphId);this.compiledGlyphs[glyphId]=fn;}catch(ex){this.compiledGlyphs[glyphId]=NOOP;if(this.compiledCharCodeToGlyphId[charCode]===undefined){this.compiledCharCodeToGlyphId[charCode]=glyphId;}throw ex;}}if(this.compiledCharCodeToGlyphId[charCode]===undefined){this.compiledCharCodeToGlyphId[charCode]=glyphId;}return fn;}},{key:"compileGlyph",value:function compileGlyph(code,glyphId){if(!code||code.length===0||code[0]===14){return NOOP;}var fontMatrix=this.fontMatrix;if(this.isCFFCIDFont){var fdIndex=this.fdSelect.getFDIndex(glyphId);if(fdIndex>=0&&fdIndex<this.fdArray.length){var fontDict=this.fdArray[fdIndex];fontMatrix=fontDict.getByName("FontMatrix")||FONT_IDENTITY_MATRIX;}else{warn("Invalid fd index for glyph index.");}}var cmds=[{cmd:"save"},{cmd:"transform",args:fontMatrix.slice()},{cmd:"scale",args:["size","-size"]}];this.compileGlyphImpl(code,cmds,glyphId);cmds.push({cmd:"restore"});return cmds;}},{key:"compileGlyphImpl",value:function compileGlyphImpl(){unreachable("Children classes should implement this.");}},{key:"hasBuiltPath",value:function hasBuiltPath(unicode){var _lookupCmap2=lookupCmap(this.cmap,unicode),charCode=_lookupCmap2.charCode,glyphId=_lookupCmap2.glyphId;return this.compiledGlyphs[glyphId]!==undefined&&this.compiledCharCodeToGlyphId[charCode]!==undefined;}}]);return CompiledFont;}();var TrueTypeCompiled=/*#__PURE__*/function(_CompiledFont){font_renderer_inherits(TrueTypeCompiled,_CompiledFont);var _super=font_renderer_createSuper(TrueTypeCompiled);function TrueTypeCompiled(glyphs,cmap,fontMatrix){var _this;font_renderer_classCallCheck(this,TrueTypeCompiled);_this=_super.call(this,fontMatrix||[0.000488,0,0,0.000488,0,0]);_this.glyphs=glyphs;_this.cmap=cmap;return _this;}font_renderer_createClass(TrueTypeCompiled,[{key:"compileGlyphImpl",value:function compileGlyphImpl(code,cmds){compileGlyf(code,cmds,this);}}]);return TrueTypeCompiled;}(CompiledFont);var Type2Compiled=/*#__PURE__*/function(_CompiledFont2){font_renderer_inherits(Type2Compiled,_CompiledFont2);var _super2=font_renderer_createSuper(Type2Compiled);function Type2Compiled(cffInfo,cmap,fontMatrix,glyphNameMap){var _this2;font_renderer_classCallCheck(this,Type2Compiled);_this2=_super2.call(this,fontMatrix||[0.001,0,0,0.001,0,0]);_this2.glyphs=cffInfo.glyphs;_this2.gsubrs=cffInfo.gsubrs||[];_this2.subrs=cffInfo.subrs||[];_this2.cmap=cmap;_this2.glyphNameMap=glyphNameMap||getGlyphsUnicode();_this2.gsubrsBias=getSubroutineBias(_this2.gsubrs);_this2.subrsBias=getSubroutineBias(_this2.subrs);_this2.isCFFCIDFont=cffInfo.isCFFCIDFont;_this2.fdSelect=cffInfo.fdSelect;_this2.fdArray=cffInfo.fdArray;return _this2;}font_renderer_createClass(Type2Compiled,[{key:"compileGlyphImpl",value:function compileGlyphImpl(code,cmds,glyphId){compileCharString(code,cmds,this,glyphId);}}]);return Type2Compiled;}(CompiledFont);var FontRendererFactory=/*#__PURE__*/function(){function FontRendererFactory(){font_renderer_classCallCheck(this,FontRendererFactory);}font_renderer_createClass(FontRendererFactory,null,[{key:"create",value:function create(font,seacAnalysisEnabled){var data=new Uint8Array(font.data);var cmap,glyf,loca,cff,indexToLocFormat,unitsPerEm;var numTables=getUint16(data,4);for(var i=0,p=12;i<numTables;i++,p+=16){var tag=bytesToString(data.subarray(p,p+4));var offset=getUint32(data,p+8);var length=getUint32(data,p+12);switch(tag){case"cmap":cmap=parseCmap(data,offset,offset+length);break;case"glyf":glyf=data.subarray(offset,offset+length);break;case"loca":loca=data.subarray(offset,offset+length);break;case"head":unitsPerEm=getUint16(data,offset+18);indexToLocFormat=getUint16(data,offset+50);break;case"CFF ":cff=parseCff(data,offset,offset+length,seacAnalysisEnabled);break;}}if(glyf){var fontMatrix=!unitsPerEm?font.fontMatrix:[1/unitsPerEm,0,0,1/unitsPerEm,0,0];return new TrueTypeCompiled(parseGlyfTable(glyf,loca,indexToLocFormat),cmap,fontMatrix);}return new Type2Compiled(cff,cmap,font.fontMatrix,font.glyphNameMap);}}]);return FontRendererFactory;}();
;// CONCATENATED MODULE: ./src/core/metrics.js
var getMetrics=getLookupTableFactory(function(t){t.Courier=600;t["Courier-Bold"]=600;t["Courier-BoldOblique"]=600;t["Courier-Oblique"]=600;t.Helvetica=getLookupTableFactory(function(t){t.space=278;t.exclam=278;t.quotedbl=355;t.numbersign=556;t.dollar=556;t.percent=889;t.ampersand=667;t.quoteright=222;t.parenleft=333;t.parenright=333;t.asterisk=389;t.plus=584;t.comma=278;t.hyphen=333;t.period=278;t.slash=278;t.zero=556;t.one=556;t.two=556;t.three=556;t.four=556;t.five=556;t.six=556;t.seven=556;t.eight=556;t.nine=556;t.colon=278;t.semicolon=278;t.less=584;t.equal=584;t.greater=584;t.question=556;t.at=1015;t.A=667;t.B=667;t.C=722;t.D=722;t.E=667;t.F=611;t.G=778;t.H=722;t.I=278;t.J=500;t.K=667;t.L=556;t.M=833;t.N=722;t.O=778;t.P=667;t.Q=778;t.R=722;t.S=667;t.T=611;t.U=722;t.V=667;t.W=944;t.X=667;t.Y=667;t.Z=611;t.bracketleft=278;t.backslash=278;t.bracketright=278;t.asciicircum=469;t.underscore=556;t.quoteleft=222;t.a=556;t.b=556;t.c=500;t.d=556;t.e=556;t.f=278;t.g=556;t.h=556;t.i=222;t.j=222;t.k=500;t.l=222;t.m=833;t.n=556;t.o=556;t.p=556;t.q=556;t.r=333;t.s=500;t.t=278;t.u=556;t.v=500;t.w=722;t.x=500;t.y=500;t.z=500;t.braceleft=334;t.bar=260;t.braceright=334;t.asciitilde=584;t.exclamdown=333;t.cent=556;t.sterling=556;t.fraction=167;t.yen=556;t.florin=556;t.section=556;t.currency=556;t.quotesingle=191;t.quotedblleft=333;t.guillemotleft=556;t.guilsinglleft=333;t.guilsinglright=333;t.fi=500;t.fl=500;t.endash=556;t.dagger=556;t.daggerdbl=556;t.periodcentered=278;t.paragraph=537;t.bullet=350;t.quotesinglbase=222;t.quotedblbase=333;t.quotedblright=333;t.guillemotright=556;t.ellipsis=1000;t.perthousand=1000;t.questiondown=611;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=1000;t.ordfeminine=370;t.Lslash=556;t.Oslash=778;t.OE=1000;t.ordmasculine=365;t.ae=889;t.dotlessi=278;t.lslash=222;t.oslash=611;t.oe=944;t.germandbls=611;t.Idieresis=278;t.eacute=556;t.abreve=556;t.uhungarumlaut=556;t.ecaron=556;t.Ydieresis=667;t.divide=584;t.Yacute=667;t.Acircumflex=667;t.aacute=556;t.Ucircumflex=722;t.yacute=500;t.scommaaccent=500;t.ecircumflex=556;t.Uring=722;t.Udieresis=722;t.aogonek=556;t.Uacute=722;t.uogonek=556;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=737;t.Emacron=667;t.ccaron=500;t.aring=556;t.Ncommaaccent=722;t.lacute=222;t.agrave=556;t.Tcommaaccent=611;t.Cacute=722;t.atilde=556;t.Edotaccent=667;t.scaron=500;t.scedilla=500;t.iacute=278;t.lozenge=471;t.Rcaron=722;t.Gcommaaccent=778;t.ucircumflex=556;t.acircumflex=556;t.Amacron=667;t.rcaron=333;t.ccedilla=500;t.Zdotaccent=611;t.Thorn=667;t.Omacron=778;t.Racute=722;t.Sacute=667;t.dcaron=643;t.Umacron=722;t.uring=556;t.threesuperior=333;t.Ograve=778;t.Agrave=667;t.Abreve=667;t.multiply=584;t.uacute=556;t.Tcaron=611;t.partialdiff=476;t.ydieresis=500;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=556;t.edieresis=556;t.cacute=500;t.nacute=556;t.umacron=556;t.Ncaron=722;t.Iacute=278;t.plusminus=584;t.brokenbar=260;t.registered=737;t.Gbreve=778;t.Idotaccent=278;t.summation=600;t.Egrave=667;t.racute=333;t.omacron=556;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=722;t.lcommaaccent=222;t.tcaron=317;t.eogonek=556;t.Uogonek=722;t.Aacute=667;t.Adieresis=667;t.egrave=556;t.zacute=500;t.iogonek=222;t.Oacute=778;t.oacute=556;t.amacron=556;t.sacute=500;t.idieresis=278;t.Ocircumflex=778;t.Ugrave=722;t.Delta=612;t.thorn=556;t.twosuperior=333;t.Odieresis=778;t.mu=556;t.igrave=278;t.ohungarumlaut=556;t.Eogonek=667;t.dcroat=556;t.threequarters=834;t.Scedilla=667;t.lcaron=299;t.Kcommaaccent=667;t.Lacute=556;t.trademark=1000;t.edotaccent=556;t.Igrave=278;t.Imacron=278;t.Lcaron=556;t.onehalf=834;t.lessequal=549;t.ocircumflex=556;t.ntilde=556;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=556;t.gbreve=556;t.onequarter=834;t.Scaron=667;t.Scommaaccent=667;t.Ohungarumlaut=778;t.degree=400;t.ograve=556;t.Ccaron=722;t.ugrave=556;t.radical=453;t.Dcaron=722;t.rcommaaccent=333;t.Ntilde=722;t.otilde=556;t.Rcommaaccent=722;t.Lcommaaccent=556;t.Atilde=667;t.Aogonek=667;t.Aring=667;t.Otilde=778;t.zdotaccent=500;t.Ecaron=667;t.Iogonek=278;t.kcommaaccent=500;t.minus=584;t.Icircumflex=278;t.ncaron=556;t.tcommaaccent=278;t.logicalnot=584;t.odieresis=556;t.udieresis=556;t.notequal=549;t.gcommaaccent=556;t.eth=556;t.zcaron=500;t.ncommaaccent=556;t.onesuperior=333;t.imacron=278;t.Euro=556;});t["Helvetica-Bold"]=getLookupTableFactory(function(t){t.space=278;t.exclam=333;t.quotedbl=474;t.numbersign=556;t.dollar=556;t.percent=889;t.ampersand=722;t.quoteright=278;t.parenleft=333;t.parenright=333;t.asterisk=389;t.plus=584;t.comma=278;t.hyphen=333;t.period=278;t.slash=278;t.zero=556;t.one=556;t.two=556;t.three=556;t.four=556;t.five=556;t.six=556;t.seven=556;t.eight=556;t.nine=556;t.colon=333;t.semicolon=333;t.less=584;t.equal=584;t.greater=584;t.question=611;t.at=975;t.A=722;t.B=722;t.C=722;t.D=722;t.E=667;t.F=611;t.G=778;t.H=722;t.I=278;t.J=556;t.K=722;t.L=611;t.M=833;t.N=722;t.O=778;t.P=667;t.Q=778;t.R=722;t.S=667;t.T=611;t.U=722;t.V=667;t.W=944;t.X=667;t.Y=667;t.Z=611;t.bracketleft=333;t.backslash=278;t.bracketright=333;t.asciicircum=584;t.underscore=556;t.quoteleft=278;t.a=556;t.b=611;t.c=556;t.d=611;t.e=556;t.f=333;t.g=611;t.h=611;t.i=278;t.j=278;t.k=556;t.l=278;t.m=889;t.n=611;t.o=611;t.p=611;t.q=611;t.r=389;t.s=556;t.t=333;t.u=611;t.v=556;t.w=778;t.x=556;t.y=556;t.z=500;t.braceleft=389;t.bar=280;t.braceright=389;t.asciitilde=584;t.exclamdown=333;t.cent=556;t.sterling=556;t.fraction=167;t.yen=556;t.florin=556;t.section=556;t.currency=556;t.quotesingle=238;t.quotedblleft=500;t.guillemotleft=556;t.guilsinglleft=333;t.guilsinglright=333;t.fi=611;t.fl=611;t.endash=556;t.dagger=556;t.daggerdbl=556;t.periodcentered=278;t.paragraph=556;t.bullet=350;t.quotesinglbase=278;t.quotedblbase=500;t.quotedblright=500;t.guillemotright=556;t.ellipsis=1000;t.perthousand=1000;t.questiondown=611;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=1000;t.ordfeminine=370;t.Lslash=611;t.Oslash=778;t.OE=1000;t.ordmasculine=365;t.ae=889;t.dotlessi=278;t.lslash=278;t.oslash=611;t.oe=944;t.germandbls=611;t.Idieresis=278;t.eacute=556;t.abreve=556;t.uhungarumlaut=611;t.ecaron=556;t.Ydieresis=667;t.divide=584;t.Yacute=667;t.Acircumflex=722;t.aacute=556;t.Ucircumflex=722;t.yacute=556;t.scommaaccent=556;t.ecircumflex=556;t.Uring=722;t.Udieresis=722;t.aogonek=556;t.Uacute=722;t.uogonek=611;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=737;t.Emacron=667;t.ccaron=556;t.aring=556;t.Ncommaaccent=722;t.lacute=278;t.agrave=556;t.Tcommaaccent=611;t.Cacute=722;t.atilde=556;t.Edotaccent=667;t.scaron=556;t.scedilla=556;t.iacute=278;t.lozenge=494;t.Rcaron=722;t.Gcommaaccent=778;t.ucircumflex=611;t.acircumflex=556;t.Amacron=722;t.rcaron=389;t.ccedilla=556;t.Zdotaccent=611;t.Thorn=667;t.Omacron=778;t.Racute=722;t.Sacute=667;t.dcaron=743;t.Umacron=722;t.uring=611;t.threesuperior=333;t.Ograve=778;t.Agrave=722;t.Abreve=722;t.multiply=584;t.uacute=611;t.Tcaron=611;t.partialdiff=494;t.ydieresis=556;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=556;t.edieresis=556;t.cacute=556;t.nacute=611;t.umacron=611;t.Ncaron=722;t.Iacute=278;t.plusminus=584;t.brokenbar=280;t.registered=737;t.Gbreve=778;t.Idotaccent=278;t.summation=600;t.Egrave=667;t.racute=389;t.omacron=611;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=722;t.lcommaaccent=278;t.tcaron=389;t.eogonek=556;t.Uogonek=722;t.Aacute=722;t.Adieresis=722;t.egrave=556;t.zacute=500;t.iogonek=278;t.Oacute=778;t.oacute=611;t.amacron=556;t.sacute=556;t.idieresis=278;t.Ocircumflex=778;t.Ugrave=722;t.Delta=612;t.thorn=611;t.twosuperior=333;t.Odieresis=778;t.mu=611;t.igrave=278;t.ohungarumlaut=611;t.Eogonek=667;t.dcroat=611;t.threequarters=834;t.Scedilla=667;t.lcaron=400;t.Kcommaaccent=722;t.Lacute=611;t.trademark=1000;t.edotaccent=556;t.Igrave=278;t.Imacron=278;t.Lcaron=611;t.onehalf=834;t.lessequal=549;t.ocircumflex=611;t.ntilde=611;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=556;t.gbreve=611;t.onequarter=834;t.Scaron=667;t.Scommaaccent=667;t.Ohungarumlaut=778;t.degree=400;t.ograve=611;t.Ccaron=722;t.ugrave=611;t.radical=549;t.Dcaron=722;t.rcommaaccent=389;t.Ntilde=722;t.otilde=611;t.Rcommaaccent=722;t.Lcommaaccent=611;t.Atilde=722;t.Aogonek=722;t.Aring=722;t.Otilde=778;t.zdotaccent=500;t.Ecaron=667;t.Iogonek=278;t.kcommaaccent=556;t.minus=584;t.Icircumflex=278;t.ncaron=611;t.tcommaaccent=333;t.logicalnot=584;t.odieresis=611;t.udieresis=611;t.notequal=549;t.gcommaaccent=611;t.eth=611;t.zcaron=500;t.ncommaaccent=611;t.onesuperior=333;t.imacron=278;t.Euro=556;});t["Helvetica-BoldOblique"]=getLookupTableFactory(function(t){t.space=278;t.exclam=333;t.quotedbl=474;t.numbersign=556;t.dollar=556;t.percent=889;t.ampersand=722;t.quoteright=278;t.parenleft=333;t.parenright=333;t.asterisk=389;t.plus=584;t.comma=278;t.hyphen=333;t.period=278;t.slash=278;t.zero=556;t.one=556;t.two=556;t.three=556;t.four=556;t.five=556;t.six=556;t.seven=556;t.eight=556;t.nine=556;t.colon=333;t.semicolon=333;t.less=584;t.equal=584;t.greater=584;t.question=611;t.at=975;t.A=722;t.B=722;t.C=722;t.D=722;t.E=667;t.F=611;t.G=778;t.H=722;t.I=278;t.J=556;t.K=722;t.L=611;t.M=833;t.N=722;t.O=778;t.P=667;t.Q=778;t.R=722;t.S=667;t.T=611;t.U=722;t.V=667;t.W=944;t.X=667;t.Y=667;t.Z=611;t.bracketleft=333;t.backslash=278;t.bracketright=333;t.asciicircum=584;t.underscore=556;t.quoteleft=278;t.a=556;t.b=611;t.c=556;t.d=611;t.e=556;t.f=333;t.g=611;t.h=611;t.i=278;t.j=278;t.k=556;t.l=278;t.m=889;t.n=611;t.o=611;t.p=611;t.q=611;t.r=389;t.s=556;t.t=333;t.u=611;t.v=556;t.w=778;t.x=556;t.y=556;t.z=500;t.braceleft=389;t.bar=280;t.braceright=389;t.asciitilde=584;t.exclamdown=333;t.cent=556;t.sterling=556;t.fraction=167;t.yen=556;t.florin=556;t.section=556;t.currency=556;t.quotesingle=238;t.quotedblleft=500;t.guillemotleft=556;t.guilsinglleft=333;t.guilsinglright=333;t.fi=611;t.fl=611;t.endash=556;t.dagger=556;t.daggerdbl=556;t.periodcentered=278;t.paragraph=556;t.bullet=350;t.quotesinglbase=278;t.quotedblbase=500;t.quotedblright=500;t.guillemotright=556;t.ellipsis=1000;t.perthousand=1000;t.questiondown=611;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=1000;t.ordfeminine=370;t.Lslash=611;t.Oslash=778;t.OE=1000;t.ordmasculine=365;t.ae=889;t.dotlessi=278;t.lslash=278;t.oslash=611;t.oe=944;t.germandbls=611;t.Idieresis=278;t.eacute=556;t.abreve=556;t.uhungarumlaut=611;t.ecaron=556;t.Ydieresis=667;t.divide=584;t.Yacute=667;t.Acircumflex=722;t.aacute=556;t.Ucircumflex=722;t.yacute=556;t.scommaaccent=556;t.ecircumflex=556;t.Uring=722;t.Udieresis=722;t.aogonek=556;t.Uacute=722;t.uogonek=611;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=737;t.Emacron=667;t.ccaron=556;t.aring=556;t.Ncommaaccent=722;t.lacute=278;t.agrave=556;t.Tcommaaccent=611;t.Cacute=722;t.atilde=556;t.Edotaccent=667;t.scaron=556;t.scedilla=556;t.iacute=278;t.lozenge=494;t.Rcaron=722;t.Gcommaaccent=778;t.ucircumflex=611;t.acircumflex=556;t.Amacron=722;t.rcaron=389;t.ccedilla=556;t.Zdotaccent=611;t.Thorn=667;t.Omacron=778;t.Racute=722;t.Sacute=667;t.dcaron=743;t.Umacron=722;t.uring=611;t.threesuperior=333;t.Ograve=778;t.Agrave=722;t.Abreve=722;t.multiply=584;t.uacute=611;t.Tcaron=611;t.partialdiff=494;t.ydieresis=556;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=556;t.edieresis=556;t.cacute=556;t.nacute=611;t.umacron=611;t.Ncaron=722;t.Iacute=278;t.plusminus=584;t.brokenbar=280;t.registered=737;t.Gbreve=778;t.Idotaccent=278;t.summation=600;t.Egrave=667;t.racute=389;t.omacron=611;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=722;t.lcommaaccent=278;t.tcaron=389;t.eogonek=556;t.Uogonek=722;t.Aacute=722;t.Adieresis=722;t.egrave=556;t.zacute=500;t.iogonek=278;t.Oacute=778;t.oacute=611;t.amacron=556;t.sacute=556;t.idieresis=278;t.Ocircumflex=778;t.Ugrave=722;t.Delta=612;t.thorn=611;t.twosuperior=333;t.Odieresis=778;t.mu=611;t.igrave=278;t.ohungarumlaut=611;t.Eogonek=667;t.dcroat=611;t.threequarters=834;t.Scedilla=667;t.lcaron=400;t.Kcommaaccent=722;t.Lacute=611;t.trademark=1000;t.edotaccent=556;t.Igrave=278;t.Imacron=278;t.Lcaron=611;t.onehalf=834;t.lessequal=549;t.ocircumflex=611;t.ntilde=611;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=556;t.gbreve=611;t.onequarter=834;t.Scaron=667;t.Scommaaccent=667;t.Ohungarumlaut=778;t.degree=400;t.ograve=611;t.Ccaron=722;t.ugrave=611;t.radical=549;t.Dcaron=722;t.rcommaaccent=389;t.Ntilde=722;t.otilde=611;t.Rcommaaccent=722;t.Lcommaaccent=611;t.Atilde=722;t.Aogonek=722;t.Aring=722;t.Otilde=778;t.zdotaccent=500;t.Ecaron=667;t.Iogonek=278;t.kcommaaccent=556;t.minus=584;t.Icircumflex=278;t.ncaron=611;t.tcommaaccent=333;t.logicalnot=584;t.odieresis=611;t.udieresis=611;t.notequal=549;t.gcommaaccent=611;t.eth=611;t.zcaron=500;t.ncommaaccent=611;t.onesuperior=333;t.imacron=278;t.Euro=556;});t["Helvetica-Oblique"]=getLookupTableFactory(function(t){t.space=278;t.exclam=278;t.quotedbl=355;t.numbersign=556;t.dollar=556;t.percent=889;t.ampersand=667;t.quoteright=222;t.parenleft=333;t.parenright=333;t.asterisk=389;t.plus=584;t.comma=278;t.hyphen=333;t.period=278;t.slash=278;t.zero=556;t.one=556;t.two=556;t.three=556;t.four=556;t.five=556;t.six=556;t.seven=556;t.eight=556;t.nine=556;t.colon=278;t.semicolon=278;t.less=584;t.equal=584;t.greater=584;t.question=556;t.at=1015;t.A=667;t.B=667;t.C=722;t.D=722;t.E=667;t.F=611;t.G=778;t.H=722;t.I=278;t.J=500;t.K=667;t.L=556;t.M=833;t.N=722;t.O=778;t.P=667;t.Q=778;t.R=722;t.S=667;t.T=611;t.U=722;t.V=667;t.W=944;t.X=667;t.Y=667;t.Z=611;t.bracketleft=278;t.backslash=278;t.bracketright=278;t.asciicircum=469;t.underscore=556;t.quoteleft=222;t.a=556;t.b=556;t.c=500;t.d=556;t.e=556;t.f=278;t.g=556;t.h=556;t.i=222;t.j=222;t.k=500;t.l=222;t.m=833;t.n=556;t.o=556;t.p=556;t.q=556;t.r=333;t.s=500;t.t=278;t.u=556;t.v=500;t.w=722;t.x=500;t.y=500;t.z=500;t.braceleft=334;t.bar=260;t.braceright=334;t.asciitilde=584;t.exclamdown=333;t.cent=556;t.sterling=556;t.fraction=167;t.yen=556;t.florin=556;t.section=556;t.currency=556;t.quotesingle=191;t.quotedblleft=333;t.guillemotleft=556;t.guilsinglleft=333;t.guilsinglright=333;t.fi=500;t.fl=500;t.endash=556;t.dagger=556;t.daggerdbl=556;t.periodcentered=278;t.paragraph=537;t.bullet=350;t.quotesinglbase=222;t.quotedblbase=333;t.quotedblright=333;t.guillemotright=556;t.ellipsis=1000;t.perthousand=1000;t.questiondown=611;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=1000;t.ordfeminine=370;t.Lslash=556;t.Oslash=778;t.OE=1000;t.ordmasculine=365;t.ae=889;t.dotlessi=278;t.lslash=222;t.oslash=611;t.oe=944;t.germandbls=611;t.Idieresis=278;t.eacute=556;t.abreve=556;t.uhungarumlaut=556;t.ecaron=556;t.Ydieresis=667;t.divide=584;t.Yacute=667;t.Acircumflex=667;t.aacute=556;t.Ucircumflex=722;t.yacute=500;t.scommaaccent=500;t.ecircumflex=556;t.Uring=722;t.Udieresis=722;t.aogonek=556;t.Uacute=722;t.uogonek=556;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=737;t.Emacron=667;t.ccaron=500;t.aring=556;t.Ncommaaccent=722;t.lacute=222;t.agrave=556;t.Tcommaaccent=611;t.Cacute=722;t.atilde=556;t.Edotaccent=667;t.scaron=500;t.scedilla=500;t.iacute=278;t.lozenge=471;t.Rcaron=722;t.Gcommaaccent=778;t.ucircumflex=556;t.acircumflex=556;t.Amacron=667;t.rcaron=333;t.ccedilla=500;t.Zdotaccent=611;t.Thorn=667;t.Omacron=778;t.Racute=722;t.Sacute=667;t.dcaron=643;t.Umacron=722;t.uring=556;t.threesuperior=333;t.Ograve=778;t.Agrave=667;t.Abreve=667;t.multiply=584;t.uacute=556;t.Tcaron=611;t.partialdiff=476;t.ydieresis=500;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=556;t.edieresis=556;t.cacute=500;t.nacute=556;t.umacron=556;t.Ncaron=722;t.Iacute=278;t.plusminus=584;t.brokenbar=260;t.registered=737;t.Gbreve=778;t.Idotaccent=278;t.summation=600;t.Egrave=667;t.racute=333;t.omacron=556;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=722;t.lcommaaccent=222;t.tcaron=317;t.eogonek=556;t.Uogonek=722;t.Aacute=667;t.Adieresis=667;t.egrave=556;t.zacute=500;t.iogonek=222;t.Oacute=778;t.oacute=556;t.amacron=556;t.sacute=500;t.idieresis=278;t.Ocircumflex=778;t.Ugrave=722;t.Delta=612;t.thorn=556;t.twosuperior=333;t.Odieresis=778;t.mu=556;t.igrave=278;t.ohungarumlaut=556;t.Eogonek=667;t.dcroat=556;t.threequarters=834;t.Scedilla=667;t.lcaron=299;t.Kcommaaccent=667;t.Lacute=556;t.trademark=1000;t.edotaccent=556;t.Igrave=278;t.Imacron=278;t.Lcaron=556;t.onehalf=834;t.lessequal=549;t.ocircumflex=556;t.ntilde=556;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=556;t.gbreve=556;t.onequarter=834;t.Scaron=667;t.Scommaaccent=667;t.Ohungarumlaut=778;t.degree=400;t.ograve=556;t.Ccaron=722;t.ugrave=556;t.radical=453;t.Dcaron=722;t.rcommaaccent=333;t.Ntilde=722;t.otilde=556;t.Rcommaaccent=722;t.Lcommaaccent=556;t.Atilde=667;t.Aogonek=667;t.Aring=667;t.Otilde=778;t.zdotaccent=500;t.Ecaron=667;t.Iogonek=278;t.kcommaaccent=500;t.minus=584;t.Icircumflex=278;t.ncaron=556;t.tcommaaccent=278;t.logicalnot=584;t.odieresis=556;t.udieresis=556;t.notequal=549;t.gcommaaccent=556;t.eth=556;t.zcaron=500;t.ncommaaccent=556;t.onesuperior=333;t.imacron=278;t.Euro=556;});t.Symbol=getLookupTableFactory(function(t){t.space=250;t.exclam=333;t.universal=713;t.numbersign=500;t.existential=549;t.percent=833;t.ampersand=778;t.suchthat=439;t.parenleft=333;t.parenright=333;t.asteriskmath=500;t.plus=549;t.comma=250;t.minus=549;t.period=250;t.slash=278;t.zero=500;t.one=500;t.two=500;t.three=500;t.four=500;t.five=500;t.six=500;t.seven=500;t.eight=500;t.nine=500;t.colon=278;t.semicolon=278;t.less=549;t.equal=549;t.greater=549;t.question=444;t.congruent=549;t.Alpha=722;t.Beta=667;t.Chi=722;t.Delta=612;t.Epsilon=611;t.Phi=763;t.Gamma=603;t.Eta=722;t.Iota=333;t.theta1=631;t.Kappa=722;t.Lambda=686;t.Mu=889;t.Nu=722;t.Omicron=722;t.Pi=768;t.Theta=741;t.Rho=556;t.Sigma=592;t.Tau=611;t.Upsilon=690;t.sigma1=439;t.Omega=768;t.Xi=645;t.Psi=795;t.Zeta=611;t.bracketleft=333;t.therefore=863;t.bracketright=333;t.perpendicular=658;t.underscore=500;t.radicalex=500;t.alpha=631;t.beta=549;t.chi=549;t.delta=494;t.epsilon=439;t.phi=521;t.gamma=411;t.eta=603;t.iota=329;t.phi1=603;t.kappa=549;t.lambda=549;t.mu=576;t.nu=521;t.omicron=549;t.pi=549;t.theta=521;t.rho=549;t.sigma=603;t.tau=439;t.upsilon=576;t.omega1=713;t.omega=686;t.xi=493;t.psi=686;t.zeta=494;t.braceleft=480;t.bar=200;t.braceright=480;t.similar=549;t.Euro=750;t.Upsilon1=620;t.minute=247;t.lessequal=549;t.fraction=167;t.infinity=713;t.florin=500;t.club=753;t.diamond=753;t.heart=753;t.spade=753;t.arrowboth=1042;t.arrowleft=987;t.arrowup=603;t.arrowright=987;t.arrowdown=603;t.degree=400;t.plusminus=549;t.second=411;t.greaterequal=549;t.multiply=549;t.proportional=713;t.partialdiff=494;t.bullet=460;t.divide=549;t.notequal=549;t.equivalence=549;t.approxequal=549;t.ellipsis=1000;t.arrowvertex=603;t.arrowhorizex=1000;t.carriagereturn=658;t.aleph=823;t.Ifraktur=686;t.Rfraktur=795;t.weierstrass=987;t.circlemultiply=768;t.circleplus=768;t.emptyset=823;t.intersection=768;t.union=768;t.propersuperset=713;t.reflexsuperset=713;t.notsubset=713;t.propersubset=713;t.reflexsubset=713;t.element=713;t.notelement=713;t.angle=768;t.gradient=713;t.registerserif=790;t.copyrightserif=790;t.trademarkserif=890;t.product=823;t.radical=549;t.dotmath=250;t.logicalnot=713;t.logicaland=603;t.logicalor=603;t.arrowdblboth=1042;t.arrowdblleft=987;t.arrowdblup=603;t.arrowdblright=987;t.arrowdbldown=603;t.lozenge=494;t.angleleft=329;t.registersans=790;t.copyrightsans=790;t.trademarksans=786;t.summation=713;t.parenlefttp=384;t.parenleftex=384;t.parenleftbt=384;t.bracketlefttp=384;t.bracketleftex=384;t.bracketleftbt=384;t.bracelefttp=494;t.braceleftmid=494;t.braceleftbt=494;t.braceex=494;t.angleright=329;t.integral=274;t.integraltp=686;t.integralex=686;t.integralbt=686;t.parenrighttp=384;t.parenrightex=384;t.parenrightbt=384;t.bracketrighttp=384;t.bracketrightex=384;t.bracketrightbt=384;t.bracerighttp=494;t.bracerightmid=494;t.bracerightbt=494;t.apple=790;});t["Times-Roman"]=getLookupTableFactory(function(t){t.space=250;t.exclam=333;t.quotedbl=408;t.numbersign=500;t.dollar=500;t.percent=833;t.ampersand=778;t.quoteright=333;t.parenleft=333;t.parenright=333;t.asterisk=500;t.plus=564;t.comma=250;t.hyphen=333;t.period=250;t.slash=278;t.zero=500;t.one=500;t.two=500;t.three=500;t.four=500;t.five=500;t.six=500;t.seven=500;t.eight=500;t.nine=500;t.colon=278;t.semicolon=278;t.less=564;t.equal=564;t.greater=564;t.question=444;t.at=921;t.A=722;t.B=667;t.C=667;t.D=722;t.E=611;t.F=556;t.G=722;t.H=722;t.I=333;t.J=389;t.K=722;t.L=611;t.M=889;t.N=722;t.O=722;t.P=556;t.Q=722;t.R=667;t.S=556;t.T=611;t.U=722;t.V=722;t.W=944;t.X=722;t.Y=722;t.Z=611;t.bracketleft=333;t.backslash=278;t.bracketright=333;t.asciicircum=469;t.underscore=500;t.quoteleft=333;t.a=444;t.b=500;t.c=444;t.d=500;t.e=444;t.f=333;t.g=500;t.h=500;t.i=278;t.j=278;t.k=500;t.l=278;t.m=778;t.n=500;t.o=500;t.p=500;t.q=500;t.r=333;t.s=389;t.t=278;t.u=500;t.v=500;t.w=722;t.x=500;t.y=500;t.z=444;t.braceleft=480;t.bar=200;t.braceright=480;t.asciitilde=541;t.exclamdown=333;t.cent=500;t.sterling=500;t.fraction=167;t.yen=500;t.florin=500;t.section=500;t.currency=500;t.quotesingle=180;t.quotedblleft=444;t.guillemotleft=500;t.guilsinglleft=333;t.guilsinglright=333;t.fi=556;t.fl=556;t.endash=500;t.dagger=500;t.daggerdbl=500;t.periodcentered=250;t.paragraph=453;t.bullet=350;t.quotesinglbase=333;t.quotedblbase=444;t.quotedblright=444;t.guillemotright=500;t.ellipsis=1000;t.perthousand=1000;t.questiondown=444;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=889;t.ordfeminine=276;t.Lslash=611;t.Oslash=722;t.OE=889;t.ordmasculine=310;t.ae=667;t.dotlessi=278;t.lslash=278;t.oslash=500;t.oe=722;t.germandbls=500;t.Idieresis=333;t.eacute=444;t.abreve=444;t.uhungarumlaut=500;t.ecaron=444;t.Ydieresis=722;t.divide=564;t.Yacute=722;t.Acircumflex=722;t.aacute=444;t.Ucircumflex=722;t.yacute=500;t.scommaaccent=389;t.ecircumflex=444;t.Uring=722;t.Udieresis=722;t.aogonek=444;t.Uacute=722;t.uogonek=500;t.Edieresis=611;t.Dcroat=722;t.commaaccent=250;t.copyright=760;t.Emacron=611;t.ccaron=444;t.aring=444;t.Ncommaaccent=722;t.lacute=278;t.agrave=444;t.Tcommaaccent=611;t.Cacute=667;t.atilde=444;t.Edotaccent=611;t.scaron=389;t.scedilla=389;t.iacute=278;t.lozenge=471;t.Rcaron=667;t.Gcommaaccent=722;t.ucircumflex=500;t.acircumflex=444;t.Amacron=722;t.rcaron=333;t.ccedilla=444;t.Zdotaccent=611;t.Thorn=556;t.Omacron=722;t.Racute=667;t.Sacute=556;t.dcaron=588;t.Umacron=722;t.uring=500;t.threesuperior=300;t.Ograve=722;t.Agrave=722;t.Abreve=722;t.multiply=564;t.uacute=500;t.Tcaron=611;t.partialdiff=476;t.ydieresis=500;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=611;t.adieresis=444;t.edieresis=444;t.cacute=444;t.nacute=500;t.umacron=500;t.Ncaron=722;t.Iacute=333;t.plusminus=564;t.brokenbar=200;t.registered=760;t.Gbreve=722;t.Idotaccent=333;t.summation=600;t.Egrave=611;t.racute=333;t.omacron=500;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=667;t.lcommaaccent=278;t.tcaron=326;t.eogonek=444;t.Uogonek=722;t.Aacute=722;t.Adieresis=722;t.egrave=444;t.zacute=444;t.iogonek=278;t.Oacute=722;t.oacute=500;t.amacron=444;t.sacute=389;t.idieresis=278;t.Ocircumflex=722;t.Ugrave=722;t.Delta=612;t.thorn=500;t.twosuperior=300;t.Odieresis=722;t.mu=500;t.igrave=278;t.ohungarumlaut=500;t.Eogonek=611;t.dcroat=500;t.threequarters=750;t.Scedilla=556;t.lcaron=344;t.Kcommaaccent=722;t.Lacute=611;t.trademark=980;t.edotaccent=444;t.Igrave=333;t.Imacron=333;t.Lcaron=611;t.onehalf=750;t.lessequal=549;t.ocircumflex=500;t.ntilde=500;t.Uhungarumlaut=722;t.Eacute=611;t.emacron=444;t.gbreve=500;t.onequarter=750;t.Scaron=556;t.Scommaaccent=556;t.Ohungarumlaut=722;t.degree=400;t.ograve=500;t.Ccaron=667;t.ugrave=500;t.radical=453;t.Dcaron=722;t.rcommaaccent=333;t.Ntilde=722;t.otilde=500;t.Rcommaaccent=667;t.Lcommaaccent=611;t.Atilde=722;t.Aogonek=722;t.Aring=722;t.Otilde=722;t.zdotaccent=444;t.Ecaron=611;t.Iogonek=333;t.kcommaaccent=500;t.minus=564;t.Icircumflex=333;t.ncaron=500;t.tcommaaccent=278;t.logicalnot=564;t.odieresis=500;t.udieresis=500;t.notequal=549;t.gcommaaccent=500;t.eth=500;t.zcaron=444;t.ncommaaccent=500;t.onesuperior=300;t.imacron=278;t.Euro=500;});t["Times-Bold"]=getLookupTableFactory(function(t){t.space=250;t.exclam=333;t.quotedbl=555;t.numbersign=500;t.dollar=500;t.percent=1000;t.ampersand=833;t.quoteright=333;t.parenleft=333;t.parenright=333;t.asterisk=500;t.plus=570;t.comma=250;t.hyphen=333;t.period=250;t.slash=278;t.zero=500;t.one=500;t.two=500;t.three=500;t.four=500;t.five=500;t.six=500;t.seven=500;t.eight=500;t.nine=500;t.colon=333;t.semicolon=333;t.less=570;t.equal=570;t.greater=570;t.question=500;t.at=930;t.A=722;t.B=667;t.C=722;t.D=722;t.E=667;t.F=611;t.G=778;t.H=778;t.I=389;t.J=500;t.K=778;t.L=667;t.M=944;t.N=722;t.O=778;t.P=611;t.Q=778;t.R=722;t.S=556;t.T=667;t.U=722;t.V=722;t.W=1000;t.X=722;t.Y=722;t.Z=667;t.bracketleft=333;t.backslash=278;t.bracketright=333;t.asciicircum=581;t.underscore=500;t.quoteleft=333;t.a=500;t.b=556;t.c=444;t.d=556;t.e=444;t.f=333;t.g=500;t.h=556;t.i=278;t.j=333;t.k=556;t.l=278;t.m=833;t.n=556;t.o=500;t.p=556;t.q=556;t.r=444;t.s=389;t.t=333;t.u=556;t.v=500;t.w=722;t.x=500;t.y=500;t.z=444;t.braceleft=394;t.bar=220;t.braceright=394;t.asciitilde=520;t.exclamdown=333;t.cent=500;t.sterling=500;t.fraction=167;t.yen=500;t.florin=500;t.section=500;t.currency=500;t.quotesingle=278;t.quotedblleft=500;t.guillemotleft=500;t.guilsinglleft=333;t.guilsinglright=333;t.fi=556;t.fl=556;t.endash=500;t.dagger=500;t.daggerdbl=500;t.periodcentered=250;t.paragraph=540;t.bullet=350;t.quotesinglbase=333;t.quotedblbase=500;t.quotedblright=500;t.guillemotright=500;t.ellipsis=1000;t.perthousand=1000;t.questiondown=500;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=1000;t.ordfeminine=300;t.Lslash=667;t.Oslash=778;t.OE=1000;t.ordmasculine=330;t.ae=722;t.dotlessi=278;t.lslash=278;t.oslash=500;t.oe=722;t.germandbls=556;t.Idieresis=389;t.eacute=444;t.abreve=500;t.uhungarumlaut=556;t.ecaron=444;t.Ydieresis=722;t.divide=570;t.Yacute=722;t.Acircumflex=722;t.aacute=500;t.Ucircumflex=722;t.yacute=500;t.scommaaccent=389;t.ecircumflex=444;t.Uring=722;t.Udieresis=722;t.aogonek=500;t.Uacute=722;t.uogonek=556;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=747;t.Emacron=667;t.ccaron=444;t.aring=500;t.Ncommaaccent=722;t.lacute=278;t.agrave=500;t.Tcommaaccent=667;t.Cacute=722;t.atilde=500;t.Edotaccent=667;t.scaron=389;t.scedilla=389;t.iacute=278;t.lozenge=494;t.Rcaron=722;t.Gcommaaccent=778;t.ucircumflex=556;t.acircumflex=500;t.Amacron=722;t.rcaron=444;t.ccedilla=444;t.Zdotaccent=667;t.Thorn=611;t.Omacron=778;t.Racute=722;t.Sacute=556;t.dcaron=672;t.Umacron=722;t.uring=556;t.threesuperior=300;t.Ograve=778;t.Agrave=722;t.Abreve=722;t.multiply=570;t.uacute=556;t.Tcaron=667;t.partialdiff=494;t.ydieresis=500;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=500;t.edieresis=444;t.cacute=444;t.nacute=556;t.umacron=556;t.Ncaron=722;t.Iacute=389;t.plusminus=570;t.brokenbar=220;t.registered=747;t.Gbreve=778;t.Idotaccent=389;t.summation=600;t.Egrave=667;t.racute=444;t.omacron=500;t.Zacute=667;t.Zcaron=667;t.greaterequal=549;t.Eth=722;t.Ccedilla=722;t.lcommaaccent=278;t.tcaron=416;t.eogonek=444;t.Uogonek=722;t.Aacute=722;t.Adieresis=722;t.egrave=444;t.zacute=444;t.iogonek=278;t.Oacute=778;t.oacute=500;t.amacron=500;t.sacute=389;t.idieresis=278;t.Ocircumflex=778;t.Ugrave=722;t.Delta=612;t.thorn=556;t.twosuperior=300;t.Odieresis=778;t.mu=556;t.igrave=278;t.ohungarumlaut=500;t.Eogonek=667;t.dcroat=556;t.threequarters=750;t.Scedilla=556;t.lcaron=394;t.Kcommaaccent=778;t.Lacute=667;t.trademark=1000;t.edotaccent=444;t.Igrave=389;t.Imacron=389;t.Lcaron=667;t.onehalf=750;t.lessequal=549;t.ocircumflex=500;t.ntilde=556;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=444;t.gbreve=500;t.onequarter=750;t.Scaron=556;t.Scommaaccent=556;t.Ohungarumlaut=778;t.degree=400;t.ograve=500;t.Ccaron=722;t.ugrave=556;t.radical=549;t.Dcaron=722;t.rcommaaccent=444;t.Ntilde=722;t.otilde=500;t.Rcommaaccent=722;t.Lcommaaccent=667;t.Atilde=722;t.Aogonek=722;t.Aring=722;t.Otilde=778;t.zdotaccent=444;t.Ecaron=667;t.Iogonek=389;t.kcommaaccent=556;t.minus=570;t.Icircumflex=389;t.ncaron=556;t.tcommaaccent=333;t.logicalnot=570;t.odieresis=500;t.udieresis=556;t.notequal=549;t.gcommaaccent=500;t.eth=500;t.zcaron=444;t.ncommaaccent=556;t.onesuperior=300;t.imacron=278;t.Euro=500;});t["Times-BoldItalic"]=getLookupTableFactory(function(t){t.space=250;t.exclam=389;t.quotedbl=555;t.numbersign=500;t.dollar=500;t.percent=833;t.ampersand=778;t.quoteright=333;t.parenleft=333;t.parenright=333;t.asterisk=500;t.plus=570;t.comma=250;t.hyphen=333;t.period=250;t.slash=278;t.zero=500;t.one=500;t.two=500;t.three=500;t.four=500;t.five=500;t.six=500;t.seven=500;t.eight=500;t.nine=500;t.colon=333;t.semicolon=333;t.less=570;t.equal=570;t.greater=570;t.question=500;t.at=832;t.A=667;t.B=667;t.C=667;t.D=722;t.E=667;t.F=667;t.G=722;t.H=778;t.I=389;t.J=500;t.K=667;t.L=611;t.M=889;t.N=722;t.O=722;t.P=611;t.Q=722;t.R=667;t.S=556;t.T=611;t.U=722;t.V=667;t.W=889;t.X=667;t.Y=611;t.Z=611;t.bracketleft=333;t.backslash=278;t.bracketright=333;t.asciicircum=570;t.underscore=500;t.quoteleft=333;t.a=500;t.b=500;t.c=444;t.d=500;t.e=444;t.f=333;t.g=500;t.h=556;t.i=278;t.j=278;t.k=500;t.l=278;t.m=778;t.n=556;t.o=500;t.p=500;t.q=500;t.r=389;t.s=389;t.t=278;t.u=556;t.v=444;t.w=667;t.x=500;t.y=444;t.z=389;t.braceleft=348;t.bar=220;t.braceright=348;t.asciitilde=570;t.exclamdown=389;t.cent=500;t.sterling=500;t.fraction=167;t.yen=500;t.florin=500;t.section=500;t.currency=500;t.quotesingle=278;t.quotedblleft=500;t.guillemotleft=500;t.guilsinglleft=333;t.guilsinglright=333;t.fi=556;t.fl=556;t.endash=500;t.dagger=500;t.daggerdbl=500;t.periodcentered=250;t.paragraph=500;t.bullet=350;t.quotesinglbase=333;t.quotedblbase=500;t.quotedblright=500;t.guillemotright=500;t.ellipsis=1000;t.perthousand=1000;t.questiondown=500;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=1000;t.AE=944;t.ordfeminine=266;t.Lslash=611;t.Oslash=722;t.OE=944;t.ordmasculine=300;t.ae=722;t.dotlessi=278;t.lslash=278;t.oslash=500;t.oe=722;t.germandbls=500;t.Idieresis=389;t.eacute=444;t.abreve=500;t.uhungarumlaut=556;t.ecaron=444;t.Ydieresis=611;t.divide=570;t.Yacute=611;t.Acircumflex=667;t.aacute=500;t.Ucircumflex=722;t.yacute=444;t.scommaaccent=389;t.ecircumflex=444;t.Uring=722;t.Udieresis=722;t.aogonek=500;t.Uacute=722;t.uogonek=556;t.Edieresis=667;t.Dcroat=722;t.commaaccent=250;t.copyright=747;t.Emacron=667;t.ccaron=444;t.aring=500;t.Ncommaaccent=722;t.lacute=278;t.agrave=500;t.Tcommaaccent=611;t.Cacute=667;t.atilde=500;t.Edotaccent=667;t.scaron=389;t.scedilla=389;t.iacute=278;t.lozenge=494;t.Rcaron=667;t.Gcommaaccent=722;t.ucircumflex=556;t.acircumflex=500;t.Amacron=667;t.rcaron=389;t.ccedilla=444;t.Zdotaccent=611;t.Thorn=611;t.Omacron=722;t.Racute=667;t.Sacute=556;t.dcaron=608;t.Umacron=722;t.uring=556;t.threesuperior=300;t.Ograve=722;t.Agrave=667;t.Abreve=667;t.multiply=570;t.uacute=556;t.Tcaron=611;t.partialdiff=494;t.ydieresis=444;t.Nacute=722;t.icircumflex=278;t.Ecircumflex=667;t.adieresis=500;t.edieresis=444;t.cacute=444;t.nacute=556;t.umacron=556;t.Ncaron=722;t.Iacute=389;t.plusminus=570;t.brokenbar=220;t.registered=747;t.Gbreve=722;t.Idotaccent=389;t.summation=600;t.Egrave=667;t.racute=389;t.omacron=500;t.Zacute=611;t.Zcaron=611;t.greaterequal=549;t.Eth=722;t.Ccedilla=667;t.lcommaaccent=278;t.tcaron=366;t.eogonek=444;t.Uogonek=722;t.Aacute=667;t.Adieresis=667;t.egrave=444;t.zacute=389;t.iogonek=278;t.Oacute=722;t.oacute=500;t.amacron=500;t.sacute=389;t.idieresis=278;t.Ocircumflex=722;t.Ugrave=722;t.Delta=612;t.thorn=500;t.twosuperior=300;t.Odieresis=722;t.mu=576;t.igrave=278;t.ohungarumlaut=500;t.Eogonek=667;t.dcroat=500;t.threequarters=750;t.Scedilla=556;t.lcaron=382;t.Kcommaaccent=667;t.Lacute=611;t.trademark=1000;t.edotaccent=444;t.Igrave=389;t.Imacron=389;t.Lcaron=611;t.onehalf=750;t.lessequal=549;t.ocircumflex=500;t.ntilde=556;t.Uhungarumlaut=722;t.Eacute=667;t.emacron=444;t.gbreve=500;t.onequarter=750;t.Scaron=556;t.Scommaaccent=556;t.Ohungarumlaut=722;t.degree=400;t.ograve=500;t.Ccaron=667;t.ugrave=556;t.radical=549;t.Dcaron=722;t.rcommaaccent=389;t.Ntilde=722;t.otilde=500;t.Rcommaaccent=667;t.Lcommaaccent=611;t.Atilde=667;t.Aogonek=667;t.Aring=667;t.Otilde=722;t.zdotaccent=389;t.Ecaron=667;t.Iogonek=389;t.kcommaaccent=500;t.minus=606;t.Icircumflex=389;t.ncaron=556;t.tcommaaccent=278;t.logicalnot=606;t.odieresis=500;t.udieresis=556;t.notequal=549;t.gcommaaccent=500;t.eth=500;t.zcaron=389;t.ncommaaccent=556;t.onesuperior=300;t.imacron=278;t.Euro=500;});t["Times-Italic"]=getLookupTableFactory(function(t){t.space=250;t.exclam=333;t.quotedbl=420;t.numbersign=500;t.dollar=500;t.percent=833;t.ampersand=778;t.quoteright=333;t.parenleft=333;t.parenright=333;t.asterisk=500;t.plus=675;t.comma=250;t.hyphen=333;t.period=250;t.slash=278;t.zero=500;t.one=500;t.two=500;t.three=500;t.four=500;t.five=500;t.six=500;t.seven=500;t.eight=500;t.nine=500;t.colon=333;t.semicolon=333;t.less=675;t.equal=675;t.greater=675;t.question=500;t.at=920;t.A=611;t.B=611;t.C=667;t.D=722;t.E=611;t.F=611;t.G=722;t.H=722;t.I=333;t.J=444;t.K=667;t.L=556;t.M=833;t.N=667;t.O=722;t.P=611;t.Q=722;t.R=611;t.S=500;t.T=556;t.U=722;t.V=611;t.W=833;t.X=611;t.Y=556;t.Z=556;t.bracketleft=389;t.backslash=278;t.bracketright=389;t.asciicircum=422;t.underscore=500;t.quoteleft=333;t.a=500;t.b=500;t.c=444;t.d=500;t.e=444;t.f=278;t.g=500;t.h=500;t.i=278;t.j=278;t.k=444;t.l=278;t.m=722;t.n=500;t.o=500;t.p=500;t.q=500;t.r=389;t.s=389;t.t=278;t.u=500;t.v=444;t.w=667;t.x=444;t.y=444;t.z=389;t.braceleft=400;t.bar=275;t.braceright=400;t.asciitilde=541;t.exclamdown=389;t.cent=500;t.sterling=500;t.fraction=167;t.yen=500;t.florin=500;t.section=500;t.currency=500;t.quotesingle=214;t.quotedblleft=556;t.guillemotleft=500;t.guilsinglleft=333;t.guilsinglright=333;t.fi=500;t.fl=500;t.endash=500;t.dagger=500;t.daggerdbl=500;t.periodcentered=250;t.paragraph=523;t.bullet=350;t.quotesinglbase=333;t.quotedblbase=556;t.quotedblright=556;t.guillemotright=500;t.ellipsis=889;t.perthousand=1000;t.questiondown=500;t.grave=333;t.acute=333;t.circumflex=333;t.tilde=333;t.macron=333;t.breve=333;t.dotaccent=333;t.dieresis=333;t.ring=333;t.cedilla=333;t.hungarumlaut=333;t.ogonek=333;t.caron=333;t.emdash=889;t.AE=889;t.ordfeminine=276;t.Lslash=556;t.Oslash=722;t.OE=944;t.ordmasculine=310;t.ae=667;t.dotlessi=278;t.lslash=278;t.oslash=500;t.oe=667;t.germandbls=500;t.Idieresis=333;t.eacute=444;t.abreve=500;t.uhungarumlaut=500;t.ecaron=444;t.Ydieresis=556;t.divide=675;t.Yacute=556;t.Acircumflex=611;t.aacute=500;t.Ucircumflex=722;t.yacute=444;t.scommaaccent=389;t.ecircumflex=444;t.Uring=722;t.Udieresis=722;t.aogonek=500;t.Uacute=722;t.uogonek=500;t.Edieresis=611;t.Dcroat=722;t.commaaccent=250;t.copyright=760;t.Emacron=611;t.ccaron=444;t.aring=500;t.Ncommaaccent=667;t.lacute=278;t.agrave=500;t.Tcommaaccent=556;t.Cacute=667;t.atilde=500;t.Edotaccent=611;t.scaron=389;t.scedilla=389;t.iacute=278;t.lozenge=471;t.Rcaron=611;t.Gcommaaccent=722;t.ucircumflex=500;t.acircumflex=500;t.Amacron=611;t.rcaron=389;t.ccedilla=444;t.Zdotaccent=556;t.Thorn=611;t.Omacron=722;t.Racute=611;t.Sacute=500;t.dcaron=544;t.Umacron=722;t.uring=500;t.threesuperior=300;t.Ograve=722;t.Agrave=611;t.Abreve=611;t.multiply=675;t.uacute=500;t.Tcaron=556;t.partialdiff=476;t.ydieresis=444;t.Nacute=667;t.icircumflex=278;t.Ecircumflex=611;t.adieresis=500;t.edieresis=444;t.cacute=444;t.nacute=500;t.umacron=500;t.Ncaron=667;t.Iacute=333;t.plusminus=675;t.brokenbar=275;t.registered=760;t.Gbreve=722;t.Idotaccent=333;t.summation=600;t.Egrave=611;t.racute=389;t.omacron=500;t.Zacute=556;t.Zcaron=556;t.greaterequal=549;t.Eth=722;t.Ccedilla=667;t.lcommaaccent=278;t.tcaron=300;t.eogonek=444;t.Uogonek=722;t.Aacute=611;t.Adieresis=611;t.egrave=444;t.zacute=389;t.iogonek=278;t.Oacute=722;t.oacute=500;t.amacron=500;t.sacute=389;t.idieresis=278;t.Ocircumflex=722;t.Ugrave=722;t.Delta=612;t.thorn=500;t.twosuperior=300;t.Odieresis=722;t.mu=500;t.igrave=278;t.ohungarumlaut=500;t.Eogonek=611;t.dcroat=500;t.threequarters=750;t.Scedilla=500;t.lcaron=300;t.Kcommaaccent=667;t.Lacute=556;t.trademark=980;t.edotaccent=444;t.Igrave=333;t.Imacron=333;t.Lcaron=611;t.onehalf=750;t.lessequal=549;t.ocircumflex=500;t.ntilde=500;t.Uhungarumlaut=722;t.Eacute=611;t.emacron=444;t.gbreve=500;t.onequarter=750;t.Scaron=500;t.Scommaaccent=500;t.Ohungarumlaut=722;t.degree=400;t.ograve=500;t.Ccaron=667;t.ugrave=500;t.radical=453;t.Dcaron=722;t.rcommaaccent=389;t.Ntilde=667;t.otilde=500;t.Rcommaaccent=611;t.Lcommaaccent=556;t.Atilde=611;t.Aogonek=611;t.Aring=611;t.Otilde=722;t.zdotaccent=389;t.Ecaron=611;t.Iogonek=333;t.kcommaaccent=444;t.minus=675;t.Icircumflex=333;t.ncaron=500;t.tcommaaccent=278;t.logicalnot=675;t.odieresis=500;t.udieresis=500;t.notequal=549;t.gcommaaccent=500;t.eth=500;t.zcaron=389;t.ncommaaccent=500;t.onesuperior=300;t.imacron=278;t.Euro=500;});t.ZapfDingbats=getLookupTableFactory(function(t){t.space=278;t.a1=974;t.a2=961;t.a202=974;t.a3=980;t.a4=719;t.a5=789;t.a119=790;t.a118=791;t.a117=690;t.a11=960;t.a12=939;t.a13=549;t.a14=855;t.a15=911;t.a16=933;t.a105=911;t.a17=945;t.a18=974;t.a19=755;t.a20=846;t.a21=762;t.a22=761;t.a23=571;t.a24=677;t.a25=763;t.a26=760;t.a27=759;t.a28=754;t.a6=494;t.a7=552;t.a8=537;t.a9=577;t.a10=692;t.a29=786;t.a30=788;t.a31=788;t.a32=790;t.a33=793;t.a34=794;t.a35=816;t.a36=823;t.a37=789;t.a38=841;t.a39=823;t.a40=833;t.a41=816;t.a42=831;t.a43=923;t.a44=744;t.a45=723;t.a46=749;t.a47=790;t.a48=792;t.a49=695;t.a50=776;t.a51=768;t.a52=792;t.a53=759;t.a54=707;t.a55=708;t.a56=682;t.a57=701;t.a58=826;t.a59=815;t.a60=789;t.a61=789;t.a62=707;t.a63=687;t.a64=696;t.a65=689;t.a66=786;t.a67=787;t.a68=713;t.a69=791;t.a70=785;t.a71=791;t.a72=873;t.a73=761;t.a74=762;t.a203=762;t.a75=759;t.a204=759;t.a76=892;t.a77=892;t.a78=788;t.a79=784;t.a81=438;t.a82=138;t.a83=277;t.a84=415;t.a97=392;t.a98=392;t.a99=668;t.a100=668;t.a89=390;t.a90=390;t.a93=317;t.a94=317;t.a91=276;t.a92=276;t.a205=509;t.a85=509;t.a206=410;t.a86=410;t.a87=234;t.a88=234;t.a95=334;t.a96=334;t.a101=732;t.a102=544;t.a103=544;t.a104=910;t.a106=667;t.a107=760;t.a108=760;t.a112=776;t.a111=595;t.a110=694;t.a109=626;t.a120=788;t.a121=788;t.a122=788;t.a123=788;t.a124=788;t.a125=788;t.a126=788;t.a127=788;t.a128=788;t.a129=788;t.a130=788;t.a131=788;t.a132=788;t.a133=788;t.a134=788;t.a135=788;t.a136=788;t.a137=788;t.a138=788;t.a139=788;t.a140=788;t.a141=788;t.a142=788;t.a143=788;t.a144=788;t.a145=788;t.a146=788;t.a147=788;t.a148=788;t.a149=788;t.a150=788;t.a151=788;t.a152=788;t.a153=788;t.a154=788;t.a155=788;t.a156=788;t.a157=788;t.a158=788;t.a159=788;t.a160=894;t.a161=838;t.a163=1016;t.a164=458;t.a196=748;t.a165=924;t.a192=748;t.a166=918;t.a167=927;t.a168=928;t.a169=928;t.a170=834;t.a171=873;t.a172=828;t.a173=924;t.a162=924;t.a174=917;t.a175=930;t.a176=931;t.a177=463;t.a178=883;t.a179=836;t.a193=836;t.a180=867;t.a199=867;t.a181=696;t.a200=696;t.a182=874;t.a201=874;t.a183=760;t.a184=946;t.a197=771;t.a185=865;t.a194=771;t.a198=888;t.a186=967;t.a195=888;t.a187=831;t.a188=873;t.a189=927;t.a190=970;t.a191=918;});});var getFontBasicMetrics=getLookupTableFactory(function(t){t.Courier={ascent:629,descent:-157,capHeight:562,xHeight:-426};t["Courier-Bold"]={ascent:629,descent:-157,capHeight:562,xHeight:439};t["Courier-Oblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426};t["Courier-BoldOblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426};t.Helvetica={ascent:718,descent:-207,capHeight:718,xHeight:523};t["Helvetica-Bold"]={ascent:718,descent:-207,capHeight:718,xHeight:532};t["Helvetica-Oblique"]={ascent:718,descent:-207,capHeight:718,xHeight:523};t["Helvetica-BoldOblique"]={ascent:718,descent:-207,capHeight:718,xHeight:532};t["Times-Roman"]={ascent:683,descent:-217,capHeight:662,xHeight:450};t["Times-Bold"]={ascent:683,descent:-217,capHeight:676,xHeight:461};t["Times-Italic"]={ascent:683,descent:-217,capHeight:653,xHeight:441};t["Times-BoldItalic"]={ascent:683,descent:-217,capHeight:669,xHeight:462};t.Symbol={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN};t.ZapfDingbats={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN};});
;// CONCATENATED MODULE: ./src/core/glyf.js
function glyf_slicedToArray(arr,i){return glyf_arrayWithHoles(arr)||glyf_iterableToArrayLimit(arr,i)||glyf_unsupportedIterableToArray(arr,i)||glyf_nonIterableRest();}function glyf_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function glyf_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function glyf_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function glyf_typeof(o){"@babel/helpers - typeof";return glyf_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},glyf_typeof(o);}function glyf_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=glyf_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function glyf_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return glyf_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return glyf_arrayLikeToArray(o,minLen);}function glyf_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function glyf_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function glyf_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,glyf_toPropertyKey(descriptor.key),descriptor);}}function glyf_createClass(Constructor,protoProps,staticProps){if(protoProps)glyf_defineProperties(Constructor.prototype,protoProps);if(staticProps)glyf_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function glyf_toPropertyKey(arg){var key=glyf_toPrimitive(arg,"string");return glyf_typeof(key)==="symbol"?key:String(key);}function glyf_toPrimitive(input,hint){if(glyf_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(glyf_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var ON_CURVE_POINT=1<<0;var X_SHORT_VECTOR=1<<1;var Y_SHORT_VECTOR=1<<2;var REPEAT_FLAG=1<<3;var X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR=1<<4;var Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR=1<<5;var OVERLAP_SIMPLE=1<<6;var ARG_1_AND_2_ARE_WORDS=1<<0;var ARGS_ARE_XY_VALUES=1<<1;var WE_HAVE_A_SCALE=1<<3;var MORE_COMPONENTS=1<<5;var WE_HAVE_AN_X_AND_Y_SCALE=1<<6;var WE_HAVE_A_TWO_BY_TWO=1<<7;var WE_HAVE_INSTRUCTIONS=1<<8;var GlyfTable=/*#__PURE__*/function(){function GlyfTable(_ref){var glyfTable=_ref.glyfTable,isGlyphLocationsLong=_ref.isGlyphLocationsLong,locaTable=_ref.locaTable,numGlyphs=_ref.numGlyphs;glyf_classCallCheck(this,GlyfTable);this.glyphs=[];var loca=new DataView(locaTable.buffer,locaTable.byteOffset,locaTable.byteLength);var glyf=new DataView(glyfTable.buffer,glyfTable.byteOffset,glyfTable.byteLength);var offsetSize=isGlyphLocationsLong?4:2;var prev=isGlyphLocationsLong?loca.getUint32(0):2*loca.getUint16(0);var pos=0;for(var i=0;i<numGlyphs;i++){pos+=offsetSize;var next=isGlyphLocationsLong?loca.getUint32(pos):2*loca.getUint16(pos);if(next===prev){this.glyphs.push(new Glyph({}));continue;}var glyph=Glyph.parse(prev,glyf);this.glyphs.push(glyph);prev=next;}}glyf_createClass(GlyfTable,[{key:"getSize",value:function getSize(){return this.glyphs.reduce(function(a,g){var size=g.getSize();return a+(size+3&~3);},0);}},{key:"write",value:function write(){var totalSize=this.getSize();var glyfTable=new DataView(new ArrayBuffer(totalSize));var isLocationLong=totalSize>0x1fffe;var offsetSize=isLocationLong?4:2;var locaTable=new DataView(new ArrayBuffer((this.glyphs.length+1)*offsetSize));if(isLocationLong){locaTable.setUint32(0,0);}else{locaTable.setUint16(0,0);}var pos=0;var locaIndex=0;var _iterator=glyf_createForOfIteratorHelper(this.glyphs),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var glyph=_step.value;pos+=glyph.write(pos,glyfTable);pos=pos+3&~3;locaIndex+=offsetSize;if(isLocationLong){locaTable.setUint32(locaIndex,pos);}else{locaTable.setUint16(locaIndex,pos>>1);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return{isLocationLong:isLocationLong,loca:new Uint8Array(locaTable.buffer),glyf:new Uint8Array(glyfTable.buffer)};}},{key:"scale",value:function scale(factors){for(var i=0,ii=this.glyphs.length;i<ii;i++){this.glyphs[i].scale(factors[i]);}}}]);return GlyfTable;}();var Glyph=/*#__PURE__*/function(){function Glyph(_ref2){var _ref2$header=_ref2.header,header=_ref2$header===void 0?null:_ref2$header,_ref2$simple=_ref2.simple,simple=_ref2$simple===void 0?null:_ref2$simple,_ref2$composites=_ref2.composites,composites=_ref2$composites===void 0?null:_ref2$composites;glyf_classCallCheck(this,Glyph);this.header=header;this.simple=simple;this.composites=composites;}glyf_createClass(Glyph,[{key:"getSize",value:function getSize(){if(!this.header){return 0;}var size=this.simple?this.simple.getSize():this.composites.reduce(function(a,c){return a+c.getSize();},0);return this.header.getSize()+size;}},{key:"write",value:function write(pos,buf){if(!this.header){return 0;}var spos=pos;pos+=this.header.write(pos,buf);if(this.simple){pos+=this.simple.write(pos,buf);}else{var _iterator2=glyf_createForOfIteratorHelper(this.composites),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var composite=_step2.value;pos+=composite.write(pos,buf);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}return pos-spos;}},{key:"scale",value:function scale(factor){if(!this.header){return;}var xMiddle=(this.header.xMin+this.header.xMax)/2;this.header.scale(xMiddle,factor);if(this.simple){this.simple.scale(xMiddle,factor);}else{var _iterator3=glyf_createForOfIteratorHelper(this.composites),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var composite=_step3.value;composite.scale(xMiddle,factor);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}}],[{key:"parse",value:function parse(pos,glyf){var _GlyphHeader$parse=GlyphHeader.parse(pos,glyf),_GlyphHeader$parse2=glyf_slicedToArray(_GlyphHeader$parse,2),read=_GlyphHeader$parse2[0],header=_GlyphHeader$parse2[1];pos+=read;if(header.numberOfContours<0){var composites=[];while(true){var _CompositeGlyph$parse=CompositeGlyph.parse(pos,glyf),_CompositeGlyph$parse2=glyf_slicedToArray(_CompositeGlyph$parse,2),n=_CompositeGlyph$parse2[0],composite=_CompositeGlyph$parse2[1];pos+=n;composites.push(composite);if(!(composite.flags&MORE_COMPONENTS)){break;}}return new Glyph({header:header,composites:composites});}var simple=SimpleGlyph.parse(pos,glyf,header.numberOfContours);return new Glyph({header:header,simple:simple});}}]);return Glyph;}();var GlyphHeader=/*#__PURE__*/function(){function GlyphHeader(_ref3){var numberOfContours=_ref3.numberOfContours,xMin=_ref3.xMin,yMin=_ref3.yMin,xMax=_ref3.xMax,yMax=_ref3.yMax;glyf_classCallCheck(this,GlyphHeader);this.numberOfContours=numberOfContours;this.xMin=xMin;this.yMin=yMin;this.xMax=xMax;this.yMax=yMax;}glyf_createClass(GlyphHeader,[{key:"getSize",value:function getSize(){return 10;}},{key:"write",value:function write(pos,buf){buf.setInt16(pos,this.numberOfContours);buf.setInt16(pos+2,this.xMin);buf.setInt16(pos+4,this.yMin);buf.setInt16(pos+6,this.xMax);buf.setInt16(pos+8,this.yMax);return 10;}},{key:"scale",value:function scale(x,factor){this.xMin=Math.round(x+(this.xMin-x)*factor);this.xMax=Math.round(x+(this.xMax-x)*factor);}}],[{key:"parse",value:function parse(pos,glyf){return[10,new GlyphHeader({numberOfContours:glyf.getInt16(pos),xMin:glyf.getInt16(pos+2),yMin:glyf.getInt16(pos+4),xMax:glyf.getInt16(pos+6),yMax:glyf.getInt16(pos+8)})];}}]);return GlyphHeader;}();var Contour=/*#__PURE__*/glyf_createClass(function Contour(_ref4){var flags=_ref4.flags,xCoordinates=_ref4.xCoordinates,yCoordinates=_ref4.yCoordinates;glyf_classCallCheck(this,Contour);this.xCoordinates=xCoordinates;this.yCoordinates=yCoordinates;this.flags=flags;});var SimpleGlyph=/*#__PURE__*/function(){function SimpleGlyph(_ref5){var contours=_ref5.contours,instructions=_ref5.instructions;glyf_classCallCheck(this,SimpleGlyph);this.contours=contours;this.instructions=instructions;}glyf_createClass(SimpleGlyph,[{key:"getSize",value:function getSize(){var size=this.contours.length*2+2+this.instructions.length;var lastX=0;var lastY=0;var _iterator4=glyf_createForOfIteratorHelper(this.contours),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var contour=_step4.value;size+=contour.flags.length;for(var i=0,ii=contour.xCoordinates.length;i<ii;i++){var x=contour.xCoordinates[i];var y=contour.yCoordinates[i];var abs=Math.abs(x-lastX);if(abs>255){size+=2;}else if(abs>0){size+=1;}lastX=x;abs=Math.abs(y-lastY);if(abs>255){size+=2;}else if(abs>0){size+=1;}lastY=y;}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return size;}},{key:"write",value:function write(pos,buf){var spos=pos;var xCoordinates=[];var yCoordinates=[];var flags=[];var lastX=0;var lastY=0;var _iterator5=glyf_createForOfIteratorHelper(this.contours),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var contour=_step5.value;for(var _i3=0,_ii2=contour.xCoordinates.length;_i3<_ii2;_i3++){var _flag3=contour.flags[_i3];var _x=contour.xCoordinates[_i3];var delta=_x-lastX;if(delta===0){_flag3|=X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR;xCoordinates.push(0);}else{var abs=Math.abs(delta);if(abs<=255){_flag3|=delta>=0?X_SHORT_VECTOR|X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR:X_SHORT_VECTOR;xCoordinates.push(abs);}else{xCoordinates.push(delta);}}lastX=_x;var _y=contour.yCoordinates[_i3];delta=_y-lastY;if(delta===0){_flag3|=Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR;yCoordinates.push(0);}else{var _abs=Math.abs(delta);if(_abs<=255){_flag3|=delta>=0?Y_SHORT_VECTOR|Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR:Y_SHORT_VECTOR;yCoordinates.push(_abs);}else{yCoordinates.push(delta);}}lastY=_y;flags.push(_flag3);}buf.setUint16(pos,xCoordinates.length-1);pos+=2;}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}buf.setUint16(pos,this.instructions.length);pos+=2;if(this.instructions.length){new Uint8Array(buf.buffer,0,buf.buffer.byteLength).set(this.instructions,pos);pos+=this.instructions.length;}for(var _i=0,_flags=flags;_i<_flags.length;_i++){var flag=_flags[_i];buf.setUint8(pos++,flag);}for(var i=0,ii=xCoordinates.length;i<ii;i++){var x=xCoordinates[i];var _flag=flags[i];if(_flag&X_SHORT_VECTOR){buf.setUint8(pos++,x);}else if(!(_flag&X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR)){buf.setInt16(pos,x);pos+=2;}}for(var _i2=0,_ii=yCoordinates.length;_i2<_ii;_i2++){var y=yCoordinates[_i2];var _flag2=flags[_i2];if(_flag2&Y_SHORT_VECTOR){buf.setUint8(pos++,y);}else if(!(_flag2&Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR)){buf.setInt16(pos,y);pos+=2;}}return pos-spos;}},{key:"scale",value:function scale(x,factor){var _iterator6=glyf_createForOfIteratorHelper(this.contours),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var contour=_step6.value;if(contour.xCoordinates.length===0){continue;}for(var i=0,ii=contour.xCoordinates.length;i<ii;i++){contour.xCoordinates[i]=Math.round(x+(contour.xCoordinates[i]-x)*factor);}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}}],[{key:"parse",value:function parse(pos,glyf,numberOfContours){var endPtsOfContours=[];for(var i=0;i<numberOfContours;i++){var endPt=glyf.getUint16(pos);pos+=2;endPtsOfContours.push(endPt);}var numberOfPt=endPtsOfContours[numberOfContours-1]+1;var instructionLength=glyf.getUint16(pos);pos+=2;var instructions=new Uint8Array(glyf).slice(pos,pos+instructionLength);pos+=instructionLength;var flags=[];for(var _i4=0;_i4<numberOfPt;pos++,_i4++){var flag=glyf.getUint8(pos);flags.push(flag);if(flag&REPEAT_FLAG){var count=glyf.getUint8(++pos);flag^=REPEAT_FLAG;for(var m=0;m<count;m++){flags.push(flag);}_i4+=count;}}var allXCoordinates=[];var xCoordinates=[];var yCoordinates=[];var pointFlags=[];var contours=[];var endPtsOfContoursIndex=0;var lastCoordinate=0;for(var _i5=0;_i5<numberOfPt;_i5++){var _flag4=flags[_i5];if(_flag4&X_SHORT_VECTOR){var x=glyf.getUint8(pos++);lastCoordinate+=_flag4&X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR?x:-x;xCoordinates.push(lastCoordinate);}else if(_flag4&X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR){xCoordinates.push(lastCoordinate);}else{lastCoordinate+=glyf.getInt16(pos);pos+=2;xCoordinates.push(lastCoordinate);}if(endPtsOfContours[endPtsOfContoursIndex]===_i5){endPtsOfContoursIndex++;allXCoordinates.push(xCoordinates);xCoordinates=[];}}lastCoordinate=0;endPtsOfContoursIndex=0;for(var _i6=0;_i6<numberOfPt;_i6++){var _flag5=flags[_i6];if(_flag5&Y_SHORT_VECTOR){var y=glyf.getUint8(pos++);lastCoordinate+=_flag5&Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR?y:-y;yCoordinates.push(lastCoordinate);}else if(_flag5&Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR){yCoordinates.push(lastCoordinate);}else{lastCoordinate+=glyf.getInt16(pos);pos+=2;yCoordinates.push(lastCoordinate);}pointFlags.push(_flag5&ON_CURVE_POINT|_flag5&OVERLAP_SIMPLE);if(endPtsOfContours[endPtsOfContoursIndex]===_i6){xCoordinates=allXCoordinates[endPtsOfContoursIndex];endPtsOfContoursIndex++;contours.push(new Contour({flags:pointFlags,xCoordinates:xCoordinates,yCoordinates:yCoordinates}));yCoordinates=[];pointFlags=[];}}return new SimpleGlyph({contours:contours,instructions:instructions});}}]);return SimpleGlyph;}();var CompositeGlyph=/*#__PURE__*/function(){function CompositeGlyph(_ref6){var flags=_ref6.flags,glyphIndex=_ref6.glyphIndex,argument1=_ref6.argument1,argument2=_ref6.argument2,transf=_ref6.transf,instructions=_ref6.instructions;glyf_classCallCheck(this,CompositeGlyph);this.flags=flags;this.glyphIndex=glyphIndex;this.argument1=argument1;this.argument2=argument2;this.transf=transf;this.instructions=instructions;}glyf_createClass(CompositeGlyph,[{key:"getSize",value:function getSize(){var size=2+2+this.transf.length*2;if(this.flags&WE_HAVE_INSTRUCTIONS){size+=2+this.instructions.length;}size+=2;if(this.flags&2){if(!(this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127)){size+=2;}}else if(!(this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255)){size+=2;}return size;}},{key:"write",value:function write(pos,buf){var spos=pos;if(this.flags&ARGS_ARE_XY_VALUES){if(!(this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127)){this.flags|=ARG_1_AND_2_ARE_WORDS;}}else if(!(this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255)){this.flags|=ARG_1_AND_2_ARE_WORDS;}buf.setUint16(pos,this.flags);buf.setUint16(pos+2,this.glyphIndex);pos+=4;if(this.flags&ARG_1_AND_2_ARE_WORDS){if(this.flags&ARGS_ARE_XY_VALUES){buf.setInt16(pos,this.argument1);buf.setInt16(pos+2,this.argument2);}else{buf.setUint16(pos,this.argument1);buf.setUint16(pos+2,this.argument2);}pos+=4;}else{buf.setUint8(pos,this.argument1);buf.setUint8(pos+1,this.argument2);pos+=2;}if(this.flags&WE_HAVE_INSTRUCTIONS){buf.setUint16(pos,this.instructions.length);pos+=2;if(this.instructions.length){new Uint8Array(buf.buffer,0,buf.buffer.byteLength).set(this.instructions,pos);pos+=this.instructions.length;}}return pos-spos;}},{key:"scale",value:function scale(x,factor){}}],[{key:"parse",value:function parse(pos,glyf){var spos=pos;var transf=[];var flags=glyf.getUint16(pos);var glyphIndex=glyf.getUint16(pos+2);pos+=4;var argument1,argument2;if(flags&ARG_1_AND_2_ARE_WORDS){if(flags&ARGS_ARE_XY_VALUES){argument1=glyf.getInt16(pos);argument2=glyf.getInt16(pos+2);}else{argument1=glyf.getUint16(pos);argument2=glyf.getUint16(pos+2);}pos+=4;flags^=ARG_1_AND_2_ARE_WORDS;}else{if(flags&ARGS_ARE_XY_VALUES){argument1=glyf.getInt8(pos);argument2=glyf.getInt8(pos+1);}else{argument1=glyf.getUint8(pos);argument2=glyf.getUint8(pos+1);}pos+=2;}if(flags&WE_HAVE_A_SCALE){transf.push(glyf.getUint16(pos));pos+=2;}else if(flags&WE_HAVE_AN_X_AND_Y_SCALE){transf.push(glyf.getUint16(pos),glyf.getUint16(pos+2));pos+=4;}else if(flags&WE_HAVE_A_TWO_BY_TWO){transf.push(glyf.getUint16(pos),glyf.getUint16(pos+2),glyf.getUint16(pos+4),glyf.getUint16(pos+6));pos+=8;}var instructions=null;if(flags&WE_HAVE_INSTRUCTIONS){var instructionLength=glyf.getUint16(pos);pos+=2;instructions=new Uint8Array(glyf).slice(pos,pos+instructionLength);pos+=instructionLength;}return[pos-spos,new CompositeGlyph({flags:flags,glyphIndex:glyphIndex,argument1:argument1,argument2:argument2,transf:transf,instructions:instructions})];}}]);return CompositeGlyph;}();
;// CONCATENATED MODULE: ./src/core/opentype_file_builder.js
function opentype_file_builder_typeof(o){"@babel/helpers - typeof";return opentype_file_builder_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},opentype_file_builder_typeof(o);}function opentype_file_builder_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function opentype_file_builder_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,opentype_file_builder_toPropertyKey(descriptor.key),descriptor);}}function opentype_file_builder_createClass(Constructor,protoProps,staticProps){if(protoProps)opentype_file_builder_defineProperties(Constructor.prototype,protoProps);if(staticProps)opentype_file_builder_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function opentype_file_builder_toPropertyKey(arg){var key=opentype_file_builder_toPrimitive(arg,"string");return opentype_file_builder_typeof(key)==="symbol"?key:String(key);}function opentype_file_builder_toPrimitive(input,hint){if(opentype_file_builder_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(opentype_file_builder_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function opentype_file_builder_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=opentype_file_builder_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function opentype_file_builder_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return opentype_file_builder_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return opentype_file_builder_arrayLikeToArray(o,minLen);}function opentype_file_builder_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function writeInt16(dest,offset,num){dest[offset]=num>>8&0xff;dest[offset+1]=num&0xff;}function writeInt32(dest,offset,num){dest[offset]=num>>24&0xff;dest[offset+1]=num>>16&0xff;dest[offset+2]=num>>8&0xff;dest[offset+3]=num&0xff;}function writeData(dest,offset,data){if(data instanceof Uint8Array){dest.set(data,offset);}else if(typeof data==="string"){for(var i=0,ii=data.length;i<ii;i++){dest[offset++]=data.charCodeAt(i)&0xff;}}else{var _iterator=opentype_file_builder_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var num=_step.value;dest[offset++]=num&0xff;}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}var OTF_HEADER_SIZE=12;var OTF_TABLE_ENTRY_SIZE=16;var OpenTypeFileBuilder=/*#__PURE__*/function(){function OpenTypeFileBuilder(sfnt){opentype_file_builder_classCallCheck(this,OpenTypeFileBuilder);this.sfnt=sfnt;this.tables=Object.create(null);}opentype_file_builder_createClass(OpenTypeFileBuilder,[{key:"toArray",value:function toArray(){var sfnt=this.sfnt;var tables=this.tables;var tablesNames=Object.keys(tables);tablesNames.sort();var numTables=tablesNames.length;var i,j,jj,table,tableName;var offset=OTF_HEADER_SIZE+numTables*OTF_TABLE_ENTRY_SIZE;var tableOffsets=[offset];for(i=0;i<numTables;i++){table=tables[tablesNames[i]];var paddedLength=(table.length+3&~3)>>>0;offset+=paddedLength;tableOffsets.push(offset);}var file=new Uint8Array(offset);for(i=0;i<numTables;i++){table=tables[tablesNames[i]];writeData(file,tableOffsets[i],table);}if(sfnt==="true"){sfnt=string32(0x00010000);}file[0]=sfnt.charCodeAt(0)&0xff;file[1]=sfnt.charCodeAt(1)&0xff;file[2]=sfnt.charCodeAt(2)&0xff;file[3]=sfnt.charCodeAt(3)&0xff;writeInt16(file,4,numTables);var searchParams=OpenTypeFileBuilder.getSearchParams(numTables,16);writeInt16(file,6,searchParams.range);writeInt16(file,8,searchParams.entry);writeInt16(file,10,searchParams.rangeShift);offset=OTF_HEADER_SIZE;for(i=0;i<numTables;i++){tableName=tablesNames[i];file[offset]=tableName.charCodeAt(0)&0xff;file[offset+1]=tableName.charCodeAt(1)&0xff;file[offset+2]=tableName.charCodeAt(2)&0xff;file[offset+3]=tableName.charCodeAt(3)&0xff;var checksum=0;for(j=tableOffsets[i],jj=tableOffsets[i+1];j<jj;j+=4){var quad=readUint32(file,j);checksum=checksum+quad>>>0;}writeInt32(file,offset+4,checksum);writeInt32(file,offset+8,tableOffsets[i]);writeInt32(file,offset+12,tables[tableName].length);offset+=OTF_TABLE_ENTRY_SIZE;}return file;}},{key:"addTable",value:function addTable(tag,data){if(tag in this.tables){throw new Error("Table "+tag+" already exists");}this.tables[tag]=data;}}],[{key:"getSearchParams",value:function getSearchParams(entriesCount,entrySize){var maxPower2=1,log2=0;while((maxPower2^entriesCount)>maxPower2){maxPower2<<=1;log2++;}var searchRange=maxPower2*entrySize;return{range:searchRange,entry:log2,rangeShift:entrySize*entriesCount-searchRange};}}]);return OpenTypeFileBuilder;}();
;// CONCATENATED MODULE: ./src/core/type1_parser.js
function type1_parser_typeof(o){"@babel/helpers - typeof";return type1_parser_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},type1_parser_typeof(o);}function type1_parser_toConsumableArray(arr){return type1_parser_arrayWithoutHoles(arr)||type1_parser_iterableToArray(arr)||type1_parser_unsupportedIterableToArray(arr)||type1_parser_nonIterableSpread();}function type1_parser_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function type1_parser_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return type1_parser_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return type1_parser_arrayLikeToArray(o,minLen);}function type1_parser_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function type1_parser_arrayWithoutHoles(arr){if(Array.isArray(arr))return type1_parser_arrayLikeToArray(arr);}function type1_parser_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function type1_parser_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function type1_parser_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,type1_parser_toPropertyKey(descriptor.key),descriptor);}}function type1_parser_createClass(Constructor,protoProps,staticProps){if(protoProps)type1_parser_defineProperties(Constructor.prototype,protoProps);if(staticProps)type1_parser_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function type1_parser_toPropertyKey(arg){var key=type1_parser_toPrimitive(arg,"string");return type1_parser_typeof(key)==="symbol"?key:String(key);}function type1_parser_toPrimitive(input,hint){if(type1_parser_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(type1_parser_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var HINTING_ENABLED=false;var COMMAND_MAP={hstem:[1],vstem:[3],vmoveto:[4],rlineto:[5],hlineto:[6],vlineto:[7],rrcurveto:[8],callsubr:[10],flex:[12,35],drop:[12,18],endchar:[14],rmoveto:[21],hmoveto:[22],vhcurveto:[30],hvcurveto:[31]};var Type1CharString=/*#__PURE__*/function(){function Type1CharString(){type1_parser_classCallCheck(this,Type1CharString);this.width=0;this.lsb=0;this.flexing=false;this.output=[];this.stack=[];}type1_parser_createClass(Type1CharString,[{key:"convert",value:function convert(encoded,subrs,seacAnalysisEnabled){var count=encoded.length;var error=false;var wx,sbx,subrNumber;for(var i=0;i<count;i++){var value=encoded[i];if(value<32){if(value===12){value=(value<<8)+encoded[++i];}switch(value){case 1:if(!HINTING_ENABLED){this.stack=[];break;}error=this.executeCommand(2,COMMAND_MAP.hstem);break;case 3:if(!HINTING_ENABLED){this.stack=[];break;}error=this.executeCommand(2,COMMAND_MAP.vstem);break;case 4:if(this.flexing){if(this.stack.length<1){error=true;break;}var dy=this.stack.pop();this.stack.push(0,dy);break;}error=this.executeCommand(1,COMMAND_MAP.vmoveto);break;case 5:error=this.executeCommand(2,COMMAND_MAP.rlineto);break;case 6:error=this.executeCommand(1,COMMAND_MAP.hlineto);break;case 7:error=this.executeCommand(1,COMMAND_MAP.vlineto);break;case 8:error=this.executeCommand(6,COMMAND_MAP.rrcurveto);break;case 9:this.stack=[];break;case 10:if(this.stack.length<1){error=true;break;}subrNumber=this.stack.pop();if(!subrs[subrNumber]){error=true;break;}error=this.convert(subrs[subrNumber],subrs,seacAnalysisEnabled);break;case 11:return error;case 13:if(this.stack.length<2){error=true;break;}wx=this.stack.pop();sbx=this.stack.pop();this.lsb=sbx;this.width=wx;this.stack.push(wx,sbx);error=this.executeCommand(2,COMMAND_MAP.hmoveto);break;case 14:this.output.push(COMMAND_MAP.endchar[0]);break;case 21:if(this.flexing){break;}error=this.executeCommand(2,COMMAND_MAP.rmoveto);break;case 22:if(this.flexing){this.stack.push(0);break;}error=this.executeCommand(1,COMMAND_MAP.hmoveto);break;case 30:error=this.executeCommand(4,COMMAND_MAP.vhcurveto);break;case 31:error=this.executeCommand(4,COMMAND_MAP.hvcurveto);break;case(12<<8)+0:this.stack=[];break;case(12<<8)+1:if(!HINTING_ENABLED){this.stack=[];break;}error=this.executeCommand(2,COMMAND_MAP.vstem);break;case(12<<8)+2:if(!HINTING_ENABLED){this.stack=[];break;}error=this.executeCommand(2,COMMAND_MAP.hstem);break;case(12<<8)+6:if(seacAnalysisEnabled){var asb=this.stack.at(-5);this.seac=this.stack.splice(-4,4);this.seac[0]+=this.lsb-asb;error=this.executeCommand(0,COMMAND_MAP.endchar);}else{error=this.executeCommand(4,COMMAND_MAP.endchar);}break;case(12<<8)+7:if(this.stack.length<4){error=true;break;}this.stack.pop();wx=this.stack.pop();var sby=this.stack.pop();sbx=this.stack.pop();this.lsb=sbx;this.width=wx;this.stack.push(wx,sbx,sby);error=this.executeCommand(3,COMMAND_MAP.rmoveto);break;case(12<<8)+12:if(this.stack.length<2){error=true;break;}var num2=this.stack.pop();var num1=this.stack.pop();this.stack.push(num1/num2);break;case(12<<8)+16:if(this.stack.length<2){error=true;break;}subrNumber=this.stack.pop();var numArgs=this.stack.pop();if(subrNumber===0&&numArgs===3){var flexArgs=this.stack.splice(-17,17);this.stack.push(flexArgs[2]+flexArgs[0],flexArgs[3]+flexArgs[1],flexArgs[4],flexArgs[5],flexArgs[6],flexArgs[7],flexArgs[8],flexArgs[9],flexArgs[10],flexArgs[11],flexArgs[12],flexArgs[13],flexArgs[14]);error=this.executeCommand(13,COMMAND_MAP.flex,true);this.flexing=false;this.stack.push(flexArgs[15],flexArgs[16]);}else if(subrNumber===1&&numArgs===0){this.flexing=true;}break;case(12<<8)+17:break;case(12<<8)+33:this.stack=[];break;default:warn('Unknown type 1 charstring command of "'+value+'"');break;}if(error){break;}continue;}else if(value<=246){value-=139;}else if(value<=250){value=(value-247)*256+encoded[++i]+108;}else if(value<=254){value=-((value-251)*256)-encoded[++i]-108;}else{value=(encoded[++i]&0xff)<<24|(encoded[++i]&0xff)<<16|(encoded[++i]&0xff)<<8|(encoded[++i]&0xff)<<0;}this.stack.push(value);}return error;}},{key:"executeCommand",value:function executeCommand(howManyArgs,command,keepStack){var _this$output;var stackLength=this.stack.length;if(howManyArgs>stackLength){return true;}var start=stackLength-howManyArgs;for(var i=start;i<stackLength;i++){var value=this.stack[i];if(Number.isInteger(value)){this.output.push(28,value>>8&0xff,value&0xff);}else{value=65536*value|0;this.output.push(255,value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff);}}(_this$output=this.output).push.apply(_this$output,type1_parser_toConsumableArray(command));if(keepStack){this.stack.splice(start,howManyArgs);}else{this.stack.length=0;}return false;}}]);return Type1CharString;}();var EEXEC_ENCRYPT_KEY=55665;var CHAR_STRS_ENCRYPT_KEY=4330;function isHexDigit(code){return code>=48&&code<=57||code>=65&&code<=70||code>=97&&code<=102;}function decrypt(data,key,discardNumber){if(discardNumber>=data.length){return new Uint8Array(0);}var c1=52845,c2=22719;var r=key|0,i,j;for(i=0;i<discardNumber;i++){r=(data[i]+r)*c1+c2&(1<<16)-1;}var count=data.length-discardNumber;var decrypted=new Uint8Array(count);for(i=discardNumber,j=0;j<count;i++,j++){var value=data[i];decrypted[j]=value^r>>8;r=(value+r)*c1+c2&(1<<16)-1;}return decrypted;}function decryptAscii(data,key,discardNumber){var c1=52845,c2=22719;var r=key|0;var count=data.length,maybeLength=count>>>1;var decrypted=new Uint8Array(maybeLength);var i,j;for(i=0,j=0;i<count;i++){var digit1=data[i];if(!isHexDigit(digit1)){continue;}i++;var digit2=void 0;while(i<count&&!isHexDigit(digit2=data[i])){i++;}if(i<count){var value=parseInt(String.fromCharCode(digit1,digit2),16);decrypted[j++]=value^r>>8;r=(value+r)*c1+c2&(1<<16)-1;}}return decrypted.slice(discardNumber,j);}function isSpecial(c){return c===0x2f||c===0x5b||c===0x5d||c===0x7b||c===0x7d||c===0x28||c===0x29;}var Type1Parser=/*#__PURE__*/function(){function Type1Parser(stream,encrypted,seacAnalysisEnabled){type1_parser_classCallCheck(this,Type1Parser);if(encrypted){var data=stream.getBytes();var isBinary=!((isHexDigit(data[0])||isWhiteSpace(data[0]))&&isHexDigit(data[1])&&isHexDigit(data[2])&&isHexDigit(data[3])&&isHexDigit(data[4])&&isHexDigit(data[5])&&isHexDigit(data[6])&&isHexDigit(data[7]));stream=new Stream(isBinary?decrypt(data,EEXEC_ENCRYPT_KEY,4):decryptAscii(data,EEXEC_ENCRYPT_KEY,4));}this.seacAnalysisEnabled=!!seacAnalysisEnabled;this.stream=stream;this.nextChar();}type1_parser_createClass(Type1Parser,[{key:"readNumberArray",value:function readNumberArray(){this.getToken();var array=[];while(true){var token=this.getToken();if(token===null||token==="]"||token==="}"){break;}array.push(parseFloat(token||0));}return array;}},{key:"readNumber",value:function readNumber(){var token=this.getToken();return parseFloat(token||0);}},{key:"readInt",value:function readInt(){var token=this.getToken();return parseInt(token||0,10)|0;}},{key:"readBoolean",value:function readBoolean(){var token=this.getToken();return token==="true"?1:0;}},{key:"nextChar",value:function nextChar(){return this.currentChar=this.stream.getByte();}},{key:"prevChar",value:function prevChar(){this.stream.skip(-2);return this.currentChar=this.stream.getByte();}},{key:"getToken",value:function getToken(){var comment=false;var ch=this.currentChar;while(true){if(ch===-1){return null;}if(comment){if(ch===0x0a||ch===0x0d){comment=false;}}else if(ch===0x25){comment=true;}else if(!isWhiteSpace(ch)){break;}ch=this.nextChar();}if(isSpecial(ch)){this.nextChar();return String.fromCharCode(ch);}var token="";do{token+=String.fromCharCode(ch);ch=this.nextChar();}while(ch>=0&&!isWhiteSpace(ch)&&!isSpecial(ch));return token;}},{key:"readCharStrings",value:function readCharStrings(bytes,lenIV){if(lenIV===-1){return bytes;}return decrypt(bytes,CHAR_STRS_ENCRYPT_KEY,lenIV);}},{key:"extractFontProgram",value:function extractFontProgram(properties){var stream=this.stream;var subrs=[],charstrings=[];var privateData=Object.create(null);privateData.lenIV=4;var program={subrs:[],charstrings:[],properties:{privateData:privateData}};var token,length,data,lenIV;while((token=this.getToken())!==null){if(token!=="/"){continue;}token=this.getToken();switch(token){case"CharStrings":this.getToken();this.getToken();this.getToken();this.getToken();while(true){token=this.getToken();if(token===null||token==="end"){break;}if(token!=="/"){continue;}var glyph=this.getToken();length=this.readInt();this.getToken();data=length>0?stream.getBytes(length):new Uint8Array(0);lenIV=program.properties.privateData.lenIV;var encoded=this.readCharStrings(data,lenIV);this.nextChar();token=this.getToken();if(token==="noaccess"){this.getToken();}else if(token==="/"){this.prevChar();}charstrings.push({glyph:glyph,encoded:encoded});}break;case"Subrs":this.readInt();this.getToken();while(this.getToken()==="dup"){var index=this.readInt();length=this.readInt();this.getToken();data=length>0?stream.getBytes(length):new Uint8Array(0);lenIV=program.properties.privateData.lenIV;var _encoded=this.readCharStrings(data,lenIV);this.nextChar();token=this.getToken();if(token==="noaccess"){this.getToken();}subrs[index]=_encoded;}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":var blueArray=this.readNumberArray();if(blueArray.length>0&&blueArray.length%2===0&&HINTING_ENABLED){program.properties.privateData[token]=blueArray;}break;case"StemSnapH":case"StemSnapV":program.properties.privateData[token]=this.readNumberArray();break;case"StdHW":case"StdVW":program.properties.privateData[token]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":program.properties.privateData[token]=this.readNumber();break;case"ExpansionFactor":program.properties.privateData[token]=this.readNumber()||0.06;break;case"ForceBold":program.properties.privateData[token]=this.readBoolean();break;}}for(var _i=0,_charstrings=charstrings;_i<_charstrings.length;_i++){var _charstrings$_i=_charstrings[_i],_encoded2=_charstrings$_i.encoded,_glyph=_charstrings$_i.glyph;var charString=new Type1CharString();var error=charString.convert(_encoded2,subrs,this.seacAnalysisEnabled);var output=charString.output;if(error){output=[14];}var charStringObject={glyphName:_glyph,charstring:output,width:charString.width,lsb:charString.lsb,seac:charString.seac};if(_glyph===".notdef"){program.charstrings.unshift(charStringObject);}else{program.charstrings.push(charStringObject);}if(properties.builtInEncoding){var _index=properties.builtInEncoding.indexOf(_glyph);if(_index>-1&&properties.widths[_index]===undefined&&_index>=properties.firstChar&&_index<=properties.lastChar){properties.widths[_index]=charString.width;}}}return program;}},{key:"extractFontHeader",value:function extractFontHeader(properties){var token;while((token=this.getToken())!==null){if(token!=="/"){continue;}token=this.getToken();switch(token){case"FontMatrix":var matrix=this.readNumberArray();properties.fontMatrix=matrix;break;case"Encoding":var encodingArg=this.getToken();var encoding=void 0;if(!/^\d+$/.test(encodingArg)){encoding=getEncoding(encodingArg);}else{encoding=[];var size=parseInt(encodingArg,10)|0;this.getToken();for(var j=0;j<size;j++){token=this.getToken();while(token!=="dup"&&token!=="def"){token=this.getToken();if(token===null){return;}}if(token==="def"){break;}var index=this.readInt();this.getToken();var glyph=this.getToken();encoding[index]=glyph;this.getToken();}}properties.builtInEncoding=encoding;break;case"FontBBox":var fontBBox=this.readNumberArray();properties.ascent=Math.max(fontBBox[3],fontBBox[1]);properties.descent=Math.min(fontBBox[1],fontBBox[3]);properties.ascentScaled=true;break;}}}}]);return Type1Parser;}();
;// CONCATENATED MODULE: ./src/core/type1_font.js
function type1_font_typeof(o){"@babel/helpers - typeof";return type1_font_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},type1_font_typeof(o);}function type1_font_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=type1_font_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function type1_font_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return type1_font_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return type1_font_arrayLikeToArray(o,minLen);}function type1_font_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function type1_font_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function type1_font_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,type1_font_toPropertyKey(descriptor.key),descriptor);}}function type1_font_createClass(Constructor,protoProps,staticProps){if(protoProps)type1_font_defineProperties(Constructor.prototype,protoProps);if(staticProps)type1_font_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function type1_font_toPropertyKey(arg){var key=type1_font_toPrimitive(arg,"string");return type1_font_typeof(key)==="symbol"?key:String(key);}function type1_font_toPrimitive(input,hint){if(type1_font_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(type1_font_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function findBlock(streamBytes,signature,startIndex){var streamBytesLength=streamBytes.length;var signatureLength=signature.length;var scanLength=streamBytesLength-signatureLength;var i=startIndex,found=false;while(i<scanLength){var j=0;while(j<signatureLength&&streamBytes[i+j]===signature[j]){j++;}if(j>=signatureLength){i+=j;while(i<streamBytesLength&&isWhiteSpace(streamBytes[i])){i++;}found=true;break;}i++;}return{found:found,length:i};}function getHeaderBlock(stream,suggestedLength){var EEXEC_SIGNATURE=[0x65,0x65,0x78,0x65,0x63];var streamStartPos=stream.pos;var headerBytes,headerBytesLength,block;try{headerBytes=stream.getBytes(suggestedLength);headerBytesLength=headerBytes.length;}catch(_unused){}if(headerBytesLength===suggestedLength){block=findBlock(headerBytes,EEXEC_SIGNATURE,suggestedLength-2*EEXEC_SIGNATURE.length);if(block.found&&block.length===suggestedLength){return{stream:new Stream(headerBytes),length:suggestedLength};}}warn('Invalid "Length1" property in Type1 font -- trying to recover.');stream.pos=streamStartPos;var SCAN_BLOCK_LENGTH=2048;var actualLength;while(true){var scanBytes=stream.peekBytes(SCAN_BLOCK_LENGTH);block=findBlock(scanBytes,EEXEC_SIGNATURE,0);if(block.length===0){break;}stream.pos+=block.length;if(block.found){actualLength=stream.pos-streamStartPos;break;}}stream.pos=streamStartPos;if(actualLength){return{stream:new Stream(stream.getBytes(actualLength)),length:actualLength};}warn('Unable to recover "Length1" property in Type1 font -- using as is.');return{stream:new Stream(stream.getBytes(suggestedLength)),length:suggestedLength};}function getEexecBlock(stream,suggestedLength){var eexecBytes=stream.getBytes();if(eexecBytes.length===0){throw new FormatError("getEexecBlock - no font program found.");}return{stream:new Stream(eexecBytes),length:eexecBytes.length};}var Type1Font=/*#__PURE__*/function(){function Type1Font(name,file,properties){type1_font_classCallCheck(this,Type1Font);var PFB_HEADER_SIZE=6;var headerBlockLength=properties.length1;var eexecBlockLength=properties.length2;var pfbHeader=file.peekBytes(PFB_HEADER_SIZE);var pfbHeaderPresent=pfbHeader[0]===0x80&&pfbHeader[1]===0x01;if(pfbHeaderPresent){file.skip(PFB_HEADER_SIZE);headerBlockLength=pfbHeader[5]<<24|pfbHeader[4]<<16|pfbHeader[3]<<8|pfbHeader[2];}var headerBlock=getHeaderBlock(file,headerBlockLength);var headerBlockParser=new Type1Parser(headerBlock.stream,false,SEAC_ANALYSIS_ENABLED);headerBlockParser.extractFontHeader(properties);if(pfbHeaderPresent){pfbHeader=file.getBytes(PFB_HEADER_SIZE);eexecBlockLength=pfbHeader[5]<<24|pfbHeader[4]<<16|pfbHeader[3]<<8|pfbHeader[2];}var eexecBlock=getEexecBlock(file,eexecBlockLength);var eexecBlockParser=new Type1Parser(eexecBlock.stream,true,SEAC_ANALYSIS_ENABLED);var data=eexecBlockParser.extractFontProgram(properties);for(var key in data.properties){properties[key]=data.properties[key];}var charstrings=data.charstrings;var type2Charstrings=this.getType2Charstrings(charstrings);var subrs=this.getType2Subrs(data.subrs);this.charstrings=charstrings;this.data=this.wrap(name,type2Charstrings,this.charstrings,subrs,properties);this.seacs=this.getSeacs(data.charstrings);}type1_font_createClass(Type1Font,[{key:"numGlyphs",get:function get(){return this.charstrings.length+1;}},{key:"getCharset",value:function getCharset(){var charset=[".notdef"];var _iterator=type1_font_createForOfIteratorHelper(this.charstrings),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var glyphName=_step.value.glyphName;charset.push(glyphName);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return charset;}},{key:"getGlyphMapping",value:function getGlyphMapping(properties){var charstrings=this.charstrings;if(properties.composite){var charCodeToGlyphId=Object.create(null);for(var _glyphId=0,charstringsLen=charstrings.length;_glyphId<charstringsLen;_glyphId++){var charCode=properties.cMap.charCodeOf(_glyphId);charCodeToGlyphId[charCode]=_glyphId+1;}return charCodeToGlyphId;}var glyphNames=[".notdef"];var builtInEncoding,glyphId;for(glyphId=0;glyphId<charstrings.length;glyphId++){glyphNames.push(charstrings[glyphId].glyphName);}var encoding=properties.builtInEncoding;if(encoding){builtInEncoding=Object.create(null);for(var _charCode in encoding){glyphId=glyphNames.indexOf(encoding[_charCode]);if(glyphId>=0){builtInEncoding[_charCode]=glyphId;}}}return type1FontGlyphMapping(properties,builtInEncoding,glyphNames);}},{key:"hasGlyphId",value:function hasGlyphId(id){if(id<0||id>=this.numGlyphs){return false;}if(id===0){return true;}var glyph=this.charstrings[id-1];return glyph.charstring.length>0;}},{key:"getSeacs",value:function getSeacs(charstrings){var seacMap=[];for(var i=0,ii=charstrings.length;i<ii;i++){var charstring=charstrings[i];if(charstring.seac){seacMap[i+1]=charstring.seac;}}return seacMap;}},{key:"getType2Charstrings",value:function getType2Charstrings(type1Charstrings){var type2Charstrings=[];var _iterator2=type1_font_createForOfIteratorHelper(type1Charstrings),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var type1Charstring=_step2.value;type2Charstrings.push(type1Charstring.charstring);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return type2Charstrings;}},{key:"getType2Subrs",value:function getType2Subrs(type1Subrs){var bias=0;var count=type1Subrs.length;if(count<1133){bias=107;}else if(count<33769){bias=1131;}else{bias=32768;}var type2Subrs=[];var i;for(i=0;i<bias;i++){type2Subrs.push([0x0b]);}for(i=0;i<count;i++){type2Subrs.push(type1Subrs[i]);}return type2Subrs;}},{key:"wrap",value:function wrap(name,glyphs,charstrings,subrs,properties){var cff=new CFF();cff.header=new CFFHeader(1,0,4,4);cff.names=[name];var topDict=new CFFTopDict();topDict.setByName("version",391);topDict.setByName("Notice",392);topDict.setByName("FullName",393);topDict.setByName("FamilyName",394);topDict.setByName("Weight",395);topDict.setByName("Encoding",null);topDict.setByName("FontMatrix",properties.fontMatrix);topDict.setByName("FontBBox",properties.bbox);topDict.setByName("charset",null);topDict.setByName("CharStrings",null);topDict.setByName("Private",null);cff.topDict=topDict;var strings=new CFFStrings();strings.add("Version 0.11");strings.add("See original notice");strings.add(name);strings.add(name);strings.add("Medium");cff.strings=strings;cff.globalSubrIndex=new CFFIndex();var count=glyphs.length;var charsetArray=[".notdef"];var i,ii;for(i=0;i<count;i++){var glyphName=charstrings[i].glyphName;var index=CFFStandardStrings.indexOf(glyphName);if(index===-1){strings.add(glyphName);}charsetArray.push(glyphName);}cff.charset=new CFFCharset(false,0,charsetArray);var charStringsIndex=new CFFIndex();charStringsIndex.add([0x8b,0x0e]);for(i=0;i<count;i++){charStringsIndex.add(glyphs[i]);}cff.charStrings=charStringsIndex;var privateDict=new CFFPrivateDict();privateDict.setByName("Subrs",null);var fields=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(i=0,ii=fields.length;i<ii;i++){var field=fields[i];if(!(field in properties.privateData)){continue;}var value=properties.privateData[field];if(Array.isArray(value)){for(var j=value.length-1;j>0;j--){value[j]-=value[j-1];}}privateDict.setByName(field,value);}cff.topDict.privateDict=privateDict;var subrIndex=new CFFIndex();for(i=0,ii=subrs.length;i<ii;i++){subrIndex.add(subrs[i]);}privateDict.subrsIndex=subrIndex;var compiler=new CFFCompiler(cff);return compiler.compile();}}]);return Type1Font;}();
;// CONCATENATED MODULE: ./src/core/fonts.js
function fonts_typeof(o){"@babel/helpers - typeof";return fonts_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},fonts_typeof(o);}function fonts_slicedToArray(arr,i){return fonts_arrayWithHoles(arr)||fonts_iterableToArrayLimit(arr,i)||fonts_unsupportedIterableToArray(arr,i)||fonts_nonIterableRest();}function fonts_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function fonts_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function fonts_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function fonts_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function fonts_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,fonts_toPropertyKey(descriptor.key),descriptor);}}function fonts_createClass(Constructor,protoProps,staticProps){if(protoProps)fonts_defineProperties(Constructor.prototype,protoProps);if(staticProps)fonts_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function fonts_toPropertyKey(arg){var key=fonts_toPrimitive(arg,"string");return fonts_typeof(key)==="symbol"?key:String(key);}function fonts_toPrimitive(input,hint){if(fonts_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(fonts_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function fonts_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=fonts_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function fonts_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return fonts_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fonts_arrayLikeToArray(o,minLen);}function fonts_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}var PRIVATE_USE_AREAS=[[0xe000,0xf8ff],[0x100000,0x10fffd]];var PDF_GLYPH_SPACE_UNITS=1000;var EXPORT_DATA_PROPERTIES=["ascent","bbox","black","bold","charProcOperatorList","composite","cssFontInfo","data","defaultVMetrics","defaultWidth","descent","fallbackName","fontMatrix","isInvalidPDFjsFont","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","systemFontInfo","type","vertical"];var EXPORT_DATA_EXTRA_PROPERTIES=["cMap","defaultEncoding","differences","isMonospace","isSerifFont","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"];function adjustWidths(properties){if(!properties.fontMatrix){return;}if(properties.fontMatrix[0]===FONT_IDENTITY_MATRIX[0]){return;}var scale=0.001/properties.fontMatrix[0];var glyphsWidths=properties.widths;for(var glyph in glyphsWidths){glyphsWidths[glyph]*=scale;}properties.defaultWidth*=scale;}function adjustTrueTypeToUnicode(properties,isSymbolicFont,nameRecords){if(properties.isInternalFont){return;}if(properties.hasIncludedToUnicodeMap){return;}if(properties.hasEncoding){return;}if(properties.toUnicode instanceof IdentityToUnicodeMap){return;}if(!isSymbolicFont){return;}if(nameRecords.length===0){return;}if(properties.defaultEncoding===WinAnsiEncoding){return;}var _iterator=fonts_createForOfIteratorHelper(nameRecords),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var r=_step.value;if(!isWinNameRecord(r)){return;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var encoding=WinAnsiEncoding;var toUnicode=[],glyphsUnicodeMap=getGlyphsUnicode();for(var charCode in encoding){var glyphName=encoding[charCode];if(glyphName===""){continue;}var unicode=glyphsUnicodeMap[glyphName];if(unicode===undefined){continue;}toUnicode[charCode]=String.fromCharCode(unicode);}if(toUnicode.length>0){properties.toUnicode.amend(toUnicode);}}function adjustType1ToUnicode(properties,builtInEncoding){if(properties.isInternalFont){return;}if(properties.hasIncludedToUnicodeMap){return;}if(builtInEncoding===properties.defaultEncoding){return;}if(properties.toUnicode instanceof IdentityToUnicodeMap){return;}var toUnicode=[],glyphsUnicodeMap=getGlyphsUnicode();for(var charCode in builtInEncoding){if(properties.hasEncoding){if(properties.baseEncodingName||properties.differences[charCode]!==undefined){continue;}}var glyphName=builtInEncoding[charCode];var unicode=getUnicodeForGlyph(glyphName,glyphsUnicodeMap);if(unicode!==-1){toUnicode[charCode]=String.fromCharCode(unicode);}}if(toUnicode.length>0){properties.toUnicode.amend(toUnicode);}}function amendFallbackToUnicode(properties){if(!properties.fallbackToUnicode){return;}if(properties.toUnicode instanceof IdentityToUnicodeMap){return;}var toUnicode=[];for(var charCode in properties.fallbackToUnicode){if(properties.toUnicode.has(charCode)){continue;}toUnicode[charCode]=properties.fallbackToUnicode[charCode];}if(toUnicode.length>0){properties.toUnicode.amend(toUnicode);}}var fonts_Glyph=/*#__PURE__*/function(){function Glyph(originalCharCode,fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont){fonts_classCallCheck(this,Glyph);this.originalCharCode=originalCharCode;this.fontChar=fontChar;this.unicode=unicode;this.accent=accent;this.width=width;this.vmetric=vmetric;this.operatorListId=operatorListId;this.isSpace=isSpace;this.isInFont=isInFont;}fonts_createClass(Glyph,[{key:"category",get:function get(){return shadow(this,"category",getCharUnicodeCategory(this.unicode),true);}}]);return Glyph;}();function int16(b0,b1){return(b0<<8)+b1;}function writeSignedInt16(bytes,index,value){bytes[index+1]=value;bytes[index]=value>>>8;}function signedInt16(b0,b1){var value=(b0<<8)+b1;return value&1<<15?value-0x10000:value;}function writeUint32(bytes,index,value){bytes[index+3]=value&0xff;bytes[index+2]=value>>>8;bytes[index+1]=value>>>16;bytes[index]=value>>>24;}function int32(b0,b1,b2,b3){return(b0<<24)+(b1<<16)+(b2<<8)+b3;}function string16(value){return String.fromCharCode(value>>8&0xff,value&0xff);}function safeString16(value){if(value>0x7fff){value=0x7fff;}else if(value<-0x8000){value=-0x8000;}return String.fromCharCode(value>>8&0xff,value&0xff);}function isTrueTypeFile(file){var header=file.peekBytes(4);return readUint32(header,0)===0x00010000||bytesToString(header)==="true";}function isTrueTypeCollectionFile(file){var header=file.peekBytes(4);return bytesToString(header)==="ttcf";}function isOpenTypeFile(file){var header=file.peekBytes(4);return bytesToString(header)==="OTTO";}function isType1File(file){var header=file.peekBytes(2);if(header[0]===0x25&&header[1]===0x21){return true;}if(header[0]===0x80&&header[1]===0x01){return true;}return false;}function isCFFFile(file){var header=file.peekBytes(4);if(header[0]>=1&&header[3]>=1&&header[3]<=4){return true;}return false;}function getFontFileType(file,_ref){var type=_ref.type,subtype=_ref.subtype,composite=_ref.composite;var fileType,fileSubtype;if(isTrueTypeFile(file)||isTrueTypeCollectionFile(file)){fileType=composite?"CIDFontType2":"TrueType";}else if(isOpenTypeFile(file)){fileType=composite?"CIDFontType2":"OpenType";}else if(isType1File(file)){if(composite){fileType="CIDFontType0";}else{fileType=type==="MMType1"?"MMType1":"Type1";}}else if(isCFFFile(file)){if(composite){fileType="CIDFontType0";fileSubtype="CIDFontType0C";}else{fileType=type==="MMType1"?"MMType1":"Type1";fileSubtype="Type1C";}}else{warn("getFontFileType: Unable to detect correct font file Type/Subtype.");fileType=type;fileSubtype=subtype;}return[fileType,fileSubtype];}function applyStandardFontGlyphMap(map,glyphMap){for(var charCode in glyphMap){map[+charCode]=glyphMap[charCode];}}function buildToFontChar(encoding,glyphsUnicodeMap,differences){var toFontChar=[];var unicode;for(var i=0,ii=encoding.length;i<ii;i++){unicode=getUnicodeForGlyph(encoding[i],glyphsUnicodeMap);if(unicode!==-1){toFontChar[i]=unicode;}}for(var charCode in differences){unicode=getUnicodeForGlyph(differences[charCode],glyphsUnicodeMap);if(unicode!==-1){toFontChar[+charCode]=unicode;}}return toFontChar;}function isMacNameRecord(r){return r.platform===1&&r.encoding===0&&r.language===0;}function isWinNameRecord(r){return r.platform===3&&r.encoding===1&&r.language===0x409;}function convertCidString(charCode,cid){var shouldThrow=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;switch(cid.length){case 1:return cid.charCodeAt(0);case 2:return cid.charCodeAt(0)<<8|cid.charCodeAt(1);}var msg="Unsupported CID string (charCode ".concat(charCode,"): \"").concat(cid,"\".");if(shouldThrow){throw new FormatError(msg);}warn(msg);return cid;}function adjustMapping(charCodeToGlyphId,hasGlyph,newGlyphZeroId,toUnicode){var newMap=Object.create(null);var toUnicodeExtraMap=new Map();var toFontChar=[];var usedGlyphIds=new Set();var privateUseAreaIndex=0;var privateUseOffetStart=PRIVATE_USE_AREAS[privateUseAreaIndex][0];var nextAvailableFontCharCode=privateUseOffetStart;var privateUseOffetEnd=PRIVATE_USE_AREAS[privateUseAreaIndex][1];var isInPrivateArea=function isInPrivateArea(code){return PRIVATE_USE_AREAS[0][0]<=code&&code<=PRIVATE_USE_AREAS[0][1]||PRIVATE_USE_AREAS[1][0]<=code&&code<=PRIVATE_USE_AREAS[1][1];};for(var originalCharCode in charCodeToGlyphId){originalCharCode|=0;var glyphId=charCodeToGlyphId[originalCharCode];if(!hasGlyph(glyphId)){continue;}if(nextAvailableFontCharCode>privateUseOffetEnd){privateUseAreaIndex++;if(privateUseAreaIndex>=PRIVATE_USE_AREAS.length){warn("Ran out of space in font private use area.");break;}nextAvailableFontCharCode=PRIVATE_USE_AREAS[privateUseAreaIndex][0];privateUseOffetEnd=PRIVATE_USE_AREAS[privateUseAreaIndex][1];}var fontCharCode=nextAvailableFontCharCode++;if(glyphId===0){glyphId=newGlyphZeroId;}var unicode=toUnicode.get(originalCharCode);if(typeof unicode==="string"){unicode=unicode.codePointAt(0);}if(unicode&&!isInPrivateArea(unicode)&&!usedGlyphIds.has(glyphId)){toUnicodeExtraMap.set(unicode,glyphId);usedGlyphIds.add(glyphId);}newMap[fontCharCode]=glyphId;toFontChar[originalCharCode]=fontCharCode;}return{toFontChar:toFontChar,charCodeToGlyphId:newMap,toUnicodeExtraMap:toUnicodeExtraMap,nextAvailableFontCharCode:nextAvailableFontCharCode};}function getRanges(glyphs,toUnicodeExtraMap,numGlyphs){var codes=[];for(var charCode in glyphs){if(glyphs[charCode]>=numGlyphs){continue;}codes.push({fontCharCode:charCode|0,glyphId:glyphs[charCode]});}if(toUnicodeExtraMap){var _iterator2=fonts_createForOfIteratorHelper(toUnicodeExtraMap),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=fonts_slicedToArray(_step2.value,2),unicode=_step2$value[0],glyphId=_step2$value[1];if(glyphId>=numGlyphs){continue;}codes.push({fontCharCode:unicode,glyphId:glyphId});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}if(codes.length===0){codes.push({fontCharCode:0,glyphId:0});}codes.sort(function fontGetRangesSort(a,b){return a.fontCharCode-b.fontCharCode;});var ranges=[];var length=codes.length;for(var n=0;n<length;){var start=codes[n].fontCharCode;var codeIndices=[codes[n].glyphId];++n;var end=start;while(n<length&&end+1===codes[n].fontCharCode){codeIndices.push(codes[n].glyphId);++end;++n;if(end===0xffff){break;}}ranges.push([start,end,codeIndices]);}return ranges;}function createCmapTable(glyphs,toUnicodeExtraMap,numGlyphs){var ranges=getRanges(glyphs,toUnicodeExtraMap,numGlyphs);var numTables=ranges.at(-1)[1]>0xffff?2:1;var cmap="\x00\x00"+string16(numTables)+"\x00\x03"+"\x00\x01"+string32(4+numTables*8);var i,ii,j,jj;for(i=ranges.length-1;i>=0;--i){if(ranges[i][0]<=0xffff){break;}}var bmpLength=i+1;if(ranges[i][0]<0xffff&&ranges[i][1]===0xffff){ranges[i][1]=0xfffe;}var trailingRangesCount=ranges[i][1]<0xffff?1:0;var segCount=bmpLength+trailingRangesCount;var searchParams=OpenTypeFileBuilder.getSearchParams(segCount,2);var startCount="";var endCount="";var idDeltas="";var idRangeOffsets="";var glyphsIds="";var bias=0;var range,start,end,codes;for(i=0,ii=bmpLength;i<ii;i++){range=ranges[i];start=range[0];end=range[1];startCount+=string16(start);endCount+=string16(end);codes=range[2];var contiguous=true;for(j=1,jj=codes.length;j<jj;++j){if(codes[j]!==codes[j-1]+1){contiguous=false;break;}}if(!contiguous){var offset=(segCount-i)*2+bias*2;bias+=end-start+1;idDeltas+=string16(0);idRangeOffsets+=string16(offset);for(j=0,jj=codes.length;j<jj;++j){glyphsIds+=string16(codes[j]);}}else{var startCode=codes[0];idDeltas+=string16(startCode-start&0xffff);idRangeOffsets+=string16(0);}}if(trailingRangesCount>0){endCount+="\xFF\xFF";startCount+="\xFF\xFF";idDeltas+="\x00\x01";idRangeOffsets+="\x00\x00";}var format314="\x00\x00"+string16(2*segCount)+string16(searchParams.range)+string16(searchParams.entry)+string16(searchParams.rangeShift)+endCount+"\x00\x00"+startCount+idDeltas+idRangeOffsets+glyphsIds;var format31012="";var header31012="";if(numTables>1){cmap+="\x00\x03"+"\x00\x0A"+string32(4+numTables*8+4+format314.length);format31012="";for(i=0,ii=ranges.length;i<ii;i++){range=ranges[i];start=range[0];codes=range[2];var code=codes[0];for(j=1,jj=codes.length;j<jj;++j){if(codes[j]!==codes[j-1]+1){end=range[0]+j-1;format31012+=string32(start)+string32(end)+string32(code);start=end+1;code=codes[j];}}format31012+=string32(start)+string32(range[1])+string32(code);}header31012="\x00\x0C"+"\x00\x00"+string32(format31012.length+16)+"\x00\x00\x00\x00"+string32(format31012.length/12);}return cmap+"\x00\x04"+string16(format314.length+4)+format314+header31012+format31012;}function validateOS2Table(os2,file){file.pos=(file.start||0)+os2.offset;var version=file.getUint16();file.skip(60);var selection=file.getUint16();if(version<4&&selection&0x0300){return false;}var firstChar=file.getUint16();var lastChar=file.getUint16();if(firstChar>lastChar){return false;}file.skip(6);var usWinAscent=file.getUint16();if(usWinAscent===0){return false;}os2.data[8]=os2.data[9]=0;return true;}function createOS2Table(properties,charstrings,override){override||(override={unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0});var ulUnicodeRange1=0;var ulUnicodeRange2=0;var ulUnicodeRange3=0;var ulUnicodeRange4=0;var firstCharIndex=null;var lastCharIndex=0;var position=-1;if(charstrings){for(var code in charstrings){code|=0;if(firstCharIndex>code||!firstCharIndex){firstCharIndex=code;}if(lastCharIndex<code){lastCharIndex=code;}position=getUnicodeRangeFor(code,position);if(position<32){ulUnicodeRange1|=1<<position;}else if(position<64){ulUnicodeRange2|=1<<position-32;}else if(position<96){ulUnicodeRange3|=1<<position-64;}else if(position<123){ulUnicodeRange4|=1<<position-96;}else{throw new FormatError("Unicode ranges Bits > 123 are reserved for internal usage");}}if(lastCharIndex>0xffff){lastCharIndex=0xffff;}}else{firstCharIndex=0;lastCharIndex=255;}var bbox=properties.bbox||[0,0,0,0];var unitsPerEm=override.unitsPerEm||1/(properties.fontMatrix||FONT_IDENTITY_MATRIX)[0];var scale=properties.ascentScaled?1.0:unitsPerEm/PDF_GLYPH_SPACE_UNITS;var typoAscent=override.ascent||Math.round(scale*(properties.ascent||bbox[3]));var typoDescent=override.descent||Math.round(scale*(properties.descent||bbox[1]));if(typoDescent>0&&properties.descent>0&&bbox[1]<0){typoDescent=-typoDescent;}var winAscent=override.yMax||typoAscent;var winDescent=-override.yMin||-typoDescent;return"\x00\x03"+"\x02\x24"+"\x01\xF4"+"\x00\x05"+"\x00\x00"+"\x02\x8A"+"\x02\xBB"+"\x00\x00"+"\x00\x8C"+"\x02\x8A"+"\x02\xBB"+"\x00\x00"+"\x01\xDF"+"\x00\x31"+"\x01\x02"+"\x00\x00"+"\x00\x00\x06"+String.fromCharCode(properties.fixedPitch?0x09:0x00)+"\x00\x00\x00\x00\x00\x00"+string32(ulUnicodeRange1)+string32(ulUnicodeRange2)+string32(ulUnicodeRange3)+string32(ulUnicodeRange4)+"\x2A\x32\x31\x2A"+string16(properties.italicAngle?1:0)+string16(firstCharIndex||properties.firstChar)+string16(lastCharIndex||properties.lastChar)+string16(typoAscent)+string16(typoDescent)+"\x00\x64"+string16(winAscent)+string16(winDescent)+"\x00\x00\x00\x00"+"\x00\x00\x00\x00"+string16(properties.xHeight)+string16(properties.capHeight)+string16(0)+string16(firstCharIndex||properties.firstChar)+"\x00\x03";}function createPostTable(properties){var angle=Math.floor(properties.italicAngle*Math.pow(2,16));return"\x00\x03\x00\x00"+string32(angle)+"\x00\x00"+"\x00\x00"+string32(properties.fixedPitch?1:0)+"\x00\x00\x00\x00"+"\x00\x00\x00\x00"+"\x00\x00\x00\x00"+"\x00\x00\x00\x00";}function createPostscriptName(name){return name.replaceAll(/[^\x21-\x7E]|[[\](){}<>/%]/g,"").slice(0,63);}function createNameTable(name,proto){if(!proto){proto=[[],[]];}var strings=[proto[0][0]||"Original licence",proto[0][1]||name,proto[0][2]||"Unknown",proto[0][3]||"uniqueID",proto[0][4]||name,proto[0][5]||"Version 0.11",proto[0][6]||createPostscriptName(name),proto[0][7]||"Unknown",proto[0][8]||"Unknown",proto[0][9]||"Unknown"];var stringsUnicode=[];var i,ii,j,jj,str;for(i=0,ii=strings.length;i<ii;i++){str=proto[1][i]||strings[i];var strBufUnicode=[];for(j=0,jj=str.length;j<jj;j++){strBufUnicode.push(string16(str.charCodeAt(j)));}stringsUnicode.push(strBufUnicode.join(""));}var names=[strings,stringsUnicode];var platforms=["\x00\x01","\x00\x03"];var encodings=["\x00\x00","\x00\x01"];var languages=["\x00\x00","\x04\x09"];var namesRecordCount=strings.length*platforms.length;var nameTable="\x00\x00"+string16(namesRecordCount)+string16(namesRecordCount*12+6);var strOffset=0;for(i=0,ii=platforms.length;i<ii;i++){var strs=names[i];for(j=0,jj=strs.length;j<jj;j++){str=strs[j];var nameRecord=platforms[i]+encodings[i]+languages[i]+string16(j)+string16(str.length)+string16(strOffset);nameTable+=nameRecord;strOffset+=str.length;}}nameTable+=strings.join("")+stringsUnicode.join("");return nameTable;}var Font=/*#__PURE__*/function(){function Font(name,file,properties){var _this$systemFontInfo;fonts_classCallCheck(this,Font);this.name=name;this.psName=null;this.mimetype=null;this.disableFontFace=false;this.loadedName=properties.loadedName;this.isType3Font=properties.isType3Font;this.missingFile=false;this.cssFontInfo=properties.cssFontInfo;this._charsCache=Object.create(null);this._glyphCache=Object.create(null);var isSerifFont=!!(properties.flags&FontFlags.Serif);if(!isSerifFont&&!properties.isSimulatedFlags){var baseName=name.replaceAll(/[,_]/g,"-").split("-")[0],serifFonts=getSerifFonts();var _iterator3=fonts_createForOfIteratorHelper(baseName.split("+")),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var namePart=_step3.value;if(serifFonts[namePart]){isSerifFont=true;break;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}this.isSerifFont=isSerifFont;this.isSymbolicFont=!!(properties.flags&FontFlags.Symbolic);this.isMonospace=!!(properties.flags&FontFlags.FixedPitch);var type=properties.type,subtype=properties.subtype;this.type=type;this.subtype=subtype;this.systemFontInfo=properties.systemFontInfo;var matches=name.match(/^InvalidPDFjsFont_(.*)_\d+$/);this.isInvalidPDFjsFont=!!matches;if(this.isInvalidPDFjsFont){this.fallbackName=matches[1];}else if(this.isMonospace){this.fallbackName="monospace";}else if(this.isSerifFont){this.fallbackName="serif";}else{this.fallbackName="sans-serif";}if((_this$systemFontInfo=this.systemFontInfo)!==null&&_this$systemFontInfo!==void 0&&_this$systemFontInfo.guessFallback){this.systemFontInfo.guessFallback=false;this.systemFontInfo.css+=",".concat(this.fallbackName);}this.differences=properties.differences;this.widths=properties.widths;this.defaultWidth=properties.defaultWidth;this.composite=properties.composite;this.cMap=properties.cMap;this.capHeight=properties.capHeight/PDF_GLYPH_SPACE_UNITS;this.ascent=properties.ascent/PDF_GLYPH_SPACE_UNITS;this.descent=properties.descent/PDF_GLYPH_SPACE_UNITS;this.lineHeight=this.ascent-this.descent;this.fontMatrix=properties.fontMatrix;this.bbox=properties.bbox;this.defaultEncoding=properties.defaultEncoding;this.toUnicode=properties.toUnicode;this.toFontChar=[];if(properties.type==="Type3"){for(var charCode=0;charCode<256;charCode++){this.toFontChar[charCode]=this.differences[charCode]||properties.defaultEncoding[charCode];}return;}this.cidEncoding=properties.cidEncoding||"";this.vertical=!!properties.vertical;if(this.vertical){this.vmetrics=properties.vmetrics;this.defaultVMetrics=properties.defaultVMetrics;}if(!file||file.isEmpty){if(file){warn('Font file is empty in "'+name+'" ('+this.loadedName+")");}this.fallbackToSystemFont(properties);return;}var _getFontFileType=getFontFileType(file,properties);var _getFontFileType2=fonts_slicedToArray(_getFontFileType,2);type=_getFontFileType2[0];subtype=_getFontFileType2[1];if(type!==this.type||subtype!==this.subtype){info("Inconsistent font file Type/SubType, expected: "+"".concat(this.type,"/").concat(this.subtype," but found: ").concat(type,"/").concat(subtype,"."));}var data;try{switch(type){case"MMType1":info("MMType1 font ("+name+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";var cff=subtype==="Type1C"||subtype==="CIDFontType0C"?new CFFFont(file,properties):new Type1Font(name,file,properties);adjustWidths(properties);data=this.convert(name,cff,properties);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype";data=this.checkAndRepair(name,file,properties);if(this.isOpenType){adjustWidths(properties);type="OpenType";}break;default:throw new FormatError("Font ".concat(type," is not supported"));}}catch(e){warn(e);this.fallbackToSystemFont(properties);return;}amendFallbackToUnicode(properties);this.data=data;this.type=type;this.subtype=subtype;this.fontMatrix=properties.fontMatrix;this.widths=properties.widths;this.defaultWidth=properties.defaultWidth;this.toUnicode=properties.toUnicode;this.seacMap=properties.seacMap;}fonts_createClass(Font,[{key:"renderer",get:function get(){var renderer=FontRendererFactory.create(this,SEAC_ANALYSIS_ENABLED);return shadow(this,"renderer",renderer);}},{key:"exportData",value:function exportData(){var extraProperties=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var exportDataProperties=extraProperties?[].concat(EXPORT_DATA_PROPERTIES,EXPORT_DATA_EXTRA_PROPERTIES):EXPORT_DATA_PROPERTIES;var data=Object.create(null);var property,value;var _iterator4=fonts_createForOfIteratorHelper(exportDataProperties),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){property=_step4.value;value=this[property];if(value!==undefined){data[property]=value;}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return data;}},{key:"fallbackToSystemFont",value:function fallbackToSystemFont(properties){var _this=this;this.missingFile=true;var name=this.name,type=this.type;var fontName=normalizeFontName(name);var stdFontMap=getStdFontMap(),nonStdFontMap=getNonStdFontMap();var isStandardFont=!!stdFontMap[fontName];var isMappedToStandardFont=!!(nonStdFontMap[fontName]&&stdFontMap[nonStdFontMap[fontName]]);fontName=stdFontMap[fontName]||nonStdFontMap[fontName]||fontName;var fontBasicMetricsMap=getFontBasicMetrics();var metrics=fontBasicMetricsMap[fontName];if(metrics){if(isNaN(this.ascent)){this.ascent=metrics.ascent/PDF_GLYPH_SPACE_UNITS;}if(isNaN(this.descent)){this.descent=metrics.descent/PDF_GLYPH_SPACE_UNITS;}if(isNaN(this.capHeight)){this.capHeight=metrics.capHeight/PDF_GLYPH_SPACE_UNITS;}}this.bold=/bold/gi.test(fontName);this.italic=/oblique|italic/gi.test(fontName);this.black=/Black/g.test(name);var isNarrow=/Narrow/g.test(name);this.remeasure=(!isStandardFont||isNarrow)&&Object.keys(this.widths).length>0;if((isStandardFont||isMappedToStandardFont)&&type==="CIDFontType2"&&this.cidEncoding.startsWith("Identity-")){var cidToGidMap=properties.cidToGidMap;var map=[];applyStandardFontGlyphMap(map,getGlyphMapForStandardFonts());if(/Arial-?Black/i.test(name)){applyStandardFontGlyphMap(map,getSupplementalGlyphMapForArialBlack());}else if(/Calibri/i.test(name)){applyStandardFontGlyphMap(map,getSupplementalGlyphMapForCalibri());}if(cidToGidMap){for(var charCode in map){var cid=map[charCode];if(cidToGidMap[cid]!==undefined){map[+charCode]=cidToGidMap[cid];}}if(cidToGidMap.length!==this.toUnicode.length&&properties.hasIncludedToUnicodeMap&&this.toUnicode instanceof IdentityToUnicodeMap){this.toUnicode.forEach(function(charCode,unicodeCharCode){var cid=map[charCode];if(cidToGidMap[cid]===undefined){map[+charCode]=unicodeCharCode;}});}}if(!(this.toUnicode instanceof IdentityToUnicodeMap)){this.toUnicode.forEach(function(charCode,unicodeCharCode){map[+charCode]=unicodeCharCode;});}this.toFontChar=map;this.toUnicode=new ToUnicodeMap(map);}else if(/Symbol/i.test(fontName)){this.toFontChar=buildToFontChar(SymbolSetEncoding,getGlyphsUnicode(),this.differences);}else if(/Dingbats/i.test(fontName)){this.toFontChar=buildToFontChar(ZapfDingbatsEncoding,getDingbatsGlyphsUnicode(),this.differences);}else if(isStandardFont){var _map=buildToFontChar(this.defaultEncoding,getGlyphsUnicode(),this.differences);if(type==="CIDFontType2"&&!this.cidEncoding.startsWith("Identity-")&&!(this.toUnicode instanceof IdentityToUnicodeMap)){this.toUnicode.forEach(function(charCode,unicodeCharCode){_map[+charCode]=unicodeCharCode;});}this.toFontChar=_map;}else{var glyphsUnicodeMap=getGlyphsUnicode();var _map2=[];this.toUnicode.forEach(function(charCode,unicodeCharCode){if(!_this.composite){var glyphName=_this.differences[charCode]||_this.defaultEncoding[charCode];var unicode=getUnicodeForGlyph(glyphName,glyphsUnicodeMap);if(unicode!==-1){unicodeCharCode=unicode;}}_map2[+charCode]=unicodeCharCode;});if(this.composite&&this.toUnicode instanceof IdentityToUnicodeMap){if(/Tahoma|Verdana/i.test(name)){applyStandardFontGlyphMap(_map2,getGlyphMapForStandardFonts());}}this.toFontChar=_map2;}amendFallbackToUnicode(properties);this.loadedName=fontName.split("-")[0];}},{key:"checkAndRepair",value:function checkAndRepair(name,font,properties){var _properties$scaleFact,_this$cssFontInfo;var VALID_TABLES=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function readTables(file,numTables){var tables=Object.create(null);tables["OS/2"]=null;tables.cmap=null;tables.head=null;tables.hhea=null;tables.hmtx=null;tables.maxp=null;tables.name=null;tables.post=null;for(var i=0;i<numTables;i++){var table=readTableEntry(file);if(!VALID_TABLES.includes(table.tag)){continue;}if(table.length===0){continue;}tables[table.tag]=table;}return tables;}function readTableEntry(file){var tag=file.getString(4);var checksum=file.getInt32()>>>0;var offset=file.getInt32()>>>0;var length=file.getInt32()>>>0;var previousPosition=file.pos;file.pos=file.start||0;file.skip(offset);var data=file.getBytes(length);file.pos=previousPosition;if(tag==="head"){data[8]=data[9]=data[10]=data[11]=0;data[17]|=0x20;}return{tag:tag,checksum:checksum,length:length,offset:offset,data:data};}function readOpenTypeHeader(ttf){return{version:ttf.getString(4),numTables:ttf.getUint16(),searchRange:ttf.getUint16(),entrySelector:ttf.getUint16(),rangeShift:ttf.getUint16()};}function readTrueTypeCollectionHeader(ttc){var ttcTag=ttc.getString(4);assert(ttcTag==="ttcf","Must be a TrueType Collection font.");var majorVersion=ttc.getUint16();var minorVersion=ttc.getUint16();var numFonts=ttc.getInt32()>>>0;var offsetTable=[];for(var i=0;i<numFonts;i++){offsetTable.push(ttc.getInt32()>>>0);}var header={ttcTag:ttcTag,majorVersion:majorVersion,minorVersion:minorVersion,numFonts:numFonts,offsetTable:offsetTable};switch(majorVersion){case 1:return header;case 2:header.dsigTag=ttc.getInt32()>>>0;header.dsigLength=ttc.getInt32()>>>0;header.dsigOffset=ttc.getInt32()>>>0;return header;}throw new FormatError("Invalid TrueType Collection majorVersion: ".concat(majorVersion,"."));}function readTrueTypeCollectionData(ttc,fontName){var _readTrueTypeCollecti=readTrueTypeCollectionHeader(ttc),numFonts=_readTrueTypeCollecti.numFonts,offsetTable=_readTrueTypeCollecti.offsetTable;var fontNameParts=fontName.split("+");var fallbackData;for(var i=0;i<numFonts;i++){ttc.pos=(ttc.start||0)+offsetTable[i];var potentialHeader=readOpenTypeHeader(ttc);var potentialTables=readTables(ttc,potentialHeader.numTables);if(!potentialTables.name){throw new FormatError('TrueType Collection font must contain a "name" table.');}var _readNameTable=readNameTable(potentialTables.name),_readNameTable2=fonts_slicedToArray(_readNameTable,1),nameTable=_readNameTable2[0];for(var j=0,jj=nameTable.length;j<jj;j++){for(var k=0,kk=nameTable[j].length;k<kk;k++){var _nameTable$j$k;var nameEntry=(_nameTable$j$k=nameTable[j][k])===null||_nameTable$j$k===void 0?void 0:_nameTable$j$k.replaceAll(/\s/g,"");if(!nameEntry){continue;}if(nameEntry===fontName){return{header:potentialHeader,tables:potentialTables};}if(fontNameParts.length<2){continue;}var _iterator5=fonts_createForOfIteratorHelper(fontNameParts),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var part=_step5.value;if(nameEntry===part){fallbackData={name:part,header:potentialHeader,tables:potentialTables};}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}}}if(fallbackData){warn("TrueType Collection does not contain \"".concat(fontName,"\" font, ")+"falling back to \"".concat(fallbackData.name,"\" font instead."));return{header:fallbackData.header,tables:fallbackData.tables};}throw new FormatError("TrueType Collection does not contain \"".concat(fontName,"\" font."));}function readCmapTable(cmap,file,isSymbolicFont,hasEncoding){if(!cmap){warn("No cmap table available.");return{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:false};}var segment;var start=(file.start||0)+cmap.offset;file.pos=start;file.skip(2);var numTables=file.getUint16();var potentialTable;var canBreak=false;for(var i=0;i<numTables;i++){var _potentialTable,_potentialTable2;var platformId=file.getUint16();var encodingId=file.getUint16();var offset=file.getInt32()>>>0;var useTable=false;if(((_potentialTable=potentialTable)===null||_potentialTable===void 0?void 0:_potentialTable.platformId)===platformId&&((_potentialTable2=potentialTable)===null||_potentialTable2===void 0?void 0:_potentialTable2.encodingId)===encodingId){continue;}if(platformId===0&&(encodingId===0||encodingId===1||encodingId===3)){useTable=true;}else if(platformId===1&&encodingId===0){useTable=true;}else if(platformId===3&&encodingId===1&&(hasEncoding||!potentialTable)){useTable=true;if(!isSymbolicFont){canBreak=true;}}else if(isSymbolicFont&&platformId===3&&encodingId===0){useTable=true;var correctlySorted=true;if(i<numTables-1){var nextBytes=file.peekBytes(2),nextPlatformId=int16(nextBytes[0],nextBytes[1]);if(nextPlatformId<platformId){correctlySorted=false;}}if(correctlySorted){canBreak=true;}}if(useTable){potentialTable={platformId:platformId,encodingId:encodingId,offset:offset};}if(canBreak){break;}}if(potentialTable){file.pos=start+potentialTable.offset;}if(!potentialTable||file.peekByte()===-1){warn("Could not find a preferred cmap table.");return{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:false};}var format=file.getUint16();var hasShortCmap=false;var mappings=[];var j,glyphId;if(format===0){file.skip(2+2);for(j=0;j<256;j++){var index=file.getByte();if(!index){continue;}mappings.push({charCode:j,glyphId:index});}hasShortCmap=true;}else if(format===2){file.skip(2+2);var subHeaderKeys=[];var maxSubHeaderKey=0;for(var _i=0;_i<256;_i++){var subHeaderKey=file.getUint16()>>3;subHeaderKeys.push(subHeaderKey);maxSubHeaderKey=Math.max(subHeaderKey,maxSubHeaderKey);}var subHeaders=[];for(var _i2=0;_i2<=maxSubHeaderKey;_i2++){subHeaders.push({firstCode:file.getUint16(),entryCount:file.getUint16(),idDelta:signedInt16(file.getByte(),file.getByte()),idRangePos:file.pos+file.getUint16()});}for(var _i3=0;_i3<256;_i3++){if(subHeaderKeys[_i3]===0){file.pos=subHeaders[0].idRangePos+2*_i3;glyphId=file.getUint16();mappings.push({charCode:_i3,glyphId:glyphId});}else{var s=subHeaders[subHeaderKeys[_i3]];for(j=0;j<s.entryCount;j++){var charCode=(_i3<<8)+j+s.firstCode;file.pos=s.idRangePos+2*j;glyphId=file.getUint16();if(glyphId!==0){glyphId=(glyphId+s.idDelta)%65536;}mappings.push({charCode:charCode,glyphId:glyphId});}}}}else if(format===4){file.skip(2+2);var segCount=file.getUint16()>>1;file.skip(6);var segments=[];var segIndex;for(segIndex=0;segIndex<segCount;segIndex++){segments.push({end:file.getUint16()});}file.skip(2);for(segIndex=0;segIndex<segCount;segIndex++){segments[segIndex].start=file.getUint16();}for(segIndex=0;segIndex<segCount;segIndex++){segments[segIndex].delta=file.getUint16();}var offsetsCount=0,offsetIndex;for(segIndex=0;segIndex<segCount;segIndex++){segment=segments[segIndex];var rangeOffset=file.getUint16();if(!rangeOffset){segment.offsetIndex=-1;continue;}offsetIndex=(rangeOffset>>1)-(segCount-segIndex);segment.offsetIndex=offsetIndex;offsetsCount=Math.max(offsetsCount,offsetIndex+segment.end-segment.start+1);}var offsets=[];for(j=0;j<offsetsCount;j++){offsets.push(file.getUint16());}for(segIndex=0;segIndex<segCount;segIndex++){segment=segments[segIndex];start=segment.start;var end=segment.end;var delta=segment.delta;offsetIndex=segment.offsetIndex;for(j=start;j<=end;j++){if(j===0xffff){continue;}glyphId=offsetIndex<0?j:offsets[offsetIndex+j-start];glyphId=glyphId+delta&0xffff;mappings.push({charCode:j,glyphId:glyphId});}}}else if(format===6){file.skip(2+2);var firstCode=file.getUint16();var entryCount=file.getUint16();for(j=0;j<entryCount;j++){glyphId=file.getUint16();var _charCode=firstCode+j;mappings.push({charCode:_charCode,glyphId:glyphId});}}else if(format===12){file.skip(2+4+4);var nGroups=file.getInt32()>>>0;for(j=0;j<nGroups;j++){var startCharCode=file.getInt32()>>>0;var endCharCode=file.getInt32()>>>0;var glyphCode=file.getInt32()>>>0;for(var _charCode2=startCharCode;_charCode2<=endCharCode;_charCode2++){mappings.push({charCode:_charCode2,glyphId:glyphCode++});}}}else{warn("cmap table has unsupported format: "+format);return{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:false};}mappings.sort(function(a,b){return a.charCode-b.charCode;});for(var _i4=1;_i4<mappings.length;_i4++){if(mappings[_i4-1].charCode===mappings[_i4].charCode){mappings.splice(_i4,1);_i4--;}}return{platformId:potentialTable.platformId,encodingId:potentialTable.encodingId,mappings:mappings,hasShortCmap:hasShortCmap};}function sanitizeMetrics(file,header,metrics,headTable,numGlyphs,dupFirstEntry){if(!header){if(metrics){metrics.data=null;}return;}file.pos=(file.start||0)+header.offset;file.pos+=4;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;file.pos+=2;var caretOffset=file.getUint16();file.pos+=8;file.pos+=2;var numOfMetrics=file.getUint16();if(caretOffset!==0){var macStyle=int16(headTable.data[44],headTable.data[45]);if(!(macStyle&2)){header.data[22]=0;header.data[23]=0;}}if(numOfMetrics>numGlyphs){info("The numOfMetrics (".concat(numOfMetrics,") should not be ")+"greater than the numGlyphs (".concat(numGlyphs,")."));numOfMetrics=numGlyphs;header.data[34]=(numOfMetrics&0xff00)>>8;header.data[35]=numOfMetrics&0x00ff;}var numOfSidebearings=numGlyphs-numOfMetrics;var numMissing=numOfSidebearings-(metrics.length-numOfMetrics*4>>1);if(numMissing>0){var entries=new Uint8Array(metrics.length+numMissing*2);entries.set(metrics.data);if(dupFirstEntry){entries[metrics.length]=metrics.data[2];entries[metrics.length+1]=metrics.data[3];}metrics.data=entries;}}function sanitizeGlyph(source,sourceStart,sourceEnd,dest,destStart,hintsValid){var glyphProfile={length:0,sizeOfInstructions:0};if(sourceStart<0||sourceStart>=source.length||sourceEnd>source.length||sourceEnd-sourceStart<=12){return glyphProfile;}var glyf=source.subarray(sourceStart,sourceEnd);var xMin=signedInt16(glyf[2],glyf[3]);var yMin=signedInt16(glyf[4],glyf[5]);var xMax=signedInt16(glyf[6],glyf[7]);var yMax=signedInt16(glyf[8],glyf[9]);if(xMin>xMax){writeSignedInt16(glyf,2,xMax);writeSignedInt16(glyf,6,xMin);}if(yMin>yMax){writeSignedInt16(glyf,4,yMax);writeSignedInt16(glyf,8,yMin);}var contoursCount=signedInt16(glyf[0],glyf[1]);if(contoursCount<0){if(contoursCount<-1){return glyphProfile;}dest.set(glyf,destStart);glyphProfile.length=glyf.length;return glyphProfile;}var i,j=10,flagsCount=0;for(i=0;i<contoursCount;i++){var endPoint=glyf[j]<<8|glyf[j+1];flagsCount=endPoint+1;j+=2;}var instructionsStart=j;var instructionsLength=glyf[j]<<8|glyf[j+1];glyphProfile.sizeOfInstructions=instructionsLength;j+=2+instructionsLength;var instructionsEnd=j;var coordinatesLength=0;for(i=0;i<flagsCount;i++){var flag=glyf[j++];if(flag&0xc0){glyf[j-1]=flag&0x3f;}var xLength=2;if(flag&2){xLength=1;}else if(flag&16){xLength=0;}var yLength=2;if(flag&4){yLength=1;}else if(flag&32){yLength=0;}var xyLength=xLength+yLength;coordinatesLength+=xyLength;if(flag&8){var repeat=glyf[j++];if(repeat===0){glyf[j-1]^=8;}i+=repeat;coordinatesLength+=repeat*xyLength;}}if(coordinatesLength===0){return glyphProfile;}var glyphDataLength=j+coordinatesLength;if(glyphDataLength>glyf.length){return glyphProfile;}if(!hintsValid&&instructionsLength>0){dest.set(glyf.subarray(0,instructionsStart),destStart);dest.set([0,0],destStart+instructionsStart);dest.set(glyf.subarray(instructionsEnd,glyphDataLength),destStart+instructionsStart+2);glyphDataLength-=instructionsLength;if(glyf.length-glyphDataLength>3){glyphDataLength=glyphDataLength+3&~3;}glyphProfile.length=glyphDataLength;return glyphProfile;}if(glyf.length-glyphDataLength>3){glyphDataLength=glyphDataLength+3&~3;dest.set(glyf.subarray(0,glyphDataLength),destStart);glyphProfile.length=glyphDataLength;return glyphProfile;}dest.set(glyf,destStart);glyphProfile.length=glyf.length;return glyphProfile;}function sanitizeHead(head,numGlyphs,locaLength){var data=head.data;var version=int32(data[0],data[1],data[2],data[3]);if(version>>16!==1){info("Attempting to fix invalid version in head table: "+version);data[0]=0;data[1]=1;data[2]=0;data[3]=0;}var indexToLocFormat=int16(data[50],data[51]);if(indexToLocFormat<0||indexToLocFormat>1){info("Attempting to fix invalid indexToLocFormat in head table: "+indexToLocFormat);var numGlyphsPlusOne=numGlyphs+1;if(locaLength===numGlyphsPlusOne<<1){data[50]=0;data[51]=0;}else if(locaLength===numGlyphsPlusOne<<2){data[50]=0;data[51]=1;}else{throw new FormatError("Could not fix indexToLocFormat: "+indexToLocFormat);}}}function sanitizeGlyphLocations(loca,glyf,numGlyphs,isGlyphLocationsLong,hintsValid,dupFirstEntry,maxSizeOfInstructions){var itemSize,itemDecode,itemEncode;if(isGlyphLocationsLong){itemSize=4;itemDecode=function fontItemDecodeLong(data,offset){return data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3];};itemEncode=function fontItemEncodeLong(data,offset,value){data[offset]=value>>>24&0xff;data[offset+1]=value>>16&0xff;data[offset+2]=value>>8&0xff;data[offset+3]=value&0xff;};}else{itemSize=2;itemDecode=function fontItemDecode(data,offset){return data[offset]<<9|data[offset+1]<<1;};itemEncode=function fontItemEncode(data,offset,value){data[offset]=value>>9&0xff;data[offset+1]=value>>1&0xff;};}var numGlyphsOut=dupFirstEntry?numGlyphs+1:numGlyphs;var locaDataSize=itemSize*(1+numGlyphsOut);var locaData=new Uint8Array(locaDataSize);locaData.set(loca.data.subarray(0,locaDataSize));loca.data=locaData;var oldGlyfData=glyf.data;var oldGlyfDataLength=oldGlyfData.length;var newGlyfData=new Uint8Array(oldGlyfDataLength);var i,j;var locaEntries=[];for(i=0,j=0;i<numGlyphs+1;i++,j+=itemSize){var offset=itemDecode(locaData,j);if(offset>oldGlyfDataLength){offset=oldGlyfDataLength;}locaEntries.push({index:i,offset:offset,endOffset:0});}locaEntries.sort(function(a,b){return a.offset-b.offset;});for(i=0;i<numGlyphs;i++){locaEntries[i].endOffset=locaEntries[i+1].offset;}locaEntries.sort(function(a,b){return a.index-b.index;});for(i=0;i<numGlyphs;i++){var _locaEntries$i=locaEntries[i],_offset=_locaEntries$i.offset,endOffset=_locaEntries$i.endOffset;if(_offset!==0||endOffset!==0){break;}var nextOffset=locaEntries[i+1].offset;if(nextOffset===0){continue;}locaEntries[i].endOffset=nextOffset;break;}var missingGlyphs=Object.create(null);var writeOffset=0;itemEncode(locaData,0,writeOffset);for(i=0,j=itemSize;i<numGlyphs;i++,j+=itemSize){var glyphProfile=sanitizeGlyph(oldGlyfData,locaEntries[i].offset,locaEntries[i].endOffset,newGlyfData,writeOffset,hintsValid);var newLength=glyphProfile.length;if(newLength===0){missingGlyphs[i]=true;}if(glyphProfile.sizeOfInstructions>maxSizeOfInstructions){maxSizeOfInstructions=glyphProfile.sizeOfInstructions;}writeOffset+=newLength;itemEncode(locaData,j,writeOffset);}if(writeOffset===0){var simpleGlyph=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(i=0,j=itemSize;i<numGlyphsOut;i++,j+=itemSize){itemEncode(locaData,j,simpleGlyph.length);}glyf.data=simpleGlyph;}else if(dupFirstEntry){var firstEntryLength=itemDecode(locaData,itemSize);if(newGlyfData.length>firstEntryLength+writeOffset){glyf.data=newGlyfData.subarray(0,firstEntryLength+writeOffset);}else{glyf.data=new Uint8Array(firstEntryLength+writeOffset);glyf.data.set(newGlyfData.subarray(0,writeOffset));}glyf.data.set(newGlyfData.subarray(0,firstEntryLength),writeOffset);itemEncode(loca.data,locaData.length-itemSize,writeOffset+firstEntryLength);}else{glyf.data=newGlyfData.subarray(0,writeOffset);}return{missingGlyphs:missingGlyphs,maxSizeOfInstructions:maxSizeOfInstructions};}function readPostScriptTable(post,propertiesObj,maxpNumGlyphs){var start=(font.start||0)+post.offset;font.pos=start;var length=post.length,end=start+length;var version=font.getInt32();font.skip(28);var glyphNames;var valid=true;var i;switch(version){case 0x00010000:glyphNames=MacStandardGlyphOrdering;break;case 0x00020000:var _numGlyphs=font.getUint16();if(_numGlyphs!==maxpNumGlyphs){valid=false;break;}var glyphNameIndexes=[];for(i=0;i<_numGlyphs;++i){var index=font.getUint16();if(index>=32768){valid=false;break;}glyphNameIndexes.push(index);}if(!valid){break;}var customNames=[],strBuf=[];while(font.pos<end){var stringLength=font.getByte();strBuf.length=stringLength;for(i=0;i<stringLength;++i){strBuf[i]=String.fromCharCode(font.getByte());}customNames.push(strBuf.join(""));}glyphNames=[];for(i=0;i<_numGlyphs;++i){var j=glyphNameIndexes[i];if(j<258){glyphNames.push(MacStandardGlyphOrdering[j]);continue;}glyphNames.push(customNames[j-258]);}break;case 0x00030000:break;default:warn("Unknown/unsupported post table version "+version);valid=false;if(propertiesObj.defaultEncoding){glyphNames=propertiesObj.defaultEncoding;}break;}propertiesObj.glyphNames=glyphNames;return valid;}function readNameTable(nameTable){var start=(font.start||0)+nameTable.offset;font.pos=start;var names=[[],[]],records=[];var length=nameTable.length,end=start+length;var format=font.getUint16();var FORMAT_0_HEADER_LENGTH=6;if(format!==0||length<FORMAT_0_HEADER_LENGTH){return[names,records];}var numRecords=font.getUint16();var stringsStart=font.getUint16();var NAME_RECORD_LENGTH=12;var i,ii;for(i=0;i<numRecords&&font.pos+NAME_RECORD_LENGTH<=end;i++){var r={platform:font.getUint16(),encoding:font.getUint16(),language:font.getUint16(),name:font.getUint16(),length:font.getUint16(),offset:font.getUint16()};if(isMacNameRecord(r)||isWinNameRecord(r)){records.push(r);}}for(i=0,ii=records.length;i<ii;i++){var record=records[i];if(record.length<=0){continue;}var pos=start+stringsStart+record.offset;if(pos+record.length>end){continue;}font.pos=pos;var nameIndex=record.name;if(record.encoding){var str="";for(var j=0,jj=record.length;j<jj;j+=2){str+=String.fromCharCode(font.getUint16());}names[1][nameIndex]=str;}else{names[0][nameIndex]=font.getString(record.length);}}return[names,records];}var TTOpsStackDeltas=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function sanitizeTTProgram(table,ttContext){var data=table.data;var i=0,j,n,b,funcId,pc,lastEndf=0,lastDeff=0;var stack=[];var callstack=[];var functionsCalled=[];var tooComplexToFollowFunctions=ttContext.tooComplexToFollowFunctions;var inFDEF=false,ifLevel=0,inELSE=0;for(var ii=data.length;i<ii;){var op=data[i++];if(op===0x40){n=data[i++];if(inFDEF||inELSE){i+=n;}else{for(j=0;j<n;j++){stack.push(data[i++]);}}}else if(op===0x41){n=data[i++];if(inFDEF||inELSE){i+=n*2;}else{for(j=0;j<n;j++){b=data[i++];stack.push(b<<8|data[i++]);}}}else if((op&0xf8)===0xb0){n=op-0xb0+1;if(inFDEF||inELSE){i+=n;}else{for(j=0;j<n;j++){stack.push(data[i++]);}}}else if((op&0xf8)===0xb8){n=op-0xb8+1;if(inFDEF||inELSE){i+=n*2;}else{for(j=0;j<n;j++){b=data[i++];stack.push(b<<8|data[i++]);}}}else if(op===0x2b&&!tooComplexToFollowFunctions){if(!inFDEF&&!inELSE){funcId=stack.at(-1);if(isNaN(funcId)){info("TT: CALL empty stack (or invalid entry).");}else{ttContext.functionsUsed[funcId]=true;if(funcId in ttContext.functionsStackDeltas){var newStackLength=stack.length+ttContext.functionsStackDeltas[funcId];if(newStackLength<0){warn("TT: CALL invalid functions stack delta.");ttContext.hintsValid=false;return;}stack.length=newStackLength;}else if(funcId in ttContext.functionsDefined&&!functionsCalled.includes(funcId)){callstack.push({data:data,i:i,stackTop:stack.length-1});functionsCalled.push(funcId);pc=ttContext.functionsDefined[funcId];if(!pc){warn("TT: CALL non-existent function");ttContext.hintsValid=false;return;}data=pc.data;i=pc.i;}}}}else if(op===0x2c&&!tooComplexToFollowFunctions){if(inFDEF||inELSE){warn("TT: nested FDEFs not allowed");tooComplexToFollowFunctions=true;}inFDEF=true;lastDeff=i;funcId=stack.pop();ttContext.functionsDefined[funcId]={data:data,i:i};}else if(op===0x2d){if(inFDEF){inFDEF=false;lastEndf=i;}else{pc=callstack.pop();if(!pc){warn("TT: ENDF bad stack");ttContext.hintsValid=false;return;}funcId=functionsCalled.pop();data=pc.data;i=pc.i;ttContext.functionsStackDeltas[funcId]=stack.length-pc.stackTop;}}else if(op===0x89){if(inFDEF||inELSE){warn("TT: nested IDEFs not allowed");tooComplexToFollowFunctions=true;}inFDEF=true;lastDeff=i;}else if(op===0x58){++ifLevel;}else if(op===0x1b){inELSE=ifLevel;}else if(op===0x59){if(inELSE===ifLevel){inELSE=0;}--ifLevel;}else if(op===0x1c){if(!inFDEF&&!inELSE){var offset=stack.at(-1);if(offset>0){i+=offset-1;}}}if(!inFDEF&&!inELSE){var stackDelta=0;if(op<=0x8e){stackDelta=TTOpsStackDeltas[op];}else if(op>=0xc0&&op<=0xdf){stackDelta=-1;}else if(op>=0xe0){stackDelta=-2;}if(op>=0x71&&op<=0x75){n=stack.pop();if(!isNaN(n)){stackDelta=-n*2;}}while(stackDelta<0&&stack.length>0){stack.pop();stackDelta++;}while(stackDelta>0){stack.push(NaN);stackDelta--;}}}ttContext.tooComplexToFollowFunctions=tooComplexToFollowFunctions;var content=[data];if(i>data.length){content.push(new Uint8Array(i-data.length));}if(lastDeff>lastEndf){warn("TT: complementing a missing function tail");content.push(new Uint8Array([0x22,0x2d]));}foldTTTable(table,content);}function checkInvalidFunctions(ttContext,maxFunctionDefs){if(ttContext.tooComplexToFollowFunctions){return;}if(ttContext.functionsDefined.length>maxFunctionDefs){warn("TT: more functions defined than expected");ttContext.hintsValid=false;return;}for(var j=0,jj=ttContext.functionsUsed.length;j<jj;j++){if(j>maxFunctionDefs){warn("TT: invalid function id: "+j);ttContext.hintsValid=false;return;}if(ttContext.functionsUsed[j]&&!ttContext.functionsDefined[j]){warn("TT: undefined function: "+j);ttContext.hintsValid=false;return;}}}function foldTTTable(table,content){if(content.length>1){var newLength=0;var j,jj;for(j=0,jj=content.length;j<jj;j++){newLength+=content[j].length;}newLength=newLength+3&~3;var result=new Uint8Array(newLength);var pos=0;for(j=0,jj=content.length;j<jj;j++){result.set(content[j],pos);pos+=content[j].length;}table.data=result;table.length=newLength;}}function sanitizeTTPrograms(fpgm,prep,cvt,maxFunctionDefs){var ttContext={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:false,hintsValid:true};if(fpgm){sanitizeTTProgram(fpgm,ttContext);}if(prep){sanitizeTTProgram(prep,ttContext);}if(fpgm){checkInvalidFunctions(ttContext,maxFunctionDefs);}if(cvt&&cvt.length&1){var cvtData=new Uint8Array(cvt.length+1);cvtData.set(cvt.data);cvt.data=cvtData;}return ttContext.hintsValid;}font=new Stream(new Uint8Array(font.getBytes()));var header,tables;if(isTrueTypeCollectionFile(font)){var ttcData=readTrueTypeCollectionData(font,this.name);header=ttcData.header;tables=ttcData.tables;}else{header=readOpenTypeHeader(font);tables=readTables(font,header.numTables);}var cff,cffFile;var isTrueType=!tables["CFF "];if(!isTrueType){var _properties$cidToGidM;var isComposite=properties.composite&&(((_properties$cidToGidM=properties.cidToGidMap)===null||_properties$cidToGidM===void 0?void 0:_properties$cidToGidM.length)>0||!(properties.cMap instanceof IdentityCMap));if(header.version==="OTTO"&&!isComposite||!tables.head||!tables.hhea||!tables.maxp||!tables.post){cffFile=new Stream(tables["CFF "].data);cff=new CFFFont(cffFile,properties);adjustWidths(properties);return this.convert(name,cff,properties);}delete tables.glyf;delete tables.loca;delete tables.fpgm;delete tables.prep;delete tables["cvt "];this.isOpenType=true;}else{if(!tables.loca){throw new FormatError('Required "loca" table is not found');}if(!tables.glyf){warn('Required "glyf" table is not found -- trying to recover.');tables.glyf={tag:"glyf",data:new Uint8Array(0)};}this.isOpenType=false;}if(!tables.maxp){throw new FormatError('Required "maxp" table is not found');}font.pos=(font.start||0)+tables.maxp.offset;var version=font.getInt32();var numGlyphs=font.getUint16();if(version!==0x00010000&&version!==0x00005000){if(tables.maxp.length===6){version=0x0005000;}else if(tables.maxp.length>=32){version=0x00010000;}else{throw new FormatError("\"maxp\" table has a wrong version number");}writeUint32(tables.maxp.data,0,version);}if(((_properties$scaleFact=properties.scaleFactors)===null||_properties$scaleFact===void 0?void 0:_properties$scaleFact.length)===numGlyphs&&isTrueType){var scaleFactors=properties.scaleFactors;var isGlyphLocationsLong=int16(tables.head.data[50],tables.head.data[51]);var glyphs=new GlyfTable({glyfTable:tables.glyf.data,isGlyphLocationsLong:isGlyphLocationsLong,locaTable:tables.loca.data,numGlyphs:numGlyphs});glyphs.scale(scaleFactors);var _glyphs$write=glyphs.write(),glyf=_glyphs$write.glyf,loca=_glyphs$write.loca,isLocationLong=_glyphs$write.isLocationLong;tables.glyf.data=glyf;tables.loca.data=loca;if(isLocationLong!==!!isGlyphLocationsLong){tables.head.data[50]=0;tables.head.data[51]=isLocationLong?1:0;}var metrics=tables.hmtx.data;for(var i=0;i<numGlyphs;i++){var j=4*i;var advanceWidth=Math.round(scaleFactors[i]*int16(metrics[j],metrics[j+1]));metrics[j]=advanceWidth>>8&0xff;metrics[j+1]=advanceWidth&0xff;var lsb=Math.round(scaleFactors[i]*signedInt16(metrics[j+2],metrics[j+3]));writeSignedInt16(metrics,j+2,lsb);}}var numGlyphsOut=numGlyphs+1;var dupFirstEntry=true;if(numGlyphsOut>0xffff){dupFirstEntry=false;numGlyphsOut=numGlyphs;warn("Not enough space in glyfs to duplicate first glyph.");}var maxFunctionDefs=0;var maxSizeOfInstructions=0;if(version>=0x00010000&&tables.maxp.length>=32){font.pos+=8;var maxZones=font.getUint16();if(maxZones>2){tables.maxp.data[14]=0;tables.maxp.data[15]=2;}font.pos+=4;maxFunctionDefs=font.getUint16();font.pos+=4;maxSizeOfInstructions=font.getUint16();}tables.maxp.data[4]=numGlyphsOut>>8;tables.maxp.data[5]=numGlyphsOut&255;var hintsValid=sanitizeTTPrograms(tables.fpgm,tables.prep,tables["cvt "],maxFunctionDefs);if(!hintsValid){delete tables.fpgm;delete tables.prep;delete tables["cvt "];}sanitizeMetrics(font,tables.hhea,tables.hmtx,tables.head,numGlyphsOut,dupFirstEntry);if(!tables.head){throw new FormatError('Required "head" table is not found');}sanitizeHead(tables.head,numGlyphs,isTrueType?tables.loca.length:0);var missingGlyphs=Object.create(null);if(isTrueType){var _isGlyphLocationsLong=int16(tables.head.data[50],tables.head.data[51]);var glyphsInfo=sanitizeGlyphLocations(tables.loca,tables.glyf,numGlyphs,_isGlyphLocationsLong,hintsValid,dupFirstEntry,maxSizeOfInstructions);missingGlyphs=glyphsInfo.missingGlyphs;if(version>=0x00010000&&tables.maxp.length>=32){tables.maxp.data[26]=glyphsInfo.maxSizeOfInstructions>>8;tables.maxp.data[27]=glyphsInfo.maxSizeOfInstructions&255;}}if(!tables.hhea){throw new FormatError('Required "hhea" table is not found');}if(tables.hhea.data[10]===0&&tables.hhea.data[11]===0){tables.hhea.data[10]=0xff;tables.hhea.data[11]=0xff;}var metricsOverride={unitsPerEm:int16(tables.head.data[18],tables.head.data[19]),yMax:signedInt16(tables.head.data[42],tables.head.data[43]),yMin:signedInt16(tables.head.data[38],tables.head.data[39]),ascent:signedInt16(tables.hhea.data[4],tables.hhea.data[5]),descent:signedInt16(tables.hhea.data[6],tables.hhea.data[7]),lineGap:signedInt16(tables.hhea.data[8],tables.hhea.data[9])};this.ascent=metricsOverride.ascent/metricsOverride.unitsPerEm;this.descent=metricsOverride.descent/metricsOverride.unitsPerEm;this.lineGap=metricsOverride.lineGap/metricsOverride.unitsPerEm;if((_this$cssFontInfo=this.cssFontInfo)!==null&&_this$cssFontInfo!==void 0&&_this$cssFontInfo.lineHeight){this.lineHeight=this.cssFontInfo.metrics.lineHeight;this.lineGap=this.cssFontInfo.metrics.lineGap;}else{this.lineHeight=this.ascent-this.descent+this.lineGap;}if(tables.post){readPostScriptTable(tables.post,properties,numGlyphs);}tables.post={tag:"post",data:createPostTable(properties)};var charCodeToGlyphId=[];function hasGlyph(glyphId){return!missingGlyphs[glyphId];}if(properties.composite){var cidToGidMap=properties.cidToGidMap||[];var isCidToGidMapEmpty=cidToGidMap.length===0;properties.cMap.forEach(function(charCode,cid){if(typeof cid==="string"){cid=convertCidString(charCode,cid,true);}if(cid>0xffff){throw new FormatError("Max size of CID is 65,535");}var glyphId=-1;if(isCidToGidMapEmpty){glyphId=cid;}else if(cidToGidMap[cid]!==undefined){glyphId=cidToGidMap[cid];}if(glyphId>=0&&glyphId<numGlyphs&&hasGlyph(glyphId)){charCodeToGlyphId[charCode]=glyphId;}});}else{var cmapTable=readCmapTable(tables.cmap,font,this.isSymbolicFont,properties.hasEncoding);var cmapPlatformId=cmapTable.platformId;var cmapEncodingId=cmapTable.encodingId;var cmapMappings=cmapTable.mappings;var baseEncoding=[],forcePostTable=false;if(properties.hasEncoding&&(properties.baseEncodingName==="MacRomanEncoding"||properties.baseEncodingName==="WinAnsiEncoding")){baseEncoding=getEncoding(properties.baseEncodingName);}if(properties.hasEncoding&&!this.isSymbolicFont&&(cmapPlatformId===3&&cmapEncodingId===1||cmapPlatformId===1&&cmapEncodingId===0)){var glyphsUnicodeMap=getGlyphsUnicode();for(var charCode=0;charCode<256;charCode++){var glyphName=void 0;if(this.differences[charCode]!==undefined){glyphName=this.differences[charCode];}else if(baseEncoding.length&&baseEncoding[charCode]!==""){glyphName=baseEncoding[charCode];}else{glyphName=StandardEncoding[charCode];}if(!glyphName){continue;}var standardGlyphName=recoverGlyphName(glyphName,glyphsUnicodeMap);var unicodeOrCharCode=void 0;if(cmapPlatformId===3&&cmapEncodingId===1){unicodeOrCharCode=glyphsUnicodeMap[standardGlyphName];}else if(cmapPlatformId===1&&cmapEncodingId===0){unicodeOrCharCode=MacRomanEncoding.indexOf(standardGlyphName);}if(unicodeOrCharCode===undefined){if(!properties.glyphNames&&properties.hasIncludedToUnicodeMap&&!(this.toUnicode instanceof IdentityToUnicodeMap)){var unicode=this.toUnicode.get(charCode);if(unicode){unicodeOrCharCode=unicode.codePointAt(0);}}if(unicodeOrCharCode===undefined){continue;}}var _iterator6=fonts_createForOfIteratorHelper(cmapMappings),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var mapping=_step6.value;if(mapping.charCode!==unicodeOrCharCode){continue;}charCodeToGlyphId[charCode]=mapping.glyphId;break;}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}}else if(cmapPlatformId===0){var _iterator7=fonts_createForOfIteratorHelper(cmapMappings),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _mapping=_step7.value;charCodeToGlyphId[_mapping.charCode]=_mapping.glyphId;}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}forcePostTable=true;}else{var _iterator8=fonts_createForOfIteratorHelper(cmapMappings),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _mapping2=_step8.value;var _charCode3=_mapping2.charCode;if(cmapPlatformId===3&&_charCode3>=0xf000&&_charCode3<=0xf0ff){_charCode3&=0xff;}charCodeToGlyphId[_charCode3]=_mapping2.glyphId;}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}if(properties.glyphNames&&(baseEncoding.length||this.differences.length)){for(var _i5=0;_i5<256;++_i5){if(!forcePostTable&&charCodeToGlyphId[_i5]!==undefined){continue;}var _glyphName=this.differences[_i5]||baseEncoding[_i5];if(!_glyphName){continue;}var glyphId=properties.glyphNames.indexOf(_glyphName);if(glyphId>0&&hasGlyph(glyphId)){charCodeToGlyphId[_i5]=glyphId;}}}}if(charCodeToGlyphId.length===0){charCodeToGlyphId[0]=0;}var glyphZeroId=numGlyphsOut-1;if(!dupFirstEntry){glyphZeroId=0;}if(!properties.cssFontInfo){var newMapping=adjustMapping(charCodeToGlyphId,hasGlyph,glyphZeroId,this.toUnicode);this.toFontChar=newMapping.toFontChar;tables.cmap={tag:"cmap",data:createCmapTable(newMapping.charCodeToGlyphId,newMapping.toUnicodeExtraMap,numGlyphsOut)};if(!tables["OS/2"]||!validateOS2Table(tables["OS/2"],font)){tables["OS/2"]={tag:"OS/2",data:createOS2Table(properties,newMapping.charCodeToGlyphId,metricsOverride)};}}if(!isTrueType){try{cffFile=new Stream(tables["CFF "].data);var parser=new CFFParser(cffFile,properties,SEAC_ANALYSIS_ENABLED);cff=parser.parse();cff.duplicateFirstGlyph();var compiler=new CFFCompiler(cff);tables["CFF "].data=compiler.compile();}catch(_unused){warn("Failed to compile font "+properties.loadedName);}}if(!tables.name){tables.name={tag:"name",data:createNameTable(this.name)};}else{var _readNameTable3=readNameTable(tables.name),_readNameTable4=fonts_slicedToArray(_readNameTable3,2),namePrototype=_readNameTable4[0],nameRecords=_readNameTable4[1];tables.name.data=createNameTable(name,namePrototype);this.psName=namePrototype[0][6]||null;if(!properties.composite){adjustTrueTypeToUnicode(properties,this.isSymbolicFont,nameRecords);}}var builder=new OpenTypeFileBuilder(header.version);for(var tableTag in tables){builder.addTable(tableTag,tables[tableTag].data);}return builder.toArray();}},{key:"convert",value:function convert(fontName,font,properties){properties.fixedPitch=false;if(properties.builtInEncoding){adjustType1ToUnicode(properties,properties.builtInEncoding);}var glyphZeroId=1;if(font instanceof CFFFont){glyphZeroId=font.numGlyphs-1;}var mapping=font.getGlyphMapping(properties);var newMapping=null;var newCharCodeToGlyphId=mapping;var toUnicodeExtraMap=null;if(!properties.cssFontInfo){newMapping=adjustMapping(mapping,font.hasGlyphId.bind(font),glyphZeroId,this.toUnicode);this.toFontChar=newMapping.toFontChar;newCharCodeToGlyphId=newMapping.charCodeToGlyphId;toUnicodeExtraMap=newMapping.toUnicodeExtraMap;}var numGlyphs=font.numGlyphs;function getCharCodes(charCodeToGlyphId,glyphId){var charCodes=null;for(var charCode in charCodeToGlyphId){if(glyphId===charCodeToGlyphId[charCode]){(charCodes||(charCodes=[])).push(charCode|0);}}return charCodes;}function createCharCode(charCodeToGlyphId,glyphId){for(var charCode in charCodeToGlyphId){if(glyphId===charCodeToGlyphId[charCode]){return charCode|0;}}newMapping.charCodeToGlyphId[newMapping.nextAvailableFontCharCode]=glyphId;return newMapping.nextAvailableFontCharCode++;}var seacs=font.seacs;if(newMapping&&SEAC_ANALYSIS_ENABLED&&seacs!==null&&seacs!==void 0&&seacs.length){var matrix=properties.fontMatrix||FONT_IDENTITY_MATRIX;var charset=font.getCharset();var seacMap=Object.create(null);for(var glyphId in seacs){glyphId|=0;var seac=seacs[glyphId];var baseGlyphName=StandardEncoding[seac[2]];var accentGlyphName=StandardEncoding[seac[3]];var baseGlyphId=charset.indexOf(baseGlyphName);var accentGlyphId=charset.indexOf(accentGlyphName);if(baseGlyphId<0||accentGlyphId<0){continue;}var accentOffset={x:seac[0]*matrix[0]+seac[1]*matrix[2]+matrix[4],y:seac[0]*matrix[1]+seac[1]*matrix[3]+matrix[5]};var charCodes=getCharCodes(mapping,glyphId);if(!charCodes){continue;}var _iterator9=fonts_createForOfIteratorHelper(charCodes),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var charCode=_step9.value;var charCodeToGlyphId=newMapping.charCodeToGlyphId;var baseFontCharCode=createCharCode(charCodeToGlyphId,baseGlyphId);var accentFontCharCode=createCharCode(charCodeToGlyphId,accentGlyphId);seacMap[charCode]={baseFontCharCode:baseFontCharCode,accentFontCharCode:accentFontCharCode,accentOffset:accentOffset};}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}properties.seacMap=seacMap;}var unitsPerEm=1/(properties.fontMatrix||FONT_IDENTITY_MATRIX)[0];var builder=new OpenTypeFileBuilder("\x4F\x54\x54\x4F");builder.addTable("CFF ",font.data);builder.addTable("OS/2",createOS2Table(properties,newCharCodeToGlyphId));builder.addTable("cmap",createCmapTable(newCharCodeToGlyphId,toUnicodeExtraMap,numGlyphs));builder.addTable("head","\x00\x01\x00\x00"+"\x00\x00\x10\x00"+"\x00\x00\x00\x00"+"\x5F\x0F\x3C\xF5"+"\x00\x00"+safeString16(unitsPerEm)+"\x00\x00\x00\x00\x9e\x0b\x7e\x27"+"\x00\x00\x00\x00\x9e\x0b\x7e\x27"+"\x00\x00"+safeString16(properties.descent)+"\x0F\xFF"+safeString16(properties.ascent)+string16(properties.italicAngle?2:0)+"\x00\x11"+"\x00\x00"+"\x00\x00"+"\x00\x00");builder.addTable("hhea","\x00\x01\x00\x00"+safeString16(properties.ascent)+safeString16(properties.descent)+"\x00\x00"+"\xFF\xFF"+"\x00\x00"+"\x00\x00"+"\x00\x00"+safeString16(properties.capHeight)+safeString16(Math.tan(properties.italicAngle)*properties.xHeight)+"\x00\x00"+"\x00\x00"+"\x00\x00"+"\x00\x00"+"\x00\x00"+"\x00\x00"+string16(numGlyphs));builder.addTable("hmtx",function fontFieldsHmtx(){var charstrings=font.charstrings;var cffWidths=font.cff?font.cff.widths:null;var hmtx="\x00\x00\x00\x00";for(var i=1,ii=numGlyphs;i<ii;i++){var width=0;if(charstrings){var charstring=charstrings[i-1];width="width"in charstring?charstring.width:0;}else if(cffWidths){width=Math.ceil(cffWidths[i]||0);}hmtx+=string16(width)+string16(0);}return hmtx;}());builder.addTable("maxp","\x00\x00\x50\x00"+string16(numGlyphs));builder.addTable("name",createNameTable(fontName));builder.addTable("post",createPostTable(properties));return builder.toArray();}},{key:"spaceWidth",get:function get(){var possibleSpaceReplacements=["space","minus","one","i","I"];var width;for(var _i6=0,_possibleSpaceReplace=possibleSpaceReplacements;_i6<_possibleSpaceReplace.length;_i6++){var glyphName=_possibleSpaceReplace[_i6];if(glyphName in this.widths){width=this.widths[glyphName];break;}var glyphsUnicodeMap=getGlyphsUnicode();var glyphUnicode=glyphsUnicodeMap[glyphName];var charcode=0;if(this.composite&&this.cMap.contains(glyphUnicode)){charcode=this.cMap.lookup(glyphUnicode);if(typeof charcode==="string"){charcode=convertCidString(glyphUnicode,charcode);}}if(!charcode&&this.toUnicode){charcode=this.toUnicode.charCodeOf(glyphUnicode);}if(charcode<=0){charcode=glyphUnicode;}width=this.widths[charcode];if(width){break;}}return shadow(this,"spaceWidth",width||this.defaultWidth);}},{key:"_charToGlyph",value:function _charToGlyph(charcode){var _glyph,_this$cMap,_this$vmetrics,_this$seacMap;var isSpace=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var glyph=this._glyphCache[charcode];if(((_glyph=glyph)===null||_glyph===void 0?void 0:_glyph.isSpace)===isSpace){return glyph;}var fontCharCode,width,operatorListId;var widthCode=charcode;if((_this$cMap=this.cMap)!==null&&_this$cMap!==void 0&&_this$cMap.contains(charcode)){widthCode=this.cMap.lookup(charcode);if(typeof widthCode==="string"){widthCode=convertCidString(charcode,widthCode);}}width=this.widths[widthCode];if(typeof width!=="number"){width=this.defaultWidth;}var vmetric=(_this$vmetrics=this.vmetrics)===null||_this$vmetrics===void 0?void 0:_this$vmetrics[widthCode];var unicode=this.toUnicode.get(charcode)||charcode;if(typeof unicode==="number"){unicode=String.fromCharCode(unicode);}var isInFont=this.toFontChar[charcode]!==undefined;fontCharCode=this.toFontChar[charcode]||charcode;if(this.missingFile){var glyphName=this.differences[charcode]||this.defaultEncoding[charcode];if((glyphName===".notdef"||glyphName==="")&&this.type==="Type1"){fontCharCode=0x20;}fontCharCode=mapSpecialUnicodeValues(fontCharCode);}if(this.isType3Font){operatorListId=fontCharCode;}var accent=null;if((_this$seacMap=this.seacMap)!==null&&_this$seacMap!==void 0&&_this$seacMap[charcode]){isInFont=true;var seac=this.seacMap[charcode];fontCharCode=seac.baseFontCharCode;accent={fontChar:String.fromCodePoint(seac.accentFontCharCode),offset:seac.accentOffset};}var fontChar="";if(typeof fontCharCode==="number"){if(fontCharCode<=0x10ffff){fontChar=String.fromCodePoint(fontCharCode);}else{warn("charToGlyph - invalid fontCharCode: ".concat(fontCharCode));}}glyph=new fonts_Glyph(charcode,fontChar,unicode,accent,width,vmetric,operatorListId,isSpace,isInFont);return this._glyphCache[charcode]=glyph;}},{key:"charsToGlyphs",value:function charsToGlyphs(chars){var glyphs=this._charsCache[chars];if(glyphs){return glyphs;}glyphs=[];if(this.cMap){var c=Object.create(null),ii=chars.length;var i=0;while(i<ii){this.cMap.readCharCode(chars,i,c);var charcode=c.charcode,length=c.length;i+=length;var glyph=this._charToGlyph(charcode,length===1&&chars.charCodeAt(i-1)===0x20);glyphs.push(glyph);}}else{for(var _i7=0,_ii=chars.length;_i7<_ii;++_i7){var _charcode=chars.charCodeAt(_i7);var _glyph2=this._charToGlyph(_charcode,_charcode===0x20);glyphs.push(_glyph2);}}return this._charsCache[chars]=glyphs;}},{key:"getCharPositions",value:function getCharPositions(chars){var positions=[];if(this.cMap){var c=Object.create(null);var i=0;while(i<chars.length){this.cMap.readCharCode(chars,i,c);var length=c.length;positions.push([i,i+length]);i+=length;}}else{for(var _i8=0,ii=chars.length;_i8<ii;++_i8){positions.push([_i8,_i8+1]);}}return positions;}},{key:"glyphCacheValues",get:function get(){return Object.values(this._glyphCache);}},{key:"encodeString",value:function encodeString(str){var _this2=this;var buffers=[];var currentBuf=[];var hasCurrentBufErrors=function hasCurrentBufErrors(){return buffers.length%2===1;};var getCharCode=this.toUnicode instanceof IdentityToUnicodeMap?function(unicode){return _this2.toUnicode.charCodeOf(unicode);}:function(unicode){return _this2.toUnicode.charCodeOf(String.fromCodePoint(unicode));};for(var i=0,ii=str.length;i<ii;i++){var unicode=str.codePointAt(i);if(unicode>0xd7ff&&(unicode<0xe000||unicode>0xfffd)){i++;}if(this.toUnicode){var charCode=getCharCode(unicode);if(charCode!==-1){if(hasCurrentBufErrors()){buffers.push(currentBuf.join(""));currentBuf.length=0;}var charCodeLength=this.cMap?this.cMap.getCharCodeLength(charCode):1;for(var j=charCodeLength-1;j>=0;j--){currentBuf.push(String.fromCharCode(charCode>>8*j&0xff));}continue;}}if(!hasCurrentBufErrors()){buffers.push(currentBuf.join(""));currentBuf.length=0;}currentBuf.push(String.fromCodePoint(unicode));}buffers.push(currentBuf.join(""));return buffers;}}]);return Font;}();var ErrorFont=/*#__PURE__*/function(){function ErrorFont(error){fonts_classCallCheck(this,ErrorFont);this.error=error;this.loadedName="g_font_error";this.missingFile=true;}fonts_createClass(ErrorFont,[{key:"charsToGlyphs",value:function charsToGlyphs(){return[];}},{key:"encodeString",value:function encodeString(chars){return[chars];}},{key:"exportData",value:function exportData(){var extraProperties=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return{error:this.error};}}]);return ErrorFont;}();
;// CONCATENATED MODULE: ./src/core/pattern.js
function pattern_slicedToArray(arr,i){return pattern_arrayWithHoles(arr)||pattern_iterableToArrayLimit(arr,i)||pattern_unsupportedIterableToArray(arr,i)||pattern_nonIterableRest();}function pattern_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function pattern_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return pattern_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pattern_arrayLikeToArray(o,minLen);}function pattern_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function pattern_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function pattern_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function pattern_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)pattern_setPrototypeOf(subClass,superClass);}function pattern_setPrototypeOf(o,p){pattern_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return pattern_setPrototypeOf(o,p);}function pattern_createSuper(Derived){var hasNativeReflectConstruct=pattern_isNativeReflectConstruct();return function _createSuperInternal(){var Super=pattern_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=pattern_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return pattern_possibleConstructorReturn(this,result);};}function pattern_possibleConstructorReturn(self,call){if(call&&(pattern_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return pattern_assertThisInitialized(self);}function pattern_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function pattern_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function pattern_getPrototypeOf(o){pattern_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return pattern_getPrototypeOf(o);}function pattern_defineProperty(obj,key,value){key=pattern_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function pattern_typeof(o){"@babel/helpers - typeof";return pattern_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},pattern_typeof(o);}function pattern_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function pattern_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,pattern_toPropertyKey(descriptor.key),descriptor);}}function pattern_createClass(Constructor,protoProps,staticProps){if(protoProps)pattern_defineProperties(Constructor.prototype,protoProps);if(staticProps)pattern_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function pattern_toPropertyKey(arg){var key=pattern_toPrimitive(arg,"string");return pattern_typeof(key)==="symbol"?key:String(key);}function pattern_toPrimitive(input,hint){if(pattern_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(pattern_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var ShadingType={FUNCTION_BASED:1,AXIAL:2,RADIAL:3,FREE_FORM_MESH:4,LATTICE_FORM_MESH:5,COONS_PATCH_MESH:6,TENSOR_PATCH_MESH:7};var Pattern=/*#__PURE__*/function(){function Pattern(){pattern_classCallCheck(this,Pattern);unreachable("Cannot initialize Pattern.");}pattern_createClass(Pattern,null,[{key:"parseShading",value:function parseShading(shading,xref,res,pdfFunctionFactory,localColorSpaceCache){var dict=shading instanceof BaseStream?shading.dict:shading;var type=dict.get("ShadingType");try{switch(type){case ShadingType.AXIAL:case ShadingType.RADIAL:return new RadialAxialShading(dict,xref,res,pdfFunctionFactory,localColorSpaceCache);case ShadingType.FREE_FORM_MESH:case ShadingType.LATTICE_FORM_MESH:case ShadingType.COONS_PATCH_MESH:case ShadingType.TENSOR_PATCH_MESH:return new MeshShading(shading,xref,res,pdfFunctionFactory,localColorSpaceCache);default:throw new FormatError("Unsupported ShadingType: "+type);}}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn(ex);return new DummyShading();}}}]);return Pattern;}();var BaseShading=/*#__PURE__*/function(){function BaseShading(){pattern_classCallCheck(this,BaseShading);if(this.constructor===BaseShading){unreachable("Cannot initialize BaseShading.");}}pattern_createClass(BaseShading,[{key:"getIR",value:function getIR(){unreachable("Abstract method `getIR` called.");}}]);return BaseShading;}();pattern_defineProperty(BaseShading,"SMALL_NUMBER",1e-6);var RadialAxialShading=/*#__PURE__*/function(_BaseShading){pattern_inherits(RadialAxialShading,_BaseShading);var _super=pattern_createSuper(RadialAxialShading);function RadialAxialShading(dict,xref,resources,pdfFunctionFactory,localColorSpaceCache){var _this;pattern_classCallCheck(this,RadialAxialShading);_this=_super.call(this);_this.coordsArr=dict.getArray("Coords");_this.shadingType=dict.get("ShadingType");var cs=ColorSpace.parse({cs:dict.getRaw("CS")||dict.getRaw("ColorSpace"),xref:xref,resources:resources,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});var bbox=dict.getArray("BBox");_this.bbox=Array.isArray(bbox)&&bbox.length===4?Util.normalizeRect(bbox):null;var t0=0.0,t1=1.0;if(dict.has("Domain")){var domainArr=dict.getArray("Domain");t0=domainArr[0];t1=domainArr[1];}var extendStart=false,extendEnd=false;if(dict.has("Extend")){var extendArr=dict.getArray("Extend");extendStart=extendArr[0];extendEnd=extendArr[1];}if(_this.shadingType===ShadingType.RADIAL&&(!extendStart||!extendEnd)){var _this$coordsArr=pattern_slicedToArray(_this.coordsArr,6),x1=_this$coordsArr[0],y1=_this$coordsArr[1],r1=_this$coordsArr[2],x2=_this$coordsArr[3],y2=_this$coordsArr[4],r2=_this$coordsArr[5];var distance=Math.hypot(x1-x2,y1-y2);if(r1<=r2+distance&&r2<=r1+distance){warn("Unsupported radial gradient.");}}_this.extendStart=extendStart;_this.extendEnd=extendEnd;var fnObj=dict.getRaw("Function");var fn=pdfFunctionFactory.createFromArray(fnObj);var NUMBER_OF_SAMPLES=840;var step=(t1-t0)/NUMBER_OF_SAMPLES;var colorStops=_this.colorStops=[];if(t0>=t1||step<=0){info("Bad shading domain.");return pattern_possibleConstructorReturn(_this);}var color=new Float32Array(cs.numComps),ratio=new Float32Array(1);var rgbColor;var iBase=0;ratio[0]=t0;fn(ratio,0,color,0);var rgbBase=cs.getRgb(color,0);var cssColorBase=Util.makeHexColor(rgbBase[0],rgbBase[1],rgbBase[2]);colorStops.push([0,cssColorBase]);var iPrev=1;ratio[0]=t0+step;fn(ratio,0,color,0);var rgbPrev=cs.getRgb(color,0);var maxSlopeR=rgbPrev[0]-rgbBase[0]+1;var maxSlopeG=rgbPrev[1]-rgbBase[1]+1;var maxSlopeB=rgbPrev[2]-rgbBase[2]+1;var minSlopeR=rgbPrev[0]-rgbBase[0]-1;var minSlopeG=rgbPrev[1]-rgbBase[1]-1;var minSlopeB=rgbPrev[2]-rgbBase[2]-1;for(var i=2;i<NUMBER_OF_SAMPLES;i++){ratio[0]=t0+i*step;fn(ratio,0,color,0);rgbColor=cs.getRgb(color,0);var run=i-iBase;maxSlopeR=Math.min(maxSlopeR,(rgbColor[0]-rgbBase[0]+1)/run);maxSlopeG=Math.min(maxSlopeG,(rgbColor[1]-rgbBase[1]+1)/run);maxSlopeB=Math.min(maxSlopeB,(rgbColor[2]-rgbBase[2]+1)/run);minSlopeR=Math.max(minSlopeR,(rgbColor[0]-rgbBase[0]-1)/run);minSlopeG=Math.max(minSlopeG,(rgbColor[1]-rgbBase[1]-1)/run);minSlopeB=Math.max(minSlopeB,(rgbColor[2]-rgbBase[2]-1)/run);var slopesExist=minSlopeR<=maxSlopeR&&minSlopeG<=maxSlopeG&&minSlopeB<=maxSlopeB;if(!slopesExist){var _cssColor=Util.makeHexColor(rgbPrev[0],rgbPrev[1],rgbPrev[2]);colorStops.push([iPrev/NUMBER_OF_SAMPLES,_cssColor]);maxSlopeR=rgbColor[0]-rgbPrev[0]+1;maxSlopeG=rgbColor[1]-rgbPrev[1]+1;maxSlopeB=rgbColor[2]-rgbPrev[2]+1;minSlopeR=rgbColor[0]-rgbPrev[0]-1;minSlopeG=rgbColor[1]-rgbPrev[1]-1;minSlopeB=rgbColor[2]-rgbPrev[2]-1;iBase=iPrev;rgbBase=rgbPrev;}iPrev=i;rgbPrev=rgbColor;}var cssColor=Util.makeHexColor(rgbPrev[0],rgbPrev[1],rgbPrev[2]);colorStops.push([1,cssColor]);var background="transparent";if(dict.has("Background")){rgbColor=cs.getRgb(dict.get("Background"),0);background=Util.makeHexColor(rgbColor[0],rgbColor[1],rgbColor[2]);}if(!extendStart){colorStops.unshift([0,background]);colorStops[1][0]+=BaseShading.SMALL_NUMBER;}if(!extendEnd){colorStops.at(-1)[0]-=BaseShading.SMALL_NUMBER;colorStops.push([1,background]);}_this.colorStops=colorStops;return _this;}pattern_createClass(RadialAxialShading,[{key:"getIR",value:function getIR(){var coordsArr=this.coordsArr;var shadingType=this.shadingType;var type,p0,p1,r0,r1;if(shadingType===ShadingType.AXIAL){p0=[coordsArr[0],coordsArr[1]];p1=[coordsArr[2],coordsArr[3]];r0=null;r1=null;type="axial";}else if(shadingType===ShadingType.RADIAL){p0=[coordsArr[0],coordsArr[1]];p1=[coordsArr[3],coordsArr[4]];r0=coordsArr[2];r1=coordsArr[5];type="radial";}else{unreachable("getPattern type unknown: ".concat(shadingType));}return["RadialAxial",type,this.bbox,this.colorStops,p0,p1,r0,r1];}}]);return RadialAxialShading;}(BaseShading);var MeshStreamReader=/*#__PURE__*/function(){function MeshStreamReader(stream,context){pattern_classCallCheck(this,MeshStreamReader);this.stream=stream;this.context=context;this.buffer=0;this.bufferLength=0;var numComps=context.numComps;this.tmpCompsBuf=new Float32Array(numComps);var csNumComps=context.colorSpace.numComps;this.tmpCsCompsBuf=context.colorFn?new Float32Array(csNumComps):this.tmpCompsBuf;}pattern_createClass(MeshStreamReader,[{key:"hasData",get:function get(){if(this.stream.end){return this.stream.pos<this.stream.end;}if(this.bufferLength>0){return true;}var nextByte=this.stream.getByte();if(nextByte<0){return false;}this.buffer=nextByte;this.bufferLength=8;return true;}},{key:"readBits",value:function readBits(n){var buffer=this.buffer;var bufferLength=this.bufferLength;if(n===32){if(bufferLength===0){return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;}buffer=buffer<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();var nextByte=this.stream.getByte();this.buffer=nextByte&(1<<bufferLength)-1;return(buffer<<8-bufferLength|(nextByte&0xff)>>bufferLength)>>>0;}if(n===8&&bufferLength===0){return this.stream.getByte();}while(bufferLength<n){buffer=buffer<<8|this.stream.getByte();bufferLength+=8;}bufferLength-=n;this.bufferLength=bufferLength;this.buffer=buffer&(1<<bufferLength)-1;return buffer>>bufferLength;}},{key:"align",value:function align(){this.buffer=0;this.bufferLength=0;}},{key:"readFlag",value:function readFlag(){return this.readBits(this.context.bitsPerFlag);}},{key:"readCoordinate",value:function readCoordinate(){var bitsPerCoordinate=this.context.bitsPerCoordinate;var xi=this.readBits(bitsPerCoordinate);var yi=this.readBits(bitsPerCoordinate);var decode=this.context.decode;var scale=bitsPerCoordinate<32?1/((1<<bitsPerCoordinate)-1):2.3283064365386963e-10;return[xi*scale*(decode[1]-decode[0])+decode[0],yi*scale*(decode[3]-decode[2])+decode[2]];}},{key:"readComponents",value:function readComponents(){var numComps=this.context.numComps;var bitsPerComponent=this.context.bitsPerComponent;var scale=bitsPerComponent<32?1/((1<<bitsPerComponent)-1):2.3283064365386963e-10;var decode=this.context.decode;var components=this.tmpCompsBuf;for(var i=0,j=4;i<numComps;i++,j+=2){var ci=this.readBits(bitsPerComponent);components[i]=ci*scale*(decode[j+1]-decode[j])+decode[j];}var color=this.tmpCsCompsBuf;if(this.context.colorFn){this.context.colorFn(components,0,color,0);}return this.context.colorSpace.getRgb(color,0);}}]);return MeshStreamReader;}();var bCache=Object.create(null);function buildB(count){var lut=[];for(var i=0;i<=count;i++){var t=i/count,t_=1-t;lut.push(new Float32Array([Math.pow(t_,3),3*t*Math.pow(t_,2),3*Math.pow(t,2)*t_,Math.pow(t,3)]));}return lut;}function getB(count){var _bCache;return(_bCache=bCache)[count]||(_bCache[count]=buildB(count));}function clearPatternCaches(){bCache=Object.create(null);}var MeshShading=/*#__PURE__*/function(_BaseShading2){pattern_inherits(MeshShading,_BaseShading2);var _super2=pattern_createSuper(MeshShading);function MeshShading(stream,xref,resources,pdfFunctionFactory,localColorSpaceCache){var _this2;pattern_classCallCheck(this,MeshShading);_this2=_super2.call(this);if(!(stream instanceof BaseStream)){throw new FormatError("Mesh data is not a stream");}var dict=stream.dict;_this2.shadingType=dict.get("ShadingType");var bbox=dict.getArray("BBox");_this2.bbox=Array.isArray(bbox)&&bbox.length===4?Util.normalizeRect(bbox):null;var cs=ColorSpace.parse({cs:dict.getRaw("CS")||dict.getRaw("ColorSpace"),xref:xref,resources:resources,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});_this2.background=dict.has("Background")?cs.getRgb(dict.get("Background"),0):null;var fnObj=dict.getRaw("Function");var fn=fnObj?pdfFunctionFactory.createFromArray(fnObj):null;_this2.coords=[];_this2.colors=[];_this2.figures=[];var decodeContext={bitsPerCoordinate:dict.get("BitsPerCoordinate"),bitsPerComponent:dict.get("BitsPerComponent"),bitsPerFlag:dict.get("BitsPerFlag"),decode:dict.getArray("Decode"),colorFn:fn,colorSpace:cs,numComps:fn?1:cs.numComps};var reader=new MeshStreamReader(stream,decodeContext);var patchMesh=false;switch(_this2.shadingType){case ShadingType.FREE_FORM_MESH:_this2._decodeType4Shading(reader);break;case ShadingType.LATTICE_FORM_MESH:var verticesPerRow=dict.get("VerticesPerRow")|0;if(verticesPerRow<2){throw new FormatError("Invalid VerticesPerRow");}_this2._decodeType5Shading(reader,verticesPerRow);break;case ShadingType.COONS_PATCH_MESH:_this2._decodeType6Shading(reader);patchMesh=true;break;case ShadingType.TENSOR_PATCH_MESH:_this2._decodeType7Shading(reader);patchMesh=true;break;default:unreachable("Unsupported mesh type.");break;}if(patchMesh){_this2._updateBounds();for(var i=0,ii=_this2.figures.length;i<ii;i++){_this2._buildFigureFromPatch(i);}}_this2._updateBounds();_this2._packData();return _this2;}pattern_createClass(MeshShading,[{key:"_decodeType4Shading",value:function _decodeType4Shading(reader){var coords=this.coords;var colors=this.colors;var operators=[];var ps=[];var verticesLeft=0;while(reader.hasData){var f=reader.readFlag();var coord=reader.readCoordinate();var color=reader.readComponents();if(verticesLeft===0){if(!(0<=f&&f<=2)){throw new FormatError("Unknown type4 flag");}switch(f){case 0:verticesLeft=3;break;case 1:ps.push(ps.at(-2),ps.at(-1));verticesLeft=1;break;case 2:ps.push(ps.at(-3),ps.at(-1));verticesLeft=1;break;}operators.push(f);}ps.push(coords.length);coords.push(coord);colors.push(color);verticesLeft--;reader.align();}this.figures.push({type:"triangles",coords:new Int32Array(ps),colors:new Int32Array(ps)});}},{key:"_decodeType5Shading",value:function _decodeType5Shading(reader,verticesPerRow){var coords=this.coords;var colors=this.colors;var ps=[];while(reader.hasData){var coord=reader.readCoordinate();var color=reader.readComponents();ps.push(coords.length);coords.push(coord);colors.push(color);}this.figures.push({type:"lattice",coords:new Int32Array(ps),colors:new Int32Array(ps),verticesPerRow:verticesPerRow});}},{key:"_decodeType6Shading",value:function _decodeType6Shading(reader){var coords=this.coords;var colors=this.colors;var ps=new Int32Array(16);var cs=new Int32Array(4);while(reader.hasData){var f=reader.readFlag();if(!(0<=f&&f<=3)){throw new FormatError("Unknown type6 flag");}var pi=coords.length;for(var i=0,ii=f!==0?8:12;i<ii;i++){coords.push(reader.readCoordinate());}var ci=colors.length;for(var _i=0,_ii=f!==0?2:4;_i<_ii;_i++){colors.push(reader.readComponents());}var tmp1=void 0,tmp2=void 0,tmp3=void 0,tmp4=void 0;switch(f){case 0:ps[12]=pi+3;ps[13]=pi+4;ps[14]=pi+5;ps[15]=pi+6;ps[8]=pi+2;ps[11]=pi+7;ps[4]=pi+1;ps[7]=pi+8;ps[0]=pi;ps[1]=pi+11;ps[2]=pi+10;ps[3]=pi+9;cs[2]=ci+1;cs[3]=ci+2;cs[0]=ci;cs[1]=ci+3;break;case 1:tmp1=ps[12];tmp2=ps[13];tmp3=ps[14];tmp4=ps[15];ps[12]=tmp4;ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=tmp3;ps[11]=pi+3;ps[4]=tmp2;ps[7]=pi+4;ps[0]=tmp1;ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;tmp1=cs[2];tmp2=cs[3];cs[2]=tmp2;cs[3]=ci;cs[0]=tmp1;cs[1]=ci+1;break;case 2:tmp1=ps[15];tmp2=ps[11];ps[12]=ps[3];ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=ps[7];ps[11]=pi+3;ps[4]=tmp2;ps[7]=pi+4;ps[0]=tmp1;ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;tmp1=cs[3];cs[2]=cs[1];cs[3]=ci;cs[0]=tmp1;cs[1]=ci+1;break;case 3:ps[12]=ps[0];ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=ps[1];ps[11]=pi+3;ps[4]=ps[2];ps[7]=pi+4;ps[0]=ps[3];ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;cs[2]=cs[0];cs[3]=ci;cs[0]=cs[1];cs[1]=ci+1;break;}ps[5]=coords.length;coords.push([(-4*coords[ps[0]][0]-coords[ps[15]][0]+6*(coords[ps[4]][0]+coords[ps[1]][0])-2*(coords[ps[12]][0]+coords[ps[3]][0])+3*(coords[ps[13]][0]+coords[ps[7]][0]))/9,(-4*coords[ps[0]][1]-coords[ps[15]][1]+6*(coords[ps[4]][1]+coords[ps[1]][1])-2*(coords[ps[12]][1]+coords[ps[3]][1])+3*(coords[ps[13]][1]+coords[ps[7]][1]))/9]);ps[6]=coords.length;coords.push([(-4*coords[ps[3]][0]-coords[ps[12]][0]+6*(coords[ps[2]][0]+coords[ps[7]][0])-2*(coords[ps[0]][0]+coords[ps[15]][0])+3*(coords[ps[4]][0]+coords[ps[14]][0]))/9,(-4*coords[ps[3]][1]-coords[ps[12]][1]+6*(coords[ps[2]][1]+coords[ps[7]][1])-2*(coords[ps[0]][1]+coords[ps[15]][1])+3*(coords[ps[4]][1]+coords[ps[14]][1]))/9]);ps[9]=coords.length;coords.push([(-4*coords[ps[12]][0]-coords[ps[3]][0]+6*(coords[ps[8]][0]+coords[ps[13]][0])-2*(coords[ps[0]][0]+coords[ps[15]][0])+3*(coords[ps[11]][0]+coords[ps[1]][0]))/9,(-4*coords[ps[12]][1]-coords[ps[3]][1]+6*(coords[ps[8]][1]+coords[ps[13]][1])-2*(coords[ps[0]][1]+coords[ps[15]][1])+3*(coords[ps[11]][1]+coords[ps[1]][1]))/9]);ps[10]=coords.length;coords.push([(-4*coords[ps[15]][0]-coords[ps[0]][0]+6*(coords[ps[11]][0]+coords[ps[14]][0])-2*(coords[ps[12]][0]+coords[ps[3]][0])+3*(coords[ps[2]][0]+coords[ps[8]][0]))/9,(-4*coords[ps[15]][1]-coords[ps[0]][1]+6*(coords[ps[11]][1]+coords[ps[14]][1])-2*(coords[ps[12]][1]+coords[ps[3]][1])+3*(coords[ps[2]][1]+coords[ps[8]][1]))/9]);this.figures.push({type:"patch",coords:new Int32Array(ps),colors:new Int32Array(cs)});}}},{key:"_decodeType7Shading",value:function _decodeType7Shading(reader){var coords=this.coords;var colors=this.colors;var ps=new Int32Array(16);var cs=new Int32Array(4);while(reader.hasData){var f=reader.readFlag();if(!(0<=f&&f<=3)){throw new FormatError("Unknown type7 flag");}var pi=coords.length;for(var i=0,ii=f!==0?12:16;i<ii;i++){coords.push(reader.readCoordinate());}var ci=colors.length;for(var _i2=0,_ii2=f!==0?2:4;_i2<_ii2;_i2++){colors.push(reader.readComponents());}var tmp1=void 0,tmp2=void 0,tmp3=void 0,tmp4=void 0;switch(f){case 0:ps[12]=pi+3;ps[13]=pi+4;ps[14]=pi+5;ps[15]=pi+6;ps[8]=pi+2;ps[9]=pi+13;ps[10]=pi+14;ps[11]=pi+7;ps[4]=pi+1;ps[5]=pi+12;ps[6]=pi+15;ps[7]=pi+8;ps[0]=pi;ps[1]=pi+11;ps[2]=pi+10;ps[3]=pi+9;cs[2]=ci+1;cs[3]=ci+2;cs[0]=ci;cs[1]=ci+3;break;case 1:tmp1=ps[12];tmp2=ps[13];tmp3=ps[14];tmp4=ps[15];ps[12]=tmp4;ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=tmp3;ps[9]=pi+9;ps[10]=pi+10;ps[11]=pi+3;ps[4]=tmp2;ps[5]=pi+8;ps[6]=pi+11;ps[7]=pi+4;ps[0]=tmp1;ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;tmp1=cs[2];tmp2=cs[3];cs[2]=tmp2;cs[3]=ci;cs[0]=tmp1;cs[1]=ci+1;break;case 2:tmp1=ps[15];tmp2=ps[11];ps[12]=ps[3];ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=ps[7];ps[9]=pi+9;ps[10]=pi+10;ps[11]=pi+3;ps[4]=tmp2;ps[5]=pi+8;ps[6]=pi+11;ps[7]=pi+4;ps[0]=tmp1;ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;tmp1=cs[3];cs[2]=cs[1];cs[3]=ci;cs[0]=tmp1;cs[1]=ci+1;break;case 3:ps[12]=ps[0];ps[13]=pi+0;ps[14]=pi+1;ps[15]=pi+2;ps[8]=ps[1];ps[9]=pi+9;ps[10]=pi+10;ps[11]=pi+3;ps[4]=ps[2];ps[5]=pi+8;ps[6]=pi+11;ps[7]=pi+4;ps[0]=ps[3];ps[1]=pi+7;ps[2]=pi+6;ps[3]=pi+5;cs[2]=cs[0];cs[3]=ci;cs[0]=cs[1];cs[1]=ci+1;break;}this.figures.push({type:"patch",coords:new Int32Array(ps),colors:new Int32Array(cs)});}}},{key:"_buildFigureFromPatch",value:function _buildFigureFromPatch(index){var figure=this.figures[index];assert(figure.type==="patch","Unexpected patch mesh figure");var coords=this.coords,colors=this.colors;var pi=figure.coords;var ci=figure.colors;var figureMinX=Math.min(coords[pi[0]][0],coords[pi[3]][0],coords[pi[12]][0],coords[pi[15]][0]);var figureMinY=Math.min(coords[pi[0]][1],coords[pi[3]][1],coords[pi[12]][1],coords[pi[15]][1]);var figureMaxX=Math.max(coords[pi[0]][0],coords[pi[3]][0],coords[pi[12]][0],coords[pi[15]][0]);var figureMaxY=Math.max(coords[pi[0]][1],coords[pi[3]][1],coords[pi[12]][1],coords[pi[15]][1]);var splitXBy=Math.ceil((figureMaxX-figureMinX)*MeshShading.TRIANGLE_DENSITY/(this.bounds[2]-this.bounds[0]));splitXBy=Math.max(MeshShading.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(MeshShading.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,splitXBy));var splitYBy=Math.ceil((figureMaxY-figureMinY)*MeshShading.TRIANGLE_DENSITY/(this.bounds[3]-this.bounds[1]));splitYBy=Math.max(MeshShading.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(MeshShading.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,splitYBy));var verticesPerRow=splitXBy+1;var figureCoords=new Int32Array((splitYBy+1)*verticesPerRow);var figureColors=new Int32Array((splitYBy+1)*verticesPerRow);var k=0;var cl=new Uint8Array(3),cr=new Uint8Array(3);var c0=colors[ci[0]],c1=colors[ci[1]],c2=colors[ci[2]],c3=colors[ci[3]];var bRow=getB(splitYBy),bCol=getB(splitXBy);for(var row=0;row<=splitYBy;row++){cl[0]=(c0[0]*(splitYBy-row)+c2[0]*row)/splitYBy|0;cl[1]=(c0[1]*(splitYBy-row)+c2[1]*row)/splitYBy|0;cl[2]=(c0[2]*(splitYBy-row)+c2[2]*row)/splitYBy|0;cr[0]=(c1[0]*(splitYBy-row)+c3[0]*row)/splitYBy|0;cr[1]=(c1[1]*(splitYBy-row)+c3[1]*row)/splitYBy|0;cr[2]=(c1[2]*(splitYBy-row)+c3[2]*row)/splitYBy|0;for(var col=0;col<=splitXBy;col++,k++){if((row===0||row===splitYBy)&&(col===0||col===splitXBy)){continue;}var x=0,y=0;var q=0;for(var i=0;i<=3;i++){for(var j=0;j<=3;j++,q++){var m=bRow[row][i]*bCol[col][j];x+=coords[pi[q]][0]*m;y+=coords[pi[q]][1]*m;}}figureCoords[k]=coords.length;coords.push([x,y]);figureColors[k]=colors.length;var newColor=new Uint8Array(3);newColor[0]=(cl[0]*(splitXBy-col)+cr[0]*col)/splitXBy|0;newColor[1]=(cl[1]*(splitXBy-col)+cr[1]*col)/splitXBy|0;newColor[2]=(cl[2]*(splitXBy-col)+cr[2]*col)/splitXBy|0;colors.push(newColor);}}figureCoords[0]=pi[0];figureColors[0]=ci[0];figureCoords[splitXBy]=pi[3];figureColors[splitXBy]=ci[1];figureCoords[verticesPerRow*splitYBy]=pi[12];figureColors[verticesPerRow*splitYBy]=ci[2];figureCoords[verticesPerRow*splitYBy+splitXBy]=pi[15];figureColors[verticesPerRow*splitYBy+splitXBy]=ci[3];this.figures[index]={type:"lattice",coords:figureCoords,colors:figureColors,verticesPerRow:verticesPerRow};}},{key:"_updateBounds",value:function _updateBounds(){var minX=this.coords[0][0],minY=this.coords[0][1],maxX=minX,maxY=minY;for(var i=1,ii=this.coords.length;i<ii;i++){var x=this.coords[i][0],y=this.coords[i][1];minX=minX>x?x:minX;minY=minY>y?y:minY;maxX=maxX<x?x:maxX;maxY=maxY<y?y:maxY;}this.bounds=[minX,minY,maxX,maxY];}},{key:"_packData",value:function _packData(){var i,ii,j,jj;var coords=this.coords;var coordsPacked=new Float32Array(coords.length*2);for(i=0,j=0,ii=coords.length;i<ii;i++){var xy=coords[i];coordsPacked[j++]=xy[0];coordsPacked[j++]=xy[1];}this.coords=coordsPacked;var colors=this.colors;var colorsPacked=new Uint8Array(colors.length*3);for(i=0,j=0,ii=colors.length;i<ii;i++){var c=colors[i];colorsPacked[j++]=c[0];colorsPacked[j++]=c[1];colorsPacked[j++]=c[2];}this.colors=colorsPacked;var figures=this.figures;for(i=0,ii=figures.length;i<ii;i++){var figure=figures[i],ps=figure.coords,cs=figure.colors;for(j=0,jj=ps.length;j<jj;j++){ps[j]*=2;cs[j]*=3;}}}},{key:"getIR",value:function getIR(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.bbox,this.background];}}]);return MeshShading;}(BaseShading);pattern_defineProperty(MeshShading,"MIN_SPLIT_PATCH_CHUNKS_AMOUNT",3);pattern_defineProperty(MeshShading,"MAX_SPLIT_PATCH_CHUNKS_AMOUNT",20);pattern_defineProperty(MeshShading,"TRIANGLE_DENSITY",20);var DummyShading=/*#__PURE__*/function(_BaseShading3){pattern_inherits(DummyShading,_BaseShading3);var _super3=pattern_createSuper(DummyShading);function DummyShading(){pattern_classCallCheck(this,DummyShading);return _super3.apply(this,arguments);}pattern_createClass(DummyShading,[{key:"getIR",value:function getIR(){return["Dummy"];}}]);return DummyShading;}(BaseShading);function getTilingPatternIR(operatorList,dict,color){var matrix=dict.getArray("Matrix");var bbox=Util.normalizeRect(dict.getArray("BBox"));var xstep=dict.get("XStep");var ystep=dict.get("YStep");var paintType=dict.get("PaintType");var tilingType=dict.get("TilingType");if(bbox[2]-bbox[0]===0||bbox[3]-bbox[1]===0){throw new FormatError("Invalid getTilingPatternIR /BBox array: [".concat(bbox,"]."));}return["TilingPattern",color,operatorList,matrix,bbox,xstep,ystep,paintType,tilingType];}
;// CONCATENATED MODULE: ./src/core/calibri_factors.js
var CalibriBoldFactors=[1.3877,1,1,1,0.97801,0.92482,0.89552,0.91133,0.81988,0.97566,0.98152,0.93548,0.93548,1.2798,0.85284,0.92794,1,0.96134,1.54657,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.82845,0.82845,0.85284,0.85284,0.85284,0.75859,0.92138,0.83908,0.7762,0.73293,0.87289,0.73133,0.7514,0.81921,0.87356,0.95958,0.59526,0.75727,0.69225,1.04924,0.9121,0.86943,0.79795,0.88198,0.77958,0.70864,0.81055,0.90399,0.88653,0.96017,0.82577,0.77892,0.78257,0.97507,1.54657,0.97507,0.85284,0.89552,0.90176,0.88762,0.8785,0.75241,0.8785,0.90518,0.95015,0.77618,0.8785,0.88401,0.91916,0.86304,0.88401,0.91488,0.8785,0.8801,0.8785,0.8785,0.91343,0.7173,1.04106,0.8785,0.85075,0.95794,0.82616,0.85162,0.79492,0.88331,1.69808,0.88331,0.85284,0.97801,0.89552,0.91133,0.89552,0.91133,1.7801,0.89552,1.24487,1.13254,1.12401,0.96839,0.85284,0.68787,0.70645,0.85592,0.90747,1.01466,1.0088,0.90323,1,1.07463,1,0.91056,0.75806,1.19118,0.96839,0.78864,0.82845,0.84133,0.75859,0.83908,0.83908,0.83908,0.83908,0.83908,0.83908,0.77539,0.73293,0.73133,0.73133,0.73133,0.73133,0.95958,0.95958,0.95958,0.95958,0.88506,0.9121,0.86943,0.86943,0.86943,0.86943,0.86943,0.85284,0.87508,0.90399,0.90399,0.90399,0.90399,0.77892,0.79795,0.90807,0.88762,0.88762,0.88762,0.88762,0.88762,0.88762,0.8715,0.75241,0.90518,0.90518,0.90518,0.90518,0.88401,0.88401,0.88401,0.88401,0.8785,0.8785,0.8801,0.8801,0.8801,0.8801,0.8801,0.90747,0.89049,0.8785,0.8785,0.8785,0.8785,0.85162,0.8785,0.85162,0.83908,0.88762,0.83908,0.88762,0.83908,0.88762,0.73293,0.75241,0.73293,0.75241,0.73293,0.75241,0.73293,0.75241,0.87289,0.83016,0.88506,0.93125,0.73133,0.90518,0.73133,0.90518,0.73133,0.90518,0.73133,0.90518,0.73133,0.90518,0.81921,0.77618,0.81921,0.77618,0.81921,0.77618,1,1,0.87356,0.8785,0.91075,0.89608,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.76229,0.90167,0.59526,0.91916,1,1,0.86304,0.69225,0.88401,1,1,0.70424,0.79468,0.91926,0.88175,0.70823,0.94903,0.9121,0.8785,1,1,0.9121,0.8785,0.87802,0.88656,0.8785,0.86943,0.8801,0.86943,0.8801,0.86943,0.8801,0.87402,0.89291,0.77958,0.91343,1,1,0.77958,0.91343,0.70864,0.7173,0.70864,0.7173,0.70864,0.7173,0.70864,0.7173,1,1,0.81055,0.75841,0.81055,1.06452,0.90399,0.8785,0.90399,0.8785,0.90399,0.8785,0.90399,0.8785,0.90399,0.8785,0.90399,0.8785,0.96017,0.95794,0.77892,0.85162,0.77892,0.78257,0.79492,0.78257,0.79492,0.78257,0.79492,0.9297,0.56892,0.83908,0.88762,0.77539,0.8715,0.87508,0.89049,1,1,0.81055,1.04106,1.20528,1.20528,1,1.15543,0.70674,0.98387,0.94721,1.33431,1.45894,0.95161,1.06303,0.83908,0.80352,0.57184,0.6965,0.56289,0.82001,0.56029,0.81235,1.02988,0.83908,0.7762,0.68156,0.80367,0.73133,0.78257,0.87356,0.86943,0.95958,0.75727,0.89019,1.04924,0.9121,0.7648,0.86943,0.87356,0.79795,0.78275,0.81055,0.77892,0.9762,0.82577,0.99819,0.84896,0.95958,0.77892,0.96108,1.01407,0.89049,1.02988,0.94211,0.96108,0.8936,0.84021,0.87842,0.96399,0.79109,0.89049,1.00813,1.02988,0.86077,0.87445,0.92099,0.84723,0.86513,0.8801,0.75638,0.85714,0.78216,0.79586,0.87965,0.94211,0.97747,0.78287,0.97926,0.84971,1.02988,0.94211,0.8801,0.94211,0.84971,0.73133,1,1,1,1,1,1,1,1,1,1,1,1,0.90264,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.90518,1,1,1,1,1,1,1,1,1,1,1,1,0.90548,1,1,1,1,1,1,0.96017,0.95794,0.96017,0.95794,0.96017,0.95794,0.77892,0.85162,1,1,0.89552,0.90527,1,0.90363,0.92794,0.92794,0.92794,0.92794,0.87012,0.87012,0.87012,0.89552,0.89552,1.42259,0.71143,1.06152,1,1,1.03372,1.03372,0.97171,1.4956,2.2807,0.93835,0.83406,0.91133,0.84107,0.91133,1,1,1,0.72021,1,1.23108,0.83489,0.88525,0.88525,0.81499,0.90527,1.81055,0.90527,1.81055,1.31006,1.53711,0.94434,1.08696,1,0.95018,0.77192,0.85284,0.90747,1.17534,0.69825,0.9716,1.37077,0.90747,0.90747,0.85356,0.90747,0.90747,1.44947,0.85284,0.8941,0.8941,0.70572,0.8,0.70572,0.70572,0.70572,0.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.99862,0.99862,1,1,1,1,1,1.08004,0.91027,1,1,1,0.99862,1,1,1,1,1,1,1,1,1,1,1,1,0.90727,0.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var CalibriBoldMetrics={lineHeight:1.2207,lineGap:0.2207};var CalibriBoldItalicFactors=[1.3877,1,1,1,0.97801,0.92482,0.89552,0.91133,0.81988,0.97566,0.98152,0.93548,0.93548,1.2798,0.85284,0.92794,1,0.96134,1.56239,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.82845,0.82845,0.85284,0.85284,0.85284,0.75859,0.92138,0.83908,0.7762,0.71805,0.87289,0.73133,0.7514,0.81921,0.87356,0.95958,0.59526,0.75727,0.69225,1.04924,0.90872,0.85938,0.79795,0.87068,0.77958,0.69766,0.81055,0.90399,0.88653,0.96068,0.82577,0.77892,0.78257,0.97507,1.529,0.97507,0.85284,0.89552,0.90176,0.94908,0.86411,0.74012,0.86411,0.88323,0.95015,0.86411,0.86331,0.88401,0.91916,0.86304,0.88401,0.9039,0.86331,0.86331,0.86411,0.86411,0.90464,0.70852,1.04106,0.86331,0.84372,0.95794,0.82616,0.84548,0.79492,0.88331,1.69808,0.88331,0.85284,0.97801,0.89552,0.91133,0.89552,0.91133,1.7801,0.89552,1.24487,1.13254,1.19129,0.96839,0.85284,0.68787,0.70645,0.85592,0.90747,1.01466,1.0088,0.90323,1,1.07463,1,0.91056,0.75806,1.19118,0.96839,0.78864,0.82845,0.84133,0.75859,0.83908,0.83908,0.83908,0.83908,0.83908,0.83908,0.77539,0.71805,0.73133,0.73133,0.73133,0.73133,0.95958,0.95958,0.95958,0.95958,0.88506,0.90872,0.85938,0.85938,0.85938,0.85938,0.85938,0.85284,0.87068,0.90399,0.90399,0.90399,0.90399,0.77892,0.79795,0.90807,0.94908,0.94908,0.94908,0.94908,0.94908,0.94908,0.85887,0.74012,0.88323,0.88323,0.88323,0.88323,0.88401,0.88401,0.88401,0.88401,0.8785,0.86331,0.86331,0.86331,0.86331,0.86331,0.86331,0.90747,0.89049,0.86331,0.86331,0.86331,0.86331,0.84548,0.86411,0.84548,0.83908,0.94908,0.83908,0.94908,0.83908,0.94908,0.71805,0.74012,0.71805,0.74012,0.71805,0.74012,0.71805,0.74012,0.87289,0.79538,0.88506,0.92726,0.73133,0.88323,0.73133,0.88323,0.73133,0.88323,0.73133,0.88323,0.73133,0.88323,0.81921,0.86411,0.81921,0.86411,0.81921,0.86411,1,1,0.87356,0.86331,0.91075,0.8777,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.95958,0.88401,0.76467,0.90167,0.59526,0.91916,1,1,0.86304,0.69225,0.88401,1,1,0.70424,0.77312,0.91926,0.88175,0.70823,0.94903,0.90872,0.86331,1,1,0.90872,0.86331,0.86906,0.88116,0.86331,0.85938,0.86331,0.85938,0.86331,0.85938,0.86331,0.87402,0.86549,0.77958,0.90464,1,1,0.77958,0.90464,0.69766,0.70852,0.69766,0.70852,0.69766,0.70852,0.69766,0.70852,1,1,0.81055,0.75841,0.81055,1.06452,0.90399,0.86331,0.90399,0.86331,0.90399,0.86331,0.90399,0.86331,0.90399,0.86331,0.90399,0.86331,0.96068,0.95794,0.77892,0.84548,0.77892,0.78257,0.79492,0.78257,0.79492,0.78257,0.79492,0.9297,0.56892,0.83908,0.94908,0.77539,0.85887,0.87068,0.89049,1,1,0.81055,1.04106,1.20528,1.20528,1,1.15543,0.70088,0.98387,0.94721,1.33431,1.45894,0.95161,1.48387,0.83908,0.80352,0.57118,0.6965,0.56347,0.79179,0.55853,0.80346,1.02988,0.83908,0.7762,0.67174,0.86036,0.73133,0.78257,0.87356,0.86441,0.95958,0.75727,0.89019,1.04924,0.90872,0.74889,0.85938,0.87891,0.79795,0.7957,0.81055,0.77892,0.97447,0.82577,0.97466,0.87179,0.95958,0.77892,0.94252,0.95612,0.8753,1.02988,0.92733,0.94252,0.87411,0.84021,0.8728,0.95612,0.74081,0.8753,1.02189,1.02988,0.84814,0.87445,0.91822,0.84723,0.85668,0.86331,0.81344,0.87581,0.76422,0.82046,0.96057,0.92733,0.99375,0.78022,0.95452,0.86015,1.02988,0.92733,0.86331,0.92733,0.86015,0.73133,1,1,1,1,1,1,1,1,1,1,1,1,0.90631,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.88323,1,1,1,1,1,1,1,1,1,1,1,1,0.85174,1,1,1,1,1,1,0.96068,0.95794,0.96068,0.95794,0.96068,0.95794,0.77892,0.84548,1,1,0.89552,0.90527,1,0.90363,0.92794,0.92794,0.92794,0.89807,0.87012,0.87012,0.87012,0.89552,0.89552,1.42259,0.71094,1.06152,1,1,1.03372,1.03372,0.97171,1.4956,2.2807,0.92972,0.83406,0.91133,0.83326,0.91133,1,1,1,0.72021,1,1.23108,0.83489,0.88525,0.88525,0.81499,0.90616,1.81055,0.90527,1.81055,1.3107,1.53711,0.94434,1.08696,1,0.95018,0.77192,0.85284,0.90747,1.17534,0.69825,0.9716,1.37077,0.90747,0.90747,0.85356,0.90747,0.90747,1.44947,0.85284,0.8941,0.8941,0.70572,0.8,0.70572,0.70572,0.70572,0.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.99862,0.99862,1,1,1,1,1,1.08004,0.91027,1,1,1,0.99862,1,1,1,1,1,1,1,1,1,1,1,1,0.90727,0.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var CalibriBoldItalicMetrics={lineHeight:1.2207,lineGap:0.2207};var CalibriItalicFactors=[1.3877,1,1,1,1.17223,1.1293,0.89552,0.91133,0.80395,1.02269,1.15601,0.91056,0.91056,1.2798,0.85284,0.89807,1,0.90861,1.39543,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.96309,0.96309,0.85284,0.85284,0.85284,0.83319,0.88071,0.8675,0.81552,0.72346,0.85193,0.73206,0.7522,0.81105,0.86275,0.90685,0.6377,0.77892,0.75593,1.02638,0.89249,0.84118,0.77452,0.85374,0.75186,0.67789,0.79776,0.88844,0.85066,0.94309,0.77818,0.7306,0.76659,1.10369,1.38313,1.10369,1.06139,0.89552,0.8739,0.9245,0.9245,0.83203,0.9245,0.85865,1.09842,0.9245,0.9245,1.03297,1.07692,0.90918,1.03297,0.94959,0.9245,0.92274,0.9245,0.9245,1.02933,0.77832,1.20562,0.9245,0.8916,0.98986,0.86621,0.89453,0.79004,0.94152,1.77256,0.94152,0.85284,0.97801,0.89552,0.91133,0.89552,0.91133,1.91729,0.89552,1.17889,1.13254,1.16359,0.92098,0.85284,0.68787,0.71353,0.84737,0.90747,1.0088,1.0044,0.87683,1,1.09091,1,0.92229,0.739,1.15642,0.92098,0.76288,0.80504,0.80972,0.75859,0.8675,0.8675,0.8675,0.8675,0.8675,0.8675,0.76318,0.72346,0.73206,0.73206,0.73206,0.73206,0.90685,0.90685,0.90685,0.90685,0.86477,0.89249,0.84118,0.84118,0.84118,0.84118,0.84118,0.85284,0.84557,0.88844,0.88844,0.88844,0.88844,0.7306,0.77452,0.86331,0.9245,0.9245,0.9245,0.9245,0.9245,0.9245,0.84843,0.83203,0.85865,0.85865,0.85865,0.85865,0.82601,0.82601,0.82601,0.82601,0.94469,0.9245,0.92274,0.92274,0.92274,0.92274,0.92274,0.90747,0.86651,0.9245,0.9245,0.9245,0.9245,0.89453,0.9245,0.89453,0.8675,0.9245,0.8675,0.9245,0.8675,0.9245,0.72346,0.83203,0.72346,0.83203,0.72346,0.83203,0.72346,0.83203,0.85193,0.8875,0.86477,0.99034,0.73206,0.85865,0.73206,0.85865,0.73206,0.85865,0.73206,0.85865,0.73206,0.85865,0.81105,0.9245,0.81105,0.9245,0.81105,0.9245,1,1,0.86275,0.9245,0.90872,0.93591,0.90685,0.82601,0.90685,0.82601,0.90685,0.82601,0.90685,1.03297,0.90685,0.82601,0.77896,1.05611,0.6377,1.07692,1,1,0.90918,0.75593,1.03297,1,1,0.76032,0.9375,0.98156,0.93407,0.77261,1.11429,0.89249,0.9245,1,1,0.89249,0.9245,0.92534,0.86698,0.9245,0.84118,0.92274,0.84118,0.92274,0.84118,0.92274,0.8667,0.86291,0.75186,1.02933,1,1,0.75186,1.02933,0.67789,0.77832,0.67789,0.77832,0.67789,0.77832,0.67789,0.77832,1,1,0.79776,0.97655,0.79776,1.23023,0.88844,0.9245,0.88844,0.9245,0.88844,0.9245,0.88844,0.9245,0.88844,0.9245,0.88844,0.9245,0.94309,0.98986,0.7306,0.89453,0.7306,0.76659,0.79004,0.76659,0.79004,0.76659,0.79004,1.09231,0.54873,0.8675,0.9245,0.76318,0.84843,0.84557,0.86651,1,1,0.79776,1.20562,1.18622,1.18622,1,1.1437,0.67009,0.96334,0.93695,1.35191,1.40909,0.95161,1.48387,0.8675,0.90861,0.6192,0.7363,0.64824,0.82411,0.56321,0.85696,1.23516,0.8675,0.81552,0.7286,0.84134,0.73206,0.76659,0.86275,0.84369,0.90685,0.77892,0.85871,1.02638,0.89249,0.75828,0.84118,0.85984,0.77452,0.76466,0.79776,0.7306,0.90782,0.77818,0.903,0.87291,0.90685,0.7306,0.99058,1.03667,0.94635,1.23516,0.9849,0.99058,0.92393,0.8916,0.942,1.03667,0.75026,0.94635,1.0297,1.23516,0.90918,0.94048,0.98217,0.89746,0.84153,0.92274,0.82507,0.88832,0.84438,0.88178,1.03525,0.9849,1.00225,0.78086,0.97248,0.89404,1.23516,0.9849,0.92274,0.9849,0.89404,0.73206,1,1,1,1,1,1,1,1,1,1,1,1,0.89693,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.85865,1,1,1,1,1,1,1,1,1,1,1,1,0.90933,1,1,1,1,1,1,0.94309,0.98986,0.94309,0.98986,0.94309,0.98986,0.7306,0.89453,1,1,0.89552,0.90527,1,0.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,0.89552,0.89552,1.42259,0.68994,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,0.97858,0.82616,0.91133,0.83437,0.91133,1,1,1,0.70508,1,1.23108,0.79801,0.84426,0.84426,0.774,0.90572,1.81055,0.90749,1.81055,1.28809,1.55469,0.94434,1.07806,1,0.97094,0.7589,0.85284,0.90747,1.19658,0.69825,0.97622,1.33512,0.90747,0.90747,0.85284,0.90747,0.90747,1.44947,0.85284,0.8941,0.8941,0.70572,0.8,0.70572,0.70572,0.70572,0.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.99862,0.99862,1,1,1,1,1,1.0336,0.91027,1,1,1,0.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var CalibriItalicMetrics={lineHeight:1.2207,lineGap:0.2207};var CalibriRegularFactors=[1.3877,1,1,1,1.17223,1.1293,0.89552,0.91133,0.80395,1.02269,1.15601,0.91056,0.91056,1.2798,0.85284,0.89807,1,0.90861,1.39016,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.91133,0.96309,0.96309,0.85284,0.85284,0.85284,0.83319,0.88071,0.8675,0.81552,0.73834,0.85193,0.73206,0.7522,0.81105,0.86275,0.90685,0.6377,0.77892,0.75593,1.02638,0.89385,0.85122,0.77452,0.86503,0.75186,0.68887,0.79776,0.88844,0.85066,0.94258,0.77818,0.7306,0.76659,1.10369,1.39016,1.10369,1.06139,0.89552,0.8739,0.86128,0.94469,0.8457,0.94469,0.89464,1.09842,0.84636,0.94469,1.03297,1.07692,0.90918,1.03297,0.95897,0.94469,0.9482,0.94469,0.94469,1.04692,0.78223,1.20562,0.94469,0.90332,0.98986,0.86621,0.90527,0.79004,0.94152,1.77256,0.94152,0.85284,0.97801,0.89552,0.91133,0.89552,0.91133,1.91729,0.89552,1.17889,1.13254,1.08707,0.92098,0.85284,0.68787,0.71353,0.84737,0.90747,1.0088,1.0044,0.87683,1,1.09091,1,0.92229,0.739,1.15642,0.92098,0.76288,0.80504,0.80972,0.75859,0.8675,0.8675,0.8675,0.8675,0.8675,0.8675,0.76318,0.73834,0.73206,0.73206,0.73206,0.73206,0.90685,0.90685,0.90685,0.90685,0.86477,0.89385,0.85122,0.85122,0.85122,0.85122,0.85122,0.85284,0.85311,0.88844,0.88844,0.88844,0.88844,0.7306,0.77452,0.86331,0.86128,0.86128,0.86128,0.86128,0.86128,0.86128,0.8693,0.8457,0.89464,0.89464,0.89464,0.89464,0.82601,0.82601,0.82601,0.82601,0.94469,0.94469,0.9482,0.9482,0.9482,0.9482,0.9482,0.90747,0.86651,0.94469,0.94469,0.94469,0.94469,0.90527,0.94469,0.90527,0.8675,0.86128,0.8675,0.86128,0.8675,0.86128,0.73834,0.8457,0.73834,0.8457,0.73834,0.8457,0.73834,0.8457,0.85193,0.92454,0.86477,0.9921,0.73206,0.89464,0.73206,0.89464,0.73206,0.89464,0.73206,0.89464,0.73206,0.89464,0.81105,0.84636,0.81105,0.84636,0.81105,0.84636,1,1,0.86275,0.94469,0.90872,0.95786,0.90685,0.82601,0.90685,0.82601,0.90685,0.82601,0.90685,1.03297,0.90685,0.82601,0.77741,1.05611,0.6377,1.07692,1,1,0.90918,0.75593,1.03297,1,1,0.76032,0.90452,0.98156,1.11842,0.77261,1.11429,0.89385,0.94469,1,1,0.89385,0.94469,0.95877,0.86901,0.94469,0.85122,0.9482,0.85122,0.9482,0.85122,0.9482,0.8667,0.90016,0.75186,1.04692,1,1,0.75186,1.04692,0.68887,0.78223,0.68887,0.78223,0.68887,0.78223,0.68887,0.78223,1,1,0.79776,0.92188,0.79776,1.23023,0.88844,0.94469,0.88844,0.94469,0.88844,0.94469,0.88844,0.94469,0.88844,0.94469,0.88844,0.94469,0.94258,0.98986,0.7306,0.90527,0.7306,0.76659,0.79004,0.76659,0.79004,0.76659,0.79004,1.09231,0.54873,0.8675,0.86128,0.76318,0.8693,0.85311,0.86651,1,1,0.79776,1.20562,1.18622,1.18622,1,1.1437,0.67742,0.96334,0.93695,1.35191,1.40909,0.95161,1.48387,0.86686,0.90861,0.62267,0.74359,0.65649,0.85498,0.56963,0.88254,1.23516,0.8675,0.81552,0.75443,0.84503,0.73206,0.76659,0.86275,0.85122,0.90685,0.77892,0.85746,1.02638,0.89385,0.75657,0.85122,0.86275,0.77452,0.74171,0.79776,0.7306,0.95165,0.77818,0.89772,0.88831,0.90685,0.7306,0.98142,1.02191,0.96576,1.23516,0.99018,0.98142,0.9236,0.89258,0.94035,1.02191,0.78848,0.96576,0.9561,1.23516,0.90918,0.92578,0.95424,0.89746,0.83969,0.9482,0.80113,0.89442,0.85208,0.86155,0.98022,0.99018,1.00452,0.81209,0.99247,0.89181,1.23516,0.99018,0.9482,0.99018,0.89181,0.73206,1,1,1,1,1,1,1,1,1,1,1,1,0.88844,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.89464,1,1,1,1,1,1,1,1,1,1,1,1,0.96766,1,1,1,1,1,1,0.94258,0.98986,0.94258,0.98986,0.94258,0.98986,0.7306,0.90527,1,1,0.89552,0.90527,1,0.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,0.89552,0.89552,1.42259,0.69043,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,0.99331,0.82616,0.91133,0.84286,0.91133,1,1,1,0.70508,1,1.23108,0.79801,0.84426,0.84426,0.774,0.90527,1.81055,0.90527,1.81055,1.28809,1.55469,0.94434,1.07806,1,0.97094,0.7589,0.85284,0.90747,1.19658,0.69825,0.97622,1.33512,0.90747,0.90747,0.85356,0.90747,0.90747,1.44947,0.85284,0.8941,0.8941,0.70572,0.8,0.70572,0.70572,0.70572,0.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.99862,0.99862,1,1,1,1,1,1.0336,0.91027,1,1,1,0.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1.07185,0.99413,0.96334,1.08065,1,1,1,1,1,1,1,1,1,1,1];var CalibriRegularMetrics={lineHeight:1.2207,lineGap:0.2207};
;// CONCATENATED MODULE: ./src/core/helvetica_factors.js
var HelveticaBoldFactors=[0.76116,1,1,1.0006,0.99998,0.99974,0.99973,0.99973,0.99982,0.99977,1.00087,0.99998,0.99998,0.99959,1.00003,1.0006,0.99998,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99998,1,1.00003,1.00003,1.00003,1.00026,0.9999,0.99977,0.99977,0.99977,0.99977,1.00001,1.00026,1.00022,0.99977,1.0006,0.99973,0.99977,1.00026,0.99999,0.99977,1.00022,1.00001,1.00022,0.99977,1.00001,1.00026,0.99977,1.00001,1.00016,1.00001,1.00001,1.00026,0.99998,1.0006,0.99998,1.00003,0.99973,0.99998,0.99973,1.00026,0.99973,1.00026,0.99973,0.99998,1.00026,1.00026,1.0006,1.0006,0.99973,1.0006,0.99982,1.00026,1.00026,1.00026,1.00026,0.99959,0.99973,0.99998,1.00026,0.99973,1.00022,0.99973,0.99973,1,0.99959,1.00077,0.99959,1.00003,0.99998,0.99973,0.99973,0.99973,0.99973,1.00077,0.99973,0.99998,1.00025,0.99968,0.99973,1.00003,1.00025,0.60299,1.00024,1.06409,1,1,0.99998,1,0.99973,1.0006,0.99998,1,0.99936,0.99973,1.00002,1.00002,1.00002,1.00026,0.99977,0.99977,0.99977,0.99977,0.99977,0.99977,1,0.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,0.99977,0.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,0.99977,0.99977,0.99977,0.99977,1.00001,1.00001,1.00026,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99982,0.99973,0.99973,0.99973,0.99973,0.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,0.99973,1.00026,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,1.03374,0.99977,1.00026,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,0.99977,1.00026,0.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.00042,0.99973,0.99973,1.0006,0.99977,0.99973,0.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.03828,1.00026,0.99999,1.00026,1.0006,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.9993,0.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,0.99977,0.99959,0.99977,0.99959,0.99977,0.99959,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00026,0.99998,1.00026,0.8121,1.00026,0.99998,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,1.00016,1.00022,1.00001,0.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,0.99973,0.99977,0.99973,1,0.99982,1.00022,1.00026,1.00001,0.99973,1.00026,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,1.00034,0.99977,1,0.99997,1.00026,1.00078,1.00036,0.99973,1.00013,1.0006,0.99977,0.99977,0.99988,0.85148,1.00001,1.00026,0.99977,1.00022,1.0006,0.99977,1.00001,0.99999,0.99977,1.00069,1.00022,0.99977,1.00001,0.99984,1.00026,1.00001,1.00024,1.00001,0.9999,1,1.0006,1.00001,1.00041,0.99962,1.00026,1.0006,0.99995,1.00041,0.99942,0.99973,0.99927,1.00082,0.99902,1.00026,1.00087,1.0006,1.00069,0.99973,0.99867,0.99973,0.9993,1.00026,1.00049,1.00056,1,0.99988,0.99935,0.99995,0.99954,1.00055,0.99945,1.00032,1.0006,0.99995,1.00026,0.99995,1.00032,1.00001,1.00008,0.99971,1.00019,0.9994,1.00001,1.0006,1.00044,0.99973,1.00023,1.00047,1,0.99942,0.99561,0.99989,1.00035,0.99977,1.00035,0.99977,1.00019,0.99944,1.00001,1.00021,0.99926,1.00035,1.00035,0.99942,1.00048,0.99999,0.99977,1.00022,1.00035,1.00001,0.99977,1.00026,0.99989,1.00057,1.00001,0.99936,1.00052,1.00012,0.99996,1.00043,1,1.00035,0.9994,0.99976,1.00035,0.99973,1.00052,1.00041,1.00119,1.00037,0.99973,1.00002,0.99986,1.00041,1.00041,0.99902,0.9996,1.00034,0.99999,1.00026,0.99999,1.00026,0.99973,1.00052,0.99973,1,0.99973,1.00041,1.00075,0.9994,1.0003,0.99999,1,1.00041,0.99955,1,0.99915,0.99973,0.99973,1.00026,1.00119,0.99955,0.99973,1.0006,0.99911,1.0006,1.00026,0.99972,1.00026,0.99902,1.00041,0.99973,0.99999,1,1,1.00038,1.0005,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,0.99973,1,1,0.99973,1,1,0.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,0.99973,0.99973,0.99972,1,1,1.00106,0.99999,0.99998,0.99998,0.99999,0.99998,1.66475,1,0.99973,0.99973,1.00023,0.99973,0.99971,1.00047,1.00023,1,0.99991,0.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,0.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,0.99561,1.00027,1.00031,1.00031,0.99915,1.00031,1.00031,0.99999,1.00003,0.99999,0.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,0.99999,1,0.99861,0.99861,1,1.00026,1.00026,1.00026,1.00026,0.99972,0.99999,0.99999,0.99999,0.99999,1.40483,1,0.99977,1.00054,1,1,0.99953,0.99962,1.00042,0.9995,1,1,1,1,1,1,1,1,0.99998,0.99998,0.99998,0.99998,1,1,1,1,1,1,1,1,1,1,1];var HelveticaBoldMetrics={lineHeight:1.2,lineGap:0.2};var HelveticaBoldItalicFactors=[0.76116,1,1,1.0006,0.99998,0.99974,0.99973,0.99973,0.99982,0.99977,1.00087,0.99998,0.99998,0.99959,1.00003,1.0006,0.99998,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99998,1,1.00003,1.00003,1.00003,1.00026,0.9999,0.99977,0.99977,0.99977,0.99977,1.00001,1.00026,1.00022,0.99977,1.0006,0.99973,0.99977,1.00026,0.99999,0.99977,1.00022,1.00001,1.00022,0.99977,1.00001,1.00026,0.99977,1.00001,1.00016,1.00001,1.00001,1.00026,0.99998,1.0006,0.99998,1.00003,0.99973,0.99998,0.99973,1.00026,0.99973,1.00026,0.99973,0.99998,1.00026,1.00026,1.0006,1.0006,0.99973,1.0006,0.99982,1.00026,1.00026,1.00026,1.00026,0.99959,0.99973,0.99998,1.00026,0.99973,1.00022,0.99973,0.99973,1,0.99959,1.00077,0.99959,1.00003,0.99998,0.99973,0.99973,0.99973,0.99973,1.00077,0.99973,0.99998,1.00025,0.99968,0.99973,1.00003,1.00025,0.60299,1.00024,1.06409,1,1,0.99998,1,0.99973,1.0006,0.99998,1,0.99936,0.99973,1.00002,1.00002,1.00002,1.00026,0.99977,0.99977,0.99977,0.99977,0.99977,0.99977,1,0.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,0.99977,0.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,0.99977,0.99977,0.99977,0.99977,1.00001,1.00001,1.00026,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99982,0.99973,0.99973,0.99973,0.99973,0.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,0.99973,1.00026,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,1.0044,0.99977,1.00026,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,0.99977,1.00026,0.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,0.99971,0.99973,0.99973,1.0006,0.99977,0.99973,0.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.01011,1.00026,0.99999,1.00026,1.0006,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.9993,0.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,0.99977,0.99959,0.99977,0.99959,0.99977,0.99959,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00026,0.99998,1.00026,0.8121,1.00026,0.99998,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,0.99977,1.00026,1.00016,1.00022,1.00001,0.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,0.99973,0.99977,0.99973,1,0.99982,1.00022,1.00026,1.00001,0.99973,1.00026,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99977,1,1,1.00026,0.99969,0.99972,0.99981,0.9998,1.0006,0.99977,0.99977,1.00022,0.91155,1.00001,1.00026,0.99977,1.00022,1.0006,0.99977,1.00001,0.99999,0.99977,0.99966,1.00022,1.00032,1.00001,0.99944,1.00026,1.00001,0.99968,1.00001,1.00047,1,1.0006,1.00001,0.99981,1.00101,1.00026,1.0006,0.99948,0.99981,1.00064,0.99973,0.99942,1.00101,1.00061,1.00026,1.00069,1.0006,1.00014,0.99973,1.01322,0.99973,1.00065,1.00026,1.00012,0.99923,1,1.00064,1.00076,0.99948,1.00055,1.00063,1.00007,0.99943,1.0006,0.99948,1.00026,0.99948,0.99943,1.00001,1.00001,1.00029,1.00038,1.00035,1.00001,1.0006,1.0006,0.99973,0.99978,1.00001,1.00057,0.99989,0.99967,0.99964,0.99967,0.99977,0.99999,0.99977,1.00038,0.99977,1.00001,0.99973,1.00066,0.99967,0.99967,1.00041,0.99998,0.99999,0.99977,1.00022,0.99967,1.00001,0.99977,1.00026,0.99964,1.00031,1.00001,0.99999,0.99999,1,1.00023,1,1,0.99999,1.00035,1.00001,0.99999,0.99973,0.99977,0.99999,1.00058,0.99973,0.99973,0.99955,0.9995,1.00026,1.00026,1.00032,0.99989,1.00034,0.99999,1.00026,1.00026,1.00026,0.99973,0.45998,0.99973,1.00026,0.99973,1.00001,0.99999,0.99982,0.99994,0.99996,1,1.00042,1.00044,1.00029,1.00023,0.99973,0.99973,1.00026,0.99949,1.00002,0.99973,1.0006,1.0006,1.0006,0.99975,1.00026,1.00026,1.00032,0.98685,0.99973,1.00026,1,1,0.99966,1.00044,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,0.99973,1,1,0.99973,1,1,0.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,0.99973,0.99973,0.99972,1,1,1.00106,0.99999,0.99998,0.99998,0.99999,0.99998,1.66475,1,0.99973,0.99973,1,0.99973,0.99971,0.99978,1,1,0.99991,0.99984,1.00002,1.00002,1.00002,1.00002,1.00098,1,1,1,1.00049,1,1,0.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,0.99561,1.00027,1.00031,1.00031,0.99915,1.00031,1.00031,0.99999,1.00003,0.99999,0.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,0.99999,1,0.99861,0.99861,1,1.00026,1.00026,1.00026,1.00026,0.99972,0.99999,0.99999,0.99999,0.99999,1.40483,1,0.99977,1.00054,1,1,0.99953,0.99962,1.00042,0.9995,1,1,1,1,1,1,1,1,0.99998,0.99998,0.99998,0.99998,1,1,1,1,1,1,1,1,1,1,1];var HelveticaBoldItalicMetrics={lineHeight:1.35,lineGap:0.2};var HelveticaItalicFactors=[0.76116,1,1,1.0006,1.0006,1.00006,0.99973,0.99973,0.99982,1.00001,1.00043,0.99998,0.99998,0.99959,1.00003,1.0006,0.99998,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,1.0006,1,1.00003,1.00003,1.00003,0.99973,0.99987,1.00001,1.00001,0.99977,0.99977,1.00001,1.00026,1.00022,0.99977,1.0006,1,1.00001,0.99973,0.99999,0.99977,1.00022,1.00001,1.00022,0.99977,1.00001,1.00026,0.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,0.99949,0.99973,0.99998,0.99973,0.99973,1,0.99973,0.99973,1.0006,0.99973,0.99973,0.99924,0.99924,1,0.99924,0.99999,0.99973,0.99973,0.99973,0.99973,0.99998,1,1.0006,0.99973,1,0.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,0.99998,0.99973,0.99973,0.99973,0.99973,1.0009,0.99973,0.99998,1.00025,0.99968,0.99973,1.00003,1.00025,0.60299,1.00024,1.06409,1,1,0.99998,1,0.9998,1.0006,0.99998,1,0.99936,0.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,0.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,0.99977,0.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,0.99977,0.99977,0.99977,0.99977,1.00001,1.00001,1.00026,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99982,1,0.99973,0.99973,0.99973,0.99973,1.0006,1.0006,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,1.06409,1.00026,0.99973,0.99973,0.99973,0.99973,1,0.99973,1,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,0.99977,1,0.99977,1,0.99977,1,0.99977,1,0.99977,1.0288,0.99977,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,0.99977,0.99973,0.99977,0.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,0.99924,1.0006,1.0006,0.99946,1.00034,1,0.99924,1.00001,1,1,0.99973,0.99924,0.99973,0.99924,0.99973,1.06311,0.99973,1.00024,0.99973,0.99924,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,1.00041,0.9998,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,1,1.00016,0.99977,0.99998,0.99977,0.99998,0.99977,0.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,0.89547,1.00026,1.0006,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,1.00016,0.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,0.99924,0.99973,1.00001,0.99973,1,0.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,1.00001,1,1.00054,0.99977,1.00084,1.00007,0.99973,1.00013,0.99924,1.00001,1.00001,0.99945,0.91221,1.00001,1.00026,0.99977,1.00022,1.0006,1.00001,1.00001,0.99999,0.99977,0.99933,1.00022,1.00054,1.00001,1.00065,1.00026,1.00001,1.0001,1.00001,1.00052,1,1.0006,1.00001,0.99945,0.99897,0.99968,0.99924,1.00036,0.99945,0.99949,1,1.0006,0.99897,0.99918,0.99968,0.99911,0.99924,1,0.99962,1.01487,1,1.0005,0.99973,1.00012,1.00043,1,0.99995,0.99994,1.00036,0.99947,1.00019,1.00063,1.00025,0.99924,1.00036,0.99973,1.00036,1.00025,1.00001,1.00001,1.00027,1.0001,1.00068,1.00001,1.0006,1.0006,1,1.00008,0.99957,0.99972,0.9994,0.99954,0.99975,1.00051,1.00001,1.00019,1.00001,1.0001,0.99986,1.00001,1.00001,1.00038,0.99954,0.99954,0.9994,1.00066,0.99999,0.99977,1.00022,1.00054,1.00001,0.99977,1.00026,0.99975,1.0001,1.00001,0.99993,0.9995,0.99955,1.00016,0.99978,0.99974,1.00019,1.00022,0.99955,1.00053,0.99973,1.00089,1.00005,0.99967,1.00048,0.99973,1.00002,1.00034,0.99973,0.99973,0.99964,1.00006,1.00066,0.99947,0.99973,0.98894,0.99973,1,0.44898,1,0.99946,1,1.00039,1.00082,0.99991,0.99991,0.99985,1.00022,1.00023,1.00061,1.00006,0.99966,0.99973,0.99973,0.99973,1.00019,1.0008,1,0.99924,0.99924,0.99924,0.99983,1.00044,0.99973,0.99964,0.98332,1,0.99973,1,1,0.99962,0.99895,1.00016,0.99977,1.00016,0.99977,1.00016,0.99977,1.00001,1,1,1,0.99973,1,1,0.99955,0.99924,0.99924,0.99924,0.99924,0.99998,0.99998,0.99998,0.99973,0.99973,0.99972,1,1,1.00267,0.99999,0.99998,0.99998,1,0.99998,1.66475,1,0.99973,0.99973,1.00023,0.99973,1.00423,0.99925,0.99999,1,0.99991,0.99984,1.00002,1.00002,1.00002,1.00002,1.00049,1,1.00245,1,1,1,1,0.96329,1,1.20985,1.39713,1.00003,0.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,1.00003,1.00031,1.00031,0.99999,1.00003,0.99999,0.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,0.99999,1,0.99861,0.99861,1,1.00026,1.00026,1.00026,1.00026,0.95317,0.99999,0.99999,0.99999,0.99999,1.40483,1,0.99977,1.00054,1,1,0.99953,0.99962,1.00042,0.9995,1,1,1,1,1,1,1,1,0.99998,0.99998,0.99998,0.99998,1,1,1,1,1,1,1,1,1,1,1];var HelveticaItalicMetrics={lineHeight:1.35,lineGap:0.2};var HelveticaRegularFactors=[0.76116,1,1,1.0006,1.0006,1.00006,0.99973,0.99973,0.99982,1.00001,1.00043,0.99998,0.99998,0.99959,1.00003,1.0006,0.99998,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,1.0006,1,1.00003,1.00003,1.00003,0.99973,0.99987,1.00001,1.00001,0.99977,0.99977,1.00001,1.00026,1.00022,0.99977,1.0006,1,1.00001,0.99973,0.99999,0.99977,1.00022,1.00001,1.00022,0.99977,1.00001,1.00026,0.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,0.99949,0.99973,0.99998,0.99973,0.99973,1,0.99973,0.99973,1.0006,0.99973,0.99973,0.99924,0.99924,1,0.99924,0.99999,0.99973,0.99973,0.99973,0.99973,0.99998,1,1.0006,0.99973,1,0.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,0.99998,0.99973,0.99973,0.99973,0.99973,1.0009,0.99973,0.99998,1.00025,0.99968,0.99973,1.00003,1.00025,0.60299,1.00024,1.06409,1,1,0.99998,1,0.9998,1.0006,0.99998,1,0.99936,0.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,0.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,0.99977,0.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,0.99977,0.99977,0.99977,0.99977,1.00001,1.00001,1.00026,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99982,1,0.99973,0.99973,0.99973,0.99973,1.0006,1.0006,1.0006,1.0006,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,0.99973,1.06409,1.00026,0.99973,0.99973,0.99973,0.99973,1,0.99973,1,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,0.99977,1,0.99977,1,0.99977,1,0.99977,1,0.99977,1.04596,0.99977,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00001,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,0.99977,0.99973,0.99977,0.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,0.99924,1.0006,1.0006,1.00019,1.00034,1,0.99924,1.00001,1,1,0.99973,0.99924,0.99973,0.99924,0.99973,1.02572,0.99973,1.00005,0.99973,0.99924,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99999,0.9998,0.99973,1.00022,0.99973,1.00022,0.99973,1.00022,0.99973,1,1.00016,0.99977,0.99998,0.99977,0.99998,0.99977,0.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,0.84533,1.00026,1.0006,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,0.99977,0.99973,1.00016,0.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,0.99924,0.99973,1.00001,0.99973,1,0.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99998,0.99928,1,0.99977,1.00013,1.00055,0.99947,0.99945,0.99941,0.99924,1.00001,1.00001,1.0004,0.91621,1.00001,1.00026,0.99977,1.00022,1.0006,1.00001,1.00005,0.99999,0.99977,1.00015,1.00022,0.99977,1.00001,0.99973,1.00026,1.00001,1.00019,1.00001,0.99946,1,1.0006,1.00001,0.99978,1.00045,0.99973,0.99924,1.00023,0.99978,0.99966,1,1.00065,1.00045,1.00019,0.99973,0.99973,0.99924,1,1,0.96499,1,1.00055,0.99973,1.00008,1.00027,1,0.9997,0.99995,1.00023,0.99933,1.00019,1.00015,1.00031,0.99924,1.00023,0.99973,1.00023,1.00031,1.00001,0.99928,1.00029,1.00092,1.00035,1.00001,1.0006,1.0006,1,0.99988,0.99975,1,1.00082,0.99561,0.9996,1.00035,1.00001,0.99962,1.00001,1.00092,0.99964,1.00001,0.99963,0.99999,1.00035,1.00035,1.00082,0.99962,0.99999,0.99977,1.00022,1.00035,1.00001,0.99977,1.00026,0.9996,0.99967,1.00001,1.00034,1.00074,1.00054,1.00053,1.00063,0.99971,0.99962,1.00035,0.99975,0.99977,0.99973,1.00043,0.99953,1.0007,0.99915,0.99973,1.00008,0.99892,1.00073,1.00073,1.00114,0.99915,1.00073,0.99955,0.99973,1.00092,0.99973,1,0.99998,1,1.0003,1,1.00043,1.00001,0.99969,1.0003,1,1.00035,1.00001,0.9995,1,1.00092,0.99973,0.99973,0.99973,1.0007,0.9995,1,0.99924,1.0006,0.99924,0.99972,1.00062,0.99973,1.00114,1.00073,1,0.99955,1,1,1.00047,0.99968,1.00016,0.99977,1.00016,0.99977,1.00016,0.99977,1.00001,1,1,1,0.99973,1,1,0.99955,0.99924,0.99924,0.99924,0.99924,0.99998,0.99998,0.99998,0.99973,0.99973,0.99972,1,1,1.00267,0.99999,0.99998,0.99998,1,0.99998,1.66475,1,0.99973,0.99973,1.00023,0.99973,0.99971,0.99925,1.00023,1,0.99991,0.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,0.96329,1,1.20985,1.39713,1.00003,0.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,0.99915,1.00031,1.00031,0.99999,1.00003,0.99999,0.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,0.99999,1,0.99861,0.99861,1,1.00026,1.00026,1.00026,1.00026,0.95317,0.99999,0.99999,0.99999,0.99999,1.40483,1,0.99977,1.00054,1,1,0.99953,0.99962,1.00042,0.9995,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var HelveticaRegularMetrics={lineHeight:1.2,lineGap:0.2};
;// CONCATENATED MODULE: ./src/core/liberationsans_widths.js
var LiberationSansBoldWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1000,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,719,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,785,556,556,278,722,556,556,611,278,611,278,611,385,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1000,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1000,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,465,722,333,853,906,474,825,927,838,278,722,722,601,719,667,611,722,778,278,722,667,833,722,644,778,722,667,600,611,667,821,667,809,802,278,667,615,451,611,278,582,615,610,556,606,475,460,611,541,278,558,556,612,556,445,611,766,619,520,684,446,582,715,576,753,845,278,582,611,582,845,667,669,885,567,711,667,278,276,556,1094,1062,875,610,722,622,719,722,719,722,567,712,667,904,626,719,719,610,702,833,722,778,719,667,722,611,622,854,667,730,703,1005,1019,870,979,719,711,1031,719,556,618,615,417,635,556,709,497,615,615,500,635,740,604,611,604,611,556,490,556,875,556,615,581,833,844,729,854,615,552,854,583,556,556,611,417,552,556,278,281,278,969,906,611,500,615,556,604,778,611,487,447,944,778,944,778,944,778,667,556,333,333,556,1000,1000,552,278,278,278,278,500,500,500,556,556,350,1000,1000,240,479,333,333,604,333,167,396,556,556,1094,556,885,489,1115,1000,768,600,834,834,834,834,1000,500,1000,500,1000,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1000,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333];var LiberationSansBoldMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];var LiberationSansBoldItalicWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1000,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,740,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,782,556,556,278,722,556,556,611,278,611,278,611,396,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1000,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1000,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,333,722,333,854,906,473,844,930,847,278,722,722,610,671,667,611,722,778,278,722,667,833,722,657,778,718,667,590,611,667,822,667,829,781,278,667,620,479,611,278,591,620,621,556,610,479,492,611,558,278,566,556,603,556,450,611,712,605,532,664,409,591,704,578,773,834,278,591,611,591,834,667,667,886,614,719,667,278,278,556,1094,1042,854,622,719,677,719,722,708,722,614,722,667,927,643,719,719,615,687,833,722,778,719,667,722,611,677,781,667,729,708,979,989,854,1000,708,719,1042,729,556,619,604,534,618,556,736,510,611,611,507,622,740,604,611,611,611,556,889,556,885,556,646,583,889,935,707,854,594,552,865,589,556,556,611,469,563,556,278,278,278,969,906,611,507,619,556,611,778,611,575,467,944,778,944,778,944,778,667,556,333,333,556,1000,1000,552,278,278,278,278,500,500,500,556,556,350,1000,1000,240,479,333,333,604,333,167,396,556,556,1104,556,885,516,1146,1000,768,600,834,834,834,834,999,500,1000,500,1000,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1000,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333];var LiberationSansBoldItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];var LiberationSansItalicWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1000,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,625,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,733,444,500,222,667,500,500,556,222,556,222,556,281,556,400,556,222,722,556,722,556,722,556,615,723,556,778,556,778,556,778,556,1000,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,354,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1000,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,789,846,389,794,865,775,222,667,667,570,671,667,611,722,778,278,667,667,833,722,648,778,725,667,600,611,667,837,667,831,761,278,667,570,439,555,222,550,570,571,500,556,439,463,555,542,222,500,492,548,500,447,556,670,573,486,603,374,550,652,546,728,779,222,550,556,550,779,667,667,843,544,708,667,278,278,500,1066,982,844,589,715,639,724,667,651,667,544,704,667,917,614,715,715,589,686,833,722,778,725,667,722,611,639,795,667,727,673,920,923,805,886,651,694,1022,682,556,562,522,493,553,556,688,465,556,556,472,564,686,550,556,556,556,500,833,500,835,500,572,518,830,851,621,736,526,492,752,534,556,556,556,378,496,500,222,222,222,910,828,556,472,565,500,556,778,556,492,339,944,722,944,722,944,722,667,500,333,333,556,1000,1000,552,222,222,222,222,333,333,333,556,556,350,1000,1000,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1083,1000,768,600,834,834,834,834,1000,500,998,500,1000,500,500,494,612,823,713,584,549,713,979,719,274,549,549,584,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1000,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285];var LiberationSansItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];var LiberationSansRegularWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1000,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,615,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,735,444,500,222,667,500,500,556,222,556,222,556,292,556,334,556,222,722,556,722,556,722,556,604,723,556,778,556,778,556,778,556,1000,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,375,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1000,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,784,838,384,774,855,752,222,667,667,551,668,667,611,722,778,278,667,668,833,722,650,778,722,667,618,611,667,798,667,835,748,278,667,578,446,556,222,547,578,575,500,557,446,441,556,556,222,500,500,576,500,448,556,690,569,482,617,395,547,648,525,713,781,222,547,556,547,781,667,667,865,542,719,667,278,278,500,1057,1010,854,583,722,635,719,667,656,667,542,677,667,923,604,719,719,583,656,833,722,778,719,667,722,611,635,760,667,740,667,917,938,792,885,656,719,1010,722,556,573,531,365,583,556,669,458,559,559,438,583,688,552,556,542,556,500,458,500,823,500,573,521,802,823,625,719,521,510,750,542,556,556,556,365,510,500,222,278,222,906,812,556,438,559,500,552,778,556,489,411,944,722,944,722,944,722,667,500,333,333,556,1000,1000,552,222,222,222,222,333,333,333,556,556,350,1000,1000,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1073,1000,768,600,834,834,834,834,1000,500,1000,500,1000,500,500,494,612,823,713,584,549,713,979,719,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1000,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285];var LiberationSansRegularMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];
;// CONCATENATED MODULE: ./src/core/myriadpro_factors.js
var MyriadProBoldFactors=[1.36898,1,1,0.72706,0.80479,0.83734,0.98894,0.99793,0.9897,0.93884,0.86209,0.94292,0.94292,1.16661,1.02058,0.93582,0.96694,0.93582,1.19137,0.99793,0.99793,0.99793,0.99793,0.99793,0.99793,0.99793,0.99793,0.99793,0.99793,0.78076,0.78076,1.02058,1.02058,1.02058,0.72851,0.78966,0.90838,0.83637,0.82391,0.96376,0.80061,0.86275,0.8768,0.95407,1.0258,0.73901,0.85022,0.83655,1.0156,0.95546,0.92179,0.87107,0.92179,0.82114,0.8096,0.89713,0.94438,0.95353,0.94083,0.91905,0.90406,0.9446,0.94292,1.18777,0.94292,1.02058,0.89903,0.90088,0.94938,0.97898,0.81093,0.97571,0.94938,1.024,0.9577,0.95933,0.98621,1.0474,0.97455,0.98981,0.9672,0.95933,0.9446,0.97898,0.97407,0.97646,0.78036,1.10208,0.95442,0.95298,0.97579,0.9332,0.94039,0.938,0.80687,1.01149,0.80687,1.02058,0.80479,0.99793,0.99793,0.99793,0.99793,1.01149,1.00872,0.90088,0.91882,1.0213,0.8361,1.02058,0.62295,0.54324,0.89022,1.08595,1,1,0.90088,1,0.97455,0.93582,0.90088,1,1.05686,0.8361,0.99642,0.99642,0.99642,0.72851,0.90838,0.90838,0.90838,0.90838,0.90838,0.90838,0.868,0.82391,0.80061,0.80061,0.80061,0.80061,1.0258,1.0258,1.0258,1.0258,0.97484,0.95546,0.92179,0.92179,0.92179,0.92179,0.92179,1.02058,0.92179,0.94438,0.94438,0.94438,0.94438,0.90406,0.86958,0.98225,0.94938,0.94938,0.94938,0.94938,0.94938,0.94938,0.9031,0.81093,0.94938,0.94938,0.94938,0.94938,0.98621,0.98621,0.98621,0.98621,0.93969,0.95933,0.9446,0.9446,0.9446,0.9446,0.9446,1.08595,0.9446,0.95442,0.95442,0.95442,0.95442,0.94039,0.97898,0.94039,0.90838,0.94938,0.90838,0.94938,0.90838,0.94938,0.82391,0.81093,0.82391,0.81093,0.82391,0.81093,0.82391,0.81093,0.96376,0.84313,0.97484,0.97571,0.80061,0.94938,0.80061,0.94938,0.80061,0.94938,0.80061,0.94938,0.80061,0.94938,0.8768,0.9577,0.8768,0.9577,0.8768,0.9577,1,1,0.95407,0.95933,0.97069,0.95933,1.0258,0.98621,1.0258,0.98621,1.0258,0.98621,1.0258,0.98621,1.0258,0.98621,0.887,1.01591,0.73901,1.0474,1,1,0.97455,0.83655,0.98981,1,1,0.83655,0.73977,0.83655,0.73903,0.84638,1.033,0.95546,0.95933,1,1,0.95546,0.95933,0.8271,0.95417,0.95933,0.92179,0.9446,0.92179,0.9446,0.92179,0.9446,0.936,0.91964,0.82114,0.97646,1,1,0.82114,0.97646,0.8096,0.78036,0.8096,0.78036,1,1,0.8096,0.78036,1,1,0.89713,0.77452,0.89713,1.10208,0.94438,0.95442,0.94438,0.95442,0.94438,0.95442,0.94438,0.95442,0.94438,0.95442,0.94438,0.95442,0.94083,0.97579,0.90406,0.94039,0.90406,0.9446,0.938,0.9446,0.938,0.9446,0.938,1,0.99793,0.90838,0.94938,0.868,0.9031,0.92179,0.9446,1,1,0.89713,1.10208,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90989,0.9358,0.91945,0.83181,0.75261,0.87992,0.82976,0.96034,0.83689,0.97268,1.0078,0.90838,0.83637,0.8019,0.90157,0.80061,0.9446,0.95407,0.92436,1.0258,0.85022,0.97153,1.0156,0.95546,0.89192,0.92179,0.92361,0.87107,0.96318,0.89713,0.93704,0.95638,0.91905,0.91709,0.92796,1.0258,0.93704,0.94836,1.0373,0.95933,1.0078,0.95871,0.94836,0.96174,0.92601,0.9498,0.98607,0.95776,0.95933,1.05453,1.0078,0.98275,0.9314,0.95617,0.91701,1.05993,0.9446,0.78367,0.9553,1,0.86832,1.0128,0.95871,0.99394,0.87548,0.96361,0.86774,1.0078,0.95871,0.9446,0.95871,0.86774,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.94083,0.97579,0.94083,0.97579,0.94083,0.97579,0.90406,0.94039,0.96694,1,0.89903,1,1,1,0.93582,0.93582,0.93582,1,0.908,0.908,0.918,0.94219,0.94219,0.96544,1,1.285,1,1,0.81079,0.81079,1,1,0.74854,1,1,1,1,0.99793,1,1,1,0.65,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.17173,1,0.80535,0.76169,1.02058,1.0732,1.05486,1,1,1.30692,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.16161,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var MyriadProBoldMetrics={lineHeight:1.2,lineGap:0.2};var MyriadProBoldItalicFactors=[1.36898,1,1,0.66227,0.80779,0.81625,0.97276,0.97276,0.97733,0.92222,0.83266,0.94292,0.94292,1.16148,1.02058,0.93582,0.96694,0.93582,1.17337,0.97276,0.97276,0.97276,0.97276,0.97276,0.97276,0.97276,0.97276,0.97276,0.97276,0.78076,0.78076,1.02058,1.02058,1.02058,0.71541,0.76813,0.85576,0.80591,0.80729,0.94299,0.77512,0.83655,0.86523,0.92222,0.98621,0.71743,0.81698,0.79726,0.98558,0.92222,0.90637,0.83809,0.90637,0.80729,0.76463,0.86275,0.90699,0.91605,0.9154,0.85308,0.85458,0.90531,0.94292,1.21296,0.94292,1.02058,0.89903,1.18616,0.99613,0.91677,0.78216,0.91677,0.90083,0.98796,0.9135,0.92168,0.95381,0.98981,0.95298,0.95381,0.93459,0.92168,0.91513,0.92004,0.91677,0.95077,0.748,1.04502,0.91677,0.92061,0.94236,0.89544,0.89364,0.9,0.80687,0.8578,0.80687,1.02058,0.80779,0.97276,0.97276,0.97276,0.97276,0.8578,0.99973,1.18616,0.91339,1.08074,0.82891,1.02058,0.55509,0.71526,0.89022,1.08595,1,1,1.18616,1,0.96736,0.93582,1.18616,1,1.04864,0.82711,0.99043,0.99043,0.99043,0.71541,0.85576,0.85576,0.85576,0.85576,0.85576,0.85576,0.845,0.80729,0.77512,0.77512,0.77512,0.77512,0.98621,0.98621,0.98621,0.98621,0.95961,0.92222,0.90637,0.90637,0.90637,0.90637,0.90637,1.02058,0.90251,0.90699,0.90699,0.90699,0.90699,0.85458,0.83659,0.94951,0.99613,0.99613,0.99613,0.99613,0.99613,0.99613,0.85811,0.78216,0.90083,0.90083,0.90083,0.90083,0.95381,0.95381,0.95381,0.95381,0.9135,0.92168,0.91513,0.91513,0.91513,0.91513,0.91513,1.08595,0.91677,0.91677,0.91677,0.91677,0.91677,0.89364,0.92332,0.89364,0.85576,0.99613,0.85576,0.99613,0.85576,0.99613,0.80729,0.78216,0.80729,0.78216,0.80729,0.78216,0.80729,0.78216,0.94299,0.76783,0.95961,0.91677,0.77512,0.90083,0.77512,0.90083,0.77512,0.90083,0.77512,0.90083,0.77512,0.90083,0.86523,0.9135,0.86523,0.9135,0.86523,0.9135,1,1,0.92222,0.92168,0.92222,0.92168,0.98621,0.95381,0.98621,0.95381,0.98621,0.95381,0.98621,0.95381,0.98621,0.95381,0.86036,0.97096,0.71743,0.98981,1,1,0.95298,0.79726,0.95381,1,1,0.79726,0.6894,0.79726,0.74321,0.81691,1.0006,0.92222,0.92168,1,1,0.92222,0.92168,0.79464,0.92098,0.92168,0.90637,0.91513,0.90637,0.91513,0.90637,0.91513,0.909,0.87514,0.80729,0.95077,1,1,0.80729,0.95077,0.76463,0.748,0.76463,0.748,1,1,0.76463,0.748,1,1,0.86275,0.72651,0.86275,1.04502,0.90699,0.91677,0.90699,0.91677,0.90699,0.91677,0.90699,0.91677,0.90699,0.91677,0.90699,0.91677,0.9154,0.94236,0.85458,0.89364,0.85458,0.90531,0.9,0.90531,0.9,0.90531,0.9,1,0.97276,0.85576,0.99613,0.845,0.85811,0.90251,0.91677,1,1,0.86275,1.04502,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.00899,1.30628,0.85576,0.80178,0.66862,0.7927,0.69323,0.88127,0.72459,0.89711,0.95381,0.85576,0.80591,0.7805,0.94729,0.77512,0.90531,0.92222,0.90637,0.98621,0.81698,0.92655,0.98558,0.92222,0.85359,0.90637,0.90976,0.83809,0.94523,0.86275,0.83509,0.93157,0.85308,0.83392,0.92346,0.98621,0.83509,0.92886,0.91324,0.92168,0.95381,0.90646,0.92886,0.90557,0.86847,0.90276,0.91324,0.86842,0.92168,0.99531,0.95381,0.9224,0.85408,0.92699,0.86847,1.0051,0.91513,0.80487,0.93481,1,0.88159,1.05214,0.90646,0.97355,0.81539,0.89398,0.85923,0.95381,0.90646,0.91513,0.90646,0.85923,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.9154,0.94236,0.9154,0.94236,0.9154,0.94236,0.85458,0.89364,0.96694,1,0.89903,1,1,1,0.91782,0.91782,0.91782,1,0.896,0.896,0.896,0.9332,0.9332,0.95973,1,1.26,1,1,0.80479,0.80178,1,1,0.85633,1,1,1,1,0.97276,1,1,1,0.698,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.14542,1,0.79199,0.78694,1.02058,1.03493,1.05486,1,1,1.23026,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.20006,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var MyriadProBoldItalicMetrics={lineHeight:1.2,lineGap:0.2};var MyriadProItalicFactors=[1.36898,1,1,0.65507,0.84943,0.85639,0.88465,0.88465,0.86936,0.88307,0.86948,0.85283,0.85283,1.06383,1.02058,0.75945,0.9219,0.75945,1.17337,0.88465,0.88465,0.88465,0.88465,0.88465,0.88465,0.88465,0.88465,0.88465,0.88465,0.75945,0.75945,1.02058,1.02058,1.02058,0.69046,0.70926,0.85158,0.77812,0.76852,0.89591,0.70466,0.76125,0.80094,0.86822,0.83864,0.728,0.77212,0.79475,0.93637,0.87514,0.8588,0.76013,0.8588,0.72421,0.69866,0.77598,0.85991,0.80811,0.87832,0.78112,0.77512,0.8562,1.0222,1.18417,1.0222,1.27014,0.89903,1.15012,0.93859,0.94399,0.846,0.94399,0.81453,1.0186,0.94219,0.96017,1.03075,1.02175,0.912,1.03075,0.96998,0.96017,0.93859,0.94399,0.94399,0.95493,0.746,1.12658,0.94578,0.91,0.979,0.882,0.882,0.83,0.85034,0.83537,0.85034,1.02058,0.70869,0.88465,0.88465,0.88465,0.88465,0.83537,0.90083,1.15012,0.9161,0.94565,0.73541,1.02058,0.53609,0.69353,0.79519,1.08595,1,1,1.15012,1,0.91974,0.75945,1.15012,1,0.9446,0.73361,0.9005,0.9005,0.9005,0.62864,0.85158,0.85158,0.85158,0.85158,0.85158,0.85158,0.773,0.76852,0.70466,0.70466,0.70466,0.70466,0.83864,0.83864,0.83864,0.83864,0.90561,0.87514,0.8588,0.8588,0.8588,0.8588,0.8588,1.02058,0.85751,0.85991,0.85991,0.85991,0.85991,0.77512,0.76013,0.88075,0.93859,0.93859,0.93859,0.93859,0.93859,0.93859,0.8075,0.846,0.81453,0.81453,0.81453,0.81453,0.82424,0.82424,0.82424,0.82424,0.9278,0.96017,0.93859,0.93859,0.93859,0.93859,0.93859,1.08595,0.8562,0.94578,0.94578,0.94578,0.94578,0.882,0.94578,0.882,0.85158,0.93859,0.85158,0.93859,0.85158,0.93859,0.76852,0.846,0.76852,0.846,0.76852,0.846,0.76852,0.846,0.89591,0.8544,0.90561,0.94399,0.70466,0.81453,0.70466,0.81453,0.70466,0.81453,0.70466,0.81453,0.70466,0.81453,0.80094,0.94219,0.80094,0.94219,0.80094,0.94219,1,1,0.86822,0.96017,0.86822,0.96017,0.83864,0.82424,0.83864,0.82424,0.83864,0.82424,0.83864,1.03075,0.83864,0.82424,0.81402,1.02738,0.728,1.02175,1,1,0.912,0.79475,1.03075,1,1,0.79475,0.83911,0.79475,0.66266,0.80553,1.06676,0.87514,0.96017,1,1,0.87514,0.96017,0.86865,0.87396,0.96017,0.8588,0.93859,0.8588,0.93859,0.8588,0.93859,0.867,0.84759,0.72421,0.95493,1,1,0.72421,0.95493,0.69866,0.746,0.69866,0.746,1,1,0.69866,0.746,1,1,0.77598,0.88417,0.77598,1.12658,0.85991,0.94578,0.85991,0.94578,0.85991,0.94578,0.85991,0.94578,0.85991,0.94578,0.85991,0.94578,0.87832,0.979,0.77512,0.882,0.77512,0.8562,0.83,0.8562,0.83,0.8562,0.83,1,0.88465,0.85158,0.93859,0.773,0.8075,0.85751,0.8562,1,1,0.77598,1.12658,1.15012,1.15012,1.15012,1.15012,1.15012,1.15313,1.15012,1.15012,1.15012,1.08106,1.03901,0.85158,0.77025,0.62264,0.7646,0.65351,0.86026,0.69461,0.89947,1.03075,0.85158,0.77812,0.76449,0.88836,0.70466,0.8562,0.86822,0.8588,0.83864,0.77212,0.85308,0.93637,0.87514,0.82352,0.8588,0.85701,0.76013,0.89058,0.77598,0.8156,0.82565,0.78112,0.77899,0.89386,0.83864,0.8156,0.9486,0.92388,0.96186,1.03075,0.91123,0.9486,0.93298,0.878,0.93942,0.92388,0.84596,0.96186,0.95119,1.03075,0.922,0.88787,0.95829,0.88,0.93559,0.93859,0.78815,0.93758,1,0.89217,1.03737,0.91123,0.93969,0.77487,0.85769,0.86799,1.03075,0.91123,0.93859,0.91123,0.86799,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.87832,0.979,0.87832,0.979,0.87832,0.979,0.77512,0.882,0.9219,1,0.89903,1,1,1,0.87321,0.87321,0.87321,1,1.027,1.027,1.027,0.86847,0.86847,0.79121,1,1.124,1,1,0.73572,0.73572,1,1,0.85034,1,1,1,1,0.88465,1,1,1,0.669,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.04828,1,0.74948,0.75187,1.02058,0.98391,1.02119,1,1,1.06233,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05233,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var MyriadProItalicMetrics={lineHeight:1.2,lineGap:0.2};var MyriadProRegularFactors=[1.36898,1,1,0.76305,0.82784,0.94935,0.89364,0.92241,0.89073,0.90706,0.98472,0.85283,0.85283,1.0664,1.02058,0.74505,0.9219,0.74505,1.23456,0.92241,0.92241,0.92241,0.92241,0.92241,0.92241,0.92241,0.92241,0.92241,0.92241,0.74505,0.74505,1.02058,1.02058,1.02058,0.73002,0.72601,0.91755,0.8126,0.80314,0.92222,0.73764,0.79726,0.83051,0.90284,0.86023,0.74,0.8126,0.84869,0.96518,0.91115,0.8858,0.79761,0.8858,0.74498,0.73914,0.81363,0.89591,0.83659,0.89633,0.85608,0.8111,0.90531,1.0222,1.22736,1.0222,1.27014,0.89903,0.90088,0.86667,1.0231,0.896,1.01411,0.90083,1.05099,1.00512,0.99793,1.05326,1.09377,0.938,1.06226,1.00119,0.99793,0.98714,1.0231,1.01231,0.98196,0.792,1.19137,0.99074,0.962,1.01915,0.926,0.942,0.856,0.85034,0.92006,0.85034,1.02058,0.69067,0.92241,0.92241,0.92241,0.92241,0.92006,0.9332,0.90088,0.91882,0.93484,0.75339,1.02058,0.56866,0.54324,0.79519,1.08595,1,1,0.90088,1,0.95325,0.74505,0.90088,1,0.97198,0.75339,0.91009,0.91009,0.91009,0.66466,0.91755,0.91755,0.91755,0.91755,0.91755,0.91755,0.788,0.80314,0.73764,0.73764,0.73764,0.73764,0.86023,0.86023,0.86023,0.86023,0.92915,0.91115,0.8858,0.8858,0.8858,0.8858,0.8858,1.02058,0.8858,0.89591,0.89591,0.89591,0.89591,0.8111,0.79611,0.89713,0.86667,0.86667,0.86667,0.86667,0.86667,0.86667,0.86936,0.896,0.90083,0.90083,0.90083,0.90083,0.84224,0.84224,0.84224,0.84224,0.97276,0.99793,0.98714,0.98714,0.98714,0.98714,0.98714,1.08595,0.89876,0.99074,0.99074,0.99074,0.99074,0.942,1.0231,0.942,0.91755,0.86667,0.91755,0.86667,0.91755,0.86667,0.80314,0.896,0.80314,0.896,0.80314,0.896,0.80314,0.896,0.92222,0.93372,0.92915,1.01411,0.73764,0.90083,0.73764,0.90083,0.73764,0.90083,0.73764,0.90083,0.73764,0.90083,0.83051,1.00512,0.83051,1.00512,0.83051,1.00512,1,1,0.90284,0.99793,0.90976,0.99793,0.86023,0.84224,0.86023,0.84224,0.86023,0.84224,0.86023,1.05326,0.86023,0.84224,0.82873,1.07469,0.74,1.09377,1,1,0.938,0.84869,1.06226,1,1,0.84869,0.83704,0.84869,0.81441,0.85588,1.08927,0.91115,0.99793,1,1,0.91115,0.99793,0.91887,0.90991,0.99793,0.8858,0.98714,0.8858,0.98714,0.8858,0.98714,0.894,0.91434,0.74498,0.98196,1,1,0.74498,0.98196,0.73914,0.792,0.73914,0.792,1,1,0.73914,0.792,1,1,0.81363,0.904,0.81363,1.19137,0.89591,0.99074,0.89591,0.99074,0.89591,0.99074,0.89591,0.99074,0.89591,0.99074,0.89591,0.99074,0.89633,1.01915,0.8111,0.942,0.8111,0.90531,0.856,0.90531,0.856,0.90531,0.856,1,0.92241,0.91755,0.86667,0.788,0.86936,0.8858,0.89876,1,1,0.81363,1.19137,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90088,0.90388,1.03901,0.92138,0.78105,0.7154,0.86169,0.80513,0.94007,0.82528,0.98612,1.06226,0.91755,0.8126,0.81884,0.92819,0.73764,0.90531,0.90284,0.8858,0.86023,0.8126,0.91172,0.96518,0.91115,0.83089,0.8858,0.87791,0.79761,0.89297,0.81363,0.88157,0.89992,0.85608,0.81992,0.94307,0.86023,0.88157,0.95308,0.98699,0.99793,1.06226,0.95817,0.95308,0.97358,0.928,0.98088,0.98699,0.92761,0.99793,0.96017,1.06226,0.986,0.944,0.95978,0.938,0.96705,0.98714,0.80442,0.98972,1,0.89762,1.04552,0.95817,0.99007,0.87064,0.91879,0.88888,1.06226,0.95817,0.98714,0.95817,0.88888,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.89633,1.01915,0.89633,1.01915,0.89633,1.01915,0.8111,0.942,0.9219,1,0.89903,1,1,1,0.93173,0.93173,0.93173,1,1.06304,1.06304,1.06904,0.89903,0.89903,0.80549,1,1.156,1,1,0.76575,0.76575,1,1,0.72458,1,1,1,1,0.92241,1,1,1,0.619,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.07257,1,0.74705,0.71119,1.02058,1.024,1.02119,1,1,1.1536,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05638,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var MyriadProRegularMetrics={lineHeight:1.2,lineGap:0.2};
;// CONCATENATED MODULE: ./src/core/segoeui_factors.js
var SegoeuiBoldFactors=[1.76738,1,1,0.99297,0.9824,1.04016,1.06497,1.03424,0.97529,1.17647,1.23203,1.1085,1.1085,1.16939,1.2107,0.9754,1.21408,0.9754,1.59578,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,0.81378,0.81378,1.2107,1.2107,1.2107,0.71703,0.97847,0.97363,0.88776,0.8641,1.02096,0.79795,0.85132,0.914,1.06085,1.1406,0.8007,0.89858,0.83693,1.14889,1.09398,0.97489,0.92094,0.97489,0.90399,0.84041,0.95923,1.00135,1,1.06467,0.98243,0.90996,0.99361,1.1085,1.56942,1.1085,1.2107,0.74627,0.94282,0.96752,1.01519,0.86304,1.01359,0.97278,1.15103,1.01359,0.98561,1.02285,1.02285,1.00527,1.02285,1.0302,0.99041,1.0008,1.01519,1.01359,1.02258,0.79104,1.16862,0.99041,0.97454,1.02511,0.99298,0.96752,0.95801,0.94856,1.16579,0.94856,1.2107,0.9824,1.03424,1.03424,1,1.03424,1.16579,0.8727,1.3871,1.18622,1.10818,1.04478,1.2107,1.18622,0.75155,0.94994,1.28826,1.21408,1.21408,0.91056,1,0.91572,0.9754,0.64663,1.18328,1.24866,1.04478,1.14169,1.15749,1.17389,0.71703,0.97363,0.97363,0.97363,0.97363,0.97363,0.97363,0.93506,0.8641,0.79795,0.79795,0.79795,0.79795,1.1406,1.1406,1.1406,1.1406,1.02096,1.09398,0.97426,0.97426,0.97426,0.97426,0.97426,1.2107,0.97489,1.00135,1.00135,1.00135,1.00135,0.90996,0.92094,1.02798,0.96752,0.96752,0.96752,0.96752,0.96752,0.96752,0.93136,0.86304,0.97278,0.97278,0.97278,0.97278,1.02285,1.02285,1.02285,1.02285,0.97122,0.99041,1,1,1,1,1,1.28826,1.0008,0.99041,0.99041,0.99041,0.99041,0.96752,1.01519,0.96752,0.97363,0.96752,0.97363,0.96752,0.97363,0.96752,0.8641,0.86304,0.8641,0.86304,0.8641,0.86304,0.8641,0.86304,1.02096,1.03057,1.02096,1.03517,0.79795,0.97278,0.79795,0.97278,0.79795,0.97278,0.79795,0.97278,0.79795,0.97278,0.914,1.01359,0.914,1.01359,0.914,1.01359,1,1,1.06085,0.98561,1.06085,1.00879,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,0.97138,1.08692,0.8007,1.02285,1,1,1.00527,0.83693,1.02285,1,1,0.83693,0.9455,0.83693,0.90418,0.83693,1.13005,1.09398,0.99041,1,1,1.09398,0.99041,0.96692,1.09251,0.99041,0.97489,1.0008,0.97489,1.0008,0.97489,1.0008,0.93994,0.97931,0.90399,1.02258,1,1,0.90399,1.02258,0.84041,0.79104,0.84041,0.79104,0.84041,0.79104,0.84041,0.79104,1,1,0.95923,1.07034,0.95923,1.16862,1.00135,0.99041,1.00135,0.99041,1.00135,0.99041,1.00135,0.99041,1.00135,0.99041,1.00135,0.99041,1.06467,1.02511,0.90996,0.96752,0.90996,0.99361,0.95801,0.99361,0.95801,0.99361,0.95801,1.07733,1.03424,0.97363,0.96752,0.93506,0.93136,0.97489,1.0008,1,1,0.95923,1.16862,1.15103,1.15103,1.01173,1.03959,0.75953,0.81378,0.79912,1.15103,1.21994,0.95161,0.87815,1.01149,0.81525,0.7676,0.98167,1.01134,1.02546,0.84097,1.03089,1.18102,0.97363,0.88776,0.85134,0.97826,0.79795,0.99361,1.06085,0.97489,1.1406,0.89858,1.0388,1.14889,1.09398,0.86039,0.97489,1.0595,0.92094,0.94793,0.95923,0.90996,0.99346,0.98243,1.02112,0.95493,1.1406,0.90996,1.03574,1.02597,1.0008,1.18102,1.06628,1.03574,1.0192,1.01932,1.00886,0.97531,1.0106,1.0008,1.13189,1.18102,1.02277,0.98683,1.0016,0.99561,1.07237,1.0008,0.90434,0.99921,0.93803,0.8965,1.23085,1.06628,1.04983,0.96268,1.0499,0.98439,1.18102,1.06628,1.0008,1.06628,0.98439,0.79795,1,1,1,1,1,1,1,1,1,1,1,1,1.09466,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.97278,1,1,1,1,1,1,1,1,1,1,1,1,1.02065,1,1,1,1,1,1,1.06467,1.02511,1.06467,1.02511,1.06467,1.02511,0.90996,0.96752,1,1.21408,0.89903,1,1,0.75155,1.04394,1.04394,1.04394,1.04394,0.98633,0.98633,0.98633,0.73047,0.73047,1.20642,0.91211,1.25635,1.222,1.02956,1.03372,1.03372,0.96039,1.24633,1,1.12454,0.93503,1.03424,1.19687,1.03424,1,1,1,0.771,1,1,1.15749,1.15749,1.15749,1.10948,0.86279,0.94434,0.86279,0.94434,0.86182,1,1,1.16897,1,0.96085,0.90137,1.2107,1.18416,1.13973,0.69825,0.9716,2.10339,1.29004,1.29004,1.21172,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,0.99862,0.99862,1,0.87025,0.87025,0.87025,0.87025,1.18874,1.42603,1,1.42603,1.42603,0.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.09193,1.09193,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var SegoeuiBoldMetrics={lineHeight:1.33008,lineGap:0};var SegoeuiBoldItalicFactors=[1.76738,1,1,0.98946,1.03959,1.04016,1.02809,1.036,0.97639,1.10953,1.23203,1.11144,1.11144,1.16939,1.21237,0.9754,1.21261,0.9754,1.59754,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,0.81378,0.81378,1.21237,1.21237,1.21237,0.73541,0.97847,0.97363,0.89723,0.87897,1.0426,0.79429,0.85292,0.91149,1.05815,1.1406,0.79631,0.90128,0.83853,1.04396,1.10615,0.97552,0.94436,0.97552,0.88641,0.80527,0.96083,1.00135,1,1.06777,0.9817,0.91142,0.99361,1.11144,1.57293,1.11144,1.21237,0.74627,1.31818,1.06585,0.97042,0.83055,0.97042,0.93503,1.1261,0.97042,0.97922,1.14236,0.94552,1.01054,1.14236,1.02471,0.97922,0.94165,0.97042,0.97042,1.0276,0.78929,1.1261,0.97922,0.95874,1.02197,0.98507,0.96752,0.97168,0.95107,1.16579,0.95107,1.21237,1.03959,1.036,1.036,1,1.036,1.16579,0.87357,1.31818,1.18754,1.26781,1.05356,1.21237,1.18622,0.79487,0.94994,1.29004,1.24047,1.24047,1.31818,1,0.91484,0.9754,1.31818,1.1349,1.24866,1.05356,1.13934,1.15574,1.17389,0.73541,0.97363,0.97363,0.97363,0.97363,0.97363,0.97363,0.94385,0.87897,0.79429,0.79429,0.79429,0.79429,1.1406,1.1406,1.1406,1.1406,1.0426,1.10615,0.97552,0.97552,0.97552,0.97552,0.97552,1.21237,0.97552,1.00135,1.00135,1.00135,1.00135,0.91142,0.94436,0.98721,1.06585,1.06585,1.06585,1.06585,1.06585,1.06585,0.96705,0.83055,0.93503,0.93503,0.93503,0.93503,1.14236,1.14236,1.14236,1.14236,0.93125,0.97922,0.94165,0.94165,0.94165,0.94165,0.94165,1.29004,0.94165,0.97922,0.97922,0.97922,0.97922,0.96752,0.97042,0.96752,0.97363,1.06585,0.97363,1.06585,0.97363,1.06585,0.87897,0.83055,0.87897,0.83055,0.87897,0.83055,0.87897,0.83055,1.0426,1.0033,1.0426,0.97042,0.79429,0.93503,0.79429,0.93503,0.79429,0.93503,0.79429,0.93503,0.79429,0.93503,0.91149,0.97042,0.91149,0.97042,0.91149,0.97042,1,1,1.05815,0.97922,1.05815,0.97922,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,0.97441,1.04302,0.79631,1.01582,1,1,1.01054,0.83853,1.14236,1,1,0.83853,1.09125,0.83853,0.90418,0.83853,1.19508,1.10615,0.97922,1,1,1.10615,0.97922,1.01034,1.10466,0.97922,0.97552,0.94165,0.97552,0.94165,0.97552,0.94165,0.91602,0.91981,0.88641,1.0276,1,1,0.88641,1.0276,0.80527,0.78929,0.80527,0.78929,0.80527,0.78929,0.80527,0.78929,1,1,0.96083,1.05403,0.95923,1.16862,1.00135,0.97922,1.00135,0.97922,1.00135,0.97922,1.00135,0.97922,1.00135,0.97922,1.00135,0.97922,1.06777,1.02197,0.91142,0.96752,0.91142,0.99361,0.97168,0.99361,0.97168,0.99361,0.97168,1.23199,1.036,0.97363,1.06585,0.94385,0.96705,0.97552,0.94165,1,1,0.96083,1.1261,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,0.95161,1.27126,1.00811,0.83284,0.77702,0.99137,0.95253,1.0347,0.86142,1.07205,1.14236,0.97363,0.89723,0.86869,1.09818,0.79429,0.99361,1.05815,0.97552,1.1406,0.90128,1.06662,1.04396,1.10615,0.84918,0.97552,1.04694,0.94436,0.98015,0.96083,0.91142,1.00356,0.9817,1.01945,0.98999,1.1406,0.91142,1.04961,0.9898,1.00639,1.14236,1.07514,1.04961,0.99607,1.02897,1.008,0.9898,0.95134,1.00639,1.11121,1.14236,1.00518,0.97981,1.02186,1,1.08578,0.94165,0.99314,0.98387,0.93028,0.93377,1.35125,1.07514,1.10687,0.93491,1.04232,1.00351,1.14236,1.07514,0.94165,1.07514,1.00351,0.79429,1,1,1,1,1,1,1,1,1,1,1,1,1.09097,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.93503,1,1,1,1,1,1,1,1,1,1,1,1,0.96609,1,1,1,1,1,1,1.06777,1.02197,1.06777,1.02197,1.06777,1.02197,0.91142,0.96752,1,1.21261,0.89903,1,1,0.75155,1.04745,1.04745,1.04745,1.04394,0.98633,0.98633,0.98633,0.72959,0.72959,1.20502,0.91406,1.26514,1.222,1.02956,1.03372,1.03372,0.96039,1.24633,1,1.09125,0.93327,1.03336,1.16541,1.036,1,1,1,0.771,1,1,1.15574,1.15574,1.15574,1.15574,0.86364,0.94434,0.86279,0.94434,0.86224,1,1,1.16798,1,0.96085,0.90068,1.21237,1.18416,1.13904,0.69825,0.9716,2.10339,1.29004,1.29004,1.21339,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,0.99862,0.99862,1,0.87025,0.87025,0.87025,0.87025,1.18775,1.42603,1,1.42603,1.42603,0.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.13269,1.13269,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var SegoeuiBoldItalicMetrics={lineHeight:1.33008,lineGap:0};var SegoeuiItalicFactors=[1.76738,1,1,0.98946,1.14763,1.05365,1.06234,0.96927,0.92586,1.15373,1.18414,0.91349,0.91349,1.07403,1.17308,0.78383,1.20088,0.78383,1.42531,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.78383,0.78383,1.17308,1.17308,1.17308,0.77349,0.94565,0.94729,0.85944,0.88506,0.9858,0.74817,0.80016,0.88449,0.98039,0.95782,0.69238,0.89898,0.83231,0.98183,1.03989,0.96924,0.86237,0.96924,0.80595,0.74524,0.86091,0.95402,0.94143,0.98448,0.8858,0.83089,0.93285,1.0949,1.39016,1.0949,1.45994,0.74627,1.04839,0.97454,0.97454,0.87207,0.97454,0.87533,1.06151,0.97454,1.00176,1.16484,1.08132,0.98047,1.16484,1.02989,1.01054,0.96225,0.97454,0.97454,1.06598,0.79004,1.16344,1.00351,0.94629,0.9973,0.91016,0.96777,0.9043,0.91082,0.92481,0.91082,1.17308,0.95748,0.96927,0.96927,1,0.96927,0.92481,0.80597,1.04839,1.23393,1.1781,0.9245,1.17308,1.20808,0.63218,0.94261,1.24822,1.09971,1.09971,1.04839,1,0.85273,0.78032,1.04839,1.09971,1.22326,0.9245,1.09836,1.13525,1.15222,0.70424,0.94729,0.94729,0.94729,0.94729,0.94729,0.94729,0.85498,0.88506,0.74817,0.74817,0.74817,0.74817,0.95782,0.95782,0.95782,0.95782,0.9858,1.03989,0.96924,0.96924,0.96924,0.96924,0.96924,1.17308,0.96924,0.95402,0.95402,0.95402,0.95402,0.83089,0.86237,0.88409,0.97454,0.97454,0.97454,0.97454,0.97454,0.97454,0.92916,0.87207,0.87533,0.87533,0.87533,0.87533,0.93146,0.93146,0.93146,0.93146,0.93854,1.01054,0.96225,0.96225,0.96225,0.96225,0.96225,1.24822,0.8761,1.00351,1.00351,1.00351,1.00351,0.96777,0.97454,0.96777,0.94729,0.97454,0.94729,0.97454,0.94729,0.97454,0.88506,0.87207,0.88506,0.87207,0.88506,0.87207,0.88506,0.87207,0.9858,0.95391,0.9858,0.97454,0.74817,0.87533,0.74817,0.87533,0.74817,0.87533,0.74817,0.87533,0.74817,0.87533,0.88449,0.97454,0.88449,0.97454,0.88449,0.97454,1,1,0.98039,1.00176,0.98039,1.00176,0.95782,0.93146,0.95782,0.93146,0.95782,0.93146,0.95782,1.16484,0.95782,0.93146,0.84421,1.12761,0.69238,1.08132,1,1,0.98047,0.83231,1.16484,1,1,0.84723,1.04861,0.84723,0.78755,0.83231,1.23736,1.03989,1.01054,1,1,1.03989,1.01054,0.9857,1.03849,1.01054,0.96924,0.96225,0.96924,0.96225,0.96924,0.96225,0.92383,0.90171,0.80595,1.06598,1,1,0.80595,1.06598,0.74524,0.79004,0.74524,0.79004,0.74524,0.79004,0.74524,0.79004,1,1,0.86091,1.02759,0.85771,1.16344,0.95402,1.00351,0.95402,1.00351,0.95402,1.00351,0.95402,1.00351,0.95402,1.00351,0.95402,1.00351,0.98448,0.9973,0.83089,0.96777,0.83089,0.93285,0.9043,0.93285,0.9043,0.93285,0.9043,1.31868,0.96927,0.94729,0.97454,0.85498,0.92916,0.96924,0.8761,1,1,0.86091,1.16344,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,0.81965,0.81965,0.94729,0.78032,0.71022,0.90883,0.84171,0.99877,0.77596,1.05734,1.2,0.94729,0.85944,0.82791,0.9607,0.74817,0.93285,0.98039,0.96924,0.95782,0.89898,0.98316,0.98183,1.03989,0.78614,0.96924,0.97642,0.86237,0.86075,0.86091,0.83089,0.90082,0.8858,0.97296,1.01284,0.95782,0.83089,1.0976,1.04,1.03342,1.2,1.0675,1.0976,0.98205,1.03809,1.05097,1.04,0.95364,1.03342,1.05401,1.2,1.02148,1.0119,1.04724,1.0127,1.02732,0.96225,0.8965,0.97783,0.93574,0.94818,1.30679,1.0675,1.11826,0.99821,1.0557,1.0326,1.2,1.0675,0.96225,1.0675,1.0326,0.74817,1,1,1,1,1,1,1,1,1,1,1,1,1.03754,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.87533,1,1,1,1,1,1,1,1,1,1,1,1,0.98705,1,1,1,1,1,1,0.98448,0.9973,0.98448,0.9973,0.98448,0.9973,0.83089,0.96777,1,1.20088,0.89903,1,1,0.75155,0.94945,0.94945,0.94945,0.94945,1.12317,1.12317,1.12317,0.67603,0.67603,1.15621,0.73584,1.21191,1.22135,1.06483,0.94868,0.94868,0.95996,1.24633,1,1.07497,0.87709,0.96927,1.01473,0.96927,1,1,1,0.77295,1,1,1.09836,1.09836,1.09836,1.01522,0.86321,0.94434,0.8649,0.94434,0.86182,1,1,1.083,1,0.91578,0.86438,1.17308,1.18416,1.14589,0.69825,0.97622,1.96791,1.24822,1.24822,1.17308,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,0.99862,0.99862,1,0.87025,0.87025,0.87025,0.87025,1.17984,1.42603,1,1.42603,1.42603,0.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10742,1.10742,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];var SegoeuiItalicMetrics={lineHeight:1.33008,lineGap:0};var SegoeuiRegularFactors=[1.76738,1,1,0.98594,1.02285,1.10454,1.06234,0.96927,0.92037,1.19985,1.2046,0.90616,0.90616,1.07152,1.1714,0.78032,1.20088,0.78032,1.40246,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.96927,0.78032,0.78032,1.1714,1.1714,1.1714,0.80597,0.94084,0.96706,0.85944,0.85734,0.97093,0.75842,0.79936,0.88198,0.9831,0.95782,0.71387,0.86969,0.84636,1.07796,1.03584,0.96924,0.83968,0.96924,0.82826,0.79649,0.85771,0.95132,0.93119,0.98965,0.88433,0.8287,0.93365,1.08612,1.3638,1.08612,1.45786,0.74627,0.80499,0.91484,1.05707,0.92383,1.05882,0.9403,1.12654,1.05882,1.01756,1.09011,1.09011,0.99414,1.09011,1.034,1.01756,1.05356,1.05707,1.05882,1.04399,0.84863,1.21968,1.01756,0.95801,1.00068,0.91797,0.96777,0.9043,0.90351,0.92105,0.90351,1.1714,0.85337,0.96927,0.96927,0.99912,0.96927,0.92105,0.80597,1.2434,1.20808,1.05937,0.90957,1.1714,1.20808,0.75155,0.94261,1.24644,1.09971,1.09971,0.84751,1,0.85273,0.78032,0.61584,1.05425,1.17914,0.90957,1.08665,1.11593,1.14169,0.73381,0.96706,0.96706,0.96706,0.96706,0.96706,0.96706,0.86035,0.85734,0.75842,0.75842,0.75842,0.75842,0.95782,0.95782,0.95782,0.95782,0.97093,1.03584,0.96924,0.96924,0.96924,0.96924,0.96924,1.1714,0.96924,0.95132,0.95132,0.95132,0.95132,0.8287,0.83968,0.89049,0.91484,0.91484,0.91484,0.91484,0.91484,0.91484,0.93575,0.92383,0.9403,0.9403,0.9403,0.9403,0.8717,0.8717,0.8717,0.8717,1.00527,1.01756,1.05356,1.05356,1.05356,1.05356,1.05356,1.24644,0.95923,1.01756,1.01756,1.01756,1.01756,0.96777,1.05707,0.96777,0.96706,0.91484,0.96706,0.91484,0.96706,0.91484,0.85734,0.92383,0.85734,0.92383,0.85734,0.92383,0.85734,0.92383,0.97093,1.0969,0.97093,1.05882,0.75842,0.9403,0.75842,0.9403,0.75842,0.9403,0.75842,0.9403,0.75842,0.9403,0.88198,1.05882,0.88198,1.05882,0.88198,1.05882,1,1,0.9831,1.01756,0.9831,1.01756,0.95782,0.8717,0.95782,0.8717,0.95782,0.8717,0.95782,1.09011,0.95782,0.8717,0.84784,1.11551,0.71387,1.09011,1,1,0.99414,0.84636,1.09011,1,1,0.84636,1.0536,0.84636,0.94298,0.84636,1.23297,1.03584,1.01756,1,1,1.03584,1.01756,1.00323,1.03444,1.01756,0.96924,1.05356,0.96924,1.05356,0.96924,1.05356,0.93066,0.98293,0.82826,1.04399,1,1,0.82826,1.04399,0.79649,0.84863,0.79649,0.84863,0.79649,0.84863,0.79649,0.84863,1,1,0.85771,1.17318,0.85771,1.21968,0.95132,1.01756,0.95132,1.01756,0.95132,1.01756,0.95132,1.01756,0.95132,1.01756,0.95132,1.01756,0.98965,1.00068,0.8287,0.96777,0.8287,0.93365,0.9043,0.93365,0.9043,0.93365,0.9043,1.08571,0.96927,0.96706,0.91484,0.86035,0.93575,0.96924,0.95923,1,1,0.85771,1.21968,1.11437,1.11437,0.93109,0.91202,0.60411,0.84164,0.55572,1.01173,0.97361,0.81818,0.81818,0.96635,0.78032,0.72727,0.92366,0.98601,1.03405,0.77968,1.09799,1.2,0.96706,0.85944,0.85638,0.96491,0.75842,0.93365,0.9831,0.96924,0.95782,0.86969,0.94152,1.07796,1.03584,0.78437,0.96924,0.98715,0.83968,0.83491,0.85771,0.8287,0.94492,0.88433,0.9287,1.0098,0.95782,0.8287,1.0625,0.98248,1.03424,1.2,1.01071,1.0625,0.95246,1.03809,1.04912,0.98248,1.00221,1.03424,1.05443,1.2,1.04785,0.99609,1.00169,1.05176,0.99346,1.05356,0.9087,1.03004,0.95542,0.93117,1.23362,1.01071,1.07831,1.02512,1.05205,1.03502,1.2,1.01071,1.05356,1.01071,1.03502,0.75842,1,1,1,1,1,1,1,1,1,1,1,1,1.03719,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.9403,1,1,1,1,1,1,1,1,1,1,1,1,1.04021,1,1,1,1,1,1,0.98965,1.00068,0.98965,1.00068,0.98965,1.00068,0.8287,0.96777,1,1.20088,0.89903,1,1,0.75155,1.03077,1.03077,1.03077,1.03077,1.13196,1.13196,1.13196,0.67428,0.67428,1.16039,0.73291,1.20996,1.22135,1.06483,0.94868,0.94868,0.95996,1.24633,1,1.07497,0.87796,0.96927,1.01518,0.96927,1,1,1,0.77295,1,1,1.10539,1.10539,1.11358,1.06967,0.86279,0.94434,0.86279,0.94434,0.86182,1,1,1.083,1,0.91578,0.86507,1.1714,1.18416,1.14589,0.69825,0.97622,1.9697,1.24822,1.24822,1.17238,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,0.99862,0.99862,1,0.87025,0.87025,0.87025,0.87025,1.18083,1.42603,1,1.42603,1.42603,0.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10938,1.10938,1,1,1,1.05425,1.09971,1.09971,1.09971,1,1,1,1,1,1,1,1,1,1,1];var SegoeuiRegularMetrics={lineHeight:1.33008,lineGap:0};
;// CONCATENATED MODULE: ./src/core/xfa_fonts.js
function xfa_fonts_slicedToArray(arr,i){return xfa_fonts_arrayWithHoles(arr)||xfa_fonts_iterableToArrayLimit(arr,i)||xfa_fonts_unsupportedIterableToArray(arr,i)||xfa_fonts_nonIterableRest();}function xfa_fonts_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function xfa_fonts_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function xfa_fonts_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function xfa_fonts_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=xfa_fonts_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function xfa_fonts_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return xfa_fonts_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xfa_fonts_arrayLikeToArray(o,minLen);}function xfa_fonts_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}var getXFAFontMap=getLookupTableFactory(function(t){t["MyriadPro-Regular"]=t["PdfJS-Fallback-Regular"]={name:"LiberationSans-Regular",factors:MyriadProRegularFactors,baseWidths:LiberationSansRegularWidths,baseMapping:LiberationSansRegularMapping,metrics:MyriadProRegularMetrics};t["MyriadPro-Bold"]=t["PdfJS-Fallback-Bold"]={name:"LiberationSans-Bold",factors:MyriadProBoldFactors,baseWidths:LiberationSansBoldWidths,baseMapping:LiberationSansBoldMapping,metrics:MyriadProBoldMetrics};t["MyriadPro-It"]=t["MyriadPro-Italic"]=t["PdfJS-Fallback-Italic"]={name:"LiberationSans-Italic",factors:MyriadProItalicFactors,baseWidths:LiberationSansItalicWidths,baseMapping:LiberationSansItalicMapping,metrics:MyriadProItalicMetrics};t["MyriadPro-BoldIt"]=t["MyriadPro-BoldItalic"]=t["PdfJS-Fallback-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:MyriadProBoldItalicFactors,baseWidths:LiberationSansBoldItalicWidths,baseMapping:LiberationSansBoldItalicMapping,metrics:MyriadProBoldItalicMetrics};t.ArialMT=t.Arial=t["Arial-Regular"]={name:"LiberationSans-Regular",baseWidths:LiberationSansRegularWidths,baseMapping:LiberationSansRegularMapping};t["Arial-BoldMT"]=t["Arial-Bold"]={name:"LiberationSans-Bold",baseWidths:LiberationSansBoldWidths,baseMapping:LiberationSansBoldMapping};t["Arial-ItalicMT"]=t["Arial-Italic"]={name:"LiberationSans-Italic",baseWidths:LiberationSansItalicWidths,baseMapping:LiberationSansItalicMapping};t["Arial-BoldItalicMT"]=t["Arial-BoldItalic"]={name:"LiberationSans-BoldItalic",baseWidths:LiberationSansBoldItalicWidths,baseMapping:LiberationSansBoldItalicMapping};t["Calibri-Regular"]={name:"LiberationSans-Regular",factors:CalibriRegularFactors,baseWidths:LiberationSansRegularWidths,baseMapping:LiberationSansRegularMapping,metrics:CalibriRegularMetrics};t["Calibri-Bold"]={name:"LiberationSans-Bold",factors:CalibriBoldFactors,baseWidths:LiberationSansBoldWidths,baseMapping:LiberationSansBoldMapping,metrics:CalibriBoldMetrics};t["Calibri-Italic"]={name:"LiberationSans-Italic",factors:CalibriItalicFactors,baseWidths:LiberationSansItalicWidths,baseMapping:LiberationSansItalicMapping,metrics:CalibriItalicMetrics};t["Calibri-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:CalibriBoldItalicFactors,baseWidths:LiberationSansBoldItalicWidths,baseMapping:LiberationSansBoldItalicMapping,metrics:CalibriBoldItalicMetrics};t["Segoeui-Regular"]={name:"LiberationSans-Regular",factors:SegoeuiRegularFactors,baseWidths:LiberationSansRegularWidths,baseMapping:LiberationSansRegularMapping,metrics:SegoeuiRegularMetrics};t["Segoeui-Bold"]={name:"LiberationSans-Bold",factors:SegoeuiBoldFactors,baseWidths:LiberationSansBoldWidths,baseMapping:LiberationSansBoldMapping,metrics:SegoeuiBoldMetrics};t["Segoeui-Italic"]={name:"LiberationSans-Italic",factors:SegoeuiItalicFactors,baseWidths:LiberationSansItalicWidths,baseMapping:LiberationSansItalicMapping,metrics:SegoeuiItalicMetrics};t["Segoeui-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:SegoeuiBoldItalicFactors,baseWidths:LiberationSansBoldItalicWidths,baseMapping:LiberationSansBoldItalicMapping,metrics:SegoeuiBoldItalicMetrics};t["Helvetica-Regular"]=t.Helvetica={name:"LiberationSans-Regular",factors:HelveticaRegularFactors,baseWidths:LiberationSansRegularWidths,baseMapping:LiberationSansRegularMapping,metrics:HelveticaRegularMetrics};t["Helvetica-Bold"]={name:"LiberationSans-Bold",factors:HelveticaBoldFactors,baseWidths:LiberationSansBoldWidths,baseMapping:LiberationSansBoldMapping,metrics:HelveticaBoldMetrics};t["Helvetica-Italic"]={name:"LiberationSans-Italic",factors:HelveticaItalicFactors,baseWidths:LiberationSansItalicWidths,baseMapping:LiberationSansItalicMapping,metrics:HelveticaItalicMetrics};t["Helvetica-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:HelveticaBoldItalicFactors,baseWidths:LiberationSansBoldItalicWidths,baseMapping:LiberationSansBoldItalicMapping,metrics:HelveticaBoldItalicMetrics};});function getXfaFontName(name){var fontName=normalizeFontName(name);var fontMap=getXFAFontMap();return fontMap[fontName];}function getXfaFontWidths(name){var info=getXfaFontName(name);if(!info){return null;}var baseWidths=info.baseWidths,baseMapping=info.baseMapping,factors=info.factors;var rescaledBaseWidths=!factors?baseWidths:baseWidths.map(function(w,i){return w*factors[i];});var currentCode=-2;var currentArray;var newWidths=[];var _iterator=xfa_fonts_createForOfIteratorHelper(baseMapping.map(function(charUnicode,index){return[charUnicode,index];}).sort(function(_ref,_ref2){var _ref3=xfa_fonts_slicedToArray(_ref,1),unicode1=_ref3[0];var _ref4=xfa_fonts_slicedToArray(_ref2,1),unicode2=_ref4[0];return unicode1-unicode2;})),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=xfa_fonts_slicedToArray(_step.value,2),unicode=_step$value[0],glyphIndex=_step$value[1];if(unicode===-1){continue;}if(unicode===currentCode+1){currentArray.push(rescaledBaseWidths[glyphIndex]);currentCode+=1;}else{currentCode=unicode;currentArray=[rescaledBaseWidths[glyphIndex]];newWidths.push(unicode,currentArray);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return newWidths;}function getXfaFontDict(name){var widths=getXfaFontWidths(name);var dict=new Dict(null);dict.set("BaseFont",Name.get(name));dict.set("Type",Name.get("Font"));dict.set("Subtype",Name.get("CIDFontType2"));dict.set("Encoding",Name.get("Identity-H"));dict.set("CIDToGIDMap",Name.get("Identity"));dict.set("W",widths);dict.set("FirstChar",widths[0]);dict.set("LastChar",widths.at(-2)+widths.at(-1).length-1);var descriptor=new Dict(null);dict.set("FontDescriptor",descriptor);var systemInfo=new Dict(null);systemInfo.set("Ordering","Identity");systemInfo.set("Registry","Adobe");systemInfo.set("Supplement",0);dict.set("CIDSystemInfo",systemInfo);return dict;}
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.float64-array.js
var es_typed_array_float64_array = __webpack_require__(8957);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.log10.js
var es_math_log10 = __webpack_require__(2466);
;// CONCATENATED MODULE: ./src/core/ps_parser.js
function ps_parser_typeof(o){"@babel/helpers - typeof";return ps_parser_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},ps_parser_typeof(o);}function ps_parser_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ps_parser_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,ps_parser_toPropertyKey(descriptor.key),descriptor);}}function ps_parser_createClass(Constructor,protoProps,staticProps){if(protoProps)ps_parser_defineProperties(Constructor.prototype,protoProps);if(staticProps)ps_parser_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function ps_parser_toPropertyKey(arg){var key=ps_parser_toPrimitive(arg,"string");return ps_parser_typeof(key)==="symbol"?key:String(key);}function ps_parser_toPrimitive(input,hint){if(ps_parser_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(ps_parser_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var PostScriptParser=/*#__PURE__*/function(){function PostScriptParser(lexer){ps_parser_classCallCheck(this,PostScriptParser);this.lexer=lexer;this.operators=[];this.token=null;this.prev=null;}ps_parser_createClass(PostScriptParser,[{key:"nextToken",value:function nextToken(){this.prev=this.token;this.token=this.lexer.getToken();}},{key:"accept",value:function accept(type){if(this.token.type===type){this.nextToken();return true;}return false;}},{key:"expect",value:function expect(type){if(this.accept(type)){return true;}throw new FormatError("Unexpected symbol: found ".concat(this.token.type," expected ").concat(type,"."));}},{key:"parse",value:function parse(){this.nextToken();this.expect(PostScriptTokenTypes.LBRACE);this.parseBlock();this.expect(PostScriptTokenTypes.RBRACE);return this.operators;}},{key:"parseBlock",value:function parseBlock(){while(true){if(this.accept(PostScriptTokenTypes.NUMBER)){this.operators.push(this.prev.value);}else if(this.accept(PostScriptTokenTypes.OPERATOR)){this.operators.push(this.prev.value);}else if(this.accept(PostScriptTokenTypes.LBRACE)){this.parseCondition();}else{return;}}}},{key:"parseCondition",value:function parseCondition(){var conditionLocation=this.operators.length;this.operators.push(null,null);this.parseBlock();this.expect(PostScriptTokenTypes.RBRACE);if(this.accept(PostScriptTokenTypes.IF)){this.operators[conditionLocation]=this.operators.length;this.operators[conditionLocation+1]="jz";}else if(this.accept(PostScriptTokenTypes.LBRACE)){var jumpLocation=this.operators.length;this.operators.push(null,null);var endOfTrue=this.operators.length;this.parseBlock();this.expect(PostScriptTokenTypes.RBRACE);this.expect(PostScriptTokenTypes.IFELSE);this.operators[jumpLocation]=this.operators.length;this.operators[jumpLocation+1]="j";this.operators[conditionLocation]=endOfTrue;this.operators[conditionLocation+1]="jz";}else{throw new FormatError("PS Function: error parsing conditional.");}}}]);return PostScriptParser;}();var PostScriptTokenTypes={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5};var PostScriptToken=/*#__PURE__*/function(){function PostScriptToken(type,value){ps_parser_classCallCheck(this,PostScriptToken);this.type=type;this.value=value;}ps_parser_createClass(PostScriptToken,null,[{key:"opCache",get:function get(){return shadow(this,"opCache",Object.create(null));}},{key:"getOperator",value:function getOperator(op){var _PostScriptToken$opCa;return(_PostScriptToken$opCa=PostScriptToken.opCache)[op]||(_PostScriptToken$opCa[op]=new PostScriptToken(PostScriptTokenTypes.OPERATOR,op));}},{key:"LBRACE",get:function get(){return shadow(this,"LBRACE",new PostScriptToken(PostScriptTokenTypes.LBRACE,"{"));}},{key:"RBRACE",get:function get(){return shadow(this,"RBRACE",new PostScriptToken(PostScriptTokenTypes.RBRACE,"}"));}},{key:"IF",get:function get(){return shadow(this,"IF",new PostScriptToken(PostScriptTokenTypes.IF,"IF"));}},{key:"IFELSE",get:function get(){return shadow(this,"IFELSE",new PostScriptToken(PostScriptTokenTypes.IFELSE,"IFELSE"));}}]);return PostScriptToken;}();var PostScriptLexer=/*#__PURE__*/function(){function PostScriptLexer(stream){ps_parser_classCallCheck(this,PostScriptLexer);this.stream=stream;this.nextChar();this.strBuf=[];}ps_parser_createClass(PostScriptLexer,[{key:"nextChar",value:function nextChar(){return this.currentChar=this.stream.getByte();}},{key:"getToken",value:function getToken(){var comment=false;var ch=this.currentChar;while(true){if(ch<0){return EOF;}if(comment){if(ch===0x0a||ch===0x0d){comment=false;}}else if(ch===0x25){comment=true;}else if(!isWhiteSpace(ch)){break;}ch=this.nextChar();}switch(ch|0){case 0x30:case 0x31:case 0x32:case 0x33:case 0x34:case 0x35:case 0x36:case 0x37:case 0x38:case 0x39:case 0x2b:case 0x2d:case 0x2e:return new PostScriptToken(PostScriptTokenTypes.NUMBER,this.getNumber());case 0x7b:this.nextChar();return PostScriptToken.LBRACE;case 0x7d:this.nextChar();return PostScriptToken.RBRACE;}var strBuf=this.strBuf;strBuf.length=0;strBuf[0]=String.fromCharCode(ch);while((ch=this.nextChar())>=0&&(ch>=0x41&&ch<=0x5a||ch>=0x61&&ch<=0x7a)){strBuf.push(String.fromCharCode(ch));}var str=strBuf.join("");switch(str.toLowerCase()){case"if":return PostScriptToken.IF;case"ifelse":return PostScriptToken.IFELSE;default:return PostScriptToken.getOperator(str);}}},{key:"getNumber",value:function getNumber(){var ch=this.currentChar;var strBuf=this.strBuf;strBuf.length=0;strBuf[0]=String.fromCharCode(ch);while((ch=this.nextChar())>=0){if(ch>=0x30&&ch<=0x39||ch===0x2d||ch===0x2e){strBuf.push(String.fromCharCode(ch));}else{break;}}var value=parseFloat(strBuf.join(""));if(isNaN(value)){throw new FormatError("Invalid floating point number: ".concat(value));}return value;}}]);return PostScriptLexer;}();
;// CONCATENATED MODULE: ./src/core/image_utils.js
function image_utils_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=core_image_utils_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function core_image_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return core_image_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return core_image_utils_arrayLikeToArray(o,minLen);}function core_image_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function image_utils_defineProperty(obj,key,value){key=image_utils_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function image_utils_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)image_utils_setPrototypeOf(subClass,superClass);}function image_utils_setPrototypeOf(o,p){image_utils_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return image_utils_setPrototypeOf(o,p);}function image_utils_createSuper(Derived){var hasNativeReflectConstruct=image_utils_isNativeReflectConstruct();return function _createSuperInternal(){var Super=image_utils_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=image_utils_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return image_utils_possibleConstructorReturn(this,result);};}function image_utils_possibleConstructorReturn(self,call){if(call&&(image_utils_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return image_utils_assertThisInitialized(self);}function image_utils_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function image_utils_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function image_utils_getPrototypeOf(o){image_utils_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return image_utils_getPrototypeOf(o);}function image_utils_typeof(o){"@babel/helpers - typeof";return image_utils_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},image_utils_typeof(o);}function image_utils_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function image_utils_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,image_utils_toPropertyKey(descriptor.key),descriptor);}}function image_utils_createClass(Constructor,protoProps,staticProps){if(protoProps)image_utils_defineProperties(Constructor.prototype,protoProps);if(staticProps)image_utils_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function image_utils_toPropertyKey(arg){var key=image_utils_toPrimitive(arg,"string");return image_utils_typeof(key)==="symbol"?key:String(key);}function image_utils_toPrimitive(input,hint){if(image_utils_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(image_utils_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var BaseLocalCache=/*#__PURE__*/function(){function BaseLocalCache(options){image_utils_classCallCheck(this,BaseLocalCache);if(this.constructor===BaseLocalCache){unreachable("Cannot initialize BaseLocalCache.");}this._onlyRefs=(options===null||options===void 0?void 0:options.onlyRefs)===true;if(!this._onlyRefs){this._nameRefMap=new Map();this._imageMap=new Map();}this._imageCache=new RefSetCache();}image_utils_createClass(BaseLocalCache,[{key:"getByName",value:function getByName(name){if(this._onlyRefs){unreachable("Should not call `getByName` method.");}var ref=this._nameRefMap.get(name);if(ref){return this.getByRef(ref);}return this._imageMap.get(name)||null;}},{key:"getByRef",value:function getByRef(ref){return this._imageCache.get(ref)||null;}},{key:"set",value:function set(name,ref,data){unreachable("Abstract method `set` called.");}}]);return BaseLocalCache;}();var LocalImageCache=/*#__PURE__*/function(_BaseLocalCache){image_utils_inherits(LocalImageCache,_BaseLocalCache);var _super=image_utils_createSuper(LocalImageCache);function LocalImageCache(){image_utils_classCallCheck(this,LocalImageCache);return _super.apply(this,arguments);}image_utils_createClass(LocalImageCache,[{key:"set",value:function set(name){var ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var data=arguments.length>2?arguments[2]:undefined;if(typeof name!=="string"){throw new Error('LocalImageCache.set - expected "name" argument.');}if(ref){if(this._imageCache.has(ref)){return;}this._nameRefMap.set(name,ref);this._imageCache.put(ref,data);return;}if(this._imageMap.has(name)){return;}this._imageMap.set(name,data);}}]);return LocalImageCache;}(BaseLocalCache);var LocalColorSpaceCache=/*#__PURE__*/function(_BaseLocalCache2){image_utils_inherits(LocalColorSpaceCache,_BaseLocalCache2);var _super2=image_utils_createSuper(LocalColorSpaceCache);function LocalColorSpaceCache(){image_utils_classCallCheck(this,LocalColorSpaceCache);return _super2.apply(this,arguments);}image_utils_createClass(LocalColorSpaceCache,[{key:"set",value:function set(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var data=arguments.length>2?arguments[2]:undefined;if(typeof name!=="string"&&!ref){throw new Error('LocalColorSpaceCache.set - expected "name" and/or "ref" argument.');}if(ref){if(this._imageCache.has(ref)){return;}if(name!==null){this._nameRefMap.set(name,ref);}this._imageCache.put(ref,data);return;}if(this._imageMap.has(name)){return;}this._imageMap.set(name,data);}}]);return LocalColorSpaceCache;}(BaseLocalCache);var LocalFunctionCache=/*#__PURE__*/function(_BaseLocalCache3){image_utils_inherits(LocalFunctionCache,_BaseLocalCache3);var _super3=image_utils_createSuper(LocalFunctionCache);function LocalFunctionCache(options){image_utils_classCallCheck(this,LocalFunctionCache);return _super3.call(this,{onlyRefs:true});}image_utils_createClass(LocalFunctionCache,[{key:"set",value:function set(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var ref=arguments.length>1?arguments[1]:undefined;var data=arguments.length>2?arguments[2]:undefined;if(!ref){throw new Error('LocalFunctionCache.set - expected "ref" argument.');}if(this._imageCache.has(ref)){return;}this._imageCache.put(ref,data);}}]);return LocalFunctionCache;}(BaseLocalCache);var LocalGStateCache=/*#__PURE__*/function(_BaseLocalCache4){image_utils_inherits(LocalGStateCache,_BaseLocalCache4);var _super4=image_utils_createSuper(LocalGStateCache);function LocalGStateCache(){image_utils_classCallCheck(this,LocalGStateCache);return _super4.apply(this,arguments);}image_utils_createClass(LocalGStateCache,[{key:"set",value:function set(name){var ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var data=arguments.length>2?arguments[2]:undefined;if(typeof name!=="string"){throw new Error('LocalGStateCache.set - expected "name" argument.');}if(ref){if(this._imageCache.has(ref)){return;}this._nameRefMap.set(name,ref);this._imageCache.put(ref,data);return;}if(this._imageMap.has(name)){return;}this._imageMap.set(name,data);}}]);return LocalGStateCache;}(BaseLocalCache);var LocalTilingPatternCache=/*#__PURE__*/function(_BaseLocalCache5){image_utils_inherits(LocalTilingPatternCache,_BaseLocalCache5);var _super5=image_utils_createSuper(LocalTilingPatternCache);function LocalTilingPatternCache(options){image_utils_classCallCheck(this,LocalTilingPatternCache);return _super5.call(this,{onlyRefs:true});}image_utils_createClass(LocalTilingPatternCache,[{key:"set",value:function set(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var ref=arguments.length>1?arguments[1]:undefined;var data=arguments.length>2?arguments[2]:undefined;if(!ref){throw new Error('LocalTilingPatternCache.set - expected "ref" argument.');}if(this._imageCache.has(ref)){return;}this._imageCache.put(ref,data);}}]);return LocalTilingPatternCache;}(BaseLocalCache);var RegionalImageCache=/*#__PURE__*/function(_BaseLocalCache6){image_utils_inherits(RegionalImageCache,_BaseLocalCache6);var _super6=image_utils_createSuper(RegionalImageCache);function RegionalImageCache(options){image_utils_classCallCheck(this,RegionalImageCache);return _super6.call(this,{onlyRefs:true});}image_utils_createClass(RegionalImageCache,[{key:"set",value:function set(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var ref=arguments.length>1?arguments[1]:undefined;var data=arguments.length>2?arguments[2]:undefined;if(!ref){throw new Error('RegionalImageCache.set - expected "ref" argument.');}if(this._imageCache.has(ref)){return;}this._imageCache.put(ref,data);}}]);return RegionalImageCache;}(BaseLocalCache);var GlobalImageCache=/*#__PURE__*/function(){function GlobalImageCache(){image_utils_classCallCheck(this,GlobalImageCache);this._refCache=new RefSetCache();this._imageCache=new RefSetCache();}image_utils_createClass(GlobalImageCache,[{key:"_byteSize",get:function get(){var byteSize=0;var _iterator=image_utils_createForOfIteratorHelper(this._imageCache),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var imageData=_step.value;byteSize+=imageData.byteSize;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return byteSize;}},{key:"_cacheLimitReached",get:function get(){if(this._imageCache.size<GlobalImageCache.MIN_IMAGES_TO_CACHE){return false;}if(this._byteSize<GlobalImageCache.MAX_BYTE_SIZE){return false;}return true;}},{key:"shouldCache",value:function shouldCache(ref,pageIndex){var pageIndexSet=this._refCache.get(ref);if(!pageIndexSet){pageIndexSet=new Set();this._refCache.put(ref,pageIndexSet);}pageIndexSet.add(pageIndex);if(pageIndexSet.size<GlobalImageCache.NUM_PAGES_THRESHOLD){return false;}if(!this._imageCache.has(ref)&&this._cacheLimitReached){return false;}return true;}},{key:"addByteSize",value:function addByteSize(ref,byteSize){var imageData=this._imageCache.get(ref);if(!imageData){return;}if(imageData.byteSize){return;}imageData.byteSize=byteSize;}},{key:"getData",value:function getData(ref,pageIndex){var pageIndexSet=this._refCache.get(ref);if(!pageIndexSet){return null;}if(pageIndexSet.size<GlobalImageCache.NUM_PAGES_THRESHOLD){return null;}var imageData=this._imageCache.get(ref);if(!imageData){return null;}pageIndexSet.add(pageIndex);return imageData;}},{key:"setData",value:function setData(ref,data){if(!this._refCache.has(ref)){throw new Error('GlobalImageCache.setData - expected "shouldCache" to have been called.');}if(this._imageCache.has(ref)){return;}if(this._cacheLimitReached){warn("GlobalImageCache.setData - cache limit reached.");return;}this._imageCache.put(ref,data);}},{key:"clear",value:function clear(){var onlyData=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!onlyData){this._refCache.clear();}this._imageCache.clear();}}]);return GlobalImageCache;}();image_utils_defineProperty(GlobalImageCache,"NUM_PAGES_THRESHOLD",2);image_utils_defineProperty(GlobalImageCache,"MIN_IMAGES_TO_CACHE",10);image_utils_defineProperty(GlobalImageCache,"MAX_BYTE_SIZE",5*MAX_IMAGE_SIZE_TO_CACHE);
;// CONCATENATED MODULE: ./src/core/function.js
function function_toConsumableArray(arr){return function_arrayWithoutHoles(arr)||function_iterableToArray(arr)||function_unsupportedIterableToArray(arr)||function_nonIterableSpread();}function function_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function function_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function function_arrayWithoutHoles(arr){if(Array.isArray(arr))return function_arrayLikeToArray(arr);}function function_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)function_setPrototypeOf(subClass,superClass);}function function_setPrototypeOf(o,p){function_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return function_setPrototypeOf(o,p);}function function_createSuper(Derived){var hasNativeReflectConstruct=function_isNativeReflectConstruct();return function _createSuperInternal(){var Super=function_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=function_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return function_possibleConstructorReturn(this,result);};}function function_possibleConstructorReturn(self,call){if(call&&(function_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return function_assertThisInitialized(self);}function function_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function function_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function function_getPrototypeOf(o){function_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return function_getPrototypeOf(o);}function function_defineProperty(obj,key,value){key=function_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function function_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function function_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return function_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return function_arrayLikeToArray(o,minLen);}function function_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function function_typeof(o){"@babel/helpers - typeof";return function_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},function_typeof(o);}function function_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function function_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,function_toPropertyKey(descriptor.key),descriptor);}}function function_createClass(Constructor,protoProps,staticProps){if(protoProps)function_defineProperties(Constructor.prototype,protoProps);if(staticProps)function_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function function_toPropertyKey(arg){var key=function_toPrimitive(arg,"string");return function_typeof(key)==="symbol"?key:String(key);}function function_toPrimitive(input,hint){if(function_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(function_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var PDFFunctionFactory=/*#__PURE__*/function(){function PDFFunctionFactory(_ref){var xref=_ref.xref,_ref$isEvalSupported=_ref.isEvalSupported,isEvalSupported=_ref$isEvalSupported===void 0?true:_ref$isEvalSupported;function_classCallCheck(this,PDFFunctionFactory);this.xref=xref;this.isEvalSupported=isEvalSupported!==false;}function_createClass(PDFFunctionFactory,[{key:"create",value:function create(fn){var cachedFunction=this.getCached(fn);if(cachedFunction){return cachedFunction;}var parsedFunction=PDFFunction.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:fn instanceof Ref?this.xref.fetch(fn):fn});this._cache(fn,parsedFunction);return parsedFunction;}},{key:"createFromArray",value:function createFromArray(fnObj){var cachedFunction=this.getCached(fnObj);if(cachedFunction){return cachedFunction;}var parsedFunction=PDFFunction.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:fnObj instanceof Ref?this.xref.fetch(fnObj):fnObj});this._cache(fnObj,parsedFunction);return parsedFunction;}},{key:"getCached",value:function getCached(cacheKey){var fnRef;if(cacheKey instanceof Ref){fnRef=cacheKey;}else if(cacheKey instanceof Dict){fnRef=cacheKey.objId;}else if(cacheKey instanceof BaseStream){var _cacheKey$dict;fnRef=(_cacheKey$dict=cacheKey.dict)===null||_cacheKey$dict===void 0?void 0:_cacheKey$dict.objId;}if(fnRef){var localFunction=this._localFunctionCache.getByRef(fnRef);if(localFunction){return localFunction;}}return null;}},{key:"_cache",value:function _cache(cacheKey,parsedFunction){if(!parsedFunction){throw new Error('PDFFunctionFactory._cache - expected "parsedFunction" argument.');}var fnRef;if(cacheKey instanceof Ref){fnRef=cacheKey;}else if(cacheKey instanceof Dict){fnRef=cacheKey.objId;}else if(cacheKey instanceof BaseStream){var _cacheKey$dict2;fnRef=(_cacheKey$dict2=cacheKey.dict)===null||_cacheKey$dict2===void 0?void 0:_cacheKey$dict2.objId;}if(fnRef){this._localFunctionCache.set(null,fnRef,parsedFunction);}}},{key:"_localFunctionCache",get:function get(){return shadow(this,"_localFunctionCache",new LocalFunctionCache());}}]);return PDFFunctionFactory;}();function toNumberArray(arr){if(!Array.isArray(arr)){return null;}var length=arr.length;for(var i=0;i<length;i++){if(typeof arr[i]!=="number"){var result=new Array(length);for(var j=0;j<length;j++){result[j]=+arr[j];}return result;}}return arr;}var PDFFunction=/*#__PURE__*/function(){function PDFFunction(){function_classCallCheck(this,PDFFunction);}function_createClass(PDFFunction,null,[{key:"getSampleArray",value:function getSampleArray(size,outputSize,bps,stream){var i,ii;var length=1;for(i=0,ii=size.length;i<ii;i++){length*=size[i];}length*=outputSize;var array=new Array(length);var codeSize=0;var codeBuf=0;var sampleMul=1.0/(Math.pow(2.0,bps)-1);var strBytes=stream.getBytes((length*bps+7)/8);var strIdx=0;for(i=0;i<length;i++){while(codeSize<bps){codeBuf<<=8;codeBuf|=strBytes[strIdx++];codeSize+=8;}codeSize-=bps;array[i]=(codeBuf>>codeSize)*sampleMul;codeBuf&=(1<<codeSize)-1;}return array;}},{key:"parse",value:function parse(_ref2){var xref=_ref2.xref,isEvalSupported=_ref2.isEvalSupported,fn=_ref2.fn;var dict=fn.dict||fn;var typeNum=dict.get("FunctionType");switch(typeNum){case 0:return this.constructSampled({xref:xref,isEvalSupported:isEvalSupported,fn:fn,dict:dict});case 1:break;case 2:return this.constructInterpolated({xref:xref,isEvalSupported:isEvalSupported,dict:dict});case 3:return this.constructStiched({xref:xref,isEvalSupported:isEvalSupported,dict:dict});case 4:return this.constructPostScript({xref:xref,isEvalSupported:isEvalSupported,fn:fn,dict:dict});}throw new FormatError("Unknown type of function");}},{key:"parseArray",value:function parseArray(_ref3){var xref=_ref3.xref,isEvalSupported=_ref3.isEvalSupported,fnObj=_ref3.fnObj;if(!Array.isArray(fnObj)){return this.parse({xref:xref,isEvalSupported:isEvalSupported,fn:fnObj});}var fnArray=[];var _iterator=function_createForOfIteratorHelper(fnObj),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var fn=_step.value;fnArray.push(this.parse({xref:xref,isEvalSupported:isEvalSupported,fn:xref.fetchIfRef(fn)}));}}catch(err){_iterator.e(err);}finally{_iterator.f();}return function(src,srcOffset,dest,destOffset){for(var i=0,ii=fnArray.length;i<ii;i++){fnArray[i](src,srcOffset,dest,destOffset+i);}};}},{key:"constructSampled",value:function constructSampled(_ref4){var xref=_ref4.xref,isEvalSupported=_ref4.isEvalSupported,fn=_ref4.fn,dict=_ref4.dict;function toMultiArray(arr){var inputLength=arr.length;var out=[];var index=0;for(var i=0;i<inputLength;i+=2){out[index++]=[arr[i],arr[i+1]];}return out;}function interpolate(x,xmin,xmax,ymin,ymax){return ymin+(x-xmin)*((ymax-ymin)/(xmax-xmin));}var domain=toNumberArray(dict.getArray("Domain"));var range=toNumberArray(dict.getArray("Range"));if(!domain||!range){throw new FormatError("No domain or range");}var inputSize=domain.length/2;var outputSize=range.length/2;domain=toMultiArray(domain);range=toMultiArray(range);var size=toNumberArray(dict.getArray("Size"));var bps=dict.get("BitsPerSample");var order=dict.get("Order")||1;if(order!==1){info("No support for cubic spline interpolation: "+order);}var encode=toNumberArray(dict.getArray("Encode"));if(!encode){encode=[];for(var i=0;i<inputSize;++i){encode.push([0,size[i]-1]);}}else{encode=toMultiArray(encode);}var decode=toNumberArray(dict.getArray("Decode"));decode=!decode?range:toMultiArray(decode);var samples=this.getSampleArray(size,outputSize,bps,fn);return function constructSampledFn(src,srcOffset,dest,destOffset){var cubeVertices=1<<inputSize;var cubeN=new Float64Array(cubeVertices);var cubeVertex=new Uint32Array(cubeVertices);var i,j;for(j=0;j<cubeVertices;j++){cubeN[j]=1;}var k=outputSize,pos=1;for(i=0;i<inputSize;++i){var domain_2i=domain[i][0];var domain_2i_1=domain[i][1];var xi=Math.min(Math.max(src[srcOffset+i],domain_2i),domain_2i_1);var e=interpolate(xi,domain_2i,domain_2i_1,encode[i][0],encode[i][1]);var size_i=size[i];e=Math.min(Math.max(e,0),size_i-1);var e0=e<size_i-1?Math.floor(e):e-1;var n0=e0+1-e;var n1=e-e0;var offset0=e0*k;var offset1=offset0+k;for(j=0;j<cubeVertices;j++){if(j&pos){cubeN[j]*=n1;cubeVertex[j]+=offset1;}else{cubeN[j]*=n0;cubeVertex[j]+=offset0;}}k*=size_i;pos<<=1;}for(j=0;j<outputSize;++j){var rj=0;for(i=0;i<cubeVertices;i++){rj+=samples[cubeVertex[i]+j]*cubeN[i];}rj=interpolate(rj,0,1,decode[j][0],decode[j][1]);dest[destOffset+j]=Math.min(Math.max(rj,range[j][0]),range[j][1]);}};}},{key:"constructInterpolated",value:function constructInterpolated(_ref5){var xref=_ref5.xref,isEvalSupported=_ref5.isEvalSupported,dict=_ref5.dict;var c0=toNumberArray(dict.getArray("C0"))||[0];var c1=toNumberArray(dict.getArray("C1"))||[1];var n=dict.get("N");var diff=[];for(var i=0,ii=c0.length;i<ii;++i){diff.push(c1[i]-c0[i]);}var length=diff.length;return function constructInterpolatedFn(src,srcOffset,dest,destOffset){var x=n===1?src[srcOffset]:Math.pow(src[srcOffset],n);for(var j=0;j<length;++j){dest[destOffset+j]=c0[j]+x*diff[j];}};}},{key:"constructStiched",value:function constructStiched(_ref6){var xref=_ref6.xref,isEvalSupported=_ref6.isEvalSupported,dict=_ref6.dict;var domain=toNumberArray(dict.getArray("Domain"));if(!domain){throw new FormatError("No domain");}var inputSize=domain.length/2;if(inputSize!==1){throw new FormatError("Bad domain for stiched function");}var fns=[];var _iterator2=function_createForOfIteratorHelper(dict.get("Functions")),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var fn=_step2.value;fns.push(this.parse({xref:xref,isEvalSupported:isEvalSupported,fn:xref.fetchIfRef(fn)}));}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var bounds=toNumberArray(dict.getArray("Bounds"));var encode=toNumberArray(dict.getArray("Encode"));var tmpBuf=new Float32Array(1);return function constructStichedFn(src,srcOffset,dest,destOffset){var clip=function constructStichedFromIRClip(v,min,max){if(v>max){v=max;}else if(v<min){v=min;}return v;};var v=clip(src[srcOffset],domain[0],domain[1]);var length=bounds.length;var i;for(i=0;i<length;++i){if(v<bounds[i]){break;}}var dmin=domain[0];if(i>0){dmin=bounds[i-1];}var dmax=domain[1];if(i<bounds.length){dmax=bounds[i];}var rmin=encode[2*i];var rmax=encode[2*i+1];tmpBuf[0]=dmin===dmax?rmin:rmin+(v-dmin)*(rmax-rmin)/(dmax-dmin);fns[i](tmpBuf,0,dest,destOffset);};}},{key:"constructPostScript",value:function constructPostScript(_ref7){var xref=_ref7.xref,isEvalSupported=_ref7.isEvalSupported,fn=_ref7.fn,dict=_ref7.dict;var domain=toNumberArray(dict.getArray("Domain"));var range=toNumberArray(dict.getArray("Range"));if(!domain){throw new FormatError("No domain.");}if(!range){throw new FormatError("No range.");}var lexer=new PostScriptLexer(fn);var parser=new PostScriptParser(lexer);var code=parser.parse();if(isEvalSupported&&FeatureTest.isEvalSupported){var compiled=new PostScriptCompiler().compile(code,domain,range);if(compiled){return new Function("src","srcOffset","dest","destOffset",compiled);}}info("Unable to compile PS function");var numOutputs=range.length>>1;var numInputs=domain.length>>1;var evaluator=new PostScriptEvaluator(code);var cache=Object.create(null);var MAX_CACHE_SIZE=2048*4;var cache_available=MAX_CACHE_SIZE;var tmpBuf=new Float32Array(numInputs);return function constructPostScriptFn(src,srcOffset,dest,destOffset){var i,value;var key="";var input=tmpBuf;for(i=0;i<numInputs;i++){value=src[srcOffset+i];input[i]=value;key+=value+"_";}var cachedValue=cache[key];if(cachedValue!==undefined){dest.set(cachedValue,destOffset);return;}var output=new Float32Array(numOutputs);var stack=evaluator.execute(input);var stackIndex=stack.length-numOutputs;for(i=0;i<numOutputs;i++){value=stack[stackIndex+i];var bound=range[i*2];if(value<bound){value=bound;}else{bound=range[i*2+1];if(value>bound){value=bound;}}output[i]=value;}if(cache_available>0){cache_available--;cache[key]=output;}dest.set(output,destOffset);};}}]);return PDFFunction;}();function isPDFFunction(v){var fnDict;if(v instanceof Dict){fnDict=v;}else if(v instanceof BaseStream){fnDict=v.dict;}else{return false;}return fnDict.has("FunctionType");}var PostScriptStack=/*#__PURE__*/function(){function PostScriptStack(initialStack){function_classCallCheck(this,PostScriptStack);this.stack=initialStack?Array.from(initialStack):[];}function_createClass(PostScriptStack,[{key:"push",value:function push(value){if(this.stack.length>=PostScriptStack.MAX_STACK_SIZE){throw new Error("PostScript function stack overflow.");}this.stack.push(value);}},{key:"pop",value:function pop(){if(this.stack.length<=0){throw new Error("PostScript function stack underflow.");}return this.stack.pop();}},{key:"copy",value:function copy(n){if(this.stack.length+n>=PostScriptStack.MAX_STACK_SIZE){throw new Error("PostScript function stack overflow.");}var stack=this.stack;for(var i=stack.length-n,j=n-1;j>=0;j--,i++){stack.push(stack[i]);}}},{key:"index",value:function index(n){this.push(this.stack[this.stack.length-n-1]);}},{key:"roll",value:function roll(n,p){var stack=this.stack;var l=stack.length-n;var r=stack.length-1;var c=l+(p-Math.floor(p/n)*n);for(var i=l,j=r;i<j;i++,j--){var t=stack[i];stack[i]=stack[j];stack[j]=t;}for(var _i=l,_j=c-1;_i<_j;_i++,_j--){var _t=stack[_i];stack[_i]=stack[_j];stack[_j]=_t;}for(var _i2=c,_j2=r;_i2<_j2;_i2++,_j2--){var _t2=stack[_i2];stack[_i2]=stack[_j2];stack[_j2]=_t2;}}}]);return PostScriptStack;}();function_defineProperty(PostScriptStack,"MAX_STACK_SIZE",100);var PostScriptEvaluator=/*#__PURE__*/function(){function PostScriptEvaluator(operators){function_classCallCheck(this,PostScriptEvaluator);this.operators=operators;}function_createClass(PostScriptEvaluator,[{key:"execute",value:function execute(initialStack){var stack=new PostScriptStack(initialStack);var counter=0;var operators=this.operators;var length=operators.length;var operator,a,b;while(counter<length){operator=operators[counter++];if(typeof operator==="number"){stack.push(operator);continue;}switch(operator){case"jz":b=stack.pop();a=stack.pop();if(!a){counter=b;}break;case"j":a=stack.pop();counter=a;break;case"abs":a=stack.pop();stack.push(Math.abs(a));break;case"add":b=stack.pop();a=stack.pop();stack.push(a+b);break;case"and":b=stack.pop();a=stack.pop();if(typeof a==="boolean"&&typeof b==="boolean"){stack.push(a&&b);}else{stack.push(a&b);}break;case"atan":b=stack.pop();a=stack.pop();a=Math.atan2(a,b)/Math.PI*180;if(a<0){a+=360;}stack.push(a);break;case"bitshift":b=stack.pop();a=stack.pop();if(a>0){stack.push(a<<b);}else{stack.push(a>>b);}break;case"ceiling":a=stack.pop();stack.push(Math.ceil(a));break;case"copy":a=stack.pop();stack.copy(a);break;case"cos":a=stack.pop();stack.push(Math.cos(a%360/180*Math.PI));break;case"cvi":a=stack.pop()|0;stack.push(a);break;case"cvr":break;case"div":b=stack.pop();a=stack.pop();stack.push(a/b);break;case"dup":stack.copy(1);break;case"eq":b=stack.pop();a=stack.pop();stack.push(a===b);break;case"exch":stack.roll(2,1);break;case"exp":b=stack.pop();a=stack.pop();stack.push(Math.pow(a,b));break;case"false":stack.push(false);break;case"floor":a=stack.pop();stack.push(Math.floor(a));break;case"ge":b=stack.pop();a=stack.pop();stack.push(a>=b);break;case"gt":b=stack.pop();a=stack.pop();stack.push(a>b);break;case"idiv":b=stack.pop();a=stack.pop();stack.push(a/b|0);break;case"index":a=stack.pop();stack.index(a);break;case"le":b=stack.pop();a=stack.pop();stack.push(a<=b);break;case"ln":a=stack.pop();stack.push(Math.log(a));break;case"log":a=stack.pop();stack.push(Math.log10(a));break;case"lt":b=stack.pop();a=stack.pop();stack.push(a<b);break;case"mod":b=stack.pop();a=stack.pop();stack.push(a%b);break;case"mul":b=stack.pop();a=stack.pop();stack.push(a*b);break;case"ne":b=stack.pop();a=stack.pop();stack.push(a!==b);break;case"neg":a=stack.pop();stack.push(-a);break;case"not":a=stack.pop();if(typeof a==="boolean"){stack.push(!a);}else{stack.push(~a);}break;case"or":b=stack.pop();a=stack.pop();if(typeof a==="boolean"&&typeof b==="boolean"){stack.push(a||b);}else{stack.push(a|b);}break;case"pop":stack.pop();break;case"roll":b=stack.pop();a=stack.pop();stack.roll(a,b);break;case"round":a=stack.pop();stack.push(Math.round(a));break;case"sin":a=stack.pop();stack.push(Math.sin(a%360/180*Math.PI));break;case"sqrt":a=stack.pop();stack.push(Math.sqrt(a));break;case"sub":b=stack.pop();a=stack.pop();stack.push(a-b);break;case"true":stack.push(true);break;case"truncate":a=stack.pop();a=a<0?Math.ceil(a):Math.floor(a);stack.push(a);break;case"xor":b=stack.pop();a=stack.pop();if(typeof a==="boolean"&&typeof b==="boolean"){stack.push(a!==b);}else{stack.push(a^b);}break;default:throw new FormatError("Unknown operator ".concat(operator));}}return stack.stack;}}]);return PostScriptEvaluator;}();var AstNode=/*#__PURE__*/function(){function AstNode(type){function_classCallCheck(this,AstNode);this.type=type;}function_createClass(AstNode,[{key:"visit",value:function visit(visitor){unreachable("abstract method");}}]);return AstNode;}();var AstArgument=/*#__PURE__*/function(_AstNode){function_inherits(AstArgument,_AstNode);var _super=function_createSuper(AstArgument);function AstArgument(index,min,max){var _this;function_classCallCheck(this,AstArgument);_this=_super.call(this,"args");_this.index=index;_this.min=min;_this.max=max;return _this;}function_createClass(AstArgument,[{key:"visit",value:function visit(visitor){visitor.visitArgument(this);}}]);return AstArgument;}(AstNode);var AstLiteral=/*#__PURE__*/function(_AstNode2){function_inherits(AstLiteral,_AstNode2);var _super2=function_createSuper(AstLiteral);function AstLiteral(number){var _this2;function_classCallCheck(this,AstLiteral);_this2=_super2.call(this,"literal");_this2.number=number;_this2.min=number;_this2.max=number;return _this2;}function_createClass(AstLiteral,[{key:"visit",value:function visit(visitor){visitor.visitLiteral(this);}}]);return AstLiteral;}(AstNode);var AstBinaryOperation=/*#__PURE__*/function(_AstNode3){function_inherits(AstBinaryOperation,_AstNode3);var _super3=function_createSuper(AstBinaryOperation);function AstBinaryOperation(op,arg1,arg2,min,max){var _this3;function_classCallCheck(this,AstBinaryOperation);_this3=_super3.call(this,"binary");_this3.op=op;_this3.arg1=arg1;_this3.arg2=arg2;_this3.min=min;_this3.max=max;return _this3;}function_createClass(AstBinaryOperation,[{key:"visit",value:function visit(visitor){visitor.visitBinaryOperation(this);}}]);return AstBinaryOperation;}(AstNode);var AstMin=/*#__PURE__*/function(_AstNode4){function_inherits(AstMin,_AstNode4);var _super4=function_createSuper(AstMin);function AstMin(arg,max){var _this4;function_classCallCheck(this,AstMin);_this4=_super4.call(this,"max");_this4.arg=arg;_this4.min=arg.min;_this4.max=max;return _this4;}function_createClass(AstMin,[{key:"visit",value:function visit(visitor){visitor.visitMin(this);}}]);return AstMin;}(AstNode);var AstVariable=/*#__PURE__*/function(_AstNode5){function_inherits(AstVariable,_AstNode5);var _super5=function_createSuper(AstVariable);function AstVariable(index,min,max){var _this5;function_classCallCheck(this,AstVariable);_this5=_super5.call(this,"var");_this5.index=index;_this5.min=min;_this5.max=max;return _this5;}function_createClass(AstVariable,[{key:"visit",value:function visit(visitor){visitor.visitVariable(this);}}]);return AstVariable;}(AstNode);var AstVariableDefinition=/*#__PURE__*/function(_AstNode6){function_inherits(AstVariableDefinition,_AstNode6);var _super6=function_createSuper(AstVariableDefinition);function AstVariableDefinition(variable,arg){var _this6;function_classCallCheck(this,AstVariableDefinition);_this6=_super6.call(this,"definition");_this6.variable=variable;_this6.arg=arg;return _this6;}function_createClass(AstVariableDefinition,[{key:"visit",value:function visit(visitor){visitor.visitVariableDefinition(this);}}]);return AstVariableDefinition;}(AstNode);var ExpressionBuilderVisitor=/*#__PURE__*/function(){function ExpressionBuilderVisitor(){function_classCallCheck(this,ExpressionBuilderVisitor);this.parts=[];}function_createClass(ExpressionBuilderVisitor,[{key:"visitArgument",value:function visitArgument(arg){this.parts.push("Math.max(",arg.min,", Math.min(",arg.max,", src[srcOffset + ",arg.index,"]))");}},{key:"visitVariable",value:function visitVariable(variable){this.parts.push("v",variable.index);}},{key:"visitLiteral",value:function visitLiteral(literal){this.parts.push(literal.number);}},{key:"visitBinaryOperation",value:function visitBinaryOperation(operation){this.parts.push("(");operation.arg1.visit(this);this.parts.push(" ",operation.op," ");operation.arg2.visit(this);this.parts.push(")");}},{key:"visitVariableDefinition",value:function visitVariableDefinition(definition){this.parts.push("var ");definition.variable.visit(this);this.parts.push(" = ");definition.arg.visit(this);this.parts.push(";");}},{key:"visitMin",value:function visitMin(max){this.parts.push("Math.min(");max.arg.visit(this);this.parts.push(", ",max.max,")");}},{key:"toString",value:function toString(){return this.parts.join("");}}]);return ExpressionBuilderVisitor;}();function buildAddOperation(num1,num2){if(num2.type==="literal"&&num2.number===0){return num1;}if(num1.type==="literal"&&num1.number===0){return num2;}if(num2.type==="literal"&&num1.type==="literal"){return new AstLiteral(num1.number+num2.number);}return new AstBinaryOperation("+",num1,num2,num1.min+num2.min,num1.max+num2.max);}function buildMulOperation(num1,num2){if(num2.type==="literal"){if(num2.number===0){return new AstLiteral(0);}else if(num2.number===1){return num1;}else if(num1.type==="literal"){return new AstLiteral(num1.number*num2.number);}}if(num1.type==="literal"){if(num1.number===0){return new AstLiteral(0);}else if(num1.number===1){return num2;}}var min=Math.min(num1.min*num2.min,num1.min*num2.max,num1.max*num2.min,num1.max*num2.max);var max=Math.max(num1.min*num2.min,num1.min*num2.max,num1.max*num2.min,num1.max*num2.max);return new AstBinaryOperation("*",num1,num2,min,max);}function buildSubOperation(num1,num2){if(num2.type==="literal"){if(num2.number===0){return num1;}else if(num1.type==="literal"){return new AstLiteral(num1.number-num2.number);}}if(num2.type==="binary"&&num2.op==="-"&&num1.type==="literal"&&num1.number===1&&num2.arg1.type==="literal"&&num2.arg1.number===1){return num2.arg2;}return new AstBinaryOperation("-",num1,num2,num1.min-num2.max,num1.max-num2.min);}function buildMinOperation(num1,max){if(num1.min>=max){return new AstLiteral(max);}else if(num1.max<=max){return num1;}return new AstMin(num1,max);}var PostScriptCompiler=/*#__PURE__*/function(){function PostScriptCompiler(){function_classCallCheck(this,PostScriptCompiler);}function_createClass(PostScriptCompiler,[{key:"compile",value:function compile(code,domain,range){var stack=[];var instructions=[];var inputSize=domain.length>>1,outputSize=range.length>>1;var lastRegister=0;var n,j;var num1,num2,ast1,ast2,tmpVar,item;for(var i=0;i<inputSize;i++){stack.push(new AstArgument(i,domain[i*2],domain[i*2+1]));}for(var _i3=0,ii=code.length;_i3<ii;_i3++){item=code[_i3];if(typeof item==="number"){stack.push(new AstLiteral(item));continue;}switch(item){case"add":if(stack.length<2){return null;}num2=stack.pop();num1=stack.pop();stack.push(buildAddOperation(num1,num2));break;case"cvr":if(stack.length<1){return null;}break;case"mul":if(stack.length<2){return null;}num2=stack.pop();num1=stack.pop();stack.push(buildMulOperation(num1,num2));break;case"sub":if(stack.length<2){return null;}num2=stack.pop();num1=stack.pop();stack.push(buildSubOperation(num1,num2));break;case"exch":if(stack.length<2){return null;}ast1=stack.pop();ast2=stack.pop();stack.push(ast1,ast2);break;case"pop":if(stack.length<1){return null;}stack.pop();break;case"index":if(stack.length<1){return null;}num1=stack.pop();if(num1.type!=="literal"){return null;}n=num1.number;if(n<0||!Number.isInteger(n)||stack.length<n){return null;}ast1=stack[stack.length-n-1];if(ast1.type==="literal"||ast1.type==="var"){stack.push(ast1);break;}tmpVar=new AstVariable(lastRegister++,ast1.min,ast1.max);stack[stack.length-n-1]=tmpVar;stack.push(tmpVar);instructions.push(new AstVariableDefinition(tmpVar,ast1));break;case"dup":if(stack.length<1){return null;}if(typeof code[_i3+1]==="number"&&code[_i3+2]==="gt"&&code[_i3+3]===_i3+7&&code[_i3+4]==="jz"&&code[_i3+5]==="pop"&&code[_i3+6]===code[_i3+1]){num1=stack.pop();stack.push(buildMinOperation(num1,code[_i3+1]));_i3+=6;break;}ast1=stack.at(-1);if(ast1.type==="literal"||ast1.type==="var"){stack.push(ast1);break;}tmpVar=new AstVariable(lastRegister++,ast1.min,ast1.max);stack[stack.length-1]=tmpVar;stack.push(tmpVar);instructions.push(new AstVariableDefinition(tmpVar,ast1));break;case"roll":if(stack.length<2){return null;}num2=stack.pop();num1=stack.pop();if(num2.type!=="literal"||num1.type!=="literal"){return null;}j=num2.number;n=num1.number;if(n<=0||!Number.isInteger(n)||!Number.isInteger(j)||stack.length<n){return null;}j=(j%n+n)%n;if(j===0){break;}stack.push.apply(stack,function_toConsumableArray(stack.splice(stack.length-n,n-j)));break;default:return null;}}if(stack.length!==outputSize){return null;}var result=[];for(var _i4=0,_instructions=instructions;_i4<_instructions.length;_i4++){var instruction=_instructions[_i4];var statementBuilder=new ExpressionBuilderVisitor();instruction.visit(statementBuilder);result.push(statementBuilder.toString());}for(var _i5=0,_ii=stack.length;_i5<_ii;_i5++){var expr=stack[_i5],_statementBuilder=new ExpressionBuilderVisitor();expr.visit(_statementBuilder);var min=range[_i5*2],max=range[_i5*2+1];var out=[_statementBuilder.toString()];if(min>expr.min){out.unshift("Math.max(",min,", ");out.push(")");}if(max<expr.max){out.unshift("Math.min(",max,", ");out.push(")");}out.unshift("dest[destOffset + ",_i5,"] = ");out.push(";");result.push(out.join(""));}return result.join("\n");}}]);return PostScriptCompiler;}();
;// CONCATENATED MODULE: ./src/core/bidi.js
var baseTypes=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"];var arabicTypes=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function isOdd(i){return(i&1)!==0;}function isEven(i){return(i&1)===0;}function findUnequal(arr,start,value){var j,jj;for(j=start,jj=arr.length;j<jj;++j){if(arr[j]!==value){return j;}}return j;}function setValues(arr,start,end,value){for(var j=start;j<end;++j){arr[j]=value;}}function reverseValues(arr,start,end){for(var i=start,j=end-1;i<j;++i,--j){var temp=arr[i];arr[i]=arr[j];arr[j]=temp;}}function createBidiText(str,isLTR){var vertical=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var dir="ltr";if(vertical){dir="ttb";}else if(!isLTR){dir="rtl";}return{str:str,dir:dir};}var chars=[];var types=[];function bidi(str){var startLevel=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var vertical=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var isLTR=true;var strLength=str.length;if(strLength===0||vertical){return createBidiText(str,isLTR,vertical);}chars.length=strLength;types.length=strLength;var numBidi=0;var i,ii;for(i=0;i<strLength;++i){chars[i]=str.charAt(i);var charCode=str.charCodeAt(i);var charType="L";if(charCode<=0x00ff){charType=baseTypes[charCode];}else if(0x0590<=charCode&&charCode<=0x05f4){charType="R";}else if(0x0600<=charCode&&charCode<=0x06ff){charType=arabicTypes[charCode&0xff];if(!charType){warn("Bidi: invalid Unicode character "+charCode.toString(16));}}else if(0x0700<=charCode&&charCode<=0x08ac||0xfb50<=charCode&&charCode<=0xfdff||0xfe70<=charCode&&charCode<=0xfeff){charType="AL";}if(charType==="R"||charType==="AL"||charType==="AN"){numBidi++;}types[i]=charType;}if(numBidi===0){isLTR=true;return createBidiText(str,isLTR);}if(startLevel===-1){if(numBidi/strLength<0.3&&strLength>4){isLTR=true;startLevel=0;}else{isLTR=false;startLevel=1;}}var levels=[];for(i=0;i<strLength;++i){levels[i]=startLevel;}var e=isOdd(startLevel)?"R":"L";var sor=e;var eor=sor;var lastType=sor;for(i=0;i<strLength;++i){if(types[i]==="NSM"){types[i]=lastType;}else{lastType=types[i];}}lastType=sor;var t;for(i=0;i<strLength;++i){t=types[i];if(t==="EN"){types[i]=lastType==="AL"?"AN":"EN";}else if(t==="R"||t==="L"||t==="AL"){lastType=t;}}for(i=0;i<strLength;++i){t=types[i];if(t==="AL"){types[i]="R";}}for(i=1;i<strLength-1;++i){if(types[i]==="ES"&&types[i-1]==="EN"&&types[i+1]==="EN"){types[i]="EN";}if(types[i]==="CS"&&(types[i-1]==="EN"||types[i-1]==="AN")&&types[i+1]===types[i-1]){types[i]=types[i-1];}}for(i=0;i<strLength;++i){if(types[i]==="EN"){for(var j=i-1;j>=0;--j){if(types[j]!=="ET"){break;}types[j]="EN";}for(var _j=i+1;_j<strLength;++_j){if(types[_j]!=="ET"){break;}types[_j]="EN";}}}for(i=0;i<strLength;++i){t=types[i];if(t==="WS"||t==="ES"||t==="ET"||t==="CS"){types[i]="ON";}}lastType=sor;for(i=0;i<strLength;++i){t=types[i];if(t==="EN"){types[i]=lastType==="L"?"L":"EN";}else if(t==="R"||t==="L"){lastType=t;}}for(i=0;i<strLength;++i){if(types[i]==="ON"){var end=findUnequal(types,i+1,"ON");var before=sor;if(i>0){before=types[i-1];}var after=eor;if(end+1<strLength){after=types[end+1];}if(before!=="L"){before="R";}if(after!=="L"){after="R";}if(before===after){setValues(types,i,end,before);}i=end-1;}}for(i=0;i<strLength;++i){if(types[i]==="ON"){types[i]=e;}}for(i=0;i<strLength;++i){t=types[i];if(isEven(levels[i])){if(t==="R"){levels[i]+=1;}else if(t==="AN"||t==="EN"){levels[i]+=2;}}else if(t==="L"||t==="AN"||t==="EN"){levels[i]+=1;}}var highestLevel=-1;var lowestOddLevel=99;var level;for(i=0,ii=levels.length;i<ii;++i){level=levels[i];if(highestLevel<level){highestLevel=level;}if(lowestOddLevel>level&&isOdd(level)){lowestOddLevel=level;}}for(level=highestLevel;level>=lowestOddLevel;--level){var start=-1;for(i=0,ii=levels.length;i<ii;++i){if(levels[i]<level){if(start>=0){reverseValues(chars,start,i);start=-1;}}else if(start<0){start=i;}}if(start>=0){reverseValues(chars,start,levels.length);}}for(i=0,ii=chars.length;i<ii;++i){var ch=chars[i];if(ch==="<"||ch===">"){chars[i]="";}}return createBidiText(chars.join(""),isLTR);}
;// CONCATENATED MODULE: ./src/core/font_substitutions.js
function font_substitutions_slicedToArray(arr,i){return font_substitutions_arrayWithHoles(arr)||font_substitutions_iterableToArrayLimit(arr,i)||font_substitutions_unsupportedIterableToArray(arr,i)||font_substitutions_nonIterableRest();}function font_substitutions_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function font_substitutions_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function font_substitutions_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function font_substitutions_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=font_substitutions_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function font_substitutions_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return font_substitutions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return font_substitutions_arrayLikeToArray(o,minLen);}function font_substitutions_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}var NORMAL={style:"normal",weight:"normal"};var BOLD={style:"normal",weight:"bold"};var ITALIC={style:"italic",weight:"normal"};var BOLDITALIC={style:"italic",weight:"bold"};var substitutionMap=new Map([["Times-Roman",{local:["Times New Roman","Times-Roman","Times","Liberation Serif","Nimbus Roman","Nimbus Roman L","Tinos","Thorndale","TeX Gyre Termes","FreeSerif","DejaVu Serif","Bitstream Vera Serif","Ubuntu"],style:NORMAL,ultimate:"serif"}],["Times-Bold",{alias:"Times-Roman",style:BOLD,ultimate:"serif"}],["Times-Italic",{alias:"Times-Roman",style:ITALIC,ultimate:"serif"}],["Times-BoldItalic",{alias:"Times-Roman",style:BOLDITALIC,ultimate:"serif"}],["Helvetica",{local:["Helvetica","Helvetica Neue","Arial","Arial Nova","Liberation Sans","Arimo","Nimbus Sans","Nimbus Sans L","A030","TeX Gyre Heros","FreeSans","DejaVu Sans","Albany","Bitstream Vera Sans","Arial Unicode MS","Microsoft Sans Serif","Apple Symbols","Cantarell"],path:"LiberationSans-Regular.ttf",style:NORMAL,ultimate:"sans-serif"}],["Helvetica-Bold",{alias:"Helvetica",path:"LiberationSans-Bold.ttf",style:BOLD,ultimate:"sans-serif"}],["Helvetica-Oblique",{alias:"Helvetica",path:"LiberationSans-Italic.ttf",style:ITALIC,ultimate:"sans-serif"}],["Helvetica-BoldOblique",{alias:"Helvetica",path:"LiberationSans-BoldItalic.ttf",style:BOLDITALIC,ultimate:"sans-serif"}],["Courier",{local:["Courier","Courier New","Liberation Mono","Nimbus Mono","Nimbus Mono L","Cousine","Cumberland","TeX Gyre Cursor","FreeMono"],style:NORMAL,ultimate:"monospace"}],["Courier-Bold",{alias:"Courier",style:BOLD,ultimate:"monospace"}],["Courier-Oblique",{alias:"Courier",style:ITALIC,ultimate:"monospace"}],["Courier-BoldOblique",{alias:"Courier",style:BOLDITALIC,ultimate:"monospace"}],["ArialBlack",{local:["Arial Black"],style:{style:"normal",weight:"900"},fallback:"Helvetica-Bold"}],["ArialBlack-Bold",{alias:"ArialBlack"}],["ArialBlack-Italic",{alias:"ArialBlack",style:{style:"italic",weight:"900"},fallback:"Helvetica-BoldOblique"}],["ArialBlack-BoldItalic",{alias:"ArialBlack-Italic"}],["ArialNarrow",{local:["Arial Narrow","Liberation Sans Narrow","Helvetica Condensed","Nimbus Sans Narrow","TeX Gyre Heros Cn"],style:NORMAL,fallback:"Helvetica"}],["ArialNarrow-Bold",{alias:"ArialNarrow",style:BOLD,fallback:"Helvetica-Bold"}],["ArialNarrow-Italic",{alias:"ArialNarrow",style:ITALIC,fallback:"Helvetica-Oblique"}],["ArialNarrow-BoldItalic",{alias:"ArialNarrow",style:BOLDITALIC,fallback:"Helvetica-BoldOblique"}],["Calibri",{local:["Calibri","Carlito"],style:NORMAL,fallback:"Helvetica"}],["Calibri-Bold",{alias:"Calibri",style:BOLD,fallback:"Helvetica-Bold"}],["Calibri-Italic",{alias:"Calibri",style:ITALIC,fallback:"Helvetica-Oblique"}],["Calibri-BoldItalic",{alias:"Calibri",style:BOLDITALIC,fallback:"Helvetica-BoldOblique"}],["Wingdings",{local:["Wingdings","URW Dingbats"],style:NORMAL}],["Wingdings-Regular",{alias:"Wingdings"}],["Wingdings-Bold",{alias:"Wingdings"}]]);var fontAliases=new Map([["Arial-Black","ArialBlack"]]);function getStyleToAppend(style){switch(style){case BOLD:return"Bold";case ITALIC:return"Italic";case BOLDITALIC:return"Bold Italic";default:if((style===null||style===void 0?void 0:style.weight)==="bold"){return"Bold";}if((style===null||style===void 0?void 0:style.style)==="italic"){return"Italic";}}return"";}function generateFont(_ref,src,localFontPath){var alias=_ref.alias,local=_ref.local,path=_ref.path,fallback=_ref.fallback,style=_ref.style,ultimate=_ref.ultimate;var useFallback=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var usePath=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var append=arguments.length>5&&arguments[5]!==undefined?arguments[5]:"";var result={style:null,ultimate:null};if(local){var extra=append?" ".concat(append):"";var _iterator=font_substitutions_createForOfIteratorHelper(local),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var name=_step.value;src.push("local(".concat(name).concat(extra,")"));}}catch(err){_iterator.e(err);}finally{_iterator.f();}}if(alias){var substitution=substitutionMap.get(alias);var aliasAppend=append||getStyleToAppend(style);Object.assign(result,generateFont(substitution,src,localFontPath,useFallback&&!fallback,usePath&&!path,aliasAppend));}if(style){result.style=style;}if(ultimate){result.ultimate=ultimate;}if(useFallback&&fallback){var fallbackInfo=substitutionMap.get(fallback);var _generateFont=generateFont(fallbackInfo,src,localFontPath,useFallback,usePath&&!path,append),fallbackUltimate=_generateFont.ultimate;result.ultimate||(result.ultimate=fallbackUltimate);}if(usePath&&path&&localFontPath){src.push("url(".concat(localFontPath).concat(path,")"));}return result;}function getFontSubstitution(systemFontCache,idFactory,localFontPath,baseFontName,standardFontName){baseFontName=normalizeFontName(baseFontName);var key=baseFontName;var substitutionInfo=systemFontCache.get(key);if(substitutionInfo){return substitutionInfo;}var substitution=substitutionMap.get(baseFontName);if(!substitution){var _iterator2=font_substitutions_createForOfIteratorHelper(fontAliases),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=font_substitutions_slicedToArray(_step2.value,2),alias=_step2$value[0],subst=_step2$value[1];if(baseFontName.startsWith(alias)){baseFontName="".concat(subst).concat(baseFontName.substring(alias.length));substitution=substitutionMap.get(baseFontName);break;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}var mustAddBaseFont=false;if(!substitution){substitution=substitutionMap.get(standardFontName);mustAddBaseFont=true;}var loadedName="".concat(idFactory.getDocId(),"_s").concat(idFactory.createFontId());if(!substitution){if(!validateFontName(baseFontName)){systemFontCache.set(key,null);return null;}var bold=/bold/gi.test(baseFontName);var italic=/oblique|italic/gi.test(baseFontName);var _style=bold&&italic&&BOLDITALIC||bold&&BOLD||italic&&ITALIC||NORMAL;substitutionInfo={css:loadedName,guessFallback:true,loadedName:loadedName,baseFontName:baseFontName,src:"local(".concat(baseFontName,")"),style:_style};systemFontCache.set(key,substitutionInfo);return substitutionInfo;}var src=[];if(mustAddBaseFont&&validateFontName(baseFontName)){src.push("local(".concat(baseFontName,")"));}var _generateFont2=generateFont(substitution,src,localFontPath),style=_generateFont2.style,ultimate=_generateFont2.ultimate;var guessFallback=ultimate===null;var fallback=guessFallback?"":",".concat(ultimate);substitutionInfo={css:"".concat(loadedName).concat(fallback),guessFallback:guessFallback,loadedName:loadedName,baseFontName:baseFontName,src:src.join(","),style:style};systemFontCache.set(key,substitutionInfo);return substitutionInfo;}
;// CONCATENATED MODULE: ./src/core/image_resizer.js
function image_resizer_typeof(o){"@babel/helpers - typeof";return image_resizer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},image_resizer_typeof(o);}function image_resizer_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */image_resizer_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==image_resizer_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(image_resizer_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function image_resizer_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=image_resizer_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function image_resizer_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return image_resizer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return image_resizer_arrayLikeToArray(o,minLen);}function image_resizer_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function image_resizer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function image_resizer_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){image_resizer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){image_resizer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function image_resizer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function image_resizer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,image_resizer_toPropertyKey(descriptor.key),descriptor);}}function image_resizer_createClass(Constructor,protoProps,staticProps){if(protoProps)image_resizer_defineProperties(Constructor.prototype,protoProps);if(staticProps)image_resizer_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function image_resizer_toPropertyKey(arg){var key=image_resizer_toPrimitive(arg,"string");return image_resizer_typeof(key)==="symbol"?key:String(key);}function image_resizer_toPrimitive(input,hint){if(image_resizer_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(image_resizer_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var MIN_IMAGE_DIM=2048;var MAX_IMAGE_DIM=65537;var MAX_ERROR=128;var ImageResizer=/*#__PURE__*/function(){function ImageResizer(imgData,isMask){image_resizer_classCallCheck(this,ImageResizer);this._imgData=imgData;this._isMask=isMask;}image_resizer_createClass(ImageResizer,[{key:"_createImage",value:function(){var _createImage2=image_resizer_asyncToGenerator(/*#__PURE__*/image_resizer_regeneratorRuntime().mark(function _callee(){var data,blob,bitmapPromise,MAX_AREA,MAX_DIM,imgData,width,height,minFactor,firstFactor,factor,N,steps,newWidth,newHeight,bitmap,_iterator,_step,step,prevWidth,prevHeight,canvas,ctx;return image_resizer_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:data=this._encodeBMP();blob=new Blob([data.buffer],{type:"image/bmp"});bitmapPromise=createImageBitmap(blob);MAX_AREA=ImageResizer.MAX_AREA,MAX_DIM=ImageResizer.MAX_DIM;imgData=this._imgData;width=imgData.width,height=imgData.height;minFactor=Math.max(width/MAX_DIM,height/MAX_DIM,Math.sqrt(width*height/MAX_AREA));firstFactor=Math.max(minFactor,2);factor=Math.round(10*(minFactor+1.25))/10/firstFactor;N=Math.floor(Math.log2(factor));steps=new Array(N+2).fill(2);steps[0]=firstFactor;steps.splice(-1,1,factor/(1<<N));newWidth=width;newHeight=height;_context.next=17;return bitmapPromise;case 17:bitmap=_context.sent;_iterator=image_resizer_createForOfIteratorHelper(steps);try{for(_iterator.s();!(_step=_iterator.n()).done;){step=_step.value;prevWidth=newWidth;prevHeight=newHeight;newWidth=Math.floor(newWidth/step)-1;newHeight=Math.floor(newHeight/step)-1;canvas=new OffscreenCanvas(newWidth,newHeight);ctx=canvas.getContext("2d");ctx.drawImage(bitmap,0,0,prevWidth,prevHeight,0,0,newWidth,newHeight);bitmap=canvas.transferToImageBitmap();}}catch(err){_iterator.e(err);}finally{_iterator.f();}imgData.data=null;imgData.bitmap=bitmap;imgData.width=newWidth;imgData.height=newHeight;return _context.abrupt("return",imgData);case 25:case"end":return _context.stop();}},_callee,this);}));function _createImage(){return _createImage2.apply(this,arguments);}return _createImage;}()},{key:"_encodeBMP",value:function _encodeBMP(){var _this$_imgData=this._imgData,width=_this$_imgData.width,height=_this$_imgData.height,kind=_this$_imgData.kind;var data=this._imgData.data;var bitPerPixel;var colorTable=new Uint8Array(0);var maskTable=colorTable;var compression=0;switch(kind){case ImageKind.GRAYSCALE_1BPP:{bitPerPixel=1;colorTable=new Uint8Array(this._isMask?[255,255,255,255,0,0,0,0]:[0,0,0,0,255,255,255,255]);var rowLen=width+7>>3;var rowSize=rowLen+3&-4;if(rowLen!==rowSize){var newData=new Uint8Array(rowSize*height);var k=0;for(var _i=0,ii=height*rowLen;_i<ii;_i+=rowLen,k+=rowSize){newData.set(data.subarray(_i,_i+rowLen),k);}data=newData;}break;}case ImageKind.RGB_24BPP:{bitPerPixel=24;if(width&3){var _rowLen=3*width;var _rowSize=_rowLen+3&-4;var extraLen=_rowSize-_rowLen;var _newData=new Uint8Array(_rowSize*height);var _k=0;for(var _i2=0,_ii=height*_rowLen;_i2<_ii;_i2+=_rowLen){var row=data.subarray(_i2,_i2+_rowLen);for(var j=0;j<_rowLen;j+=3){_newData[_k++]=row[j+2];_newData[_k++]=row[j+1];_newData[_k++]=row[j];}_k+=extraLen;}data=_newData;}else{for(var _i3=0,_ii2=data.length;_i3<_ii2;_i3+=3){var tmp=data[_i3];data[_i3]=data[_i3+2];data[_i3+2]=tmp;}}break;}case ImageKind.RGBA_32BPP:bitPerPixel=32;compression=3;maskTable=new Uint8Array(4+4+4+4+52);var _view=new DataView(maskTable.buffer);if(FeatureTest.isLittleEndian){_view.setUint32(0,0x000000ff,true);_view.setUint32(4,0x0000ff00,true);_view.setUint32(8,0x00ff0000,true);_view.setUint32(12,0xff000000,true);}else{_view.setUint32(0,0xff000000,true);_view.setUint32(4,0x00ff0000,true);_view.setUint32(8,0x0000ff00,true);_view.setUint32(12,0x000000ff,true);}break;default:throw new Error("invalid format");}var i=0;var headerLength=40+maskTable.length;var fileLength=14+headerLength+colorTable.length+data.length;var bmpData=new Uint8Array(fileLength);var view=new DataView(bmpData.buffer);view.setUint16(i,0x4d42,true);i+=2;view.setUint32(i,fileLength,true);i+=4;view.setUint32(i,0,true);i+=4;view.setUint32(i,14+headerLength+colorTable.length,true);i+=4;view.setUint32(i,headerLength,true);i+=4;view.setInt32(i,width,true);i+=4;view.setInt32(i,-height,true);i+=4;view.setUint16(i,1,true);i+=2;view.setUint16(i,bitPerPixel,true);i+=2;view.setUint32(i,compression,true);i+=4;view.setUint32(i,0,true);i+=4;view.setInt32(i,0,true);i+=4;view.setInt32(i,0,true);i+=4;view.setUint32(i,colorTable.length/4,true);i+=4;view.setUint32(i,0,true);i+=4;bmpData.set(maskTable,i);i+=maskTable.length;bmpData.set(colorTable,i);i+=colorTable.length;bmpData.set(data,i);return bmpData;}}],[{key:"needsToBeResized",value:function needsToBeResized(width,height){if(width<=this._goodSquareLength&&height<=this._goodSquareLength){return false;}var MAX_DIM=this.MAX_DIM;if(width>MAX_DIM||height>MAX_DIM){return true;}var area=width*height;if(this._hasMaxArea){return area>this.MAX_AREA;}if(area<Math.pow(this._goodSquareLength,2)){return false;}if(this._areGoodDims(width,height)){this._goodSquareLength=Math.max(this._goodSquareLength,Math.floor(Math.sqrt(width*height)));return false;}this._goodSquareLength=this._guessMax(this._goodSquareLength,MAX_DIM,MAX_ERROR,0);var maxArea=this.MAX_AREA=Math.pow(this._goodSquareLength,2);return area>maxArea;}},{key:"MAX_DIM",get:function get(){return shadow(this,"MAX_DIM",this._guessMax(MIN_IMAGE_DIM,MAX_IMAGE_DIM,0,1));}},{key:"MAX_AREA",get:function get(){this._hasMaxArea=true;return shadow(this,"MAX_AREA",Math.pow(this._guessMax(ImageResizer._goodSquareLength,this.MAX_DIM,MAX_ERROR,0),2));},set:function set(area){if(area>=0){this._hasMaxArea=true;shadow(this,"MAX_AREA",area);}}},{key:"setMaxArea",value:function setMaxArea(area){if(!this._hasMaxArea){this.MAX_AREA=area>>2;}}},{key:"_areGoodDims",value:function _areGoodDims(width,height){try{var canvas=new OffscreenCanvas(width,height);var ctx=canvas.getContext("2d");ctx.fillRect(0,0,1,1);var opacity=ctx.getImageData(0,0,1,1).data[3];canvas.width=canvas.height=1;return opacity!==0;}catch(_unused){return false;}}},{key:"_guessMax",value:function _guessMax(start,end,tolerance,defaultHeight){while(start+tolerance+1<end){var middle=Math.floor((start+end)/2);var height=defaultHeight||middle;if(this._areGoodDims(middle,height)){start=middle;}else{end=middle;}}return start;}},{key:"createImage",value:function(){var _createImage3=image_resizer_asyncToGenerator(/*#__PURE__*/image_resizer_regeneratorRuntime().mark(function _callee2(imgData){var isMask,_args2=arguments;return image_resizer_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:isMask=_args2.length>1&&_args2[1]!==undefined?_args2[1]:false;return _context2.abrupt("return",new ImageResizer(imgData,isMask)._createImage());case 2:case"end":return _context2.stop();}},_callee2);}));function createImage(_x){return _createImage3.apply(this,arguments);}return createImage;}()}]);return ImageResizer;}();ImageResizer._goodSquareLength=MIN_IMAGE_DIM;
;// CONCATENATED MODULE: ./src/shared/murmurhash3.js
function murmurhash3_typeof(o){"@babel/helpers - typeof";return murmurhash3_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},murmurhash3_typeof(o);}function murmurhash3_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function murmurhash3_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,murmurhash3_toPropertyKey(descriptor.key),descriptor);}}function murmurhash3_createClass(Constructor,protoProps,staticProps){if(protoProps)murmurhash3_defineProperties(Constructor.prototype,protoProps);if(staticProps)murmurhash3_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function murmurhash3_toPropertyKey(arg){var key=murmurhash3_toPrimitive(arg,"string");return murmurhash3_typeof(key)==="symbol"?key:String(key);}function murmurhash3_toPrimitive(input,hint){if(murmurhash3_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(murmurhash3_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var SEED=0xc3d2e1f0;var MASK_HIGH=0xffff0000;var MASK_LOW=0xffff;var MurmurHash3_64=/*#__PURE__*/function(){function MurmurHash3_64(seed){murmurhash3_classCallCheck(this,MurmurHash3_64);this.h1=seed?seed&0xffffffff:SEED;this.h2=seed?seed&0xffffffff:SEED;}murmurhash3_createClass(MurmurHash3_64,[{key:"update",value:function update(input){var data,length;if(typeof input==="string"){data=new Uint8Array(input.length*2);length=0;for(var i=0,ii=input.length;i<ii;i++){var code=input.charCodeAt(i);if(code<=0xff){data[length++]=code;}else{data[length++]=code>>>8;data[length++]=code&0xff;}}}else if(isArrayBuffer(input)){data=input.slice();length=data.byteLength;}else{throw new Error("Wrong data format in MurmurHash3_64_update. "+"Input must be a string or array.");}var blockCounts=length>>2;var tailLength=length-blockCounts*4;var dataUint32=new Uint32Array(data.buffer,0,blockCounts);var k1=0,k2=0;var h1=this.h1,h2=this.h2;var C1=0xcc9e2d51,C2=0x1b873593;var C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(var _i=0;_i<blockCounts;_i++){if(_i&1){k1=dataUint32[_i];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;h1^=k1;h1=h1<<13|h1>>>19;h1=h1*5+0xe6546b64;}else{k2=dataUint32[_i];k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW;k2=k2<<15|k2>>>17;k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW;h2^=k2;h2=h2<<13|h2>>>19;h2=h2*5+0xe6546b64;}}k1=0;switch(tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;if(blockCounts&1){h1^=k1;}else{h2^=k1;}}this.h1=h1;this.h2=h2;}},{key:"hexdigest",value:function hexdigest(){var h1=this.h1,h2=this.h2;h1^=h2>>>1;h1=h1*0xed558ccd&MASK_HIGH|h1*0x8ccd&MASK_LOW;h2=h2*0xff51afd7&MASK_HIGH|((h2<<16|h1>>>16)*0xafd7ed55&MASK_HIGH)>>>16;h1^=h2>>>1;h1=h1*0x1a85ec53&MASK_HIGH|h1*0xec53&MASK_LOW;h2=h2*0xc4ceb9fe&MASK_HIGH|((h2<<16|h1>>>16)*0xb9fe1a85&MASK_HIGH)>>>16;h1^=h2>>>1;return(h1>>>0).toString(16).padStart(8,"0")+(h2>>>0).toString(16).padStart(8,"0");}}]);return MurmurHash3_64;}();
;// CONCATENATED MODULE: ./src/core/operator_list.js
function operator_list_typeof(o){"@babel/helpers - typeof";return operator_list_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},operator_list_typeof(o);}var _class;function operator_list_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=operator_list_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function operator_list_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return operator_list_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return operator_list_arrayLikeToArray(o,minLen);}function operator_list_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function operator_list_defineProperty(obj,key,value){key=operator_list_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function operator_list_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)operator_list_setPrototypeOf(subClass,superClass);}function operator_list_setPrototypeOf(o,p){operator_list_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return operator_list_setPrototypeOf(o,p);}function operator_list_createSuper(Derived){var hasNativeReflectConstruct=operator_list_isNativeReflectConstruct();return function _createSuperInternal(){var Super=operator_list_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=operator_list_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return operator_list_possibleConstructorReturn(this,result);};}function operator_list_possibleConstructorReturn(self,call){if(call&&(operator_list_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return operator_list_assertThisInitialized(self);}function operator_list_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function operator_list_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function operator_list_getPrototypeOf(o){operator_list_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return operator_list_getPrototypeOf(o);}function operator_list_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function operator_list_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,operator_list_toPropertyKey(descriptor.key),descriptor);}}function operator_list_createClass(Constructor,protoProps,staticProps){if(protoProps)operator_list_defineProperties(Constructor.prototype,protoProps);if(staticProps)operator_list_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function operator_list_toPropertyKey(arg){var key=operator_list_toPrimitive(arg,"string");return operator_list_typeof(key)==="symbol"?key:String(key);}function operator_list_toPrimitive(input,hint){if(operator_list_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(operator_list_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function addState(parentState,pattern,checkFn,iterateFn,processFn){var state=parentState;for(var i=0,ii=pattern.length-1;i<ii;i++){var _state;var item=pattern[i];state=(_state=state)[item]||(_state[item]=[]);}state[pattern.at(-1)]={checkFn:checkFn,iterateFn:iterateFn,processFn:processFn};}var InitialState=[];addState(InitialState,[OPS.save,OPS.transform,OPS.paintInlineImageXObject,OPS.restore],null,function iterateInlineImageGroup(context,i){var fnArray=context.fnArray;var iFirstSave=context.iCurr-3;var pos=(i-iFirstSave)%4;switch(pos){case 0:return fnArray[i]===OPS.save;case 1:return fnArray[i]===OPS.transform;case 2:return fnArray[i]===OPS.paintInlineImageXObject;case 3:return fnArray[i]===OPS.restore;}throw new Error("iterateInlineImageGroup - invalid pos: ".concat(pos));},function foundInlineImageGroup(context,i){var MIN_IMAGES_IN_INLINE_IMAGES_BLOCK=10;var MAX_IMAGES_IN_INLINE_IMAGES_BLOCK=200;var MAX_WIDTH=1000;var IMAGE_PADDING=1;var fnArray=context.fnArray,argsArray=context.argsArray;var curr=context.iCurr;var iFirstSave=curr-3;var iFirstTransform=curr-2;var iFirstPIIXO=curr-1;var count=Math.min(Math.floor((i-iFirstSave)/4),MAX_IMAGES_IN_INLINE_IMAGES_BLOCK);if(count<MIN_IMAGES_IN_INLINE_IMAGES_BLOCK){return i-(i-iFirstSave)%4;}var maxX=0;var map=[];var maxLineHeight=0;var currentX=IMAGE_PADDING,currentY=IMAGE_PADDING;for(var q=0;q<count;q++){var transform=argsArray[iFirstTransform+(q<<2)];var _img=argsArray[iFirstPIIXO+(q<<2)][0];if(currentX+_img.width>MAX_WIDTH){maxX=Math.max(maxX,currentX);currentY+=maxLineHeight+2*IMAGE_PADDING;currentX=0;maxLineHeight=0;}map.push({transform:transform,x:currentX,y:currentY,w:_img.width,h:_img.height});currentX+=_img.width+2*IMAGE_PADDING;maxLineHeight=Math.max(maxLineHeight,_img.height);}var imgWidth=Math.max(maxX,currentX)+IMAGE_PADDING;var imgHeight=currentY+maxLineHeight+IMAGE_PADDING;var imgData=new Uint8Array(imgWidth*imgHeight*4);var imgRowSize=imgWidth<<2;for(var _q=0;_q<count;_q++){var data=argsArray[iFirstPIIXO+(_q<<2)][0].data;var rowSize=map[_q].w<<2;var dataOffset=0;var offset=map[_q].x+map[_q].y*imgWidth<<2;imgData.set(data.subarray(0,rowSize),offset-imgRowSize);for(var k=0,kk=map[_q].h;k<kk;k++){imgData.set(data.subarray(dataOffset,dataOffset+rowSize),offset);dataOffset+=rowSize;offset+=imgRowSize;}imgData.set(data.subarray(dataOffset-rowSize,dataOffset),offset);while(offset>=0){data[offset-4]=data[offset];data[offset-3]=data[offset+1];data[offset-2]=data[offset+2];data[offset-1]=data[offset+3];data[offset+rowSize]=data[offset+rowSize-4];data[offset+rowSize+1]=data[offset+rowSize-3];data[offset+rowSize+2]=data[offset+rowSize-2];data[offset+rowSize+3]=data[offset+rowSize-1];offset-=imgRowSize;}}var img={width:imgWidth,height:imgHeight};if(context.isOffscreenCanvasSupported){var canvas=new OffscreenCanvas(imgWidth,imgHeight);var ctx=canvas.getContext("2d");ctx.putImageData(new ImageData(new Uint8ClampedArray(imgData.buffer),imgWidth,imgHeight),0,0);img.bitmap=canvas.transferToImageBitmap();img.data=null;}else{img.kind=ImageKind.RGBA_32BPP;img.data=imgData;}fnArray.splice(iFirstSave,count*4,OPS.paintInlineImageXObjectGroup);argsArray.splice(iFirstSave,count*4,[img,map]);return iFirstSave+1;});addState(InitialState,[OPS.save,OPS.transform,OPS.paintImageMaskXObject,OPS.restore],null,function iterateImageMaskGroup(context,i){var fnArray=context.fnArray;var iFirstSave=context.iCurr-3;var pos=(i-iFirstSave)%4;switch(pos){case 0:return fnArray[i]===OPS.save;case 1:return fnArray[i]===OPS.transform;case 2:return fnArray[i]===OPS.paintImageMaskXObject;case 3:return fnArray[i]===OPS.restore;}throw new Error("iterateImageMaskGroup - invalid pos: ".concat(pos));},function foundImageMaskGroup(context,i){var MIN_IMAGES_IN_MASKS_BLOCK=10;var MAX_IMAGES_IN_MASKS_BLOCK=100;var MAX_SAME_IMAGES_IN_MASKS_BLOCK=1000;var fnArray=context.fnArray,argsArray=context.argsArray;var curr=context.iCurr;var iFirstSave=curr-3;var iFirstTransform=curr-2;var iFirstPIMXO=curr-1;var count=Math.floor((i-iFirstSave)/4);if(count<MIN_IMAGES_IN_MASKS_BLOCK){return i-(i-iFirstSave)%4;}var isSameImage=false;var iTransform,transformArgs;var firstPIMXOArg0=argsArray[iFirstPIMXO][0];var firstTransformArg0=argsArray[iFirstTransform][0],firstTransformArg1=argsArray[iFirstTransform][1],firstTransformArg2=argsArray[iFirstTransform][2],firstTransformArg3=argsArray[iFirstTransform][3];if(firstTransformArg1===firstTransformArg2){isSameImage=true;iTransform=iFirstTransform+4;var iPIMXO=iFirstPIMXO+4;for(var q=1;q<count;q++,iTransform+=4,iPIMXO+=4){transformArgs=argsArray[iTransform];if(argsArray[iPIMXO][0]!==firstPIMXOArg0||transformArgs[0]!==firstTransformArg0||transformArgs[1]!==firstTransformArg1||transformArgs[2]!==firstTransformArg2||transformArgs[3]!==firstTransformArg3){if(q<MIN_IMAGES_IN_MASKS_BLOCK){isSameImage=false;}else{count=q;}break;}}}if(isSameImage){count=Math.min(count,MAX_SAME_IMAGES_IN_MASKS_BLOCK);var positions=new Float32Array(count*2);iTransform=iFirstTransform;for(var _q2=0;_q2<count;_q2++,iTransform+=4){transformArgs=argsArray[iTransform];positions[_q2<<1]=transformArgs[4];positions[(_q2<<1)+1]=transformArgs[5];}fnArray.splice(iFirstSave,count*4,OPS.paintImageMaskXObjectRepeat);argsArray.splice(iFirstSave,count*4,[firstPIMXOArg0,firstTransformArg0,firstTransformArg1,firstTransformArg2,firstTransformArg3,positions]);}else{count=Math.min(count,MAX_IMAGES_IN_MASKS_BLOCK);var images=[];for(var _q3=0;_q3<count;_q3++){transformArgs=argsArray[iFirstTransform+(_q3<<2)];var maskParams=argsArray[iFirstPIMXO+(_q3<<2)][0];images.push({data:maskParams.data,width:maskParams.width,height:maskParams.height,interpolate:maskParams.interpolate,count:maskParams.count,transform:transformArgs});}fnArray.splice(iFirstSave,count*4,OPS.paintImageMaskXObjectGroup);argsArray.splice(iFirstSave,count*4,[images]);}return iFirstSave+1;});addState(InitialState,[OPS.save,OPS.transform,OPS.paintImageXObject,OPS.restore],function(context){var argsArray=context.argsArray;var iFirstTransform=context.iCurr-2;return argsArray[iFirstTransform][1]===0&&argsArray[iFirstTransform][2]===0;},function iterateImageGroup(context,i){var fnArray=context.fnArray,argsArray=context.argsArray;var iFirstSave=context.iCurr-3;var pos=(i-iFirstSave)%4;switch(pos){case 0:return fnArray[i]===OPS.save;case 1:if(fnArray[i]!==OPS.transform){return false;}var iFirstTransform=context.iCurr-2;var firstTransformArg0=argsArray[iFirstTransform][0];var firstTransformArg3=argsArray[iFirstTransform][3];if(argsArray[i][0]!==firstTransformArg0||argsArray[i][1]!==0||argsArray[i][2]!==0||argsArray[i][3]!==firstTransformArg3){return false;}return true;case 2:if(fnArray[i]!==OPS.paintImageXObject){return false;}var iFirstPIXO=context.iCurr-1;var firstPIXOArg0=argsArray[iFirstPIXO][0];if(argsArray[i][0]!==firstPIXOArg0){return false;}return true;case 3:return fnArray[i]===OPS.restore;}throw new Error("iterateImageGroup - invalid pos: ".concat(pos));},function(context,i){var MIN_IMAGES_IN_BLOCK=3;var MAX_IMAGES_IN_BLOCK=1000;var fnArray=context.fnArray,argsArray=context.argsArray;var curr=context.iCurr;var iFirstSave=curr-3;var iFirstTransform=curr-2;var iFirstPIXO=curr-1;var firstPIXOArg0=argsArray[iFirstPIXO][0];var firstTransformArg0=argsArray[iFirstTransform][0];var firstTransformArg3=argsArray[iFirstTransform][3];var count=Math.min(Math.floor((i-iFirstSave)/4),MAX_IMAGES_IN_BLOCK);if(count<MIN_IMAGES_IN_BLOCK){return i-(i-iFirstSave)%4;}var positions=new Float32Array(count*2);var iTransform=iFirstTransform;for(var q=0;q<count;q++,iTransform+=4){var transformArgs=argsArray[iTransform];positions[q<<1]=transformArgs[4];positions[(q<<1)+1]=transformArgs[5];}var args=[firstPIXOArg0,firstTransformArg0,firstTransformArg3,positions];fnArray.splice(iFirstSave,count*4,OPS.paintImageXObjectRepeat);argsArray.splice(iFirstSave,count*4,args);return iFirstSave+1;});addState(InitialState,[OPS.beginText,OPS.setFont,OPS.setTextMatrix,OPS.showText,OPS.endText],null,function iterateShowTextGroup(context,i){var fnArray=context.fnArray,argsArray=context.argsArray;var iFirstSave=context.iCurr-4;var pos=(i-iFirstSave)%5;switch(pos){case 0:return fnArray[i]===OPS.beginText;case 1:return fnArray[i]===OPS.setFont;case 2:return fnArray[i]===OPS.setTextMatrix;case 3:if(fnArray[i]!==OPS.showText){return false;}var iFirstSetFont=context.iCurr-3;var firstSetFontArg0=argsArray[iFirstSetFont][0];var firstSetFontArg1=argsArray[iFirstSetFont][1];if(argsArray[i][0]!==firstSetFontArg0||argsArray[i][1]!==firstSetFontArg1){return false;}return true;case 4:return fnArray[i]===OPS.endText;}throw new Error("iterateShowTextGroup - invalid pos: ".concat(pos));},function(context,i){var MIN_CHARS_IN_BLOCK=3;var MAX_CHARS_IN_BLOCK=1000;var fnArray=context.fnArray,argsArray=context.argsArray;var curr=context.iCurr;var iFirstBeginText=curr-4;var iFirstSetFont=curr-3;var iFirstSetTextMatrix=curr-2;var iFirstShowText=curr-1;var iFirstEndText=curr;var firstSetFontArg0=argsArray[iFirstSetFont][0];var firstSetFontArg1=argsArray[iFirstSetFont][1];var count=Math.min(Math.floor((i-iFirstBeginText)/5),MAX_CHARS_IN_BLOCK);if(count<MIN_CHARS_IN_BLOCK){return i-(i-iFirstBeginText)%5;}var iFirst=iFirstBeginText;if(iFirstBeginText>=4&&fnArray[iFirstBeginText-4]===fnArray[iFirstSetFont]&&fnArray[iFirstBeginText-3]===fnArray[iFirstSetTextMatrix]&&fnArray[iFirstBeginText-2]===fnArray[iFirstShowText]&&fnArray[iFirstBeginText-1]===fnArray[iFirstEndText]&&argsArray[iFirstBeginText-4][0]===firstSetFontArg0&&argsArray[iFirstBeginText-4][1]===firstSetFontArg1){count++;iFirst-=5;}var iEndText=iFirst+4;for(var q=1;q<count;q++){fnArray.splice(iEndText,3);argsArray.splice(iEndText,3);iEndText+=2;}return iEndText+1;});var NullOptimizer=/*#__PURE__*/function(){function NullOptimizer(queue){operator_list_classCallCheck(this,NullOptimizer);this.queue=queue;}operator_list_createClass(NullOptimizer,[{key:"_optimize",value:function _optimize(){}},{key:"push",value:function push(fn,args){this.queue.fnArray.push(fn);this.queue.argsArray.push(args);this._optimize();}},{key:"flush",value:function flush(){}},{key:"reset",value:function reset(){}}]);return NullOptimizer;}();var QueueOptimizer=/*#__PURE__*/function(_NullOptimizer){operator_list_inherits(QueueOptimizer,_NullOptimizer);var _super=operator_list_createSuper(QueueOptimizer);function QueueOptimizer(queue){var _this;operator_list_classCallCheck(this,QueueOptimizer);_this=_super.call(this,queue);_this.state=null;_this.context={iCurr:0,fnArray:queue.fnArray,argsArray:queue.argsArray,isOffscreenCanvasSupported:false};_this.match=null;_this.lastProcessed=0;return _this;}operator_list_createClass(QueueOptimizer,[{key:"isOffscreenCanvasSupported",set:function set(value){this.context.isOffscreenCanvasSupported=value;}},{key:"_optimize",value:function _optimize(){var fnArray=this.queue.fnArray;var i=this.lastProcessed,ii=fnArray.length;var state=this.state;var match=this.match;if(!state&&!match&&i+1===ii&&!InitialState[fnArray[i]]){this.lastProcessed=ii;return;}var context=this.context;while(i<ii){if(match){var iterate=(0,match.iterateFn)(context,i);if(iterate){i++;continue;}i=(0,match.processFn)(context,i+1);ii=fnArray.length;match=null;state=null;if(i>=ii){break;}}state=(state||InitialState)[fnArray[i]];if(!state||Array.isArray(state)){i++;continue;}context.iCurr=i;i++;if(state.checkFn&&!(0,state.checkFn)(context)){state=null;continue;}match=state;state=null;}this.state=state;this.match=match;this.lastProcessed=i;}},{key:"flush",value:function flush(){while(this.match){var length=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,length);this.match=null;this.state=null;this._optimize();}}},{key:"reset",value:function reset(){this.state=null;this.match=null;this.lastProcessed=0;}}]);return QueueOptimizer;}(NullOptimizer);var OperatorList=/*#__PURE__*/function(){function OperatorList(){var intent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var streamSink=arguments.length>1?arguments[1]:undefined;operator_list_classCallCheck(this,OperatorList);this._streamSink=streamSink;this.fnArray=[];this.argsArray=[];this.optimizer=streamSink&&!(intent&RenderingIntentFlag.OPLIST)?new QueueOptimizer(this):new NullOptimizer(this);this.dependencies=new Set();this._totalLength=0;this.weight=0;this._resolved=streamSink?null:Promise.resolve();}operator_list_createClass(OperatorList,[{key:"isOffscreenCanvasSupported",set:function set(value){this.optimizer.isOffscreenCanvasSupported=value;}},{key:"length",get:function get(){return this.argsArray.length;}},{key:"ready",get:function get(){return this._resolved||this._streamSink.ready;}},{key:"totalLength",get:function get(){return this._totalLength+this.length;}},{key:"addOp",value:function addOp(fn,args){this.optimizer.push(fn,args);this.weight++;if(this._streamSink){if(this.weight>=OperatorList.CHUNK_SIZE){this.flush();}else if(this.weight>=OperatorList.CHUNK_SIZE_ABOUT&&(fn===OPS.restore||fn===OPS.endText)){this.flush();}}}},{key:"addImageOps",value:function addImageOps(fn,args,optionalContent){if(optionalContent!==undefined){this.addOp(OPS.beginMarkedContentProps,["OC",optionalContent]);}this.addOp(fn,args);if(optionalContent!==undefined){this.addOp(OPS.endMarkedContent,[]);}}},{key:"addDependency",value:function addDependency(dependency){if(this.dependencies.has(dependency)){return;}this.dependencies.add(dependency);this.addOp(OPS.dependency,[dependency]);}},{key:"addDependencies",value:function addDependencies(dependencies){var _iterator=operator_list_createForOfIteratorHelper(dependencies),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var dependency=_step.value;this.addDependency(dependency);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:"addOpList",value:function addOpList(opList){if(!(opList instanceof OperatorList)){warn('addOpList - ignoring invalid "opList" parameter.');return;}var _iterator2=operator_list_createForOfIteratorHelper(opList.dependencies),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var dependency=_step2.value;this.dependencies.add(dependency);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}for(var i=0,ii=opList.length;i<ii;i++){this.addOp(opList.fnArray[i],opList.argsArray[i]);}}},{key:"getIR",value:function getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length};}},{key:"_transfers",get:function get(){var _arg$data;var transfers=[];var fnArray=this.fnArray,argsArray=this.argsArray,length=this.length;for(var i=0;i<length;i++){switch(fnArray[i]){case OPS.paintInlineImageXObject:case OPS.paintInlineImageXObjectGroup:case OPS.paintImageMaskXObject:var arg=argsArray[i][0];if(!arg.cached&&((_arg$data=arg.data)===null||_arg$data===void 0?void 0:_arg$data.buffer)instanceof ArrayBuffer){transfers.push(arg.data.buffer);}break;}}return transfers;}},{key:"flush",value:function flush(){var lastChunk=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var separateAnnots=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.optimizer.flush();var length=this.length;this._totalLength+=length;this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:lastChunk,separateAnnots:separateAnnots,length:length},1,this._transfers);this.dependencies.clear();this.fnArray.length=0;this.argsArray.length=0;this.weight=0;this.optimizer.reset();}}]);return OperatorList;}();_class=OperatorList;operator_list_defineProperty(OperatorList,"CHUNK_SIZE",1000);operator_list_defineProperty(OperatorList,"CHUNK_SIZE_ABOUT",_class.CHUNK_SIZE-5);
;// CONCATENATED MODULE: ./src/core/image.js
function image_typeof(o){"@babel/helpers - typeof";return image_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},image_typeof(o);}function image_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */image_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==image_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(image_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function image_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function image_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){image_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){image_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function image_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function image_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,image_toPropertyKey(descriptor.key),descriptor);}}function image_createClass(Constructor,protoProps,staticProps){if(protoProps)image_defineProperties(Constructor.prototype,protoProps);if(staticProps)image_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function image_toPropertyKey(arg){var key=image_toPrimitive(arg,"string");return image_typeof(key)==="symbol"?key:String(key);}function image_toPrimitive(input,hint){if(image_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(image_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function decodeAndClamp(value,addend,coefficient,max){value=addend+value*coefficient;if(value<0){value=0;}else if(value>max){value=max;}return value;}function resizeImageMask(src,bpc,w1,h1,w2,h2){var length=w2*h2;var dest;if(bpc<=8){dest=new Uint8Array(length);}else if(bpc<=16){dest=new Uint16Array(length);}else{dest=new Uint32Array(length);}var xRatio=w1/w2;var yRatio=h1/h2;var i,j,py,newIndex=0,oldIndex;var xScaled=new Uint16Array(w2);var w1Scanline=w1;for(i=0;i<w2;i++){xScaled[i]=Math.floor(i*xRatio);}for(i=0;i<h2;i++){py=Math.floor(i*yRatio)*w1Scanline;for(j=0;j<w2;j++){oldIndex=py+xScaled[j];dest[newIndex++]=src[oldIndex];}}return dest;}var PDFImage=/*#__PURE__*/function(){function PDFImage(_ref){var xref=_ref.xref,res=_ref.res,image=_ref.image,_ref$isInline=_ref.isInline,isInline=_ref$isInline===void 0?false:_ref$isInline,_ref$smask=_ref.smask,smask=_ref$smask===void 0?null:_ref$smask,_ref$mask=_ref.mask,mask=_ref$mask===void 0?null:_ref$mask,_ref$isMask=_ref.isMask,isMask=_ref$isMask===void 0?false:_ref$isMask,pdfFunctionFactory=_ref.pdfFunctionFactory,localColorSpaceCache=_ref.localColorSpaceCache;image_classCallCheck(this,PDFImage);this.image=image;var dict=image.dict;var filter=dict.get("F","Filter");var filterName;if(filter instanceof Name){filterName=filter.name;}else if(Array.isArray(filter)){var filterZero=xref.fetchIfRef(filter[0]);if(filterZero instanceof Name){filterName=filterZero.name;}}switch(filterName){case"JPXDecode":var jpxImage=new JpxImage();jpxImage.parseImageProperties(image.stream);image.stream.reset();image.width=jpxImage.width;image.height=jpxImage.height;image.bitsPerComponent=jpxImage.bitsPerComponent;image.numComps=jpxImage.componentsCount;break;case"JBIG2Decode":image.bitsPerComponent=1;image.numComps=1;break;}var width=dict.get("W","Width");var height=dict.get("H","Height");if(Number.isInteger(image.width)&&image.width>0&&Number.isInteger(image.height)&&image.height>0&&(image.width!==width||image.height!==height)){warn("PDFImage - using the Width/Height of the image data, "+"rather than the image dictionary.");width=image.width;height=image.height;}if(width<1||height<1){throw new FormatError("Invalid image width: ".concat(width," or height: ").concat(height));}this.width=width;this.height=height;this.interpolate=dict.get("I","Interpolate");this.imageMask=dict.get("IM","ImageMask")||false;this.matte=dict.get("Matte")||false;var bitsPerComponent=image.bitsPerComponent;if(!bitsPerComponent){bitsPerComponent=dict.get("BPC","BitsPerComponent");if(!bitsPerComponent){if(this.imageMask){bitsPerComponent=1;}else{throw new FormatError("Bits per component missing in image: ".concat(this.imageMask));}}}this.bpc=bitsPerComponent;if(!this.imageMask){var colorSpace=dict.getRaw("CS")||dict.getRaw("ColorSpace");if(!colorSpace){info("JPX images (which do not require color spaces)");switch(image.numComps){case 1:colorSpace=Name.get("DeviceGray");break;case 3:colorSpace=Name.get("DeviceRGB");break;case 4:colorSpace=Name.get("DeviceCMYK");break;default:throw new Error("JPX images with ".concat(image.numComps," color components not supported."));}}this.colorSpace=ColorSpace.parse({cs:colorSpace,xref:xref,resources:isInline?res:null,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});this.numComps=this.colorSpace.numComps;}this.decode=dict.getArray("D","Decode");this.needsDecode=false;if(this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,bitsPerComponent)||isMask&&!ColorSpace.isDefaultDecode(this.decode,1))){var _this$colorSpace;this.needsDecode=true;var max=(1<<bitsPerComponent)-1;this.decodeCoefficients=[];this.decodeAddends=[];var isIndexed=((_this$colorSpace=this.colorSpace)===null||_this$colorSpace===void 0?void 0:_this$colorSpace.name)==="Indexed";for(var i=0,j=0;i<this.decode.length;i+=2,++j){var dmin=this.decode[i];var dmax=this.decode[i+1];this.decodeCoefficients[j]=isIndexed?(dmax-dmin)/max:dmax-dmin;this.decodeAddends[j]=isIndexed?dmin:max*dmin;}}if(smask){this.smask=new PDFImage({xref:xref,res:res,image:smask,isInline:isInline,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});}else if(mask){if(mask instanceof BaseStream){var maskDict=mask.dict,imageMask=maskDict.get("IM","ImageMask");if(!imageMask){warn("Ignoring /Mask in image without /ImageMask.");}else{this.mask=new PDFImage({xref:xref,res:res,image:mask,isInline:isInline,isMask:true,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});}}else{this.mask=mask;}}}image_createClass(PDFImage,[{key:"drawWidth",get:function get(){var _this$smask,_this$mask;return Math.max(this.width,((_this$smask=this.smask)===null||_this$smask===void 0?void 0:_this$smask.width)||0,((_this$mask=this.mask)===null||_this$mask===void 0?void 0:_this$mask.width)||0);}},{key:"drawHeight",get:function get(){var _this$smask2,_this$mask2;return Math.max(this.height,((_this$smask2=this.smask)===null||_this$smask2===void 0?void 0:_this$smask2.height)||0,((_this$mask2=this.mask)===null||_this$mask2===void 0?void 0:_this$mask2.height)||0);}},{key:"decodeBuffer",value:function decodeBuffer(buffer){var bpc=this.bpc;var numComps=this.numComps;var decodeAddends=this.decodeAddends;var decodeCoefficients=this.decodeCoefficients;var max=(1<<bpc)-1;var i,ii;if(bpc===1){for(i=0,ii=buffer.length;i<ii;i++){buffer[i]=+!buffer[i];}return;}var index=0;for(i=0,ii=this.width*this.height;i<ii;i++){for(var j=0;j<numComps;j++){buffer[index]=decodeAndClamp(buffer[index],decodeAddends[j],decodeCoefficients[j],max);index++;}}}},{key:"getComponents",value:function getComponents(buffer){var bpc=this.bpc;if(bpc===8){return buffer;}var width=this.width;var height=this.height;var numComps=this.numComps;var length=width*height*numComps;var bufferPos=0;var output;if(bpc<=8){output=new Uint8Array(length);}else if(bpc<=16){output=new Uint16Array(length);}else{output=new Uint32Array(length);}var rowComps=width*numComps;var max=(1<<bpc)-1;var i=0,ii,buf;if(bpc===1){var mask,loop1End,loop2End;for(var j=0;j<height;j++){loop1End=i+(rowComps&~7);loop2End=i+rowComps;while(i<loop1End){buf=buffer[bufferPos++];output[i]=buf>>7&1;output[i+1]=buf>>6&1;output[i+2]=buf>>5&1;output[i+3]=buf>>4&1;output[i+4]=buf>>3&1;output[i+5]=buf>>2&1;output[i+6]=buf>>1&1;output[i+7]=buf&1;i+=8;}if(i<loop2End){buf=buffer[bufferPos++];mask=128;while(i<loop2End){output[i++]=+!!(buf&mask);mask>>=1;}}}}else{var bits=0;buf=0;for(i=0,ii=length;i<ii;++i){if(i%rowComps===0){buf=0;bits=0;}while(bits<bpc){buf=buf<<8|buffer[bufferPos++];bits+=8;}var remainingBits=bits-bpc;var value=buf>>remainingBits;if(value<0){value=0;}else if(value>max){value=max;}output[i]=value;buf&=(1<<remainingBits)-1;bits=remainingBits;}}return output;}},{key:"fillOpacity",value:function fillOpacity(rgbaBuf,width,height,actualHeight,image){var smask=this.smask;var mask=this.mask;var alphaBuf,sw,sh,i,ii,j;if(smask){sw=smask.width;sh=smask.height;alphaBuf=new Uint8ClampedArray(sw*sh);smask.fillGrayBuffer(alphaBuf);if(sw!==width||sh!==height){alphaBuf=resizeImageMask(alphaBuf,smask.bpc,sw,sh,width,height);}}else if(mask){if(mask instanceof PDFImage){sw=mask.width;sh=mask.height;alphaBuf=new Uint8ClampedArray(sw*sh);mask.numComps=1;mask.fillGrayBuffer(alphaBuf);for(i=0,ii=sw*sh;i<ii;++i){alphaBuf[i]=255-alphaBuf[i];}if(sw!==width||sh!==height){alphaBuf=resizeImageMask(alphaBuf,mask.bpc,sw,sh,width,height);}}else if(Array.isArray(mask)){alphaBuf=new Uint8ClampedArray(width*height);var numComps=this.numComps;for(i=0,ii=width*height;i<ii;++i){var opacity=0;var imageOffset=i*numComps;for(j=0;j<numComps;++j){var color=image[imageOffset+j];var maskOffset=j*2;if(color<mask[maskOffset]||color>mask[maskOffset+1]){opacity=255;break;}}alphaBuf[i]=opacity;}}else{throw new FormatError("Unknown mask format.");}}if(alphaBuf){for(i=0,j=3,ii=width*actualHeight;i<ii;++i,j+=4){rgbaBuf[j]=alphaBuf[i];}}else{for(i=0,j=3,ii=width*actualHeight;i<ii;++i,j+=4){rgbaBuf[j]=255;}}}},{key:"undoPreblend",value:function undoPreblend(buffer,width,height){var _this$smask3;var matte=(_this$smask3=this.smask)===null||_this$smask3===void 0?void 0:_this$smask3.matte;if(!matte){return;}var matteRgb=this.colorSpace.getRgb(matte,0);var matteR=matteRgb[0];var matteG=matteRgb[1];var matteB=matteRgb[2];var length=width*height*4;for(var i=0;i<length;i+=4){var alpha=buffer[i+3];if(alpha===0){buffer[i]=255;buffer[i+1]=255;buffer[i+2]=255;continue;}var k=255/alpha;buffer[i]=(buffer[i]-matteR)*k+matteR;buffer[i+1]=(buffer[i+1]-matteG)*k+matteG;buffer[i+2]=(buffer[i+2]-matteB)*k+matteB;}}},{key:"createImageData",value:function(){var _createImageData=image_asyncToGenerator(/*#__PURE__*/image_regeneratorRuntime().mark(function _callee(){var forceRGBA,isOffscreenCanvasSupported,drawWidth,drawHeight,imgData,numComps,originalWidth,originalHeight,bpc,rowBytes,mustBeResized,kind,_data,buffer,i,ii,imageLength,isHandled,rgba,imgArray,actualHeight,comps,alpha01,maybeUndoPreblend,canvas,ctx,canvasImgData,data,arr,bitmap,_args=arguments;return image_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:forceRGBA=_args.length>0&&_args[0]!==undefined?_args[0]:false;isOffscreenCanvasSupported=_args.length>1&&_args[1]!==undefined?_args[1]:false;drawWidth=this.drawWidth;drawHeight=this.drawHeight;imgData={width:drawWidth,height:drawHeight,interpolate:this.interpolate,kind:0,data:null};numComps=this.numComps;originalWidth=this.width;originalHeight=this.height;bpc=this.bpc;rowBytes=originalWidth*numComps*bpc+7>>3;mustBeResized=isOffscreenCanvasSupported&&ImageResizer.needsToBeResized(drawWidth,drawHeight);if(forceRGBA){_context.next=52;break;}if(this.colorSpace.name==="DeviceGray"&&bpc===1){kind=ImageKind.GRAYSCALE_1BPP;}else if(this.colorSpace.name==="DeviceRGB"&&bpc===8&&!this.needsDecode){kind=ImageKind.RGB_24BPP;}if(!(kind&&!this.smask&&!this.mask&&drawWidth===originalWidth&&drawHeight===originalHeight)){_context.next=23;break;}_data=this.getImageBytes(originalHeight*rowBytes,{});if(!isOffscreenCanvasSupported){_context.next=19;break;}if(!mustBeResized){_context.next=18;break;}return _context.abrupt("return",ImageResizer.createImage({data:_data,kind:kind,width:drawWidth,height:drawHeight,interpolate:this.interpolate},this.needsDecode));case 18:return _context.abrupt("return",this.createBitmap(kind,originalWidth,originalHeight,_data));case 19:imgData.kind=kind;imgData.data=_data;if(this.needsDecode){assert(kind===ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");buffer=imgData.data;for(i=0,ii=buffer.length;i<ii;i++){buffer[i]^=0xff;}}return _context.abrupt("return",imgData);case 23:if(!(this.image instanceof JpegStream&&!this.smask&&!this.mask&&!this.needsDecode)){_context.next=52;break;}imageLength=originalHeight*rowBytes;if(!(isOffscreenCanvasSupported&&!mustBeResized)){_context.next=43;break;}isHandled=false;_context.t0=this.colorSpace.name;_context.next=_context.t0==="DeviceGray"?30:_context.t0==="DeviceRGB"?33:_context.t0==="DeviceCMYK"?36:38;break;case 30:imageLength*=4;isHandled=true;return _context.abrupt("break",38);case 33:imageLength=imageLength/3*4;isHandled=true;return _context.abrupt("break",38);case 36:isHandled=true;return _context.abrupt("break",38);case 38:if(!isHandled){_context.next=41;break;}rgba=this.getImageBytes(imageLength,{drawWidth:drawWidth,drawHeight:drawHeight,forceRGBA:true});return _context.abrupt("return",this.createBitmap(ImageKind.RGBA_32BPP,drawWidth,drawHeight,rgba));case 41:_context.next=52;break;case 43:_context.t1=this.colorSpace.name;_context.next=_context.t1==="DeviceGray"?46:_context.t1==="DeviceRGB"?47:_context.t1==="DeviceCMYK"?47:52;break;case 46:imageLength*=3;case 47:imgData.kind=ImageKind.RGB_24BPP;imgData.data=this.getImageBytes(imageLength,{drawWidth:drawWidth,drawHeight:drawHeight,forceRGB:true});if(!mustBeResized){_context.next=51;break;}return _context.abrupt("return",ImageResizer.createImage(imgData));case 51:return _context.abrupt("return",imgData);case 52:imgArray=this.getImageBytes(originalHeight*rowBytes,{internal:true});actualHeight=0|imgArray.length/rowBytes*drawHeight/originalHeight;comps=this.getComponents(imgArray);if(isOffscreenCanvasSupported&&!mustBeResized){canvas=new OffscreenCanvas(drawWidth,drawHeight);ctx=canvas.getContext("2d");canvasImgData=ctx.createImageData(drawWidth,drawHeight);data=canvasImgData.data;}imgData.kind=ImageKind.RGBA_32BPP;if(!forceRGBA&&!this.smask&&!this.mask){if(!isOffscreenCanvasSupported||mustBeResized){imgData.kind=ImageKind.RGB_24BPP;data=new Uint8ClampedArray(drawWidth*drawHeight*3);alpha01=0;}else{arr=new Uint32Array(data.buffer);arr.fill(FeatureTest.isLittleEndian?0xff000000:0x000000ff);alpha01=1;}maybeUndoPreblend=false;}else{if(!isOffscreenCanvasSupported||mustBeResized){data=new Uint8ClampedArray(drawWidth*drawHeight*4);}alpha01=1;maybeUndoPreblend=true;this.fillOpacity(data,drawWidth,drawHeight,actualHeight,comps);}if(this.needsDecode){this.decodeBuffer(comps);}this.colorSpace.fillRgb(data,originalWidth,originalHeight,drawWidth,drawHeight,actualHeight,bpc,comps,alpha01);if(maybeUndoPreblend){this.undoPreblend(data,drawWidth,actualHeight);}if(!(isOffscreenCanvasSupported&&!mustBeResized)){_context.next=65;break;}ctx.putImageData(canvasImgData,0,0);bitmap=canvas.transferToImageBitmap();return _context.abrupt("return",{data:null,width:drawWidth,height:drawHeight,bitmap:bitmap,interpolate:this.interpolate});case 65:imgData.data=data;if(!mustBeResized){_context.next=68;break;}return _context.abrupt("return",ImageResizer.createImage(imgData));case 68:return _context.abrupt("return",imgData);case 69:case"end":return _context.stop();}},_callee,this);}));function createImageData(){return _createImageData.apply(this,arguments);}return createImageData;}()},{key:"fillGrayBuffer",value:function fillGrayBuffer(buffer){var numComps=this.numComps;if(numComps!==1){throw new FormatError("Reading gray scale from a color image: ".concat(numComps));}var width=this.width;var height=this.height;var bpc=this.bpc;var rowBytes=width*numComps*bpc+7>>3;var imgArray=this.getImageBytes(height*rowBytes,{internal:true});var comps=this.getComponents(imgArray);var i,length;if(bpc===1){length=width*height;if(this.needsDecode){for(i=0;i<length;++i){buffer[i]=comps[i]-1&255;}}else{for(i=0;i<length;++i){buffer[i]=-comps[i]&255;}}return;}if(this.needsDecode){this.decodeBuffer(comps);}length=width*height;var scale=255/((1<<bpc)-1);for(i=0;i<length;++i){buffer[i]=scale*comps[i];}}},{key:"createBitmap",value:function createBitmap(kind,width,height,src){var canvas=new OffscreenCanvas(width,height);var ctx=canvas.getContext("2d");var imgData;if(kind===ImageKind.RGBA_32BPP){imgData=new ImageData(src,width,height);}else{imgData=ctx.createImageData(width,height);convertToRGBA({kind:kind,src:src,dest:new Uint32Array(imgData.data.buffer),width:width,height:height,inverseDecode:this.needsDecode});}ctx.putImageData(imgData,0,0);var bitmap=canvas.transferToImageBitmap();return{data:null,width:width,height:height,bitmap:bitmap,interpolate:this.interpolate};}},{key:"getImageBytes",value:function getImageBytes(length,_ref2){var drawWidth=_ref2.drawWidth,drawHeight=_ref2.drawHeight,_ref2$forceRGBA=_ref2.forceRGBA,forceRGBA=_ref2$forceRGBA===void 0?false:_ref2$forceRGBA,_ref2$forceRGB=_ref2.forceRGB,forceRGB=_ref2$forceRGB===void 0?false:_ref2$forceRGB,_ref2$internal=_ref2.internal,internal=_ref2$internal===void 0?false:_ref2$internal;this.image.reset();this.image.drawWidth=drawWidth||this.width;this.image.drawHeight=drawHeight||this.height;this.image.forceRGBA=!!forceRGBA;this.image.forceRGB=!!forceRGB;var imageBytes=this.image.getBytes(length);if(internal||this.image instanceof DecodeStream){return imageBytes;}assert(imageBytes instanceof Uint8Array,'PDFImage.getImageBytes: Unsupported "imageBytes" type.');return new Uint8Array(imageBytes);}}],[{key:"buildImage",value:function(){var _buildImage=image_asyncToGenerator(/*#__PURE__*/image_regeneratorRuntime().mark(function _callee2(_ref3){var xref,res,image,_ref3$isInline,isInline,pdfFunctionFactory,localColorSpaceCache,imageData,smaskData,maskData,smask,mask;return image_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:xref=_ref3.xref,res=_ref3.res,image=_ref3.image,_ref3$isInline=_ref3.isInline,isInline=_ref3$isInline===void 0?false:_ref3$isInline,pdfFunctionFactory=_ref3.pdfFunctionFactory,localColorSpaceCache=_ref3.localColorSpaceCache;imageData=image;smaskData=null;maskData=null;smask=image.dict.get("SMask");mask=image.dict.get("Mask");if(smask){if(smask instanceof BaseStream){smaskData=smask;}else{warn("Unsupported /SMask format.");}}else if(mask){if(mask instanceof BaseStream||Array.isArray(mask)){maskData=mask;}else{warn("Unsupported /Mask format.");}}return _context2.abrupt("return",new PDFImage({xref:xref,res:res,image:imageData,isInline:isInline,smask:smaskData,mask:maskData,pdfFunctionFactory:pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}));case 8:case"end":return _context2.stop();}},_callee2);}));function buildImage(_x){return _buildImage.apply(this,arguments);}return buildImage;}()},{key:"createRawMask",value:function createRawMask(_ref4){var imgArray=_ref4.imgArray,width=_ref4.width,height=_ref4.height,imageIsFromDecodeStream=_ref4.imageIsFromDecodeStream,inverseDecode=_ref4.inverseDecode,interpolate=_ref4.interpolate;var computedLength=(width+7>>3)*height;var actualLength=imgArray.byteLength;var haveFullData=computedLength===actualLength;var data,i;if(imageIsFromDecodeStream&&(!inverseDecode||haveFullData)){data=imgArray;}else if(!inverseDecode){data=new Uint8Array(imgArray);}else{data=new Uint8Array(computedLength);data.set(imgArray);data.fill(0xff,actualLength);}if(inverseDecode){for(i=0;i<actualLength;i++){data[i]^=0xff;}}return{data:data,width:width,height:height,interpolate:interpolate};}},{key:"createMask",value:function(){var _createMask=image_asyncToGenerator(/*#__PURE__*/image_regeneratorRuntime().mark(function _callee3(_ref5){var imgArray,width,height,imageIsFromDecodeStream,inverseDecode,interpolate,_ref5$isOffscreenCanv,isOffscreenCanvasSupported,isSingleOpaquePixel,data,canvas,ctx,imgData,bitmap;return image_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:imgArray=_ref5.imgArray,width=_ref5.width,height=_ref5.height,imageIsFromDecodeStream=_ref5.imageIsFromDecodeStream,inverseDecode=_ref5.inverseDecode,interpolate=_ref5.interpolate,_ref5$isOffscreenCanv=_ref5.isOffscreenCanvasSupported,isOffscreenCanvasSupported=_ref5$isOffscreenCanv===void 0?false:_ref5$isOffscreenCanv;isSingleOpaquePixel=width===1&&height===1&&inverseDecode===(imgArray.length===0||!!(imgArray[0]&128));if(!isSingleOpaquePixel){_context3.next=4;break;}return _context3.abrupt("return",{isSingleOpaquePixel:isSingleOpaquePixel});case 4:if(!isOffscreenCanvasSupported){_context3.next=16;break;}if(!ImageResizer.needsToBeResized(width,height)){_context3.next=9;break;}data=new Uint8ClampedArray(width*height*4);convertBlackAndWhiteToRGBA({src:imgArray,dest:data,width:width,height:height,nonBlackColor:0,inverseDecode:inverseDecode});return _context3.abrupt("return",ImageResizer.createImage({kind:ImageKind.RGBA_32BPP,data:data,width:width,height:height,interpolate:interpolate}));case 9:canvas=new OffscreenCanvas(width,height);ctx=canvas.getContext("2d");imgData=ctx.createImageData(width,height);convertBlackAndWhiteToRGBA({src:imgArray,dest:imgData.data,width:width,height:height,nonBlackColor:0,inverseDecode:inverseDecode});ctx.putImageData(imgData,0,0);bitmap=canvas.transferToImageBitmap();return _context3.abrupt("return",{data:null,width:width,height:height,interpolate:interpolate,bitmap:bitmap});case 16:return _context3.abrupt("return",this.createRawMask({imgArray:imgArray,width:width,height:height,inverseDecode:inverseDecode,imageIsFromDecodeStream:imageIsFromDecodeStream,interpolate:interpolate}));case 17:case"end":return _context3.stop();}},_callee3,this);}));function createMask(_x2){return _createMask.apply(this,arguments);}return createMask;}()}]);return PDFImage;}();
;// CONCATENATED MODULE: ./src/core/evaluator.js
function evaluator_typeof(o){"@babel/helpers - typeof";return evaluator_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},evaluator_typeof(o);}function evaluator_slicedToArray(arr,i){return evaluator_arrayWithHoles(arr)||evaluator_iterableToArrayLimit(arr,i)||evaluator_unsupportedIterableToArray(arr,i)||evaluator_nonIterableRest();}function evaluator_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function evaluator_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function evaluator_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function evaluator_toConsumableArray(arr){return evaluator_arrayWithoutHoles(arr)||evaluator_iterableToArray(arr)||evaluator_unsupportedIterableToArray(arr)||evaluator_nonIterableSpread();}function evaluator_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function evaluator_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function evaluator_arrayWithoutHoles(arr){if(Array.isArray(arr))return evaluator_arrayLikeToArray(arr);}function evaluator_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */evaluator_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==evaluator_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(evaluator_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function evaluator_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function evaluator_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){evaluator_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){evaluator_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function evaluator_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function evaluator_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,evaluator_toPropertyKey(descriptor.key),descriptor);}}function evaluator_createClass(Constructor,protoProps,staticProps){if(protoProps)evaluator_defineProperties(Constructor.prototype,protoProps);if(staticProps)evaluator_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function evaluator_defineProperty(obj,key,value){key=evaluator_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function evaluator_toPropertyKey(arg){var key=evaluator_toPrimitive(arg,"string");return evaluator_typeof(key)==="symbol"?key:String(key);}function evaluator_toPrimitive(input,hint){if(evaluator_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(evaluator_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function evaluator_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=evaluator_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function evaluator_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return evaluator_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return evaluator_arrayLikeToArray(o,minLen);}function evaluator_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}var DefaultPartialEvaluatorOptions=Object.freeze({maxImageSize:-1,disableFontFace:false,ignoreErrors:false,isEvalSupported:true,isOffscreenCanvasSupported:false,canvasMaxAreaInBytes:-1,fontExtraProperties:false,useSystemFonts:true,cMapUrl:null,standardFontDataUrl:null});var PatternType={TILING:1,SHADING:2};var TEXT_CHUNK_BATCH_SIZE=10;var deferred=Promise.resolve();function normalizeBlendMode(value){var parsingArray=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(Array.isArray(value)){var _iterator=evaluator_createForOfIteratorHelper(value),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var val=_step.value;var maybeBM=normalizeBlendMode(val,true);if(maybeBM){return maybeBM;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}warn("Unsupported blend mode Array: ".concat(value));return"source-over";}if(!(value instanceof Name)){if(parsingArray){return null;}return"source-over";}switch(value.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity";}if(parsingArray){return null;}warn("Unsupported blend mode: ".concat(value.name));return"source-over";}function incrementCachedImageMaskCount(data){var _data$args$;if(data.fn===OPS.paintImageMaskXObject&&((_data$args$=data.args[0])===null||_data$args$===void 0?void 0:_data$args$.count)>0){data.args[0].count++;}}var TimeSlotManager=/*#__PURE__*/function(){function TimeSlotManager(){evaluator_classCallCheck(this,TimeSlotManager);this.reset();}evaluator_createClass(TimeSlotManager,[{key:"check",value:function check(){if(++this.checked<TimeSlotManager.CHECK_TIME_EVERY){return false;}this.checked=0;return this.endTime<=Date.now();}},{key:"reset",value:function reset(){this.endTime=Date.now()+TimeSlotManager.TIME_SLOT_DURATION_MS;this.checked=0;}}]);return TimeSlotManager;}();evaluator_defineProperty(TimeSlotManager,"TIME_SLOT_DURATION_MS",20);evaluator_defineProperty(TimeSlotManager,"CHECK_TIME_EVERY",100);var PartialEvaluator=/*#__PURE__*/function(){function PartialEvaluator(_ref){var xref=_ref.xref,handler=_ref.handler,pageIndex=_ref.pageIndex,idFactory=_ref.idFactory,fontCache=_ref.fontCache,builtInCMapCache=_ref.builtInCMapCache,standardFontDataCache=_ref.standardFontDataCache,globalImageCache=_ref.globalImageCache,systemFontCache=_ref.systemFontCache,_ref$options=_ref.options,options=_ref$options===void 0?null:_ref$options;evaluator_classCallCheck(this,PartialEvaluator);this.xref=xref;this.handler=handler;this.pageIndex=pageIndex;this.idFactory=idFactory;this.fontCache=fontCache;this.builtInCMapCache=builtInCMapCache;this.standardFontDataCache=standardFontDataCache;this.globalImageCache=globalImageCache;this.systemFontCache=systemFontCache;this.options=options||DefaultPartialEvaluatorOptions;this.parsingType3Font=false;this._regionalImageCache=new RegionalImageCache();this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this);ImageResizer.setMaxArea(this.options.canvasMaxAreaInBytes);}evaluator_createClass(PartialEvaluator,[{key:"_pdfFunctionFactory",get:function get(){var pdfFunctionFactory=new PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported});return shadow(this,"_pdfFunctionFactory",pdfFunctionFactory);}},{key:"clone",value:function clone(){var newOptions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var newEvaluator=Object.create(this);newEvaluator.options=Object.assign(Object.create(null),this.options,newOptions);return newEvaluator;}},{key:"hasBlendModes",value:function hasBlendModes(resources,nonBlendModesSet){if(!(resources instanceof Dict)){return false;}if(resources.objId&&nonBlendModesSet.has(resources.objId)){return false;}var processed=new RefSet(nonBlendModesSet);if(resources.objId){processed.put(resources.objId);}var nodes=[resources],xref=this.xref;while(nodes.length){var node=nodes.shift();var graphicStates=node.get("ExtGState");if(graphicStates instanceof Dict){var _iterator2=evaluator_createForOfIteratorHelper(graphicStates.getRawValues()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var graphicState=_step2.value;if(graphicState instanceof Ref){if(processed.has(graphicState)){continue;}try{graphicState=xref.fetch(graphicState);}catch(ex){processed.put(graphicState);info("hasBlendModes - ignoring ExtGState: \"".concat(ex,"\"."));continue;}}if(!(graphicState instanceof Dict)){continue;}if(graphicState.objId){processed.put(graphicState.objId);}var bm=graphicState.get("BM");if(bm instanceof Name){if(bm.name!=="Normal"){return true;}continue;}if(bm!==undefined&&Array.isArray(bm)){var _iterator3=evaluator_createForOfIteratorHelper(bm),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var element=_step3.value;if(element instanceof Name&&element.name!=="Normal"){return true;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}var xObjects=node.get("XObject");if(!(xObjects instanceof Dict)){continue;}var _iterator4=evaluator_createForOfIteratorHelper(xObjects.getRawValues()),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var xObject=_step4.value;if(xObject instanceof Ref){if(processed.has(xObject)){continue;}try{xObject=xref.fetch(xObject);}catch(ex){processed.put(xObject);info("hasBlendModes - ignoring XObject: \"".concat(ex,"\"."));continue;}}if(!(xObject instanceof BaseStream)){continue;}if(xObject.dict.objId){processed.put(xObject.dict.objId);}var xResources=xObject.dict.get("Resources");if(!(xResources instanceof Dict)){continue;}if(xResources.objId&&processed.has(xResources.objId)){continue;}nodes.push(xResources);if(xResources.objId){processed.put(xResources.objId);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}var _iterator5=evaluator_createForOfIteratorHelper(processed),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var ref=_step5.value;nonBlendModesSet.put(ref);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}return false;}},{key:"fetchBuiltInCMap",value:function(){var _fetchBuiltInCMap=evaluator_asyncToGenerator(/*#__PURE__*/evaluator_regeneratorRuntime().mark(function _callee(name){var _cMapUrl;var cachedData,data,cMapUrl,url,response;return evaluator_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:cachedData=this.builtInCMapCache.get(name);if(!cachedData){_context.next=3;break;}return _context.abrupt("return",cachedData);case 3:cMapUrl=this.options.cMapUrl;if(((_cMapUrl=cMapUrl)===null||_cMapUrl===void 0?void 0:_cMapUrl.constructor.name)==="Function"){cMapUrl=cMapUrl();}if(!(cMapUrl!==null)){_context.next=21;break;}url="".concat(cMapUrl).concat(name,".bcmap");_context.next=9;return fetch(url);case 9:response=_context.sent;if(response.ok){_context.next=12;break;}throw new Error("fetchBuiltInCMap: failed to fetch file \"".concat(url,"\" with \"").concat(response.statusText,"\"."));case 12:_context.t0=Uint8Array;_context.next=15;return response.arrayBuffer();case 15:_context.t1=_context.sent;_context.t2=new _context.t0(_context.t1);_context.t3=CMapCompressionType.BINARY;data={cMapData:_context.t2,compressionType:_context.t3};_context.next=24;break;case 21:_context.next=23;return this.handler.sendWithPromise("FetchBuiltInCMap",{name:name});case 23:data=_context.sent;case 24:if(data.compressionType!==CMapCompressionType.NONE){this.builtInCMapCache.set(name,data);}return _context.abrupt("return",data);case 26:case"end":return _context.stop();}},_callee,this);}));function fetchBuiltInCMap(_x){return _fetchBuiltInCMap.apply(this,arguments);}return fetchBuiltInCMap;}()},{key:"fetchStandardFontData",value:function(){var _fetchStandardFontData=evaluator_asyncToGenerator(/*#__PURE__*/evaluator_regeneratorRuntime().mark(function _callee2(name){var cachedData,standardFontNameToFileName,filename,data,url,response;return evaluator_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:cachedData=this.standardFontDataCache.get(name);if(!cachedData){_context2.next=3;break;}return _context2.abrupt("return",new Stream(cachedData));case 3:if(!(this.options.useSystemFonts&&name!=="Symbol"&&name!=="ZapfDingbats")){_context2.next=5;break;}return _context2.abrupt("return",null);case 5:standardFontNameToFileName=getFontNameToFileMap(),filename=standardFontNameToFileName[name];if(!(this.options.standardFontDataUrl!==null)){_context2.next=22;break;}url="".concat(this.options.standardFontDataUrl).concat(filename);_context2.next=10;return fetch(url);case 10:response=_context2.sent;if(response.ok){_context2.next=15;break;}warn("fetchStandardFontData: failed to fetch file \"".concat(url,"\" with \"").concat(response.statusText,"\"."));_context2.next=20;break;case 15:_context2.t0=Uint8Array;_context2.next=18;return response.arrayBuffer();case 18:_context2.t1=_context2.sent;data=new _context2.t0(_context2.t1);case 20:_context2.next=31;break;case 22:_context2.prev=22;_context2.next=25;return this.handler.sendWithPromise("FetchStandardFontData",{filename:filename});case 25:data=_context2.sent;_context2.next=31;break;case 28:_context2.prev=28;_context2.t2=_context2["catch"](22);warn("fetchStandardFontData: failed to fetch file \"".concat(filename,"\" with \"").concat(_context2.t2,"\"."));case 31:if(data){_context2.next=33;break;}return _context2.abrupt("return",null);case 33:this.standardFontDataCache.set(name,data);return _context2.abrupt("return",new Stream(data));case 35:case"end":return _context2.stop();}},_callee2,this,[[22,28]]);}));function fetchStandardFontData(_x2){return _fetchStandardFontData.apply(this,arguments);}return fetchStandardFontData;}()},{key:"buildFormXObject",value:function(){var _buildFormXObject=evaluator_asyncToGenerator(/*#__PURE__*/evaluator_regeneratorRuntime().mark(function _callee3(resources,xobj,smask,operatorList,task,initialState,localColorSpaceCache){var dict,matrix,bbox,optionalContent,groupOptions,group,groupSubtype,colorSpace,cs,cachedColorSpace,args;return evaluator_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:dict=xobj.dict;matrix=dict.getArray("Matrix");bbox=dict.getArray("BBox");bbox=Array.isArray(bbox)&&bbox.length===4?Util.normalizeRect(bbox):null;if(!dict.has("OC")){_context3.next=8;break;}_context3.next=7;return this.parseMarkedContentProps(dict.get("OC"),resources);case 7:optionalContent=_context3.sent;case 8:if(optionalContent!==undefined){operatorList.addOp(OPS.beginMarkedContentProps,["OC",optionalContent]);}group=dict.get("Group");if(!group){_context3.next=29;break;}groupOptions={matrix:matrix,bbox:bbox,smask:smask,isolated:false,knockout:false};groupSubtype=group.get("S");colorSpace=null;if(!isName(groupSubtype,"Transparency")){_context3.next=27;break;}groupOptions.isolated=group.get("I")||false;groupOptions.knockout=group.get("K")||false;if(!group.has("CS")){_context3.next=27;break;}cs=group.getRaw("CS");cachedColorSpace=ColorSpace.getCached(cs,this.xref,localColorSpaceCache);if(!cachedColorSpace){_context3.next=24;break;}colorSpace=cachedColorSpace;_context3.next=27;break;case 24:_context3.next=26;return this.parseColorSpace({cs:cs,resources:resources,localColorSpaceCache:localColorSpaceCache});case 26:colorSpace=_context3.sent;case 27:if(smask!==null&&smask!==void 0&&smask.backdrop){colorSpace||(colorSpace=ColorSpace.singletons.rgb);smask.backdrop=colorSpace.getRgb(smask.backdrop,0);}operatorList.addOp(OPS.beginGroup,[groupOptions]);case 29:args=group?[matrix,null]:[matrix,bbox];operatorList.addOp(OPS.paintFormXObjectBegin,args);return _context3.abrupt("return",this.getOperatorList({stream:xobj,task:task,resources:dict.get("Resources")||resources,operatorList:operatorList,initialState:initialState}).then(function(){operatorList.addOp(OPS.paintFormXObjectEnd,[]);if(group){operatorList.addOp(OPS.endGroup,[groupOptions]);}if(optionalContent!==undefined){operatorList.addOp(OPS.endMarkedContent,[]);}}));case 32:case"end":return _context3.stop();}},_callee3,this);}));function buildFormXObject(_x3,_x4,_x5,_x6,_x7,_x8,_x9){return _buildFormXObject.apply(this,arguments);}return buildFormXObject;}()},{key:"_sendImgData",value:function _sendImgData(objId,imgData){var cacheGlobally=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var transfers=imgData?[imgData.bitmap||imgData.data.buffer]:null;if(this.parsingType3Font||cacheGlobally){return this.handler.send("commonobj",[objId,"Image",imgData],transfers);}return this.handler.send("obj",[objId,this.pageIndex,"Image",imgData],transfers);}},{key:"buildPaintImageXObject",value:function(){var _buildPaintImageXObject=evaluator_asyncToGenerator(/*#__PURE__*/evaluator_regeneratorRuntime().mark(function _callee5(_ref2){var _this=this;var resources,image,_ref2$isInline,isInline,operatorList,cacheKey,localImageCache,localColorSpaceCache,dict,imageRef,w,h,maxImageSize,msg,optionalContent,imageMask,imgData,args,interpolate,bitStrideLength,imgArray,decode,cacheData,_cacheData,_objId,_cacheData2,SMALL_IMAGE_DIMENSIONS,imageObj,objId,cacheGlobally,_cacheData3;return evaluator_regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:resources=_ref2.resources,image=_ref2.image,_ref2$isInline=_ref2.isInline,isInline=_ref2$isInline===void 0?false:_ref2$isInline,operatorList=_ref2.operatorList,cacheKey=_ref2.cacheKey,localImageCache=_ref2.localImageCache,localColorSpaceCache=_ref2.localColorSpaceCache;dict=image.dict;imageRef=dict.objId;w=dict.get("W","Width");h=dict.get("H","Height");if(!(!(w&&typeof w==="number")||!(h&&typeof h==="number"))){_context5.next=8;break;}warn("Image dimensions are missing, or not numbers.");return _context5.abrupt("return");case 8:maxImageSize=this.options.maxImageSize;if(!(maxImageSize!==-1&&w*h>maxImageSize)){_context5.next=15;break;}msg="Image exceeded maximum allowed size and was removed.";if(!this.options.ignoreErrors){_context5.next=14;break;}warn(msg);return _context5.abrupt("return");case 14:throw new Error(msg);case 15:if(!dict.has("OC")){_context5.next=19;break;}_context5.next=18;return this.parseMarkedContentProps(dict.get("OC"),resources);case 18:optionalContent=_context5.sent;case 19:imageMask=dict.get("IM","ImageMask")||false;if(!imageMask){_context5.next=46;break;}interpolate=dict.get("I","Interpolate");bitStrideLength=w+7>>3;imgArray=image.getBytes(bitStrideLength*h);decode=dict.getArray("D","Decode");if(!this.parsingType3Font){_context5.next=32;break;}imgData=PDFImage.createRawMask({imgArray:imgArray,width:w,height:h,imageIsFromDecodeStream:image instanceof DecodeStream,inverseDecode:(decode===null||decode===void 0?void 0:decode[0])>0,interpolate:interpolate});imgData.cached=!!cacheKey;args=[imgData];operatorList.addImageOps(OPS.paintImageMaskXObject,args,optionalContent);if(cacheKey){cacheData={fn:OPS.paintImageMaskXObject,args:args,optionalContent:optionalContent};localImageCache.set(cacheKey,imageRef,cacheData);if(imageRef){this._regionalImageCache.set(null,imageRef,cacheData);}}return _context5.abrupt("return");case 32:_context5.next=34;return PDFImage.createMask({imgArray:imgArray,width:w,height:h,imageIsFromDecodeStream:image instanceof DecodeStream,inverseDecode:(decode===null||decode===void 0?void 0:decode[0])>0,interpolate:interpolate,isOffscreenCanvasSupported:this.options.isOffscreenCanvasSupported});case 34:imgData=_context5.sent;if(!imgData.isSingleOpaquePixel){_context5.next=39;break;}operatorList.addImageOps(OPS.paintSolidColorImageMask,[],optionalContent);if(cacheKey){_cacheData={fn:OPS.paintSolidColorImageMask,args:[],optionalContent:optionalContent};localImageCache.set(cacheKey,imageRef,_cacheData);if(imageRef){this._regionalImageCache.set(null,imageRef,_cacheData);}}return _context5.abrupt("return");case 39:_objId="mask_".concat(this.idFactory.createObjId());operatorList.addDependency(_objId);this._sendImgData(_objId,imgData);args=[{data:_objId,width:imgData.width,height:imgData.height,interpolate:imgData.interpolate,count:1}];operatorList.addImageOps(OPS.paintImageMaskXObject,args,optionalContent);if(cacheKey){_cacheData2={fn:OPS.paintImageMaskXObject,args:args,optionalContent:optionalContent};localImageCache.set(cacheKey,imageRef,_cacheData2);if(imageRef){this._regionalImageCache.set(null,imageRef,_cacheData2);}}return _context5.abrupt("return");case 46:SMALL_IMAGE_DIMENSIONS=200;if(!(isInline&&!dict.has("SMask")&&!dict.has("Mask")&&w+h<SMALL_IMAGE_DIMENSIONS)){_context5.next=55;break;}imageObj=new PDFImage({xref:this.xref,res:resources,image:image,isInline:isInline,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache});_context5.next=51;return imageObj.createImageData(true,false);case 51:imgData=_context5.sent;operatorList.isOffscreenCanvasSupported=this.options.isOffscreenCanvasSupported;operatorList.addImageOps(OPS.paintInlineImageXObject,[imgData],optionalContent);return _context5.abrupt("return");case 55:objId="img_".concat(this.idFactory.createObjId()),cacheGlobally=false;if(this.parsingType3Font){objId="".concat(this.idFactory.getDocId(),"_type3_").concat(objId);}else if(imageRef){cacheGlobally=this.globalImageCache.shouldCache(imageRef,this.pageIndex);if(cacheGlobally){objId="".concat(this.idFactory.getDocId(),"_").concat(objId);}}operatorList.addDependency(objId);args=[objId,w,h];PDFImage.buildImage({xref:this.xref,res:resources,image:image,isInline:isInline,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}).then(/*#__PURE__*/function(){var _ref3=evaluator_asyncToGenerator(/*#__PURE__*/evaluator_regeneratorRuntime().mark(function _callee4(imageObj){var length;return evaluator_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return imageObj.createImageData(false,_this.options.isOffscreenCanvasSupported);case 2:imgData=_context4.sent;if(cacheKey&&imageRef&&cacheGlobally){length=imgData.bitmap?imgData.width*imgData.height*4:imgData.data.length;_this.globalImageCache.addByteSize(imageRef,length);}return _context4.abrupt("return",_this._sendImgData(objId,imgData,cacheGlobally));case 5:case"end":return _context4.stop();}},_callee4);}));return function(_x11){return _ref3.apply(this,arguments);};}()).catch(function(reason){warn("Unable to decode image \"".concat(objId,"\": \"").concat(reason,"\"."));return _this._sendImgData(objId,null,cacheGlobally);});operatorList.addImageOps(OPS.paintImageXObject,args,optionalContent);if(cacheKey){_cacheData3={fn:OPS.paintImageXObject,args:args,optionalContent:optionalContent};localImageCache.set(cacheKey,imageRef,_cacheData3);if(imageRef){this._regionalImageCache.set(null,imageRef,_cacheData3);if(cacheGlobally){assert(!isInline,"Cannot cache an inline image globally.");this.globalImageCache.setData(imageRef,{objId:objId,fn:OPS.paintImageXObject,args:args,optionalContent:optionalContent,byteSize:0});}}}case 62:case"end":return _context5.stop();}},_callee5,this);}));function buildPaintImageXObject(_x10){return _buildPaintImageXObject.apply(this,arguments);}return buildPaintImageXObject;}()},{key:"handleSMask",value:function handleSMask(smask,resources,operatorList,task,stateManager,localColorSpaceCache){var smaskContent=smask.get("G");var smaskOptions={subtype:smask.get("S").name,backdrop:smask.get("BC")};var transferObj=smask.get("TR");if(isPDFFunction(transferObj)){var transferFn=this._pdfFunctionFactory.create(transferObj);var transferMap=new Uint8Array(256);var tmp=new Float32Array(1);for(var i=0;i<256;i++){tmp[0]=i/255;transferFn(tmp,0,tmp,0);transferMap[i]=tmp[0]*255|0;}smaskOptions.transferMap=transferMap;}return this.buildFormXObject(resources,smaskContent,smaskOptions,operatorList,task,stateManager.state.clone(),localColorSpaceCache);}},{key:"handleTransferFunction",value:function handleTransferFunction(tr){var transferArray;if(Array.isArray(tr)){transferArray=tr;}else if(isPDFFunction(tr)){transferArray=[tr];}else{return null;}var transferMaps=[];var numFns=0,numEffectfulFns=0;var _iterator6=evaluator_createForOfIteratorHelper(transferArray),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var entry=_step6.value;var transferObj=this.xref.fetchIfRef(entry);numFns++;if(isName(transferObj,"Identity")){transferMaps.push(null);continue;}else if(!isPDFFunction(transferObj)){return null;}var transferFn=this._pdfFunctionFactory.create(transferObj);var transferMap=new Uint8Array(256),tmp=new Float32Array(1);for(var j=0;j<256;j++){tmp[0]=j/255;transferFn(tmp,0,tmp,0);transferMap[j]=tmp[0]*255|0;}transferMaps.push(transferMap);numEffectfulFns++;}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}if(!(numFns===1||numFns===4)){return null;}if(numEffectfulFns===0){return null;}return transferMaps;}},{key:"handleTilingType",value:function handleTilingType(fn,color,resources,pattern,patternDict,operatorList,task,localTilingPatternCache){var _this2=this;var tilingOpList=new OperatorList();var patternResources=Dict.merge({xref:this.xref,dictArray:[patternDict.get("Resources"),resources]});return this.getOperatorList({stream:pattern,task:task,resources:patternResources,operatorList:tilingOpList}).then(function(){var operatorListIR=tilingOpList.getIR();var tilingPatternIR=getTilingPatternIR(operatorListIR,patternDict,color);operatorList.addDependencies(tilingOpList.dependencies);operatorList.addOp(fn,tilingPatternIR);if(patternDict.objId){localTilingPatternCache.set(null,patternDict.objId,{operatorListIR:operatorListIR,dict:patternDict});}}).catch(function(reason){if(reason instanceof AbortException){return;}if(_this2.options.ignoreErrors){warn("handleTilingType - ignoring pattern: \"".concat(reason,"\"."));return;}throw reason;});}},{key:"handleSetFont",value:function handleSetFont(resources,fontArgs,fontRef,operatorList,task,state){var _this3=this;var fallbackFontDict=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;var cssFontInfo=arguments.length>7&&arguments[7]!==undefined?arguments[7]:null;var fontName=(fontArgs===null||fontArgs===void 0?void 0:fontArgs[0])instanceof Name?fontArgs[0].name:null;return this.loadFont(fontName,fontRef,resources,fallbackFontDict,cssFontInfo).then(function(translated){if(!translated.font.isType3Font){return translated;}return translated.loadType3Data(_this3,resources,task).then(function(){operatorList.addDependencies(translated.type3Dependencies);return translated;}).catch(function(reason){return new TranslatedFont({loadedName:"g_font_error",font:new ErrorFont("Type3 font load error: ".concat(reason)),dict:translated.font,evaluatorOptions:_this3.options});});}).then(function(translated){state.font=translated.font;translated.send(_this3.handler);return translated.loadedName;});}},{key:"handleText",value:function handleText(chars,state){var font=state.font;var glyphs=font.charsToGlyphs(chars);if(font.data){var isAddToPathSet=!!(state.textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG);if(isAddToPathSet||state.fillColorSpace.name==="Pattern"||font.disableFontFace||this.options.disableFontFace){PartialEvaluator.buildFontPaths(font,glyphs,this.handler,this.options);}}return glyphs;}},{key:"ensureStateFont",value:function ensureStateFont(state){if(state.font){return;}var reason=new FormatError("Missing setFont (Tf) operator before text rendering operator.");if(this.options.ignoreErrors){warn("ensureStateFont: \"".concat(reason,"\"."));return;}throw reason;}},{key:"setGState",value:function(){var _setGState=evaluator_asyncToGenerator(/*#__PURE__*/evaluator_regeneratorRuntime().mark(function _callee6(_ref4){var _this4=this;var resources,gState,operatorList,cacheKey,task,stateManager,localGStateCache,localColorSpaceCache,gStateRef,isSimpleGState,gStateObj,promise,_iterator7,_step7,_loop;return evaluator_regeneratorRuntime().wrap(function _callee6$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:resources=_ref4.resources,gState=_ref4.gState,operatorList=_ref4.operatorList,cacheKey=_ref4.cacheKey,task=_ref4.task,stateManager=_ref4.stateManager,localGStateCache=_ref4.localGStateCache,localColorSpaceCache=_ref4.localColorSpaceCache;gStateRef=gState.objId;isSimpleGState=true;gStateObj=[];promise=Promise.resolve();_iterator7=evaluator_createForOfIteratorHelper(gState.getKeys());_context7.prev=6;_loop=/*#__PURE__*/evaluator_regeneratorRuntime().mark(function _loop(){var key,value,transferMaps;return evaluator_regeneratorRuntime().wrap(function _loop$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:key=_step7.value;value=gState.get(key);_context6.t0=key;_context6.next=_context6.t0==="Type"?5:_context6.t0==="LW"?6:_context6.t0==="LC"?6:_context6.t0==="LJ"?6:_context6.t0==="ML"?6:_context6.t0==="D"?6:_context6.t0==="RI"?6:_context6.t0==="FL"?6:_context6.t0==="CA"?6:_context6.t0==="ca"?6:_context6.t0==="Font"?8:_context6.t0==="BM"?11:_context6.t0==="SMask"?13:_context6.t0==="TR"?18:_context6.t0==="OP"?21:_context6.t0==="op"?21:_context6.t0==="OPM"?21:_context6.t0==="BG"?21:_context6.t0==="BG2"?21:_context6.t0==="UCR"?21:_context6.t0==="UCR2"?21:_context6.t0==="TR2"?21:_context6.t0==="HT"?21:_context6.t0==="SM"?21:_context6.t0==="SA"?21:_context6.t0==="AIS"?21:_context6.t0==="TK"?21:23;break;case 5:return _context6.abrupt("break",25);case 6:gStateObj.push([key,value]);return _context6.abrupt("break",25);case 8:isSimpleGState=false;promise=promise.then(function(){return _this4.handleSetFont(resources,null,value[0],operatorList,task,stateManager.state).then(function(loadedName){operatorList.addDependency(loadedName);gStateObj.push([key,[loadedName,value[1]]]);});});return _context6.abrupt("break",25);case 11:gStateObj.push([key,normalizeBlendMode(value)]);return _context6.abrupt("break",25);case 13:if(!isName(value,"None")){_context6.next=16;break;}gStateObj.push([key,false]);return _context6.abrupt("break",25);case 16:if(value instanceof Dict){isSimpleGState=false;promise=promise.then(function(){return _this4.handleSMask(value,resources,operatorList,task,stateManager,localColorSpaceCache);});gStateObj.push([key,true]);}else{warn("Unsupported SMask type");}return _context6.abrupt("break",25);case 18:transferMaps=_this4.handleTransferFunction(value);gStateObj.push([key,transferMaps]);return _context6.abrupt("break",25);case 21:info("graphic state operator "+key);return _context6.abrupt("break",25);case 23:info("Unknown graphic state operator "+key);return _context6.abrupt("break",25);case 25:case"end":return _context6.stop();}},_loop);});_iterator7.s();case 9:if((_step7=_iterator7.n()).done){_context7.next=13;break;}return _context7.delegateYield(_loop(),"t0",11);case 11:_context7.next=9;break;case 13:_context7.next=18;break;case 15:_context7.prev=15;_context7.t1=_context7["catch"](6);_iterator7.e(_context7.t1);case 18:_context7.prev=18;_iterator7.f();return _context7.finish(18);case 21:return _context7.abrupt("return",promise.then(function(){if(gStateObj.length>0){operatorList.addOp(OPS.setGState,[gStateObj]);}if(isSimpleGState){localGStateCache.set(cacheKey,gStateRef,gStateObj);}}));case 22:case"end":return _context7.stop();}},_callee6,null,[[6,15,18,21]]);}));function setGState(_x12){return _setGState.apply(this,arguments);}return setGState;}()},{key:"loadFont",value:function loadFont(fontName,font,resources){var _this5=this,_fontID;var fallbackFontDict=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var cssFontInfo=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var errorFont=/*#__PURE__*/function(){var _ref5=evaluator_asyncToGenerator(/*#__PURE__*/evaluator_regeneratorRuntime().mark(function _callee7(){return evaluator_regeneratorRuntime().wrap(function _callee7$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:return _context8.abrupt("return",new TranslatedFont({loadedName:"g_font_error",font:new ErrorFont("Font \"".concat(fontName,"\" is not available.")),dict:font,evaluatorOptions:_this5.options}));case 1:case"end":return _context8.stop();}},_callee7);}));return function errorFont(){return _ref5.apply(this,arguments);};}();var fontRef;if(font){if(font instanceof Ref){fontRef=font;}}else{var fontRes=resources.get("Font");if(fontRes){fontRef=fontRes.getRaw(fontName);}}if(fontRef){if(this.parsingType3Font&&this.type3FontRefs.has(fontRef)){return errorFont();}if(this.fontCache.has(fontRef)){return this.fontCache.get(fontRef);}font=this.xref.fetchIfRef(fontRef);}if(!(font instanceof Dict)){if(!this.options.ignoreErrors&&!this.parsingType3Font){warn("Font \"".concat(fontName,"\" is not available."));return errorFont();}warn("Font \"".concat(fontName,"\" is not available -- attempting to fallback to a default font."));font=fallbackFontDict||PartialEvaluator.fallbackFontDict;}if(font.cacheKey&&this.fontCache.has(font.cacheKey)){return this.fontCache.get(font.cacheKey);}var fontCapability=new PromiseCapability();var preEvaluatedFont;try{preEvaluatedFont=this.preEvaluateFont(font);preEvaluatedFont.cssFontInfo=cssFontInfo;}catch(reason){warn("loadFont - preEvaluateFont failed: \"".concat(reason,"\"."));return errorFont();}var _preEvaluatedFont=preEvaluatedFont,descriptor=_preEvaluatedFont.descriptor,hash=_preEvaluatedFont.hash;var fontRefIsRef=fontRef instanceof Ref;var fontID;if(hash&&descriptor instanceof Dict){var fontAliases=descriptor.fontAliases||(descriptor.fontAliases=Object.create(null));if(fontAliases[hash]){var aliasFontRef=fontAliases[hash].aliasRef;if(fontRefIsRef&&aliasFontRef&&this.fontCache.has(aliasFontRef)){this.fontCache.putAlias(fontRef,aliasFontRef);return this.fontCache.get(fontRef);}}else{fontAliases[hash]={fontID:this.idFactory.createFontId()};}if(fontRefIsRef){fontAliases[hash].aliasRef=fontRef;}fontID=fontAliases[hash].fontID;}else{fontID=this.idFactory.createFontId();}assert((_fontID=fontID)===null||_fontID===void 0?void 0:_fontID.startsWith("f"),'The "fontID" must be (correctly) defined.');if(fontRefIsRef){this.fontCache.put(fontRef,fontCapability.promise);}else{font.cacheKey="cacheKey_".concat(fontID);this.fontCache.put(font.cacheKey,fontCapability.promise);}font.loadedName="".concat(this.idFactory.getDocId(),"_").concat(fontID);this.translateFont(preEvaluatedFont).then(function(translatedFont){fontCapability.resolve(new TranslatedFont({loadedName:font.loadedName,font:translatedFont,dict:font,evaluatorOptions:_this5.options}));}).catch(function(reason){warn("loadFont - translateFont failed: \"".concat(reason,"\"."));fontCapability.resolve(new TranslatedFont({loadedName:font.loadedName,font:new ErrorFont(reason instanceof Error?reason.message:reason),dict:font,evaluatorOptions:_this5.options}));});return fontCapability.promise;}},{key:"buildPath",value:function buildPath(operatorList,fn,args){var parsingText=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var lastIndex=operatorList.length-1;if(!args){args=[];}if(lastIndex<0||operatorList.fnArray[lastIndex]!==OPS.constructPath){if(parsingText){warn("Encountered path operator \"".concat(fn,"\" inside of a text object."));operatorList.addOp(OPS.save,null);}var minMax;switch(fn){case OPS.rectangle:var x=args[0]+args[2];var y=args[1]+args[3];minMax=[Math.min(args[0],x),Math.max(args[0],x),Math.min(args[1],y),Math.max(args[1],y)];break;case OPS.moveTo:case OPS.lineTo:minMax=[args[0],args[0],args[1],args[1]];break;default:minMax=[Infinity,-Infinity,Infinity,-Infinity];break;}operatorList.addOp(OPS.constructPath,[[fn],args,minMax]);if(parsingText){operatorList.addOp(OPS.restore,null);}}else{var _opArgs$;var opArgs=operatorList.argsArray[lastIndex];opArgs[0].push(fn);(_opArgs$=opArgs[1]).push.apply(_opArgs$,evaluator_toConsumableArray(args));var _minMax=opArgs[2];switch(fn){case OPS.rectangle:var _x13=args[0]+args[2];var _y=args[1]+args[3];_minMax[0]=Math.min(_minMax[0],args[0],_x13);_minMax[1]=Math.max(_minMax[1],args[0],_x13);_minMax[2]=Math.min(_minMax[2],args[1],_y);_minMax[3]=Math.max(_minMax[3],args[1],_y);break;case OPS.moveTo:case OPS.lineTo:_minMax[0]=Math.min(_minMax[0],args[0]);_minMax[1]=Math.max(_minMax[1],args[0]);_minMax[2]=Math.min(_minMax[2],args[1]);_minMax[3]=Math.max(_minMax[3],args[1]);break;}}}},{key:"parseColorSpace",value:function parseColorSpace(_ref6){var _this6=this;var cs=_ref6.cs,resources=_ref6.resources,localColorSpaceCache=_ref6.localColorSpaceCache;return ColorSpace.parseAsync({cs:cs,xref:this.xref,resources:resources,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:localColorSpaceCache}).catch(function(reason){if(reason instanceof AbortException){return null;}if(_this6.options.ignoreErrors){warn("parseColorSpace - ignoring ColorSpace: \"".concat(reason,"\"."));return null;}throw reason;});}},{key:"parseShading",value:function parseShading(_ref7){var shading=_ref7.shading,resources=_ref7.resources,localColorSpaceCache=_ref7.localColorSpaceCache,localShadingPatternCache=_ref7.localShadingPatternCache;var id=localShadingPatternCache.get(shading);if(!id){var shadingFill=Pattern.parseShading(shading,this.xref,resources,this._pdfFunctionFactory,localColorSpaceCache);var patternIR=shadingFill.getIR();id="pattern_".concat(this.idFactory.createObjId());if(this.parsingType3Font){id="".concat(this.idFactory.getDocId(),"_type3_").concat(id);}localShadingPatternCache.set(shading,id);if(this.parsingType3Font){this.handler.send("commonobj",[id,"Pattern",patternIR]);}else{this.handler.send("obj",[id,this.pageIndex,"Pattern",patternIR]);}}return id;}},{key:"handleColorN",value:function handleColorN(operatorList,fn,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache,localShadingPatternCache){var patternName=args.pop();if(patternName instanceof Name){var rawPattern=patterns.getRaw(patternName.name);var localTilingPattern=rawPattern instanceof Ref&&localTilingPatternCache.getByRef(rawPattern);if(localTilingPattern){try{var color=cs.base?cs.base.getRgb(args,0):null;var tilingPatternIR=getTilingPatternIR(localTilingPattern.operatorListIR,localTilingPattern.dict,color);operatorList.addOp(fn,tilingPatternIR);return undefined;}catch(_unused){}}var pattern=this.xref.fetchIfRef(rawPattern);if(pattern){var dict=pattern instanceof BaseStream?pattern.dict:pattern;var typeNum=dict.get("PatternType");if(typeNum===PatternType.TILING){var _color=cs.base?cs.base.getRgb(args,0):null;return this.handleTilingType(fn,_color,resources,pattern,dict,operatorList,task,localTilingPatternCache);}else if(typeNum===PatternType.SHADING){var shading=dict.get("Shading");var matrix=dict.getArray("Matrix");var objId=this.parseShading({shading:shading,resources:resources,localColorSpaceCache:localColorSpaceCache,localShadingPatternCache:localShadingPatternCache});operatorList.addOp(fn,["Shading",objId,matrix]);return undefined;}throw new FormatError("Unknown PatternType: ".concat(typeNum));}}throw new FormatError("Unknown PatternName: ".concat(patternName));}},{key:"_parseVisibilityExpression",value:function _parseVisibilityExpression(array,nestingCounter,currentResult){var MAX_NESTING=10;if(++nestingCounter>MAX_NESTING){warn("Visibility expression is too deeply nested");return;}var length=array.length;var operator=this.xref.fetchIfRef(array[0]);if(length<2||!(operator instanceof Name)){warn("Invalid visibility expression");return;}switch(operator.name){case"And":case"Or":case"Not":currentResult.push(operator.name);break;default:warn("Invalid operator ".concat(operator.name," in visibility expression"));return;}for(var i=1;i<length;i++){var raw=array[i];var object=this.xref.fetchIfRef(raw);if(Array.isArray(object)){var nestedResult=[];currentResult.push(nestedResult);this._parseVisibilityExpression(object,nestingCounter,nestedResult);}else if(raw instanceof Ref){currentResult.push(raw.toString());}}}},{key:"parseMarkedContentProps",value:function(){var _parseMarkedContentProps=evaluator_asyncToGenerator(/*#__PURE__*/evaluator_regeneratorRuntime().mark(function _callee8(contentProperties,resources){var _optionalContent$get;var optionalContent,properties,optionalContentType,expression,result,optionalContentGroups,groupIds,_iterator8,_step8,ocg;return evaluator_regeneratorRuntime().wrap(function _callee8$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:if(!(contentProperties instanceof Name)){_context9.next=5;break;}properties=resources.get("Properties");optionalContent=properties.get(contentProperties.name);_context9.next=10;break;case 5:if(!(contentProperties instanceof Dict)){_context9.next=9;break;}optionalContent=contentProperties;_context9.next=10;break;case 9:throw new FormatError("Optional content properties malformed.");case 10:optionalContentType=(_optionalContent$get=optionalContent.get("Type"))===null||_optionalContent$get===void 0?void 0:_optionalContent$get.name;if(!(optionalContentType==="OCG")){_context9.next=15;break;}return _context9.abrupt("return",{type:optionalContentType,id:optionalContent.objId});case 15:if(!(optionalContentType==="OCMD")){_context9.next=31;break;}expression=optionalContent.get("VE");if(!Array.isArray(expression)){_context9.next=22;break;}result=[];this._parseVisibilityExpression(expression,0,result);if(!(result.length>0)){_context9.next=22;break;}return _context9.abrupt("return",{type:"OCMD",expression:result});case 22:optionalContentGroups=optionalContent.get("OCGs");if(!(Array.isArray(optionalContentGroups)||optionalContentGroups instanceof Dict)){_context9.next=29;break;}groupIds=[];if(Array.isArray(optionalContentGroups)){_iterator8=evaluator_createForOfIteratorHelper(optionalContentGroups);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){ocg=_step8.value;groupIds.push(ocg.toString());}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}else{groupIds.push(optionalContentGroups.objId);}return _context9.abrupt("return",{type:optionalContentType,ids:groupIds,policy:optionalContent.get("P")instanceof Name?optionalContent.get("P").name:null,expression:null});case 29:if(!(optionalContentGroups instanceof Ref)){_context9.next=31;break;}return _context9.abrupt("return",{type:optionalContentType,id:optionalContentGroups.toString()});case 31:return _context9.abrupt("return",null);case 32:case"end":return _context9.stop();}},_callee8,this);}));function parseMarkedContentProps(_x14,_x15){return _parseMarkedContentProps.apply(this,arguments);}return parseMarkedContentProps;}()},{key:"getOperatorList",value:function getOperatorList(_ref8){var _this7=this;var stream=_ref8.stream,task=_ref8.task,resources=_ref8.resources,operatorList=_ref8.operatorList,_ref8$initialState=_ref8.initialState,initialState=_ref8$initialState===void 0?null:_ref8$initialState,_ref8$fallbackFontDic=_ref8.fallbackFontDict,fallbackFontDict=_ref8$fallbackFontDic===void 0?null:_ref8$fallbackFontDic;resources||(resources=Dict.empty);initialState||(initialState=new EvalState());if(!operatorList){throw new Error('getOperatorList: missing "operatorList" parameter');}var self=this;var xref=this.xref;var parsingText=false;var localImageCache=new LocalImageCache();var localColorSpaceCache=new LocalColorSpaceCache();var localGStateCache=new LocalGStateCache();var localTilingPatternCache=new LocalTilingPatternCache();var localShadingPatternCache=new Map();var xobjs=resources.get("XObject")||Dict.empty;var patterns=resources.get("Pattern")||Dict.empty;var stateManager=new StateManager(initialState);var preprocessor=new EvaluatorPreprocessor(stream,xref,stateManager);var timeSlotManager=new TimeSlotManager();function closePendingRestoreOPS(argument){for(var i=0,ii=preprocessor.savedStatesDepth;i<ii;i++){operatorList.addOp(OPS.restore,[]);}}return new Promise(function promiseBody(resolve,reject){var next=function next(promise){Promise.all([promise,operatorList.ready]).then(function(){try{promiseBody(resolve,reject);}catch(ex){reject(ex);}},reject);};task.ensureNotTerminated();timeSlotManager.reset();var operation={};var stop,i,ii,cs,name,isValidName;while(!(stop=timeSlotManager.check())){operation.args=null;if(!preprocessor.read(operation)){break;}var args=operation.args;var fn=operation.fn;switch(fn|0){case OPS.paintXObject:isValidName=args[0]instanceof Name;name=args[0].name;if(isValidName){var localImage=localImageCache.getByName(name);if(localImage){operatorList.addImageOps(localImage.fn,localImage.args,localImage.optionalContent);incrementCachedImageMaskCount(localImage);args=null;continue;}}next(new Promise(function(resolveXObject,rejectXObject){if(!isValidName){throw new FormatError("XObject must be referred to by name.");}var xobj=xobjs.getRaw(name);if(xobj instanceof Ref){var _localImage=localImageCache.getByRef(xobj)||self._regionalImageCache.getByRef(xobj);if(_localImage){operatorList.addImageOps(_localImage.fn,_localImage.args,_localImage.optionalContent);incrementCachedImageMaskCount(_localImage);resolveXObject();return;}var globalImage=self.globalImageCache.getData(xobj,self.pageIndex);if(globalImage){operatorList.addDependency(globalImage.objId);operatorList.addImageOps(globalImage.fn,globalImage.args,globalImage.optionalContent);resolveXObject();return;}xobj=xref.fetch(xobj);}if(!(xobj instanceof BaseStream)){throw new FormatError("XObject should be a stream");}var type=xobj.dict.get("Subtype");if(!(type instanceof Name)){throw new FormatError("XObject should have a Name subtype");}if(type.name==="Form"){stateManager.save();self.buildFormXObject(resources,xobj,null,operatorList,task,stateManager.state.clone(),localColorSpaceCache).then(function(){stateManager.restore();resolveXObject();},rejectXObject);return;}else if(type.name==="Image"){self.buildPaintImageXObject({resources:resources,image:xobj,operatorList:operatorList,cacheKey:name,localImageCache:localImageCache,localColorSpaceCache:localColorSpaceCache}).then(resolveXObject,rejectXObject);return;}else if(type.name==="PS"){info("Ignored XObject subtype PS");}else{throw new FormatError("Unhandled XObject subtype ".concat(type.name));}resolveXObject();}).catch(function(reason){if(reason instanceof AbortException){return;}if(self.options.ignoreErrors){warn("getOperatorList - ignoring XObject: \"".concat(reason,"\"."));return;}throw reason;}));return;case OPS.setFont:var fontSize=args[1];next(self.handleSetFont(resources,args,null,operatorList,task,stateManager.state,fallbackFontDict).then(function(loadedName){operatorList.addDependency(loadedName);operatorList.addOp(OPS.setFont,[loadedName,fontSize]);}));return;case OPS.beginText:parsingText=true;break;case OPS.endText:parsingText=false;break;case OPS.endInlineImage:var cacheKey=args[0].cacheKey;if(cacheKey){var _localImage2=localImageCache.getByName(cacheKey);if(_localImage2){operatorList.addImageOps(_localImage2.fn,_localImage2.args,_localImage2.optionalContent);incrementCachedImageMaskCount(_localImage2);args=null;continue;}}next(self.buildPaintImageXObject({resources:resources,image:args[0],isInline:true,operatorList:operatorList,cacheKey:cacheKey,localImageCache:localImageCache,localColorSpaceCache:localColorSpaceCache}));return;case OPS.showText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}args[0]=self.handleText(args[0],stateManager.state);break;case OPS.showSpacedText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}var combinedGlyphs=[];var state=stateManager.state;var _iterator9=evaluator_createForOfIteratorHelper(args[0]),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var arrItem=_step9.value;if(typeof arrItem==="string"){var _combinedGlyphs;(_combinedGlyphs=combinedGlyphs).push.apply(_combinedGlyphs,evaluator_toConsumableArray(self.handleText(arrItem,state)));}else if(typeof arrItem==="number"){combinedGlyphs.push(arrItem);}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}args[0]=combinedGlyphs;fn=OPS.showText;break;case OPS.nextLineShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}operatorList.addOp(OPS.nextLine);args[0]=self.handleText(args[0],stateManager.state);fn=OPS.showText;break;case OPS.nextLineSetSpacingShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}operatorList.addOp(OPS.nextLine);operatorList.addOp(OPS.setWordSpacing,[args.shift()]);operatorList.addOp(OPS.setCharSpacing,[args.shift()]);args[0]=self.handleText(args[0],stateManager.state);fn=OPS.showText;break;case OPS.setTextRenderingMode:stateManager.state.textRenderingMode=args[0];break;case OPS.setFillColorSpace:{var cachedColorSpace=ColorSpace.getCached(args[0],xref,localColorSpaceCache);if(cachedColorSpace){stateManager.state.fillColorSpace=cachedColorSpace;continue;}next(self.parseColorSpace({cs:args[0],resources:resources,localColorSpaceCache:localColorSpaceCache}).then(function(colorSpace){if(colorSpace){stateManager.state.fillColorSpace=colorSpace;}}));return;}case OPS.setStrokeColorSpace:{var _cachedColorSpace=ColorSpace.getCached(args[0],xref,localColorSpaceCache);if(_cachedColorSpace){stateManager.state.strokeColorSpace=_cachedColorSpace;continue;}next(self.parseColorSpace({cs:args[0],resources:resources,localColorSpaceCache:localColorSpaceCache}).then(function(colorSpace){if(colorSpace){stateManager.state.strokeColorSpace=colorSpace;}}));return;}case OPS.setFillColor:cs=stateManager.state.fillColorSpace;args=cs.getRgb(args,0);fn=OPS.setFillRGBColor;break;case OPS.setStrokeColor:cs=stateManager.state.strokeColorSpace;args=cs.getRgb(args,0);fn=OPS.setStrokeRGBColor;break;case OPS.setFillGray:stateManager.state.fillColorSpace=ColorSpace.singletons.gray;args=ColorSpace.singletons.gray.getRgb(args,0);fn=OPS.setFillRGBColor;break;case OPS.setStrokeGray:stateManager.state.strokeColorSpace=ColorSpace.singletons.gray;args=ColorSpace.singletons.gray.getRgb(args,0);fn=OPS.setStrokeRGBColor;break;case OPS.setFillCMYKColor:stateManager.state.fillColorSpace=ColorSpace.singletons.cmyk;args=ColorSpace.singletons.cmyk.getRgb(args,0);fn=OPS.setFillRGBColor;break;case OPS.setStrokeCMYKColor:stateManager.state.strokeColorSpace=ColorSpace.singletons.cmyk;args=ColorSpace.singletons.cmyk.getRgb(args,0);fn=OPS.setStrokeRGBColor;break;case OPS.setFillRGBColor:stateManager.state.fillColorSpace=ColorSpace.singletons.rgb;args=ColorSpace.singletons.rgb.getRgb(args,0);break;case OPS.setStrokeRGBColor:stateManager.state.strokeColorSpace=ColorSpace.singletons.rgb;args=ColorSpace.singletons.rgb.getRgb(args,0);break;case OPS.setFillColorN:cs=stateManager.state.fillColorSpace;if(cs.name==="Pattern"){next(self.handleColorN(operatorList,OPS.setFillColorN,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache,localShadingPatternCache));return;}args=cs.getRgb(args,0);fn=OPS.setFillRGBColor;break;case OPS.setStrokeColorN:cs=stateManager.state.strokeColorSpace;if(cs.name==="Pattern"){next(self.handleColorN(operatorList,OPS.setStrokeColorN,args,cs,patterns,resources,task,localColorSpaceCache,localTilingPatternCache,localShadingPatternCache));return;}args=cs.getRgb(args,0);fn=OPS.setStrokeRGBColor;break;case OPS.shadingFill:var shadingRes=resources.get("Shading");if(!shadingRes){throw new FormatError("No shading resource found");}var shading=shadingRes.get(args[0].name);if(!shading){throw new FormatError("No shading object found");}var patternId=self.parseShading({shading:shading,resources:resources,localColorSpaceCache:localColorSpaceCache,localShadingPatternCache:localShadingPatternCache});args=[patternId];fn=OPS.shadingFill;break;case OPS.setGState:isValidName=args[0]instanceof Name;name=args[0].name;if(isValidName){var localGStateObj=localGStateCache.getByName(name);if(localGStateObj){if(localGStateObj.length>0){operatorList.addOp(OPS.setGState,[localGStateObj]);}args=null;continue;}}next(new Promise(function(resolveGState,rejectGState){if(!isValidName){throw new FormatError("GState must be referred to by name.");}var extGState=resources.get("ExtGState");if(!(extGState instanceof Dict)){throw new FormatError("ExtGState should be a dictionary.");}var gState=extGState.get(name);if(!(gState instanceof Dict)){throw new FormatError("GState should be a dictionary.");}self.setGState({resources:resources,gState:gState,operatorList:operatorList,cacheKey:name,task:task,stateManager:stateManager,localGStateCache:localGStateCache,localColorSpaceCache:localColorSpaceCache}).then(resolveGState,rejectGState);}).catch(function(reason){if(reason instanceof AbortException){return;}if(self.options.ignoreErrors){warn("getOperatorList - ignoring ExtGState: \"".concat(reason,"\"."));return;}throw reason;}));return;case OPS.moveTo:case OPS.lineTo:case OPS.curveTo:case OPS.curveTo2:case OPS.curveTo3:case OPS.closePath:case OPS.rectangle:self.buildPath(operatorList,fn,args,parsingText);continue;case OPS.markPoint:case OPS.markPointProps:case OPS.beginCompat:case OPS.endCompat:continue;case OPS.beginMarkedContentProps:if(!(args[0]instanceof Name)){warn("Expected name for beginMarkedContentProps arg0=".concat(args[0]));continue;}if(args[0].name==="OC"){next(self.parseMarkedContentProps(args[1],resources).then(function(data){operatorList.addOp(OPS.beginMarkedContentProps,["OC",data]);}).catch(function(reason){if(reason instanceof AbortException){return;}if(self.options.ignoreErrors){warn("getOperatorList - ignoring beginMarkedContentProps: \"".concat(reason,"\"."));return;}throw reason;}));return;}args=[args[0].name,args[1]instanceof Dict?args[1].get("MCID"):null];break;case OPS.beginMarkedContent:case OPS.endMarkedContent:default:if(args!==null){for(i=0,ii=args.length;i<ii;i++){if(args[i]instanceof Dict){break;}}if(i<ii){warn("getOperatorList - ignoring operator: "+fn);continue;}}}operatorList.addOp(fn,args);}if(stop){next(deferred);return;}closePendingRestoreOPS();resolve();}).catch(function(reason){if(reason instanceof AbortException){return;}if(_this7.options.ignoreErrors){warn("getOperatorList - ignoring errors during \"".concat(task.name,"\" ")+"task: \"".concat(reason,"\"."));closePendingRestoreOPS();return;}throw reason;});}},{key:"getTextContent",value:function getTextContent(_ref9){var _this8=this;var stream=_ref9.stream,task=_ref9.task,resources=_ref9.resources,_ref9$stateManager=_ref9.stateManager,stateManager=_ref9$stateManager===void 0?null:_ref9$stateManager,_ref9$includeMarkedCo=_ref9.includeMarkedContent,includeMarkedContent=_ref9$includeMarkedCo===void 0?false:_ref9$includeMarkedCo,sink=_ref9.sink,_ref9$seenStyles=_ref9.seenStyles,seenStyles=_ref9$seenStyles===void 0?new Set():_ref9$seenStyles,viewBox=_ref9.viewBox,_ref9$markedContentDa=_ref9.markedContentData,markedContentData=_ref9$markedContentDa===void 0?null:_ref9$markedContentDa,_ref9$disableNormaliz=_ref9.disableNormalization,disableNormalization=_ref9$disableNormaliz===void 0?false:_ref9$disableNormaliz;resources||(resources=Dict.empty);stateManager||(stateManager=new StateManager(new TextState()));if(includeMarkedContent){markedContentData||(markedContentData={level:0});}var textContent={items:[],styles:Object.create(null)};var textContentItem={initialized:false,str:[],totalWidth:0,totalHeight:0,width:0,height:0,vertical:false,prevTransform:null,textAdvanceScale:0,spaceInFlowMin:0,spaceInFlowMax:0,trackingSpaceMin:Infinity,negativeSpaceMax:-Infinity,notASpace:-Infinity,transform:null,fontName:null,hasEOL:false};var twoLastChars=[" "," "];var twoLastCharsPos=0;function saveLastChar(char){var nextPos=(twoLastCharsPos+1)%2;var ret=twoLastChars[twoLastCharsPos]!==" "&&twoLastChars[nextPos]===" ";twoLastChars[twoLastCharsPos]=char;twoLastCharsPos=nextPos;return ret;}function shouldAddWhitepsace(){return twoLastChars[twoLastCharsPos]!==" "&&twoLastChars[(twoLastCharsPos+1)%2]===" ";}function resetLastChars(){twoLastChars[0]=twoLastChars[1]=" ";twoLastCharsPos=0;}var TRACKING_SPACE_FACTOR=0.102;var NOT_A_SPACE_FACTOR=0.03;var NEGATIVE_SPACE_FACTOR=-0.2;var SPACE_IN_FLOW_MIN_FACTOR=0.102;var SPACE_IN_FLOW_MAX_FACTOR=0.6;var VERTICAL_SHIFT_RATIO=0.25;var self=this;var xref=this.xref;var showSpacedTextBuffer=[];var xobjs=null;var emptyXObjectCache=new LocalImageCache();var emptyGStateCache=new LocalGStateCache();var preprocessor=new EvaluatorPreprocessor(stream,xref,stateManager);var textState;function pushWhitespace(_ref10){var _ref10$width=_ref10.width,width=_ref10$width===void 0?0:_ref10$width,_ref10$height=_ref10.height,height=_ref10$height===void 0?0:_ref10$height,_ref10$transform=_ref10.transform,transform=_ref10$transform===void 0?textContentItem.prevTransform:_ref10$transform,_ref10$fontName=_ref10.fontName,fontName=_ref10$fontName===void 0?textContentItem.fontName:_ref10$fontName;textContent.items.push({str:" ",dir:"ltr",width:width,height:height,transform:transform,fontName:fontName,hasEOL:false});}function getCurrentTextTransform(){var font=textState.font;var tsm=[textState.fontSize*textState.textHScale,0,0,textState.fontSize,0,textState.textRise];if(font.isType3Font&&(textState.fontSize<=1||font.isCharBBox)&&!isArrayEqual(textState.fontMatrix,FONT_IDENTITY_MATRIX)){var glyphHeight=font.bbox[3]-font.bbox[1];if(glyphHeight>0){tsm[3]*=glyphHeight*textState.fontMatrix[3];}}return Util.transform(textState.ctm,Util.transform(textState.textMatrix,tsm));}function ensureTextContentItem(){if(textContentItem.initialized){return textContentItem;}var _textState=textState,font=_textState.font,loadedName=_textState.loadedName;if(!seenStyles.has(loadedName)){seenStyles.add(loadedName);textContent.styles[loadedName]={fontFamily:font.fallbackName,ascent:font.ascent,descent:font.descent,vertical:font.vertical};if(self.options.fontExtraProperties&&font.systemFontInfo){var style=textContent.styles[loadedName];style.fontSubstitution=font.systemFontInfo.css;style.fontSubstitutionLoadedName=font.systemFontInfo.loadedName;}}textContentItem.fontName=loadedName;var trm=textContentItem.transform=getCurrentTextTransform();if(!font.vertical){textContentItem.width=textContentItem.totalWidth=0;textContentItem.height=textContentItem.totalHeight=Math.hypot(trm[2],trm[3]);textContentItem.vertical=false;}else{textContentItem.width=textContentItem.totalWidth=Math.hypot(trm[0],trm[1]);textContentItem.height=textContentItem.totalHeight=0;textContentItem.vertical=true;}var scaleLineX=Math.hypot(textState.textLineMatrix[0],textState.textLineMatrix[1]);var scaleCtmX=Math.hypot(textState.ctm[0],textState.ctm[1]);textContentItem.textAdvanceScale=scaleCtmX*scaleLineX;var _textState2=textState,fontSize=_textState2.fontSize;textContentItem.trackingSpaceMin=fontSize*TRACKING_SPACE_FACTOR;textContentItem.notASpace=fontSize*NOT_A_SPACE_FACTOR;textContentItem.negativeSpaceMax=fontSize*NEGATIVE_SPACE_FACTOR;textContentItem.spaceInFlowMin=fontSize*SPACE_IN_FLOW_MIN_FACTOR;textContentItem.spaceInFlowMax=fontSize*SPACE_IN_FLOW_MAX_FACTOR;textContentItem.hasEOL=false;textContentItem.initialized=true;return textContentItem;}function updateAdvanceScale(){if(!textContentItem.initialized){return;}var scaleLineX=Math.hypot(textState.textLineMatrix[0],textState.textLineMatrix[1]);var scaleCtmX=Math.hypot(textState.ctm[0],textState.ctm[1]);var scaleFactor=scaleCtmX*scaleLineX;if(scaleFactor===textContentItem.textAdvanceScale){return;}if(!textContentItem.vertical){textContentItem.totalWidth+=textContentItem.width*textContentItem.textAdvanceScale;textContentItem.width=0;}else{textContentItem.totalHeight+=textContentItem.height*textContentItem.textAdvanceScale;textContentItem.height=0;}textContentItem.textAdvanceScale=scaleFactor;}function runBidiTransform(textChunk){var text=textChunk.str.join("");if(!disableNormalization){text=normalizeUnicode(text);}var bidiResult=bidi(text,-1,textChunk.vertical);return{str:bidiResult.str,dir:bidiResult.dir,width:Math.abs(textChunk.totalWidth),height:Math.abs(textChunk.totalHeight),transform:textChunk.transform,fontName:textChunk.fontName,hasEOL:textChunk.hasEOL};}function handleSetFont(fontName,fontRef){return self.loadFont(fontName,fontRef,resources).then(function(translated){if(!translated.font.isType3Font){return translated;}return translated.loadType3Data(self,resources,task).catch(function(){}).then(function(){return translated;});}).then(function(translated){textState.loadedName=translated.loadedName;textState.font=translated.font;textState.fontMatrix=translated.font.fontMatrix||FONT_IDENTITY_MATRIX;});}function applyInverseRotation(x,y,matrix){var scale=Math.hypot(matrix[0],matrix[1]);return[(matrix[0]*x+matrix[1]*y)/scale,(matrix[2]*x+matrix[3]*y)/scale];}function compareWithLastPosition(glyphWidth){var _textState$font;var currentTransform=getCurrentTextTransform();var posX=currentTransform[4];var posY=currentTransform[5];if((_textState$font=textState.font)!==null&&_textState$font!==void 0&&_textState$font.vertical){if(posX<viewBox[0]||posX>viewBox[2]||posY+glyphWidth<viewBox[1]||posY>viewBox[3]){return false;}}else if(posX+glyphWidth<viewBox[0]||posX>viewBox[2]||posY<viewBox[1]||posY>viewBox[3]){return false;}if(!textState.font||!textContentItem.prevTransform){return true;}var lastPosX=textContentItem.prevTransform[4];var lastPosY=textContentItem.prevTransform[5];if(lastPosX===posX&&lastPosY===posY){return true;}var rotate=-1;if(currentTransform[0]&&currentTransform[1]===0&&currentTransform[2]===0){rotate=currentTransform[0]>0?0:180;}else if(currentTransform[1]&&currentTransform[0]===0&&currentTransform[3]===0){rotate=currentTransform[1]>0?90:270;}switch(rotate){case 0:break;case 90:var _ref11=[posY,posX];posX=_ref11[0];posY=_ref11[1];var _ref12=[lastPosY,lastPosX];lastPosX=_ref12[0];lastPosY=_ref12[1];break;case 180:var _ref13=[-posX,-posY,-lastPosX,-lastPosY];posX=_ref13[0];posY=_ref13[1];lastPosX=_ref13[2];lastPosY=_ref13[3];break;case 270:var _ref14=[-posY,-posX];posX=_ref14[0];posY=_ref14[1];var _ref15=[-lastPosY,-lastPosX];lastPosX=_ref15[0];lastPosY=_ref15[1];break;default:var _applyInverseRotation=applyInverseRotation(posX,posY,currentTransform);var _applyInverseRotation2=evaluator_slicedToArray(_applyInverseRotation,2);posX=_applyInverseRotation2[0];posY=_applyInverseRotation2[1];var _applyInverseRotation3=applyInverseRotation(lastPosX,lastPosY,textContentItem.prevTransform);var _applyInverseRotation4=evaluator_slicedToArray(_applyInverseRotation3,2);lastPosX=_applyInverseRotation4[0];lastPosY=_applyInverseRotation4[1];}if(textState.font.vertical){var _advanceY=(lastPosY-posY)/textContentItem.textAdvanceScale;var _advanceX=posX-lastPosX;var _textOrientation=Math.sign(textContentItem.height);if(_advanceY<_textOrientation*textContentItem.negativeSpaceMax){if(Math.abs(_advanceX)>0.5*textContentItem.width){appendEOL();return true;}resetLastChars();flushTextContentItem();return true;}if(Math.abs(_advanceX)>textContentItem.width){appendEOL();return true;}if(_advanceY<=_textOrientation*textContentItem.notASpace){resetLastChars();}if(_advanceY<=_textOrientation*textContentItem.trackingSpaceMin){if(shouldAddWhitepsace()){resetLastChars();flushTextContentItem();pushWhitespace({height:Math.abs(_advanceY)});}else{textContentItem.height+=_advanceY;}}else if(!addFakeSpaces(_advanceY,textContentItem.prevTransform,_textOrientation)){if(textContentItem.str.length===0){resetLastChars();pushWhitespace({height:Math.abs(_advanceY)});}else{textContentItem.height+=_advanceY;}}if(Math.abs(_advanceX)>textContentItem.width*VERTICAL_SHIFT_RATIO){flushTextContentItem();}return true;}var advanceX=(posX-lastPosX)/textContentItem.textAdvanceScale;var advanceY=posY-lastPosY;var textOrientation=Math.sign(textContentItem.width);if(advanceX<textOrientation*textContentItem.negativeSpaceMax){if(Math.abs(advanceY)>0.5*textContentItem.height){appendEOL();return true;}resetLastChars();flushTextContentItem();return true;}if(Math.abs(advanceY)>textContentItem.height){appendEOL();return true;}if(advanceX<=textOrientation*textContentItem.notASpace){resetLastChars();}if(advanceX<=textOrientation*textContentItem.trackingSpaceMin){if(shouldAddWhitepsace()){resetLastChars();flushTextContentItem();pushWhitespace({width:Math.abs(advanceX)});}else{textContentItem.width+=advanceX;}}else if(!addFakeSpaces(advanceX,textContentItem.prevTransform,textOrientation)){if(textContentItem.str.length===0){resetLastChars();pushWhitespace({width:Math.abs(advanceX)});}else{textContentItem.width+=advanceX;}}if(Math.abs(advanceY)>textContentItem.height*VERTICAL_SHIFT_RATIO){flushTextContentItem();}return true;}function buildTextContentItem(_ref16){var chars=_ref16.chars,extraSpacing=_ref16.extraSpacing;var font=textState.font;if(!chars){var charSpacing=textState.charSpacing+extraSpacing;if(charSpacing){if(!font.vertical){textState.translateTextMatrix(charSpacing*textState.textHScale,0);}else{textState.translateTextMatrix(0,-charSpacing);}}return;}var glyphs=font.charsToGlyphs(chars);var scale=textState.fontMatrix[0]*textState.fontSize;for(var i=0,ii=glyphs.length;i<ii;i++){var glyph=glyphs[i];var category=glyph.category;if(category.isInvisibleFormatMark){continue;}var _charSpacing=textState.charSpacing+(i+1===ii?extraSpacing:0);var glyphWidth=glyph.width;if(font.vertical){glyphWidth=glyph.vmetric?glyph.vmetric[0]:-glyphWidth;}var scaledDim=glyphWidth*scale;if(category.isWhitespace){if(!font.vertical){_charSpacing+=scaledDim+textState.wordSpacing;textState.translateTextMatrix(_charSpacing*textState.textHScale,0);}else{_charSpacing+=-scaledDim+textState.wordSpacing;textState.translateTextMatrix(0,-_charSpacing);}saveLastChar(" ");continue;}if(!category.isZeroWidthDiacritic&&!compareWithLastPosition(scaledDim)){if(!font.vertical){textState.translateTextMatrix(scaledDim*textState.textHScale,0);}else{textState.translateTextMatrix(0,scaledDim);}continue;}var textChunk=ensureTextContentItem();if(category.isZeroWidthDiacritic){scaledDim=0;}if(!font.vertical){scaledDim*=textState.textHScale;textState.translateTextMatrix(scaledDim,0);textChunk.width+=scaledDim;}else{textState.translateTextMatrix(0,scaledDim);scaledDim=Math.abs(scaledDim);textChunk.height+=scaledDim;}if(scaledDim){textChunk.prevTransform=getCurrentTextTransform();}var glyphUnicode=glyph.unicode;if(saveLastChar(glyphUnicode)){textChunk.str.push(" ");}textChunk.str.push(glyphUnicode);if(_charSpacing){if(!font.vertical){textState.translateTextMatrix(_charSpacing*textState.textHScale,0);}else{textState.translateTextMatrix(0,-_charSpacing);}}}}function appendEOL(){resetLastChars();if(textContentItem.initialized){textContentItem.hasEOL=true;flushTextContentItem();}else{textContent.items.push({str:"",dir:"ltr",width:0,height:0,transform:getCurrentTextTransform(),fontName:textState.loadedName,hasEOL:true});}}function addFakeSpaces(width,transf,textOrientation){if(textOrientation*textContentItem.spaceInFlowMin<=width&&width<=textOrientation*textContentItem.spaceInFlowMax){if(textContentItem.initialized){resetLastChars();textContentItem.str.push(" ");}return false;}var fontName=textContentItem.fontName;var height=0;if(textContentItem.vertical){height=width;width=0;}flushTextContentItem();resetLastChars();pushWhitespace({width:Math.abs(width),height:Math.abs(height),transform:transf||getCurrentTextTransform(),fontName:fontName});return true;}function flushTextContentItem(){if(!textContentItem.initialized||!textContentItem.str){return;}if(!textContentItem.vertical){textContentItem.totalWidth+=textContentItem.width*textContentItem.textAdvanceScale;}else{textContentItem.totalHeight+=textContentItem.height*textContentItem.textAdvanceScale;}textContent.items.push(runBidiTransform(textContentItem));textContentItem.initialized=false;textContentItem.str.length=0;}function enqueueChunk(){var batch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var length=textContent.items.length;if(length===0){return;}if(batch&&length<TEXT_CHUNK_BATCH_SIZE){return;}sink.enqueue(textContent,length);textContent.items=[];textContent.styles=Object.create(null);}var timeSlotManager=new TimeSlotManager();return new Promise(function promiseBody(resolve,reject){var next=function next(promise){enqueueChunk(true);Promise.all([promise,sink.ready]).then(function(){try{promiseBody(resolve,reject);}catch(ex){reject(ex);}},reject);};task.ensureNotTerminated();timeSlotManager.reset();var operation={};var stop,args=[];while(!(stop=timeSlotManager.check())){args.length=0;operation.args=args;if(!preprocessor.read(operation)){break;}var previousState=textState;textState=stateManager.state;var fn=operation.fn;args=operation.args;switch(fn|0){case OPS.setFont:var fontNameArg=args[0].name,fontSizeArg=args[1];if(textState.font&&fontNameArg===textState.fontName&&fontSizeArg===textState.fontSize){break;}flushTextContentItem();textState.fontName=fontNameArg;textState.fontSize=fontSizeArg;next(handleSetFont(fontNameArg,null));return;case OPS.setTextRise:textState.textRise=args[0];break;case OPS.setHScale:textState.textHScale=args[0]/100;break;case OPS.setLeading:textState.leading=args[0];break;case OPS.moveText:textState.translateTextLineMatrix(args[0],args[1]);textState.textMatrix=textState.textLineMatrix.slice();break;case OPS.setLeadingMoveText:textState.leading=-args[1];textState.translateTextLineMatrix(args[0],args[1]);textState.textMatrix=textState.textLineMatrix.slice();break;case OPS.nextLine:textState.carriageReturn();break;case OPS.setTextMatrix:textState.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);textState.setTextLineMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);updateAdvanceScale();break;case OPS.setCharSpacing:textState.charSpacing=args[0];break;case OPS.setWordSpacing:textState.wordSpacing=args[0];break;case OPS.beginText:textState.textMatrix=IDENTITY_MATRIX.slice();textState.textLineMatrix=IDENTITY_MATRIX.slice();break;case OPS.showSpacedText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}var spaceFactor=(textState.font.vertical?1:-1)*textState.fontSize/1000;var elements=args[0];for(var i=0,ii=elements.length;i<ii;i++){var item=elements[i];if(typeof item==="string"){showSpacedTextBuffer.push(item);}else if(typeof item==="number"&&item!==0){var str=showSpacedTextBuffer.join("");showSpacedTextBuffer.length=0;buildTextContentItem({chars:str,extraSpacing:item*spaceFactor});}}if(showSpacedTextBuffer.length>0){var _str=showSpacedTextBuffer.join("");showSpacedTextBuffer.length=0;buildTextContentItem({chars:_str,extraSpacing:0});}break;case OPS.showText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}buildTextContentItem({chars:args[0],extraSpacing:0});break;case OPS.nextLineShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}textState.carriageReturn();buildTextContentItem({chars:args[0],extraSpacing:0});break;case OPS.nextLineSetSpacingShowText:if(!stateManager.state.font){self.ensureStateFont(stateManager.state);continue;}textState.wordSpacing=args[0];textState.charSpacing=args[1];textState.carriageReturn();buildTextContentItem({chars:args[2],extraSpacing:0});break;case OPS.paintXObject:flushTextContentItem();if(!xobjs){xobjs=resources.get("XObject")||Dict.empty;}var isValidName=args[0]instanceof Name;var name=args[0].name;if(isValidName&&emptyXObjectCache.getByName(name)){break;}next(new Promise(function(resolveXObject,rejectXObject){if(!isValidName){throw new FormatError("XObject must be referred to by name.");}var xobj=xobjs.getRaw(name);if(xobj instanceof Ref){if(emptyXObjectCache.getByRef(xobj)){resolveXObject();return;}var globalImage=self.globalImageCache.getData(xobj,self.pageIndex);if(globalImage){resolveXObject();return;}xobj=xref.fetch(xobj);}if(!(xobj instanceof BaseStream)){throw new FormatError("XObject should be a stream");}var type=xobj.dict.get("Subtype");if(!(type instanceof Name)){throw new FormatError("XObject should have a Name subtype");}if(type.name!=="Form"){emptyXObjectCache.set(name,xobj.dict.objId,true);resolveXObject();return;}var currentState=stateManager.state.clone();var xObjStateManager=new StateManager(currentState);var matrix=xobj.dict.getArray("Matrix");if(Array.isArray(matrix)&&matrix.length===6){xObjStateManager.transform(matrix);}enqueueChunk();var sinkWrapper={enqueueInvoked:false,enqueue:function enqueue(chunk,size){this.enqueueInvoked=true;sink.enqueue(chunk,size);},get desiredSize(){return sink.desiredSize;},get ready(){return sink.ready;}};self.getTextContent({stream:xobj,task:task,resources:xobj.dict.get("Resources")||resources,stateManager:xObjStateManager,includeMarkedContent:includeMarkedContent,sink:sinkWrapper,seenStyles:seenStyles,viewBox:viewBox,markedContentData:markedContentData,disableNormalization:disableNormalization}).then(function(){if(!sinkWrapper.enqueueInvoked){emptyXObjectCache.set(name,xobj.dict.objId,true);}resolveXObject();},rejectXObject);}).catch(function(reason){if(reason instanceof AbortException){return;}if(self.options.ignoreErrors){warn("getTextContent - ignoring XObject: \"".concat(reason,"\"."));return;}throw reason;}));return;case OPS.setGState:isValidName=args[0]instanceof Name;name=args[0].name;if(isValidName&&emptyGStateCache.getByName(name)){break;}next(new Promise(function(resolveGState,rejectGState){if(!isValidName){throw new FormatError("GState must be referred to by name.");}var extGState=resources.get("ExtGState");if(!(extGState instanceof Dict)){throw new FormatError("ExtGState should be a dictionary.");}var gState=extGState.get(name);if(!(gState instanceof Dict)){throw new FormatError("GState should be a dictionary.");}var gStateFont=gState.get("Font");if(!gStateFont){emptyGStateCache.set(name,gState.objId,true);resolveGState();return;}flushTextContentItem();textState.fontName=null;textState.fontSize=gStateFont[1];handleSetFont(null,gStateFont[0]).then(resolveGState,rejectGState);}).catch(function(reason){if(reason instanceof AbortException){return;}if(self.options.ignoreErrors){warn("getTextContent - ignoring ExtGState: \"".concat(reason,"\"."));return;}throw reason;}));return;case OPS.beginMarkedContent:flushTextContentItem();if(includeMarkedContent){markedContentData.level++;textContent.items.push({type:"beginMarkedContent",tag:args[0]instanceof Name?args[0].name:null});}break;case OPS.beginMarkedContentProps:flushTextContentItem();if(includeMarkedContent){markedContentData.level++;var mcid=null;if(args[1]instanceof Dict){mcid=args[1].get("MCID");}textContent.items.push({type:"beginMarkedContentProps",id:Number.isInteger(mcid)?"".concat(self.idFactory.getPageObjId(),"_mc").concat(mcid):null,tag:args[0]instanceof Name?args[0].name:null});}break;case OPS.endMarkedContent:flushTextContentItem();if(includeMarkedContent){if(markedContentData.level===0){break;}markedContentData.level--;textContent.items.push({type:"endMarkedContent"});}break;case OPS.restore:if(previousState&&(previousState.font!==textState.font||previousState.fontSize!==textState.fontSize||previousState.fontName!==textState.fontName)){flushTextContentItem();}break;}if(textContent.items.length>=sink.desiredSize){stop=true;break;}}if(stop){next(deferred);return;}flushTextContentItem();enqueueChunk();resolve();}).catch(function(reason){if(reason instanceof AbortException){return;}if(_this8.options.ignoreErrors){warn("getTextContent - ignoring errors during \"".concat(task.name,"\" ")+"task: \"".concat(reason,"\"."));flushTextContentItem();enqueueChunk();return;}throw reason;});}},{key:"extractDataStructures",value:function extractDataStructures(dict,baseDict,properties){var _this9=this;var xref=this.xref;var cidToGidBytes;var toUnicodePromise=this.readToUnicode(properties.toUnicode||dict.get("ToUnicode")||baseDict.get("ToUnicode"));if(properties.composite){var cidSystemInfo=dict.get("CIDSystemInfo");if(cidSystemInfo instanceof Dict){properties.cidSystemInfo={registry:stringToPDFString(cidSystemInfo.get("Registry")),ordering:stringToPDFString(cidSystemInfo.get("Ordering")),supplement:cidSystemInfo.get("Supplement")};}try{var cidToGidMap=dict.get("CIDToGIDMap");if(cidToGidMap instanceof BaseStream){cidToGidBytes=cidToGidMap.getBytes();}}catch(ex){if(!this.options.ignoreErrors){throw ex;}warn("extractDataStructures - ignoring CIDToGIDMap data: \"".concat(ex,"\"."));}}var differences=[];var baseEncodingName=null;var encoding;if(dict.has("Encoding")){encoding=dict.get("Encoding");if(encoding instanceof Dict){baseEncodingName=encoding.get("BaseEncoding");baseEncodingName=baseEncodingName instanceof Name?baseEncodingName.name:null;if(encoding.has("Differences")){var diffEncoding=encoding.get("Differences");var index=0;var _iterator10=evaluator_createForOfIteratorHelper(diffEncoding),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var entry=_step10.value;var data=xref.fetchIfRef(entry);if(typeof data==="number"){index=data;}else if(data instanceof Name){differences[index++]=data.name;}else{throw new FormatError("Invalid entry in 'Differences' array: ".concat(data));}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}}}else if(encoding instanceof Name){baseEncodingName=encoding.name;}else{var msg="Encoding is not a Name nor a Dict";if(!this.options.ignoreErrors){throw new FormatError(msg);}warn(msg);}if(baseEncodingName!=="MacRomanEncoding"&&baseEncodingName!=="MacExpertEncoding"&&baseEncodingName!=="WinAnsiEncoding"){baseEncodingName=null;}}var nonEmbeddedFont=!properties.file||properties.isInternalFont,isSymbolsFontName=getSymbolsFonts()[properties.name];if(baseEncodingName&&nonEmbeddedFont&&isSymbolsFontName){baseEncodingName=null;}if(baseEncodingName){properties.defaultEncoding=getEncoding(baseEncodingName);}else{var isSymbolicFont=!!(properties.flags&FontFlags.Symbolic);var isNonsymbolicFont=!!(properties.flags&FontFlags.Nonsymbolic);encoding=StandardEncoding;if(properties.type==="TrueType"&&!isNonsymbolicFont){encoding=WinAnsiEncoding;}if(isSymbolicFont||isSymbolsFontName){encoding=MacRomanEncoding;if(nonEmbeddedFont){if(/Symbol/i.test(properties.name)){encoding=SymbolSetEncoding;}else if(/Dingbats/i.test(properties.name)){encoding=ZapfDingbatsEncoding;}else if(/Wingdings/i.test(properties.name)){encoding=WinAnsiEncoding;}}}properties.defaultEncoding=encoding;}properties.differences=differences;properties.baseEncodingName=baseEncodingName;properties.hasEncoding=!!baseEncodingName||differences.length>0;properties.dict=dict;return toUnicodePromise.then(function(readToUnicode){properties.toUnicode=readToUnicode;return _this9.buildToUnicode(properties);}).then(function(builtToUnicode){properties.toUnicode=builtToUnicode;if(cidToGidBytes){properties.cidToGidMap=_this9.readCidToGidMap(cidToGidBytes,builtToUnicode);}return properties;});}},{key:"_simpleFontToUnicode",value:function _simpleFontToUnicode(properties){var forceGlyphs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;assert(!properties.composite,"Must be a simple font.");var toUnicode=[];var encoding=properties.defaultEncoding.slice();var baseEncodingName=properties.baseEncodingName;var differences=properties.differences;for(var charcode in differences){var glyphName=differences[charcode];if(glyphName===".notdef"){continue;}encoding[charcode]=glyphName;}var glyphsUnicodeMap=getGlyphsUnicode();for(var _charcode in encoding){var _glyphName=encoding[_charcode];if(_glyphName===""){continue;}var unicode=glyphsUnicodeMap[_glyphName];if(unicode!==undefined){toUnicode[_charcode]=String.fromCharCode(unicode);continue;}var code=0;switch(_glyphName[0]){case"G":if(_glyphName.length===3){code=parseInt(_glyphName.substring(1),16);}break;case"g":if(_glyphName.length===5){code=parseInt(_glyphName.substring(1),16);}break;case"C":case"c":if(_glyphName.length>=3&&_glyphName.length<=4){var codeStr=_glyphName.substring(1);if(forceGlyphs){code=parseInt(codeStr,16);break;}code=+codeStr;if(Number.isNaN(code)&&Number.isInteger(parseInt(codeStr,16))){return this._simpleFontToUnicode(properties,true);}}break;case"u":unicode=getUnicodeForGlyph(_glyphName,glyphsUnicodeMap);if(unicode!==-1){code=unicode;}break;default:switch(_glyphName){case"f_h":case"f_t":case"T_h":toUnicode[_charcode]=_glyphName.replaceAll("_","");continue;}break;}if(code>0&&code<=0x10ffff&&Number.isInteger(code)){if(baseEncodingName&&code===+_charcode){var baseEncoding=getEncoding(baseEncodingName);if(baseEncoding&&(_glyphName=baseEncoding[_charcode])){toUnicode[_charcode]=String.fromCharCode(glyphsUnicodeMap[_glyphName]);continue;}}toUnicode[_charcode]=String.fromCodePoint(code);}}return toUnicode;}},{key:"buildToUnicode",value:function(){var _buildToUnicode=evaluator_asyncToGenerator(/*#__PURE__*/evaluator_regeneratorRuntime().mark(function _callee9(properties){var _properties$toUnicode;var _properties$cidSystem,registry,ordering,ucs2CMapName,ucs2CMap,toUnicode,buf;return evaluator_regeneratorRuntime().wrap(function _callee9$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:properties.hasIncludedToUnicodeMap=((_properties$toUnicode=properties.toUnicode)===null||_properties$toUnicode===void 0?void 0:_properties$toUnicode.length)>0;if(!properties.hasIncludedToUnicodeMap){_context10.next=4;break;}if(!properties.composite&&properties.hasEncoding){properties.fallbackToUnicode=this._simpleFontToUnicode(properties);}return _context10.abrupt("return",properties.toUnicode);case 4:if(properties.composite){_context10.next=6;break;}return _context10.abrupt("return",new ToUnicodeMap(this._simpleFontToUnicode(properties)));case 6:if(!(properties.composite&&(properties.cMap.builtInCMap&&!(properties.cMap instanceof IdentityCMap)||properties.cidSystemInfo.registry==="Adobe"&&(properties.cidSystemInfo.ordering==="GB1"||properties.cidSystemInfo.ordering==="CNS1"||properties.cidSystemInfo.ordering==="Japan1"||properties.cidSystemInfo.ordering==="Korea1")))){_context10.next=15;break;}_properties$cidSystem=properties.cidSystemInfo,registry=_properties$cidSystem.registry,ordering=_properties$cidSystem.ordering;ucs2CMapName=Name.get("".concat(registry,"-").concat(ordering,"-UCS2"));_context10.next=11;return CMapFactory.create({encoding:ucs2CMapName,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});case 11:ucs2CMap=_context10.sent;toUnicode=[],buf=[];properties.cMap.forEach(function(charcode,cid){if(cid>0xffff){throw new FormatError("Max size of CID is 65,535");}var ucs2=ucs2CMap.lookup(cid);if(ucs2){buf.length=0;for(var i=0,ii=ucs2.length;i<ii;i+=2){buf.push((ucs2.charCodeAt(i)<<8)+ucs2.charCodeAt(i+1));}toUnicode[charcode]=String.fromCharCode.apply(String,buf);}});return _context10.abrupt("return",new ToUnicodeMap(toUnicode));case 15:return _context10.abrupt("return",new IdentityToUnicodeMap(properties.firstChar,properties.lastChar));case 16:case"end":return _context10.stop();}},_callee9,this);}));function buildToUnicode(_x16){return _buildToUnicode.apply(this,arguments);}return buildToUnicode;}()},{key:"readToUnicode",value:function readToUnicode(cmapObj){var _this10=this;if(!cmapObj){return Promise.resolve(null);}if(cmapObj instanceof Name){return CMapFactory.create({encoding:cmapObj,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(cmap){if(cmap instanceof IdentityCMap){return new IdentityToUnicodeMap(0,0xffff);}return new ToUnicodeMap(cmap.getMap());});}else if(cmapObj instanceof BaseStream){return CMapFactory.create({encoding:cmapObj,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then(function(cmap){if(cmap instanceof IdentityCMap){return new IdentityToUnicodeMap(0,0xffff);}var map=new Array(cmap.length);cmap.forEach(function(charCode,token){if(typeof token==="number"){map[charCode]=String.fromCodePoint(token);return;}var str=[];for(var k=0;k<token.length;k+=2){var w1=token.charCodeAt(k)<<8|token.charCodeAt(k+1);if((w1&0xf800)!==0xd800){str.push(w1);continue;}k+=2;var w2=token.charCodeAt(k)<<8|token.charCodeAt(k+1);str.push(((w1&0x3ff)<<10)+(w2&0x3ff)+0x10000);}map[charCode]=String.fromCodePoint.apply(String,str);});return new ToUnicodeMap(map);},function(reason){if(reason instanceof AbortException){return null;}if(_this10.options.ignoreErrors){warn("readToUnicode - ignoring ToUnicode data: \"".concat(reason,"\"."));return null;}throw reason;});}return Promise.resolve(null);}},{key:"readCidToGidMap",value:function readCidToGidMap(glyphsData,toUnicode){var result=[];for(var j=0,jj=glyphsData.length;j<jj;j++){var glyphID=glyphsData[j++]<<8|glyphsData[j];var code=j>>1;if(glyphID===0&&!toUnicode.has(code)){continue;}result[code]=glyphID;}return result;}},{key:"extractWidths",value:function extractWidths(dict,descriptor,properties){var xref=this.xref;var glyphsWidths=[];var defaultWidth=0;var glyphsVMetrics=[];var defaultVMetrics;var i,ii,j,jj,start,code,widths;if(properties.composite){defaultWidth=dict.has("DW")?dict.get("DW"):1000;widths=dict.get("W");if(widths){for(i=0,ii=widths.length;i<ii;i++){start=xref.fetchIfRef(widths[i++]);code=xref.fetchIfRef(widths[i]);if(Array.isArray(code)){for(j=0,jj=code.length;j<jj;j++){glyphsWidths[start++]=xref.fetchIfRef(code[j]);}}else{var width=xref.fetchIfRef(widths[++i]);for(j=start;j<=code;j++){glyphsWidths[j]=width;}}}}if(properties.vertical){var vmetrics=dict.getArray("DW2")||[880,-1000];defaultVMetrics=[vmetrics[1],defaultWidth*0.5,vmetrics[0]];vmetrics=dict.get("W2");if(vmetrics){for(i=0,ii=vmetrics.length;i<ii;i++){start=xref.fetchIfRef(vmetrics[i++]);code=xref.fetchIfRef(vmetrics[i]);if(Array.isArray(code)){for(j=0,jj=code.length;j<jj;j++){glyphsVMetrics[start++]=[xref.fetchIfRef(code[j++]),xref.fetchIfRef(code[j++]),xref.fetchIfRef(code[j])];}}else{var vmetric=[xref.fetchIfRef(vmetrics[++i]),xref.fetchIfRef(vmetrics[++i]),xref.fetchIfRef(vmetrics[++i])];for(j=start;j<=code;j++){glyphsVMetrics[j]=vmetric;}}}}}}else{var firstChar=properties.firstChar;widths=dict.get("Widths");if(widths){j=firstChar;for(i=0,ii=widths.length;i<ii;i++){glyphsWidths[j++]=xref.fetchIfRef(widths[i]);}defaultWidth=parseFloat(descriptor.get("MissingWidth"))||0;}else{var baseFontName=dict.get("BaseFont");if(baseFontName instanceof Name){var metrics=this.getBaseFontMetrics(baseFontName.name);glyphsWidths=this.buildCharCodeToWidth(metrics.widths,properties);defaultWidth=metrics.defaultWidth;}}}var isMonospace=true;var firstWidth=defaultWidth;for(var glyph in glyphsWidths){var glyphWidth=glyphsWidths[glyph];if(!glyphWidth){continue;}if(!firstWidth){firstWidth=glyphWidth;continue;}if(firstWidth!==glyphWidth){isMonospace=false;break;}}if(isMonospace){properties.flags|=FontFlags.FixedPitch;}else{properties.flags&=~FontFlags.FixedPitch;}properties.defaultWidth=defaultWidth;properties.widths=glyphsWidths;properties.defaultVMetrics=defaultVMetrics;properties.vmetrics=glyphsVMetrics;}},{key:"isSerifFont",value:function isSerifFont(baseFontName){var fontNameWoStyle=baseFontName.split("-")[0];return fontNameWoStyle in getSerifFonts()||/serif/gi.test(fontNameWoStyle);}},{key:"getBaseFontMetrics",value:function getBaseFontMetrics(name){var defaultWidth=0;var widths=Object.create(null);var monospace=false;var stdFontMap=getStdFontMap();var lookupName=stdFontMap[name]||name;var Metrics=getMetrics();if(!(lookupName in Metrics)){lookupName=this.isSerifFont(name)?"Times-Roman":"Helvetica";}var glyphWidths=Metrics[lookupName];if(typeof glyphWidths==="number"){defaultWidth=glyphWidths;monospace=true;}else{widths=glyphWidths();}return{defaultWidth:defaultWidth,monospace:monospace,widths:widths};}},{key:"buildCharCodeToWidth",value:function buildCharCodeToWidth(widthsByGlyphName,properties){var widths=Object.create(null);var differences=properties.differences;var encoding=properties.defaultEncoding;for(var charCode=0;charCode<256;charCode++){if(charCode in differences&&widthsByGlyphName[differences[charCode]]){widths[charCode]=widthsByGlyphName[differences[charCode]];continue;}if(charCode in encoding&&widthsByGlyphName[encoding[charCode]]){widths[charCode]=widthsByGlyphName[encoding[charCode]];continue;}}return widths;}},{key:"preEvaluateFont",value:function preEvaluateFont(dict){var baseDict=dict;var type=dict.get("Subtype");if(!(type instanceof Name)){throw new FormatError("invalid font Subtype");}var composite=false;var hash,toUnicode;if(type.name==="Type0"){var df=dict.get("DescendantFonts");if(!df){throw new FormatError("Descendant fonts are not specified");}dict=Array.isArray(df)?this.xref.fetchIfRef(df[0]):df;if(!(dict instanceof Dict)){throw new FormatError("Descendant font is not a dictionary.");}type=dict.get("Subtype");if(!(type instanceof Name)){throw new FormatError("invalid font Subtype");}composite=true;}var firstChar=dict.get("FirstChar")||0,lastChar=dict.get("LastChar")||(composite?0xffff:0xff);var descriptor=dict.get("FontDescriptor");if(descriptor){hash=new MurmurHash3_64();var encoding=baseDict.getRaw("Encoding");if(encoding instanceof Name){hash.update(encoding.name);}else if(encoding instanceof Ref){hash.update(encoding.toString());}else if(encoding instanceof Dict){var _iterator11=evaluator_createForOfIteratorHelper(encoding.getRawValues()),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var entry=_step11.value;if(entry instanceof Name){hash.update(entry.name);}else if(entry instanceof Ref){hash.update(entry.toString());}else if(Array.isArray(entry)){var diffLength=entry.length,diffBuf=new Array(diffLength);for(var j=0;j<diffLength;j++){var diffEntry=entry[j];if(diffEntry instanceof Name){diffBuf[j]=diffEntry.name;}else if(typeof diffEntry==="number"||diffEntry instanceof Ref){diffBuf[j]=diffEntry.toString();}}hash.update(diffBuf.join());}}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}hash.update("".concat(firstChar,"-").concat(lastChar));toUnicode=dict.get("ToUnicode")||baseDict.get("ToUnicode");if(toUnicode instanceof BaseStream){var stream=toUnicode.str||toUnicode;var uint8array=stream.buffer?new Uint8Array(stream.buffer.buffer,0,stream.bufferLength):new Uint8Array(stream.bytes.buffer,stream.start,stream.end-stream.start);hash.update(uint8array);}else if(toUnicode instanceof Name){hash.update(toUnicode.name);}var widths=dict.get("Widths")||baseDict.get("Widths");if(Array.isArray(widths)){var widthsBuf=[];var _iterator12=evaluator_createForOfIteratorHelper(widths),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _entry=_step12.value;if(typeof _entry==="number"||_entry instanceof Ref){widthsBuf.push(_entry.toString());}}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}hash.update(widthsBuf.join());}if(composite){hash.update("compositeFont");var compositeWidths=dict.get("W")||baseDict.get("W");if(Array.isArray(compositeWidths)){var _widthsBuf=[];var _iterator13=evaluator_createForOfIteratorHelper(compositeWidths),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _entry2=_step13.value;if(typeof _entry2==="number"||_entry2 instanceof Ref){_widthsBuf.push(_entry2.toString());}else if(Array.isArray(_entry2)){var subWidthsBuf=[];var _iterator14=evaluator_createForOfIteratorHelper(_entry2),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var element=_step14.value;if(typeof element==="number"||element instanceof Ref){subWidthsBuf.push(element.toString());}}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}_widthsBuf.push("[".concat(subWidthsBuf.join(),"]"));}}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}hash.update(_widthsBuf.join());}var cidToGidMap=dict.getRaw("CIDToGIDMap")||baseDict.getRaw("CIDToGIDMap");if(cidToGidMap instanceof Name){hash.update(cidToGidMap.name);}else if(cidToGidMap instanceof Ref){hash.update(cidToGidMap.toString());}else if(cidToGidMap instanceof BaseStream){hash.update(cidToGidMap.peekBytes());}}}return{descriptor:descriptor,dict:dict,baseDict:baseDict,composite:composite,type:type.name,firstChar:firstChar,lastChar:lastChar,toUnicode:toUnicode,hash:hash?hash.hexdigest():""};}},{key:"translateFont",value:function(){var _translateFont=evaluator_asyncToGenerator(/*#__PURE__*/evaluator_regeneratorRuntime().mark(function _callee10(_ref17){var _this11=this,_fontName,_baseFont;var descriptor,dict,baseDict,composite,type,firstChar,lastChar,toUnicode,cssFontInfo,isType3Font,properties,baseFontName,metrics,fontNameWoStyle,flags,widths,standardFontName,file,fontName,baseFont,fontNameStr,baseFontStr,fontFile,subtype,length1,length2,length3,isInternalFont,glyphScaleFactors,systemFontInfo,subtypeEntry,_standardFontName,_standardFontName2,cidEncoding,cMap;return evaluator_regeneratorRuntime().wrap(function _callee10$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:descriptor=_ref17.descriptor,dict=_ref17.dict,baseDict=_ref17.baseDict,composite=_ref17.composite,type=_ref17.type,firstChar=_ref17.firstChar,lastChar=_ref17.lastChar,toUnicode=_ref17.toUnicode,cssFontInfo=_ref17.cssFontInfo;isType3Font=type==="Type3";if(descriptor){_context11.next=27;break;}if(!isType3Font){_context11.next=9;break;}descriptor=new Dict(null);descriptor.set("FontName",Name.get(type));descriptor.set("FontBBox",dict.getArray("FontBBox")||[0,0,0,0]);_context11.next=27;break;case 9:baseFontName=dict.get("BaseFont");if(baseFontName instanceof Name){_context11.next=12;break;}throw new FormatError("Base font is not specified");case 12:baseFontName=baseFontName.name.replaceAll(/[,_]/g,"-");metrics=this.getBaseFontMetrics(baseFontName);fontNameWoStyle=baseFontName.split("-")[0];flags=(this.isSerifFont(fontNameWoStyle)?FontFlags.Serif:0)|(metrics.monospace?FontFlags.FixedPitch:0)|(getSymbolsFonts()[fontNameWoStyle]?FontFlags.Symbolic:FontFlags.Nonsymbolic);properties={type:type,name:baseFontName,loadedName:baseDict.loadedName,systemFontInfo:null,widths:metrics.widths,defaultWidth:metrics.defaultWidth,isSimulatedFlags:true,flags:flags,firstChar:firstChar,lastChar:lastChar,toUnicode:toUnicode,xHeight:0,capHeight:0,italicAngle:0,isType3Font:isType3Font};widths=dict.get("Widths");standardFontName=getStandardFontName(baseFontName);file=null;if(!standardFontName){_context11.next=25;break;}_context11.next=23;return this.fetchStandardFontData(standardFontName);case 23:file=_context11.sent;properties.isInternalFont=!!file;case 25:if(!properties.isInternalFont&&this.options.useSystemFonts){properties.systemFontInfo=getFontSubstitution(this.systemFontCache,this.idFactory,this.options.standardFontDataUrl,baseFontName,standardFontName);}return _context11.abrupt("return",this.extractDataStructures(dict,dict,properties).then(function(newProperties){if(widths){var glyphWidths=[];var j=firstChar;var _iterator15=evaluator_createForOfIteratorHelper(widths),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var width=_step15.value;glyphWidths[j++]=_this11.xref.fetchIfRef(width);}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}newProperties.widths=glyphWidths;}else{newProperties.widths=_this11.buildCharCodeToWidth(metrics.widths,newProperties);}return new Font(baseFontName,file,newProperties);}));case 27:fontName=descriptor.get("FontName");baseFont=dict.get("BaseFont");if(typeof fontName==="string"){fontName=Name.get(fontName);}if(typeof baseFont==="string"){baseFont=Name.get(baseFont);}fontNameStr=(_fontName=fontName)===null||_fontName===void 0?void 0:_fontName.name;baseFontStr=(_baseFont=baseFont)===null||_baseFont===void 0?void 0:_baseFont.name;if(!isType3Font&&fontNameStr!==baseFontStr){info("The FontDescriptor's FontName is \"".concat(fontNameStr,"\" but ")+"should be the same as the Font's BaseFont \"".concat(baseFontStr,"\"."));if(fontNameStr&&baseFontStr&&(baseFontStr.startsWith(fontNameStr)||!isKnownFontName(fontNameStr)&&isKnownFontName(baseFontStr))){fontName=null;}}fontName||(fontName=baseFont);if(fontName instanceof Name){_context11.next=37;break;}throw new FormatError("invalid font name");case 37:_context11.prev=37;fontFile=descriptor.get("FontFile","FontFile2","FontFile3");_context11.next=47;break;case 41:_context11.prev=41;_context11.t0=_context11["catch"](37);if(this.options.ignoreErrors){_context11.next=45;break;}throw _context11.t0;case 45:warn("translateFont - fetching \"".concat(fontName.name,"\" font file: \"").concat(_context11.t0,"\"."));fontFile=new NullStream();case 47:isInternalFont=false;glyphScaleFactors=null;systemFontInfo=null;if(!fontFile){_context11.next=54;break;}if(fontFile.dict){subtypeEntry=fontFile.dict.get("Subtype");if(subtypeEntry instanceof Name){subtype=subtypeEntry.name;}length1=fontFile.dict.get("Length1");length2=fontFile.dict.get("Length2");length3=fontFile.dict.get("Length3");}_context11.next=76;break;case 54:if(!cssFontInfo){_context11.next=68;break;}_standardFontName=getXfaFontName(fontName.name);if(!_standardFontName){_context11.next=66;break;}cssFontInfo.fontFamily="".concat(cssFontInfo.fontFamily,"-PdfJS-XFA");cssFontInfo.metrics=_standardFontName.metrics||null;glyphScaleFactors=_standardFontName.factors||null;_context11.next=62;return this.fetchStandardFontData(_standardFontName.name);case 62:fontFile=_context11.sent;isInternalFont=!!fontFile;baseDict=dict=getXfaFontDict(fontName.name);composite=true;case 66:_context11.next=76;break;case 68:if(isType3Font){_context11.next=76;break;}_standardFontName2=getStandardFontName(fontName.name);if(!_standardFontName2){_context11.next=75;break;}_context11.next=73;return this.fetchStandardFontData(_standardFontName2);case 73:fontFile=_context11.sent;isInternalFont=!!fontFile;case 75:if(!isInternalFont&&this.options.useSystemFonts){systemFontInfo=getFontSubstitution(this.systemFontCache,this.idFactory,this.options.standardFontDataUrl,fontName.name,_standardFontName2);}case 76:properties={type:type,name:fontName.name,subtype:subtype,file:fontFile,length1:length1,length2:length2,length3:length3,isInternalFont:isInternalFont,loadedName:baseDict.loadedName,composite:composite,fixedPitch:false,fontMatrix:dict.getArray("FontMatrix")||FONT_IDENTITY_MATRIX,firstChar:firstChar,lastChar:lastChar,toUnicode:toUnicode,bbox:descriptor.getArray("FontBBox")||dict.getArray("FontBBox"),ascent:descriptor.get("Ascent"),descent:descriptor.get("Descent"),xHeight:descriptor.get("XHeight")||0,capHeight:descriptor.get("CapHeight")||0,flags:descriptor.get("Flags"),italicAngle:descriptor.get("ItalicAngle")||0,isType3Font:isType3Font,cssFontInfo:cssFontInfo,scaleFactors:glyphScaleFactors,systemFontInfo:systemFontInfo};if(!composite){_context11.next=85;break;}cidEncoding=baseDict.get("Encoding");if(cidEncoding instanceof Name){properties.cidEncoding=cidEncoding.name;}_context11.next=82;return CMapFactory.create({encoding:cidEncoding,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});case 82:cMap=_context11.sent;properties.cMap=cMap;properties.vertical=properties.cMap.vertical;case 85:return _context11.abrupt("return",this.extractDataStructures(dict,baseDict,properties).then(function(newProperties){_this11.extractWidths(dict,descriptor,newProperties);return new Font(fontName.name,fontFile,newProperties);}));case 86:case"end":return _context11.stop();}},_callee10,this,[[37,41]]);}));function translateFont(_x17){return _translateFont.apply(this,arguments);}return translateFont;}()}],[{key:"buildFontPaths",value:function buildFontPaths(font,glyphs,handler,evaluatorOptions){function buildPath(fontChar){var glyphName="".concat(font.loadedName,"_path_").concat(fontChar);try{if(font.renderer.hasBuiltPath(fontChar)){return;}handler.send("commonobj",[glyphName,"FontPath",font.renderer.getPathJs(fontChar)]);}catch(reason){if(evaluatorOptions.ignoreErrors){warn("buildFontPaths - ignoring ".concat(glyphName," glyph: \"").concat(reason,"\"."));return;}throw reason;}}var _iterator16=evaluator_createForOfIteratorHelper(glyphs),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var glyph=_step16.value;buildPath(glyph.fontChar);var accent=glyph.accent;if(accent!==null&&accent!==void 0&&accent.fontChar){buildPath(accent.fontChar);}}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}}},{key:"fallbackFontDict",get:function get(){var dict=new Dict();dict.set("BaseFont",Name.get("Helvetica"));dict.set("Type",Name.get("FallbackType"));dict.set("Subtype",Name.get("FallbackType"));dict.set("Encoding",Name.get("WinAnsiEncoding"));return shadow(this,"fallbackFontDict",dict);}}]);return PartialEvaluator;}();var TranslatedFont=/*#__PURE__*/function(){function TranslatedFont(_ref18){var loadedName=_ref18.loadedName,font=_ref18.font,dict=_ref18.dict,evaluatorOptions=_ref18.evaluatorOptions;evaluator_classCallCheck(this,TranslatedFont);this.loadedName=loadedName;this.font=font;this.dict=dict;this._evaluatorOptions=evaluatorOptions||DefaultPartialEvaluatorOptions;this.type3Loaded=null;this.type3Dependencies=font.isType3Font?new Set():null;this.sent=false;}evaluator_createClass(TranslatedFont,[{key:"send",value:function send(handler){if(this.sent){return;}this.sent=true;handler.send("commonobj",[this.loadedName,"Font",this.font.exportData(this._evaluatorOptions.fontExtraProperties)]);}},{key:"fallback",value:function fallback(handler){if(!this.font.data){return;}this.font.disableFontFace=true;PartialEvaluator.buildFontPaths(this.font,this.font.glyphCacheValues,handler,this._evaluatorOptions);}},{key:"loadType3Data",value:function loadType3Data(evaluator,resources,task){var _this12=this;if(this.type3Loaded){return this.type3Loaded;}if(!this.font.isType3Font){throw new Error("Must be a Type3 font.");}var type3Evaluator=evaluator.clone({ignoreErrors:false});type3Evaluator.parsingType3Font=true;var type3FontRefs=new RefSet(evaluator.type3FontRefs);if(this.dict.objId&&!type3FontRefs.has(this.dict.objId)){type3FontRefs.put(this.dict.objId);}type3Evaluator.type3FontRefs=type3FontRefs;var translatedFont=this.font,type3Dependencies=this.type3Dependencies;var loadCharProcsPromise=Promise.resolve();var charProcs=this.dict.get("CharProcs");var fontResources=this.dict.get("Resources")||resources;var charProcOperatorList=Object.create(null);var fontBBox=Util.normalizeRect(translatedFont.bbox||[0,0,0,0]),width=fontBBox[2]-fontBBox[0],height=fontBBox[3]-fontBBox[1];var fontBBoxSize=Math.hypot(width,height);var _iterator17=evaluator_createForOfIteratorHelper(charProcs.getKeys()),_step17;try{var _loop2=function _loop2(){var key=_step17.value;loadCharProcsPromise=loadCharProcsPromise.then(function(){var glyphStream=charProcs.get(key);var operatorList=new OperatorList();return type3Evaluator.getOperatorList({stream:glyphStream,task:task,resources:fontResources,operatorList:operatorList}).then(function(){if(operatorList.fnArray[0]===OPS.setCharWidthAndBounds){_this12._removeType3ColorOperators(operatorList,fontBBoxSize);}charProcOperatorList[key]=operatorList.getIR();var _iterator18=evaluator_createForOfIteratorHelper(operatorList.dependencies),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var dependency=_step18.value;type3Dependencies.add(dependency);}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}}).catch(function(reason){warn("Type3 font resource \"".concat(key,"\" is not available."));var dummyOperatorList=new OperatorList();charProcOperatorList[key]=dummyOperatorList.getIR();});});};for(_iterator17.s();!(_step17=_iterator17.n()).done;){_loop2();}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}this.type3Loaded=loadCharProcsPromise.then(function(){translatedFont.charProcOperatorList=charProcOperatorList;if(_this12._bbox){translatedFont.isCharBBox=true;translatedFont.bbox=_this12._bbox;}});return this.type3Loaded;}},{key:"_removeType3ColorOperators",value:function _removeType3ColorOperators(operatorList){var fontBBoxSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:NaN;var charBBox=Util.normalizeRect(operatorList.argsArray[0].slice(2)),width=charBBox[2]-charBBox[0],height=charBBox[3]-charBBox[1];var charBBoxSize=Math.hypot(width,height);if(width===0||height===0){operatorList.fnArray.splice(0,1);operatorList.argsArray.splice(0,1);}else if(fontBBoxSize===0||Math.round(charBBoxSize/fontBBoxSize)>=10){if(!this._bbox){this._bbox=[Infinity,Infinity,-Infinity,-Infinity];}this._bbox[0]=Math.min(this._bbox[0],charBBox[0]);this._bbox[1]=Math.min(this._bbox[1],charBBox[1]);this._bbox[2]=Math.max(this._bbox[2],charBBox[2]);this._bbox[3]=Math.max(this._bbox[3],charBBox[3]);}var i=0,ii=operatorList.length;while(i<ii){switch(operatorList.fnArray[i]){case OPS.setCharWidthAndBounds:break;case OPS.setStrokeColorSpace:case OPS.setFillColorSpace:case OPS.setStrokeColor:case OPS.setStrokeColorN:case OPS.setFillColor:case OPS.setFillColorN:case OPS.setStrokeGray:case OPS.setFillGray:case OPS.setStrokeRGBColor:case OPS.setFillRGBColor:case OPS.setStrokeCMYKColor:case OPS.setFillCMYKColor:case OPS.shadingFill:case OPS.setRenderingIntent:operatorList.fnArray.splice(i,1);operatorList.argsArray.splice(i,1);ii--;continue;case OPS.setGState:var _operatorList$argsArr=evaluator_slicedToArray(operatorList.argsArray[i],1),gStateObj=_operatorList$argsArr[0];var j=0,jj=gStateObj.length;while(j<jj){var _gStateObj$j=evaluator_slicedToArray(gStateObj[j],1),gStateKey=_gStateObj$j[0];switch(gStateKey){case"TR":case"TR2":case"HT":case"BG":case"BG2":case"UCR":case"UCR2":gStateObj.splice(j,1);jj--;continue;}j++;}break;}i++;}}}]);return TranslatedFont;}();var StateManager=/*#__PURE__*/function(){function StateManager(){var initialState=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new EvalState();evaluator_classCallCheck(this,StateManager);this.state=initialState;this.stateStack=[];}evaluator_createClass(StateManager,[{key:"save",value:function save(){var old=this.state;this.stateStack.push(this.state);this.state=old.clone();}},{key:"restore",value:function restore(){var prev=this.stateStack.pop();if(prev){this.state=prev;}}},{key:"transform",value:function transform(args){this.state.ctm=Util.transform(this.state.ctm,args);}}]);return StateManager;}();var TextState=/*#__PURE__*/function(){function TextState(){evaluator_classCallCheck(this,TextState);this.ctm=new Float32Array(IDENTITY_MATRIX);this.fontName=null;this.fontSize=0;this.loadedName=null;this.font=null;this.fontMatrix=FONT_IDENTITY_MATRIX;this.textMatrix=IDENTITY_MATRIX.slice();this.textLineMatrix=IDENTITY_MATRIX.slice();this.charSpacing=0;this.wordSpacing=0;this.leading=0;this.textHScale=1;this.textRise=0;}evaluator_createClass(TextState,[{key:"setTextMatrix",value:function setTextMatrix(a,b,c,d,e,f){var m=this.textMatrix;m[0]=a;m[1]=b;m[2]=c;m[3]=d;m[4]=e;m[5]=f;}},{key:"setTextLineMatrix",value:function setTextLineMatrix(a,b,c,d,e,f){var m=this.textLineMatrix;m[0]=a;m[1]=b;m[2]=c;m[3]=d;m[4]=e;m[5]=f;}},{key:"translateTextMatrix",value:function translateTextMatrix(x,y){var m=this.textMatrix;m[4]=m[0]*x+m[2]*y+m[4];m[5]=m[1]*x+m[3]*y+m[5];}},{key:"translateTextLineMatrix",value:function translateTextLineMatrix(x,y){var m=this.textLineMatrix;m[4]=m[0]*x+m[2]*y+m[4];m[5]=m[1]*x+m[3]*y+m[5];}},{key:"carriageReturn",value:function carriageReturn(){this.translateTextLineMatrix(0,-this.leading);this.textMatrix=this.textLineMatrix.slice();}},{key:"clone",value:function clone(){var clone=Object.create(this);clone.textMatrix=this.textMatrix.slice();clone.textLineMatrix=this.textLineMatrix.slice();clone.fontMatrix=this.fontMatrix.slice();return clone;}}]);return TextState;}();var EvalState=/*#__PURE__*/function(){function EvalState(){evaluator_classCallCheck(this,EvalState);this.ctm=new Float32Array(IDENTITY_MATRIX);this.font=null;this.textRenderingMode=TextRenderingMode.FILL;this.fillColorSpace=ColorSpace.singletons.gray;this.strokeColorSpace=ColorSpace.singletons.gray;}evaluator_createClass(EvalState,[{key:"clone",value:function clone(){return Object.create(this);}}]);return EvalState;}();var EvaluatorPreprocessor=/*#__PURE__*/function(){function EvaluatorPreprocessor(stream,xref){var stateManager=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new StateManager();evaluator_classCallCheck(this,EvaluatorPreprocessor);this.parser=new Parser({lexer:new Lexer(stream,EvaluatorPreprocessor.opMap),xref:xref});this.stateManager=stateManager;this.nonProcessedArgs=[];this._isPathOp=false;this._numInvalidPathOPS=0;}evaluator_createClass(EvaluatorPreprocessor,[{key:"savedStatesDepth",get:function get(){return this.stateManager.stateStack.length;}},{key:"read",value:function read(operation){var args=operation.args;while(true){var obj=this.parser.getObj();if(obj instanceof Cmd){var cmd=obj.cmd;var opSpec=EvaluatorPreprocessor.opMap[cmd];if(!opSpec){warn("Unknown command \"".concat(cmd,"\"."));continue;}var fn=opSpec.id;var numArgs=opSpec.numArgs;var argsLength=args!==null?args.length:0;if(!this._isPathOp){this._numInvalidPathOPS=0;}this._isPathOp=fn>=OPS.moveTo&&fn<=OPS.endPath;if(!opSpec.variableArgs){if(argsLength!==numArgs){var nonProcessedArgs=this.nonProcessedArgs;while(argsLength>numArgs){nonProcessedArgs.push(args.shift());argsLength--;}while(argsLength<numArgs&&nonProcessedArgs.length!==0){if(args===null){args=[];}args.unshift(nonProcessedArgs.pop());argsLength++;}}if(argsLength<numArgs){var partialMsg="command ".concat(cmd,": expected ").concat(numArgs," args, ")+"but received ".concat(argsLength," args.");if(this._isPathOp&&++this._numInvalidPathOPS>EvaluatorPreprocessor.MAX_INVALID_PATH_OPS){throw new FormatError("Invalid ".concat(partialMsg));}warn("Skipping ".concat(partialMsg));if(args!==null){args.length=0;}continue;}}else if(argsLength>numArgs){info("Command ".concat(cmd,": expected [0, ").concat(numArgs,"] args, ")+"but received ".concat(argsLength," args."));}this.preprocessCommand(fn,args);operation.fn=fn;operation.args=args;return true;}if(obj===EOF){return false;}if(obj!==null){if(args===null){args=[];}args.push(obj);if(args.length>33){throw new FormatError("Too many arguments");}}}}},{key:"preprocessCommand",value:function preprocessCommand(fn,args){switch(fn|0){case OPS.save:this.stateManager.save();break;case OPS.restore:this.stateManager.restore();break;case OPS.transform:this.stateManager.transform(args);break;}}}],[{key:"opMap",get:function get(){return shadow(this,"opMap",{w:{id:OPS.setLineWidth,numArgs:1,variableArgs:false},J:{id:OPS.setLineCap,numArgs:1,variableArgs:false},j:{id:OPS.setLineJoin,numArgs:1,variableArgs:false},M:{id:OPS.setMiterLimit,numArgs:1,variableArgs:false},d:{id:OPS.setDash,numArgs:2,variableArgs:false},ri:{id:OPS.setRenderingIntent,numArgs:1,variableArgs:false},i:{id:OPS.setFlatness,numArgs:1,variableArgs:false},gs:{id:OPS.setGState,numArgs:1,variableArgs:false},q:{id:OPS.save,numArgs:0,variableArgs:false},Q:{id:OPS.restore,numArgs:0,variableArgs:false},cm:{id:OPS.transform,numArgs:6,variableArgs:false},m:{id:OPS.moveTo,numArgs:2,variableArgs:false},l:{id:OPS.lineTo,numArgs:2,variableArgs:false},c:{id:OPS.curveTo,numArgs:6,variableArgs:false},v:{id:OPS.curveTo2,numArgs:4,variableArgs:false},y:{id:OPS.curveTo3,numArgs:4,variableArgs:false},h:{id:OPS.closePath,numArgs:0,variableArgs:false},re:{id:OPS.rectangle,numArgs:4,variableArgs:false},S:{id:OPS.stroke,numArgs:0,variableArgs:false},s:{id:OPS.closeStroke,numArgs:0,variableArgs:false},f:{id:OPS.fill,numArgs:0,variableArgs:false},F:{id:OPS.fill,numArgs:0,variableArgs:false},"f*":{id:OPS.eoFill,numArgs:0,variableArgs:false},B:{id:OPS.fillStroke,numArgs:0,variableArgs:false},"B*":{id:OPS.eoFillStroke,numArgs:0,variableArgs:false},b:{id:OPS.closeFillStroke,numArgs:0,variableArgs:false},"b*":{id:OPS.closeEOFillStroke,numArgs:0,variableArgs:false},n:{id:OPS.endPath,numArgs:0,variableArgs:false},W:{id:OPS.clip,numArgs:0,variableArgs:false},"W*":{id:OPS.eoClip,numArgs:0,variableArgs:false},BT:{id:OPS.beginText,numArgs:0,variableArgs:false},ET:{id:OPS.endText,numArgs:0,variableArgs:false},Tc:{id:OPS.setCharSpacing,numArgs:1,variableArgs:false},Tw:{id:OPS.setWordSpacing,numArgs:1,variableArgs:false},Tz:{id:OPS.setHScale,numArgs:1,variableArgs:false},TL:{id:OPS.setLeading,numArgs:1,variableArgs:false},Tf:{id:OPS.setFont,numArgs:2,variableArgs:false},Tr:{id:OPS.setTextRenderingMode,numArgs:1,variableArgs:false},Ts:{id:OPS.setTextRise,numArgs:1,variableArgs:false},Td:{id:OPS.moveText,numArgs:2,variableArgs:false},TD:{id:OPS.setLeadingMoveText,numArgs:2,variableArgs:false},Tm:{id:OPS.setTextMatrix,numArgs:6,variableArgs:false},"T*":{id:OPS.nextLine,numArgs:0,variableArgs:false},Tj:{id:OPS.showText,numArgs:1,variableArgs:false},TJ:{id:OPS.showSpacedText,numArgs:1,variableArgs:false},"'":{id:OPS.nextLineShowText,numArgs:1,variableArgs:false},'"':{id:OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:false},d0:{id:OPS.setCharWidth,numArgs:2,variableArgs:false},d1:{id:OPS.setCharWidthAndBounds,numArgs:6,variableArgs:false},CS:{id:OPS.setStrokeColorSpace,numArgs:1,variableArgs:false},cs:{id:OPS.setFillColorSpace,numArgs:1,variableArgs:false},SC:{id:OPS.setStrokeColor,numArgs:4,variableArgs:true},SCN:{id:OPS.setStrokeColorN,numArgs:33,variableArgs:true},sc:{id:OPS.setFillColor,numArgs:4,variableArgs:true},scn:{id:OPS.setFillColorN,numArgs:33,variableArgs:true},G:{id:OPS.setStrokeGray,numArgs:1,variableArgs:false},g:{id:OPS.setFillGray,numArgs:1,variableArgs:false},RG:{id:OPS.setStrokeRGBColor,numArgs:3,variableArgs:false},rg:{id:OPS.setFillRGBColor,numArgs:3,variableArgs:false},K:{id:OPS.setStrokeCMYKColor,numArgs:4,variableArgs:false},k:{id:OPS.setFillCMYKColor,numArgs:4,variableArgs:false},sh:{id:OPS.shadingFill,numArgs:1,variableArgs:false},BI:{id:OPS.beginInlineImage,numArgs:0,variableArgs:false},ID:{id:OPS.beginImageData,numArgs:0,variableArgs:false},EI:{id:OPS.endInlineImage,numArgs:1,variableArgs:false},Do:{id:OPS.paintXObject,numArgs:1,variableArgs:false},MP:{id:OPS.markPoint,numArgs:1,variableArgs:false},DP:{id:OPS.markPointProps,numArgs:2,variableArgs:false},BMC:{id:OPS.beginMarkedContent,numArgs:1,variableArgs:false},BDC:{id:OPS.beginMarkedContentProps,numArgs:2,variableArgs:false},EMC:{id:OPS.endMarkedContent,numArgs:0,variableArgs:false},BX:{id:OPS.beginCompat,numArgs:0,variableArgs:false},EX:{id:OPS.endCompat,numArgs:0,variableArgs:false},BM:null,BD:null,true:null,fa:null,fal:null,fals:null,false:null,nu:null,nul:null,null:null});}}]);return EvaluatorPreprocessor;}();evaluator_defineProperty(EvaluatorPreprocessor,"MAX_INVALID_PATH_OPS",10);
;// CONCATENATED MODULE: ./src/core/default_appearance.js
function default_appearance_typeof(o){"@babel/helpers - typeof";return default_appearance_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},default_appearance_typeof(o);}function default_appearance_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=default_appearance_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function default_appearance_toConsumableArray(arr){return default_appearance_arrayWithoutHoles(arr)||default_appearance_iterableToArray(arr)||default_appearance_unsupportedIterableToArray(arr)||default_appearance_nonIterableSpread();}function default_appearance_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function default_appearance_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function default_appearance_arrayWithoutHoles(arr){if(Array.isArray(arr))return default_appearance_arrayLikeToArray(arr);}function default_appearance_slicedToArray(arr,i){return default_appearance_arrayWithHoles(arr)||default_appearance_iterableToArrayLimit(arr,i)||default_appearance_unsupportedIterableToArray(arr,i)||default_appearance_nonIterableRest();}function default_appearance_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function default_appearance_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return default_appearance_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return default_appearance_arrayLikeToArray(o,minLen);}function default_appearance_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function default_appearance_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function default_appearance_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function default_appearance_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function default_appearance_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,default_appearance_toPropertyKey(descriptor.key),descriptor);}}function default_appearance_createClass(Constructor,protoProps,staticProps){if(protoProps)default_appearance_defineProperties(Constructor.prototype,protoProps);if(staticProps)default_appearance_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function default_appearance_toPropertyKey(arg){var key=default_appearance_toPrimitive(arg,"string");return default_appearance_typeof(key)==="symbol"?key:String(key);}function default_appearance_toPrimitive(input,hint){if(default_appearance_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(default_appearance_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function default_appearance_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)default_appearance_setPrototypeOf(subClass,superClass);}function default_appearance_setPrototypeOf(o,p){default_appearance_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return default_appearance_setPrototypeOf(o,p);}function default_appearance_createSuper(Derived){var hasNativeReflectConstruct=default_appearance_isNativeReflectConstruct();return function _createSuperInternal(){var Super=default_appearance_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=default_appearance_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return default_appearance_possibleConstructorReturn(this,result);};}function default_appearance_possibleConstructorReturn(self,call){if(call&&(default_appearance_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return default_appearance_assertThisInitialized(self);}function default_appearance_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function default_appearance_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function default_appearance_getPrototypeOf(o){default_appearance_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return default_appearance_getPrototypeOf(o);}var DefaultAppearanceEvaluator=/*#__PURE__*/function(_EvaluatorPreprocesso){default_appearance_inherits(DefaultAppearanceEvaluator,_EvaluatorPreprocesso);var _super=default_appearance_createSuper(DefaultAppearanceEvaluator);function DefaultAppearanceEvaluator(str){default_appearance_classCallCheck(this,DefaultAppearanceEvaluator);return _super.call(this,new StringStream(str));}default_appearance_createClass(DefaultAppearanceEvaluator,[{key:"parse",value:function parse(){var operation={fn:0,args:[]};var result={fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3)};try{while(true){operation.args.length=0;if(!this.read(operation)){break;}if(this.savedStatesDepth!==0){continue;}var fn=operation.fn,args=operation.args;switch(fn|0){case OPS.setFont:var _args=default_appearance_slicedToArray(args,2),fontName=_args[0],fontSize=_args[1];if(fontName instanceof Name){result.fontName=fontName.name;}if(typeof fontSize==="number"&&fontSize>0){result.fontSize=fontSize;}break;case OPS.setFillRGBColor:ColorSpace.singletons.rgb.getRgbItem(args,0,result.fontColor,0);break;case OPS.setFillGray:ColorSpace.singletons.gray.getRgbItem(args,0,result.fontColor,0);break;case OPS.setFillCMYKColor:ColorSpace.singletons.cmyk.getRgbItem(args,0,result.fontColor,0);break;}}}catch(reason){warn("parseDefaultAppearance - ignoring errors: \"".concat(reason,"\"."));}return result;}}]);return DefaultAppearanceEvaluator;}(EvaluatorPreprocessor);function parseDefaultAppearance(str){return new DefaultAppearanceEvaluator(str).parse();}var AppearanceStreamEvaluator=/*#__PURE__*/function(_EvaluatorPreprocesso2){default_appearance_inherits(AppearanceStreamEvaluator,_EvaluatorPreprocesso2);var _super2=default_appearance_createSuper(AppearanceStreamEvaluator);function AppearanceStreamEvaluator(stream,evaluatorOptions,xref){var _stream$dict;var _this;default_appearance_classCallCheck(this,AppearanceStreamEvaluator);_this=_super2.call(this,stream);_this.stream=stream;_this.evaluatorOptions=evaluatorOptions;_this.xref=xref;_this.resources=(_stream$dict=stream.dict)===null||_stream$dict===void 0?void 0:_stream$dict.get("Resources");return _this;}default_appearance_createClass(AppearanceStreamEvaluator,[{key:"parse",value:function parse(){var operation={fn:0,args:[]};var result={scaleFactor:1,fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3),fillColorSpace:ColorSpace.singletons.gray};var breakLoop=false;var stack=[];try{while(true){operation.args.length=0;if(breakLoop||!this.read(operation)){break;}var fn=operation.fn,args=operation.args;switch(fn|0){case OPS.save:stack.push({scaleFactor:result.scaleFactor,fontSize:result.fontSize,fontName:result.fontName,fontColor:result.fontColor.slice(),fillColorSpace:result.fillColorSpace});break;case OPS.restore:result=stack.pop()||result;break;case OPS.setTextMatrix:result.scaleFactor*=Math.hypot(args[0],args[1]);break;case OPS.setFont:var _args2=default_appearance_slicedToArray(args,2),fontName=_args2[0],fontSize=_args2[1];if(fontName instanceof Name){result.fontName=fontName.name;}if(typeof fontSize==="number"&&fontSize>0){result.fontSize=fontSize*result.scaleFactor;}break;case OPS.setFillColorSpace:result.fillColorSpace=ColorSpace.parse({cs:args[0],xref:this.xref,resources:this.resources,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:this._localColorSpaceCache});break;case OPS.setFillColor:var cs=result.fillColorSpace;cs.getRgbItem(args,0,result.fontColor,0);break;case OPS.setFillRGBColor:ColorSpace.singletons.rgb.getRgbItem(args,0,result.fontColor,0);break;case OPS.setFillGray:ColorSpace.singletons.gray.getRgbItem(args,0,result.fontColor,0);break;case OPS.setFillCMYKColor:ColorSpace.singletons.cmyk.getRgbItem(args,0,result.fontColor,0);break;case OPS.showText:case OPS.showSpacedText:case OPS.nextLineShowText:case OPS.nextLineSetSpacingShowText:breakLoop=true;break;}}}catch(reason){warn("parseAppearanceStream - ignoring errors: \"".concat(reason,"\"."));}this.stream.reset();delete result.scaleFactor;delete result.fillColorSpace;return result;}},{key:"_localColorSpaceCache",get:function get(){return shadow(this,"_localColorSpaceCache",new LocalColorSpaceCache());}},{key:"_pdfFunctionFactory",get:function get(){var pdfFunctionFactory=new PDFFunctionFactory({xref:this.xref,isEvalSupported:this.evaluatorOptions.isEvalSupported});return shadow(this,"_pdfFunctionFactory",pdfFunctionFactory);}}]);return AppearanceStreamEvaluator;}(EvaluatorPreprocessor);function parseAppearanceStream(stream,evaluatorOptions,xref){return new AppearanceStreamEvaluator(stream,evaluatorOptions,xref).parse();}function getPdfColor(color,isFill){if(color[0]===color[1]&&color[1]===color[2]){var gray=color[0]/255;return"".concat(numberToString(gray)," ").concat(isFill?"g":"G");}return Array.from(color,function(c){return numberToString(c/255);}).join(" ")+" ".concat(isFill?"rg":"RG");}function createDefaultAppearance(_ref){var fontSize=_ref.fontSize,fontName=_ref.fontName,fontColor=_ref.fontColor;return"/".concat(escapePDFName(fontName)," ").concat(fontSize," Tf ").concat(getPdfColor(fontColor,true));}var FakeUnicodeFont=/*#__PURE__*/function(){function FakeUnicodeFont(xref,fontFamily){default_appearance_classCallCheck(this,FakeUnicodeFont);this.xref=xref;this.widths=null;this.firstChar=Infinity;this.lastChar=-Infinity;this.fontFamily=fontFamily;var canvas=new OffscreenCanvas(1,1);this.ctxMeasure=canvas.getContext("2d");if(!FakeUnicodeFont._fontNameId){FakeUnicodeFont._fontNameId=1;}this.fontName=Name.get("InvalidPDFjsFont_".concat(fontFamily,"_").concat(FakeUnicodeFont._fontNameId++));}default_appearance_createClass(FakeUnicodeFont,[{key:"toUnicodeRef",get:function get(){if(!FakeUnicodeFont._toUnicodeRef){var toUnicode="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo\n<< /Registry (Adobe)\n/Ordering (UCS) /Supplement 0 >> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000> <FFFF>\nendcodespacerange\n1 beginbfrange\n<0000> <FFFF> <0000>\nendbfrange\nendcmap CMapName currentdict /CMap defineresource pop end end";var toUnicodeStream=FakeUnicodeFont.toUnicodeStream=new StringStream(toUnicode);var toUnicodeDict=new Dict(this.xref);toUnicodeStream.dict=toUnicodeDict;toUnicodeDict.set("Length",toUnicode.length);FakeUnicodeFont._toUnicodeRef=this.xref.getNewPersistentRef(toUnicodeStream);}return FakeUnicodeFont._toUnicodeRef;}},{key:"fontDescriptorRef",get:function get(){if(!FakeUnicodeFont._fontDescriptorRef){var fontDescriptor=new Dict(this.xref);fontDescriptor.set("Type",Name.get("FontDescriptor"));fontDescriptor.set("FontName",this.fontName);fontDescriptor.set("FontFamily","MyriadPro Regular");fontDescriptor.set("FontBBox",[0,0,0,0]);fontDescriptor.set("FontStretch",Name.get("Normal"));fontDescriptor.set("FontWeight",400);fontDescriptor.set("ItalicAngle",0);FakeUnicodeFont._fontDescriptorRef=this.xref.getNewPersistentRef(fontDescriptor);}return FakeUnicodeFont._fontDescriptorRef;}},{key:"descendantFontRef",get:function get(){var descendantFont=new Dict(this.xref);descendantFont.set("BaseFont",this.fontName);descendantFont.set("Type",Name.get("Font"));descendantFont.set("Subtype",Name.get("CIDFontType0"));descendantFont.set("CIDToGIDMap",Name.get("Identity"));descendantFont.set("FirstChar",this.firstChar);descendantFont.set("LastChar",this.lastChar);descendantFont.set("FontDescriptor",this.fontDescriptorRef);descendantFont.set("DW",1000);var widths=[];var chars=default_appearance_toConsumableArray(this.widths.entries()).sort();var currentChar=null;var currentWidths=null;var _iterator=default_appearance_createForOfIteratorHelper(chars),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=default_appearance_slicedToArray(_step.value,2),char=_step$value[0],width=_step$value[1];if(!currentChar){currentChar=char;currentWidths=[width];continue;}if(char===currentChar+currentWidths.length){currentWidths.push(width);}else{widths.push(currentChar,currentWidths);currentChar=char;currentWidths=[width];}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(currentChar){widths.push(currentChar,currentWidths);}descendantFont.set("W",widths);var cidSystemInfo=new Dict(this.xref);cidSystemInfo.set("Ordering","Identity");cidSystemInfo.set("Registry","Adobe");cidSystemInfo.set("Supplement",0);descendantFont.set("CIDSystemInfo",cidSystemInfo);return this.xref.getNewPersistentRef(descendantFont);}},{key:"baseFontRef",get:function get(){var baseFont=new Dict(this.xref);baseFont.set("BaseFont",this.fontName);baseFont.set("Type",Name.get("Font"));baseFont.set("Subtype",Name.get("Type0"));baseFont.set("Encoding",Name.get("Identity-H"));baseFont.set("DescendantFonts",[this.descendantFontRef]);baseFont.set("ToUnicode",this.toUnicodeRef);return this.xref.getNewPersistentRef(baseFont);}},{key:"resources",get:function get(){var resources=new Dict(this.xref);var font=new Dict(this.xref);font.set(this.fontName.name,this.baseFontRef);resources.set("Font",font);return resources;}},{key:"_createContext",value:function _createContext(){this.widths=new Map();this.ctxMeasure.font="1000px ".concat(this.fontFamily);return this.ctxMeasure;}},{key:"createFontResources",value:function createFontResources(text){var ctx=this._createContext();var _iterator2=default_appearance_createForOfIteratorHelper(text.split(/\r\n?|\n/)),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var line=_step2.value;var _iterator3=default_appearance_createForOfIteratorHelper(line.split("")),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var char=_step3.value;var code=char.charCodeAt(0);if(this.widths.has(code)){continue;}var metrics=ctx.measureText(char);var width=Math.ceil(metrics.width);this.widths.set(code,width);this.firstChar=Math.min(code,this.firstChar);this.lastChar=Math.max(code,this.lastChar);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return this.resources;}},{key:"createAppearance",value:function createAppearance(text,rect,rotation,fontSize,bgColor,strokeAlpha){var ctx=this._createContext();var lines=[];var maxWidth=-Infinity;var _iterator4=default_appearance_createForOfIteratorHelper(text.split(/\r\n?|\n/)),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _line=_step4.value;lines.push(_line);var lineWidth=ctx.measureText(_line).width;maxWidth=Math.max(maxWidth,lineWidth);var _iterator5=default_appearance_createForOfIteratorHelper(_line.split("")),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var char=_step5.value;var code=char.charCodeAt(0);var width=this.widths.get(code);if(width===undefined){var metrics=ctx.measureText(char);width=Math.ceil(metrics.width);this.widths.set(code,width);this.firstChar=Math.min(code,this.firstChar);this.lastChar=Math.max(code,this.lastChar);}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}maxWidth*=fontSize/1000;var _rect=default_appearance_slicedToArray(rect,4),x1=_rect[0],y1=_rect[1],x2=_rect[2],y2=_rect[3];var w=x2-x1;var h=y2-y1;if(rotation%180!==0){var _ref2=[h,w];w=_ref2[0];h=_ref2[1];}var hscale=1;if(maxWidth>w){hscale=w/maxWidth;}var vscale=1;var lineHeight=LINE_FACTOR*fontSize;var lineDescent=LINE_DESCENT_FACTOR*fontSize;var maxHeight=lineHeight*lines.length;if(maxHeight>h){vscale=h/maxHeight;}var fscale=Math.min(hscale,vscale);var newFontSize=fontSize*fscale;var buffer=["q","0 0 ".concat(numberToString(w)," ").concat(numberToString(h)," re W n"),"BT","1 0 0 1 0 ".concat(numberToString(h+lineDescent)," Tm 0 Tc ").concat(getPdfColor(bgColor,true)),"/".concat(this.fontName.name," ").concat(numberToString(newFontSize)," Tf")];var resources=this.resources;strokeAlpha=typeof strokeAlpha==="number"&&strokeAlpha>=0&&strokeAlpha<=1?strokeAlpha:1;if(strokeAlpha!==1){buffer.push("/R0 gs");var extGState=new Dict(this.xref);var r0=new Dict(this.xref);r0.set("ca",strokeAlpha);r0.set("CA",strokeAlpha);r0.set("Type",Name.get("ExtGState"));extGState.set("R0",r0);resources.set("ExtGState",extGState);}var vShift=numberToString(lineHeight);for(var _i=0,_lines=lines;_i<_lines.length;_i++){var line=_lines[_i];buffer.push("0 -".concat(vShift," Td <").concat(stringToUTF16HexString(line),"> Tj"));}buffer.push("ET","Q");var appearance=buffer.join("\n");var appearanceStreamDict=new Dict(this.xref);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",[0,0,w,h]);appearanceStreamDict.set("Length",appearance.length);appearanceStreamDict.set("Resources",resources);if(rotation){var matrix=core_utils_getRotationMatrix(rotation,w,h);appearanceStreamDict.set("Matrix",matrix);}var ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return ap;}}]);return FakeUnicodeFont;}();
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.json.stringify.js
var es_json_stringify = __webpack_require__(7254);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.repeat.js
var es_string_repeat = __webpack_require__(5520);
;// CONCATENATED MODULE: ./src/core/name_number_tree.js
function name_number_tree_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)name_number_tree_setPrototypeOf(subClass,superClass);}function name_number_tree_setPrototypeOf(o,p){name_number_tree_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return name_number_tree_setPrototypeOf(o,p);}function name_number_tree_createSuper(Derived){var hasNativeReflectConstruct=name_number_tree_isNativeReflectConstruct();return function _createSuperInternal(){var Super=name_number_tree_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=name_number_tree_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return name_number_tree_possibleConstructorReturn(this,result);};}function name_number_tree_possibleConstructorReturn(self,call){if(call&&(name_number_tree_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return name_number_tree_assertThisInitialized(self);}function name_number_tree_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function name_number_tree_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function name_number_tree_getPrototypeOf(o){name_number_tree_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return name_number_tree_getPrototypeOf(o);}function name_number_tree_typeof(o){"@babel/helpers - typeof";return name_number_tree_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},name_number_tree_typeof(o);}function name_number_tree_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=name_number_tree_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function name_number_tree_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return name_number_tree_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return name_number_tree_arrayLikeToArray(o,minLen);}function name_number_tree_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function name_number_tree_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function name_number_tree_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,name_number_tree_toPropertyKey(descriptor.key),descriptor);}}function name_number_tree_createClass(Constructor,protoProps,staticProps){if(protoProps)name_number_tree_defineProperties(Constructor.prototype,protoProps);if(staticProps)name_number_tree_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function name_number_tree_toPropertyKey(arg){var key=name_number_tree_toPrimitive(arg,"string");return name_number_tree_typeof(key)==="symbol"?key:String(key);}function name_number_tree_toPrimitive(input,hint){if(name_number_tree_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(name_number_tree_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var NameOrNumberTree=/*#__PURE__*/function(){function NameOrNumberTree(root,xref,type){name_number_tree_classCallCheck(this,NameOrNumberTree);if(this.constructor===NameOrNumberTree){unreachable("Cannot initialize NameOrNumberTree.");}this.root=root;this.xref=xref;this._type=type;}name_number_tree_createClass(NameOrNumberTree,[{key:"getAll",value:function getAll(){var map=new Map();if(!this.root){return map;}var xref=this.xref;var processed=new RefSet();processed.put(this.root);var queue=[this.root];while(queue.length>0){var obj=xref.fetchIfRef(queue.shift());if(!(obj instanceof Dict)){continue;}if(obj.has("Kids")){var kids=obj.get("Kids");if(!Array.isArray(kids)){continue;}var _iterator=name_number_tree_createForOfIteratorHelper(kids),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var kid=_step.value;if(processed.has(kid)){throw new FormatError("Duplicate entry in \"".concat(this._type,"\" tree."));}queue.push(kid);processed.put(kid);}}catch(err){_iterator.e(err);}finally{_iterator.f();}continue;}var entries=obj.get(this._type);if(!Array.isArray(entries)){continue;}for(var i=0,ii=entries.length;i<ii;i+=2){map.set(xref.fetchIfRef(entries[i]),xref.fetchIfRef(entries[i+1]));}}return map;}},{key:"get",value:function get(key){if(!this.root){return null;}var xref=this.xref;var kidsOrEntries=xref.fetchIfRef(this.root);var loopCount=0;var MAX_LEVELS=10;while(kidsOrEntries.has("Kids")){if(++loopCount>MAX_LEVELS){warn("Search depth limit reached for \"".concat(this._type,"\" tree."));return null;}var kids=kidsOrEntries.get("Kids");if(!Array.isArray(kids)){return null;}var l=0,r=kids.length-1;while(l<=r){var m=l+r>>1;var kid=xref.fetchIfRef(kids[m]);var limits=kid.get("Limits");if(key<xref.fetchIfRef(limits[0])){r=m-1;}else if(key>xref.fetchIfRef(limits[1])){l=m+1;}else{kidsOrEntries=kid;break;}}if(l>r){return null;}}var entries=kidsOrEntries.get(this._type);if(Array.isArray(entries)){var _l=0,_r=entries.length-2;while(_l<=_r){var tmp=_l+_r>>1,_m=tmp+(tmp&1);var currentKey=xref.fetchIfRef(entries[_m]);if(key<currentKey){_r=_m-2;}else if(key>currentKey){_l=_m+2;}else{return xref.fetchIfRef(entries[_m+1]);}}}return null;}}]);return NameOrNumberTree;}();var NameTree=/*#__PURE__*/function(_NameOrNumberTree){name_number_tree_inherits(NameTree,_NameOrNumberTree);var _super=name_number_tree_createSuper(NameTree);function NameTree(root,xref){name_number_tree_classCallCheck(this,NameTree);return _super.call(this,root,xref,"Names");}return name_number_tree_createClass(NameTree);}(NameOrNumberTree);var NumberTree=/*#__PURE__*/function(_NameOrNumberTree2){name_number_tree_inherits(NumberTree,_NameOrNumberTree2);var _super2=name_number_tree_createSuper(NumberTree);function NumberTree(root,xref){name_number_tree_classCallCheck(this,NumberTree);return _super2.call(this,root,xref,"Nums");}return name_number_tree_createClass(NumberTree);}(NameOrNumberTree);
;// CONCATENATED MODULE: ./src/core/cleanup_helper.js
function clearGlobalCaches(){clearPatternCaches();clearPrimitiveCaches();clearUnicodeCaches();}
;// CONCATENATED MODULE: ./src/core/file_spec.js
function file_spec_typeof(o){"@babel/helpers - typeof";return file_spec_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},file_spec_typeof(o);}function file_spec_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function file_spec_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,file_spec_toPropertyKey(descriptor.key),descriptor);}}function file_spec_createClass(Constructor,protoProps,staticProps){if(protoProps)file_spec_defineProperties(Constructor.prototype,protoProps);if(staticProps)file_spec_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function file_spec_toPropertyKey(arg){var key=file_spec_toPrimitive(arg,"string");return file_spec_typeof(key)==="symbol"?key:String(key);}function file_spec_toPrimitive(input,hint){if(file_spec_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(file_spec_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function pickPlatformItem(dict){if(dict.has("UF")){return dict.get("UF");}else if(dict.has("F")){return dict.get("F");}else if(dict.has("Unix")){return dict.get("Unix");}else if(dict.has("Mac")){return dict.get("Mac");}else if(dict.has("DOS")){return dict.get("DOS");}return null;}var FileSpec=/*#__PURE__*/function(){function FileSpec(root,xref){file_spec_classCallCheck(this,FileSpec);if(!(root instanceof Dict)){return;}this.xref=xref;this.root=root;if(root.has("FS")){this.fs=root.get("FS");}this.description=root.has("Desc")?stringToPDFString(root.get("Desc")):"";if(root.has("RF")){warn("Related file specifications are not supported");}this.contentAvailable=true;if(!root.has("EF")){this.contentAvailable=false;warn("Non-embedded file specifications are not supported");}}file_spec_createClass(FileSpec,[{key:"filename",get:function get(){if(!this._filename&&this.root){var filename=pickPlatformItem(this.root)||"unnamed";this._filename=stringToPDFString(filename).replaceAll("\\\\","\\").replaceAll("\\/","/").replaceAll("\\","/");}return this._filename;}},{key:"content",get:function get(){if(!this.contentAvailable){return null;}if(!this.contentRef&&this.root){this.contentRef=pickPlatformItem(this.root.get("EF"));}var content=null;if(this.contentRef){var fileObj=this.xref.fetchIfRef(this.contentRef);if(fileObj instanceof BaseStream){content=fileObj.getBytes();}else{warn("Embedded file specification points to non-existing/invalid content");}}else{warn("Embedded file specification does not have a content");}return content;}},{key:"serializable",get:function get(){return{filename:this.filename,content:this.content};}}]);return FileSpec;}();
;// CONCATENATED MODULE: ./src/core/xml_parser.js
function xml_parser_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)xml_parser_setPrototypeOf(subClass,superClass);}function xml_parser_setPrototypeOf(o,p){xml_parser_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return xml_parser_setPrototypeOf(o,p);}function xml_parser_createSuper(Derived){var hasNativeReflectConstruct=xml_parser_isNativeReflectConstruct();return function _createSuperInternal(){var Super=xml_parser_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=xml_parser_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return xml_parser_possibleConstructorReturn(this,result);};}function xml_parser_possibleConstructorReturn(self,call){if(call&&(xml_parser_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return xml_parser_assertThisInitialized(self);}function xml_parser_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function xml_parser_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function xml_parser_getPrototypeOf(o){xml_parser_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return xml_parser_getPrototypeOf(o);}function xml_parser_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=xml_parser_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function xml_parser_slicedToArray(arr,i){return xml_parser_arrayWithHoles(arr)||xml_parser_iterableToArrayLimit(arr,i)||xml_parser_unsupportedIterableToArray(arr,i)||xml_parser_nonIterableRest();}function xml_parser_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function xml_parser_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return xml_parser_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xml_parser_arrayLikeToArray(o,minLen);}function xml_parser_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function xml_parser_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function xml_parser_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function xml_parser_typeof(o){"@babel/helpers - typeof";return xml_parser_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},xml_parser_typeof(o);}function xml_parser_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function xml_parser_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,xml_parser_toPropertyKey(descriptor.key),descriptor);}}function xml_parser_createClass(Constructor,protoProps,staticProps){if(protoProps)xml_parser_defineProperties(Constructor.prototype,protoProps);if(staticProps)xml_parser_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function xml_parser_toPropertyKey(arg){var key=xml_parser_toPrimitive(arg,"string");return xml_parser_typeof(key)==="symbol"?key:String(key);}function xml_parser_toPrimitive(input,hint){if(xml_parser_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(xml_parser_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var XMLParserErrorCode={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function isWhitespace(s,index){var ch=s[index];return ch===" "||ch==="\n"||ch==="\r"||ch==="\t";}function isWhitespaceString(s){for(var i=0,ii=s.length;i<ii;i++){if(!isWhitespace(s,i)){return false;}}return true;}var XMLParserBase=/*#__PURE__*/function(){function XMLParserBase(){xml_parser_classCallCheck(this,XMLParserBase);}xml_parser_createClass(XMLParserBase,[{key:"_resolveEntities",value:function _resolveEntities(s){var _this=this;return s.replaceAll(/&([^;]+);/g,function(all,entity){if(entity.substring(0,2)==="#x"){return String.fromCodePoint(parseInt(entity.substring(2),16));}else if(entity.substring(0,1)==="#"){return String.fromCodePoint(parseInt(entity.substring(1),10));}switch(entity){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"';case"apos":return"'";}return _this.onResolveEntity(entity);});}},{key:"_parseContent",value:function _parseContent(s,start){var attributes=[];var pos=start;function skipWs(){while(pos<s.length&&isWhitespace(s,pos)){++pos;}}while(pos<s.length&&!isWhitespace(s,pos)&&s[pos]!==">"&&s[pos]!=="/"){++pos;}var name=s.substring(start,pos);skipWs();while(pos<s.length&&s[pos]!==">"&&s[pos]!=="/"&&s[pos]!=="?"){skipWs();var attrName="",attrValue="";while(pos<s.length&&!isWhitespace(s,pos)&&s[pos]!=="="){attrName+=s[pos];++pos;}skipWs();if(s[pos]!=="="){return null;}++pos;skipWs();var attrEndChar=s[pos];if(attrEndChar!=='"'&&attrEndChar!=="'"){return null;}var attrEndIndex=s.indexOf(attrEndChar,++pos);if(attrEndIndex<0){return null;}attrValue=s.substring(pos,attrEndIndex);attributes.push({name:attrName,value:this._resolveEntities(attrValue)});pos=attrEndIndex+1;skipWs();}return{name:name,attributes:attributes,parsed:pos-start};}},{key:"_parseProcessingInstruction",value:function _parseProcessingInstruction(s,start){var pos=start;function skipWs(){while(pos<s.length&&isWhitespace(s,pos)){++pos;}}while(pos<s.length&&!isWhitespace(s,pos)&&s[pos]!==">"&&s[pos]!=="?"&&s[pos]!=="/"){++pos;}var name=s.substring(start,pos);skipWs();var attrStart=pos;while(pos<s.length&&(s[pos]!=="?"||s[pos+1]!==">")){++pos;}var value=s.substring(attrStart,pos);return{name:name,value:value,parsed:pos-start};}},{key:"parseXml",value:function parseXml(s){var i=0;while(i<s.length){var ch=s[i];var j=i;if(ch==="<"){++j;var ch2=s[j];var q=void 0;switch(ch2){case"/":++j;q=s.indexOf(">",j);if(q<0){this.onError(XMLParserErrorCode.UnterminatedElement);return;}this.onEndElement(s.substring(j,q));j=q+1;break;case"?":++j;var pi=this._parseProcessingInstruction(s,j);if(s.substring(j+pi.parsed,j+pi.parsed+2)!=="?>"){this.onError(XMLParserErrorCode.UnterminatedXmlDeclaration);return;}this.onPi(pi.name,pi.value);j+=pi.parsed+2;break;case"!":if(s.substring(j+1,j+3)==="--"){q=s.indexOf("-->",j+3);if(q<0){this.onError(XMLParserErrorCode.UnterminatedComment);return;}this.onComment(s.substring(j+3,q));j=q+3;}else if(s.substring(j+1,j+8)==="[CDATA["){q=s.indexOf("]]>",j+8);if(q<0){this.onError(XMLParserErrorCode.UnterminatedCdat);return;}this.onCdata(s.substring(j+8,q));j=q+3;}else if(s.substring(j+1,j+8)==="DOCTYPE"){var q2=s.indexOf("[",j+8);var complexDoctype=false;q=s.indexOf(">",j+8);if(q<0){this.onError(XMLParserErrorCode.UnterminatedDoctypeDeclaration);return;}if(q2>0&&q>q2){q=s.indexOf("]>",j+8);if(q<0){this.onError(XMLParserErrorCode.UnterminatedDoctypeDeclaration);return;}complexDoctype=true;}var doctypeContent=s.substring(j+8,q+(complexDoctype?1:0));this.onDoctype(doctypeContent);j=q+(complexDoctype?2:1);}else{this.onError(XMLParserErrorCode.MalformedElement);return;}break;default:var content=this._parseContent(s,j);if(content===null){this.onError(XMLParserErrorCode.MalformedElement);return;}var isClosed=false;if(s.substring(j+content.parsed,j+content.parsed+2)==="/>"){isClosed=true;}else if(s.substring(j+content.parsed,j+content.parsed+1)!==">"){this.onError(XMLParserErrorCode.UnterminatedElement);return;}this.onBeginElement(content.name,content.attributes,isClosed);j+=content.parsed+(isClosed?2:1);break;}}else{while(j<s.length&&s[j]!=="<"){j++;}var text=s.substring(i,j);this.onText(this._resolveEntities(text));}i=j;}}},{key:"onResolveEntity",value:function onResolveEntity(name){return"&".concat(name,";");}},{key:"onPi",value:function onPi(name,value){}},{key:"onComment",value:function onComment(text){}},{key:"onCdata",value:function onCdata(text){}},{key:"onDoctype",value:function onDoctype(doctypeContent){}},{key:"onText",value:function onText(text){}},{key:"onBeginElement",value:function onBeginElement(name,attributes,isEmpty){}},{key:"onEndElement",value:function onEndElement(name){}},{key:"onError",value:function onError(code){}}]);return XMLParserBase;}();var SimpleDOMNode=/*#__PURE__*/function(){function SimpleDOMNode(nodeName,nodeValue){xml_parser_classCallCheck(this,SimpleDOMNode);this.nodeName=nodeName;this.nodeValue=nodeValue;Object.defineProperty(this,"parentNode",{value:null,writable:true});}xml_parser_createClass(SimpleDOMNode,[{key:"firstChild",get:function get(){var _this$childNodes;return(_this$childNodes=this.childNodes)===null||_this$childNodes===void 0?void 0:_this$childNodes[0];}},{key:"nextSibling",get:function get(){var childNodes=this.parentNode.childNodes;if(!childNodes){return undefined;}var index=childNodes.indexOf(this);if(index===-1){return undefined;}return childNodes[index+1];}},{key:"textContent",get:function get(){if(!this.childNodes){return this.nodeValue||"";}return this.childNodes.map(function(child){return child.textContent;}).join("");}},{key:"children",get:function get(){return this.childNodes||[];}},{key:"hasChildNodes",value:function hasChildNodes(){var _this$childNodes2;return((_this$childNodes2=this.childNodes)===null||_this$childNodes2===void 0?void 0:_this$childNodes2.length)>0;}},{key:"searchNode",value:function searchNode(paths,pos){if(pos>=paths.length){return this;}var component=paths[pos];if(component.name.startsWith("#")&&pos<paths.length-1){return this.searchNode(paths,pos+1);}var stack=[];var node=this;while(true){var _node$childNodes;if(component.name===node.nodeName){if(component.pos===0){var res=node.searchNode(paths,pos+1);if(res!==null){return res;}}else if(stack.length===0){return null;}else{var _stack$pop=stack.pop(),_stack$pop2=xml_parser_slicedToArray(_stack$pop,1),parent=_stack$pop2[0];var siblingPos=0;var _iterator=xml_parser_createForOfIteratorHelper(parent.childNodes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;if(component.name===child.nodeName){if(siblingPos===component.pos){return child.searchNode(paths,pos+1);}siblingPos++;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return node.searchNode(paths,pos+1);}}if(((_node$childNodes=node.childNodes)===null||_node$childNodes===void 0?void 0:_node$childNodes.length)>0){stack.push([node,0]);node=node.childNodes[0];}else if(stack.length===0){return null;}else{while(stack.length!==0){var _stack$pop3=stack.pop(),_stack$pop4=xml_parser_slicedToArray(_stack$pop3,2),_parent=_stack$pop4[0],currentPos=_stack$pop4[1];var newPos=currentPos+1;if(newPos<_parent.childNodes.length){stack.push([_parent,newPos]);node=_parent.childNodes[newPos];break;}}if(stack.length===0){return null;}}}}},{key:"dump",value:function dump(buffer){if(this.nodeName==="#text"){buffer.push(encodeToXmlString(this.nodeValue));return;}buffer.push("<".concat(this.nodeName));if(this.attributes){var _iterator2=xml_parser_createForOfIteratorHelper(this.attributes),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var attribute=_step2.value;buffer.push(" ".concat(attribute.name,"=\"").concat(encodeToXmlString(attribute.value),"\""));}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}if(this.hasChildNodes()){buffer.push(">");var _iterator3=xml_parser_createForOfIteratorHelper(this.childNodes),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var child=_step3.value;child.dump(buffer);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}buffer.push("</".concat(this.nodeName,">"));}else if(this.nodeValue){buffer.push(">".concat(encodeToXmlString(this.nodeValue),"</").concat(this.nodeName,">"));}else{buffer.push("/>");}}}]);return SimpleDOMNode;}();var SimpleXMLParser=/*#__PURE__*/function(_XMLParserBase){xml_parser_inherits(SimpleXMLParser,_XMLParserBase);var _super=xml_parser_createSuper(SimpleXMLParser);function SimpleXMLParser(_ref){var _this2;var _ref$hasAttributes=_ref.hasAttributes,hasAttributes=_ref$hasAttributes===void 0?false:_ref$hasAttributes,_ref$lowerCaseName=_ref.lowerCaseName,lowerCaseName=_ref$lowerCaseName===void 0?false:_ref$lowerCaseName;xml_parser_classCallCheck(this,SimpleXMLParser);_this2=_super.call(this);_this2._currentFragment=null;_this2._stack=null;_this2._errorCode=XMLParserErrorCode.NoError;_this2._hasAttributes=hasAttributes;_this2._lowerCaseName=lowerCaseName;return _this2;}xml_parser_createClass(SimpleXMLParser,[{key:"parseFromString",value:function parseFromString(data){this._currentFragment=[];this._stack=[];this._errorCode=XMLParserErrorCode.NoError;this.parseXml(data);if(this._errorCode!==XMLParserErrorCode.NoError){return undefined;}var _this$_currentFragmen=xml_parser_slicedToArray(this._currentFragment,1),documentElement=_this$_currentFragmen[0];if(!documentElement){return undefined;}return{documentElement:documentElement};}},{key:"onText",value:function onText(text){if(isWhitespaceString(text)){return;}var node=new SimpleDOMNode("#text",text);this._currentFragment.push(node);}},{key:"onCdata",value:function onCdata(text){var node=new SimpleDOMNode("#text",text);this._currentFragment.push(node);}},{key:"onBeginElement",value:function onBeginElement(name,attributes,isEmpty){if(this._lowerCaseName){name=name.toLowerCase();}var node=new SimpleDOMNode(name);node.childNodes=[];if(this._hasAttributes){node.attributes=attributes;}this._currentFragment.push(node);if(isEmpty){return;}this._stack.push(this._currentFragment);this._currentFragment=node.childNodes;}},{key:"onEndElement",value:function onEndElement(name){this._currentFragment=this._stack.pop()||[];var lastElement=this._currentFragment.at(-1);if(!lastElement){return null;}var _iterator4=xml_parser_createForOfIteratorHelper(lastElement.childNodes),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var childNode=_step4.value;childNode.parentNode=lastElement;}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return lastElement;}},{key:"onError",value:function onError(code){this._errorCode=code;}}]);return SimpleXMLParser;}(XMLParserBase);
;// CONCATENATED MODULE: ./src/core/metadata_parser.js
function metadata_parser_typeof(o){"@babel/helpers - typeof";return metadata_parser_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},metadata_parser_typeof(o);}function metadata_parser_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=metadata_parser_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function metadata_parser_slicedToArray(arr,i){return metadata_parser_arrayWithHoles(arr)||metadata_parser_iterableToArrayLimit(arr,i)||metadata_parser_unsupportedIterableToArray(arr,i)||metadata_parser_nonIterableRest();}function metadata_parser_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function metadata_parser_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return metadata_parser_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return metadata_parser_arrayLikeToArray(o,minLen);}function metadata_parser_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function metadata_parser_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function metadata_parser_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function metadata_parser_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function metadata_parser_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,metadata_parser_toPropertyKey(descriptor.key),descriptor);}}function metadata_parser_createClass(Constructor,protoProps,staticProps){if(protoProps)metadata_parser_defineProperties(Constructor.prototype,protoProps);if(staticProps)metadata_parser_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function metadata_parser_toPropertyKey(arg){var key=metadata_parser_toPrimitive(arg,"string");return metadata_parser_typeof(key)==="symbol"?key:String(key);}function metadata_parser_toPrimitive(input,hint){if(metadata_parser_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(metadata_parser_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var MetadataParser=/*#__PURE__*/function(){function MetadataParser(data){metadata_parser_classCallCheck(this,MetadataParser);data=this._repair(data);var parser=new SimpleXMLParser({lowerCaseName:true});var xmlDocument=parser.parseFromString(data);this._metadataMap=new Map();this._data=data;if(xmlDocument){this._parse(xmlDocument);}}metadata_parser_createClass(MetadataParser,[{key:"_repair",value:function _repair(data){return data.replace(/^[^<]+/,"").replaceAll(/>\\376\\377([^<]+)/g,function(all,codes){var bytes=codes.replaceAll(/\\([0-3])([0-7])([0-7])/g,function(code,d1,d2,d3){return String.fromCharCode(d1*64+d2*8+d3*1);}).replaceAll(/&(amp|apos|gt|lt|quot);/g,function(str,name){switch(name){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"';}throw new Error("_repair: ".concat(name," isn't defined."));});var charBuf=[">"];for(var i=0,ii=bytes.length;i<ii;i+=2){var code=bytes.charCodeAt(i)*256+bytes.charCodeAt(i+1);if(code>=32&&code<127&&code!==60&&code!==62&&code!==38){charBuf.push(String.fromCharCode(code));}else{charBuf.push("&#x"+(0x10000+code).toString(16).substring(1)+";");}}return charBuf.join("");});}},{key:"_getSequence",value:function _getSequence(entry){var name=entry.nodeName;if(name!=="rdf:bag"&&name!=="rdf:seq"&&name!=="rdf:alt"){return null;}return entry.childNodes.filter(function(node){return node.nodeName==="rdf:li";});}},{key:"_parseArray",value:function _parseArray(entry){if(!entry.hasChildNodes()){return;}var _entry$childNodes=metadata_parser_slicedToArray(entry.childNodes,1),seqNode=_entry$childNodes[0];var sequence=this._getSequence(seqNode)||[];this._metadataMap.set(entry.nodeName,sequence.map(function(node){return node.textContent.trim();}));}},{key:"_parse",value:function _parse(xmlDocument){var rdf=xmlDocument.documentElement;if(rdf.nodeName!=="rdf:rdf"){rdf=rdf.firstChild;while(rdf&&rdf.nodeName!=="rdf:rdf"){rdf=rdf.nextSibling;}}if(!rdf||rdf.nodeName!=="rdf:rdf"||!rdf.hasChildNodes()){return;}var _iterator=metadata_parser_createForOfIteratorHelper(rdf.childNodes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var desc=_step.value;if(desc.nodeName!=="rdf:description"){continue;}var _iterator2=metadata_parser_createForOfIteratorHelper(desc.childNodes),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var entry=_step2.value;var name=entry.nodeName;switch(name){case"#text":continue;case"dc:creator":case"dc:subject":this._parseArray(entry);continue;}this._metadataMap.set(name,entry.textContent.trim());}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:"serializable",get:function get(){return{parsedData:this._metadataMap,rawData:this._data};}}]);return MetadataParser;}();
;// CONCATENATED MODULE: ./src/core/decrypt_stream.js
function decrypt_stream_typeof(o){"@babel/helpers - typeof";return decrypt_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},decrypt_stream_typeof(o);}function decrypt_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function decrypt_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,decrypt_stream_toPropertyKey(descriptor.key),descriptor);}}function decrypt_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)decrypt_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)decrypt_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function decrypt_stream_toPropertyKey(arg){var key=decrypt_stream_toPrimitive(arg,"string");return decrypt_stream_typeof(key)==="symbol"?key:String(key);}function decrypt_stream_toPrimitive(input,hint){if(decrypt_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(decrypt_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function decrypt_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)decrypt_stream_setPrototypeOf(subClass,superClass);}function decrypt_stream_setPrototypeOf(o,p){decrypt_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return decrypt_stream_setPrototypeOf(o,p);}function decrypt_stream_createSuper(Derived){var hasNativeReflectConstruct=decrypt_stream_isNativeReflectConstruct();return function _createSuperInternal(){var Super=decrypt_stream_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=decrypt_stream_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return decrypt_stream_possibleConstructorReturn(this,result);};}function decrypt_stream_possibleConstructorReturn(self,call){if(call&&(decrypt_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return decrypt_stream_assertThisInitialized(self);}function decrypt_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function decrypt_stream_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function decrypt_stream_getPrototypeOf(o){decrypt_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return decrypt_stream_getPrototypeOf(o);}var chunkSize=512;var DecryptStream=/*#__PURE__*/function(_DecodeStream){decrypt_stream_inherits(DecryptStream,_DecodeStream);var _super=decrypt_stream_createSuper(DecryptStream);function DecryptStream(str,maybeLength,decrypt){var _this;decrypt_stream_classCallCheck(this,DecryptStream);_this=_super.call(this,maybeLength);_this.str=str;_this.dict=str.dict;_this.decrypt=decrypt;_this.nextChunk=null;_this.initialized=false;return _this;}decrypt_stream_createClass(DecryptStream,[{key:"readBlock",value:function readBlock(){var _this$nextChunk;var chunk;if(this.initialized){chunk=this.nextChunk;}else{chunk=this.str.getBytes(chunkSize);this.initialized=true;}if(!chunk||chunk.length===0){this.eof=true;return;}this.nextChunk=this.str.getBytes(chunkSize);var hasMoreData=((_this$nextChunk=this.nextChunk)===null||_this$nextChunk===void 0?void 0:_this$nextChunk.length)>0;var decrypt=this.decrypt;chunk=decrypt(chunk,!hasMoreData);var bufferLength=this.bufferLength,newLength=bufferLength+chunk.length,buffer=this.ensureBuffer(newLength);buffer.set(chunk,bufferLength);this.bufferLength=newLength;}}]);return DecryptStream;}(DecodeStream);
;// CONCATENATED MODULE: ./src/core/crypto.js
var crypto_class;function crypto_classPrivateMethodInitSpec(obj,privateSet){crypto_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function crypto_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function crypto_classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function crypto_classStaticPrivateFieldSpecGet(receiver,classConstructor,descriptor){crypto_classCheckPrivateStaticAccess(receiver,classConstructor);crypto_classCheckPrivateStaticFieldDescriptor(descriptor,"get");return crypto_classApplyDescriptorGet(receiver,descriptor);}function crypto_classCheckPrivateStaticFieldDescriptor(descriptor,action){if(descriptor===undefined){throw new TypeError("attempted to "+action+" private static field before its declaration");}}function crypto_classCheckPrivateStaticAccess(receiver,classConstructor){if(receiver!==classConstructor){throw new TypeError("Private static access of wrong provenance");}}function crypto_classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}function crypto_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)crypto_setPrototypeOf(subClass,superClass);}function crypto_setPrototypeOf(o,p){crypto_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return crypto_setPrototypeOf(o,p);}function crypto_createSuper(Derived){var hasNativeReflectConstruct=crypto_isNativeReflectConstruct();return function _createSuperInternal(){var Super=crypto_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=crypto_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return crypto_possibleConstructorReturn(this,result);};}function crypto_possibleConstructorReturn(self,call){if(call&&(crypto_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return crypto_assertThisInitialized(self);}function crypto_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function crypto_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function crypto_getPrototypeOf(o){crypto_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return crypto_getPrototypeOf(o);}function crypto_typeof(o){"@babel/helpers - typeof";return crypto_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},crypto_typeof(o);}function crypto_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function crypto_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,crypto_toPropertyKey(descriptor.key),descriptor);}}function crypto_createClass(Constructor,protoProps,staticProps){if(protoProps)crypto_defineProperties(Constructor.prototype,protoProps);if(staticProps)crypto_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function crypto_toPropertyKey(arg){var key=crypto_toPrimitive(arg,"string");return crypto_typeof(key)==="symbol"?key:String(key);}function crypto_toPrimitive(input,hint){if(crypto_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(crypto_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var ARCFourCipher=/*#__PURE__*/function(){function ARCFourCipher(key){crypto_classCallCheck(this,ARCFourCipher);this.a=0;this.b=0;var s=new Uint8Array(256);var keyLength=key.length;for(var i=0;i<256;++i){s[i]=i;}for(var _i=0,j=0;_i<256;++_i){var tmp=s[_i];j=j+tmp+key[_i%keyLength]&0xff;s[_i]=s[j];s[j]=tmp;}this.s=s;}crypto_createClass(ARCFourCipher,[{key:"encryptBlock",value:function encryptBlock(data){var a=this.a,b=this.b;var s=this.s;var n=data.length;var output=new Uint8Array(n);for(var i=0;i<n;++i){a=a+1&0xff;var tmp=s[a];b=b+tmp&0xff;var tmp2=s[b];s[a]=tmp2;s[b]=tmp;output[i]=data[i]^s[tmp+tmp2&0xff];}this.a=a;this.b=b;return output;}},{key:"decryptBlock",value:function decryptBlock(data){return this.encryptBlock(data);}},{key:"encrypt",value:function encrypt(data){return this.encryptBlock(data);}}]);return ARCFourCipher;}();var calculateMD5=function calculateMD5Closure(){var r=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]);var k=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);function hash(data,offset,length){var h0=1732584193,h1=-271733879,h2=-1732584194,h3=271733878;var paddedLength=length+72&~63;var padded=new Uint8Array(paddedLength);var i,j;for(i=0;i<length;++i){padded[i]=data[offset++];}padded[i++]=0x80;var n=paddedLength-8;while(i<n){padded[i++]=0;}padded[i++]=length<<3&0xff;padded[i++]=length>>5&0xff;padded[i++]=length>>13&0xff;padded[i++]=length>>21&0xff;padded[i++]=length>>>29&0xff;padded[i++]=0;padded[i++]=0;padded[i++]=0;var w=new Int32Array(16);for(i=0;i<paddedLength;){for(j=0;j<16;++j,i+=4){w[j]=padded[i]|padded[i+1]<<8|padded[i+2]<<16|padded[i+3]<<24;}var a=h0,b=h1,c=h2,d=h3,f=void 0,g=void 0;for(j=0;j<64;++j){if(j<16){f=b&c|~b&d;g=j;}else if(j<32){f=d&b|~d&c;g=5*j+1&15;}else if(j<48){f=b^c^d;g=3*j+5&15;}else{f=c^(b|~d);g=7*j&15;}var tmp=d,rotateArg=a+f+k[j]+w[g]|0,rotate=r[j];d=c;c=b;b=b+(rotateArg<<rotate|rotateArg>>>32-rotate)|0;a=tmp;}h0=h0+a|0;h1=h1+b|0;h2=h2+c|0;h3=h3+d|0;}return new Uint8Array([h0&0xFF,h0>>8&0xFF,h0>>16&0xFF,h0>>>24&0xFF,h1&0xFF,h1>>8&0xFF,h1>>16&0xFF,h1>>>24&0xFF,h2&0xFF,h2>>8&0xFF,h2>>16&0xFF,h2>>>24&0xFF,h3&0xFF,h3>>8&0xFF,h3>>16&0xFF,h3>>>24&0xFF]);}return hash;}();var Word64=/*#__PURE__*/function(){function Word64(highInteger,lowInteger){crypto_classCallCheck(this,Word64);this.high=highInteger|0;this.low=lowInteger|0;}crypto_createClass(Word64,[{key:"and",value:function and(word){this.high&=word.high;this.low&=word.low;}},{key:"xor",value:function xor(word){this.high^=word.high;this.low^=word.low;}},{key:"or",value:function or(word){this.high|=word.high;this.low|=word.low;}},{key:"shiftRight",value:function shiftRight(places){if(places>=32){this.low=this.high>>>places-32|0;this.high=0;}else{this.low=this.low>>>places|this.high<<32-places;this.high=this.high>>>places|0;}}},{key:"shiftLeft",value:function shiftLeft(places){if(places>=32){this.high=this.low<<places-32;this.low=0;}else{this.high=this.high<<places|this.low>>>32-places;this.low<<=places;}}},{key:"rotateRight",value:function rotateRight(places){var low,high;if(places&32){high=this.low;low=this.high;}else{low=this.low;high=this.high;}places&=31;this.low=low>>>places|high<<32-places;this.high=high>>>places|low<<32-places;}},{key:"not",value:function not(){this.high=~this.high;this.low=~this.low;}},{key:"add",value:function add(word){var lowAdd=(this.low>>>0)+(word.low>>>0);var highAdd=(this.high>>>0)+(word.high>>>0);if(lowAdd>0xffffffff){highAdd+=1;}this.low=lowAdd|0;this.high=highAdd|0;}},{key:"copyTo",value:function copyTo(bytes,offset){bytes[offset]=this.high>>>24&0xff;bytes[offset+1]=this.high>>16&0xff;bytes[offset+2]=this.high>>8&0xff;bytes[offset+3]=this.high&0xff;bytes[offset+4]=this.low>>>24&0xff;bytes[offset+5]=this.low>>16&0xff;bytes[offset+6]=this.low>>8&0xff;bytes[offset+7]=this.low&0xff;}},{key:"assign",value:function assign(word){this.high=word.high;this.low=word.low;}}]);return Word64;}();var calculateSHA256=function calculateSHA256Closure(){function rotr(x,n){return x>>>n|x<<32-n;}function ch(x,y,z){return x&y^~x&z;}function maj(x,y,z){return x&y^x&z^y&z;}function sigma(x){return rotr(x,2)^rotr(x,13)^rotr(x,22);}function sigmaPrime(x){return rotr(x,6)^rotr(x,11)^rotr(x,25);}function littleSigma(x){return rotr(x,7)^rotr(x,18)^x>>>3;}function littleSigmaPrime(x){return rotr(x,17)^rotr(x,19)^x>>>10;}var k=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];function hash(data,offset,length){var h0=0x6a09e667,h1=0xbb67ae85,h2=0x3c6ef372,h3=0xa54ff53a,h4=0x510e527f,h5=0x9b05688c,h6=0x1f83d9ab,h7=0x5be0cd19;var paddedLength=Math.ceil((length+9)/64)*64;var padded=new Uint8Array(paddedLength);var i,j;for(i=0;i<length;++i){padded[i]=data[offset++];}padded[i++]=0x80;var n=paddedLength-8;while(i<n){padded[i++]=0;}padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=length>>>29&0xff;padded[i++]=length>>21&0xff;padded[i++]=length>>13&0xff;padded[i++]=length>>5&0xff;padded[i++]=length<<3&0xff;var w=new Uint32Array(64);for(i=0;i<paddedLength;){for(j=0;j<16;++j){w[j]=padded[i]<<24|padded[i+1]<<16|padded[i+2]<<8|padded[i+3];i+=4;}for(j=16;j<64;++j){w[j]=littleSigmaPrime(w[j-2])+w[j-7]+littleSigma(w[j-15])+w[j-16]|0;}var a=h0,b=h1,c=h2,d=h3,e=h4,f=h5,g=h6,h=h7,t1=void 0,t2=void 0;for(j=0;j<64;++j){t1=h+sigmaPrime(e)+ch(e,f,g)+k[j]+w[j];t2=sigma(a)+maj(a,b,c);h=g;g=f;f=e;e=d+t1|0;d=c;c=b;b=a;a=t1+t2|0;}h0=h0+a|0;h1=h1+b|0;h2=h2+c|0;h3=h3+d|0;h4=h4+e|0;h5=h5+f|0;h6=h6+g|0;h7=h7+h|0;}return new Uint8Array([h0>>24&0xFF,h0>>16&0xFF,h0>>8&0xFF,h0&0xFF,h1>>24&0xFF,h1>>16&0xFF,h1>>8&0xFF,h1&0xFF,h2>>24&0xFF,h2>>16&0xFF,h2>>8&0xFF,h2&0xFF,h3>>24&0xFF,h3>>16&0xFF,h3>>8&0xFF,h3&0xFF,h4>>24&0xFF,h4>>16&0xFF,h4>>8&0xFF,h4&0xFF,h5>>24&0xFF,h5>>16&0xFF,h5>>8&0xFF,h5&0xFF,h6>>24&0xFF,h6>>16&0xFF,h6>>8&0xFF,h6&0xFF,h7>>24&0xFF,h7>>16&0xFF,h7>>8&0xFF,h7&0xFF]);}return hash;}();var calculateSHA512=function calculateSHA512Closure(){function ch(result,x,y,z,tmp){result.assign(x);result.and(y);tmp.assign(x);tmp.not();tmp.and(z);result.xor(tmp);}function maj(result,x,y,z,tmp){result.assign(x);result.and(y);tmp.assign(x);tmp.and(z);result.xor(tmp);tmp.assign(y);tmp.and(z);result.xor(tmp);}function sigma(result,x,tmp){result.assign(x);result.rotateRight(28);tmp.assign(x);tmp.rotateRight(34);result.xor(tmp);tmp.assign(x);tmp.rotateRight(39);result.xor(tmp);}function sigmaPrime(result,x,tmp){result.assign(x);result.rotateRight(14);tmp.assign(x);tmp.rotateRight(18);result.xor(tmp);tmp.assign(x);tmp.rotateRight(41);result.xor(tmp);}function littleSigma(result,x,tmp){result.assign(x);result.rotateRight(1);tmp.assign(x);tmp.rotateRight(8);result.xor(tmp);tmp.assign(x);tmp.shiftRight(7);result.xor(tmp);}function littleSigmaPrime(result,x,tmp){result.assign(x);result.rotateRight(19);tmp.assign(x);tmp.rotateRight(61);result.xor(tmp);tmp.assign(x);tmp.shiftRight(6);result.xor(tmp);}var k=[new Word64(0x428a2f98,0xd728ae22),new Word64(0x71374491,0x23ef65cd),new Word64(0xb5c0fbcf,0xec4d3b2f),new Word64(0xe9b5dba5,0x8189dbbc),new Word64(0x3956c25b,0xf348b538),new Word64(0x59f111f1,0xb605d019),new Word64(0x923f82a4,0xaf194f9b),new Word64(0xab1c5ed5,0xda6d8118),new Word64(0xd807aa98,0xa3030242),new Word64(0x12835b01,0x45706fbe),new Word64(0x243185be,0x4ee4b28c),new Word64(0x550c7dc3,0xd5ffb4e2),new Word64(0x72be5d74,0xf27b896f),new Word64(0x80deb1fe,0x3b1696b1),new Word64(0x9bdc06a7,0x25c71235),new Word64(0xc19bf174,0xcf692694),new Word64(0xe49b69c1,0x9ef14ad2),new Word64(0xefbe4786,0x384f25e3),new Word64(0x0fc19dc6,0x8b8cd5b5),new Word64(0x240ca1cc,0x77ac9c65),new Word64(0x2de92c6f,0x592b0275),new Word64(0x4a7484aa,0x6ea6e483),new Word64(0x5cb0a9dc,0xbd41fbd4),new Word64(0x76f988da,0x831153b5),new Word64(0x983e5152,0xee66dfab),new Word64(0xa831c66d,0x2db43210),new Word64(0xb00327c8,0x98fb213f),new Word64(0xbf597fc7,0xbeef0ee4),new Word64(0xc6e00bf3,0x3da88fc2),new Word64(0xd5a79147,0x930aa725),new Word64(0x06ca6351,0xe003826f),new Word64(0x14292967,0x0a0e6e70),new Word64(0x27b70a85,0x46d22ffc),new Word64(0x2e1b2138,0x5c26c926),new Word64(0x4d2c6dfc,0x5ac42aed),new Word64(0x53380d13,0x9d95b3df),new Word64(0x650a7354,0x8baf63de),new Word64(0x766a0abb,0x3c77b2a8),new Word64(0x81c2c92e,0x47edaee6),new Word64(0x92722c85,0x1482353b),new Word64(0xa2bfe8a1,0x4cf10364),new Word64(0xa81a664b,0xbc423001),new Word64(0xc24b8b70,0xd0f89791),new Word64(0xc76c51a3,0x0654be30),new Word64(0xd192e819,0xd6ef5218),new Word64(0xd6990624,0x5565a910),new Word64(0xf40e3585,0x5771202a),new Word64(0x106aa070,0x32bbd1b8),new Word64(0x19a4c116,0xb8d2d0c8),new Word64(0x1e376c08,0x5141ab53),new Word64(0x2748774c,0xdf8eeb99),new Word64(0x34b0bcb5,0xe19b48a8),new Word64(0x391c0cb3,0xc5c95a63),new Word64(0x4ed8aa4a,0xe3418acb),new Word64(0x5b9cca4f,0x7763e373),new Word64(0x682e6ff3,0xd6b2b8a3),new Word64(0x748f82ee,0x5defb2fc),new Word64(0x78a5636f,0x43172f60),new Word64(0x84c87814,0xa1f0ab72),new Word64(0x8cc70208,0x1a6439ec),new Word64(0x90befffa,0x23631e28),new Word64(0xa4506ceb,0xde82bde9),new Word64(0xbef9a3f7,0xb2c67915),new Word64(0xc67178f2,0xe372532b),new Word64(0xca273ece,0xea26619c),new Word64(0xd186b8c7,0x21c0c207),new Word64(0xeada7dd6,0xcde0eb1e),new Word64(0xf57d4f7f,0xee6ed178),new Word64(0x06f067aa,0x72176fba),new Word64(0x0a637dc5,0xa2c898a6),new Word64(0x113f9804,0xbef90dae),new Word64(0x1b710b35,0x131c471b),new Word64(0x28db77f5,0x23047d84),new Word64(0x32caab7b,0x40c72493),new Word64(0x3c9ebe0a,0x15c9bebc),new Word64(0x431d67c4,0x9c100d4c),new Word64(0x4cc5d4be,0xcb3e42b6),new Word64(0x597f299c,0xfc657e2a),new Word64(0x5fcb6fab,0x3ad6faec),new Word64(0x6c44198c,0x4a475817)];function hash(data,offset,length){var mode384=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var h0,h1,h2,h3,h4,h5,h6,h7;if(!mode384){h0=new Word64(0x6a09e667,0xf3bcc908);h1=new Word64(0xbb67ae85,0x84caa73b);h2=new Word64(0x3c6ef372,0xfe94f82b);h3=new Word64(0xa54ff53a,0x5f1d36f1);h4=new Word64(0x510e527f,0xade682d1);h5=new Word64(0x9b05688c,0x2b3e6c1f);h6=new Word64(0x1f83d9ab,0xfb41bd6b);h7=new Word64(0x5be0cd19,0x137e2179);}else{h0=new Word64(0xcbbb9d5d,0xc1059ed8);h1=new Word64(0x629a292a,0x367cd507);h2=new Word64(0x9159015a,0x3070dd17);h3=new Word64(0x152fecd8,0xf70e5939);h4=new Word64(0x67332667,0xffc00b31);h5=new Word64(0x8eb44a87,0x68581511);h6=new Word64(0xdb0c2e0d,0x64f98fa7);h7=new Word64(0x47b5481d,0xbefa4fa4);}var paddedLength=Math.ceil((length+17)/128)*128;var padded=new Uint8Array(paddedLength);var i,j;for(i=0;i<length;++i){padded[i]=data[offset++];}padded[i++]=0x80;var n=paddedLength-16;while(i<n){padded[i++]=0;}padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=0;padded[i++]=length>>>29&0xff;padded[i++]=length>>21&0xff;padded[i++]=length>>13&0xff;padded[i++]=length>>5&0xff;padded[i++]=length<<3&0xff;var w=new Array(80);for(i=0;i<80;i++){w[i]=new Word64(0,0);}var a=new Word64(0,0),b=new Word64(0,0),c=new Word64(0,0);var d=new Word64(0,0),e=new Word64(0,0),f=new Word64(0,0);var g=new Word64(0,0),h=new Word64(0,0);var t1=new Word64(0,0),t2=new Word64(0,0);var tmp1=new Word64(0,0),tmp2=new Word64(0,0);var tmp3;for(i=0;i<paddedLength;){for(j=0;j<16;++j){w[j].high=padded[i]<<24|padded[i+1]<<16|padded[i+2]<<8|padded[i+3];w[j].low=padded[i+4]<<24|padded[i+5]<<16|padded[i+6]<<8|padded[i+7];i+=8;}for(j=16;j<80;++j){tmp3=w[j];littleSigmaPrime(tmp3,w[j-2],tmp2);tmp3.add(w[j-7]);littleSigma(tmp1,w[j-15],tmp2);tmp3.add(tmp1);tmp3.add(w[j-16]);}a.assign(h0);b.assign(h1);c.assign(h2);d.assign(h3);e.assign(h4);f.assign(h5);g.assign(h6);h.assign(h7);for(j=0;j<80;++j){t1.assign(h);sigmaPrime(tmp1,e,tmp2);t1.add(tmp1);ch(tmp1,e,f,g,tmp2);t1.add(tmp1);t1.add(k[j]);t1.add(w[j]);sigma(t2,a,tmp2);maj(tmp1,a,b,c,tmp2);t2.add(tmp1);tmp3=h;h=g;g=f;f=e;d.add(t1);e=d;d=c;c=b;b=a;tmp3.assign(t1);tmp3.add(t2);a=tmp3;}h0.add(a);h1.add(b);h2.add(c);h3.add(d);h4.add(e);h5.add(f);h6.add(g);h7.add(h);}var result;if(!mode384){result=new Uint8Array(64);h0.copyTo(result,0);h1.copyTo(result,8);h2.copyTo(result,16);h3.copyTo(result,24);h4.copyTo(result,32);h5.copyTo(result,40);h6.copyTo(result,48);h7.copyTo(result,56);}else{result=new Uint8Array(48);h0.copyTo(result,0);h1.copyTo(result,8);h2.copyTo(result,16);h3.copyTo(result,24);h4.copyTo(result,32);h5.copyTo(result,40);}return result;}return hash;}();function calculateSHA384(data,offset,length){return calculateSHA512(data,offset,length,true);}var NullCipher=/*#__PURE__*/function(){function NullCipher(){crypto_classCallCheck(this,NullCipher);}crypto_createClass(NullCipher,[{key:"decryptBlock",value:function decryptBlock(data){return data;}},{key:"encrypt",value:function encrypt(data){return data;}}]);return NullCipher;}();var AESBaseCipher=/*#__PURE__*/function(){function AESBaseCipher(){crypto_classCallCheck(this,AESBaseCipher);if(this.constructor===AESBaseCipher){unreachable("Cannot initialize AESBaseCipher.");}this._s=new Uint8Array([0x63,0x7c,0x77,0x7b,0xf2,0x6b,0x6f,0xc5,0x30,0x01,0x67,0x2b,0xfe,0xd7,0xab,0x76,0xca,0x82,0xc9,0x7d,0xfa,0x59,0x47,0xf0,0xad,0xd4,0xa2,0xaf,0x9c,0xa4,0x72,0xc0,0xb7,0xfd,0x93,0x26,0x36,0x3f,0xf7,0xcc,0x34,0xa5,0xe5,0xf1,0x71,0xd8,0x31,0x15,0x04,0xc7,0x23,0xc3,0x18,0x96,0x05,0x9a,0x07,0x12,0x80,0xe2,0xeb,0x27,0xb2,0x75,0x09,0x83,0x2c,0x1a,0x1b,0x6e,0x5a,0xa0,0x52,0x3b,0xd6,0xb3,0x29,0xe3,0x2f,0x84,0x53,0xd1,0x00,0xed,0x20,0xfc,0xb1,0x5b,0x6a,0xcb,0xbe,0x39,0x4a,0x4c,0x58,0xcf,0xd0,0xef,0xaa,0xfb,0x43,0x4d,0x33,0x85,0x45,0xf9,0x02,0x7f,0x50,0x3c,0x9f,0xa8,0x51,0xa3,0x40,0x8f,0x92,0x9d,0x38,0xf5,0xbc,0xb6,0xda,0x21,0x10,0xff,0xf3,0xd2,0xcd,0x0c,0x13,0xec,0x5f,0x97,0x44,0x17,0xc4,0xa7,0x7e,0x3d,0x64,0x5d,0x19,0x73,0x60,0x81,0x4f,0xdc,0x22,0x2a,0x90,0x88,0x46,0xee,0xb8,0x14,0xde,0x5e,0x0b,0xdb,0xe0,0x32,0x3a,0x0a,0x49,0x06,0x24,0x5c,0xc2,0xd3,0xac,0x62,0x91,0x95,0xe4,0x79,0xe7,0xc8,0x37,0x6d,0x8d,0xd5,0x4e,0xa9,0x6c,0x56,0xf4,0xea,0x65,0x7a,0xae,0x08,0xba,0x78,0x25,0x2e,0x1c,0xa6,0xb4,0xc6,0xe8,0xdd,0x74,0x1f,0x4b,0xbd,0x8b,0x8a,0x70,0x3e,0xb5,0x66,0x48,0x03,0xf6,0x0e,0x61,0x35,0x57,0xb9,0x86,0xc1,0x1d,0x9e,0xe1,0xf8,0x98,0x11,0x69,0xd9,0x8e,0x94,0x9b,0x1e,0x87,0xe9,0xce,0x55,0x28,0xdf,0x8c,0xa1,0x89,0x0d,0xbf,0xe6,0x42,0x68,0x41,0x99,0x2d,0x0f,0xb0,0x54,0xbb,0x16]);this._inv_s=new Uint8Array([0x52,0x09,0x6a,0xd5,0x30,0x36,0xa5,0x38,0xbf,0x40,0xa3,0x9e,0x81,0xf3,0xd7,0xfb,0x7c,0xe3,0x39,0x82,0x9b,0x2f,0xff,0x87,0x34,0x8e,0x43,0x44,0xc4,0xde,0xe9,0xcb,0x54,0x7b,0x94,0x32,0xa6,0xc2,0x23,0x3d,0xee,0x4c,0x95,0x0b,0x42,0xfa,0xc3,0x4e,0x08,0x2e,0xa1,0x66,0x28,0xd9,0x24,0xb2,0x76,0x5b,0xa2,0x49,0x6d,0x8b,0xd1,0x25,0x72,0xf8,0xf6,0x64,0x86,0x68,0x98,0x16,0xd4,0xa4,0x5c,0xcc,0x5d,0x65,0xb6,0x92,0x6c,0x70,0x48,0x50,0xfd,0xed,0xb9,0xda,0x5e,0x15,0x46,0x57,0xa7,0x8d,0x9d,0x84,0x90,0xd8,0xab,0x00,0x8c,0xbc,0xd3,0x0a,0xf7,0xe4,0x58,0x05,0xb8,0xb3,0x45,0x06,0xd0,0x2c,0x1e,0x8f,0xca,0x3f,0x0f,0x02,0xc1,0xaf,0xbd,0x03,0x01,0x13,0x8a,0x6b,0x3a,0x91,0x11,0x41,0x4f,0x67,0xdc,0xea,0x97,0xf2,0xcf,0xce,0xf0,0xb4,0xe6,0x73,0x96,0xac,0x74,0x22,0xe7,0xad,0x35,0x85,0xe2,0xf9,0x37,0xe8,0x1c,0x75,0xdf,0x6e,0x47,0xf1,0x1a,0x71,0x1d,0x29,0xc5,0x89,0x6f,0xb7,0x62,0x0e,0xaa,0x18,0xbe,0x1b,0xfc,0x56,0x3e,0x4b,0xc6,0xd2,0x79,0x20,0x9a,0xdb,0xc0,0xfe,0x78,0xcd,0x5a,0xf4,0x1f,0xdd,0xa8,0x33,0x88,0x07,0xc7,0x31,0xb1,0x12,0x10,0x59,0x27,0x80,0xec,0x5f,0x60,0x51,0x7f,0xa9,0x19,0xb5,0x4a,0x0d,0x2d,0xe5,0x7a,0x9f,0x93,0xc9,0x9c,0xef,0xa0,0xe0,0x3b,0x4d,0xae,0x2a,0xf5,0xb0,0xc8,0xeb,0xbb,0x3c,0x83,0x53,0x99,0x61,0x17,0x2b,0x04,0x7e,0xba,0x77,0xd6,0x26,0xe1,0x69,0x14,0x63,0x55,0x21,0x0c,0x7d]);this._mix=new Uint32Array([0x00000000,0x0e090d0b,0x1c121a16,0x121b171d,0x3824342c,0x362d3927,0x24362e3a,0x2a3f2331,0x70486858,0x7e416553,0x6c5a724e,0x62537f45,0x486c5c74,0x4665517f,0x547e4662,0x5a774b69,0xe090d0b0,0xee99ddbb,0xfc82caa6,0xf28bc7ad,0xd8b4e49c,0xd6bde997,0xc4a6fe8a,0xcaaff381,0x90d8b8e8,0x9ed1b5e3,0x8ccaa2fe,0x82c3aff5,0xa8fc8cc4,0xa6f581cf,0xb4ee96d2,0xbae79bd9,0xdb3bbb7b,0xd532b670,0xc729a16d,0xc920ac66,0xe31f8f57,0xed16825c,0xff0d9541,0xf104984a,0xab73d323,0xa57ade28,0xb761c935,0xb968c43e,0x9357e70f,0x9d5eea04,0x8f45fd19,0x814cf012,0x3bab6bcb,0x35a266c0,0x27b971dd,0x29b07cd6,0x038f5fe7,0x0d8652ec,0x1f9d45f1,0x119448fa,0x4be30393,0x45ea0e98,0x57f11985,0x59f8148e,0x73c737bf,0x7dce3ab4,0x6fd52da9,0x61dc20a2,0xad766df6,0xa37f60fd,0xb16477e0,0xbf6d7aeb,0x955259da,0x9b5b54d1,0x894043cc,0x87494ec7,0xdd3e05ae,0xd33708a5,0xc12c1fb8,0xcf2512b3,0xe51a3182,0xeb133c89,0xf9082b94,0xf701269f,0x4de6bd46,0x43efb04d,0x51f4a750,0x5ffdaa5b,0x75c2896a,0x7bcb8461,0x69d0937c,0x67d99e77,0x3daed51e,0x33a7d815,0x21bccf08,0x2fb5c203,0x058ae132,0x0b83ec39,0x1998fb24,0x1791f62f,0x764dd68d,0x7844db86,0x6a5fcc9b,0x6456c190,0x4e69e2a1,0x4060efaa,0x527bf8b7,0x5c72f5bc,0x0605bed5,0x080cb3de,0x1a17a4c3,0x141ea9c8,0x3e218af9,0x302887f2,0x223390ef,0x2c3a9de4,0x96dd063d,0x98d40b36,0x8acf1c2b,0x84c61120,0xaef93211,0xa0f03f1a,0xb2eb2807,0xbce2250c,0xe6956e65,0xe89c636e,0xfa877473,0xf48e7978,0xdeb15a49,0xd0b85742,0xc2a3405f,0xccaa4d54,0x41ecdaf7,0x4fe5d7fc,0x5dfec0e1,0x53f7cdea,0x79c8eedb,0x77c1e3d0,0x65daf4cd,0x6bd3f9c6,0x31a4b2af,0x3fadbfa4,0x2db6a8b9,0x23bfa5b2,0x09808683,0x07898b88,0x15929c95,0x1b9b919e,0xa17c0a47,0xaf75074c,0xbd6e1051,0xb3671d5a,0x99583e6b,0x97513360,0x854a247d,0x8b432976,0xd134621f,0xdf3d6f14,0xcd267809,0xc32f7502,0xe9105633,0xe7195b38,0xf5024c25,0xfb0b412e,0x9ad7618c,0x94de6c87,0x86c57b9a,0x88cc7691,0xa2f355a0,0xacfa58ab,0xbee14fb6,0xb0e842bd,0xea9f09d4,0xe49604df,0xf68d13c2,0xf8841ec9,0xd2bb3df8,0xdcb230f3,0xcea927ee,0xc0a02ae5,0x7a47b13c,0x744ebc37,0x6655ab2a,0x685ca621,0x42638510,0x4c6a881b,0x5e719f06,0x5078920d,0x0a0fd964,0x0406d46f,0x161dc372,0x1814ce79,0x322bed48,0x3c22e043,0x2e39f75e,0x2030fa55,0xec9ab701,0xe293ba0a,0xf088ad17,0xfe81a01c,0xd4be832d,0xdab78e26,0xc8ac993b,0xc6a59430,0x9cd2df59,0x92dbd252,0x80c0c54f,0x8ec9c844,0xa4f6eb75,0xaaffe67e,0xb8e4f163,0xb6edfc68,0x0c0a67b1,0x02036aba,0x10187da7,0x1e1170ac,0x342e539d,0x3a275e96,0x283c498b,0x26354480,0x7c420fe9,0x724b02e2,0x605015ff,0x6e5918f4,0x44663bc5,0x4a6f36ce,0x587421d3,0x567d2cd8,0x37a10c7a,0x39a80171,0x2bb3166c,0x25ba1b67,0x0f853856,0x018c355d,0x13972240,0x1d9e2f4b,0x47e96422,0x49e06929,0x5bfb7e34,0x55f2733f,0x7fcd500e,0x71c45d05,0x63df4a18,0x6dd64713,0xd731dcca,0xd938d1c1,0xcb23c6dc,0xc52acbd7,0xef15e8e6,0xe11ce5ed,0xf307f2f0,0xfd0efffb,0xa779b492,0xa970b999,0xbb6bae84,0xb562a38f,0x9f5d80be,0x91548db5,0x834f9aa8,0x8d4697a3]);this._mixCol=new Uint8Array(256);for(var i=0;i<256;i++){this._mixCol[i]=i<128?i<<1:i<<1^0x1b;}this.buffer=new Uint8Array(16);this.bufferPosition=0;}crypto_createClass(AESBaseCipher,[{key:"_expandKey",value:function _expandKey(cipherKey){unreachable("Cannot call `_expandKey` on the base class");}},{key:"_decrypt",value:function _decrypt(input,key){var t,u,v;var state=new Uint8Array(16);state.set(input);for(var j=0,k=this._keySize;j<16;++j,++k){state[j]^=key[k];}for(var i=this._cyclesOfRepetition-1;i>=1;--i){t=state[13];state[13]=state[9];state[9]=state[5];state[5]=state[1];state[1]=t;t=state[14];u=state[10];state[14]=state[6];state[10]=state[2];state[6]=t;state[2]=u;t=state[15];u=state[11];v=state[7];state[15]=state[3];state[11]=t;state[7]=u;state[3]=v;for(var _j=0;_j<16;++_j){state[_j]=this._inv_s[state[_j]];}for(var _j2=0,_k=i*16;_j2<16;++_j2,++_k){state[_j2]^=key[_k];}for(var _j3=0;_j3<16;_j3+=4){var s0=this._mix[state[_j3]];var s1=this._mix[state[_j3+1]];var s2=this._mix[state[_j3+2]];var s3=this._mix[state[_j3+3]];t=s0^s1>>>8^s1<<24^s2>>>16^s2<<16^s3>>>24^s3<<8;state[_j3]=t>>>24&0xff;state[_j3+1]=t>>16&0xff;state[_j3+2]=t>>8&0xff;state[_j3+3]=t&0xff;}}t=state[13];state[13]=state[9];state[9]=state[5];state[5]=state[1];state[1]=t;t=state[14];u=state[10];state[14]=state[6];state[10]=state[2];state[6]=t;state[2]=u;t=state[15];u=state[11];v=state[7];state[15]=state[3];state[11]=t;state[7]=u;state[3]=v;for(var _j4=0;_j4<16;++_j4){state[_j4]=this._inv_s[state[_j4]];state[_j4]^=key[_j4];}return state;}},{key:"_encrypt",value:function _encrypt(input,key){var s=this._s;var t,u,v;var state=new Uint8Array(16);state.set(input);for(var j=0;j<16;++j){state[j]^=key[j];}for(var i=1;i<this._cyclesOfRepetition;i++){for(var _j5=0;_j5<16;++_j5){state[_j5]=s[state[_j5]];}v=state[1];state[1]=state[5];state[5]=state[9];state[9]=state[13];state[13]=v;v=state[2];u=state[6];state[2]=state[10];state[6]=state[14];state[10]=v;state[14]=u;v=state[3];u=state[7];t=state[11];state[3]=state[15];state[7]=v;state[11]=u;state[15]=t;for(var _j6=0;_j6<16;_j6+=4){var s0=state[_j6+0];var s1=state[_j6+1];var s2=state[_j6+2];var s3=state[_j6+3];t=s0^s1^s2^s3;state[_j6+0]^=t^this._mixCol[s0^s1];state[_j6+1]^=t^this._mixCol[s1^s2];state[_j6+2]^=t^this._mixCol[s2^s3];state[_j6+3]^=t^this._mixCol[s3^s0];}for(var _j7=0,k=i*16;_j7<16;++_j7,++k){state[_j7]^=key[k];}}for(var _j8=0;_j8<16;++_j8){state[_j8]=s[state[_j8]];}v=state[1];state[1]=state[5];state[5]=state[9];state[9]=state[13];state[13]=v;v=state[2];u=state[6];state[2]=state[10];state[6]=state[14];state[10]=v;state[14]=u;v=state[3];u=state[7];t=state[11];state[3]=state[15];state[7]=v;state[11]=u;state[15]=t;for(var _j9=0,_k2=this._keySize;_j9<16;++_j9,++_k2){state[_j9]^=key[_k2];}return state;}},{key:"_decryptBlock2",value:function _decryptBlock2(data,finalize){var sourceLength=data.length;var buffer=this.buffer,bufferLength=this.bufferPosition;var result=[];var iv=this.iv;for(var i=0;i<sourceLength;++i){buffer[bufferLength]=data[i];++bufferLength;if(bufferLength<16){continue;}var plain=this._decrypt(buffer,this._key);for(var j=0;j<16;++j){plain[j]^=iv[j];}iv=buffer;result.push(plain);buffer=new Uint8Array(16);bufferLength=0;}this.buffer=buffer;this.bufferLength=bufferLength;this.iv=iv;if(result.length===0){return new Uint8Array(0);}var outputLength=16*result.length;if(finalize){var lastBlock=result.at(-1);var psLen=lastBlock[15];if(psLen<=16){for(var _i2=15,ii=16-psLen;_i2>=ii;--_i2){if(lastBlock[_i2]!==psLen){psLen=0;break;}}outputLength-=psLen;result[result.length-1]=lastBlock.subarray(0,16-psLen);}}var output=new Uint8Array(outputLength);for(var _i3=0,_j10=0,_ii=result.length;_i3<_ii;++_i3,_j10+=16){output.set(result[_i3],_j10);}return output;}},{key:"decryptBlock",value:function decryptBlock(data,finalize){var iv=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var sourceLength=data.length;var buffer=this.buffer;var bufferLength=this.bufferPosition;if(iv){this.iv=iv;}else{for(var i=0;bufferLength<16&&i<sourceLength;++i,++bufferLength){buffer[bufferLength]=data[i];}if(bufferLength<16){this.bufferLength=bufferLength;return new Uint8Array(0);}this.iv=buffer;data=data.subarray(16);}this.buffer=new Uint8Array(16);this.bufferLength=0;this.decryptBlock=this._decryptBlock2;return this.decryptBlock(data,finalize);}},{key:"encrypt",value:function encrypt(data,iv){var sourceLength=data.length;var buffer=this.buffer,bufferLength=this.bufferPosition;var result=[];if(!iv){iv=new Uint8Array(16);}for(var i=0;i<sourceLength;++i){buffer[bufferLength]=data[i];++bufferLength;if(bufferLength<16){continue;}for(var j=0;j<16;++j){buffer[j]^=iv[j];}var cipher=this._encrypt(buffer,this._key);iv=cipher;result.push(cipher);buffer=new Uint8Array(16);bufferLength=0;}this.buffer=buffer;this.bufferLength=bufferLength;this.iv=iv;if(result.length===0){return new Uint8Array(0);}var outputLength=16*result.length;var output=new Uint8Array(outputLength);for(var _i4=0,_j11=0,ii=result.length;_i4<ii;++_i4,_j11+=16){output.set(result[_i4],_j11);}return output;}}]);return AESBaseCipher;}();var AES128Cipher=/*#__PURE__*/function(_AESBaseCipher){crypto_inherits(AES128Cipher,_AESBaseCipher);var _super=crypto_createSuper(AES128Cipher);function AES128Cipher(key){var _this;crypto_classCallCheck(this,AES128Cipher);_this=_super.call(this);_this._cyclesOfRepetition=10;_this._keySize=160;_this._rcon=new Uint8Array([0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36,0x6c,0xd8,0xab,0x4d,0x9a,0x2f,0x5e,0xbc,0x63,0xc6,0x97,0x35,0x6a,0xd4,0xb3,0x7d,0xfa,0xef,0xc5,0x91,0x39,0x72,0xe4,0xd3,0xbd,0x61,0xc2,0x9f,0x25,0x4a,0x94,0x33,0x66,0xcc,0x83,0x1d,0x3a,0x74,0xe8,0xcb,0x8d]);_this._key=_this._expandKey(key);return _this;}crypto_createClass(AES128Cipher,[{key:"_expandKey",value:function _expandKey(cipherKey){var b=176;var s=this._s;var rcon=this._rcon;var result=new Uint8Array(b);result.set(cipherKey);for(var j=16,i=1;j<b;++i){var t1=result[j-3];var t2=result[j-2];var t3=result[j-1];var t4=result[j-4];t1=s[t1];t2=s[t2];t3=s[t3];t4=s[t4];t1^=rcon[i];for(var n=0;n<4;++n){result[j]=t1^=result[j-16];j++;result[j]=t2^=result[j-16];j++;result[j]=t3^=result[j-16];j++;result[j]=t4^=result[j-16];j++;}}return result;}}]);return AES128Cipher;}(AESBaseCipher);var AES256Cipher=/*#__PURE__*/function(_AESBaseCipher2){crypto_inherits(AES256Cipher,_AESBaseCipher2);var _super2=crypto_createSuper(AES256Cipher);function AES256Cipher(key){var _this2;crypto_classCallCheck(this,AES256Cipher);_this2=_super2.call(this);_this2._cyclesOfRepetition=14;_this2._keySize=224;_this2._key=_this2._expandKey(key);return _this2;}crypto_createClass(AES256Cipher,[{key:"_expandKey",value:function _expandKey(cipherKey){var b=240;var s=this._s;var result=new Uint8Array(b);result.set(cipherKey);var r=1;var t1,t2,t3,t4;for(var j=32,i=1;j<b;++i){if(j%32===16){t1=s[t1];t2=s[t2];t3=s[t3];t4=s[t4];}else if(j%32===0){t1=result[j-3];t2=result[j-2];t3=result[j-1];t4=result[j-4];t1=s[t1];t2=s[t2];t3=s[t3];t4=s[t4];t1^=r;if((r<<=1)>=256){r=(r^0x1b)&0xff;}}for(var n=0;n<4;++n){result[j]=t1^=result[j-32];j++;result[j]=t2^=result[j-32];j++;result[j]=t3^=result[j-32];j++;result[j]=t4^=result[j-32];j++;}}return result;}}]);return AES256Cipher;}(AESBaseCipher);var PDF17=/*#__PURE__*/function(){function PDF17(){crypto_classCallCheck(this,PDF17);}crypto_createClass(PDF17,[{key:"checkOwnerPassword",value:function checkOwnerPassword(password,ownerValidationSalt,userBytes,ownerPassword){var hashData=new Uint8Array(password.length+56);hashData.set(password,0);hashData.set(ownerValidationSalt,password.length);hashData.set(userBytes,password.length+ownerValidationSalt.length);var result=calculateSHA256(hashData,0,hashData.length);return isArrayEqual(result,ownerPassword);}},{key:"checkUserPassword",value:function checkUserPassword(password,userValidationSalt,userPassword){var hashData=new Uint8Array(password.length+8);hashData.set(password,0);hashData.set(userValidationSalt,password.length);var result=calculateSHA256(hashData,0,hashData.length);return isArrayEqual(result,userPassword);}},{key:"getOwnerKey",value:function getOwnerKey(password,ownerKeySalt,userBytes,ownerEncryption){var hashData=new Uint8Array(password.length+56);hashData.set(password,0);hashData.set(ownerKeySalt,password.length);hashData.set(userBytes,password.length+ownerKeySalt.length);var key=calculateSHA256(hashData,0,hashData.length);var cipher=new AES256Cipher(key);return cipher.decryptBlock(ownerEncryption,false,new Uint8Array(16));}},{key:"getUserKey",value:function getUserKey(password,userKeySalt,userEncryption){var hashData=new Uint8Array(password.length+8);hashData.set(password,0);hashData.set(userKeySalt,password.length);var key=calculateSHA256(hashData,0,hashData.length);var cipher=new AES256Cipher(key);return cipher.decryptBlock(userEncryption,false,new Uint8Array(16));}}]);return PDF17;}();var PDF20=/*#__PURE__*/function(){function PDF20(){crypto_classCallCheck(this,PDF20);}crypto_createClass(PDF20,[{key:"_hash",value:function _hash(password,input,userBytes){var k=calculateSHA256(input,0,input.length).subarray(0,32);var e=[0];var i=0;while(i<64||e.at(-1)>i-32){var combinedLength=password.length+k.length+userBytes.length,combinedArray=new Uint8Array(combinedLength);var writeOffset=0;combinedArray.set(password,writeOffset);writeOffset+=password.length;combinedArray.set(k,writeOffset);writeOffset+=k.length;combinedArray.set(userBytes,writeOffset);var k1=new Uint8Array(combinedLength*64);for(var j=0,pos=0;j<64;j++,pos+=combinedLength){k1.set(combinedArray,pos);}var cipher=new AES128Cipher(k.subarray(0,16));e=cipher.encrypt(k1,k.subarray(16,32));var remainder=e.slice(0,16).reduce(function(a,b){return a+b;},0)%3;if(remainder===0){k=calculateSHA256(e,0,e.length);}else if(remainder===1){k=calculateSHA384(e,0,e.length);}else if(remainder===2){k=calculateSHA512(e,0,e.length);}i++;}return k.subarray(0,32);}},{key:"checkOwnerPassword",value:function checkOwnerPassword(password,ownerValidationSalt,userBytes,ownerPassword){var hashData=new Uint8Array(password.length+56);hashData.set(password,0);hashData.set(ownerValidationSalt,password.length);hashData.set(userBytes,password.length+ownerValidationSalt.length);var result=this._hash(password,hashData,userBytes);return isArrayEqual(result,ownerPassword);}},{key:"checkUserPassword",value:function checkUserPassword(password,userValidationSalt,userPassword){var hashData=new Uint8Array(password.length+8);hashData.set(password,0);hashData.set(userValidationSalt,password.length);var result=this._hash(password,hashData,[]);return isArrayEqual(result,userPassword);}},{key:"getOwnerKey",value:function getOwnerKey(password,ownerKeySalt,userBytes,ownerEncryption){var hashData=new Uint8Array(password.length+56);hashData.set(password,0);hashData.set(ownerKeySalt,password.length);hashData.set(userBytes,password.length+ownerKeySalt.length);var key=this._hash(password,hashData,userBytes);var cipher=new AES256Cipher(key);return cipher.decryptBlock(ownerEncryption,false,new Uint8Array(16));}},{key:"getUserKey",value:function getUserKey(password,userKeySalt,userEncryption){var hashData=new Uint8Array(password.length+8);hashData.set(password,0);hashData.set(userKeySalt,password.length);var key=this._hash(password,hashData,[]);var cipher=new AES256Cipher(key);return cipher.decryptBlock(userEncryption,false,new Uint8Array(16));}}]);return PDF20;}();var CipherTransform=/*#__PURE__*/function(){function CipherTransform(stringCipherConstructor,streamCipherConstructor){crypto_classCallCheck(this,CipherTransform);this.StringCipherConstructor=stringCipherConstructor;this.StreamCipherConstructor=streamCipherConstructor;}crypto_createClass(CipherTransform,[{key:"createStream",value:function createStream(stream,length){var cipher=new this.StreamCipherConstructor();return new DecryptStream(stream,length,function cipherTransformDecryptStream(data,finalize){return cipher.decryptBlock(data,finalize);});}},{key:"decryptString",value:function decryptString(s){var cipher=new this.StringCipherConstructor();var data=stringToBytes(s);data=cipher.decryptBlock(data,true);return bytesToString(data);}},{key:"encryptString",value:function encryptString(s){var cipher=new this.StringCipherConstructor();if(cipher instanceof AESBaseCipher){var strLen=s.length;var pad=16-strLen%16;s+=String.fromCharCode(pad).repeat(pad);var iv=new Uint8Array(16);if(typeof crypto!=="undefined"){crypto.getRandomValues(iv);}else{for(var i=0;i<16;i++){iv[i]=Math.floor(256*Math.random());}}var _data=stringToBytes(s);_data=cipher.encrypt(_data,iv);var buf=new Uint8Array(16+_data.length);buf.set(iv);buf.set(_data,16);return bytesToString(buf);}var data=stringToBytes(s);data=cipher.encrypt(data);return bytesToString(data);}}]);return CipherTransform;}();var _createEncryptionKey=/*#__PURE__*/new WeakSet();var _prepareKeyData=/*#__PURE__*/new WeakSet();var _decodeUserPassword=/*#__PURE__*/new WeakSet();var _buildObjectKey=/*#__PURE__*/new WeakSet();var _buildCipherConstructor=/*#__PURE__*/new WeakSet();var CipherTransformFactory=/*#__PURE__*/function(){function CipherTransformFactory(dict,_fileId,_password){crypto_classCallCheck(this,CipherTransformFactory);crypto_classPrivateMethodInitSpec(this,_buildCipherConstructor);crypto_classPrivateMethodInitSpec(this,_buildObjectKey);crypto_classPrivateMethodInitSpec(this,_decodeUserPassword);crypto_classPrivateMethodInitSpec(this,_prepareKeyData);crypto_classPrivateMethodInitSpec(this,_createEncryptionKey);var filter=dict.get("Filter");if(!isName(filter,"Standard")){throw new FormatError("unknown encryption method");}this.filterName=filter.name;this.dict=dict;var algorithm=dict.get("V");if(!Number.isInteger(algorithm)||algorithm!==1&&algorithm!==2&&algorithm!==4&&algorithm!==5){throw new FormatError("unsupported encryption algorithm");}this.algorithm=algorithm;var _keyLength=dict.get("Length");if(!_keyLength){if(algorithm<=3){_keyLength=40;}else{var cfDict=dict.get("CF");var streamCryptoName=dict.get("StmF");if(cfDict instanceof Dict&&streamCryptoName instanceof Name){cfDict.suppressEncryption=true;var handlerDict=cfDict.get(streamCryptoName.name);_keyLength=(handlerDict===null||handlerDict===void 0?void 0:handlerDict.get("Length"))||128;if(_keyLength<40){_keyLength<<=3;}}}}if(!Number.isInteger(_keyLength)||_keyLength<40||_keyLength%8!==0){throw new FormatError("invalid key length");}var ownerBytes=stringToBytes(dict.get("O")),userBytes=stringToBytes(dict.get("U"));var _ownerPassword=ownerBytes.subarray(0,32);var _userPassword=userBytes.subarray(0,32);var _flags=dict.get("P");var _revision=dict.get("R");var _encryptMetadata=(algorithm===4||algorithm===5)&&dict.get("EncryptMetadata")!==false;this.encryptMetadata=_encryptMetadata;var fileIdBytes=stringToBytes(_fileId);var passwordBytes;if(_password){if(_revision===6){try{_password=utf8StringToString(_password);}catch(_unused){warn("CipherTransformFactory: Unable to convert UTF8 encoded password.");}}passwordBytes=stringToBytes(_password);}var _encryptionKey;if(algorithm!==5){_encryptionKey=crypto_classPrivateMethodGet(this,_prepareKeyData,_prepareKeyData2).call(this,fileIdBytes,passwordBytes,_ownerPassword,_userPassword,_flags,_revision,_keyLength,_encryptMetadata);}else{var ownerValidationSalt=ownerBytes.subarray(32,40);var ownerKeySalt=ownerBytes.subarray(40,48);var uBytes=userBytes.subarray(0,48);var userValidationSalt=userBytes.subarray(32,40);var userKeySalt=userBytes.subarray(40,48);var ownerEncryption=stringToBytes(dict.get("OE"));var userEncryption=stringToBytes(dict.get("UE"));var perms=stringToBytes(dict.get("Perms"));_encryptionKey=crypto_classPrivateMethodGet(this,_createEncryptionKey,_createEncryptionKey2).call(this,_revision,passwordBytes,_ownerPassword,ownerValidationSalt,ownerKeySalt,uBytes,_userPassword,userValidationSalt,userKeySalt,ownerEncryption,userEncryption,perms);}if(!_encryptionKey&&!_password){throw new PasswordException("No password given",PasswordResponses.NEED_PASSWORD);}else if(!_encryptionKey&&_password){var decodedPassword=crypto_classPrivateMethodGet(this,_decodeUserPassword,_decodeUserPassword2).call(this,passwordBytes,_ownerPassword,_revision,_keyLength);_encryptionKey=crypto_classPrivateMethodGet(this,_prepareKeyData,_prepareKeyData2).call(this,fileIdBytes,decodedPassword,_ownerPassword,_userPassword,_flags,_revision,_keyLength,_encryptMetadata);}if(!_encryptionKey){throw new PasswordException("Incorrect Password",PasswordResponses.INCORRECT_PASSWORD);}this.encryptionKey=_encryptionKey;if(algorithm>=4){var cf=dict.get("CF");if(cf instanceof Dict){cf.suppressEncryption=true;}this.cf=cf;this.stmf=dict.get("StmF")||Name.get("Identity");this.strf=dict.get("StrF")||Name.get("Identity");this.eff=dict.get("EFF")||this.stmf;}}crypto_createClass(CipherTransformFactory,[{key:"createCipherTransform",value:function createCipherTransform(num,gen){if(this.algorithm===4||this.algorithm===5){return new CipherTransform(crypto_classPrivateMethodGet(this,_buildCipherConstructor,_buildCipherConstructor2).call(this,this.cf,this.strf,num,gen,this.encryptionKey),crypto_classPrivateMethodGet(this,_buildCipherConstructor,_buildCipherConstructor2).call(this,this.cf,this.stmf,num,gen,this.encryptionKey));}var key=crypto_classPrivateMethodGet(this,_buildObjectKey,_buildObjectKey2).call(this,num,gen,this.encryptionKey,false);var cipherConstructor=function cipherConstructor(){return new ARCFourCipher(key);};return new CipherTransform(cipherConstructor,cipherConstructor);}}]);return CipherTransformFactory;}();crypto_class=CipherTransformFactory;function _createEncryptionKey2(revision,password,ownerPassword,ownerValidationSalt,ownerKeySalt,uBytes,userPassword,userValidationSalt,userKeySalt,ownerEncryption,userEncryption,perms){if(password){var passwordLength=Math.min(127,password.length);password=password.subarray(0,passwordLength);}else{password=[];}var pdfAlgorithm=revision===6?new PDF20():new PDF17();if(pdfAlgorithm.checkUserPassword(password,userValidationSalt,userPassword)){return pdfAlgorithm.getUserKey(password,userKeySalt,userEncryption);}else if(password.length&&pdfAlgorithm.checkOwnerPassword(password,ownerValidationSalt,uBytes,ownerPassword)){return pdfAlgorithm.getOwnerKey(password,ownerKeySalt,uBytes,ownerEncryption);}return null;}function _prepareKeyData2(fileId,password,ownerPassword,userPassword,flags,revision,keyLength,encryptMetadata){var hashDataSize=40+ownerPassword.length+fileId.length;var hashData=new Uint8Array(hashDataSize);var i=0,j,n;if(password){n=Math.min(32,password.length);for(;i<n;++i){hashData[i]=password[i];}}j=0;while(i<32){hashData[i++]=crypto_classStaticPrivateFieldSpecGet(crypto_class,crypto_class,_defaultPasswordBytes)[j++];}for(j=0,n=ownerPassword.length;j<n;++j){hashData[i++]=ownerPassword[j];}hashData[i++]=flags&0xff;hashData[i++]=flags>>8&0xff;hashData[i++]=flags>>16&0xff;hashData[i++]=flags>>>24&0xff;for(j=0,n=fileId.length;j<n;++j){hashData[i++]=fileId[j];}if(revision>=4&&!encryptMetadata){hashData[i++]=0xff;hashData[i++]=0xff;hashData[i++]=0xff;hashData[i++]=0xff;}var hash=calculateMD5(hashData,0,i);var keyLengthInBytes=keyLength>>3;if(revision>=3){for(j=0;j<50;++j){hash=calculateMD5(hash,0,keyLengthInBytes);}}var encryptionKey=hash.subarray(0,keyLengthInBytes);var cipher,checkData;if(revision>=3){for(i=0;i<32;++i){hashData[i]=crypto_classStaticPrivateFieldSpecGet(crypto_class,crypto_class,_defaultPasswordBytes)[i];}for(j=0,n=fileId.length;j<n;++j){hashData[i++]=fileId[j];}cipher=new ARCFourCipher(encryptionKey);checkData=cipher.encryptBlock(calculateMD5(hashData,0,i));n=encryptionKey.length;var derivedKey=new Uint8Array(n);for(j=1;j<=19;++j){for(var k=0;k<n;++k){derivedKey[k]=encryptionKey[k]^j;}cipher=new ARCFourCipher(derivedKey);checkData=cipher.encryptBlock(checkData);}for(j=0,n=checkData.length;j<n;++j){if(userPassword[j]!==checkData[j]){return null;}}}else{cipher=new ARCFourCipher(encryptionKey);checkData=cipher.encryptBlock(crypto_classStaticPrivateFieldSpecGet(crypto_class,crypto_class,_defaultPasswordBytes));for(j=0,n=checkData.length;j<n;++j){if(userPassword[j]!==checkData[j]){return null;}}}return encryptionKey;}function _decodeUserPassword2(password,ownerPassword,revision,keyLength){var hashData=new Uint8Array(32);var i=0;var n=Math.min(32,password.length);for(;i<n;++i){hashData[i]=password[i];}var j=0;while(i<32){hashData[i++]=crypto_classStaticPrivateFieldSpecGet(crypto_class,crypto_class,_defaultPasswordBytes)[j++];}var hash=calculateMD5(hashData,0,i);var keyLengthInBytes=keyLength>>3;if(revision>=3){for(j=0;j<50;++j){hash=calculateMD5(hash,0,hash.length);}}var cipher,userPassword;if(revision>=3){userPassword=ownerPassword;var derivedKey=new Uint8Array(keyLengthInBytes);for(j=19;j>=0;j--){for(var k=0;k<keyLengthInBytes;++k){derivedKey[k]=hash[k]^j;}cipher=new ARCFourCipher(derivedKey);userPassword=cipher.encryptBlock(userPassword);}}else{cipher=new ARCFourCipher(hash.subarray(0,keyLengthInBytes));userPassword=cipher.encryptBlock(ownerPassword);}return userPassword;}function _buildObjectKey2(num,gen,encryptionKey){var isAes=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var key=new Uint8Array(encryptionKey.length+9);var n=encryptionKey.length;var i;for(i=0;i<n;++i){key[i]=encryptionKey[i];}key[i++]=num&0xff;key[i++]=num>>8&0xff;key[i++]=num>>16&0xff;key[i++]=gen&0xff;key[i++]=gen>>8&0xff;if(isAes){key[i++]=0x73;key[i++]=0x41;key[i++]=0x6c;key[i++]=0x54;}var hash=calculateMD5(key,0,i);return hash.subarray(0,Math.min(encryptionKey.length+5,16));}function _buildCipherConstructor2(cf,name,num,gen,key){if(!(name instanceof Name)){throw new FormatError("Invalid crypt filter name.");}var self=this;var cryptFilter=cf.get(name.name);var cfm=cryptFilter===null||cryptFilter===void 0?void 0:cryptFilter.get("CFM");if(!cfm||cfm.name==="None"){return function(){return new NullCipher();};}if(cfm.name==="V2"){return function(){return new ARCFourCipher(crypto_classPrivateMethodGet(self,_buildObjectKey,_buildObjectKey2).call(self,num,gen,key,false));};}if(cfm.name==="AESV2"){return function(){return new AES128Cipher(crypto_classPrivateMethodGet(self,_buildObjectKey,_buildObjectKey2).call(self,num,gen,key,true));};}if(cfm.name==="AESV3"){return function(){return new AES256Cipher(key);};}throw new FormatError("Unknown crypto method");}var _defaultPasswordBytes={writable:true,value:new Uint8Array([0x28,0xbf,0x4e,0x5e,0x4e,0x75,0x8a,0x41,0x64,0x00,0x4e,0x56,0xff,0xfa,0x01,0x08,0x2e,0x2e,0x00,0xb6,0xd0,0x68,0x3e,0x80,0x2f,0x0c,0xa9,0xfe,0x64,0x53,0x69,0x7a])};
;// CONCATENATED MODULE: ./src/core/writer.js
function writer_typeof(o){"@babel/helpers - typeof";return writer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},writer_typeof(o);}function writer_toConsumableArray(arr){return writer_arrayWithoutHoles(arr)||writer_iterableToArray(arr)||writer_unsupportedIterableToArray(arr)||writer_nonIterableSpread();}function writer_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function writer_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function writer_arrayWithoutHoles(arr){if(Array.isArray(arr))return writer_arrayLikeToArray(arr);}function writer_slicedToArray(arr,i){return writer_arrayWithHoles(arr)||writer_iterableToArrayLimit(arr,i)||writer_unsupportedIterableToArray(arr,i)||writer_nonIterableRest();}function writer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function writer_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function writer_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function writer_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */writer_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==writer_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(writer_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function writer_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=writer_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function writer_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return writer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return writer_arrayLikeToArray(o,minLen);}function writer_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function writer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function writer_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){writer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){writer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function writeObject(_x,_x2,_x3,_x4){return _writeObject.apply(this,arguments);}function _writeObject(){_writeObject=writer_asyncToGenerator(/*#__PURE__*/writer_regeneratorRuntime().mark(function _callee(ref,obj,buffer,_ref){var _ref$encrypt,encrypt,transform;return writer_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_ref$encrypt=_ref.encrypt,encrypt=_ref$encrypt===void 0?null:_ref$encrypt;transform=encrypt===null||encrypt===void 0?void 0:encrypt.createCipherTransform(ref.num,ref.gen);buffer.push("".concat(ref.num," ").concat(ref.gen," obj\n"));if(!(obj instanceof Dict)){_context.next=8;break;}_context.next=6;return writeDict(obj,buffer,transform);case 6:_context.next=16;break;case 8:if(!(obj instanceof BaseStream)){_context.next=13;break;}_context.next=11;return writeStream(obj,buffer,transform);case 11:_context.next=16;break;case 13:if(!Array.isArray(obj)){_context.next=16;break;}_context.next=16;return writeArray(obj,buffer,transform);case 16:buffer.push("\nendobj\n");case 17:case"end":return _context.stop();}},_callee);}));return _writeObject.apply(this,arguments);}function writeDict(_x5,_x6,_x7){return _writeDict.apply(this,arguments);}function _writeDict(){_writeDict=writer_asyncToGenerator(/*#__PURE__*/writer_regeneratorRuntime().mark(function _callee2(dict,buffer,transform){var _iterator2,_step2,key;return writer_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:buffer.push("<<");_iterator2=writer_createForOfIteratorHelper(dict.getKeys());_context2.prev=2;_iterator2.s();case 4:if((_step2=_iterator2.n()).done){_context2.next=11;break;}key=_step2.value;buffer.push(" /".concat(escapePDFName(key)," "));_context2.next=9;return writeValue(dict.getRaw(key),buffer,transform);case 9:_context2.next=4;break;case 11:_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2["catch"](2);_iterator2.e(_context2.t0);case 16:_context2.prev=16;_iterator2.f();return _context2.finish(16);case 19:buffer.push(">>");case 20:case"end":return _context2.stop();}},_callee2,null,[[2,13,16,19]]);}));return _writeDict.apply(this,arguments);}function writeStream(_x8,_x9,_x10){return _writeStream.apply(this,arguments);}function _writeStream(){_writeStream=writer_asyncToGenerator(/*#__PURE__*/writer_regeneratorRuntime().mark(function _callee3(stream,buffer,transform){var bytes,dict,_yield$Promise$all,_yield$Promise$all2,filter,params,filterZero,isFilterZeroFlateDecode,MIN_LENGTH_FOR_COMPRESSING,cs,writer,buf,newFilter,newParams,string;return writer_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:bytes=stream.getBytes();dict=stream.dict;_context3.next=4;return Promise.all([dict.getAsync("Filter"),dict.getAsync("DecodeParms")]);case 4:_yield$Promise$all=_context3.sent;_yield$Promise$all2=writer_slicedToArray(_yield$Promise$all,2);filter=_yield$Promise$all2[0];params=_yield$Promise$all2[1];if(!Array.isArray(filter)){_context3.next=14;break;}_context3.next=11;return dict.xref.fetchIfRefAsync(filter[0]);case 11:_context3.t0=_context3.sent;_context3.next=15;break;case 14:_context3.t0=filter;case 15:filterZero=_context3.t0;isFilterZeroFlateDecode=isName(filterZero,"FlateDecode");MIN_LENGTH_FOR_COMPRESSING=256;if(!(typeof CompressionStream!=="undefined"&&(bytes.length>=MIN_LENGTH_FOR_COMPRESSING||isFilterZeroFlateDecode))){_context3.next=36;break;}_context3.prev=19;cs=new CompressionStream("deflate");writer=cs.writable.getWriter();writer.write(bytes);writer.close();_context3.next=26;return new Response(cs.readable).arrayBuffer();case 26:buf=_context3.sent;bytes=new Uint8Array(buf);if(!filter){newFilter=Name.get("FlateDecode");}else if(!isFilterZeroFlateDecode){newFilter=Array.isArray(filter)?[Name.get("FlateDecode")].concat(writer_toConsumableArray(filter)):[Name.get("FlateDecode"),filter];if(params){newParams=Array.isArray(params)?[null].concat(writer_toConsumableArray(params)):[null,params];}}if(newFilter){dict.set("Filter",newFilter);}if(newParams){dict.set("DecodeParms",newParams);}_context3.next=36;break;case 33:_context3.prev=33;_context3.t1=_context3["catch"](19);info("writeStream - cannot compress data: \"".concat(_context3.t1,"\"."));case 36:string=bytesToString(bytes);if(transform){string=transform.encryptString(string);}dict.set("Length",string.length);_context3.next=41;return writeDict(dict,buffer,transform);case 41:buffer.push(" stream\n",string,"\nendstream");case 42:case"end":return _context3.stop();}},_callee3,null,[[19,33]]);}));return _writeStream.apply(this,arguments);}function writeArray(_x11,_x12,_x13){return _writeArray.apply(this,arguments);}function _writeArray(){_writeArray=writer_asyncToGenerator(/*#__PURE__*/writer_regeneratorRuntime().mark(function _callee4(array,buffer,transform){var first,_iterator3,_step3,val;return writer_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:buffer.push("[");first=true;_iterator3=writer_createForOfIteratorHelper(array);_context4.prev=3;_iterator3.s();case 5:if((_step3=_iterator3.n()).done){_context4.next=12;break;}val=_step3.value;if(!first){buffer.push(" ");}else{first=false;}_context4.next=10;return writeValue(val,buffer,transform);case 10:_context4.next=5;break;case 12:_context4.next=17;break;case 14:_context4.prev=14;_context4.t0=_context4["catch"](3);_iterator3.e(_context4.t0);case 17:_context4.prev=17;_iterator3.f();return _context4.finish(17);case 20:buffer.push("]");case 21:case"end":return _context4.stop();}},_callee4,null,[[3,14,17,20]]);}));return _writeArray.apply(this,arguments);}function writeValue(_x14,_x15,_x16){return _writeValue.apply(this,arguments);}function _writeValue(){_writeValue=writer_asyncToGenerator(/*#__PURE__*/writer_regeneratorRuntime().mark(function _callee5(value,buffer,transform){return writer_regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!(value instanceof Name)){_context5.next=4;break;}buffer.push("/".concat(escapePDFName(value.name)));_context5.next=37;break;case 4:if(!(value instanceof Ref)){_context5.next=8;break;}buffer.push("".concat(value.num," ").concat(value.gen," R"));_context5.next=37;break;case 8:if(!Array.isArray(value)){_context5.next=13;break;}_context5.next=11;return writeArray(value,buffer,transform);case 11:_context5.next=37;break;case 13:if(!(typeof value==="string")){_context5.next=18;break;}if(transform){value=transform.encryptString(value);}buffer.push("(".concat(escapeString(value),")"));_context5.next=37;break;case 18:if(!(typeof value==="number")){_context5.next=22;break;}buffer.push(numberToString(value));_context5.next=37;break;case 22:if(!(typeof value==="boolean")){_context5.next=26;break;}buffer.push(value.toString());_context5.next=37;break;case 26:if(!(value instanceof Dict)){_context5.next=31;break;}_context5.next=29;return writeDict(value,buffer,transform);case 29:_context5.next=37;break;case 31:if(!(value instanceof BaseStream)){_context5.next=36;break;}_context5.next=34;return writeStream(value,buffer,transform);case 34:_context5.next=37;break;case 36:if(value===null){buffer.push("null");}else{warn("Unhandled value in writer: ".concat(writer_typeof(value),", please file a bug."));}case 37:case"end":return _context5.stop();}},_callee5);}));return _writeValue.apply(this,arguments);}function writeInt(number,size,offset,buffer){for(var i=size+offset-1;i>offset-1;i--){buffer[i]=number&0xff;number>>=8;}return offset+size;}function writeString(string,offset,buffer){for(var i=0,len=string.length;i<len;i++){buffer[offset+i]=string.charCodeAt(i)&0xff;}}function computeMD5(filesize,xrefInfo){var time=Math.floor(Date.now()/1000);var filename=xrefInfo.filename||"";var md5Buffer=[time.toString(),filename,filesize.toString()];var md5BufferLen=md5Buffer.reduce(function(a,str){return a+str.length;},0);for(var _i=0,_Object$values=Object.values(xrefInfo.info);_i<_Object$values.length;_i++){var value=_Object$values[_i];md5Buffer.push(value);md5BufferLen+=value.length;}var array=new Uint8Array(md5BufferLen);var offset=0;for(var _i2=0,_md5Buffer=md5Buffer;_i2<_md5Buffer.length;_i2++){var str=_md5Buffer[_i2];writeString(str,offset,array);offset+=str.length;}return bytesToString(calculateMD5(array));}function writeXFADataForAcroform(str,newRefs){var xml=new SimpleXMLParser({hasAttributes:true}).parseFromString(str);var _iterator=writer_createForOfIteratorHelper(newRefs),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var xfa=_step.value.xfa;if(!xfa){continue;}var path=xfa.path,value=xfa.value;if(!path){continue;}var nodePath=parseXFAPath(path);var node=xml.documentElement.searchNode(nodePath,0);if(!node&&nodePath.length>1){node=xml.documentElement.searchNode([nodePath.at(-1)],0);}if(node){node.childNodes=Array.isArray(value)?value.map(function(val){return new SimpleDOMNode("value",val);}):[new SimpleDOMNode("#text",value)];}else{warn("Node not found for path: ".concat(path));}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var buffer=[];xml.documentElement.dump(buffer);return buffer.join("");}function updateAcroform(_x17){return _updateAcroform.apply(this,arguments);}function _updateAcroform(){_updateAcroform=writer_asyncToGenerator(/*#__PURE__*/writer_regeneratorRuntime().mark(function _callee6(_ref2){var xref,acroForm,acroFormRef,hasXfa,hasXfaDatasetsEntry,xfaDatasetsRef,needAppearances,newRefs,dict,newXfa,buffer;return writer_regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:xref=_ref2.xref,acroForm=_ref2.acroForm,acroFormRef=_ref2.acroFormRef,hasXfa=_ref2.hasXfa,hasXfaDatasetsEntry=_ref2.hasXfaDatasetsEntry,xfaDatasetsRef=_ref2.xfaDatasetsRef,needAppearances=_ref2.needAppearances,newRefs=_ref2.newRefs;if(hasXfa&&!hasXfaDatasetsEntry&&!xfaDatasetsRef){warn("XFA - Cannot save it");}if(!(!needAppearances&&(!hasXfa||!xfaDatasetsRef||hasXfaDatasetsEntry))){_context6.next=4;break;}return _context6.abrupt("return");case 4:dict=acroForm.clone();if(hasXfa&&!hasXfaDatasetsEntry){newXfa=acroForm.get("XFA").slice();newXfa.splice(2,0,"datasets");newXfa.splice(3,0,xfaDatasetsRef);dict.set("XFA",newXfa);}if(needAppearances){dict.set("NeedAppearances",true);}buffer=[];_context6.next=10;return writeObject(acroFormRef,dict,buffer,xref);case 10:newRefs.push({ref:acroFormRef,data:buffer.join("")});case 11:case"end":return _context6.stop();}},_callee6);}));return _updateAcroform.apply(this,arguments);}function updateXFA(_ref3){var xfaData=_ref3.xfaData,xfaDatasetsRef=_ref3.xfaDatasetsRef,newRefs=_ref3.newRefs,xref=_ref3.xref;if(xfaData===null){var datasets=xref.fetchIfRef(xfaDatasetsRef);xfaData=writeXFADataForAcroform(datasets.getString(),newRefs);}var encrypt=xref.encrypt;if(encrypt){var transform=encrypt.createCipherTransform(xfaDatasetsRef.num,xfaDatasetsRef.gen);xfaData=transform.encryptString(xfaData);}var data="".concat(xfaDatasetsRef.num," ").concat(xfaDatasetsRef.gen," obj\n")+"<< /Type /EmbeddedFile /Length ".concat(xfaData.length,">>\nstream\n")+xfaData+"\nendstream\nendobj\n";newRefs.push({ref:xfaDatasetsRef,data:data});}function incrementalUpdate(_x18){return _incrementalUpdate.apply(this,arguments);}function _incrementalUpdate(){_incrementalUpdate=writer_asyncToGenerator(/*#__PURE__*/writer_regeneratorRuntime().mark(function _callee7(_ref4){var originalData,xrefInfo,newRefs,_ref4$xref,xref,_ref4$hasXfa,hasXfa,_ref4$xfaDatasetsRef,xfaDatasetsRef,_ref4$hasXfaDatasetsE,hasXfaDatasetsEntry,needAppearances,_ref4$acroFormRef,acroFormRef,_ref4$acroForm,acroForm,_ref4$xfaData,xfaData,newXref,refForXrefTable,buffer,baseOffset,lastByte,xrefTableData,indexes,maxOffset,_iterator4,_step4,_step4$value,ref,data,md5,offsetSize,sizes,structSize,tableLength,bufferLen,footer,array,offset,_iterator5,_step5,str,_i3,_xrefTableData,_xrefTableData$_i,type,objOffset,gen;return writer_regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:originalData=_ref4.originalData,xrefInfo=_ref4.xrefInfo,newRefs=_ref4.newRefs,_ref4$xref=_ref4.xref,xref=_ref4$xref===void 0?null:_ref4$xref,_ref4$hasXfa=_ref4.hasXfa,hasXfa=_ref4$hasXfa===void 0?false:_ref4$hasXfa,_ref4$xfaDatasetsRef=_ref4.xfaDatasetsRef,xfaDatasetsRef=_ref4$xfaDatasetsRef===void 0?null:_ref4$xfaDatasetsRef,_ref4$hasXfaDatasetsE=_ref4.hasXfaDatasetsEntry,hasXfaDatasetsEntry=_ref4$hasXfaDatasetsE===void 0?false:_ref4$hasXfaDatasetsE,needAppearances=_ref4.needAppearances,_ref4$acroFormRef=_ref4.acroFormRef,acroFormRef=_ref4$acroFormRef===void 0?null:_ref4$acroFormRef,_ref4$acroForm=_ref4.acroForm,acroForm=_ref4$acroForm===void 0?null:_ref4$acroForm,_ref4$xfaData=_ref4.xfaData,xfaData=_ref4$xfaData===void 0?null:_ref4$xfaData;_context7.next=3;return updateAcroform({xref:xref,acroForm:acroForm,acroFormRef:acroFormRef,hasXfa:hasXfa,hasXfaDatasetsEntry:hasXfaDatasetsEntry,xfaDatasetsRef:xfaDatasetsRef,needAppearances:needAppearances,newRefs:newRefs});case 3:if(hasXfa){updateXFA({xfaData:xfaData,xfaDatasetsRef:xfaDatasetsRef,newRefs:newRefs,xref:xref});}newXref=new Dict(null);refForXrefTable=xrefInfo.newRef;lastByte=originalData.at(-1);if(lastByte===0x0a||lastByte===0x0d){buffer=[];baseOffset=originalData.length;}else{buffer=["\n"];baseOffset=originalData.length+1;}newXref.set("Size",refForXrefTable.num+1);newXref.set("Prev",xrefInfo.startXRef);newXref.set("Type",Name.get("XRef"));if(xrefInfo.rootRef!==null){newXref.set("Root",xrefInfo.rootRef);}if(xrefInfo.infoRef!==null){newXref.set("Info",xrefInfo.infoRef);}if(xrefInfo.encryptRef!==null){newXref.set("Encrypt",xrefInfo.encryptRef);}newRefs.push({ref:refForXrefTable,data:""});newRefs=newRefs.sort(function(a,b){return a.ref.num-b.ref.num;});xrefTableData=[[0,1,0xffff]];indexes=[0,1];maxOffset=0;_iterator4=writer_createForOfIteratorHelper(newRefs);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){_step4$value=_step4.value,ref=_step4$value.ref,data=_step4$value.data;maxOffset=Math.max(maxOffset,baseOffset);xrefTableData.push([1,baseOffset,Math.min(ref.gen,0xffff)]);baseOffset+=data.length;indexes.push(ref.num,1);buffer.push(data);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}newXref.set("Index",indexes);if(Array.isArray(xrefInfo.fileIds)&&xrefInfo.fileIds.length>0){md5=computeMD5(baseOffset,xrefInfo);newXref.set("ID",[xrefInfo.fileIds[0],md5]);}offsetSize=Math.ceil(Math.log2(maxOffset)/8);sizes=[1,offsetSize,2];structSize=sizes[0]+sizes[1]+sizes[2];tableLength=structSize*xrefTableData.length;newXref.set("W",sizes);newXref.set("Length",tableLength);buffer.push("".concat(refForXrefTable.num," ").concat(refForXrefTable.gen," obj\n"));_context7.next=32;return writeDict(newXref,buffer,null);case 32:buffer.push(" stream\n");bufferLen=buffer.reduce(function(a,str){return a+str.length;},0);footer="\nendstream\nendobj\nstartxref\n".concat(baseOffset,"\n%%EOF\n");array=new Uint8Array(originalData.length+bufferLen+tableLength+footer.length);array.set(originalData);offset=originalData.length;_iterator5=writer_createForOfIteratorHelper(buffer);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){str=_step5.value;writeString(str,offset,array);offset+=str.length;}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}for(_i3=0,_xrefTableData=xrefTableData;_i3<_xrefTableData.length;_i3++){_xrefTableData$_i=writer_slicedToArray(_xrefTableData[_i3],3),type=_xrefTableData$_i[0],objOffset=_xrefTableData$_i[1],gen=_xrefTableData$_i[2];offset=writeInt(type,sizes[0],offset,array);offset=writeInt(objOffset,sizes[1],offset,array);offset=writeInt(gen,sizes[2],offset,array);}writeString(footer,offset,array);return _context7.abrupt("return",array);case 43:case"end":return _context7.stop();}},_callee7);}));return _incrementalUpdate.apply(this,arguments);}
;// CONCATENATED MODULE: ./src/core/struct_tree.js
function struct_tree_typeof(o){"@babel/helpers - typeof";return struct_tree_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},struct_tree_typeof(o);}var struct_tree_class;function struct_tree_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */struct_tree_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==struct_tree_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(struct_tree_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function struct_tree_slicedToArray(arr,i){return struct_tree_arrayWithHoles(arr)||struct_tree_iterableToArrayLimit(arr,i)||struct_tree_unsupportedIterableToArray(arr,i)||struct_tree_nonIterableRest();}function struct_tree_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function struct_tree_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function struct_tree_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function struct_tree_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=struct_tree_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function struct_tree_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return struct_tree_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return struct_tree_arrayLikeToArray(o,minLen);}function struct_tree_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function struct_tree_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function struct_tree_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){struct_tree_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){struct_tree_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function struct_tree_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function struct_tree_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,struct_tree_toPropertyKey(descriptor.key),descriptor);}}function struct_tree_createClass(Constructor,protoProps,staticProps){if(protoProps)struct_tree_defineProperties(Constructor.prototype,protoProps);if(staticProps)struct_tree_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function struct_tree_toPropertyKey(arg){var key=struct_tree_toPrimitive(arg,"string");return struct_tree_typeof(key)==="symbol"?key:String(key);}function struct_tree_toPrimitive(input,hint){if(struct_tree_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(struct_tree_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function struct_tree_classPrivateMethodInitSpec(obj,privateSet){struct_tree_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function struct_tree_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classStaticPrivateMethodGet(receiver,classConstructor,method){struct_tree_classCheckPrivateStaticAccess(receiver,classConstructor);return method;}function struct_tree_classCheckPrivateStaticAccess(receiver,classConstructor){if(receiver!==classConstructor){throw new TypeError("Private static access of wrong provenance");}}function struct_tree_classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}var MAX_DEPTH=40;var StructElementType={PAGE_CONTENT:1,STREAM_CONTENT:2,OBJECT:3,ANNOTATION:4,ELEMENT:5};var _addIdToPage=/*#__PURE__*/new WeakSet();var StructTreeRoot=/*#__PURE__*/function(){function StructTreeRoot(rootDict,rootRef){struct_tree_classCallCheck(this,StructTreeRoot);struct_tree_classPrivateMethodInitSpec(this,_addIdToPage);this.dict=rootDict;this.ref=rootRef instanceof Ref?rootRef:null;this.roleMap=new Map();this.structParentIds=null;}struct_tree_createClass(StructTreeRoot,[{key:"init",value:function init(){this.readRoleMap();}},{key:"addAnnotationIdToPage",value:function addAnnotationIdToPage(pageRef,id){struct_tree_classPrivateMethodGet(this,_addIdToPage,_addIdToPage2).call(this,pageRef,id,StructElementType.ANNOTATION);}},{key:"readRoleMap",value:function readRoleMap(){var _this=this;var roleMapDict=this.dict.get("RoleMap");if(!(roleMapDict instanceof Dict)){return;}roleMapDict.forEach(function(key,value){if(!(value instanceof Name)){return;}_this.roleMap.set(key,value.name);});}},{key:"canUpdateStructTree",value:function(){var _canUpdateStructTree=struct_tree_asyncToGenerator(/*#__PURE__*/struct_tree_regeneratorRuntime().mark(function _callee(_ref){var pdfManager,xref,newAnnotationsByPage,nextKey,parentTree,nums,numberTree,_iterator,_step,pageIndex,_yield$pdfManager$get,pageDict,id,hasNothingToUpdate,_iterator2,_step2,_step2$value,_pageIndex,_elements,_yield$pdfManager$get2,_pageDict,_iterator5,_step5,_element$accessibilit,_element,_iterator3,_step3,elements,_iterator4,_step4,element;return struct_tree_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:pdfManager=_ref.pdfManager,xref=_ref.xref,newAnnotationsByPage=_ref.newAnnotationsByPage;if(this.ref){_context.next=4;break;}warn("Cannot update the struct tree: no root reference.");return _context.abrupt("return",false);case 4:nextKey=this.dict.get("ParentTreeNextKey");if(!(!Number.isInteger(nextKey)||nextKey<0)){_context.next=8;break;}warn("Cannot update the struct tree: invalid next key.");return _context.abrupt("return",false);case 8:parentTree=this.dict.get("ParentTree");if(parentTree instanceof Dict){_context.next=12;break;}warn("Cannot update the struct tree: ParentTree isn't a dict.");return _context.abrupt("return",false);case 12:nums=parentTree.get("Nums");if(Array.isArray(nums)){_context.next=16;break;}warn("Cannot update the struct tree: nums isn't an array.");return _context.abrupt("return",false);case 16:numberTree=new NumberTree(parentTree,xref);_iterator=struct_tree_createForOfIteratorHelper(newAnnotationsByPage.keys());_context.prev=18;_iterator.s();case 20:if((_step=_iterator.n()).done){_context.next=34;break;}pageIndex=_step.value;_context.next=24;return pdfManager.getPage(pageIndex);case 24:_yield$pdfManager$get=_context.sent;pageDict=_yield$pdfManager$get.pageDict;if(pageDict.has("StructParents")){_context.next=28;break;}return _context.abrupt("continue",32);case 28:id=pageDict.get("StructParents");if(!(!Number.isInteger(id)||!Array.isArray(numberTree.get(id)))){_context.next=32;break;}warn("Cannot save the struct tree: page ".concat(pageIndex," has a wrong id."));return _context.abrupt("return",false);case 32:_context.next=20;break;case 34:_context.next=39;break;case 36:_context.prev=36;_context.t0=_context["catch"](18);_iterator.e(_context.t0);case 39:_context.prev=39;_iterator.f();return _context.finish(39);case 42:hasNothingToUpdate=true;_iterator2=struct_tree_createForOfIteratorHelper(newAnnotationsByPage);_context.prev=44;_iterator2.s();case 46:if((_step2=_iterator2.n()).done){_context.next=57;break;}_step2$value=struct_tree_slicedToArray(_step2.value,2),_pageIndex=_step2$value[0],_elements=_step2$value[1];_context.next=50;return pdfManager.getPage(_pageIndex);case 50:_yield$pdfManager$get2=_context.sent;_pageDict=_yield$pdfManager$get2.pageDict;_classStaticPrivateMethodGet(StructTreeRoot,StructTreeRoot,_collectParents).call(StructTreeRoot,{elements:_elements,xref:this.dict.xref,pageDict:_pageDict,numberTree:numberTree});_iterator5=struct_tree_createForOfIteratorHelper(_elements);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){_element=_step5.value;if((_element$accessibilit=_element.accessibilityData)!==null&&_element$accessibilit!==void 0&&_element$accessibilit.type){_element.parentTreeId=nextKey++;hasNothingToUpdate=false;}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}case 55:_context.next=46;break;case 57:_context.next=62;break;case 59:_context.prev=59;_context.t1=_context["catch"](44);_iterator2.e(_context.t1);case 62:_context.prev=62;_iterator2.f();return _context.finish(62);case 65:if(!hasNothingToUpdate){_context.next=69;break;}_iterator3=struct_tree_createForOfIteratorHelper(newAnnotationsByPage.values());try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){elements=_step3.value;_iterator4=struct_tree_createForOfIteratorHelper(elements);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){element=_step4.value;delete element.parentTreeId;delete element.structTreeParent;}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return _context.abrupt("return",false);case 69:return _context.abrupt("return",true);case 70:case"end":return _context.stop();}},_callee,this,[[18,36,39,42],[44,59,62,65]]);}));function canUpdateStructTree(_x){return _canUpdateStructTree.apply(this,arguments);}return canUpdateStructTree;}()},{key:"updateStructureTree",value:function(){var _updateStructureTree=struct_tree_asyncToGenerator(/*#__PURE__*/struct_tree_regeneratorRuntime().mark(function _callee2(_ref2){var newAnnotationsByPage,pdfManager,newRefs,xref,structTreeRoot,structTreeRootRef,parentTreeRef,parentTree,nums,numsRef,kids,kidsRef,buffer,newNextkey;return struct_tree_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:newAnnotationsByPage=_ref2.newAnnotationsByPage,pdfManager=_ref2.pdfManager,newRefs=_ref2.newRefs;xref=this.dict.xref;structTreeRoot=this.dict.clone();structTreeRootRef=this.ref;parentTreeRef=structTreeRoot.getRaw("ParentTree");if(parentTreeRef instanceof Ref){parentTree=xref.fetch(parentTreeRef);}else{parentTree=parentTreeRef;parentTreeRef=xref.getNewTemporaryRef();structTreeRoot.set("ParentTree",parentTreeRef);}parentTree=parentTree.clone();nums=parentTree.getRaw("Nums");numsRef=null;if(nums instanceof Ref){numsRef=nums;nums=xref.fetch(numsRef);}nums=nums.slice();if(!numsRef){parentTree.set("Nums",nums);}kids=structTreeRoot.getRaw("K");kidsRef=null;if(kids instanceof Ref){kidsRef=kids;kids=xref.fetch(kidsRef);}else{kidsRef=xref.getNewTemporaryRef();structTreeRoot.set("K",kidsRef);}kids=Array.isArray(kids)?kids.slice():[kids];buffer=[];_context2.next=19;return _classStaticPrivateMethodGet(StructTreeRoot,StructTreeRoot,_writeKids).call(StructTreeRoot,{newAnnotationsByPage:newAnnotationsByPage,structTreeRootRef:structTreeRootRef,kids:kids,nums:nums,xref:xref,pdfManager:pdfManager,newRefs:newRefs,buffer:buffer});case 19:newNextkey=_context2.sent;structTreeRoot.set("ParentTreeNextKey",newNextkey);buffer.length=0;_context2.next=24;return writeObject(kidsRef,kids,buffer,xref);case 24:newRefs.push({ref:kidsRef,data:buffer.join("")});if(!numsRef){_context2.next=30;break;}buffer.length=0;_context2.next=29;return writeObject(numsRef,nums,buffer,xref);case 29:newRefs.push({ref:numsRef,data:buffer.join("")});case 30:buffer.length=0;_context2.next=33;return writeObject(parentTreeRef,parentTree,buffer,xref);case 33:newRefs.push({ref:parentTreeRef,data:buffer.join("")});buffer.length=0;_context2.next=37;return writeObject(structTreeRootRef,structTreeRoot,buffer,xref);case 37:newRefs.push({ref:structTreeRootRef,data:buffer.join("")});case 38:case"end":return _context2.stop();}},_callee2,this);}));function updateStructureTree(_x2){return _updateStructureTree.apply(this,arguments);}return updateStructureTree;}()}],[{key:"canCreateStructureTree",value:function(){var _canCreateStructureTree=struct_tree_asyncToGenerator(/*#__PURE__*/struct_tree_regeneratorRuntime().mark(function _callee3(_ref3){var catalogRef,pdfManager,newAnnotationsByPage,nextKey,hasNothingToUpdate,_iterator6,_step6,_step6$value,pageIndex,_elements2,_yield$pdfManager$get3,pageRef,_iterator9,_step9,_element2$accessibili,_element2,_iterator7,_step7,elements,_iterator8,_step8,element;return struct_tree_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:catalogRef=_ref3.catalogRef,pdfManager=_ref3.pdfManager,newAnnotationsByPage=_ref3.newAnnotationsByPage;if(catalogRef instanceof Ref){_context3.next=4;break;}warn("Cannot save the struct tree: no catalog reference.");return _context3.abrupt("return",false);case 4:nextKey=0;hasNothingToUpdate=true;_iterator6=struct_tree_createForOfIteratorHelper(newAnnotationsByPage);_context3.prev=7;_iterator6.s();case 9:if((_step6=_iterator6.n()).done){_context3.next=23;break;}_step6$value=struct_tree_slicedToArray(_step6.value,2),pageIndex=_step6$value[0],_elements2=_step6$value[1];_context3.next=13;return pdfManager.getPage(pageIndex);case 13:_yield$pdfManager$get3=_context3.sent;pageRef=_yield$pdfManager$get3.ref;if(pageRef instanceof Ref){_context3.next=19;break;}warn("Cannot save the struct tree: page ".concat(pageIndex," has no ref."));hasNothingToUpdate=true;return _context3.abrupt("break",23);case 19:_iterator9=struct_tree_createForOfIteratorHelper(_elements2);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){_element2=_step9.value;if((_element2$accessibili=_element2.accessibilityData)!==null&&_element2$accessibili!==void 0&&_element2$accessibili.type){_element2.parentTreeId=nextKey++;hasNothingToUpdate=false;}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}case 21:_context3.next=9;break;case 23:_context3.next=28;break;case 25:_context3.prev=25;_context3.t0=_context3["catch"](7);_iterator6.e(_context3.t0);case 28:_context3.prev=28;_iterator6.f();return _context3.finish(28);case 31:if(!hasNothingToUpdate){_context3.next=35;break;}_iterator7=struct_tree_createForOfIteratorHelper(newAnnotationsByPage.values());try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){elements=_step7.value;_iterator8=struct_tree_createForOfIteratorHelper(elements);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){element=_step8.value;delete element.parentTreeId;}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return _context3.abrupt("return",false);case 35:return _context3.abrupt("return",true);case 36:case"end":return _context3.stop();}},_callee3,null,[[7,25,28,31]]);}));function canCreateStructureTree(_x3){return _canCreateStructureTree.apply(this,arguments);}return canCreateStructureTree;}()},{key:"createStructureTree",value:function(){var _createStructureTree=struct_tree_asyncToGenerator(/*#__PURE__*/struct_tree_regeneratorRuntime().mark(function _callee4(_ref4){var newAnnotationsByPage,xref,catalogRef,pdfManager,newRefs,root,structTreeRootRef,buffer,structTreeRoot,parentTreeRef,kids,parentTree,nums,nextKey;return struct_tree_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:newAnnotationsByPage=_ref4.newAnnotationsByPage,xref=_ref4.xref,catalogRef=_ref4.catalogRef,pdfManager=_ref4.pdfManager,newRefs=_ref4.newRefs;root=pdfManager.catalog.cloneDict();structTreeRootRef=xref.getNewTemporaryRef();root.set("StructTreeRoot",structTreeRootRef);buffer=[];_context4.next=7;return writeObject(catalogRef,root,buffer,xref);case 7:newRefs.push({ref:catalogRef,data:buffer.join("")});structTreeRoot=new Dict(xref);structTreeRoot.set("Type",Name.get("StructTreeRoot"));parentTreeRef=xref.getNewTemporaryRef();structTreeRoot.set("ParentTree",parentTreeRef);kids=[];structTreeRoot.set("K",kids);parentTree=new Dict(xref);nums=[];parentTree.set("Nums",nums);_context4.next=19;return _classStaticPrivateMethodGet(this,StructTreeRoot,_writeKids).call(this,{newAnnotationsByPage:newAnnotationsByPage,structTreeRootRef:structTreeRootRef,kids:kids,nums:nums,xref:xref,pdfManager:pdfManager,newRefs:newRefs,buffer:buffer});case 19:nextKey=_context4.sent;structTreeRoot.set("ParentTreeNextKey",nextKey);buffer.length=0;_context4.next=24;return writeObject(parentTreeRef,parentTree,buffer,xref);case 24:newRefs.push({ref:parentTreeRef,data:buffer.join("")});buffer.length=0;_context4.next=28;return writeObject(structTreeRootRef,structTreeRoot,buffer,xref);case 28:newRefs.push({ref:structTreeRootRef,data:buffer.join("")});case 29:case"end":return _context4.stop();}},_callee4,this);}));function createStructureTree(_x4){return _createStructureTree.apply(this,arguments);}return createStructureTree;}()}]);return StructTreeRoot;}();struct_tree_class=StructTreeRoot;function _addIdToPage2(pageRef,id,type){if(!(pageRef instanceof Ref)||id<0){return;}this.structParentIds||(this.structParentIds=new RefSetCache());var ids=this.structParentIds.get(pageRef);if(!ids){ids=[];this.structParentIds.put(pageRef,ids);}ids.push([id,type]);}function _writeKids(_x5){return _writeKids3.apply(this,arguments);}function _writeKids3(){_writeKids3=struct_tree_asyncToGenerator(/*#__PURE__*/struct_tree_regeneratorRuntime().mark(function _callee5(_ref6){var newAnnotationsByPage,structTreeRootRef,kids,nums,xref,pdfManager,newRefs,buffer,objr,nextKey,_iterator19,_step19,_step19$value,pageIndex,elements,_yield$pdfManager$get4,pageRef,isPageRef,_iterator20,_step20,_step20$value,accessibilityData,ref,parentTreeId,structTreeParent,type,title,lang,alt,expanded,actualText,tagRef,tagDict,objDict;return struct_tree_regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:newAnnotationsByPage=_ref6.newAnnotationsByPage,structTreeRootRef=_ref6.structTreeRootRef,kids=_ref6.kids,nums=_ref6.nums,xref=_ref6.xref,pdfManager=_ref6.pdfManager,newRefs=_ref6.newRefs,buffer=_ref6.buffer;objr=Name.get("OBJR");nextKey=-Infinity;_iterator19=struct_tree_createForOfIteratorHelper(newAnnotationsByPage);_context5.prev=4;_iterator19.s();case 6:if((_step19=_iterator19.n()).done){_context5.next=59;break;}_step19$value=struct_tree_slicedToArray(_step19.value,2),pageIndex=_step19$value[0],elements=_step19$value[1];_context5.next=10;return pdfManager.getPage(pageIndex);case 10:_yield$pdfManager$get4=_context5.sent;pageRef=_yield$pdfManager$get4.ref;isPageRef=pageRef instanceof Ref;_iterator20=struct_tree_createForOfIteratorHelper(elements);_context5.prev=14;_iterator20.s();case 16:if((_step20=_iterator20.n()).done){_context5.next=49;break;}_step20$value=_step20.value,accessibilityData=_step20$value.accessibilityData,ref=_step20$value.ref,parentTreeId=_step20$value.parentTreeId,structTreeParent=_step20$value.structTreeParent;if(accessibilityData!==null&&accessibilityData!==void 0&&accessibilityData.type){_context5.next=20;break;}return _context5.abrupt("continue",47);case 20:type=accessibilityData.type,title=accessibilityData.title,lang=accessibilityData.lang,alt=accessibilityData.alt,expanded=accessibilityData.expanded,actualText=accessibilityData.actualText;nextKey=Math.max(nextKey,parentTreeId);tagRef=xref.getNewTemporaryRef();tagDict=new Dict(xref);tagDict.set("S",Name.get(type));if(title){tagDict.set("T",title);}if(lang){tagDict.set("Lang",lang);}if(alt){tagDict.set("Alt",alt);}if(expanded){tagDict.set("E",expanded);}if(actualText){tagDict.set("ActualText",actualText);}if(!structTreeParent){_context5.next=35;break;}_context5.next=33;return _classStaticPrivateMethodGet(this,struct_tree_class,_updateParentTag).call(this,{structTreeParent:structTreeParent,tagDict:tagDict,newTagRef:tagRef,fallbackRef:structTreeRootRef,xref:xref,newRefs:newRefs,buffer:buffer});case 33:_context5.next=36;break;case 35:tagDict.set("P",structTreeRootRef);case 36:objDict=new Dict(xref);tagDict.set("K",objDict);objDict.set("Type",objr);if(isPageRef){objDict.set("Pg",pageRef);}objDict.set("Obj",ref);buffer.length=0;_context5.next=44;return writeObject(tagRef,tagDict,buffer,xref);case 44:newRefs.push({ref:tagRef,data:buffer.join("")});nums.push(parentTreeId,tagRef);kids.push(tagRef);case 47:_context5.next=16;break;case 49:_context5.next=54;break;case 51:_context5.prev=51;_context5.t0=_context5["catch"](14);_iterator20.e(_context5.t0);case 54:_context5.prev=54;_iterator20.f();return _context5.finish(54);case 57:_context5.next=6;break;case 59:_context5.next=64;break;case 61:_context5.prev=61;_context5.t1=_context5["catch"](4);_iterator19.e(_context5.t1);case 64:_context5.prev=64;_iterator19.f();return _context5.finish(64);case 67:return _context5.abrupt("return",nextKey+1);case 68:case"end":return _context5.stop();}},_callee5,this,[[4,61,64,67],[14,51,54,57]]);}));return _writeKids3.apply(this,arguments);}function _collectParents(_ref7){var elements=_ref7.elements,xref=_ref7.xref,pageDict=_ref7.pageDict,numberTree=_ref7.numberTree;var idToElement=new Map();var _iterator16=struct_tree_createForOfIteratorHelper(elements),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var element=_step16.value;if(element.structTreeParentId){var _id=parseInt(element.structTreeParentId.split("_mc")[1],10);idToElement.set(_id,element);}}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}var id=pageDict.get("StructParents");if(!Number.isInteger(id)){return;}var parentArray=numberTree.get(id);var updateElement=function updateElement(kid,pageKid,kidRef){var element=idToElement.get(kid);if(element){var parentRef=pageKid.getRaw("P");var parentDict=xref.fetchIfRef(parentRef);if(parentRef instanceof Ref&&parentDict instanceof Dict){element.structTreeParent={ref:kidRef,dict:pageKid};}return true;}return false;};var _iterator17=struct_tree_createForOfIteratorHelper(parentArray),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var kidRef=_step17.value;if(!(kidRef instanceof Ref)){continue;}var pageKid=xref.fetch(kidRef);var k=pageKid.get("K");if(Number.isInteger(k)){updateElement(k,pageKid,kidRef);continue;}if(!Array.isArray(k)){continue;}var _iterator18=struct_tree_createForOfIteratorHelper(k),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var kid=_step18.value;kid=xref.fetchIfRef(kid);if(Number.isInteger(kid)&&updateElement(kid,pageKid,kidRef)){break;}}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}}function _updateParentTag(_x6){return _updateParentTag3.apply(this,arguments);}function _updateParentTag3(){_updateParentTag3=struct_tree_asyncToGenerator(/*#__PURE__*/struct_tree_regeneratorRuntime().mark(function _callee6(_ref8){var _ref8$structTreeParen,ref,dict,tagDict,newTagRef,fallbackRef,xref,newRefs,buffer,parentRef,parentDict,saveParentDict,parentKids,parentKidsRef,index;return struct_tree_regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_ref8$structTreeParen=_ref8.structTreeParent,ref=_ref8$structTreeParen.ref,dict=_ref8$structTreeParen.dict,tagDict=_ref8.tagDict,newTagRef=_ref8.newTagRef,fallbackRef=_ref8.fallbackRef,xref=_ref8.xref,newRefs=_ref8.newRefs,buffer=_ref8.buffer;parentRef=dict.getRaw("P");parentDict=xref.fetchIfRef(parentRef);tagDict.set("P",parentRef);saveParentDict=false;parentKidsRef=parentDict.getRaw("K");if(!(parentKidsRef instanceof Ref)){parentKids=parentKidsRef;parentKidsRef=xref.getNewTemporaryRef();parentDict=parentDict.clone();parentDict.set("K",parentKidsRef);saveParentDict=true;}else{parentKids=xref.fetch(parentKidsRef);}if(!Array.isArray(parentKids)){_context6.next=19;break;}index=parentKids.indexOf(ref);if(!(index>=0)){_context6.next=14;break;}parentKids=parentKids.slice();parentKids.splice(index+1,0,newTagRef);_context6.next=17;break;case 14:warn("Cannot update the struct tree: parent kid not found.");tagDict.set("P",fallbackRef);return _context6.abrupt("return");case 17:_context6.next=20;break;case 19:if(parentKids instanceof Dict){parentKids=[parentKidsRef,newTagRef];parentKidsRef=xref.getNewTemporaryRef();parentDict.set("K",parentKidsRef);saveParentDict=true;}case 20:buffer.length=0;_context6.next=23;return writeObject(parentKidsRef,parentKids,buffer,xref);case 23:newRefs.push({ref:parentKidsRef,data:buffer.join("")});if(saveParentDict){_context6.next=26;break;}return _context6.abrupt("return");case 26:buffer.length=0;_context6.next=29;return writeObject(parentRef,parentDict,buffer,xref);case 29:newRefs.push({ref:parentRef,data:buffer.join("")});case 30:case"end":return _context6.stop();}},_callee6);}));return _updateParentTag3.apply(this,arguments);}var StructElementNode=/*#__PURE__*/function(){function StructElementNode(tree,dict){struct_tree_classCallCheck(this,StructElementNode);this.tree=tree;this.dict=dict;this.kids=[];this.parseKids();}struct_tree_createClass(StructElementNode,[{key:"role",get:function get(){var nameObj=this.dict.get("S");var name=nameObj instanceof Name?nameObj.name:"";var root=this.tree.root;if(root.roleMap.has(name)){return root.roleMap.get(name);}return name;}},{key:"parseKids",value:function parseKids(){var pageObjId=null;var objRef=this.dict.getRaw("Pg");if(objRef instanceof Ref){pageObjId=objRef.toString();}var kids=this.dict.get("K");if(Array.isArray(kids)){var _iterator10=struct_tree_createForOfIteratorHelper(kids),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var kid=_step10.value;var element=this.parseKid(pageObjId,kid);if(element){this.kids.push(element);}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}}else{var _element3=this.parseKid(pageObjId,kids);if(_element3){this.kids.push(_element3);}}}},{key:"parseKid",value:function parseKid(pageObjId,kid){if(Number.isInteger(kid)){if(this.tree.pageDict.objId!==pageObjId){return null;}return new StructElement({type:StructElementType.PAGE_CONTENT,mcid:kid,pageObjId:pageObjId});}var kidDict=null;if(kid instanceof Ref){kidDict=this.dict.xref.fetch(kid);}else if(kid instanceof Dict){kidDict=kid;}if(!kidDict){return null;}var pageRef=kidDict.getRaw("Pg");if(pageRef instanceof Ref){pageObjId=pageRef.toString();}var type=kidDict.get("Type")instanceof Name?kidDict.get("Type").name:null;if(type==="MCR"){if(this.tree.pageDict.objId!==pageObjId){return null;}var kidRef=kidDict.getRaw("Stm");return new StructElement({type:StructElementType.STREAM_CONTENT,refObjId:kidRef instanceof Ref?kidRef.toString():null,pageObjId:pageObjId,mcid:kidDict.get("MCID")});}if(type==="OBJR"){if(this.tree.pageDict.objId!==pageObjId){return null;}var _kidRef=kidDict.getRaw("Obj");return new StructElement({type:StructElementType.OBJECT,refObjId:_kidRef instanceof Ref?_kidRef.toString():null,pageObjId:pageObjId});}return new StructElement({type:StructElementType.ELEMENT,dict:kidDict});}}]);return StructElementNode;}();var StructElement=/*#__PURE__*/struct_tree_createClass(function StructElement(_ref5){var type=_ref5.type,_ref5$dict=_ref5.dict,dict=_ref5$dict===void 0?null:_ref5$dict,_ref5$mcid=_ref5.mcid,mcid=_ref5$mcid===void 0?null:_ref5$mcid,_ref5$pageObjId=_ref5.pageObjId,pageObjId=_ref5$pageObjId===void 0?null:_ref5$pageObjId,_ref5$refObjId=_ref5.refObjId,refObjId=_ref5$refObjId===void 0?null:_ref5$refObjId;struct_tree_classCallCheck(this,StructElement);this.type=type;this.dict=dict;this.mcid=mcid;this.pageObjId=pageObjId;this.refObjId=refObjId;this.parentNode=null;});var StructTreePage=/*#__PURE__*/function(){function StructTreePage(structTreeRoot,pageDict){struct_tree_classCallCheck(this,StructTreePage);this.root=structTreeRoot;this.rootDict=structTreeRoot?structTreeRoot.dict:null;this.pageDict=pageDict;this.nodes=[];}struct_tree_createClass(StructTreePage,[{key:"parse",value:function parse(pageRef){var _this$root$structPare;if(!this.root||!this.rootDict){return;}var parentTree=this.rootDict.get("ParentTree");if(!parentTree){return;}var id=this.pageDict.get("StructParents");var ids=pageRef instanceof Ref&&((_this$root$structPare=this.root.structParentIds)===null||_this$root$structPare===void 0?void 0:_this$root$structPare.get(pageRef));if(!Number.isInteger(id)&&!ids){return;}var map=new Map();var numberTree=new NumberTree(parentTree,this.rootDict.xref);if(Number.isInteger(id)){var parentArray=numberTree.get(id);if(Array.isArray(parentArray)){var _iterator11=struct_tree_createForOfIteratorHelper(parentArray),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var ref=_step11.value;if(ref instanceof Ref){this.addNode(this.rootDict.xref.fetch(ref),map);}}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}}if(!ids){return;}var _iterator12=struct_tree_createForOfIteratorHelper(ids),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _step12$value=struct_tree_slicedToArray(_step12.value,2),elemId=_step12$value[0],type=_step12$value[1];var obj=numberTree.get(elemId);if(obj){var _elem$kids;var elem=this.addNode(this.rootDict.xref.fetchIfRef(obj),map);if((elem===null||elem===void 0||(_elem$kids=elem.kids)===null||_elem$kids===void 0?void 0:_elem$kids.length)===1&&elem.kids[0].type===StructElementType.OBJECT){elem.kids[0].type=type;}}}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}},{key:"addNode",value:function addNode(dict,map){var level=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(level>MAX_DEPTH){warn("StructTree MAX_DEPTH reached.");return null;}if(map.has(dict)){return map.get(dict);}var element=new StructElementNode(this,dict);map.set(dict,element);var parent=dict.get("P");if(!parent||isName(parent.get("Type"),"StructTreeRoot")){if(!this.addTopLevelNode(dict,element)){map.delete(dict);}return element;}var parentNode=this.addNode(parent,map,level+1);if(!parentNode){return element;}var save=false;var _iterator13=struct_tree_createForOfIteratorHelper(parentNode.kids),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var kid=_step13.value;if(kid.type===StructElementType.ELEMENT&&kid.dict===dict){kid.parentNode=element;save=true;}}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}if(!save){map.delete(dict);}return element;}},{key:"addTopLevelNode",value:function addTopLevelNode(dict,element){var obj=this.rootDict.get("K");if(!obj){return false;}if(obj instanceof Dict){if(obj.objId!==dict.objId){return false;}this.nodes[0]=element;return true;}if(!Array.isArray(obj)){return true;}var save=false;for(var i=0;i<obj.length;i++){var kidRef=obj[i];if((kidRef===null||kidRef===void 0?void 0:kidRef.toString())===dict.objId){this.nodes[i]=element;save=true;}}return save;}},{key:"serializable",get:function get(){function nodeToSerializable(node,parent){var level=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(level>MAX_DEPTH){warn("StructTree too deep to be fully serialized.");return;}var obj=Object.create(null);obj.role=node.role;obj.children=[];parent.children.push(obj);var alt=node.dict.get("Alt");if(typeof alt==="string"){obj.alt=stringToPDFString(alt);}var lang=node.dict.get("Lang");if(typeof lang==="string"){obj.lang=stringToPDFString(lang);}var _iterator14=struct_tree_createForOfIteratorHelper(node.kids),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var kid=_step14.value;var kidElement=kid.type===StructElementType.ELEMENT?kid.parentNode:null;if(kidElement){nodeToSerializable(kidElement,obj,level+1);continue;}else if(kid.type===StructElementType.PAGE_CONTENT||kid.type===StructElementType.STREAM_CONTENT){obj.children.push({type:"content",id:"p".concat(kid.pageObjId,"_mc").concat(kid.mcid)});}else if(kid.type===StructElementType.OBJECT){obj.children.push({type:"object",id:kid.refObjId});}else if(kid.type===StructElementType.ANNOTATION){obj.children.push({type:"annotation",id:"".concat(AnnotationPrefix).concat(kid.refObjId)});}}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}}var root=Object.create(null);root.children=[];root.role="Root";var _iterator15=struct_tree_createForOfIteratorHelper(this.nodes),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var child=_step15.value;if(!child){continue;}nodeToSerializable(child,root);}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}return root;}}]);return StructTreePage;}();
;// CONCATENATED MODULE: ./src/core/catalog.js
function catalog_typeof(o){"@babel/helpers - typeof";return catalog_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},catalog_typeof(o);}function catalog_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */catalog_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==catalog_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(catalog_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function catalog_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function catalog_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){catalog_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){catalog_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function catalog_slicedToArray(arr,i){return catalog_arrayWithHoles(arr)||catalog_iterableToArrayLimit(arr,i)||catalog_unsupportedIterableToArray(arr,i)||catalog_nonIterableRest();}function catalog_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function catalog_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function catalog_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function catalog_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=catalog_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function catalog_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return catalog_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return catalog_arrayLikeToArray(o,minLen);}function catalog_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function catalog_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function catalog_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,catalog_toPropertyKey(descriptor.key),descriptor);}}function catalog_createClass(Constructor,protoProps,staticProps){if(protoProps)catalog_defineProperties(Constructor.prototype,protoProps);if(staticProps)catalog_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function catalog_toPropertyKey(arg){var key=catalog_toPrimitive(arg,"string");return catalog_typeof(key)==="symbol"?key:String(key);}function catalog_toPrimitive(input,hint){if(catalog_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(catalog_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function fetchDestination(dest){if(dest instanceof Dict){dest=dest.get("D");}return Array.isArray(dest)?dest:null;}function fetchRemoteDest(action){var dest=action.get("D");if(dest){if(dest instanceof Name){dest=dest.name;}if(typeof dest==="string"){return stringToPDFString(dest);}else if(Array.isArray(dest)){return JSON.stringify(dest);}}return null;}var Catalog=/*#__PURE__*/function(){function Catalog(pdfManager,xref){catalog_classCallCheck(this,Catalog);this.pdfManager=pdfManager;this.xref=xref;this._catDict=xref.getCatalogObj();if(!(this._catDict instanceof Dict)){throw new FormatError("Catalog object is not a dictionary.");}this.toplevelPagesDict;this._actualNumPages=null;this.fontCache=new RefSetCache();this.builtInCMapCache=new Map();this.standardFontDataCache=new Map();this.globalImageCache=new GlobalImageCache();this.pageKidsCountCache=new RefSetCache();this.pageIndexCache=new RefSetCache();this.nonBlendModesSet=new RefSet();this.systemFontCache=new Map();}catalog_createClass(Catalog,[{key:"cloneDict",value:function cloneDict(){return this._catDict.clone();}},{key:"version",get:function get(){var version=this._catDict.get("Version");if(version instanceof Name){if(PDF_VERSION_REGEXP.test(version.name)){return shadow(this,"version",version.name);}warn("Invalid PDF catalog version: ".concat(version.name));}return shadow(this,"version",null);}},{key:"lang",get:function get(){var lang=this._catDict.get("Lang");return shadow(this,"lang",typeof lang==="string"?stringToPDFString(lang):null);}},{key:"needsRendering",get:function get(){var needsRendering=this._catDict.get("NeedsRendering");return shadow(this,"needsRendering",typeof needsRendering==="boolean"?needsRendering:false);}},{key:"collection",get:function get(){var collection=null;try{var obj=this._catDict.get("Collection");if(obj instanceof Dict&&obj.size>0){collection=obj;}}catch(ex){if(ex instanceof MissingDataException){throw ex;}info("Cannot fetch Collection entry; assuming no collection is present.");}return shadow(this,"collection",collection);}},{key:"acroForm",get:function get(){var acroForm=null;try{var obj=this._catDict.get("AcroForm");if(obj instanceof Dict&&obj.size>0){acroForm=obj;}}catch(ex){if(ex instanceof MissingDataException){throw ex;}info("Cannot fetch AcroForm entry; assuming no forms are present.");}return shadow(this,"acroForm",acroForm);}},{key:"acroFormRef",get:function get(){var value=this._catDict.getRaw("AcroForm");return shadow(this,"acroFormRef",value instanceof Ref?value:null);}},{key:"metadata",get:function get(){var streamRef=this._catDict.getRaw("Metadata");if(!(streamRef instanceof Ref)){return shadow(this,"metadata",null);}var metadata=null;try{var _this$xref$encrypt;var stream=this.xref.fetch(streamRef,!((_this$xref$encrypt=this.xref.encrypt)!==null&&_this$xref$encrypt!==void 0&&_this$xref$encrypt.encryptMetadata));if(stream instanceof BaseStream&&stream.dict instanceof Dict){var type=stream.dict.get("Type");var subtype=stream.dict.get("Subtype");if(isName(type,"Metadata")&&isName(subtype,"XML")){var data=stringToUTF8String(stream.getString());if(data){metadata=new MetadataParser(data).serializable;}}}}catch(ex){if(ex instanceof MissingDataException){throw ex;}info("Skipping invalid Metadata: \"".concat(ex,"\"."));}return shadow(this,"metadata",metadata);}},{key:"markInfo",get:function get(){var markInfo=null;try{markInfo=this._readMarkInfo();}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable to read mark info.");}return shadow(this,"markInfo",markInfo);}},{key:"_readMarkInfo",value:function _readMarkInfo(){var obj=this._catDict.get("MarkInfo");if(!(obj instanceof Dict)){return null;}var markInfo={Marked:false,UserProperties:false,Suspects:false};for(var key in markInfo){var value=obj.get(key);if(typeof value==="boolean"){markInfo[key]=value;}}return markInfo;}},{key:"structTreeRoot",get:function get(){var structTree=null;try{structTree=this._readStructTreeRoot();}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable read to structTreeRoot info.");}return shadow(this,"structTreeRoot",structTree);}},{key:"_readStructTreeRoot",value:function _readStructTreeRoot(){var rawObj=this._catDict.getRaw("StructTreeRoot");var obj=this.xref.fetchIfRef(rawObj);if(!(obj instanceof Dict)){return null;}var root=new StructTreeRoot(obj,rawObj);root.init();return root;}},{key:"toplevelPagesDict",get:function get(){var pagesObj=this._catDict.get("Pages");if(!(pagesObj instanceof Dict)){throw new FormatError("Invalid top-level pages dictionary.");}return shadow(this,"toplevelPagesDict",pagesObj);}},{key:"documentOutline",get:function get(){var obj=null;try{obj=this._readDocumentOutline();}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable to read document outline.");}return shadow(this,"documentOutline",obj);}},{key:"_readDocumentOutline",value:function _readDocumentOutline(){var obj=this._catDict.get("Outlines");if(!(obj instanceof Dict)){return null;}obj=obj.getRaw("First");if(!(obj instanceof Ref)){return null;}var root={items:[]};var queue=[{obj:obj,parent:root}];var processed=new RefSet();processed.put(obj);var xref=this.xref,blackColor=new Uint8ClampedArray(3);while(queue.length>0){var i=queue.shift();var outlineDict=xref.fetchIfRef(i.obj);if(outlineDict===null){continue;}if(!outlineDict.has("Title")){throw new FormatError("Invalid outline item encountered.");}var data={url:null,dest:null,action:null};Catalog.parseDestDictionary({destDict:outlineDict,resultObj:data,docBaseUrl:this.baseUrl,docAttachments:this.attachments});var title=outlineDict.get("Title");var flags=outlineDict.get("F")||0;var color=outlineDict.getArray("C");var count=outlineDict.get("Count");var rgbColor=blackColor;if(Array.isArray(color)&&color.length===3&&(color[0]!==0||color[1]!==0||color[2]!==0)){rgbColor=ColorSpace.singletons.rgb.getRgb(color,0);}var outlineItem={action:data.action,attachment:data.attachment,dest:data.dest,url:data.url,unsafeUrl:data.unsafeUrl,newWindow:data.newWindow,setOCGState:data.setOCGState,title:stringToPDFString(title),color:rgbColor,count:Number.isInteger(count)?count:undefined,bold:!!(flags&2),italic:!!(flags&1),items:[]};i.parent.items.push(outlineItem);obj=outlineDict.getRaw("First");if(obj instanceof Ref&&!processed.has(obj)){queue.push({obj:obj,parent:outlineItem});processed.put(obj);}obj=outlineDict.getRaw("Next");if(obj instanceof Ref&&!processed.has(obj)){queue.push({obj:obj,parent:i.parent});processed.put(obj);}}return root.items.length>0?root.items:null;}},{key:"permissions",get:function get(){var permissions=null;try{permissions=this._readPermissions();}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable to read permissions.");}return shadow(this,"permissions",permissions);}},{key:"_readPermissions",value:function _readPermissions(){var encrypt=this.xref.trailer.get("Encrypt");if(!(encrypt instanceof Dict)){return null;}var flags=encrypt.get("P");if(typeof flags!=="number"){return null;}flags+=Math.pow(2,32);var permissions=[];for(var key in PermissionFlag){var value=PermissionFlag[key];if(flags&value){permissions.push(value);}}return permissions;}},{key:"optionalContentConfig",get:function get(){var config=null;try{var properties=this._catDict.get("OCProperties");if(!properties){return shadow(this,"optionalContentConfig",null);}var defaultConfig=properties.get("D");if(!defaultConfig){return shadow(this,"optionalContentConfig",null);}var groupsData=properties.get("OCGs");if(!Array.isArray(groupsData)){return shadow(this,"optionalContentConfig",null);}var groups=[];var groupRefs=new RefSet();var _iterator=catalog_createForOfIteratorHelper(groupsData),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var groupRef=_step.value;if(!(groupRef instanceof Ref)||groupRefs.has(groupRef)){continue;}groupRefs.put(groupRef);var group=this.xref.fetch(groupRef);groups.push({id:groupRef.toString(),name:typeof group.get("Name")==="string"?stringToPDFString(group.get("Name")):null,intent:typeof group.get("Intent")==="string"?stringToPDFString(group.get("Intent")):null});}}catch(err){_iterator.e(err);}finally{_iterator.f();}config=this._readOptionalContentConfig(defaultConfig,groupRefs);config.groups=groups;}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable to read optional content config: ".concat(ex));}return shadow(this,"optionalContentConfig",config);}},{key:"_readOptionalContentConfig",value:function _readOptionalContentConfig(config,contentGroupRefs){function parseOnOff(refs){var onParsed=[];if(Array.isArray(refs)){var _iterator2=catalog_createForOfIteratorHelper(refs),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var value=_step2.value;if(!(value instanceof Ref)){continue;}if(contentGroupRefs.has(value)){onParsed.push(value.toString());}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}return onParsed;}function parseOrder(refs){var nestedLevels=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!Array.isArray(refs)){return null;}var order=[];var _iterator3=catalog_createForOfIteratorHelper(refs),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var value=_step3.value;if(value instanceof Ref&&contentGroupRefs.has(value)){parsedOrderRefs.put(value);order.push(value.toString());continue;}var nestedOrder=parseNestedOrder(value,nestedLevels);if(nestedOrder){order.push(nestedOrder);}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}if(nestedLevels>0){return order;}var hiddenGroups=[];var _iterator4=catalog_createForOfIteratorHelper(contentGroupRefs),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var groupRef=_step4.value;if(parsedOrderRefs.has(groupRef)){continue;}hiddenGroups.push(groupRef.toString());}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}if(hiddenGroups.length){order.push({name:null,order:hiddenGroups});}return order;}function parseNestedOrder(ref,nestedLevels){if(++nestedLevels>MAX_NESTED_LEVELS){warn("parseNestedOrder - reached MAX_NESTED_LEVELS.");return null;}var value=xref.fetchIfRef(ref);if(!Array.isArray(value)){return null;}var nestedName=xref.fetchIfRef(value[0]);if(typeof nestedName!=="string"){return null;}var nestedOrder=parseOrder(value.slice(1),nestedLevels);if(!nestedOrder||!nestedOrder.length){return null;}return{name:stringToPDFString(nestedName),order:nestedOrder};}var xref=this.xref,parsedOrderRefs=new RefSet(),MAX_NESTED_LEVELS=10;return{name:typeof config.get("Name")==="string"?stringToPDFString(config.get("Name")):null,creator:typeof config.get("Creator")==="string"?stringToPDFString(config.get("Creator")):null,baseState:config.get("BaseState")instanceof Name?config.get("BaseState").name:null,on:parseOnOff(config.get("ON")),off:parseOnOff(config.get("OFF")),order:parseOrder(config.get("Order")),groups:null};}},{key:"setActualNumPages",value:function setActualNumPages(){var num=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this._actualNumPages=num;}},{key:"hasActualNumPages",get:function get(){return this._actualNumPages!==null;}},{key:"_pagesCount",get:function get(){var obj=this.toplevelPagesDict.get("Count");if(!Number.isInteger(obj)){throw new FormatError("Page count in top-level pages dictionary is not an integer.");}return shadow(this,"_pagesCount",obj);}},{key:"numPages",get:function get(){return this.hasActualNumPages?this._actualNumPages:this._pagesCount;}},{key:"destinations",get:function get(){var obj=this._readDests(),dests=Object.create(null);if(obj instanceof NameTree){var _iterator5=catalog_createForOfIteratorHelper(obj.getAll()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _step5$value=catalog_slicedToArray(_step5.value,2),key=_step5$value[0],value=_step5$value[1];var dest=fetchDestination(value);if(dest){dests[stringToPDFString(key)]=dest;}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}else if(obj instanceof Dict){obj.forEach(function(key,value){var dest=fetchDestination(value);if(dest){dests[key]=dest;}});}return shadow(this,"destinations",dests);}},{key:"getDestination",value:function getDestination(id){var obj=this._readDests();if(obj instanceof NameTree){var dest=fetchDestination(obj.get(id));if(dest){return dest;}var allDest=this.destinations[id];if(allDest){warn("Found \"".concat(id,"\" at an incorrect position in the NameTree."));return allDest;}}else if(obj instanceof Dict){var _dest=fetchDestination(obj.get(id));if(_dest){return _dest;}}return null;}},{key:"_readDests",value:function _readDests(){var obj=this._catDict.get("Names");if(obj!==null&&obj!==void 0&&obj.has("Dests")){return new NameTree(obj.getRaw("Dests"),this.xref);}else if(this._catDict.has("Dests")){return this._catDict.get("Dests");}return undefined;}},{key:"pageLabels",get:function get(){var obj=null;try{obj=this._readPageLabels();}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Unable to read page labels.");}return shadow(this,"pageLabels",obj);}},{key:"_readPageLabels",value:function _readPageLabels(){var obj=this._catDict.getRaw("PageLabels");if(!obj){return null;}var pageLabels=new Array(this.numPages);var style=null,prefix="";var numberTree=new NumberTree(obj,this.xref);var nums=numberTree.getAll();var currentLabel="",currentIndex=1;for(var i=0,ii=this.numPages;i<ii;i++){var labelDict=nums.get(i);if(labelDict!==undefined){if(!(labelDict instanceof Dict)){throw new FormatError("PageLabel is not a dictionary.");}if(labelDict.has("Type")&&!isName(labelDict.get("Type"),"PageLabel")){throw new FormatError("Invalid type in PageLabel dictionary.");}if(labelDict.has("S")){var s=labelDict.get("S");if(!(s instanceof Name)){throw new FormatError("Invalid style in PageLabel dictionary.");}style=s.name;}else{style=null;}if(labelDict.has("P")){var p=labelDict.get("P");if(typeof p!=="string"){throw new FormatError("Invalid prefix in PageLabel dictionary.");}prefix=stringToPDFString(p);}else{prefix="";}if(labelDict.has("St")){var st=labelDict.get("St");if(!(Number.isInteger(st)&&st>=1)){throw new FormatError("Invalid start in PageLabel dictionary.");}currentIndex=st;}else{currentIndex=1;}}switch(style){case"D":currentLabel=currentIndex;break;case"R":case"r":currentLabel=toRomanNumerals(currentIndex,style==="r");break;case"A":case"a":var LIMIT=26;var A_UPPER_CASE=0x41,A_LOWER_CASE=0x61;var baseCharCode=style==="a"?A_LOWER_CASE:A_UPPER_CASE;var letterIndex=currentIndex-1;var character=String.fromCharCode(baseCharCode+letterIndex%LIMIT);currentLabel=character.repeat(Math.floor(letterIndex/LIMIT)+1);break;default:if(style){throw new FormatError("Invalid style \"".concat(style,"\" in PageLabel dictionary."));}currentLabel="";}pageLabels[i]=prefix+currentLabel;currentIndex++;}return pageLabels;}},{key:"pageLayout",get:function get(){var obj=this._catDict.get("PageLayout");var pageLayout="";if(obj instanceof Name){switch(obj.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":pageLayout=obj.name;}}return shadow(this,"pageLayout",pageLayout);}},{key:"pageMode",get:function get(){var obj=this._catDict.get("PageMode");var pageMode="UseNone";if(obj instanceof Name){switch(obj.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":pageMode=obj.name;}}return shadow(this,"pageMode",pageMode);}},{key:"viewerPreferences",get:function get(){var _this=this;var obj=this._catDict.get("ViewerPreferences");if(!(obj instanceof Dict)){return shadow(this,"viewerPreferences",null);}var prefs=null;var _iterator6=catalog_createForOfIteratorHelper(obj.getKeys()),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var key=_step6.value;var value=obj.get(key);var prefValue=void 0;switch(key){case"HideToolbar":case"HideMenubar":case"HideWindowUI":case"FitWindow":case"CenterWindow":case"DisplayDocTitle":case"PickTrayByPDFSize":if(typeof value==="boolean"){prefValue=value;}break;case"NonFullScreenPageMode":if(value instanceof Name){switch(value.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":prefValue=value.name;break;default:prefValue="UseNone";}}break;case"Direction":if(value instanceof Name){switch(value.name){case"L2R":case"R2L":prefValue=value.name;break;default:prefValue="L2R";}}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":if(value instanceof Name){switch(value.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":prefValue=value.name;break;default:prefValue="CropBox";}}break;case"PrintScaling":if(value instanceof Name){switch(value.name){case"None":case"AppDefault":prefValue=value.name;break;default:prefValue="AppDefault";}}break;case"Duplex":if(value instanceof Name){switch(value.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":prefValue=value.name;break;default:prefValue="None";}}break;case"PrintPageRange":if(Array.isArray(value)&&value.length%2===0){var isValid=value.every(function(page,i,arr){return Number.isInteger(page)&&page>0&&(i===0||page>=arr[i-1])&&page<=_this.numPages;});if(isValid){prefValue=value;}}break;case"NumCopies":if(Number.isInteger(value)&&value>0){prefValue=value;}break;default:warn("Ignoring non-standard key in ViewerPreferences: ".concat(key,"."));continue;}if(prefValue===undefined){warn("Bad value, for key \"".concat(key,"\", in ViewerPreferences: ").concat(value,"."));continue;}if(!prefs){prefs=Object.create(null);}prefs[key]=prefValue;}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}return shadow(this,"viewerPreferences",prefs);}},{key:"openAction",get:function get(){var obj=this._catDict.get("OpenAction");var openAction=Object.create(null);if(obj instanceof Dict){var destDict=new Dict(this.xref);destDict.set("A",obj);var resultObj={url:null,dest:null,action:null};Catalog.parseDestDictionary({destDict:destDict,resultObj:resultObj});if(Array.isArray(resultObj.dest)){openAction.dest=resultObj.dest;}else if(resultObj.action){openAction.action=resultObj.action;}}else if(Array.isArray(obj)){openAction.dest=obj;}return shadow(this,"openAction",objectSize(openAction)>0?openAction:null);}},{key:"attachments",get:function get(){var obj=this._catDict.get("Names");var attachments=null;if(obj instanceof Dict&&obj.has("EmbeddedFiles")){var nameTree=new NameTree(obj.getRaw("EmbeddedFiles"),this.xref);var _iterator7=catalog_createForOfIteratorHelper(nameTree.getAll()),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _step7$value=catalog_slicedToArray(_step7.value,2),key=_step7$value[0],value=_step7$value[1];var fs=new FileSpec(value,this.xref);if(!attachments){attachments=Object.create(null);}attachments[stringToPDFString(key)]=fs.serializable;}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}return shadow(this,"attachments",attachments);}},{key:"xfaImages",get:function get(){var obj=this._catDict.get("Names");var xfaImages=null;if(obj instanceof Dict&&obj.has("XFAImages")){var nameTree=new NameTree(obj.getRaw("XFAImages"),this.xref);var _iterator8=catalog_createForOfIteratorHelper(nameTree.getAll()),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _step8$value=catalog_slicedToArray(_step8.value,2),key=_step8$value[0],value=_step8$value[1];if(!xfaImages){xfaImages=new Dict(this.xref);}xfaImages.set(stringToPDFString(key),value);}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}return shadow(this,"xfaImages",xfaImages);}},{key:"_collectJavaScript",value:function _collectJavaScript(){var obj=this._catDict.get("Names");var javaScript=null;function appendIfJavaScriptDict(name,jsDict){if(!(jsDict instanceof Dict)){return;}if(!isName(jsDict.get("S"),"JavaScript")){return;}var js=jsDict.get("JS");if(js instanceof BaseStream){js=js.getString();}else if(typeof js!=="string"){return;}js=stringToPDFString(js).replaceAll("\x00","");if(js){(javaScript||(javaScript=new Map())).set(name,js);}}if(obj instanceof Dict&&obj.has("JavaScript")){var nameTree=new NameTree(obj.getRaw("JavaScript"),this.xref);var _iterator9=catalog_createForOfIteratorHelper(nameTree.getAll()),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step9$value=catalog_slicedToArray(_step9.value,2),key=_step9$value[0],value=_step9$value[1];appendIfJavaScriptDict(stringToPDFString(key),value);}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}var openAction=this._catDict.get("OpenAction");if(openAction){appendIfJavaScriptDict("OpenAction",openAction);}return javaScript;}},{key:"jsActions",get:function get(){var javaScript=this._collectJavaScript();var actions=collectActions(this.xref,this._catDict,DocumentActionEventType);if(javaScript){actions||(actions=Object.create(null));var _iterator10=catalog_createForOfIteratorHelper(javaScript),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _step10$value=catalog_slicedToArray(_step10.value,2),key=_step10$value[0],val=_step10$value[1];if(key in actions){actions[key].push(val);}else{actions[key]=[val];}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}}return shadow(this,"jsActions",actions);}},{key:"fontFallback",value:function(){var _fontFallback=catalog_asyncToGenerator(/*#__PURE__*/catalog_regeneratorRuntime().mark(function _callee(id,handler){var translatedFonts,_iterator11,_step11,translatedFont;return catalog_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all(this.fontCache);case 2:translatedFonts=_context.sent;_iterator11=catalog_createForOfIteratorHelper(translatedFonts);_context.prev=4;_iterator11.s();case 6:if((_step11=_iterator11.n()).done){_context.next=13;break;}translatedFont=_step11.value;if(!(translatedFont.loadedName===id)){_context.next=11;break;}translatedFont.fallback(handler);return _context.abrupt("return");case 11:_context.next=6;break;case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context["catch"](4);_iterator11.e(_context.t0);case 18:_context.prev=18;_iterator11.f();return _context.finish(18);case 21:case"end":return _context.stop();}},_callee,this,[[4,15,18,21]]);}));function fontFallback(_x,_x2){return _fontFallback.apply(this,arguments);}return fontFallback;}()},{key:"cleanup",value:function(){var _cleanup=catalog_asyncToGenerator(/*#__PURE__*/catalog_regeneratorRuntime().mark(function _callee2(){var manuallyTriggered,translatedFonts,_iterator12,_step12,dict,_args2=arguments;return catalog_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:manuallyTriggered=_args2.length>0&&_args2[0]!==undefined?_args2[0]:false;clearGlobalCaches();this.globalImageCache.clear(manuallyTriggered);this.pageKidsCountCache.clear();this.pageIndexCache.clear();this.nonBlendModesSet.clear();_context2.next=8;return Promise.all(this.fontCache);case 8:translatedFonts=_context2.sent;_iterator12=catalog_createForOfIteratorHelper(translatedFonts);try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){dict=_step12.value.dict;delete dict.cacheKey;}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}this.fontCache.clear();this.builtInCMapCache.clear();this.standardFontDataCache.clear();this.systemFontCache.clear();case 15:case"end":return _context2.stop();}},_callee2,this);}));function cleanup(){return _cleanup.apply(this,arguments);}return cleanup;}()},{key:"getPageDict",value:function(){var _getPageDict=catalog_asyncToGenerator(/*#__PURE__*/catalog_regeneratorRuntime().mark(function _callee3(pageIndex){var nodesToVisit,visitedNodes,pagesRef,xref,pageKidsCountCache,pageIndexCache,currentPageIndex,currentNode,_count,obj,type,objId,count,kids,_type,last;return catalog_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:nodesToVisit=[this.toplevelPagesDict];visitedNodes=new RefSet();pagesRef=this._catDict.getRaw("Pages");if(pagesRef instanceof Ref){visitedNodes.put(pagesRef);}xref=this.xref,pageKidsCountCache=this.pageKidsCountCache,pageIndexCache=this.pageIndexCache;currentPageIndex=0;case 6:if(!nodesToVisit.length){_context3.next=67;break;}currentNode=nodesToVisit.pop();if(!(currentNode instanceof Ref)){_context3.next=34;break;}_count=pageKidsCountCache.get(currentNode);if(!(_count>=0&&currentPageIndex+_count<=pageIndex)){_context3.next=13;break;}currentPageIndex+=_count;return _context3.abrupt("continue",6);case 13:if(!visitedNodes.has(currentNode)){_context3.next=15;break;}throw new FormatError("Pages tree contains circular reference.");case 15:visitedNodes.put(currentNode);_context3.next=18;return xref.fetchAsync(currentNode);case 18:obj=_context3.sent;if(!(obj instanceof Dict)){_context3.next=32;break;}type=obj.getRaw("Type");if(!(type instanceof Ref)){_context3.next=25;break;}_context3.next=24;return xref.fetchAsync(type);case 24:type=_context3.sent;case 25:if(!(isName(type,"Page")||!obj.has("Kids"))){_context3.next=32;break;}if(!pageKidsCountCache.has(currentNode)){pageKidsCountCache.put(currentNode,1);}if(!pageIndexCache.has(currentNode)){pageIndexCache.put(currentNode,currentPageIndex);}if(!(currentPageIndex===pageIndex)){_context3.next=30;break;}return _context3.abrupt("return",[obj,currentNode]);case 30:currentPageIndex++;return _context3.abrupt("continue",6);case 32:nodesToVisit.push(obj);return _context3.abrupt("continue",6);case 34:if(currentNode instanceof Dict){_context3.next=36;break;}throw new FormatError("Page dictionary kid reference points to wrong type of object.");case 36:objId=currentNode.objId;count=currentNode.getRaw("Count");if(!(count instanceof Ref)){_context3.next=42;break;}_context3.next=41;return xref.fetchAsync(count);case 41:count=_context3.sent;case 42:if(!(Number.isInteger(count)&&count>=0)){_context3.next=47;break;}if(objId&&!pageKidsCountCache.has(objId)){pageKidsCountCache.put(objId,count);}if(!(currentPageIndex+count<=pageIndex)){_context3.next=47;break;}currentPageIndex+=count;return _context3.abrupt("continue",6);case 47:kids=currentNode.getRaw("Kids");if(!(kids instanceof Ref)){_context3.next=52;break;}_context3.next=51;return xref.fetchAsync(kids);case 51:kids=_context3.sent;case 52:if(Array.isArray(kids)){_context3.next=64;break;}_type=currentNode.getRaw("Type");if(!(_type instanceof Ref)){_context3.next=58;break;}_context3.next=57;return xref.fetchAsync(_type);case 57:_type=_context3.sent;case 58:if(!(isName(_type,"Page")||!currentNode.has("Kids"))){_context3.next=63;break;}if(!(currentPageIndex===pageIndex)){_context3.next=61;break;}return _context3.abrupt("return",[currentNode,null]);case 61:currentPageIndex++;return _context3.abrupt("continue",6);case 63:throw new FormatError("Page dictionary kids object is not an array.");case 64:for(last=kids.length-1;last>=0;last--){nodesToVisit.push(kids[last]);}_context3.next=6;break;case 67:throw new Error("Page index ".concat(pageIndex," not found."));case 68:case"end":return _context3.stop();}},_callee3,this);}));function getPageDict(_x3){return _getPageDict.apply(this,arguments);}return getPageDict;}()},{key:"getAllPageDicts",value:function(){var _getAllPageDicts=catalog_asyncToGenerator(/*#__PURE__*/catalog_regeneratorRuntime().mark(function _callee4(){var recoveryMode,ignoreErrors,queue,visitedNodes,pagesRef,map,xref,pageIndexCache,pageIndex,addPageDict,addPageError,queueItem,currentNode,posInKids,kids,kidObj,obj,type,_args4=arguments;return catalog_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:addPageError=function _addPageError(error){if(error instanceof XRefEntryException&&!recoveryMode){throw error;}if(recoveryMode&&ignoreErrors&&pageIndex===0){warn("getAllPageDicts - Skipping invalid first page: \"".concat(error,"\"."));error=Dict.empty;}map.set(pageIndex++,[error,null]);};addPageDict=function _addPageDict(pageDict,pageRef){if(pageRef&&!pageIndexCache.has(pageRef)){pageIndexCache.put(pageRef,pageIndex);}map.set(pageIndex++,[pageDict,pageRef]);};recoveryMode=_args4.length>0&&_args4[0]!==undefined?_args4[0]:false;ignoreErrors=this.pdfManager.evaluatorOptions.ignoreErrors;queue=[{currentNode:this.toplevelPagesDict,posInKids:0}];visitedNodes=new RefSet();pagesRef=this._catDict.getRaw("Pages");if(pagesRef instanceof Ref){visitedNodes.put(pagesRef);}map=new Map(),xref=this.xref,pageIndexCache=this.pageIndexCache;pageIndex=0;case 10:if(!(queue.length>0)){_context4.next=70;break;}queueItem=queue.at(-1);currentNode=queueItem.currentNode,posInKids=queueItem.posInKids;kids=currentNode.getRaw("Kids");if(!(kids instanceof Ref)){_context4.next=25;break;}_context4.prev=15;_context4.next=18;return xref.fetchAsync(kids);case 18:kids=_context4.sent;_context4.next=25;break;case 21:_context4.prev=21;_context4.t0=_context4["catch"](15);addPageError(_context4.t0);return _context4.abrupt("break",70);case 25:if(Array.isArray(kids)){_context4.next=28;break;}addPageError(new FormatError("Page dictionary kids object is not an array."));return _context4.abrupt("break",70);case 28:if(!(posInKids>=kids.length)){_context4.next=31;break;}queue.pop();return _context4.abrupt("continue",10);case 31:kidObj=kids[posInKids];obj=void 0;if(!(kidObj instanceof Ref)){_context4.next=50;break;}if(!visitedNodes.has(kidObj)){_context4.next=37;break;}addPageError(new FormatError("Pages tree contains circular reference."));return _context4.abrupt("break",70);case 37:visitedNodes.put(kidObj);_context4.prev=38;_context4.next=41;return xref.fetchAsync(kidObj);case 41:obj=_context4.sent;_context4.next=48;break;case 44:_context4.prev=44;_context4.t1=_context4["catch"](38);addPageError(_context4.t1);return _context4.abrupt("break",70);case 48:_context4.next=51;break;case 50:obj=kidObj;case 51:if(obj instanceof Dict){_context4.next=54;break;}addPageError(new FormatError("Page dictionary kid reference points to wrong type of object."));return _context4.abrupt("break",70);case 54:type=obj.getRaw("Type");if(!(type instanceof Ref)){_context4.next=66;break;}_context4.prev=56;_context4.next=59;return xref.fetchAsync(type);case 59:type=_context4.sent;_context4.next=66;break;case 62:_context4.prev=62;_context4.t2=_context4["catch"](56);addPageError(_context4.t2);return _context4.abrupt("break",70);case 66:if(isName(type,"Page")||!obj.has("Kids")){addPageDict(obj,kidObj instanceof Ref?kidObj:null);}else{queue.push({currentNode:obj,posInKids:0});}queueItem.posInKids++;_context4.next=10;break;case 70:return _context4.abrupt("return",map);case 71:case"end":return _context4.stop();}},_callee4,this,[[15,21],[38,44],[56,62]]);}));function getAllPageDicts(){return _getAllPageDicts.apply(this,arguments);}return getAllPageDicts;}()},{key:"getPageIndex",value:function getPageIndex(pageRef){var _this2=this;var cachedPageIndex=this.pageIndexCache.get(pageRef);if(cachedPageIndex!==undefined){return Promise.resolve(cachedPageIndex);}var xref=this.xref;function pagesBeforeRef(kidRef){var total=0,parentRef;return xref.fetchAsync(kidRef).then(function(node){if(isRefsEqual(kidRef,pageRef)&&!isDict(node,"Page")&&!(node instanceof Dict&&!node.has("Type")&&node.has("Contents"))){throw new FormatError("The reference does not point to a /Page dictionary.");}if(!node){return null;}if(!(node instanceof Dict)){throw new FormatError("Node must be a dictionary.");}parentRef=node.getRaw("Parent");return node.getAsync("Parent");}).then(function(parent){if(!parent){return null;}if(!(parent instanceof Dict)){throw new FormatError("Parent must be a dictionary.");}return parent.getAsync("Kids");}).then(function(kids){if(!kids){return null;}var kidPromises=[];var found=false;var _iterator13=catalog_createForOfIteratorHelper(kids),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var kid=_step13.value;if(!(kid instanceof Ref)){throw new FormatError("Kid must be a reference.");}if(isRefsEqual(kid,kidRef)){found=true;break;}kidPromises.push(xref.fetchAsync(kid).then(function(obj){if(!(obj instanceof Dict)){throw new FormatError("Kid node must be a dictionary.");}if(obj.has("Count")){total+=obj.get("Count");}else{total++;}}));}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}if(!found){throw new FormatError("Kid reference not found in parent's kids.");}return Promise.all(kidPromises).then(function(){return[total,parentRef];});});}var total=0;var next=function next(ref){return pagesBeforeRef(ref).then(function(args){if(!args){_this2.pageIndexCache.put(pageRef,total);return total;}var _args5=catalog_slicedToArray(args,2),count=_args5[0],parentRef=_args5[1];total+=count;return next(parentRef);});};return next(pageRef);}},{key:"baseUrl",get:function get(){var uri=this._catDict.get("URI");if(uri instanceof Dict){var base=uri.get("Base");if(typeof base==="string"){var absoluteUrl=createValidAbsoluteUrl(base,null,{tryConvertEncoding:true});if(absoluteUrl){return shadow(this,"baseUrl",absoluteUrl.href);}}}return shadow(this,"baseUrl",this.pdfManager.docBaseUrl);}}],[{key:"parseDestDictionary",value:function parseDestDictionary(_ref){var destDict=_ref.destDict,resultObj=_ref.resultObj,_ref$docBaseUrl=_ref.docBaseUrl,docBaseUrl=_ref$docBaseUrl===void 0?null:_ref$docBaseUrl,_ref$docAttachments=_ref.docAttachments,docAttachments=_ref$docAttachments===void 0?null:_ref$docAttachments;if(!(destDict instanceof Dict)){warn("parseDestDictionary: `destDict` must be a dictionary.");return;}var action=destDict.get("A"),url,dest;if(!(action instanceof Dict)){if(destDict.has("Dest")){action=destDict.get("Dest");}else{action=destDict.get("AA");if(action instanceof Dict){if(action.has("D")){action=action.get("D");}else if(action.has("U")){action=action.get("U");}}}}if(action instanceof Dict){var actionType=action.get("S");if(!(actionType instanceof Name)){warn("parseDestDictionary: Invalid type in Action dictionary.");return;}var actionName=actionType.name;switch(actionName){case"ResetForm":var flags=action.get("Flags");var include=((typeof flags==="number"?flags:0)&1)===0;var fields=[];var refs=[];var _iterator14=catalog_createForOfIteratorHelper(action.get("Fields")||[]),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var obj=_step14.value;if(obj instanceof Ref){refs.push(obj.toString());}else if(typeof obj==="string"){fields.push(stringToPDFString(obj));}}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}resultObj.resetForm={fields:fields,refs:refs,include:include};break;case"URI":url=action.get("URI");if(url instanceof Name){url="/"+url.name;}break;case"GoTo":dest=action.get("D");break;case"Launch":case"GoToR":var urlDict=action.get("F");if(urlDict instanceof Dict){url=urlDict.get("F")||null;}else if(typeof urlDict==="string"){url=urlDict;}var remoteDest=fetchRemoteDest(action);if(remoteDest&&typeof url==="string"){url=url.split("#",1)[0]+"#"+remoteDest;}var newWindow=action.get("NewWindow");if(typeof newWindow==="boolean"){resultObj.newWindow=newWindow;}break;case"GoToE":var target=action.get("T");var attachment;if(docAttachments&&target instanceof Dict){var relationship=target.get("R");var name=target.get("N");if(isName(relationship,"C")&&typeof name==="string"){attachment=docAttachments[stringToPDFString(name)];}}if(attachment){resultObj.attachment=attachment;var attachmentDest=fetchRemoteDest(action);if(attachmentDest){resultObj.attachmentDest=attachmentDest;}}else{warn("parseDestDictionary - unimplemented \"GoToE\" action.");}break;case"Named":var namedAction=action.get("N");if(namedAction instanceof Name){resultObj.action=namedAction.name;}break;case"SetOCGState":var state=action.get("State");var preserveRB=action.get("PreserveRB");if(!Array.isArray(state)||state.length===0){break;}var stateArr=[];var _iterator15=catalog_createForOfIteratorHelper(state),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var elem=_step15.value;if(elem instanceof Name){switch(elem.name){case"ON":case"OFF":case"Toggle":stateArr.push(elem.name);break;}}else if(elem instanceof Ref){stateArr.push(elem.toString());}}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}if(stateArr.length!==state.length){break;}resultObj.setOCGState={state:stateArr,preserveRB:typeof preserveRB==="boolean"?preserveRB:true};break;case"JavaScript":var jsAction=action.get("JS");var js;if(jsAction instanceof BaseStream){js=jsAction.getString();}else if(typeof jsAction==="string"){js=jsAction;}var jsURL=js&&recoverJsURL(stringToPDFString(js));if(jsURL){url=jsURL.url;resultObj.newWindow=jsURL.newWindow;break;}default:if(actionName==="JavaScript"||actionName==="SubmitForm"){break;}warn("parseDestDictionary - unsupported action: \"".concat(actionName,"\"."));break;}}else if(destDict.has("Dest")){dest=destDict.get("Dest");}if(typeof url==="string"){var absoluteUrl=createValidAbsoluteUrl(url,docBaseUrl,{addDefaultProtocol:true,tryConvertEncoding:true});if(absoluteUrl){resultObj.url=absoluteUrl.href;}resultObj.unsafeUrl=url;}if(dest){if(dest instanceof Name){dest=dest.name;}if(typeof dest==="string"){resultObj.dest=stringToPDFString(dest);}else if(Array.isArray(dest)){resultObj.dest=dest;}}}}]);return Catalog;}();
;// CONCATENATED MODULE: ./src/core/object_loader.js
function object_loader_typeof(o){"@babel/helpers - typeof";return object_loader_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},object_loader_typeof(o);}function object_loader_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */object_loader_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==object_loader_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(object_loader_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function object_loader_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function object_loader_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){object_loader_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){object_loader_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function object_loader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function object_loader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,object_loader_toPropertyKey(descriptor.key),descriptor);}}function object_loader_createClass(Constructor,protoProps,staticProps){if(protoProps)object_loader_defineProperties(Constructor.prototype,protoProps);if(staticProps)object_loader_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function object_loader_toPropertyKey(arg){var key=object_loader_toPrimitive(arg,"string");return object_loader_typeof(key)==="symbol"?key:String(key);}function object_loader_toPrimitive(input,hint){if(object_loader_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(object_loader_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function object_loader_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=object_loader_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function object_loader_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return object_loader_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return object_loader_arrayLikeToArray(o,minLen);}function object_loader_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function mayHaveChildren(value){return value instanceof Ref||value instanceof Dict||value instanceof BaseStream||Array.isArray(value);}function addChildren(node,nodesToVisit){if(node instanceof Dict){node=node.getRawValues();}else if(node instanceof BaseStream){node=node.dict.getRawValues();}else if(!Array.isArray(node)){return;}var _iterator=object_loader_createForOfIteratorHelper(node),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var rawValue=_step.value;if(mayHaveChildren(rawValue)){nodesToVisit.push(rawValue);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}var ObjectLoader=/*#__PURE__*/function(){function ObjectLoader(dict,keys,xref){object_loader_classCallCheck(this,ObjectLoader);this.dict=dict;this.keys=keys;this.xref=xref;this.refSet=null;}object_loader_createClass(ObjectLoader,[{key:"load",value:function(){var _load=object_loader_asyncToGenerator(/*#__PURE__*/object_loader_regeneratorRuntime().mark(function _callee(){var keys,dict,nodesToVisit,_iterator2,_step2,key,rawValue;return object_loader_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!this.xref.stream.isDataLoaded){_context.next=2;break;}return _context.abrupt("return",undefined);case 2:keys=this.keys,dict=this.dict;this.refSet=new RefSet();nodesToVisit=[];_iterator2=object_loader_createForOfIteratorHelper(keys);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){key=_step2.value;rawValue=dict.getRaw(key);if(rawValue!==undefined){nodesToVisit.push(rawValue);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return _context.abrupt("return",this._walk(nodesToVisit));case 8:case"end":return _context.stop();}},_callee,this);}));function load(){return _load.apply(this,arguments);}return load;}()},{key:"_walk",value:function(){var _walk2=object_loader_asyncToGenerator(/*#__PURE__*/object_loader_regeneratorRuntime().mark(function _callee2(nodesToVisit){var nodesToRevisit,pendingRequests,currentNode,manager,baseStreams,foundMissingData,_iterator3,_step3,stream,_iterator4,_step4,node;return object_loader_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:nodesToRevisit=[];pendingRequests=[];case 2:if(!nodesToVisit.length){_context2.next=48;break;}currentNode=nodesToVisit.pop();if(!(currentNode instanceof Ref)){_context2.next=21;break;}if(!this.refSet.has(currentNode)){_context2.next=7;break;}return _context2.abrupt("continue",2);case 7:_context2.prev=7;this.refSet.put(currentNode);currentNode=this.xref.fetch(currentNode);_context2.next=21;break;case 12:_context2.prev=12;_context2.t0=_context2["catch"](7);if(_context2.t0 instanceof MissingDataException){_context2.next=19;break;}warn("ObjectLoader._walk - requesting all data: \"".concat(_context2.t0,"\"."));this.refSet=null;manager=this.xref.stream.manager;return _context2.abrupt("return",manager.requestAllChunks());case 19:nodesToRevisit.push(currentNode);pendingRequests.push({begin:_context2.t0.begin,end:_context2.t0.end});case 21:if(!(currentNode instanceof BaseStream)){_context2.next=45;break;}baseStreams=currentNode.getBaseStreams();if(!baseStreams){_context2.next=45;break;}foundMissingData=false;_iterator3=object_loader_createForOfIteratorHelper(baseStreams);_context2.prev=26;_iterator3.s();case 28:if((_step3=_iterator3.n()).done){_context2.next=36;break;}stream=_step3.value;if(!stream.isDataLoaded){_context2.next=32;break;}return _context2.abrupt("continue",34);case 32:foundMissingData=true;pendingRequests.push({begin:stream.start,end:stream.end});case 34:_context2.next=28;break;case 36:_context2.next=41;break;case 38:_context2.prev=38;_context2.t1=_context2["catch"](26);_iterator3.e(_context2.t1);case 41:_context2.prev=41;_iterator3.f();return _context2.finish(41);case 44:if(foundMissingData){nodesToRevisit.push(currentNode);}case 45:addChildren(currentNode,nodesToVisit);_context2.next=2;break;case 48:if(!pendingRequests.length){_context2.next=54;break;}_context2.next=51;return this.xref.stream.manager.requestRanges(pendingRequests);case 51:_iterator4=object_loader_createForOfIteratorHelper(nodesToRevisit);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){node=_step4.value;if(node instanceof Ref){this.refSet.remove(node);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return _context2.abrupt("return",this._walk(nodesToRevisit));case 54:this.refSet=null;return _context2.abrupt("return",undefined);case 56:case"end":return _context2.stop();}},_callee2,this,[[7,12],[26,38,41,44]]);}));function _walk(_x){return _walk2.apply(this,arguments);}return _walk;}()}]);return ObjectLoader;}();
;// CONCATENATED MODULE: ./src/core/xfa/symbol_utils.js
var $acceptWhitespace=Symbol();var $addHTML=Symbol();var $appendChild=Symbol();var $childrenToHTML=Symbol();var $clean=Symbol();var $cleanPage=Symbol();var $cleanup=Symbol();var $clone=Symbol();var $consumed=Symbol();var $content=Symbol("content");var $data=Symbol("data");var $dump=Symbol();var $extra=Symbol("extra");var $finalize=Symbol();var $flushHTML=Symbol();var $getAttributeIt=Symbol();var $getAttributes=Symbol();var $getAvailableSpace=Symbol();var $getChildrenByClass=Symbol();var $getChildrenByName=Symbol();var $getChildrenByNameIt=Symbol();var $getDataValue=Symbol();var $getExtra=Symbol();var $getRealChildrenByNameIt=Symbol();var $getChildren=Symbol();var $getContainedChildren=Symbol();var $getNextPage=Symbol();var $getSubformParent=Symbol();var $getParent=Symbol();var $getTemplateRoot=Symbol();var $globalData=Symbol();var $hasSettableValue=Symbol();var $ids=Symbol();var $indexOf=Symbol();var $insertAt=Symbol();var $isCDATAXml=Symbol();var $isBindable=Symbol();var $isDataValue=Symbol();var $isDescendent=Symbol();var $isNsAgnostic=Symbol();var $isSplittable=Symbol();var $isThereMoreWidth=Symbol();var $isTransparent=Symbol();var $isUsable=Symbol();var $lastAttribute=Symbol();var $namespaceId=Symbol("namespaceId");var $nodeName=Symbol("nodeName");var $nsAttributes=Symbol();var $onChild=Symbol();var $onChildCheck=Symbol();var $onText=Symbol();var $pushGlyphs=Symbol();var $popPara=Symbol();var $pushPara=Symbol();var $removeChild=Symbol();var $root=Symbol("root");var $resolvePrototypes=Symbol();var $searchNode=Symbol();var $setId=Symbol();var $setSetAttributes=Symbol();var $setValue=Symbol();var $tabIndex=Symbol();var $text=Symbol();var $toPages=Symbol();var $toHTML=Symbol();var $toString=Symbol();var $toStyle=Symbol();var $uid=Symbol("uid");
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.ends-with.js
var es_string_ends_with = __webpack_require__(6133);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-names.js
var es_object_get_own_property_names = __webpack_require__(353);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-exception.constructor.js
var web_dom_exception_constructor = __webpack_require__(2822);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-exception.stack.js
var web_dom_exception_stack = __webpack_require__(9709);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-exception.to-string-tag.js
var web_dom_exception_to_string_tag = __webpack_require__(2642);
;// CONCATENATED MODULE: ./src/core/xfa/namespaces.js
var $buildXFAObject=Symbol();var NamespaceIds={config:{id:0,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xci/");}},connectionSet:{id:1,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-connection-set/");}},datasets:{id:2,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-data/");}},form:{id:3,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-form/");}},localeSet:{id:4,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-locale-set/");}},pdf:{id:5,check:function check(ns){return ns==="http://ns.adobe.com/xdp/pdf/";}},signature:{id:6,check:function check(ns){return ns==="http://www.w3.org/2000/09/xmldsig#";}},sourceSet:{id:7,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-source-set/");}},stylesheet:{id:8,check:function check(ns){return ns==="http://www.w3.org/1999/XSL/Transform";}},template:{id:9,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xfa-template/");}},xdc:{id:10,check:function check(ns){return ns.startsWith("http://www.xfa.org/schema/xdc/");}},xdp:{id:11,check:function check(ns){return ns==="http://ns.adobe.com/xdp/";}},xfdf:{id:12,check:function check(ns){return ns==="http://ns.adobe.com/xfdf/";}},xhtml:{id:13,check:function check(ns){return ns==="http://www.w3.org/1999/xhtml";}},xmpmeta:{id:14,check:function check(ns){return ns==="http://ns.adobe.com/xmpmeta/";}}};
;// CONCATENATED MODULE: ./src/core/xfa/utils.js
function utils_typeof(o){"@babel/helpers - typeof";return utils_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},utils_typeof(o);}function utils_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function utils_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,utils_toPropertyKey(descriptor.key),descriptor);}}function utils_createClass(Constructor,protoProps,staticProps){if(protoProps)utils_defineProperties(Constructor.prototype,protoProps);if(staticProps)utils_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function utils_toPropertyKey(arg){var key=utils_toPrimitive(arg,"string");return utils_typeof(key)==="symbol"?key:String(key);}function utils_toPrimitive(input,hint){if(utils_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(utils_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function utils_slicedToArray(arr,i){return utils_arrayWithHoles(arr)||utils_iterableToArrayLimit(arr,i)||utils_unsupportedIterableToArray(arr,i)||utils_nonIterableRest();}function utils_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return utils_arrayLikeToArray(o,minLen);}function utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function utils_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function utils_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}var dimConverters={pt:function pt(x){return x;},cm:function cm(x){return x/2.54*72;},mm:function mm(x){return x/(10*2.54)*72;},in:function _in(x){return x*72;},px:function px(x){return x;}};var measurementPattern=/([+-]?\d+\.?\d*)(.*)/;function stripQuotes(str){if(str.startsWith("'")||str.startsWith('"')){return str.slice(1,-1);}return str;}function getInteger(_ref){var data=_ref.data,defaultValue=_ref.defaultValue,validate=_ref.validate;if(!data){return defaultValue;}data=data.trim();var n=parseInt(data,10);if(!isNaN(n)&&validate(n)){return n;}return defaultValue;}function getFloat(_ref2){var data=_ref2.data,defaultValue=_ref2.defaultValue,validate=_ref2.validate;if(!data){return defaultValue;}data=data.trim();var n=parseFloat(data);if(!isNaN(n)&&validate(n)){return n;}return defaultValue;}function getKeyword(_ref3){var data=_ref3.data,defaultValue=_ref3.defaultValue,validate=_ref3.validate;if(!data){return defaultValue;}data=data.trim();if(validate(data)){return data;}return defaultValue;}function getStringOption(data,options){return getKeyword({data:data,defaultValue:options[0],validate:function validate(k){return options.includes(k);}});}function getMeasurement(str){var def=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"0";def||(def="0");if(!str){return getMeasurement(def);}var match=str.trim().match(measurementPattern);if(!match){return getMeasurement(def);}var _match=utils_slicedToArray(match,3),valueStr=_match[1],unit=_match[2];var value=parseFloat(valueStr);if(isNaN(value)){return getMeasurement(def);}if(value===0){return 0;}var conv=dimConverters[unit];if(conv){return conv(value);}return value;}function getRatio(data){if(!data){return{num:1,den:1};}var ratio=data.trim().split(/\s*:\s*/).map(function(x){return parseFloat(x);}).filter(function(x){return!isNaN(x);});if(ratio.length===1){ratio.push(1);}if(ratio.length===0){return{num:1,den:1};}var _ratio=utils_slicedToArray(ratio,2),num=_ratio[0],den=_ratio[1];return{num:num,den:den};}function getRelevant(data){if(!data){return[];}return data.trim().split(/\s+/).map(function(e){return{excluded:e[0]==="-",viewname:e.substring(1)};});}function getColor(data){var def=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[0,0,0];var _def=utils_slicedToArray(def,3),r=_def[0],g=_def[1],b=_def[2];if(!data){return{r:r,g:g,b:b};}var color=data.trim().split(/\s*,\s*/).map(function(c){return Math.min(Math.max(0,parseInt(c.trim(),10)),255);}).map(function(c){return isNaN(c)?0:c;});if(color.length<3){return{r:r,g:g,b:b};}var _color=utils_slicedToArray(color,3);r=_color[0];g=_color[1];b=_color[2];return{r:r,g:g,b:b};}function getBBox(data){var def=-1;if(!data){return{x:def,y:def,width:def,height:def};}var bbox=data.trim().split(/\s*,\s*/).map(function(m){return getMeasurement(m,"-1");});if(bbox.length<4||bbox[2]<0||bbox[3]<0){return{x:def,y:def,width:def,height:def};}var _bbox=utils_slicedToArray(bbox,4),x=_bbox[0],y=_bbox[1],width=_bbox[2],height=_bbox[3];return{x:x,y:y,width:width,height:height};}var HTMLResult=/*#__PURE__*/function(){function HTMLResult(success,html,bbox,breakNode){utils_classCallCheck(this,HTMLResult);this.success=success;this.html=html;this.bbox=bbox;this.breakNode=breakNode;}utils_createClass(HTMLResult,[{key:"isBreak",value:function isBreak(){return!!this.breakNode;}}],[{key:"FAILURE",get:function get(){return shadow(this,"FAILURE",new HTMLResult(false,null,null,null));}},{key:"EMPTY",get:function get(){return shadow(this,"EMPTY",new HTMLResult(true,null,null,null));}},{key:"breakNode",value:function breakNode(node){return new HTMLResult(false,null,null,node);}},{key:"success",value:function success(html){var bbox=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return new HTMLResult(true,html,bbox,null);}}]);return HTMLResult;}();
;// CONCATENATED MODULE: ./src/core/xfa/fonts.js
function xfa_fonts_typeof(o){"@babel/helpers - typeof";return xfa_fonts_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},xfa_fonts_typeof(o);}function core_xfa_fonts_slicedToArray(arr,i){return core_xfa_fonts_arrayWithHoles(arr)||core_xfa_fonts_iterableToArrayLimit(arr,i)||core_xfa_fonts_unsupportedIterableToArray(arr,i)||core_xfa_fonts_nonIterableRest();}function core_xfa_fonts_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function core_xfa_fonts_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function core_xfa_fonts_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function core_xfa_fonts_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=core_xfa_fonts_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function core_xfa_fonts_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return core_xfa_fonts_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return core_xfa_fonts_arrayLikeToArray(o,minLen);}function core_xfa_fonts_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function xfa_fonts_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function xfa_fonts_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,xfa_fonts_toPropertyKey(descriptor.key),descriptor);}}function xfa_fonts_createClass(Constructor,protoProps,staticProps){if(protoProps)xfa_fonts_defineProperties(Constructor.prototype,protoProps);if(staticProps)xfa_fonts_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function xfa_fonts_toPropertyKey(arg){var key=xfa_fonts_toPrimitive(arg,"string");return xfa_fonts_typeof(key)==="symbol"?key:String(key);}function xfa_fonts_toPrimitive(input,hint){if(xfa_fonts_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(xfa_fonts_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var FontFinder=/*#__PURE__*/function(){function FontFinder(pdfFonts){xfa_fonts_classCallCheck(this,FontFinder);this.fonts=new Map();this.cache=new Map();this.warned=new Set();this.defaultFont=null;this.add(pdfFonts);}xfa_fonts_createClass(FontFinder,[{key:"add",value:function add(pdfFonts){var reallyMissingFonts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var _iterator=core_xfa_fonts_createForOfIteratorHelper(pdfFonts),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var pdfFont=_step.value;this.addPdfFont(pdfFont);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=core_xfa_fonts_createForOfIteratorHelper(this.fonts.values()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _pdfFont=_step2.value;if(!_pdfFont.regular){_pdfFont.regular=_pdfFont.italic||_pdfFont.bold||_pdfFont.bolditalic;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}if(!reallyMissingFonts||reallyMissingFonts.size===0){return;}var myriad=this.fonts.get("PdfJS-Fallback-PdfJS-XFA");var _iterator3=core_xfa_fonts_createForOfIteratorHelper(reallyMissingFonts),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var missing=_step3.value;this.fonts.set(missing,myriad);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}},{key:"addPdfFont",value:function addPdfFont(pdfFont){var cssFontInfo=pdfFont.cssFontInfo;var name=cssFontInfo.fontFamily;var font=this.fonts.get(name);if(!font){font=Object.create(null);this.fonts.set(name,font);if(!this.defaultFont){this.defaultFont=font;}}var property="";var fontWeight=parseFloat(cssFontInfo.fontWeight);if(parseFloat(cssFontInfo.italicAngle)!==0){property=fontWeight>=700?"bolditalic":"italic";}else if(fontWeight>=700){property="bold";}if(!property){var _pdfFont$psName,_pdfFont$psName2,_pdfFont$psName3;if(pdfFont.name.includes("Bold")||(_pdfFont$psName=pdfFont.psName)!==null&&_pdfFont$psName!==void 0&&_pdfFont$psName.includes("Bold")){property="bold";}if(pdfFont.name.includes("Italic")||pdfFont.name.endsWith("It")||(_pdfFont$psName2=pdfFont.psName)!==null&&_pdfFont$psName2!==void 0&&_pdfFont$psName2.includes("Italic")||(_pdfFont$psName3=pdfFont.psName)!==null&&_pdfFont$psName3!==void 0&&_pdfFont$psName3.endsWith("It")){property+="italic";}}if(!property){property="regular";}font[property]=pdfFont;}},{key:"getDefault",value:function getDefault(){return this.defaultFont;}},{key:"find",value:function find(fontName){var mustWarn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var font=this.fonts.get(fontName)||this.cache.get(fontName);if(font){return font;}var pattern=/,|-|_| |bolditalic|bold|italic|regular|it/gi;var name=fontName.replaceAll(pattern,"");font=this.fonts.get(name);if(font){this.cache.set(fontName,font);return font;}name=name.toLowerCase();var maybe=[];var _iterator4=core_xfa_fonts_createForOfIteratorHelper(this.fonts.entries()),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step4$value=core_xfa_fonts_slicedToArray(_step4.value,2),_family=_step4$value[0],_pdfFont4=_step4$value[1];if(_family.replaceAll(pattern,"").toLowerCase().startsWith(name)){maybe.push(_pdfFont4);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}if(maybe.length===0){var _iterator5=core_xfa_fonts_createForOfIteratorHelper(this.fonts.entries()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _pdfFont$regular$name;var _step5$value=core_xfa_fonts_slicedToArray(_step5.value,2),pdfFont=_step5$value[1];if((_pdfFont$regular$name=pdfFont.regular.name)!==null&&_pdfFont$regular$name!==void 0&&_pdfFont$regular$name.replaceAll(pattern,"").toLowerCase().startsWith(name)){maybe.push(pdfFont);}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}if(maybe.length===0){name=name.replaceAll(/psmt|mt/gi,"");var _iterator6=core_xfa_fonts_createForOfIteratorHelper(this.fonts.entries()),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _step6$value=core_xfa_fonts_slicedToArray(_step6.value,2),family=_step6$value[0],_pdfFont2=_step6$value[1];if(family.replaceAll(pattern,"").toLowerCase().startsWith(name)){maybe.push(_pdfFont2);}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}if(maybe.length===0){var _iterator7=core_xfa_fonts_createForOfIteratorHelper(this.fonts.values()),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _pdfFont3$regular$nam;var _pdfFont3=_step7.value;if((_pdfFont3$regular$nam=_pdfFont3.regular.name)!==null&&_pdfFont3$regular$nam!==void 0&&_pdfFont3$regular$nam.replaceAll(pattern,"").toLowerCase().startsWith(name)){maybe.push(_pdfFont3);}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}if(maybe.length>=1){if(maybe.length!==1&&mustWarn){warn("XFA - Too many choices to guess the correct font: ".concat(fontName));}this.cache.set(fontName,maybe[0]);return maybe[0];}if(mustWarn&&!this.warned.has(fontName)){this.warned.add(fontName);warn("XFA - Cannot find the font: ".concat(fontName));}return null;}}]);return FontFinder;}();function selectFont(xfaFont,typeface){if(xfaFont.posture==="italic"){if(xfaFont.weight==="bold"){return typeface.bolditalic;}return typeface.italic;}else if(xfaFont.weight==="bold"){return typeface.bold;}return typeface.regular;}function fonts_getMetrics(xfaFont){var real=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var pdfFont=null;if(xfaFont){var name=stripQuotes(xfaFont.typeface);var typeface=xfaFont[$globalData].fontFinder.find(name);pdfFont=selectFont(xfaFont,typeface);}if(!pdfFont){return{lineHeight:12,lineGap:2,lineNoGap:10};}var size=xfaFont.size||10;var lineHeight=pdfFont.lineHeight?Math.max(real?0:1.2,pdfFont.lineHeight):1.2;var lineGap=pdfFont.lineGap===undefined?0.2:pdfFont.lineGap;return{lineHeight:lineHeight*size,lineGap:lineGap*size,lineNoGap:Math.max(1,lineHeight-lineGap)*size};}
;// CONCATENATED MODULE: ./src/core/xfa/text.js
function text_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=text_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function text_typeof(o){"@babel/helpers - typeof";return text_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},text_typeof(o);}function text_slicedToArray(arr,i){return text_arrayWithHoles(arr)||text_iterableToArrayLimit(arr,i)||text_unsupportedIterableToArray(arr,i)||text_nonIterableRest();}function text_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function text_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return text_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return text_arrayLikeToArray(o,minLen);}function text_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function text_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function text_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function text_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function text_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,text_toPropertyKey(descriptor.key),descriptor);}}function text_createClass(Constructor,protoProps,staticProps){if(protoProps)text_defineProperties(Constructor.prototype,protoProps);if(staticProps)text_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function text_toPropertyKey(arg){var key=text_toPrimitive(arg,"string");return text_typeof(key)==="symbol"?key:String(key);}function text_toPrimitive(input,hint){if(text_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(text_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var WIDTH_FACTOR=1.02;var FontInfo=/*#__PURE__*/function(){function FontInfo(xfaFont,margin,lineHeight,fontFinder){text_classCallCheck(this,FontInfo);this.lineHeight=lineHeight;this.paraMargin=margin||{top:0,bottom:0,left:0,right:0};if(!xfaFont){var _this$defaultFont=this.defaultFont(fontFinder);var _this$defaultFont2=text_slicedToArray(_this$defaultFont,2);this.pdfFont=_this$defaultFont2[0];this.xfaFont=_this$defaultFont2[1];return;}this.xfaFont={typeface:xfaFont.typeface,posture:xfaFont.posture,weight:xfaFont.weight,size:xfaFont.size,letterSpacing:xfaFont.letterSpacing};var typeface=fontFinder.find(xfaFont.typeface);if(!typeface){var _this$defaultFont3=this.defaultFont(fontFinder);var _this$defaultFont4=text_slicedToArray(_this$defaultFont3,2);this.pdfFont=_this$defaultFont4[0];this.xfaFont=_this$defaultFont4[1];return;}this.pdfFont=selectFont(xfaFont,typeface);if(!this.pdfFont){var _this$defaultFont5=this.defaultFont(fontFinder);var _this$defaultFont6=text_slicedToArray(_this$defaultFont5,2);this.pdfFont=_this$defaultFont6[0];this.xfaFont=_this$defaultFont6[1];}}text_createClass(FontInfo,[{key:"defaultFont",value:function defaultFont(fontFinder){var font=fontFinder.find("Helvetica",false)||fontFinder.find("Myriad Pro",false)||fontFinder.find("Arial",false)||fontFinder.getDefault();if(font!==null&&font!==void 0&&font.regular){var pdfFont=font.regular;var info=pdfFont.cssFontInfo;var _xfaFont={typeface:info.fontFamily,posture:"normal",weight:"normal",size:10,letterSpacing:0};return[pdfFont,_xfaFont];}var xfaFont={typeface:"Courier",posture:"normal",weight:"normal",size:10,letterSpacing:0};return[null,xfaFont];}}]);return FontInfo;}();var FontSelector=/*#__PURE__*/function(){function FontSelector(defaultXfaFont,defaultParaMargin,defaultLineHeight,fontFinder){text_classCallCheck(this,FontSelector);this.fontFinder=fontFinder;this.stack=[new FontInfo(defaultXfaFont,defaultParaMargin,defaultLineHeight,fontFinder)];}text_createClass(FontSelector,[{key:"pushData",value:function pushData(xfaFont,margin,lineHeight){var lastFont=this.stack.at(-1);for(var _i=0,_arr=["typeface","posture","weight","size","letterSpacing"];_i<_arr.length;_i++){var name=_arr[_i];if(!xfaFont[name]){xfaFont[name]=lastFont.xfaFont[name];}}for(var _i2=0,_arr2=["top","bottom","left","right"];_i2<_arr2.length;_i2++){var _name=_arr2[_i2];if(isNaN(margin[_name])){margin[_name]=lastFont.paraMargin[_name];}}var fontInfo=new FontInfo(xfaFont,margin,lineHeight||lastFont.lineHeight,this.fontFinder);if(!fontInfo.pdfFont){fontInfo.pdfFont=lastFont.pdfFont;}this.stack.push(fontInfo);}},{key:"popFont",value:function popFont(){this.stack.pop();}},{key:"topFont",value:function topFont(){return this.stack.at(-1);}}]);return FontSelector;}();var TextMeasure=/*#__PURE__*/function(){function TextMeasure(defaultXfaFont,defaultParaMargin,defaultLineHeight,fonts){text_classCallCheck(this,TextMeasure);this.glyphs=[];this.fontSelector=new FontSelector(defaultXfaFont,defaultParaMargin,defaultLineHeight,fonts);this.extraHeight=0;}text_createClass(TextMeasure,[{key:"pushData",value:function pushData(xfaFont,margin,lineHeight){this.fontSelector.pushData(xfaFont,margin,lineHeight);}},{key:"popFont",value:function popFont(xfaFont){return this.fontSelector.popFont();}},{key:"addPara",value:function addPara(){var lastFont=this.fontSelector.topFont();this.extraHeight+=lastFont.paraMargin.top+lastFont.paraMargin.bottom;}},{key:"addString",value:function addString(str){if(!str){return;}var lastFont=this.fontSelector.topFont();var fontSize=lastFont.xfaFont.size;if(lastFont.pdfFont){var letterSpacing=lastFont.xfaFont.letterSpacing;var pdfFont=lastFont.pdfFont;var fontLineHeight=pdfFont.lineHeight||1.2;var lineHeight=lastFont.lineHeight||Math.max(1.2,fontLineHeight)*fontSize;var lineGap=pdfFont.lineGap===undefined?0.2:pdfFont.lineGap;var noGap=fontLineHeight-lineGap;var firstLineHeight=Math.max(1,noGap)*fontSize;var scale=fontSize/1000;var fallbackWidth=pdfFont.defaultWidth||pdfFont.charsToGlyphs(" ")[0].width;var _iterator=text_createForOfIteratorHelper(str.split(/[\u2029\n]/)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var line=_step.value;var encodedLine=pdfFont.encodeString(line).join("");var glyphs=pdfFont.charsToGlyphs(encodedLine);var _iterator2=text_createForOfIteratorHelper(glyphs),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var glyph=_step2.value;var width=glyph.width||fallbackWidth;this.glyphs.push([width*scale+letterSpacing,lineHeight,firstLineHeight,glyph.unicode,false]);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this.glyphs.push([0,0,0,"\n",true]);}}catch(err){_iterator.e(err);}finally{_iterator.f();}this.glyphs.pop();return;}var _iterator3=text_createForOfIteratorHelper(str.split(/[\u2029\n]/)),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _line=_step3.value;var _iterator4=text_createForOfIteratorHelper(_line.split("")),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var char=_step4.value;this.glyphs.push([fontSize,1.2*fontSize,fontSize,char,false]);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}this.glyphs.push([0,0,0,"\n",true]);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}this.glyphs.pop();}},{key:"compute",value:function compute(maxWidth){var lastSpacePos=-1,lastSpaceWidth=0,width=0,height=0,currentLineWidth=0,currentLineHeight=0;var isBroken=false;var isFirstLine=true;for(var i=0,ii=this.glyphs.length;i<ii;i++){var _this$glyphs$i=text_slicedToArray(this.glyphs[i],5),glyphWidth=_this$glyphs$i[0],lineHeight=_this$glyphs$i[1],firstLineHeight=_this$glyphs$i[2],char=_this$glyphs$i[3],isEOL=_this$glyphs$i[4];var isSpace=char===" ";var glyphHeight=isFirstLine?firstLineHeight:lineHeight;if(isEOL){width=Math.max(width,currentLineWidth);currentLineWidth=0;height+=currentLineHeight;currentLineHeight=glyphHeight;lastSpacePos=-1;lastSpaceWidth=0;isFirstLine=false;continue;}if(isSpace){if(currentLineWidth+glyphWidth>maxWidth){width=Math.max(width,currentLineWidth);currentLineWidth=0;height+=currentLineHeight;currentLineHeight=glyphHeight;lastSpacePos=-1;lastSpaceWidth=0;isBroken=true;isFirstLine=false;}else{currentLineHeight=Math.max(glyphHeight,currentLineHeight);lastSpaceWidth=currentLineWidth;currentLineWidth+=glyphWidth;lastSpacePos=i;}continue;}if(currentLineWidth+glyphWidth>maxWidth){height+=currentLineHeight;currentLineHeight=glyphHeight;if(lastSpacePos!==-1){i=lastSpacePos;width=Math.max(width,lastSpaceWidth);currentLineWidth=0;lastSpacePos=-1;lastSpaceWidth=0;}else{width=Math.max(width,currentLineWidth);currentLineWidth=glyphWidth;}isBroken=true;isFirstLine=false;continue;}currentLineWidth+=glyphWidth;currentLineHeight=Math.max(glyphHeight,currentLineHeight);}width=Math.max(width,currentLineWidth);height+=currentLineHeight+this.extraHeight;return{width:WIDTH_FACTOR*width,height:height,isBroken:isBroken};}}]);return TextMeasure;}();
;// CONCATENATED MODULE: ./src/core/xfa/som.js
function som_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=som_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function som_slicedToArray(arr,i){return som_arrayWithHoles(arr)||som_iterableToArrayLimit(arr,i)||som_unsupportedIterableToArray(arr,i)||som_nonIterableRest();}function som_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function som_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return som_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return som_arrayLikeToArray(o,minLen);}function som_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function som_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function som_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}var namePattern=/^[^.[]+/;var indexPattern=/^[^\]]+/;var operators={dot:0,dotDot:1,dotHash:2,dotBracket:3,dotParen:4};var shortcuts=new Map([["$data",function(root,current){return root.datasets?root.datasets.data:root;}],["$record",function(root,current){return(root.datasets?root.datasets.data:root)[$getChildren]()[0];}],["$template",function(root,current){return root.template;}],["$connectionSet",function(root,current){return root.connectionSet;}],["$form",function(root,current){return root.form;}],["$layout",function(root,current){return root.layout;}],["$host",function(root,current){return root.host;}],["$dataWindow",function(root,current){return root.dataWindow;}],["$event",function(root,current){return root.event;}],["!",function(root,current){return root.datasets;}],["$xfa",function(root,current){return root;}],["xfa",function(root,current){return root;}],["$",function(root,current){return current;}]]);var somCache=new WeakMap();function parseIndex(index){index=index.trim();if(index==="*"){return Infinity;}return parseInt(index,10)||0;}function parseExpression(expr,dotDotAllowed){var noExpr=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var match=expr.match(namePattern);if(!match){return null;}var _match=match,_match2=som_slicedToArray(_match,1),name=_match2[0];var parsed=[{name:name,cacheName:"."+name,index:0,js:null,formCalc:null,operator:operators.dot}];var pos=name.length;while(pos<expr.length){var spos=pos;var char=expr.charAt(pos++);if(char==="["){match=expr.slice(pos).match(indexPattern);if(!match){warn("XFA - Invalid index in SOM expression");return null;}parsed.at(-1).index=parseIndex(match[0]);pos+=match[0].length+1;continue;}var operator=void 0;switch(expr.charAt(pos)){case".":if(!dotDotAllowed){return null;}pos++;operator=operators.dotDot;break;case"#":pos++;operator=operators.dotHash;break;case"[":if(noExpr){warn("XFA - SOM expression contains a FormCalc subexpression which is not supported for now.");return null;}operator=operators.dotBracket;break;case"(":if(noExpr){warn("XFA - SOM expression contains a JavaScript subexpression which is not supported for now.");return null;}operator=operators.dotParen;break;default:operator=operators.dot;break;}match=expr.slice(pos).match(namePattern);if(!match){break;}var _match3=match;var _match4=som_slicedToArray(_match3,1);name=_match4[0];pos+=name.length;parsed.push({name:name,cacheName:expr.slice(spos,pos),operator:operator,index:0,js:null,formCalc:null});}return parsed;}function searchNode(root,container,expr){var dotDotAllowed=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var useCache=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var parsed=parseExpression(expr,dotDotAllowed);if(!parsed){return null;}var fn=shortcuts.get(parsed[0].name);var i=0;var isQualified;if(fn){isQualified=true;root=[fn(root,container)];i=1;}else{isQualified=container===null;root=[container||root];}var _loop=function _loop(){var _parsed$i=parsed[i],name=_parsed$i.name,cacheName=_parsed$i.cacheName,operator=_parsed$i.operator,index=_parsed$i.index;var nodes=[];var _iterator=som_createForOfIteratorHelper(root),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var node=_step.value;if(!node.isXFAObject){continue;}var children=void 0,cached=void 0;if(useCache){cached=somCache.get(node);if(!cached){cached=new Map();somCache.set(node,cached);}children=cached.get(cacheName);}if(!children){switch(operator){case operators.dot:children=node[$getChildrenByName](name,false);break;case operators.dotDot:children=node[$getChildrenByName](name,true);break;case operators.dotHash:children=node[$getChildrenByClass](name);children=children.isXFAObjectArray?children.children:[children];break;default:break;}if(useCache){cached.set(cacheName,children);}}if(children.length>0){nodes.push(children);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(nodes.length===0&&!isQualified&&i===0){var parent=container[$getParent]();container=parent;if(!container){return{v:null};}i=-1;root=[container];return 0;// continue
}root=isFinite(index)?nodes.filter(function(node){return index<node.length;}).map(function(node){return node[index];}):nodes.flat();},_ret;for(var ii=parsed.length;i<ii;i++){_ret=_loop();if(_ret===0)continue;if(_ret)return _ret.v;}if(root.length===0){return null;}return root;}function createDataNode(root,container,expr){var parsed=parseExpression(expr);if(!parsed){return null;}if(parsed.some(function(x){return x.operator===operators.dotDot;})){return null;}var fn=shortcuts.get(parsed[0].name);var i=0;if(fn){root=fn(root,container);i=1;}else{root=container||root;}for(var ii=parsed.length;i<ii;i++){var _parsed$i2=parsed[i],name=_parsed$i2.name,operator=_parsed$i2.operator,index=_parsed$i2.index;if(!isFinite(index)){parsed[i].index=0;return root.createNodes(parsed.slice(i));}var children=void 0;switch(operator){case operators.dot:children=root[$getChildrenByName](name,false);break;case operators.dotDot:children=root[$getChildrenByName](name,true);break;case operators.dotHash:children=root[$getChildrenByClass](name);children=children.isXFAObjectArray?children.children:[children];break;default:break;}if(children.length===0){return root.createNodes(parsed.slice(i));}if(index<children.length){var child=children[index];if(!child.isXFAObject){warn("XFA - Cannot create a node.");return null;}root=child;}else{parsed[i].index=index-children.length;return root.createNodes(parsed.slice(i));}}return null;}
;// CONCATENATED MODULE: ./src/core/xfa/xfa_object.js
function _get(){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get.bind();}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=xfa_object_getPrototypeOf(object);if(object===null)break;}return object;}function xfa_object_slicedToArray(arr,i){return xfa_object_arrayWithHoles(arr)||xfa_object_iterableToArrayLimit(arr,i)||xfa_object_unsupportedIterableToArray(arr,i)||xfa_object_nonIterableRest();}function xfa_object_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function xfa_object_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function xfa_object_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function xfa_object_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)xfa_object_setPrototypeOf(subClass,superClass);}function xfa_object_setPrototypeOf(o,p){xfa_object_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return xfa_object_setPrototypeOf(o,p);}function xfa_object_createSuper(Derived){var hasNativeReflectConstruct=xfa_object_isNativeReflectConstruct();return function _createSuperInternal(){var Super=xfa_object_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=xfa_object_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return xfa_object_possibleConstructorReturn(this,result);};}function xfa_object_possibleConstructorReturn(self,call){if(call&&(xfa_object_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return xfa_object_assertThisInitialized(self);}function xfa_object_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function xfa_object_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function xfa_object_getPrototypeOf(o){xfa_object_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return xfa_object_getPrototypeOf(o);}function xfa_object_typeof(o){"@babel/helpers - typeof";return xfa_object_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},xfa_object_typeof(o);}function xfa_object_toConsumableArray(arr){return xfa_object_arrayWithoutHoles(arr)||xfa_object_iterableToArray(arr)||xfa_object_unsupportedIterableToArray(arr)||xfa_object_nonIterableSpread();}function xfa_object_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function xfa_object_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function xfa_object_arrayWithoutHoles(arr){if(Array.isArray(arr))return xfa_object_arrayLikeToArray(arr);}function xfa_object_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */xfa_object_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==xfa_object_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(xfa_object_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function xfa_object_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=xfa_object_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function xfa_object_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return xfa_object_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xfa_object_arrayLikeToArray(o,minLen);}function xfa_object_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function xfa_object_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function xfa_object_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,xfa_object_toPropertyKey(descriptor.key),descriptor);}}function xfa_object_createClass(Constructor,protoProps,staticProps){if(protoProps)xfa_object_defineProperties(Constructor.prototype,protoProps);if(staticProps)xfa_object_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function xfa_object_toPropertyKey(arg){var key=xfa_object_toPrimitive(arg,"string");return xfa_object_typeof(key)==="symbol"?key:String(key);}function xfa_object_toPrimitive(input,hint){if(xfa_object_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(xfa_object_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var _applyPrototype=Symbol();var _attributes=Symbol();var _attributeNames=Symbol();var _children=Symbol("_children");var _cloneAttribute=Symbol();var _dataValue=Symbol();var _defaultValue=Symbol();var _filteredChildrenGenerator=Symbol();var _getPrototype=Symbol();var _getUnsetAttributes=Symbol();var _hasChildren=Symbol();var _max=Symbol();var _options=Symbol();var _parent=Symbol("parent");var _resolvePrototypesHelper=Symbol();var _setAttributes=Symbol();var _validator=Symbol();var uid=0;var NS_DATASETS=NamespaceIds.datasets.id;var XFAObject=/*#__PURE__*/function(){function XFAObject(nsId,name){var hasChildren=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;xfa_object_classCallCheck(this,XFAObject);this[$namespaceId]=nsId;this[$nodeName]=name;this[_hasChildren]=hasChildren;this[_parent]=null;this[_children]=[];this[$uid]="".concat(name).concat(uid++);this[$globalData]=null;}xfa_object_createClass(XFAObject,[{key:"isXFAObject",get:function get(){return true;}},{key:"isXFAObjectArray",get:function get(){return false;}},{key:"createNodes",value:function createNodes(path){var root=this,node=null;var _iterator=xfa_object_createForOfIteratorHelper(path),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_step.value,name=_step$value.name,index=_step$value.index;for(var i=0,ii=isFinite(index)?index:0;i<=ii;i++){var nsId=root[$namespaceId]===NS_DATASETS?-1:root[$namespaceId];node=new XmlObject(nsId,name);root[$appendChild](node);}root=node;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return node;}},{key:$onChild,value:function value(child){if(!this[_hasChildren]||!this[$onChildCheck](child)){return false;}var name=child[$nodeName];var node=this[name];if(node instanceof XFAObjectArray){if(node.push(child)){this[$appendChild](child);return true;}}else{if(node!==null){this[$removeChild](node);}this[name]=child;this[$appendChild](child);return true;}var id="";if(this.id){id=" (id: ".concat(this.id,")");}else if(this.name){id=" (name: ".concat(this.name," ").concat(this.h.value,")");}warn("XFA - node \"".concat(this[$nodeName],"\"").concat(id," has already enough \"").concat(name,"\"!"));return false;}},{key:$onChildCheck,value:function value(child){return this.hasOwnProperty(child[$nodeName])&&child[$namespaceId]===this[$namespaceId];}},{key:$isNsAgnostic,value:function value(){return false;}},{key:$acceptWhitespace,value:function value(){return false;}},{key:$isCDATAXml,value:function value(){return false;}},{key:$isBindable,value:function value(){return false;}},{key:$popPara,value:function value(){if(this.para){this[$getTemplateRoot]()[$extra].paraStack.pop();}}},{key:$pushPara,value:function value(){this[$getTemplateRoot]()[$extra].paraStack.push(this.para);}},{key:$setId,value:function value(ids){if(this.id&&this[$namespaceId]===NamespaceIds.template.id){ids.set(this.id,this);}}},{key:$getTemplateRoot,value:function value(){return this[$globalData].template;}},{key:$isSplittable,value:function value(){return false;}},{key:$isThereMoreWidth,value:function value(){return false;}},{key:$appendChild,value:function value(child){child[_parent]=this;this[_children].push(child);if(!child[$globalData]&&this[$globalData]){child[$globalData]=this[$globalData];}}},{key:$removeChild,value:function value(child){var i=this[_children].indexOf(child);this[_children].splice(i,1);}},{key:$hasSettableValue,value:function value(){return this.hasOwnProperty("value");}},{key:$setValue,value:function value(_){}},{key:$onText,value:function value(_){}},{key:$finalize,value:function value(){}},{key:$clean,value:function value(builder){delete this[_hasChildren];if(this[$cleanup]){builder.clean(this[$cleanup]);delete this[$cleanup];}}},{key:$indexOf,value:function value(child){return this[_children].indexOf(child);}},{key:$insertAt,value:function value(i,child){child[_parent]=this;this[_children].splice(i,0,child);if(!child[$globalData]&&this[$globalData]){child[$globalData]=this[$globalData];}}},{key:$isTransparent,value:function value(){return!this.name;}},{key:$lastAttribute,value:function value(){return"";}},{key:$text,value:function value(){if(this[_children].length===0){return this[$content];}return this[_children].map(function(c){return c[$text]();}).join("");}},{key:_attributeNames,get:function get(){var proto=Object.getPrototypeOf(this);if(!proto._attributes){var attributes=proto._attributes=new Set();var _iterator2=xfa_object_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var name=_step2.value;if(this[name]===null||this[name]instanceof XFAObject||this[name]instanceof XFAObjectArray){break;}attributes.add(name);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}return shadow(this,_attributeNames,proto._attributes);}},{key:$isDescendent,value:function value(parent){var node=this;while(node){if(node===parent){return true;}node=node[$getParent]();}return false;}},{key:$getParent,value:function value(){return this[_parent];}},{key:$getSubformParent,value:function value(){return this[$getParent]();}},{key:$getChildren,value:function value(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!name){return this[_children];}return this[name];}},{key:$dump,value:function value(){var dumped=Object.create(null);if(this[$content]){dumped.$content=this[$content];}var _iterator3=xfa_object_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var name=_step3.value;var value=this[name];if(value===null){continue;}if(value instanceof XFAObject){dumped[name]=value[$dump]();}else if(value instanceof XFAObjectArray){if(!value.isEmpty()){dumped[name]=value.dump();}}else{dumped[name]=value;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return dumped;}},{key:$toStyle,value:function value(){return null;}},{key:$toHTML,value:function value(){return HTMLResult.EMPTY;}},{key:$getContainedChildren,value:/*#__PURE__*/xfa_object_regeneratorRuntime().mark(function value(){var _iterator4,_step4,node;return xfa_object_regeneratorRuntime().wrap(function value$(_context){while(1)switch(_context.prev=_context.next){case 0:_iterator4=xfa_object_createForOfIteratorHelper(this[$getChildren]());_context.prev=1;_iterator4.s();case 3:if((_step4=_iterator4.n()).done){_context.next=9;break;}node=_step4.value;_context.next=7;return node;case 7:_context.next=3;break;case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context["catch"](1);_iterator4.e(_context.t0);case 14:_context.prev=14;_iterator4.f();return _context.finish(14);case 17:case"end":return _context.stop();}},value,this,[[1,11,14,17]]);})},{key:_filteredChildrenGenerator,value:/*#__PURE__*/xfa_object_regeneratorRuntime().mark(function value(filter,include){var _iterator5,_step5,node,availableSpace,res;return xfa_object_regeneratorRuntime().wrap(function value$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_iterator5=xfa_object_createForOfIteratorHelper(this[$getContainedChildren]());_context2.prev=1;_iterator5.s();case 3:if((_step5=_iterator5.n()).done){_context2.next=13;break;}node=_step5.value;if(!(!filter||include===filter.has(node[$nodeName]))){_context2.next=11;break;}availableSpace=this[$getAvailableSpace]();res=node[$toHTML](availableSpace);if(!res.success){this[$extra].failingNode=node;}_context2.next=11;return res;case 11:_context2.next=3;break;case 13:_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2["catch"](1);_iterator5.e(_context2.t0);case 18:_context2.prev=18;_iterator5.f();return _context2.finish(18);case 21:case"end":return _context2.stop();}},value,this,[[1,15,18,21]]);})},{key:$flushHTML,value:function value(){return null;}},{key:$addHTML,value:function value(html,bbox){this[$extra].children.push(html);}},{key:$getAvailableSpace,value:function value(){}},{key:$childrenToHTML,value:function value(_ref){var _ref$filter=_ref.filter,filter=_ref$filter===void 0?null:_ref$filter,_ref$include=_ref.include,include=_ref$include===void 0?true:_ref$include;if(!this[$extra].generator){this[$extra].generator=this[_filteredChildrenGenerator](filter,include);}else{var availableSpace=this[$getAvailableSpace]();var res=this[$extra].failingNode[$toHTML](availableSpace);if(!res.success){return res;}if(res.html){this[$addHTML](res.html,res.bbox);}delete this[$extra].failingNode;}while(true){var gen=this[$extra].generator.next();if(gen.done){break;}var _res=gen.value;if(!_res.success){return _res;}if(_res.html){this[$addHTML](_res.html,_res.bbox);}}this[$extra].generator=null;return HTMLResult.EMPTY;}},{key:$setSetAttributes,value:function value(attributes){this[_setAttributes]=new Set(Object.keys(attributes));}},{key:_getUnsetAttributes,value:function value(protoAttributes){var allAttr=this[_attributeNames];var setAttr=this[_setAttributes];return xfa_object_toConsumableArray(protoAttributes).filter(function(x){return allAttr.has(x)&&!setAttr.has(x);});}},{key:$resolvePrototypes,value:function value(ids){var ancestors=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Set();var _iterator6=xfa_object_createForOfIteratorHelper(this[_children]),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var child=_step6.value;child[_resolvePrototypesHelper](ids,ancestors);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}},{key:_resolvePrototypesHelper,value:function value(ids,ancestors){var proto=this[_getPrototype](ids,ancestors);if(proto){this[_applyPrototype](proto,ids,ancestors);}else{this[$resolvePrototypes](ids,ancestors);}}},{key:_getPrototype,value:function value(ids,ancestors){var use=this.use,usehref=this.usehref;if(!use&&!usehref){return null;}var proto=null;var somExpression=null;var id=null;var ref=use;if(usehref){ref=usehref;if(usehref.startsWith("#som(")&&usehref.endsWith(")")){somExpression=usehref.slice("#som(".length,-1);}else if(usehref.startsWith(".#som(")&&usehref.endsWith(")")){somExpression=usehref.slice(".#som(".length,-1);}else if(usehref.startsWith("#")){id=usehref.slice(1);}else if(usehref.startsWith(".#")){id=usehref.slice(2);}}else if(use.startsWith("#")){id=use.slice(1);}else{somExpression=use;}this.use=this.usehref="";if(id){proto=ids.get(id);}else{proto=searchNode(ids.get($root),this,somExpression,true,false);if(proto){proto=proto[0];}}if(!proto){warn("XFA - Invalid prototype reference: ".concat(ref,"."));return null;}if(proto[$nodeName]!==this[$nodeName]){warn("XFA - Incompatible prototype: ".concat(proto[$nodeName]," !== ").concat(this[$nodeName],"."));return null;}if(ancestors.has(proto)){warn("XFA - Cycle detected in prototypes use.");return null;}ancestors.add(proto);var protoProto=proto[_getPrototype](ids,ancestors);if(protoProto){proto[_applyPrototype](protoProto,ids,ancestors);}proto[$resolvePrototypes](ids,ancestors);ancestors.delete(proto);return proto;}},{key:_applyPrototype,value:function value(proto,ids,ancestors){if(ancestors.has(proto)){warn("XFA - Cycle detected in prototypes use.");return;}if(!this[$content]&&proto[$content]){this[$content]=proto[$content];}var newAncestors=new Set(ancestors);newAncestors.add(proto);var _iterator7=xfa_object_createForOfIteratorHelper(this[_getUnsetAttributes](proto[_setAttributes])),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var unsetAttrName=_step7.value;this[unsetAttrName]=proto[unsetAttrName];if(this[_setAttributes]){this[_setAttributes].add(unsetAttrName);}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}var _iterator8=xfa_object_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var name=_step8.value;if(this[_attributeNames].has(name)){continue;}var _value=this[name];var protoValue=proto[name];if(_value instanceof XFAObjectArray){var _iterator9=xfa_object_createForOfIteratorHelper(_value[_children]),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _child=_step9.value;_child[_resolvePrototypesHelper](ids,ancestors);}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}for(var i=_value[_children].length,ii=protoValue[_children].length;i<ii;i++){var child=proto[_children][i][$clone]();if(_value.push(child)){child[_parent]=this;this[_children].push(child);child[_resolvePrototypesHelper](ids,ancestors);}else{break;}}continue;}if(_value!==null){_value[$resolvePrototypes](ids,ancestors);if(protoValue){_value[_applyPrototype](protoValue,ids,ancestors);}continue;}if(protoValue!==null){var _child2=protoValue[$clone]();_child2[_parent]=this;this[name]=_child2;this[_children].push(_child2);_child2[_resolvePrototypesHelper](ids,ancestors);}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}},{key:$clone,value:function value(){var clone=Object.create(Object.getPrototypeOf(this));var _iterator10=xfa_object_createForOfIteratorHelper(Object.getOwnPropertySymbols(this)),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var $symbol=_step10.value;try{clone[$symbol]=this[$symbol];}catch(_unused){shadow(clone,$symbol,this[$symbol]);}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}clone[$uid]="".concat(clone[$nodeName]).concat(uid++);clone[_children]=[];var _iterator11=xfa_object_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var name=_step11.value;if(this[_attributeNames].has(name)){clone[name]=XFAObject[_cloneAttribute](this[name]);continue;}var _value2=this[name];clone[name]=_value2 instanceof XFAObjectArray?new XFAObjectArray(_value2[_max]):null;}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}var _iterator12=xfa_object_createForOfIteratorHelper(this[_children]),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var child=_step12.value;var _name=child[$nodeName];var clonedChild=child[$clone]();clone[_children].push(clonedChild);clonedChild[_parent]=clone;if(clone[_name]===null){clone[_name]=clonedChild;}else{clone[_name][_children].push(clonedChild);}}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}return clone;}},{key:$getChildren,value:function value(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!name){return this[_children];}return this[_children].filter(function(c){return c[$nodeName]===name;});}},{key:$getChildrenByClass,value:function value(name){return this[name];}},{key:$getChildrenByName,value:function value(name,allTransparent){var first=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return Array.from(this[$getChildrenByNameIt](name,allTransparent,first));}},{key:$getChildrenByNameIt,value:function value(name,allTransparent){var _this=this;var first=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return/*#__PURE__*/xfa_object_regeneratorRuntime().mark(function _callee(){var _iterator13,_step13,child;return xfa_object_regeneratorRuntime().wrap(function _callee$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!(name==="parent")){_context3.next=4;break;}_context3.next=3;return _this[_parent];case 3:return _context3.abrupt("return");case 4:_iterator13=xfa_object_createForOfIteratorHelper(_this[_children]);_context3.prev=5;_iterator13.s();case 7:if((_step13=_iterator13.n()).done){_context3.next=19;break;}child=_step13.value;if(!(child[$nodeName]===name)){_context3.next=12;break;}_context3.next=12;return child;case 12:if(!(child.name===name)){_context3.next=15;break;}_context3.next=15;return child;case 15:if(!(allTransparent||child[$isTransparent]())){_context3.next=17;break;}return _context3.delegateYield(child[$getChildrenByNameIt](name,allTransparent,false),"t0",17);case 17:_context3.next=7;break;case 19:_context3.next=24;break;case 21:_context3.prev=21;_context3.t1=_context3["catch"](5);_iterator13.e(_context3.t1);case 24:_context3.prev=24;_iterator13.f();return _context3.finish(24);case 27:if(!(first&&_this[_attributeNames].has(name))){_context3.next=30;break;}_context3.next=30;return new XFAAttribute(_this,name,_this[name]);case 30:case"end":return _context3.stop();}},_callee,null,[[5,21,24,27]]);})();}}],[{key:_cloneAttribute,value:function value(obj){if(Array.isArray(obj)){return obj.map(function(x){return XFAObject[_cloneAttribute](x);});}if(xfa_object_typeof(obj)==="object"&&obj!==null){return Object.assign({},obj);}return obj;}}]);return XFAObject;}();var XFAObjectArray=/*#__PURE__*/function(){function XFAObjectArray(){var max=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Infinity;xfa_object_classCallCheck(this,XFAObjectArray);this[_max]=max;this[_children]=[];}xfa_object_createClass(XFAObjectArray,[{key:"isXFAObject",get:function get(){return false;}},{key:"isXFAObjectArray",get:function get(){return true;}},{key:"push",value:function push(child){var len=this[_children].length;if(len<=this[_max]){this[_children].push(child);return true;}warn("XFA - node \"".concat(child[$nodeName],"\" accepts no more than ").concat(this[_max]," children"));return false;}},{key:"isEmpty",value:function isEmpty(){return this[_children].length===0;}},{key:"dump",value:function dump(){return this[_children].length===1?this[_children][0][$dump]():this[_children].map(function(x){return x[$dump]();});}},{key:$clone,value:function value(){var clone=new XFAObjectArray(this[_max]);clone[_children]=this[_children].map(function(c){return c[$clone]();});return clone;}},{key:"children",get:function get(){return this[_children];}},{key:"clear",value:function clear(){this[_children].length=0;}}]);return XFAObjectArray;}();var XFAAttribute=/*#__PURE__*/function(){function XFAAttribute(node,name,value){xfa_object_classCallCheck(this,XFAAttribute);this[_parent]=node;this[$nodeName]=name;this[$content]=value;this[$consumed]=false;this[$uid]="attribute".concat(uid++);}xfa_object_createClass(XFAAttribute,[{key:$getParent,value:function value(){return this[_parent];}},{key:$isDataValue,value:function value(){return true;}},{key:$getDataValue,value:function value(){return this[$content].trim();}},{key:$setValue,value:function(_value3){function value(_x){return _value3.apply(this,arguments);}value.toString=function(){return _value3.toString();};return value;}(function(value){value=value.value||"";this[$content]=value.toString();})},{key:$text,value:function value(){return this[$content];}},{key:$isDescendent,value:function value(parent){return this[_parent]===parent||this[_parent][$isDescendent](parent);}}]);return XFAAttribute;}();var XmlObject=/*#__PURE__*/function(_XFAObject){xfa_object_inherits(XmlObject,_XFAObject);var _super=xfa_object_createSuper(XmlObject);function XmlObject(nsId,name){var _this2;var attributes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};xfa_object_classCallCheck(this,XmlObject);_this2=_super.call(this,nsId,name);_this2[$content]="";_this2[_dataValue]=null;if(name!=="#text"){var map=new Map();_this2[_attributes]=map;for(var _i=0,_Object$entries=Object.entries(attributes);_i<_Object$entries.length;_i++){var _Object$entries$_i=xfa_object_slicedToArray(_Object$entries[_i],2),attrName=_Object$entries$_i[0],_value4=_Object$entries$_i[1];map.set(attrName,new XFAAttribute(xfa_object_assertThisInitialized(_this2),attrName,_value4));}if(attributes.hasOwnProperty($nsAttributes)){var dataNode=attributes[$nsAttributes].xfa.dataNode;if(dataNode!==undefined){if(dataNode==="dataGroup"){_this2[_dataValue]=false;}else if(dataNode==="dataValue"){_this2[_dataValue]=true;}}}}_this2[$consumed]=false;return _this2;}xfa_object_createClass(XmlObject,[{key:$toString,value:function value(buf){var tagName=this[$nodeName];if(tagName==="#text"){buf.push(encodeToXmlString(this[$content]));return;}var utf8TagName=utf8StringToString(tagName);var prefix=this[$namespaceId]===NS_DATASETS?"xfa:":"";buf.push("<".concat(prefix).concat(utf8TagName));var _iterator14=xfa_object_createForOfIteratorHelper(this[_attributes].entries()),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var _step14$value=xfa_object_slicedToArray(_step14.value,2),name=_step14$value[0],_value5=_step14$value[1];var utf8Name=utf8StringToString(name);buf.push(" ".concat(utf8Name,"=\"").concat(encodeToXmlString(_value5[$content]),"\""));}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}if(this[_dataValue]!==null){if(this[_dataValue]){buf.push(" xfa:dataNode=\"dataValue\"");}else{buf.push(" xfa:dataNode=\"dataGroup\"");}}if(!this[$content]&&this[_children].length===0){buf.push("/>");return;}buf.push(">");if(this[$content]){if(typeof this[$content]==="string"){buf.push(encodeToXmlString(this[$content]));}else{this[$content][$toString](buf);}}else{var _iterator15=xfa_object_createForOfIteratorHelper(this[_children]),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var child=_step15.value;child[$toString](buf);}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}}buf.push("</".concat(prefix).concat(utf8TagName,">"));}},{key:$onChild,value:function value(child){if(this[$content]){var node=new XmlObject(this[$namespaceId],"#text");this[$appendChild](node);node[$content]=this[$content];this[$content]="";}this[$appendChild](child);return true;}},{key:$onText,value:function value(str){this[$content]+=str;}},{key:$finalize,value:function value(){if(this[$content]&&this[_children].length>0){var node=new XmlObject(this[$namespaceId],"#text");this[$appendChild](node);node[$content]=this[$content];delete this[$content];}}},{key:$toHTML,value:function value(){if(this[$nodeName]==="#text"){return HTMLResult.success({name:"#text",value:this[$content]});}return HTMLResult.EMPTY;}},{key:$getChildren,value:function value(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!name){return this[_children];}return this[_children].filter(function(c){return c[$nodeName]===name;});}},{key:$getAttributes,value:function value(){return this[_attributes];}},{key:$getChildrenByClass,value:function value(name){var value=this[_attributes].get(name);if(value!==undefined){return value;}return this[$getChildren](name);}},{key:$getChildrenByNameIt,value:/*#__PURE__*/xfa_object_regeneratorRuntime().mark(function value(name,allTransparent){var value,_iterator16,_step16,child;return xfa_object_regeneratorRuntime().wrap(function value$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:value=this[_attributes].get(name);if(!value){_context4.next=4;break;}_context4.next=4;return value;case 4:_iterator16=xfa_object_createForOfIteratorHelper(this[_children]);_context4.prev=5;_iterator16.s();case 7:if((_step16=_iterator16.n()).done){_context4.next=16;break;}child=_step16.value;if(!(child[$nodeName]===name)){_context4.next=12;break;}_context4.next=12;return child;case 12:if(!allTransparent){_context4.next=14;break;}return _context4.delegateYield(child[$getChildrenByNameIt](name,allTransparent),"t0",14);case 14:_context4.next=7;break;case 16:_context4.next=21;break;case 18:_context4.prev=18;_context4.t1=_context4["catch"](5);_iterator16.e(_context4.t1);case 21:_context4.prev=21;_iterator16.f();return _context4.finish(21);case 24:case"end":return _context4.stop();}},value,this,[[5,18,21,24]]);})},{key:$getAttributeIt,value:/*#__PURE__*/xfa_object_regeneratorRuntime().mark(function value(name,skipConsumed){var value,_iterator17,_step17,child;return xfa_object_regeneratorRuntime().wrap(function value$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:value=this[_attributes].get(name);if(!(value&&(!skipConsumed||!value[$consumed]))){_context5.next=4;break;}_context5.next=4;return value;case 4:_iterator17=xfa_object_createForOfIteratorHelper(this[_children]);_context5.prev=5;_iterator17.s();case 7:if((_step17=_iterator17.n()).done){_context5.next=12;break;}child=_step17.value;return _context5.delegateYield(child[$getAttributeIt](name,skipConsumed),"t0",10);case 10:_context5.next=7;break;case 12:_context5.next=17;break;case 14:_context5.prev=14;_context5.t1=_context5["catch"](5);_iterator17.e(_context5.t1);case 17:_context5.prev=17;_iterator17.f();return _context5.finish(17);case 20:case"end":return _context5.stop();}},value,this,[[5,14,17,20]]);})},{key:$getRealChildrenByNameIt,value:/*#__PURE__*/xfa_object_regeneratorRuntime().mark(function value(name,allTransparent,skipConsumed){var _iterator18,_step18,child;return xfa_object_regeneratorRuntime().wrap(function value$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_iterator18=xfa_object_createForOfIteratorHelper(this[_children]);_context6.prev=1;_iterator18.s();case 3:if((_step18=_iterator18.n()).done){_context6.next=12;break;}child=_step18.value;if(!(child[$nodeName]===name&&(!skipConsumed||!child[$consumed]))){_context6.next=8;break;}_context6.next=8;return child;case 8:if(!allTransparent){_context6.next=10;break;}return _context6.delegateYield(child[$getRealChildrenByNameIt](name,allTransparent,skipConsumed),"t0",10);case 10:_context6.next=3;break;case 12:_context6.next=17;break;case 14:_context6.prev=14;_context6.t1=_context6["catch"](1);_iterator18.e(_context6.t1);case 17:_context6.prev=17;_iterator18.f();return _context6.finish(17);case 20:case"end":return _context6.stop();}},value,this,[[1,14,17,20]]);})},{key:$isDataValue,value:function value(){if(this[_dataValue]===null){return this[_children].length===0||this[_children][0][$namespaceId]===NamespaceIds.xhtml.id;}return this[_dataValue];}},{key:$getDataValue,value:function value(){if(this[_dataValue]===null){if(this[_children].length===0){return this[$content].trim();}if(this[_children][0][$namespaceId]===NamespaceIds.xhtml.id){return this[_children][0][$text]().trim();}return null;}return this[$content].trim();}},{key:$setValue,value:function(_value6){function value(_x2){return _value6.apply(this,arguments);}value.toString=function(){return _value6.toString();};return value;}(function(value){value=value.value||"";this[$content]=value.toString();})},{key:$dump,value:function value(){var hasNS=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var dumped=Object.create(null);if(hasNS){dumped.$ns=this[$namespaceId];}if(this[$content]){dumped.$content=this[$content];}dumped.$name=this[$nodeName];dumped.children=[];var _iterator19=xfa_object_createForOfIteratorHelper(this[_children]),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var child=_step19.value;dumped.children.push(child[$dump](hasNS));}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}dumped.attributes=Object.create(null);var _iterator20=xfa_object_createForOfIteratorHelper(this[_attributes]),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var _step20$value=xfa_object_slicedToArray(_step20.value,2),name=_step20$value[0],_value7=_step20$value[1];dumped.attributes[name]=_value7[$content];}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}return dumped;}}]);return XmlObject;}(XFAObject);var ContentObject=/*#__PURE__*/function(_XFAObject2){xfa_object_inherits(ContentObject,_XFAObject2);var _super2=xfa_object_createSuper(ContentObject);function ContentObject(nsId,name){var _this3;xfa_object_classCallCheck(this,ContentObject);_this3=_super2.call(this,nsId,name);_this3[$content]="";return _this3;}xfa_object_createClass(ContentObject,[{key:$onText,value:function value(text){this[$content]+=text;}},{key:$finalize,value:function value(){}}]);return ContentObject;}(XFAObject);var OptionObject=/*#__PURE__*/function(_ContentObject){xfa_object_inherits(OptionObject,_ContentObject);var _super3=xfa_object_createSuper(OptionObject);function OptionObject(nsId,name,options){var _this4;xfa_object_classCallCheck(this,OptionObject);_this4=_super3.call(this,nsId,name);_this4[_options]=options;return _this4;}xfa_object_createClass(OptionObject,[{key:$finalize,value:function value(){var _this5=this;this[$content]=getKeyword({data:this[$content],defaultValue:this[_options][0],validate:function validate(k){return _this5[_options].includes(k);}});}},{key:$clean,value:function value(builder){_get(xfa_object_getPrototypeOf(OptionObject.prototype),$clean,this).call(this,builder);delete this[_options];}}]);return OptionObject;}(ContentObject);var StringObject=/*#__PURE__*/function(_ContentObject2){xfa_object_inherits(StringObject,_ContentObject2);var _super4=xfa_object_createSuper(StringObject);function StringObject(){xfa_object_classCallCheck(this,StringObject);return _super4.apply(this,arguments);}xfa_object_createClass(StringObject,[{key:$finalize,value:function value(){this[$content]=this[$content].trim();}}]);return StringObject;}(ContentObject);var IntegerObject=/*#__PURE__*/function(_ContentObject3){xfa_object_inherits(IntegerObject,_ContentObject3);var _super5=xfa_object_createSuper(IntegerObject);function IntegerObject(nsId,name,defaultValue,validator){var _this6;xfa_object_classCallCheck(this,IntegerObject);_this6=_super5.call(this,nsId,name);_this6[_defaultValue]=defaultValue;_this6[_validator]=validator;return _this6;}xfa_object_createClass(IntegerObject,[{key:$finalize,value:function value(){this[$content]=getInteger({data:this[$content],defaultValue:this[_defaultValue],validate:this[_validator]});}},{key:$clean,value:function value(builder){_get(xfa_object_getPrototypeOf(IntegerObject.prototype),$clean,this).call(this,builder);delete this[_defaultValue];delete this[_validator];}}]);return IntegerObject;}(ContentObject);var Option01=/*#__PURE__*/function(_IntegerObject){xfa_object_inherits(Option01,_IntegerObject);var _super6=xfa_object_createSuper(Option01);function Option01(nsId,name){xfa_object_classCallCheck(this,Option01);return _super6.call(this,nsId,name,0,function(n){return n===1;});}return xfa_object_createClass(Option01);}(IntegerObject);var Option10=/*#__PURE__*/function(_IntegerObject2){xfa_object_inherits(Option10,_IntegerObject2);var _super7=xfa_object_createSuper(Option10);function Option10(nsId,name){xfa_object_classCallCheck(this,Option10);return _super7.call(this,nsId,name,1,function(n){return n===0;});}return xfa_object_createClass(Option10);}(IntegerObject);
;// CONCATENATED MODULE: ./src/core/xfa/html_utils.js
function html_utils_slicedToArray(arr,i){return html_utils_arrayWithHoles(arr)||html_utils_iterableToArrayLimit(arr,i)||html_utils_unsupportedIterableToArray(arr,i)||html_utils_nonIterableRest();}function html_utils_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function html_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return html_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return html_utils_arrayLikeToArray(o,minLen);}function html_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function html_utils_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function html_utils_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function measureToString(m){if(typeof m==="string"){return"0px";}return Number.isInteger(m)?"".concat(m,"px"):"".concat(m.toFixed(2),"px");}var converters={anchorType:function anchorType(node,style){var parent=node[$getSubformParent]();if(!parent||parent.layout&&parent.layout!=="position"){return;}if(!("transform"in style)){style.transform="";}switch(node.anchorType){case"bottomCenter":style.transform+="translate(-50%, -100%)";break;case"bottomLeft":style.transform+="translate(0,-100%)";break;case"bottomRight":style.transform+="translate(-100%,-100%)";break;case"middleCenter":style.transform+="translate(-50%,-50%)";break;case"middleLeft":style.transform+="translate(0,-50%)";break;case"middleRight":style.transform+="translate(-100%,-50%)";break;case"topCenter":style.transform+="translate(-50%,0)";break;case"topRight":style.transform+="translate(-100%,0)";break;}},dimensions:function dimensions(node,style){var _parent$layout;var parent=node[$getSubformParent]();var width=node.w;var height=node.h;if((_parent$layout=parent.layout)!==null&&_parent$layout!==void 0&&_parent$layout.includes("row")){var extra=parent[$extra];var colSpan=node.colSpan;var w;if(colSpan===-1){w=extra.columnWidths.slice(extra.currentColumn).reduce(function(a,x){return a+x;},0);extra.currentColumn=0;}else{w=extra.columnWidths.slice(extra.currentColumn,extra.currentColumn+colSpan).reduce(function(a,x){return a+x;},0);extra.currentColumn=(extra.currentColumn+node.colSpan)%extra.columnWidths.length;}if(!isNaN(w)){width=node.w=w;}}style.width=width!==""?measureToString(width):"auto";style.height=height!==""?measureToString(height):"auto";},position:function position(node,style){var parent=node[$getSubformParent]();if(parent!==null&&parent!==void 0&&parent.layout&&parent.layout!=="position"){return;}style.position="absolute";style.left=measureToString(node.x);style.top=measureToString(node.y);},rotate:function rotate(node,style){if(node.rotate){if(!("transform"in style)){style.transform="";}style.transform+="rotate(-".concat(node.rotate,"deg)");style.transformOrigin="top left";}},presence:function presence(node,style){switch(node.presence){case"invisible":style.visibility="hidden";break;case"hidden":case"inactive":style.display="none";break;}},hAlign:function hAlign(node,style){if(node[$nodeName]==="para"){switch(node.hAlign){case"justifyAll":style.textAlign="justify-all";break;case"radix":style.textAlign="left";break;default:style.textAlign=node.hAlign;}}else{switch(node.hAlign){case"left":style.alignSelf="start";break;case"center":style.alignSelf="center";break;case"right":style.alignSelf="end";break;}}},margin:function margin(node,style){if(node.margin){style.margin=node.margin[$toStyle]().margin;}}};function setMinMaxDimensions(node,style){var parent=node[$getSubformParent]();if(parent.layout==="position"){if(node.minW>0){style.minWidth=measureToString(node.minW);}if(node.maxW>0){style.maxWidth=measureToString(node.maxW);}if(node.minH>0){style.minHeight=measureToString(node.minH);}if(node.maxH>0){style.maxHeight=measureToString(node.maxH);}}}function layoutText(text,xfaFont,margin,lineHeight,fontFinder,width){var measure=new TextMeasure(xfaFont,margin,lineHeight,fontFinder);if(typeof text==="string"){measure.addString(text);}else{text[$pushGlyphs](measure);}return measure.compute(width);}function layoutNode(node,availableSpace){var height=null;var width=null;var isBroken=false;if((!node.w||!node.h)&&node.value){var marginH=0;var marginV=0;if(node.margin){marginH=node.margin.leftInset+node.margin.rightInset;marginV=node.margin.topInset+node.margin.bottomInset;}var lineHeight=null;var margin=null;if(node.para){margin=Object.create(null);lineHeight=node.para.lineHeight===""?null:node.para.lineHeight;margin.top=node.para.spaceAbove===""?0:node.para.spaceAbove;margin.bottom=node.para.spaceBelow===""?0:node.para.spaceBelow;margin.left=node.para.marginLeft===""?0:node.para.marginLeft;margin.right=node.para.marginRight===""?0:node.para.marginRight;}var font=node.font;if(!font){var root=node[$getTemplateRoot]();var parent=node[$getParent]();while(parent&&parent!==root){if(parent.font){font=parent.font;break;}parent=parent[$getParent]();}}var maxWidth=(node.w||availableSpace.width)-marginH;var fontFinder=node[$globalData].fontFinder;if(node.value.exData&&node.value.exData[$content]&&node.value.exData.contentType==="text/html"){var res=layoutText(node.value.exData[$content],font,margin,lineHeight,fontFinder,maxWidth);width=res.width;height=res.height;isBroken=res.isBroken;}else{var text=node.value[$text]();if(text){var _res=layoutText(text,font,margin,lineHeight,fontFinder,maxWidth);width=_res.width;height=_res.height;isBroken=_res.isBroken;}}if(width!==null&&!node.w){width+=marginH;}if(height!==null&&!node.h){height+=marginV;}}return{w:width,h:height,isBroken:isBroken};}function computeBbox(node,html,availableSpace){var bbox;if(node.w!==""&&node.h!==""){bbox=[node.x,node.y,node.w,node.h];}else{if(!availableSpace){return null;}var width=node.w;if(width===""){if(node.maxW===0){var parent=node[$getSubformParent]();width=parent.layout==="position"&&parent.w!==""?0:node.minW;}else{width=Math.min(node.maxW,availableSpace.width);}html.attributes.style.width=measureToString(width);}var height=node.h;if(height===""){if(node.maxH===0){var _parent=node[$getSubformParent]();height=_parent.layout==="position"&&_parent.h!==""?0:node.minH;}else{height=Math.min(node.maxH,availableSpace.height);}html.attributes.style.height=measureToString(height);}bbox=[node.x,node.y,width,height];}return bbox;}function fixDimensions(node){var _parent$layout2;var parent=node[$getSubformParent]();if((_parent$layout2=parent.layout)!==null&&_parent$layout2!==void 0&&_parent$layout2.includes("row")){var extra=parent[$extra];var colSpan=node.colSpan;var width;if(colSpan===-1){width=extra.columnWidths.slice(extra.currentColumn).reduce(function(a,w){return a+w;},0);}else{width=extra.columnWidths.slice(extra.currentColumn,extra.currentColumn+colSpan).reduce(function(a,w){return a+w;},0);}if(!isNaN(width)){node.w=width;}}if(parent.layout&&parent.layout!=="position"){node.x=node.y=0;}if(node.layout==="table"){if(node.w===""&&Array.isArray(node.columnWidths)){node.w=node.columnWidths.reduce(function(a,x){return a+x;},0);}}}function layoutClass(node){switch(node.layout){case"position":return"xfaPosition";case"lr-tb":return"xfaLrTb";case"rl-row":return"xfaRlRow";case"rl-tb":return"xfaRlTb";case"row":return"xfaRow";case"table":return"xfaTable";case"tb":return"xfaTb";default:return"xfaPosition";}}function toStyle(node){var style=Object.create(null);for(var _len=arguments.length,names=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){names[_key-1]=arguments[_key];}for(var _i=0,_names=names;_i<_names.length;_i++){var name=_names[_i];var value=node[name];if(value===null){continue;}if(converters.hasOwnProperty(name)){converters[name](node,style);continue;}if(value instanceof XFAObject){var newStyle=value[$toStyle]();if(newStyle){Object.assign(style,newStyle);}else{warn("(DEBUG) - XFA - style for ".concat(name," not implemented yet"));}}}return style;}function createWrapper(node,html){var attributes=html.attributes;var style=attributes.style;var wrapper={name:"div",attributes:{class:["xfaWrapper"],style:Object.create(null)},children:[]};attributes.class.push("xfaWrapped");if(node.border){var _node$border$$extra=node.border[$extra],widths=_node$border$$extra.widths,insets=_node$border$$extra.insets;var width,height;var top=insets[0];var left=insets[3];var insetsH=insets[0]+insets[2];var insetsW=insets[1]+insets[3];switch(node.border.hand){case"even":top-=widths[0]/2;left-=widths[3]/2;width="calc(100% + ".concat((widths[1]+widths[3])/2-insetsW,"px)");height="calc(100% + ".concat((widths[0]+widths[2])/2-insetsH,"px)");break;case"left":top-=widths[0];left-=widths[3];width="calc(100% + ".concat(widths[1]+widths[3]-insetsW,"px)");height="calc(100% + ".concat(widths[0]+widths[2]-insetsH,"px)");break;case"right":width=insetsW?"calc(100% - ".concat(insetsW,"px)"):"100%";height=insetsH?"calc(100% - ".concat(insetsH,"px)"):"100%";break;}var classNames=["xfaBorder"];if(isPrintOnly(node.border)){classNames.push("xfaPrintOnly");}var border={name:"div",attributes:{class:classNames,style:{top:"".concat(top,"px"),left:"".concat(left,"px"),width:width,height:height}},children:[]};for(var _i2=0,_arr=["border","borderWidth","borderColor","borderRadius","borderStyle"];_i2<_arr.length;_i2++){var key=_arr[_i2];if(style[key]!==undefined){border.attributes.style[key]=style[key];delete style[key];}}wrapper.children.push(border,html);}else{wrapper.children.push(html);}for(var _i3=0,_arr2=["background","backgroundClip","top","left","width","height","minWidth","minHeight","maxWidth","maxHeight","transform","transformOrigin","visibility"];_i3<_arr2.length;_i3++){var _key2=_arr2[_i3];if(style[_key2]!==undefined){wrapper.attributes.style[_key2]=style[_key2];delete style[_key2];}}wrapper.attributes.style.position=style.position==="absolute"?"absolute":"relative";delete style.position;if(style.alignSelf){wrapper.attributes.style.alignSelf=style.alignSelf;delete style.alignSelf;}return wrapper;}function fixTextIndent(styles){var indent=getMeasurement(styles.textIndent,"0px");if(indent>=0){return;}var align=styles.textAlign==="right"?"right":"left";var name="padding"+(align==="left"?"Left":"Right");var padding=getMeasurement(styles[name],"0px");styles[name]="".concat(padding-indent,"px");}function setAccess(node,classNames){switch(node.access){case"nonInteractive":classNames.push("xfaNonInteractive");break;case"readOnly":classNames.push("xfaReadOnly");break;case"protected":classNames.push("xfaDisabled");break;}}function isPrintOnly(node){return node.relevant.length>0&&!node.relevant[0].excluded&&node.relevant[0].viewname==="print";}function getCurrentPara(node){var stack=node[$getTemplateRoot]()[$extra].paraStack;return stack.length?stack.at(-1):null;}function setPara(node,nodeStyle,value){var _value$attributes$cla;if((_value$attributes$cla=value.attributes.class)!==null&&_value$attributes$cla!==void 0&&_value$attributes$cla.includes("xfaRich")){if(nodeStyle){if(node.h===""){nodeStyle.height="auto";}if(node.w===""){nodeStyle.width="auto";}}var para=getCurrentPara(node);if(para){var valueStyle=value.attributes.style;valueStyle.display="flex";valueStyle.flexDirection="column";switch(para.vAlign){case"top":valueStyle.justifyContent="start";break;case"bottom":valueStyle.justifyContent="end";break;case"middle":valueStyle.justifyContent="center";break;}var paraStyle=para[$toStyle]();for(var _i4=0,_Object$entries=Object.entries(paraStyle);_i4<_Object$entries.length;_i4++){var _Object$entries$_i=html_utils_slicedToArray(_Object$entries[_i4],2),key=_Object$entries$_i[0],val=_Object$entries$_i[1];if(!(key in valueStyle)){valueStyle[key]=val;}}}}}function setFontFamily(xfaFont,node,fontFinder,style){if(!fontFinder){delete style.fontFamily;return;}var name=stripQuotes(xfaFont.typeface);style.fontFamily="\"".concat(name,"\"");var typeface=fontFinder.find(name);if(typeface){var fontFamily=typeface.regular.cssFontInfo.fontFamily;if(fontFamily!==name){style.fontFamily="\"".concat(fontFamily,"\"");}var para=getCurrentPara(node);if(para&&para.lineHeight!==""){return;}if(style.lineHeight){return;}var pdfFont=selectFont(xfaFont,typeface);if(pdfFont){style.lineHeight=Math.max(1.2,pdfFont.lineHeight);}}}function fixURL(str){var absoluteUrl=createValidAbsoluteUrl(str,null,{addDefaultProtocol:true,tryConvertEncoding:true});return absoluteUrl?absoluteUrl.href:null;}
;// CONCATENATED MODULE: ./src/core/xfa/layout.js
function layout_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=layout_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function layout_slicedToArray(arr,i){return layout_arrayWithHoles(arr)||layout_iterableToArrayLimit(arr,i)||layout_unsupportedIterableToArray(arr,i)||layout_nonIterableRest();}function layout_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function layout_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return layout_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return layout_arrayLikeToArray(o,minLen);}function layout_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function layout_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function layout_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function createLine(node,children){return{name:"div",attributes:{class:[node.layout==="lr-tb"?"xfaLr":"xfaRl"]},children:children};}function flushHTML(node){if(!node[$extra]){return null;}var attributes=node[$extra].attributes;var html={name:"div",attributes:attributes,children:node[$extra].children};if(node[$extra].failingNode){var htmlFromFailing=node[$extra].failingNode[$flushHTML]();if(htmlFromFailing){if(node.layout.endsWith("-tb")){html.children.push(createLine(node,[htmlFromFailing]));}else{html.children.push(htmlFromFailing);}}}if(html.children.length===0){return null;}return html;}function addHTML(node,html,bbox){var extra=node[$extra];var availableSpace=extra.availableSpace;var _bbox=layout_slicedToArray(bbox,4),x=_bbox[0],y=_bbox[1],w=_bbox[2],h=_bbox[3];switch(node.layout){case"position":{extra.width=Math.max(extra.width,x+w);extra.height=Math.max(extra.height,y+h);extra.children.push(html);break;}case"lr-tb":case"rl-tb":if(!extra.line||extra.attempt===1){extra.line=createLine(node,[]);extra.children.push(extra.line);extra.numberInLine=0;}extra.numberInLine+=1;extra.line.children.push(html);if(extra.attempt===0){extra.currentWidth+=w;extra.height=Math.max(extra.height,extra.prevHeight+h);}else{extra.currentWidth=w;extra.prevHeight=extra.height;extra.height+=h;extra.attempt=0;}extra.width=Math.max(extra.width,extra.currentWidth);break;case"rl-row":case"row":{extra.children.push(html);extra.width+=w;extra.height=Math.max(extra.height,h);var height=measureToString(extra.height);var _iterator=layout_createForOfIteratorHelper(extra.children),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;child.attributes.style.height=height;}}catch(err){_iterator.e(err);}finally{_iterator.f();}break;}case"table":{extra.width=Math.min(availableSpace.width,Math.max(extra.width,w));extra.height+=h;extra.children.push(html);break;}case"tb":{extra.width=Math.min(availableSpace.width,Math.max(extra.width,w));extra.height+=h;extra.children.push(html);break;}}}function getAvailableSpace(node){var availableSpace=node[$extra].availableSpace;var marginV=node.margin?node.margin.topInset+node.margin.bottomInset:0;var marginH=node.margin?node.margin.leftInset+node.margin.rightInset:0;switch(node.layout){case"lr-tb":case"rl-tb":if(node[$extra].attempt===0){return{width:availableSpace.width-marginH-node[$extra].currentWidth,height:availableSpace.height-marginV-node[$extra].prevHeight};}return{width:availableSpace.width-marginH,height:availableSpace.height-marginV-node[$extra].height};case"rl-row":case"row":var width=node[$extra].columnWidths.slice(node[$extra].currentColumn).reduce(function(a,x){return a+x;});return{width:width,height:availableSpace.height-marginH};case"table":case"tb":return{width:availableSpace.width-marginH,height:availableSpace.height-marginV-node[$extra].height};case"position":default:return availableSpace;}}function getTransformedBBox(node){var w=node.w===""?NaN:node.w;var h=node.h===""?NaN:node.h;var centerX=0,centerY=0;switch(node.anchorType||""){case"bottomCenter":centerX=w/2;centerY=h;break;case"bottomLeft":centerX=0;centerY=h;break;case"bottomRight":centerX=w;centerY=h;break;case"middleCenter":centerX=w/2;centerY=h/2;break;case"middleLeft":centerX=0;centerY=h/2;break;case"middleRight":centerX=w;centerY=h/2;break;case"topCenter":centerX=w/2;centerY=0;break;case"topRight":centerX=w;centerY=0;break;}var x,y;switch(node.rotate||0){case 0:x=-centerX;y=-centerY;break;case 90:x=-centerY;y=centerX;var _ref=[h,-w];w=_ref[0];h=_ref[1];break;case 180:x=centerX;y=centerY;var _ref2=[-w,-h];w=_ref2[0];h=_ref2[1];break;case 270:x=centerY;y=-centerX;var _ref3=[-h,w];w=_ref3[0];h=_ref3[1];break;}return[node.x+x+Math.min(0,w),node.y+y+Math.min(0,h),Math.abs(w),Math.abs(h)];}function checkDimensions(node,space){var _parent$$extra;if(node[$getTemplateRoot]()[$extra].firstUnsplittable===null){return true;}if(node.w===0||node.h===0){return true;}var ERROR=2;var parent=node[$getSubformParent]();var attempt=((_parent$$extra=parent[$extra])===null||_parent$$extra===void 0?void 0:_parent$$extra.attempt)||0;var _getTransformedBBox=getTransformedBBox(node),_getTransformedBBox2=layout_slicedToArray(_getTransformedBBox,4),y=_getTransformedBBox2[1],w=_getTransformedBBox2[2],h=_getTransformedBBox2[3];switch(parent.layout){case"lr-tb":case"rl-tb":if(attempt===0){if(!node[$getTemplateRoot]()[$extra].noLayoutFailure){if(node.h!==""&&Math.round(h-space.height)>ERROR){return false;}if(node.w!==""){if(Math.round(w-space.width)<=ERROR){return true;}if(parent[$extra].numberInLine===0){return space.height>ERROR;}return false;}return space.width>ERROR;}if(node.w!==""){return Math.round(w-space.width)<=ERROR;}return space.width>ERROR;}if(node[$getTemplateRoot]()[$extra].noLayoutFailure){return true;}if(node.h!==""&&Math.round(h-space.height)>ERROR){return false;}if(node.w===""||Math.round(w-space.width)<=ERROR){return space.height>ERROR;}if(parent[$isThereMoreWidth]()){return false;}return space.height>ERROR;case"table":case"tb":if(node[$getTemplateRoot]()[$extra].noLayoutFailure){return true;}if(node.h!==""&&!node[$isSplittable]()){return Math.round(h-space.height)<=ERROR;}if(node.w===""||Math.round(w-space.width)<=ERROR){return space.height>ERROR;}if(parent[$isThereMoreWidth]()){return false;}return space.height>ERROR;case"position":if(node[$getTemplateRoot]()[$extra].noLayoutFailure){return true;}if(node.h===""||Math.round(h+y-space.height)<=ERROR){return true;}var area=node[$getTemplateRoot]()[$extra].currentContentArea;return h+y>area.h;case"rl-row":case"row":if(node[$getTemplateRoot]()[$extra].noLayoutFailure){return true;}if(node.h!==""){return Math.round(h-space.height)<=ERROR;}return true;default:return true;}}
;// CONCATENATED MODULE: ./src/core/xfa/template.js
function template_typeof(o){"@babel/helpers - typeof";return template_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},template_typeof(o);}function template_get(){if(typeof Reflect!=="undefined"&&Reflect.get){template_get=Reflect.get.bind();}else{template_get=function _get(target,property,receiver){var base=template_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return template_get.apply(this,arguments);}function template_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=template_getPrototypeOf(object);if(object===null)break;}return object;}function template_slicedToArray(arr,i){return template_arrayWithHoles(arr)||template_iterableToArrayLimit(arr,i)||template_unsupportedIterableToArray(arr,i)||template_nonIterableRest();}function template_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function template_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function template_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function template_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,template_toPropertyKey(descriptor.key),descriptor);}}function template_createClass(Constructor,protoProps,staticProps){if(protoProps)template_defineProperties(Constructor.prototype,protoProps);if(staticProps)template_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function template_toPropertyKey(arg){var key=template_toPrimitive(arg,"string");return template_typeof(key)==="symbol"?key:String(key);}function template_toPrimitive(input,hint){if(template_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(template_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function template_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function template_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)template_setPrototypeOf(subClass,superClass);}function template_setPrototypeOf(o,p){template_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return template_setPrototypeOf(o,p);}function template_createSuper(Derived){var hasNativeReflectConstruct=template_isNativeReflectConstruct();return function _createSuperInternal(){var Super=template_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=template_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return template_possibleConstructorReturn(this,result);};}function template_possibleConstructorReturn(self,call){if(call&&(template_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return template_assertThisInitialized(self);}function template_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function template_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function template_getPrototypeOf(o){template_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return template_getPrototypeOf(o);}function template_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */template_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==template_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(template_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}var _marked=/*#__PURE__*/template_regeneratorRuntime().mark(getContainedChildren);function template_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=template_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function template_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return template_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return template_arrayLikeToArray(o,minLen);}function template_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}var TEMPLATE_NS_ID=NamespaceIds.template.id;var SVG_NS="http://www.w3.org/2000/svg";var MAX_ATTEMPTS_FOR_LRTB_LAYOUT=2;var MAX_EMPTY_PAGES=3;var DEFAULT_TAB_INDEX=5000;var HEADING_PATTERN=/^H(\d+)$/;var MIMES=new Set(["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/apng","image/x-png","image/bmp","image/x-ms-bmp","image/tiff","image/tif","application/octet-stream"]);var IMAGES_HEADERS=[[[0x42,0x4d],"image/bmp"],[[0xff,0xd8,0xff],"image/jpeg"],[[0x49,0x49,0x2a,0x00],"image/tiff"],[[0x4d,0x4d,0x00,0x2a],"image/tiff"],[[0x47,0x49,0x46,0x38,0x39,0x61],"image/gif"],[[0x89,0x50,0x4e,0x47,0x0d,0x0a,0x1a,0x0a],"image/png"]];function getBorderDims(node){if(!node||!node.border){return{w:0,h:0};}var borderExtra=node.border[$getExtra]();if(!borderExtra){return{w:0,h:0};}return{w:borderExtra.widths[0]+borderExtra.widths[2]+borderExtra.insets[0]+borderExtra.insets[2],h:borderExtra.widths[1]+borderExtra.widths[3]+borderExtra.insets[1]+borderExtra.insets[3]};}function hasMargin(node){return node.margin&&(node.margin.topInset||node.margin.rightInset||node.margin.bottomInset||node.margin.leftInset);}function _setValue(templateNode,value){if(!templateNode.value){var nodeValue=new Value({});templateNode[$appendChild](nodeValue);templateNode.value=nodeValue;}templateNode.value[$setValue](value);}function getContainedChildren(node){var _iterator,_step,child;return template_regeneratorRuntime().wrap(function getContainedChildren$(_context){while(1)switch(_context.prev=_context.next){case 0:_iterator=template_createForOfIteratorHelper(node[$getChildren]());_context.prev=1;_iterator.s();case 3:if((_step=_iterator.n()).done){_context.next=12;break;}child=_step.value;if(!(child instanceof SubformSet)){_context.next=8;break;}return _context.delegateYield(child[$getContainedChildren](),"t0",7);case 7:return _context.abrupt("continue",10);case 8:_context.next=10;return child;case 10:_context.next=3;break;case 12:_context.next=17;break;case 14:_context.prev=14;_context.t1=_context["catch"](1);_iterator.e(_context.t1);case 17:_context.prev=17;_iterator.f();return _context.finish(17);case 20:case"end":return _context.stop();}},_marked,null,[[1,14,17,20]]);}function isRequired(node){var _node$validate;return((_node$validate=node.validate)===null||_node$validate===void 0?void 0:_node$validate.nullTest)==="error";}function setTabIndex(node){while(node){if(!node.traversal){node[$tabIndex]=node[$getParent]()[$tabIndex];return;}if(node[$tabIndex]){return;}var next=null;var _iterator2=template_createForOfIteratorHelper(node.traversal[$getChildren]()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var child=_step2.value;if(child.operation==="next"){next=child;break;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}if(!next||!next.ref){node[$tabIndex]=node[$getParent]()[$tabIndex];return;}var root=node[$getTemplateRoot]();node[$tabIndex]=++root[$tabIndex];var ref=root[$searchNode](next.ref,node);if(!ref){return;}node=ref[0];}}function applyAssist(obj,attributes){var assist=obj.assist;if(assist){var assistTitle=assist[$toHTML]();if(assistTitle){attributes.title=assistTitle;}var role=assist.role;var match=role.match(HEADING_PATTERN);if(match){var ariaRole="heading";var ariaLevel=match[1];attributes.role=ariaRole;attributes["aria-level"]=ariaLevel;}}if(obj.layout==="table"){attributes.role="table";}else if(obj.layout==="row"){attributes.role="row";}else{var parent=obj[$getParent]();if(parent.layout==="row"){var _parent$assist;attributes.role=((_parent$assist=parent.assist)===null||_parent$assist===void 0?void 0:_parent$assist.role)==="TH"?"columnheader":"cell";}}}function ariaLabel(obj){if(!obj.assist){return null;}var assist=obj.assist;if(assist.speak&&assist.speak[$content]!==""){return assist.speak[$content];}if(assist.toolTip){return assist.toolTip[$content];}return null;}function valueToHtml(value){return HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:Object.create(null)},children:[{name:"span",attributes:{style:Object.create(null)},value:value}]});}function setFirstUnsplittable(node){var root=node[$getTemplateRoot]();if(root[$extra].firstUnsplittable===null){root[$extra].firstUnsplittable=node;root[$extra].noLayoutFailure=true;}}function unsetFirstUnsplittable(node){var root=node[$getTemplateRoot]();if(root[$extra].firstUnsplittable===node){root[$extra].noLayoutFailure=false;}}function handleBreak(node){if(node[$extra]){return false;}node[$extra]=Object.create(null);if(node.targetType==="auto"){return false;}var root=node[$getTemplateRoot]();var target=null;if(node.target){target=root[$searchNode](node.target,node[$getParent]());if(!target){return false;}target=target[0];}var _root$$extra=root[$extra],currentPageArea=_root$$extra.currentPageArea,currentContentArea=_root$$extra.currentContentArea;if(node.targetType==="pageArea"){if(!(target instanceof PageArea)){target=null;}if(node.startNew){node[$extra].target=target||currentPageArea;return true;}else if(target&&target!==currentPageArea){node[$extra].target=target;return true;}return false;}if(!(target instanceof ContentArea)){target=null;}var pageArea=target&&target[$getParent]();var index;var nextPageArea=pageArea;if(node.startNew){if(target){var contentAreas=pageArea.contentArea.children;var indexForCurrent=contentAreas.indexOf(currentContentArea);var indexForTarget=contentAreas.indexOf(target);if(indexForCurrent!==-1&&indexForCurrent<indexForTarget){nextPageArea=null;}index=indexForTarget-1;}else{index=currentPageArea.contentArea.children.indexOf(currentContentArea);}}else if(target&&target!==currentContentArea){var _contentAreas=pageArea.contentArea.children;index=_contentAreas.indexOf(target)-1;nextPageArea=pageArea===currentPageArea?null:pageArea;}else{return false;}node[$extra].target=nextPageArea;node[$extra].index=index;return true;}function handleOverflow(node,extraNode,space){var root=node[$getTemplateRoot]();var saved=root[$extra].noLayoutFailure;var savedMethod=extraNode[$getSubformParent];extraNode[$getSubformParent]=function(){return node;};root[$extra].noLayoutFailure=true;var res=extraNode[$toHTML](space);node[$addHTML](res.html,res.bbox);root[$extra].noLayoutFailure=saved;extraNode[$getSubformParent]=savedMethod;}var AppearanceFilter=/*#__PURE__*/function(_StringObject){template_inherits(AppearanceFilter,_StringObject);var _super=template_createSuper(AppearanceFilter);function AppearanceFilter(attributes){var _this;template_classCallCheck(this,AppearanceFilter);_this=_super.call(this,TEMPLATE_NS_ID,"appearanceFilter");_this.id=attributes.id||"";_this.type=getStringOption(attributes.type,["optional","required"]);_this.use=attributes.use||"";_this.usehref=attributes.usehref||"";return _this;}return template_createClass(AppearanceFilter);}(StringObject);var Arc=/*#__PURE__*/function(_XFAObject){template_inherits(Arc,_XFAObject);var _super2=template_createSuper(Arc);function Arc(attributes){var _this2;template_classCallCheck(this,Arc);_this2=_super2.call(this,TEMPLATE_NS_ID,"arc",true);_this2.circular=getInteger({data:attributes.circular,defaultValue:0,validate:function validate(x){return x===1;}});_this2.hand=getStringOption(attributes.hand,["even","left","right"]);_this2.id=attributes.id||"";_this2.startAngle=getFloat({data:attributes.startAngle,defaultValue:0,validate:function validate(x){return true;}});_this2.sweepAngle=getFloat({data:attributes.sweepAngle,defaultValue:360,validate:function validate(x){return true;}});_this2.use=attributes.use||"";_this2.usehref=attributes.usehref||"";_this2.edge=null;_this2.fill=null;return _this2;}template_createClass(Arc,[{key:$toHTML,value:function value(){var _this$fill;var edge=this.edge||new Edge({});var edgeStyle=edge[$toStyle]();var style=Object.create(null);if(((_this$fill=this.fill)===null||_this$fill===void 0?void 0:_this$fill.presence)==="visible"){Object.assign(style,this.fill[$toStyle]());}else{style.fill="transparent";}style.strokeWidth=measureToString(edge.presence==="visible"?edge.thickness:0);style.stroke=edgeStyle.color;var arc;var attributes={xmlns:SVG_NS,style:{width:"100%",height:"100%",overflow:"visible"}};if(this.sweepAngle===360){arc={name:"ellipse",attributes:{xmlns:SVG_NS,cx:"50%",cy:"50%",rx:"50%",ry:"50%",style:style}};}else{var startAngle=this.startAngle*Math.PI/180;var sweepAngle=this.sweepAngle*Math.PI/180;var largeArc=this.sweepAngle>180?1:0;var x1=50*(1+Math.cos(startAngle)),y1=50*(1-Math.sin(startAngle)),x2=50*(1+Math.cos(startAngle+sweepAngle)),y2=50*(1-Math.sin(startAngle+sweepAngle));arc={name:"path",attributes:{xmlns:SVG_NS,d:"M ".concat(x1," ").concat(y1," A 50 50 0 ").concat(largeArc," 0 ").concat(x2," ").concat(y2),vectorEffect:"non-scaling-stroke",style:style}};Object.assign(attributes,{viewBox:"0 0 100 100",preserveAspectRatio:"none"});}var svg={name:"svg",children:[arc],attributes:attributes};var parent=this[$getParent]()[$getParent]();if(hasMargin(parent)){return HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[svg]});}svg.attributes.style.position="absolute";return HTMLResult.success(svg);}}]);return Arc;}(XFAObject);var Area=/*#__PURE__*/function(_XFAObject2){template_inherits(Area,_XFAObject2);var _super3=template_createSuper(Area);function Area(attributes){var _this3;template_classCallCheck(this,Area);_this3=_super3.call(this,TEMPLATE_NS_ID,"area",true);_this3.colSpan=getInteger({data:attributes.colSpan,defaultValue:1,validate:function validate(n){return n>=1||n===-1;}});_this3.id=attributes.id||"";_this3.name=attributes.name||"";_this3.relevant=getRelevant(attributes.relevant);_this3.use=attributes.use||"";_this3.usehref=attributes.usehref||"";_this3.x=getMeasurement(attributes.x,"0pt");_this3.y=getMeasurement(attributes.y,"0pt");_this3.desc=null;_this3.extras=null;_this3.area=new XFAObjectArray();_this3.draw=new XFAObjectArray();_this3.exObject=new XFAObjectArray();_this3.exclGroup=new XFAObjectArray();_this3.field=new XFAObjectArray();_this3.subform=new XFAObjectArray();_this3.subformSet=new XFAObjectArray();return _this3;}template_createClass(Area,[{key:$getContainedChildren,value:/*#__PURE__*/template_regeneratorRuntime().mark(function value(){return template_regeneratorRuntime().wrap(function value$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.delegateYield(getContainedChildren(this),"t0",1);case 1:case"end":return _context2.stop();}},value,this);})},{key:$isTransparent,value:function value(){return true;}},{key:$isBindable,value:function value(){return true;}},{key:$addHTML,value:function value(html,bbox){var _bbox=template_slicedToArray(bbox,4),x=_bbox[0],y=_bbox[1],w=_bbox[2],h=_bbox[3];this[$extra].width=Math.max(this[$extra].width,x+w);this[$extra].height=Math.max(this[$extra].height,y+h);this[$extra].children.push(html);}},{key:$getAvailableSpace,value:function value(){return this[$extra].availableSpace;}},{key:$toHTML,value:function value(availableSpace){var style=toStyle(this,"position");var attributes={style:style,id:this[$uid],class:["xfaArea"]};if(isPrintOnly(this)){attributes.class.push("xfaPrintOnly");}if(this.name){attributes.xfaName=this.name;}var children=[];this[$extra]={children:children,width:0,height:0,availableSpace:availableSpace};var result=this[$childrenToHTML]({filter:new Set(["area","draw","field","exclGroup","subform","subformSet"]),include:true});if(!result.success){if(result.isBreak()){return result;}delete this[$extra];return HTMLResult.FAILURE;}style.width=measureToString(this[$extra].width);style.height=measureToString(this[$extra].height);var html={name:"div",attributes:attributes,children:children};var bbox=[this.x,this.y,this[$extra].width,this[$extra].height];delete this[$extra];return HTMLResult.success(html,bbox);}}]);return Area;}(XFAObject);var Assist=/*#__PURE__*/function(_XFAObject3){template_inherits(Assist,_XFAObject3);var _super4=template_createSuper(Assist);function Assist(attributes){var _this4;template_classCallCheck(this,Assist);_this4=_super4.call(this,TEMPLATE_NS_ID,"assist",true);_this4.id=attributes.id||"";_this4.role=attributes.role||"";_this4.use=attributes.use||"";_this4.usehref=attributes.usehref||"";_this4.speak=null;_this4.toolTip=null;return _this4;}template_createClass(Assist,[{key:$toHTML,value:function value(){var _this$toolTip;return((_this$toolTip=this.toolTip)===null||_this$toolTip===void 0?void 0:_this$toolTip[$content])||null;}}]);return Assist;}(XFAObject);var Barcode=/*#__PURE__*/function(_XFAObject4){template_inherits(Barcode,_XFAObject4);var _super5=template_createSuper(Barcode);function Barcode(attributes){var _this5;template_classCallCheck(this,Barcode);_this5=_super5.call(this,TEMPLATE_NS_ID,"barcode",true);_this5.charEncoding=getKeyword({data:attributes.charEncoding?attributes.charEncoding.toLowerCase():"",defaultValue:"",validate:function validate(k){return["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(k)||k.match(/iso-8859-\d{2}/);}});_this5.checksum=getStringOption(attributes.checksum,["none","1mod10","1mod10_1mod11","2mod10","auto"]);_this5.dataColumnCount=getInteger({data:attributes.dataColumnCount,defaultValue:-1,validate:function validate(x){return x>=0;}});_this5.dataLength=getInteger({data:attributes.dataLength,defaultValue:-1,validate:function validate(x){return x>=0;}});_this5.dataPrep=getStringOption(attributes.dataPrep,["none","flateCompress"]);_this5.dataRowCount=getInteger({data:attributes.dataRowCount,defaultValue:-1,validate:function validate(x){return x>=0;}});_this5.endChar=attributes.endChar||"";_this5.errorCorrectionLevel=getInteger({data:attributes.errorCorrectionLevel,defaultValue:-1,validate:function validate(x){return x>=0&&x<=8;}});_this5.id=attributes.id||"";_this5.moduleHeight=getMeasurement(attributes.moduleHeight,"5mm");_this5.moduleWidth=getMeasurement(attributes.moduleWidth,"0.25mm");_this5.printCheckDigit=getInteger({data:attributes.printCheckDigit,defaultValue:0,validate:function validate(x){return x===1;}});_this5.rowColumnRatio=getRatio(attributes.rowColumnRatio);_this5.startChar=attributes.startChar||"";_this5.textLocation=getStringOption(attributes.textLocation,["below","above","aboveEmbedded","belowEmbedded","none"]);_this5.truncate=getInteger({data:attributes.truncate,defaultValue:0,validate:function validate(x){return x===1;}});_this5.type=getStringOption(attributes.type?attributes.type.toLowerCase():"",["aztec","codabar","code2of5industrial","code2of5interleaved","code2of5matrix","code2of5standard","code3of9","code3of9extended","code11","code49","code93","code128","code128a","code128b","code128c","code128sscc","datamatrix","ean8","ean8add2","ean8add5","ean13","ean13add2","ean13add5","ean13pwcd","fim","logmars","maxicode","msi","pdf417","pdf417macro","plessey","postauscust2","postauscust3","postausreplypaid","postausstandard","postukrm4scc","postusdpbc","postusimb","postusstandard","postus5zip","qrcode","rfid","rss14","rss14expanded","rss14limited","rss14stacked","rss14stackedomni","rss14truncated","telepen","ucc128","ucc128random","ucc128sscc","upca","upcaadd2","upcaadd5","upcapwcd","upce","upceadd2","upceadd5","upcean2","upcean5","upsmaxicode"]);_this5.upsMode=getStringOption(attributes.upsMode,["usCarrier","internationalCarrier","secureSymbol","standardSymbol"]);_this5.use=attributes.use||"";_this5.usehref=attributes.usehref||"";_this5.wideNarrowRatio=getRatio(attributes.wideNarrowRatio);_this5.encrypt=null;_this5.extras=null;return _this5;}return template_createClass(Barcode);}(XFAObject);var Bind=/*#__PURE__*/function(_XFAObject5){template_inherits(Bind,_XFAObject5);var _super6=template_createSuper(Bind);function Bind(attributes){var _this6;template_classCallCheck(this,Bind);_this6=_super6.call(this,TEMPLATE_NS_ID,"bind",true);_this6.match=getStringOption(attributes.match,["once","dataRef","global","none"]);_this6.ref=attributes.ref||"";_this6.picture=null;return _this6;}return template_createClass(Bind);}(XFAObject);var BindItems=/*#__PURE__*/function(_XFAObject6){template_inherits(BindItems,_XFAObject6);var _super7=template_createSuper(BindItems);function BindItems(attributes){var _this7;template_classCallCheck(this,BindItems);_this7=_super7.call(this,TEMPLATE_NS_ID,"bindItems");_this7.connection=attributes.connection||"";_this7.labelRef=attributes.labelRef||"";_this7.ref=attributes.ref||"";_this7.valueRef=attributes.valueRef||"";return _this7;}return template_createClass(BindItems);}(XFAObject);var Bookend=/*#__PURE__*/function(_XFAObject7){template_inherits(Bookend,_XFAObject7);var _super8=template_createSuper(Bookend);function Bookend(attributes){var _this8;template_classCallCheck(this,Bookend);_this8=_super8.call(this,TEMPLATE_NS_ID,"bookend");_this8.id=attributes.id||"";_this8.leader=attributes.leader||"";_this8.trailer=attributes.trailer||"";_this8.use=attributes.use||"";_this8.usehref=attributes.usehref||"";return _this8;}return template_createClass(Bookend);}(XFAObject);var BooleanElement=/*#__PURE__*/function(_Option){template_inherits(BooleanElement,_Option);var _super9=template_createSuper(BooleanElement);function BooleanElement(attributes){var _this9;template_classCallCheck(this,BooleanElement);_this9=_super9.call(this,TEMPLATE_NS_ID,"boolean");_this9.id=attributes.id||"";_this9.name=attributes.name||"";_this9.use=attributes.use||"";_this9.usehref=attributes.usehref||"";return _this9;}template_createClass(BooleanElement,[{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]===1?"1":"0");}}]);return BooleanElement;}(Option01);var Border=/*#__PURE__*/function(_XFAObject8){template_inherits(Border,_XFAObject8);var _super10=template_createSuper(Border);function Border(attributes){var _this10;template_classCallCheck(this,Border);_this10=_super10.call(this,TEMPLATE_NS_ID,"border",true);_this10.break=getStringOption(attributes.break,["close","open"]);_this10.hand=getStringOption(attributes.hand,["even","left","right"]);_this10.id=attributes.id||"";_this10.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this10.relevant=getRelevant(attributes.relevant);_this10.use=attributes.use||"";_this10.usehref=attributes.usehref||"";_this10.corner=new XFAObjectArray(4);_this10.edge=new XFAObjectArray(4);_this10.extras=null;_this10.fill=null;_this10.margin=null;return _this10;}template_createClass(Border,[{key:$getExtra,value:function value(){if(!this[$extra]){var edges=this.edge.children.slice();if(edges.length<4){var defaultEdge=edges.at(-1)||new Edge({});for(var i=edges.length;i<4;i++){edges.push(defaultEdge);}}var widths=edges.map(function(edge){return edge.thickness;});var insets=[0,0,0,0];if(this.margin){insets[0]=this.margin.topInset;insets[1]=this.margin.rightInset;insets[2]=this.margin.bottomInset;insets[3]=this.margin.leftInset;}this[$extra]={widths:widths,insets:insets,edges:edges};}return this[$extra];}},{key:$toStyle,value:function value(){var _this$fill2;var _this$$getExtra=this[$getExtra](),edges=_this$$getExtra.edges;var edgeStyles=edges.map(function(node){var style=node[$toStyle]();style.color||(style.color="#000000");return style;});var style=Object.create(null);if(this.margin){Object.assign(style,this.margin[$toStyle]());}if(((_this$fill2=this.fill)===null||_this$fill2===void 0?void 0:_this$fill2.presence)==="visible"){Object.assign(style,this.fill[$toStyle]());}if(this.corner.children.some(function(node){return node.radius!==0;})){var cornerStyles=this.corner.children.map(function(node){return node[$toStyle]();});if(cornerStyles.length===2||cornerStyles.length===3){var last=cornerStyles.at(-1);for(var i=cornerStyles.length;i<4;i++){cornerStyles.push(last);}}style.borderRadius=cornerStyles.map(function(s){return s.radius;}).join(" ");}switch(this.presence){case"invisible":case"hidden":style.borderStyle="";break;case"inactive":style.borderStyle="none";break;default:style.borderStyle=edgeStyles.map(function(s){return s.style;}).join(" ");break;}style.borderWidth=edgeStyles.map(function(s){return s.width;}).join(" ");style.borderColor=edgeStyles.map(function(s){return s.color;}).join(" ");return style;}}]);return Border;}(XFAObject);var Break=/*#__PURE__*/function(_XFAObject9){template_inherits(Break,_XFAObject9);var _super11=template_createSuper(Break);function Break(attributes){var _this11;template_classCallCheck(this,Break);_this11=_super11.call(this,TEMPLATE_NS_ID,"break",true);_this11.after=getStringOption(attributes.after,["auto","contentArea","pageArea","pageEven","pageOdd"]);_this11.afterTarget=attributes.afterTarget||"";_this11.before=getStringOption(attributes.before,["auto","contentArea","pageArea","pageEven","pageOdd"]);_this11.beforeTarget=attributes.beforeTarget||"";_this11.bookendLeader=attributes.bookendLeader||"";_this11.bookendTrailer=attributes.bookendTrailer||"";_this11.id=attributes.id||"";_this11.overflowLeader=attributes.overflowLeader||"";_this11.overflowTarget=attributes.overflowTarget||"";_this11.overflowTrailer=attributes.overflowTrailer||"";_this11.startNew=getInteger({data:attributes.startNew,defaultValue:0,validate:function validate(x){return x===1;}});_this11.use=attributes.use||"";_this11.usehref=attributes.usehref||"";_this11.extras=null;return _this11;}return template_createClass(Break);}(XFAObject);var BreakAfter=/*#__PURE__*/function(_XFAObject10){template_inherits(BreakAfter,_XFAObject10);var _super12=template_createSuper(BreakAfter);function BreakAfter(attributes){var _this12;template_classCallCheck(this,BreakAfter);_this12=_super12.call(this,TEMPLATE_NS_ID,"breakAfter",true);_this12.id=attributes.id||"";_this12.leader=attributes.leader||"";_this12.startNew=getInteger({data:attributes.startNew,defaultValue:0,validate:function validate(x){return x===1;}});_this12.target=attributes.target||"";_this12.targetType=getStringOption(attributes.targetType,["auto","contentArea","pageArea"]);_this12.trailer=attributes.trailer||"";_this12.use=attributes.use||"";_this12.usehref=attributes.usehref||"";_this12.script=null;return _this12;}return template_createClass(BreakAfter);}(XFAObject);var BreakBefore=/*#__PURE__*/function(_XFAObject11){template_inherits(BreakBefore,_XFAObject11);var _super13=template_createSuper(BreakBefore);function BreakBefore(attributes){var _this13;template_classCallCheck(this,BreakBefore);_this13=_super13.call(this,TEMPLATE_NS_ID,"breakBefore",true);_this13.id=attributes.id||"";_this13.leader=attributes.leader||"";_this13.startNew=getInteger({data:attributes.startNew,defaultValue:0,validate:function validate(x){return x===1;}});_this13.target=attributes.target||"";_this13.targetType=getStringOption(attributes.targetType,["auto","contentArea","pageArea"]);_this13.trailer=attributes.trailer||"";_this13.use=attributes.use||"";_this13.usehref=attributes.usehref||"";_this13.script=null;return _this13;}template_createClass(BreakBefore,[{key:$toHTML,value:function value(availableSpace){this[$extra]={};return HTMLResult.FAILURE;}}]);return BreakBefore;}(XFAObject);var Button=/*#__PURE__*/function(_XFAObject12){template_inherits(Button,_XFAObject12);var _super14=template_createSuper(Button);function Button(attributes){var _this14;template_classCallCheck(this,Button);_this14=_super14.call(this,TEMPLATE_NS_ID,"button",true);_this14.highlight=getStringOption(attributes.highlight,["inverted","none","outline","push"]);_this14.id=attributes.id||"";_this14.use=attributes.use||"";_this14.usehref=attributes.usehref||"";_this14.extras=null;return _this14;}template_createClass(Button,[{key:$toHTML,value:function value(availableSpace){var parent=this[$getParent]();var grandpa=parent[$getParent]();var htmlButton={name:"button",attributes:{id:this[$uid],class:["xfaButton"],style:{}},children:[]};var _iterator3=template_createForOfIteratorHelper(grandpa.event.children),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var event=_step3.value;if(event.activity!=="click"||!event.script){continue;}var jsURL=recoverJsURL(event.script[$content]);if(!jsURL){continue;}var href=fixURL(jsURL.url);if(!href){continue;}htmlButton.children.push({name:"a",attributes:{id:"link"+this[$uid],href:href,newWindow:jsURL.newWindow,class:["xfaLink"],style:{}},children:[]});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return HTMLResult.success(htmlButton);}}]);return Button;}(XFAObject);var Calculate=/*#__PURE__*/function(_XFAObject13){template_inherits(Calculate,_XFAObject13);var _super15=template_createSuper(Calculate);function Calculate(attributes){var _this15;template_classCallCheck(this,Calculate);_this15=_super15.call(this,TEMPLATE_NS_ID,"calculate",true);_this15.id=attributes.id||"";_this15.override=getStringOption(attributes.override,["disabled","error","ignore","warning"]);_this15.use=attributes.use||"";_this15.usehref=attributes.usehref||"";_this15.extras=null;_this15.message=null;_this15.script=null;return _this15;}return template_createClass(Calculate);}(XFAObject);var Caption=/*#__PURE__*/function(_XFAObject14){template_inherits(Caption,_XFAObject14);var _super16=template_createSuper(Caption);function Caption(attributes){var _this16;template_classCallCheck(this,Caption);_this16=_super16.call(this,TEMPLATE_NS_ID,"caption",true);_this16.id=attributes.id||"";_this16.placement=getStringOption(attributes.placement,["left","bottom","inline","right","top"]);_this16.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this16.reserve=Math.ceil(getMeasurement(attributes.reserve));_this16.use=attributes.use||"";_this16.usehref=attributes.usehref||"";_this16.extras=null;_this16.font=null;_this16.margin=null;_this16.para=null;_this16.value=null;return _this16;}template_createClass(Caption,[{key:$setValue,value:function(_value){function value(_x){return _value.apply(this,arguments);}value.toString=function(){return _value.toString();};return value;}(function(value){_setValue(this,value);})},{key:$getExtra,value:function value(availableSpace){if(!this[$extra]){var width=availableSpace.width,height=availableSpace.height;switch(this.placement){case"left":case"right":case"inline":width=this.reserve<=0?width:this.reserve;break;case"top":case"bottom":height=this.reserve<=0?height:this.reserve;break;}this[$extra]=layoutNode(this,{width:width,height:height});}return this[$extra];}},{key:$toHTML,value:function value(availableSpace){if(!this.value){return HTMLResult.EMPTY;}this[$pushPara]();var value=this.value[$toHTML](availableSpace).html;if(!value){this[$popPara]();return HTMLResult.EMPTY;}var savedReserve=this.reserve;if(this.reserve<=0){var _this$$getExtra2=this[$getExtra](availableSpace),w=_this$$getExtra2.w,h=_this$$getExtra2.h;switch(this.placement){case"left":case"right":case"inline":this.reserve=w;break;case"top":case"bottom":this.reserve=h;break;}}var children=[];if(typeof value==="string"){children.push({name:"#text",value:value});}else{children.push(value);}var style=toStyle(this,"font","margin","visibility");switch(this.placement){case"left":case"right":if(this.reserve>0){style.width=measureToString(this.reserve);}break;case"top":case"bottom":if(this.reserve>0){style.height=measureToString(this.reserve);}break;}setPara(this,null,value);this[$popPara]();this.reserve=savedReserve;return HTMLResult.success({name:"div",attributes:{style:style,class:["xfaCaption"]},children:children});}}]);return Caption;}(XFAObject);var Certificate=/*#__PURE__*/function(_StringObject2){template_inherits(Certificate,_StringObject2);var _super17=template_createSuper(Certificate);function Certificate(attributes){var _this17;template_classCallCheck(this,Certificate);_this17=_super17.call(this,TEMPLATE_NS_ID,"certificate");_this17.id=attributes.id||"";_this17.name=attributes.name||"";_this17.use=attributes.use||"";_this17.usehref=attributes.usehref||"";return _this17;}return template_createClass(Certificate);}(StringObject);var Certificates=/*#__PURE__*/function(_XFAObject15){template_inherits(Certificates,_XFAObject15);var _super18=template_createSuper(Certificates);function Certificates(attributes){var _this18;template_classCallCheck(this,Certificates);_this18=_super18.call(this,TEMPLATE_NS_ID,"certificates",true);_this18.credentialServerPolicy=getStringOption(attributes.credentialServerPolicy,["optional","required"]);_this18.id=attributes.id||"";_this18.url=attributes.url||"";_this18.urlPolicy=attributes.urlPolicy||"";_this18.use=attributes.use||"";_this18.usehref=attributes.usehref||"";_this18.encryption=null;_this18.issuers=null;_this18.keyUsage=null;_this18.oids=null;_this18.signing=null;_this18.subjectDNs=null;return _this18;}return template_createClass(Certificates);}(XFAObject);var CheckButton=/*#__PURE__*/function(_XFAObject16){template_inherits(CheckButton,_XFAObject16);var _super19=template_createSuper(CheckButton);function CheckButton(attributes){var _this19;template_classCallCheck(this,CheckButton);_this19=_super19.call(this,TEMPLATE_NS_ID,"checkButton",true);_this19.id=attributes.id||"";_this19.mark=getStringOption(attributes.mark,["default","check","circle","cross","diamond","square","star"]);_this19.shape=getStringOption(attributes.shape,["square","round"]);_this19.size=getMeasurement(attributes.size,"10pt");_this19.use=attributes.use||"";_this19.usehref=attributes.usehref||"";_this19.border=null;_this19.extras=null;_this19.margin=null;return _this19;}template_createClass(CheckButton,[{key:$toHTML,value:function value(availableSpace){var _field$value;var style=toStyle("margin");var size=measureToString(this.size);style.width=style.height=size;var type;var className;var groupId;var field=this[$getParent]()[$getParent]();var items=field.items.children.length&&field.items.children[0][$toHTML]().html||[];var exportedValue={on:(items[0]!==undefined?items[0]:"on").toString(),off:(items[1]!==undefined?items[1]:"off").toString()};var value=((_field$value=field.value)===null||_field$value===void 0?void 0:_field$value[$text]())||"off";var checked=value===exportedValue.on||undefined;var container=field[$getSubformParent]();var fieldId=field[$uid];var dataId;if(container instanceof ExclGroup){var _container$$data;groupId=container[$uid];type="radio";className="xfaRadio";dataId=((_container$$data=container[$data])===null||_container$$data===void 0?void 0:_container$$data[$uid])||container[$uid];}else{var _field$$data;type="checkbox";className="xfaCheckbox";dataId=((_field$$data=field[$data])===null||_field$$data===void 0?void 0:_field$$data[$uid])||field[$uid];}var input={name:"input",attributes:{class:[className],style:style,fieldId:fieldId,dataId:dataId,type:type,checked:checked,xfaOn:exportedValue.on,xfaOff:exportedValue.off,"aria-label":ariaLabel(field),"aria-required":false}};if(groupId){input.attributes.name=groupId;}if(isRequired(field)){input.attributes["aria-required"]=true;input.attributes.required=true;}return HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[input]});}}]);return CheckButton;}(XFAObject);var ChoiceList=/*#__PURE__*/function(_XFAObject17){template_inherits(ChoiceList,_XFAObject17);var _super20=template_createSuper(ChoiceList);function ChoiceList(attributes){var _this20;template_classCallCheck(this,ChoiceList);_this20=_super20.call(this,TEMPLATE_NS_ID,"choiceList",true);_this20.commitOn=getStringOption(attributes.commitOn,["select","exit"]);_this20.id=attributes.id||"";_this20.open=getStringOption(attributes.open,["userControl","always","multiSelect","onEntry"]);_this20.textEntry=getInteger({data:attributes.textEntry,defaultValue:0,validate:function validate(x){return x===1;}});_this20.use=attributes.use||"";_this20.usehref=attributes.usehref||"";_this20.border=null;_this20.extras=null;_this20.margin=null;return _this20;}template_createClass(ChoiceList,[{key:$toHTML,value:function value(availableSpace){var _field$font,_field$$data2;var style=toStyle(this,"border","margin");var ui=this[$getParent]();var field=ui[$getParent]();var fontSize=((_field$font=field.font)===null||_field$font===void 0?void 0:_field$font.size)||10;var optionStyle={fontSize:"calc(".concat(fontSize,"px * var(--scale-factor))")};var children=[];if(field.items.children.length>0){var _field$value2;var items=field.items;var displayedIndex=0;var saveIndex=0;if(items.children.length===2){displayedIndex=items.children[0].save;saveIndex=1-displayedIndex;}var displayed=items.children[displayedIndex][$toHTML]().html;var values=items.children[saveIndex][$toHTML]().html;var selected=false;var _value2=((_field$value2=field.value)===null||_field$value2===void 0?void 0:_field$value2[$text]())||"";for(var i=0,ii=displayed.length;i<ii;i++){var option={name:"option",attributes:{value:values[i]||displayed[i],style:optionStyle},value:displayed[i]};if(values[i]===_value2){option.attributes.selected=selected=true;}children.push(option);}if(!selected){children.splice(0,0,{name:"option",attributes:{hidden:true,selected:true},value:" "});}}var selectAttributes={class:["xfaSelect"],fieldId:field[$uid],dataId:((_field$$data2=field[$data])===null||_field$$data2===void 0?void 0:_field$$data2[$uid])||field[$uid],style:style,"aria-label":ariaLabel(field),"aria-required":false};if(isRequired(field)){selectAttributes["aria-required"]=true;selectAttributes.required=true;}if(this.open==="multiSelect"){selectAttributes.multiple=true;}return HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[{name:"select",children:children,attributes:selectAttributes}]});}}]);return ChoiceList;}(XFAObject);var Color=/*#__PURE__*/function(_XFAObject18){template_inherits(Color,_XFAObject18);var _super21=template_createSuper(Color);function Color(attributes){var _this21;template_classCallCheck(this,Color);_this21=_super21.call(this,TEMPLATE_NS_ID,"color",true);_this21.cSpace=getStringOption(attributes.cSpace,["SRGB"]);_this21.id=attributes.id||"";_this21.use=attributes.use||"";_this21.usehref=attributes.usehref||"";_this21.value=attributes.value?getColor(attributes.value):"";_this21.extras=null;return _this21;}template_createClass(Color,[{key:$hasSettableValue,value:function value(){return false;}},{key:$toStyle,value:function value(){return this.value?Util.makeHexColor(this.value.r,this.value.g,this.value.b):null;}}]);return Color;}(XFAObject);var Comb=/*#__PURE__*/function(_XFAObject19){template_inherits(Comb,_XFAObject19);var _super22=template_createSuper(Comb);function Comb(attributes){var _this22;template_classCallCheck(this,Comb);_this22=_super22.call(this,TEMPLATE_NS_ID,"comb");_this22.id=attributes.id||"";_this22.numberOfCells=getInteger({data:attributes.numberOfCells,defaultValue:0,validate:function validate(x){return x>=0;}});_this22.use=attributes.use||"";_this22.usehref=attributes.usehref||"";return _this22;}return template_createClass(Comb);}(XFAObject);var Connect=/*#__PURE__*/function(_XFAObject20){template_inherits(Connect,_XFAObject20);var _super23=template_createSuper(Connect);function Connect(attributes){var _this23;template_classCallCheck(this,Connect);_this23=_super23.call(this,TEMPLATE_NS_ID,"connect",true);_this23.connection=attributes.connection||"";_this23.id=attributes.id||"";_this23.ref=attributes.ref||"";_this23.usage=getStringOption(attributes.usage,["exportAndImport","exportOnly","importOnly"]);_this23.use=attributes.use||"";_this23.usehref=attributes.usehref||"";_this23.picture=null;return _this23;}return template_createClass(Connect);}(XFAObject);var ContentArea=/*#__PURE__*/function(_XFAObject21){template_inherits(ContentArea,_XFAObject21);var _super24=template_createSuper(ContentArea);function ContentArea(attributes){var _this24;template_classCallCheck(this,ContentArea);_this24=_super24.call(this,TEMPLATE_NS_ID,"contentArea",true);_this24.h=getMeasurement(attributes.h);_this24.id=attributes.id||"";_this24.name=attributes.name||"";_this24.relevant=getRelevant(attributes.relevant);_this24.use=attributes.use||"";_this24.usehref=attributes.usehref||"";_this24.w=getMeasurement(attributes.w);_this24.x=getMeasurement(attributes.x,"0pt");_this24.y=getMeasurement(attributes.y,"0pt");_this24.desc=null;_this24.extras=null;return _this24;}template_createClass(ContentArea,[{key:$toHTML,value:function value(availableSpace){var left=measureToString(this.x);var top=measureToString(this.y);var style={left:left,top:top,width:measureToString(this.w),height:measureToString(this.h)};var classNames=["xfaContentarea"];if(isPrintOnly(this)){classNames.push("xfaPrintOnly");}return HTMLResult.success({name:"div",children:[],attributes:{style:style,class:classNames,id:this[$uid]}});}}]);return ContentArea;}(XFAObject);var Corner=/*#__PURE__*/function(_XFAObject22){template_inherits(Corner,_XFAObject22);var _super25=template_createSuper(Corner);function Corner(attributes){var _this25;template_classCallCheck(this,Corner);_this25=_super25.call(this,TEMPLATE_NS_ID,"corner",true);_this25.id=attributes.id||"";_this25.inverted=getInteger({data:attributes.inverted,defaultValue:0,validate:function validate(x){return x===1;}});_this25.join=getStringOption(attributes.join,["square","round"]);_this25.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this25.radius=getMeasurement(attributes.radius);_this25.stroke=getStringOption(attributes.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]);_this25.thickness=getMeasurement(attributes.thickness,"0.5pt");_this25.use=attributes.use||"";_this25.usehref=attributes.usehref||"";_this25.color=null;_this25.extras=null;return _this25;}template_createClass(Corner,[{key:$toStyle,value:function value(){var style=toStyle(this,"visibility");style.radius=measureToString(this.join==="square"?0:this.radius);return style;}}]);return Corner;}(XFAObject);var DateElement=/*#__PURE__*/function(_ContentObject){template_inherits(DateElement,_ContentObject);var _super26=template_createSuper(DateElement);function DateElement(attributes){var _this26;template_classCallCheck(this,DateElement);_this26=_super26.call(this,TEMPLATE_NS_ID,"date");_this26.id=attributes.id||"";_this26.name=attributes.name||"";_this26.use=attributes.use||"";_this26.usehref=attributes.usehref||"";return _this26;}template_createClass(DateElement,[{key:$finalize,value:function value(){var date=this[$content].trim();this[$content]=date?new Date(date):null;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]?this[$content].toString():"");}}]);return DateElement;}(ContentObject);var DateTime=/*#__PURE__*/function(_ContentObject2){template_inherits(DateTime,_ContentObject2);var _super27=template_createSuper(DateTime);function DateTime(attributes){var _this27;template_classCallCheck(this,DateTime);_this27=_super27.call(this,TEMPLATE_NS_ID,"dateTime");_this27.id=attributes.id||"";_this27.name=attributes.name||"";_this27.use=attributes.use||"";_this27.usehref=attributes.usehref||"";return _this27;}template_createClass(DateTime,[{key:$finalize,value:function value(){var date=this[$content].trim();this[$content]=date?new Date(date):null;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]?this[$content].toString():"");}}]);return DateTime;}(ContentObject);var DateTimeEdit=/*#__PURE__*/function(_XFAObject23){template_inherits(DateTimeEdit,_XFAObject23);var _super28=template_createSuper(DateTimeEdit);function DateTimeEdit(attributes){var _this28;template_classCallCheck(this,DateTimeEdit);_this28=_super28.call(this,TEMPLATE_NS_ID,"dateTimeEdit",true);_this28.hScrollPolicy=getStringOption(attributes.hScrollPolicy,["auto","off","on"]);_this28.id=attributes.id||"";_this28.picker=getStringOption(attributes.picker,["host","none"]);_this28.use=attributes.use||"";_this28.usehref=attributes.usehref||"";_this28.border=null;_this28.comb=null;_this28.extras=null;_this28.margin=null;return _this28;}template_createClass(DateTimeEdit,[{key:$toHTML,value:function value(availableSpace){var _field$$data3;var style=toStyle(this,"border","font","margin");var field=this[$getParent]()[$getParent]();var html={name:"input",attributes:{type:"text",fieldId:field[$uid],dataId:((_field$$data3=field[$data])===null||_field$$data3===void 0?void 0:_field$$data3[$uid])||field[$uid],class:["xfaTextfield"],style:style,"aria-label":ariaLabel(field),"aria-required":false}};if(isRequired(field)){html.attributes["aria-required"]=true;html.attributes.required=true;}return HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[html]});}}]);return DateTimeEdit;}(XFAObject);var Decimal=/*#__PURE__*/function(_ContentObject3){template_inherits(Decimal,_ContentObject3);var _super29=template_createSuper(Decimal);function Decimal(attributes){var _this29;template_classCallCheck(this,Decimal);_this29=_super29.call(this,TEMPLATE_NS_ID,"decimal");_this29.fracDigits=getInteger({data:attributes.fracDigits,defaultValue:2,validate:function validate(x){return true;}});_this29.id=attributes.id||"";_this29.leadDigits=getInteger({data:attributes.leadDigits,defaultValue:-1,validate:function validate(x){return true;}});_this29.name=attributes.name||"";_this29.use=attributes.use||"";_this29.usehref=attributes.usehref||"";return _this29;}template_createClass(Decimal,[{key:$finalize,value:function value(){var number=parseFloat(this[$content].trim());this[$content]=isNaN(number)?null:number;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]!==null?this[$content].toString():"");}}]);return Decimal;}(ContentObject);var DefaultUi=/*#__PURE__*/function(_XFAObject24){template_inherits(DefaultUi,_XFAObject24);var _super30=template_createSuper(DefaultUi);function DefaultUi(attributes){var _this30;template_classCallCheck(this,DefaultUi);_this30=_super30.call(this,TEMPLATE_NS_ID,"defaultUi",true);_this30.id=attributes.id||"";_this30.use=attributes.use||"";_this30.usehref=attributes.usehref||"";_this30.extras=null;return _this30;}return template_createClass(DefaultUi);}(XFAObject);var Desc=/*#__PURE__*/function(_XFAObject25){template_inherits(Desc,_XFAObject25);var _super31=template_createSuper(Desc);function Desc(attributes){var _this31;template_classCallCheck(this,Desc);_this31=_super31.call(this,TEMPLATE_NS_ID,"desc",true);_this31.id=attributes.id||"";_this31.use=attributes.use||"";_this31.usehref=attributes.usehref||"";_this31.boolean=new XFAObjectArray();_this31.date=new XFAObjectArray();_this31.dateTime=new XFAObjectArray();_this31.decimal=new XFAObjectArray();_this31.exData=new XFAObjectArray();_this31.float=new XFAObjectArray();_this31.image=new XFAObjectArray();_this31.integer=new XFAObjectArray();_this31.text=new XFAObjectArray();_this31.time=new XFAObjectArray();return _this31;}return template_createClass(Desc);}(XFAObject);var DigestMethod=/*#__PURE__*/function(_OptionObject){template_inherits(DigestMethod,_OptionObject);var _super32=template_createSuper(DigestMethod);function DigestMethod(attributes){var _this32;template_classCallCheck(this,DigestMethod);_this32=_super32.call(this,TEMPLATE_NS_ID,"digestMethod",["","SHA1","SHA256","SHA512","RIPEMD160"]);_this32.id=attributes.id||"";_this32.use=attributes.use||"";_this32.usehref=attributes.usehref||"";return _this32;}return template_createClass(DigestMethod);}(OptionObject);var DigestMethods=/*#__PURE__*/function(_XFAObject26){template_inherits(DigestMethods,_XFAObject26);var _super33=template_createSuper(DigestMethods);function DigestMethods(attributes){var _this33;template_classCallCheck(this,DigestMethods);_this33=_super33.call(this,TEMPLATE_NS_ID,"digestMethods",true);_this33.id=attributes.id||"";_this33.type=getStringOption(attributes.type,["optional","required"]);_this33.use=attributes.use||"";_this33.usehref=attributes.usehref||"";_this33.digestMethod=new XFAObjectArray();return _this33;}return template_createClass(DigestMethods);}(XFAObject);var Draw=/*#__PURE__*/function(_XFAObject27){template_inherits(Draw,_XFAObject27);var _super34=template_createSuper(Draw);function Draw(attributes){var _this34;template_classCallCheck(this,Draw);_this34=_super34.call(this,TEMPLATE_NS_ID,"draw",true);_this34.anchorType=getStringOption(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);_this34.colSpan=getInteger({data:attributes.colSpan,defaultValue:1,validate:function validate(n){return n>=1||n===-1;}});_this34.h=attributes.h?getMeasurement(attributes.h):"";_this34.hAlign=getStringOption(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]);_this34.id=attributes.id||"";_this34.locale=attributes.locale||"";_this34.maxH=getMeasurement(attributes.maxH,"0pt");_this34.maxW=getMeasurement(attributes.maxW,"0pt");_this34.minH=getMeasurement(attributes.minH,"0pt");_this34.minW=getMeasurement(attributes.minW,"0pt");_this34.name=attributes.name||"";_this34.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this34.relevant=getRelevant(attributes.relevant);_this34.rotate=getInteger({data:attributes.rotate,defaultValue:0,validate:function validate(x){return x%90===0;}});_this34.use=attributes.use||"";_this34.usehref=attributes.usehref||"";_this34.w=attributes.w?getMeasurement(attributes.w):"";_this34.x=getMeasurement(attributes.x,"0pt");_this34.y=getMeasurement(attributes.y,"0pt");_this34.assist=null;_this34.border=null;_this34.caption=null;_this34.desc=null;_this34.extras=null;_this34.font=null;_this34.keep=null;_this34.margin=null;_this34.para=null;_this34.traversal=null;_this34.ui=null;_this34.value=null;_this34.setProperty=new XFAObjectArray();return _this34;}template_createClass(Draw,[{key:$setValue,value:function(_value3){function value(_x2){return _value3.apply(this,arguments);}value.toString=function(){return _value3.toString();};return value;}(function(value){_setValue(this,value);})},{key:$toHTML,value:function value(availableSpace){setTabIndex(this);if(this.presence==="hidden"||this.presence==="inactive"){return HTMLResult.EMPTY;}fixDimensions(this);this[$pushPara]();var savedW=this.w;var savedH=this.h;var _layoutNode=layoutNode(this,availableSpace),w=_layoutNode.w,h=_layoutNode.h,isBroken=_layoutNode.isBroken;if(w&&this.w===""){if(isBroken&&this[$getSubformParent]()[$isThereMoreWidth]()){this[$popPara]();return HTMLResult.FAILURE;}this.w=w;}if(h&&this.h===""){this.h=h;}setFirstUnsplittable(this);if(!checkDimensions(this,availableSpace)){this.w=savedW;this.h=savedH;this[$popPara]();return HTMLResult.FAILURE;}unsetFirstUnsplittable(this);var style=toStyle(this,"font","hAlign","dimensions","position","presence","rotate","anchorType","border","margin");setMinMaxDimensions(this,style);if(style.margin){style.padding=style.margin;delete style.margin;}var classNames=["xfaDraw"];if(this.font){classNames.push("xfaFont");}if(isPrintOnly(this)){classNames.push("xfaPrintOnly");}var attributes={style:style,id:this[$uid],class:classNames};if(this.name){attributes.xfaName=this.name;}var html={name:"div",attributes:attributes,children:[]};applyAssist(this,attributes);var bbox=computeBbox(this,html,availableSpace);var value=this.value?this.value[$toHTML](availableSpace).html:null;if(value===null){this.w=savedW;this.h=savedH;this[$popPara]();return HTMLResult.success(createWrapper(this,html),bbox);}html.children.push(value);setPara(this,style,value);this.w=savedW;this.h=savedH;this[$popPara]();return HTMLResult.success(createWrapper(this,html),bbox);}}]);return Draw;}(XFAObject);var Edge=/*#__PURE__*/function(_XFAObject28){template_inherits(Edge,_XFAObject28);var _super35=template_createSuper(Edge);function Edge(attributes){var _this35;template_classCallCheck(this,Edge);_this35=_super35.call(this,TEMPLATE_NS_ID,"edge",true);_this35.cap=getStringOption(attributes.cap,["square","butt","round"]);_this35.id=attributes.id||"";_this35.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this35.stroke=getStringOption(attributes.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]);_this35.thickness=getMeasurement(attributes.thickness,"0.5pt");_this35.use=attributes.use||"";_this35.usehref=attributes.usehref||"";_this35.color=null;_this35.extras=null;return _this35;}template_createClass(Edge,[{key:$toStyle,value:function value(){var style=toStyle(this,"visibility");Object.assign(style,{linecap:this.cap,width:measureToString(this.thickness),color:this.color?this.color[$toStyle]():"#000000",style:""});if(this.presence!=="visible"){style.style="none";}else{switch(this.stroke){case"solid":style.style="solid";break;case"dashDot":style.style="dashed";break;case"dashDotDot":style.style="dashed";break;case"dashed":style.style="dashed";break;case"dotted":style.style="dotted";break;case"embossed":style.style="ridge";break;case"etched":style.style="groove";break;case"lowered":style.style="inset";break;case"raised":style.style="outset";break;}}return style;}}]);return Edge;}(XFAObject);var Encoding=/*#__PURE__*/function(_OptionObject2){template_inherits(Encoding,_OptionObject2);var _super36=template_createSuper(Encoding);function Encoding(attributes){var _this36;template_classCallCheck(this,Encoding);_this36=_super36.call(this,TEMPLATE_NS_ID,"encoding",["adbe.x509.rsa_sha1","adbe.pkcs7.detached","adbe.pkcs7.sha1"]);_this36.id=attributes.id||"";_this36.use=attributes.use||"";_this36.usehref=attributes.usehref||"";return _this36;}return template_createClass(Encoding);}(OptionObject);var Encodings=/*#__PURE__*/function(_XFAObject29){template_inherits(Encodings,_XFAObject29);var _super37=template_createSuper(Encodings);function Encodings(attributes){var _this37;template_classCallCheck(this,Encodings);_this37=_super37.call(this,TEMPLATE_NS_ID,"encodings",true);_this37.id=attributes.id||"";_this37.type=getStringOption(attributes.type,["optional","required"]);_this37.use=attributes.use||"";_this37.usehref=attributes.usehref||"";_this37.encoding=new XFAObjectArray();return _this37;}return template_createClass(Encodings);}(XFAObject);var Encrypt=/*#__PURE__*/function(_XFAObject30){template_inherits(Encrypt,_XFAObject30);var _super38=template_createSuper(Encrypt);function Encrypt(attributes){var _this38;template_classCallCheck(this,Encrypt);_this38=_super38.call(this,TEMPLATE_NS_ID,"encrypt",true);_this38.id=attributes.id||"";_this38.use=attributes.use||"";_this38.usehref=attributes.usehref||"";_this38.certificate=null;return _this38;}return template_createClass(Encrypt);}(XFAObject);var EncryptData=/*#__PURE__*/function(_XFAObject31){template_inherits(EncryptData,_XFAObject31);var _super39=template_createSuper(EncryptData);function EncryptData(attributes){var _this39;template_classCallCheck(this,EncryptData);_this39=_super39.call(this,TEMPLATE_NS_ID,"encryptData",true);_this39.id=attributes.id||"";_this39.operation=getStringOption(attributes.operation,["encrypt","decrypt"]);_this39.target=attributes.target||"";_this39.use=attributes.use||"";_this39.usehref=attributes.usehref||"";_this39.filter=null;_this39.manifest=null;return _this39;}return template_createClass(EncryptData);}(XFAObject);var Encryption=/*#__PURE__*/function(_XFAObject32){template_inherits(Encryption,_XFAObject32);var _super40=template_createSuper(Encryption);function Encryption(attributes){var _this40;template_classCallCheck(this,Encryption);_this40=_super40.call(this,TEMPLATE_NS_ID,"encryption",true);_this40.id=attributes.id||"";_this40.type=getStringOption(attributes.type,["optional","required"]);_this40.use=attributes.use||"";_this40.usehref=attributes.usehref||"";_this40.certificate=new XFAObjectArray();return _this40;}return template_createClass(Encryption);}(XFAObject);var EncryptionMethod=/*#__PURE__*/function(_OptionObject3){template_inherits(EncryptionMethod,_OptionObject3);var _super41=template_createSuper(EncryptionMethod);function EncryptionMethod(attributes){var _this41;template_classCallCheck(this,EncryptionMethod);_this41=_super41.call(this,TEMPLATE_NS_ID,"encryptionMethod",["","AES256-CBC","TRIPLEDES-CBC","AES128-CBC","AES192-CBC"]);_this41.id=attributes.id||"";_this41.use=attributes.use||"";_this41.usehref=attributes.usehref||"";return _this41;}return template_createClass(EncryptionMethod);}(OptionObject);var EncryptionMethods=/*#__PURE__*/function(_XFAObject33){template_inherits(EncryptionMethods,_XFAObject33);var _super42=template_createSuper(EncryptionMethods);function EncryptionMethods(attributes){var _this42;template_classCallCheck(this,EncryptionMethods);_this42=_super42.call(this,TEMPLATE_NS_ID,"encryptionMethods",true);_this42.id=attributes.id||"";_this42.type=getStringOption(attributes.type,["optional","required"]);_this42.use=attributes.use||"";_this42.usehref=attributes.usehref||"";_this42.encryptionMethod=new XFAObjectArray();return _this42;}return template_createClass(EncryptionMethods);}(XFAObject);var Event=/*#__PURE__*/function(_XFAObject34){template_inherits(Event,_XFAObject34);var _super43=template_createSuper(Event);function Event(attributes){var _this43;template_classCallCheck(this,Event);_this43=_super43.call(this,TEMPLATE_NS_ID,"event",true);_this43.activity=getStringOption(attributes.activity,["click","change","docClose","docReady","enter","exit","full","indexChange","initialize","mouseDown","mouseEnter","mouseExit","mouseUp","postExecute","postOpen","postPrint","postSave","postSign","postSubmit","preExecute","preOpen","prePrint","preSave","preSign","preSubmit","ready","validationState"]);_this43.id=attributes.id||"";_this43.listen=getStringOption(attributes.listen,["refOnly","refAndDescendents"]);_this43.name=attributes.name||"";_this43.ref=attributes.ref||"";_this43.use=attributes.use||"";_this43.usehref=attributes.usehref||"";_this43.extras=null;_this43.encryptData=null;_this43.execute=null;_this43.script=null;_this43.signData=null;_this43.submit=null;return _this43;}return template_createClass(Event);}(XFAObject);var ExData=/*#__PURE__*/function(_ContentObject4){template_inherits(ExData,_ContentObject4);var _super44=template_createSuper(ExData);function ExData(attributes){var _this44;template_classCallCheck(this,ExData);_this44=_super44.call(this,TEMPLATE_NS_ID,"exData");_this44.contentType=attributes.contentType||"";_this44.href=attributes.href||"";_this44.id=attributes.id||"";_this44.maxLength=getInteger({data:attributes.maxLength,defaultValue:-1,validate:function validate(x){return x>=-1;}});_this44.name=attributes.name||"";_this44.rid=attributes.rid||"";_this44.transferEncoding=getStringOption(attributes.transferEncoding,["none","base64","package"]);_this44.use=attributes.use||"";_this44.usehref=attributes.usehref||"";return _this44;}template_createClass(ExData,[{key:$isCDATAXml,value:function value(){return this.contentType==="text/html";}},{key:$onChild,value:function value(child){if(this.contentType==="text/html"&&child[$namespaceId]===NamespaceIds.xhtml.id){this[$content]=child;return true;}if(this.contentType==="text/xml"){this[$content]=child;return true;}return false;}},{key:$toHTML,value:function value(availableSpace){if(this.contentType!=="text/html"||!this[$content]){return HTMLResult.EMPTY;}return this[$content][$toHTML](availableSpace);}}]);return ExData;}(ContentObject);var ExObject=/*#__PURE__*/function(_XFAObject35){template_inherits(ExObject,_XFAObject35);var _super45=template_createSuper(ExObject);function ExObject(attributes){var _this45;template_classCallCheck(this,ExObject);_this45=_super45.call(this,TEMPLATE_NS_ID,"exObject",true);_this45.archive=attributes.archive||"";_this45.classId=attributes.classId||"";_this45.codeBase=attributes.codeBase||"";_this45.codeType=attributes.codeType||"";_this45.id=attributes.id||"";_this45.name=attributes.name||"";_this45.use=attributes.use||"";_this45.usehref=attributes.usehref||"";_this45.extras=null;_this45.boolean=new XFAObjectArray();_this45.date=new XFAObjectArray();_this45.dateTime=new XFAObjectArray();_this45.decimal=new XFAObjectArray();_this45.exData=new XFAObjectArray();_this45.exObject=new XFAObjectArray();_this45.float=new XFAObjectArray();_this45.image=new XFAObjectArray();_this45.integer=new XFAObjectArray();_this45.text=new XFAObjectArray();_this45.time=new XFAObjectArray();return _this45;}return template_createClass(ExObject);}(XFAObject);var ExclGroup=/*#__PURE__*/function(_XFAObject36){template_inherits(ExclGroup,_XFAObject36);var _super46=template_createSuper(ExclGroup);function ExclGroup(attributes){var _this46;template_classCallCheck(this,ExclGroup);_this46=_super46.call(this,TEMPLATE_NS_ID,"exclGroup",true);_this46.access=getStringOption(attributes.access,["open","nonInteractive","protected","readOnly"]);_this46.accessKey=attributes.accessKey||"";_this46.anchorType=getStringOption(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);_this46.colSpan=getInteger({data:attributes.colSpan,defaultValue:1,validate:function validate(n){return n>=1||n===-1;}});_this46.h=attributes.h?getMeasurement(attributes.h):"";_this46.hAlign=getStringOption(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]);_this46.id=attributes.id||"";_this46.layout=getStringOption(attributes.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]);_this46.maxH=getMeasurement(attributes.maxH,"0pt");_this46.maxW=getMeasurement(attributes.maxW,"0pt");_this46.minH=getMeasurement(attributes.minH,"0pt");_this46.minW=getMeasurement(attributes.minW,"0pt");_this46.name=attributes.name||"";_this46.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this46.relevant=getRelevant(attributes.relevant);_this46.use=attributes.use||"";_this46.usehref=attributes.usehref||"";_this46.w=attributes.w?getMeasurement(attributes.w):"";_this46.x=getMeasurement(attributes.x,"0pt");_this46.y=getMeasurement(attributes.y,"0pt");_this46.assist=null;_this46.bind=null;_this46.border=null;_this46.calculate=null;_this46.caption=null;_this46.desc=null;_this46.extras=null;_this46.margin=null;_this46.para=null;_this46.traversal=null;_this46.validate=null;_this46.connect=new XFAObjectArray();_this46.event=new XFAObjectArray();_this46.field=new XFAObjectArray();_this46.setProperty=new XFAObjectArray();return _this46;}template_createClass(ExclGroup,[{key:$isBindable,value:function value(){return true;}},{key:$hasSettableValue,value:function value(){return true;}},{key:$setValue,value:function(_value4){function value(_x3){return _value4.apply(this,arguments);}value.toString=function(){return _value4.toString();};return value;}(function(value){var _iterator4=template_createForOfIteratorHelper(this.field.children),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var field=_step4.value;if(!field.value){var nodeValue=new Value({});field[$appendChild](nodeValue);field.value=nodeValue;}field.value[$setValue](value);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}})},{key:$isThereMoreWidth,value:function value(){return this.layout.endsWith("-tb")&&this[$extra].attempt===0&&this[$extra].numberInLine>0||this[$getParent]()[$isThereMoreWidth]();}},{key:$isSplittable,value:function value(){var _parent$layout;var parent=this[$getSubformParent]();if(!parent[$isSplittable]()){return false;}if(this[$extra]._isSplittable!==undefined){return this[$extra]._isSplittable;}if(this.layout==="position"||this.layout.includes("row")){this[$extra]._isSplittable=false;return false;}if((_parent$layout=parent.layout)!==null&&_parent$layout!==void 0&&_parent$layout.endsWith("-tb")&&parent[$extra].numberInLine!==0){return false;}this[$extra]._isSplittable=true;return true;}},{key:$flushHTML,value:function value(){return flushHTML(this);}},{key:$addHTML,value:function value(html,bbox){addHTML(this,html,bbox);}},{key:$getAvailableSpace,value:function value(){return getAvailableSpace(this);}},{key:$toHTML,value:function value(availableSpace){setTabIndex(this);if(this.presence==="hidden"||this.presence==="inactive"||this.h===0||this.w===0){return HTMLResult.EMPTY;}fixDimensions(this);var children=[];var attributes={id:this[$uid],class:[]};setAccess(this,attributes.class);if(!this[$extra]){this[$extra]=Object.create(null);}Object.assign(this[$extra],{children:children,attributes:attributes,attempt:0,line:null,numberInLine:0,availableSpace:{width:Math.min(this.w||Infinity,availableSpace.width),height:Math.min(this.h||Infinity,availableSpace.height)},width:0,height:0,prevHeight:0,currentWidth:0});var isSplittable=this[$isSplittable]();if(!isSplittable){setFirstUnsplittable(this);}if(!checkDimensions(this,availableSpace)){return HTMLResult.FAILURE;}var filter=new Set(["field"]);if(this.layout.includes("row")){var columnWidths=this[$getSubformParent]().columnWidths;if(Array.isArray(columnWidths)&&columnWidths.length>0){this[$extra].columnWidths=columnWidths;this[$extra].currentColumn=0;}}var style=toStyle(this,"anchorType","dimensions","position","presence","border","margin","hAlign");var classNames=["xfaExclgroup"];var cl=layoutClass(this);if(cl){classNames.push(cl);}if(isPrintOnly(this)){classNames.push("xfaPrintOnly");}attributes.style=style;attributes.class=classNames;if(this.name){attributes.xfaName=this.name;}this[$pushPara]();var isLrTb=this.layout==="lr-tb"||this.layout==="rl-tb";var maxRun=isLrTb?MAX_ATTEMPTS_FOR_LRTB_LAYOUT:1;for(;this[$extra].attempt<maxRun;this[$extra].attempt++){if(isLrTb&&this[$extra].attempt===MAX_ATTEMPTS_FOR_LRTB_LAYOUT-1){this[$extra].numberInLine=0;}var result=this[$childrenToHTML]({filter:filter,include:true});if(result.success){break;}if(result.isBreak()){this[$popPara]();return result;}if(isLrTb&&this[$extra].attempt===0&&this[$extra].numberInLine===0&&!this[$getTemplateRoot]()[$extra].noLayoutFailure){this[$extra].attempt=maxRun;break;}}this[$popPara]();if(!isSplittable){unsetFirstUnsplittable(this);}if(this[$extra].attempt===maxRun){if(!isSplittable){delete this[$extra];}return HTMLResult.FAILURE;}var marginH=0;var marginV=0;if(this.margin){marginH=this.margin.leftInset+this.margin.rightInset;marginV=this.margin.topInset+this.margin.bottomInset;}var width=Math.max(this[$extra].width+marginH,this.w||0);var height=Math.max(this[$extra].height+marginV,this.h||0);var bbox=[this.x,this.y,width,height];if(this.w===""){style.width=measureToString(width);}if(this.h===""){style.height=measureToString(height);}var html={name:"div",attributes:attributes,children:children};applyAssist(this,attributes);delete this[$extra];return HTMLResult.success(createWrapper(this,html),bbox);}}]);return ExclGroup;}(XFAObject);var Execute=/*#__PURE__*/function(_XFAObject37){template_inherits(Execute,_XFAObject37);var _super47=template_createSuper(Execute);function Execute(attributes){var _this47;template_classCallCheck(this,Execute);_this47=_super47.call(this,TEMPLATE_NS_ID,"execute");_this47.connection=attributes.connection||"";_this47.executeType=getStringOption(attributes.executeType,["import","remerge"]);_this47.id=attributes.id||"";_this47.runAt=getStringOption(attributes.runAt,["client","both","server"]);_this47.use=attributes.use||"";_this47.usehref=attributes.usehref||"";return _this47;}return template_createClass(Execute);}(XFAObject);var Extras=/*#__PURE__*/function(_XFAObject38){template_inherits(Extras,_XFAObject38);var _super48=template_createSuper(Extras);function Extras(attributes){var _this48;template_classCallCheck(this,Extras);_this48=_super48.call(this,TEMPLATE_NS_ID,"extras",true);_this48.id=attributes.id||"";_this48.name=attributes.name||"";_this48.use=attributes.use||"";_this48.usehref=attributes.usehref||"";_this48.boolean=new XFAObjectArray();_this48.date=new XFAObjectArray();_this48.dateTime=new XFAObjectArray();_this48.decimal=new XFAObjectArray();_this48.exData=new XFAObjectArray();_this48.extras=new XFAObjectArray();_this48.float=new XFAObjectArray();_this48.image=new XFAObjectArray();_this48.integer=new XFAObjectArray();_this48.text=new XFAObjectArray();_this48.time=new XFAObjectArray();return _this48;}return template_createClass(Extras);}(XFAObject);var Field=/*#__PURE__*/function(_XFAObject39){template_inherits(Field,_XFAObject39);var _super49=template_createSuper(Field);function Field(attributes){var _this49;template_classCallCheck(this,Field);_this49=_super49.call(this,TEMPLATE_NS_ID,"field",true);_this49.access=getStringOption(attributes.access,["open","nonInteractive","protected","readOnly"]);_this49.accessKey=attributes.accessKey||"";_this49.anchorType=getStringOption(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);_this49.colSpan=getInteger({data:attributes.colSpan,defaultValue:1,validate:function validate(n){return n>=1||n===-1;}});_this49.h=attributes.h?getMeasurement(attributes.h):"";_this49.hAlign=getStringOption(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]);_this49.id=attributes.id||"";_this49.locale=attributes.locale||"";_this49.maxH=getMeasurement(attributes.maxH,"0pt");_this49.maxW=getMeasurement(attributes.maxW,"0pt");_this49.minH=getMeasurement(attributes.minH,"0pt");_this49.minW=getMeasurement(attributes.minW,"0pt");_this49.name=attributes.name||"";_this49.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this49.relevant=getRelevant(attributes.relevant);_this49.rotate=getInteger({data:attributes.rotate,defaultValue:0,validate:function validate(x){return x%90===0;}});_this49.use=attributes.use||"";_this49.usehref=attributes.usehref||"";_this49.w=attributes.w?getMeasurement(attributes.w):"";_this49.x=getMeasurement(attributes.x,"0pt");_this49.y=getMeasurement(attributes.y,"0pt");_this49.assist=null;_this49.bind=null;_this49.border=null;_this49.calculate=null;_this49.caption=null;_this49.desc=null;_this49.extras=null;_this49.font=null;_this49.format=null;_this49.items=new XFAObjectArray(2);_this49.keep=null;_this49.margin=null;_this49.para=null;_this49.traversal=null;_this49.ui=null;_this49.validate=null;_this49.value=null;_this49.bindItems=new XFAObjectArray();_this49.connect=new XFAObjectArray();_this49.event=new XFAObjectArray();_this49.setProperty=new XFAObjectArray();return _this49;}template_createClass(Field,[{key:$isBindable,value:function value(){return true;}},{key:$setValue,value:function(_value5){function value(_x4){return _value5.apply(this,arguments);}value.toString=function(){return _value5.toString();};return value;}(function(value){_setValue(this,value);})},{key:$toHTML,value:function value(availableSpace){var _ui$children2;setTabIndex(this);if(!this.ui){this.ui=new Ui({});this.ui[$globalData]=this[$globalData];this[$appendChild](this.ui);var node;switch(this.items.children.length){case 0:node=new TextEdit({});this.ui.textEdit=node;break;case 1:node=new CheckButton({});this.ui.checkButton=node;break;case 2:node=new ChoiceList({});this.ui.choiceList=node;break;}this.ui[$appendChild](node);}if(!this.ui||this.presence==="hidden"||this.presence==="inactive"||this.h===0||this.w===0){return HTMLResult.EMPTY;}if(this.caption){delete this.caption[$extra];}this[$pushPara]();var caption=this.caption?this.caption[$toHTML](availableSpace).html:null;var savedW=this.w;var savedH=this.h;var marginH=0;var marginV=0;if(this.margin){marginH=this.margin.leftInset+this.margin.rightInset;marginV=this.margin.topInset+this.margin.bottomInset;}var borderDims=null;if(this.w===""||this.h===""){var width=null;var height=null;var uiW=0;var uiH=0;if(this.ui.checkButton){uiW=uiH=this.ui.checkButton.size;}else{var _layoutNode2=layoutNode(this,availableSpace),w=_layoutNode2.w,h=_layoutNode2.h;if(w!==null){uiW=w;uiH=h;}else{uiH=fonts_getMetrics(this.font,true).lineNoGap;}}borderDims=getBorderDims(this.ui[$getExtra]());uiW+=borderDims.w;uiH+=borderDims.h;if(this.caption){var _this$caption$$getExt=this.caption[$getExtra](availableSpace),_w=_this$caption$$getExt.w,_h=_this$caption$$getExt.h,isBroken=_this$caption$$getExt.isBroken;if(isBroken&&this[$getSubformParent]()[$isThereMoreWidth]()){this[$popPara]();return HTMLResult.FAILURE;}width=_w;height=_h;switch(this.caption.placement){case"left":case"right":case"inline":width+=uiW;break;case"top":case"bottom":height+=uiH;break;}}else{width=uiW;height=uiH;}if(width&&this.w===""){width+=marginH;this.w=Math.min(this.maxW<=0?Infinity:this.maxW,this.minW+1<width?width:this.minW);}if(height&&this.h===""){height+=marginV;this.h=Math.min(this.maxH<=0?Infinity:this.maxH,this.minH+1<height?height:this.minH);}}this[$popPara]();fixDimensions(this);setFirstUnsplittable(this);if(!checkDimensions(this,availableSpace)){this.w=savedW;this.h=savedH;this[$popPara]();return HTMLResult.FAILURE;}unsetFirstUnsplittable(this);var style=toStyle(this,"font","dimensions","position","rotate","anchorType","presence","margin","hAlign");setMinMaxDimensions(this,style);var classNames=["xfaField"];if(this.font){classNames.push("xfaFont");}if(isPrintOnly(this)){classNames.push("xfaPrintOnly");}var attributes={style:style,id:this[$uid],class:classNames};if(style.margin){style.padding=style.margin;delete style.margin;}setAccess(this,classNames);if(this.name){attributes.xfaName=this.name;}var children=[];var html={name:"div",attributes:attributes,children:children};applyAssist(this,attributes);var borderStyle=this.border?this.border[$toStyle]():null;var bbox=computeBbox(this,html,availableSpace);var ui=this.ui[$toHTML]().html;if(!ui){Object.assign(style,borderStyle);return HTMLResult.success(createWrapper(this,html),bbox);}if(this[$tabIndex]){var _ui$children;if((_ui$children=ui.children)!==null&&_ui$children!==void 0&&_ui$children[0]){ui.children[0].attributes.tabindex=this[$tabIndex];}else{ui.attributes.tabindex=this[$tabIndex];}}if(!ui.attributes.style){ui.attributes.style=Object.create(null);}var aElement=null;if(this.ui.button){if(ui.children.length===1){var _ui$children$splice=ui.children.splice(0,1);var _ui$children$splice2=template_slicedToArray(_ui$children$splice,1);aElement=_ui$children$splice2[0];}Object.assign(ui.attributes.style,borderStyle);}else{Object.assign(style,borderStyle);}children.push(ui);if(this.value){if(this.ui.imageEdit){ui.children.push(this.value[$toHTML]().html);}else if(!this.ui.button){var _this$value$text;var _value6="";if(this.value.exData){_value6=this.value.exData[$text]();}else if(this.value.text){_value6=this.value.text[$getExtra]();}else{var htmlValue=this.value[$toHTML]().html;if(htmlValue!==null){_value6=htmlValue.children[0].value;}}if(this.ui.textEdit&&(_this$value$text=this.value.text)!==null&&_this$value$text!==void 0&&_this$value$text.maxChars){ui.children[0].attributes.maxLength=this.value.text.maxChars;}if(_value6){if(this.ui.numericEdit){_value6=parseFloat(_value6);_value6=isNaN(_value6)?"":_value6.toString();}if(ui.children[0].name==="textarea"){ui.children[0].attributes.textContent=_value6;}else{ui.children[0].attributes.value=_value6;}}}}if(!this.ui.imageEdit&&(_ui$children2=ui.children)!==null&&_ui$children2!==void 0&&_ui$children2[0]&&this.h){borderDims=borderDims||getBorderDims(this.ui[$getExtra]());var captionHeight=0;if(this.caption&&["top","bottom"].includes(this.caption.placement)){captionHeight=this.caption.reserve;if(captionHeight<=0){captionHeight=this.caption[$getExtra](availableSpace).h;}var inputHeight=this.h-captionHeight-marginV-borderDims.h;ui.children[0].attributes.style.height=measureToString(inputHeight);}else{ui.children[0].attributes.style.height="100%";}}if(aElement){ui.children.push(aElement);}if(!caption){if(ui.attributes.class){ui.attributes.class.push("xfaLeft");}this.w=savedW;this.h=savedH;return HTMLResult.success(createWrapper(this,html),bbox);}if(this.ui.button){if(style.padding){delete style.padding;}if(caption.name==="div"){caption.name="span";}ui.children.push(caption);return HTMLResult.success(html,bbox);}else if(this.ui.checkButton){caption.attributes.class[0]="xfaCaptionForCheckButton";}if(!ui.attributes.class){ui.attributes.class=[];}ui.children.splice(0,0,caption);switch(this.caption.placement){case"left":ui.attributes.class.push("xfaLeft");break;case"right":ui.attributes.class.push("xfaRight");break;case"top":ui.attributes.class.push("xfaTop");break;case"bottom":ui.attributes.class.push("xfaBottom");break;case"inline":ui.attributes.class.push("xfaLeft");break;}this.w=savedW;this.h=savedH;return HTMLResult.success(createWrapper(this,html),bbox);}}]);return Field;}(XFAObject);var Fill=/*#__PURE__*/function(_XFAObject40){template_inherits(Fill,_XFAObject40);var _super50=template_createSuper(Fill);function Fill(attributes){var _this50;template_classCallCheck(this,Fill);_this50=_super50.call(this,TEMPLATE_NS_ID,"fill",true);_this50.id=attributes.id||"";_this50.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this50.use=attributes.use||"";_this50.usehref=attributes.usehref||"";_this50.color=null;_this50.extras=null;_this50.linear=null;_this50.pattern=null;_this50.radial=null;_this50.solid=null;_this50.stipple=null;return _this50;}template_createClass(Fill,[{key:$toStyle,value:function value(){var _this$color;var parent=this[$getParent]();var grandpa=parent[$getParent]();var ggrandpa=grandpa[$getParent]();var style=Object.create(null);var propName="color";var altPropName=propName;if(parent instanceof Border){propName="background-color";altPropName="background";if(ggrandpa instanceof Ui){style.backgroundColor="white";}}if(parent instanceof Rectangle||parent instanceof Arc){propName=altPropName="fill";style.fill="white";}var _iterator5=template_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var name=_step5.value;if(name==="extras"||name==="color"){continue;}var obj=this[name];if(!(obj instanceof XFAObject)){continue;}var _color=obj[$toStyle](this.color);if(_color){style[_color.startsWith("#")?propName:altPropName]=_color;}return style;}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}if((_this$color=this.color)!==null&&_this$color!==void 0&&_this$color.value){var color=this.color[$toStyle]();style[color.startsWith("#")?propName:altPropName]=color;}return style;}}]);return Fill;}(XFAObject);var Filter=/*#__PURE__*/function(_XFAObject41){template_inherits(Filter,_XFAObject41);var _super51=template_createSuper(Filter);function Filter(attributes){var _this51;template_classCallCheck(this,Filter);_this51=_super51.call(this,TEMPLATE_NS_ID,"filter",true);_this51.addRevocationInfo=getStringOption(attributes.addRevocationInfo,["","required","optional","none"]);_this51.id=attributes.id||"";_this51.name=attributes.name||"";_this51.use=attributes.use||"";_this51.usehref=attributes.usehref||"";_this51.version=getInteger({data:_this51.version,defaultValue:5,validate:function validate(x){return x>=1&&x<=5;}});_this51.appearanceFilter=null;_this51.certificates=null;_this51.digestMethods=null;_this51.encodings=null;_this51.encryptionMethods=null;_this51.handler=null;_this51.lockDocument=null;_this51.mdp=null;_this51.reasons=null;_this51.timeStamp=null;return _this51;}return template_createClass(Filter);}(XFAObject);var Float=/*#__PURE__*/function(_ContentObject5){template_inherits(Float,_ContentObject5);var _super52=template_createSuper(Float);function Float(attributes){var _this52;template_classCallCheck(this,Float);_this52=_super52.call(this,TEMPLATE_NS_ID,"float");_this52.id=attributes.id||"";_this52.name=attributes.name||"";_this52.use=attributes.use||"";_this52.usehref=attributes.usehref||"";return _this52;}template_createClass(Float,[{key:$finalize,value:function value(){var number=parseFloat(this[$content].trim());this[$content]=isNaN(number)?null:number;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]!==null?this[$content].toString():"");}}]);return Float;}(ContentObject);var template_Font=/*#__PURE__*/function(_XFAObject42){template_inherits(Font,_XFAObject42);var _super53=template_createSuper(Font);function Font(attributes){var _this53;template_classCallCheck(this,Font);_this53=_super53.call(this,TEMPLATE_NS_ID,"font",true);_this53.baselineShift=getMeasurement(attributes.baselineShift);_this53.fontHorizontalScale=getFloat({data:attributes.fontHorizontalScale,defaultValue:100,validate:function validate(x){return x>=0;}});_this53.fontVerticalScale=getFloat({data:attributes.fontVerticalScale,defaultValue:100,validate:function validate(x){return x>=0;}});_this53.id=attributes.id||"";_this53.kerningMode=getStringOption(attributes.kerningMode,["none","pair"]);_this53.letterSpacing=getMeasurement(attributes.letterSpacing,"0");_this53.lineThrough=getInteger({data:attributes.lineThrough,defaultValue:0,validate:function validate(x){return x===1||x===2;}});_this53.lineThroughPeriod=getStringOption(attributes.lineThroughPeriod,["all","word"]);_this53.overline=getInteger({data:attributes.overline,defaultValue:0,validate:function validate(x){return x===1||x===2;}});_this53.overlinePeriod=getStringOption(attributes.overlinePeriod,["all","word"]);_this53.posture=getStringOption(attributes.posture,["normal","italic"]);_this53.size=getMeasurement(attributes.size,"10pt");_this53.typeface=attributes.typeface||"Courier";_this53.underline=getInteger({data:attributes.underline,defaultValue:0,validate:function validate(x){return x===1||x===2;}});_this53.underlinePeriod=getStringOption(attributes.underlinePeriod,["all","word"]);_this53.use=attributes.use||"";_this53.usehref=attributes.usehref||"";_this53.weight=getStringOption(attributes.weight,["normal","bold"]);_this53.extras=null;_this53.fill=null;return _this53;}template_createClass(Font,[{key:$clean,value:function value(builder){template_get(template_getPrototypeOf(Font.prototype),$clean,this).call(this,builder);this[$globalData].usedTypefaces.add(this.typeface);}},{key:$toStyle,value:function value(){var style=toStyle(this,"fill");var color=style.color;if(color){if(color==="#000000"){delete style.color;}else if(!color.startsWith("#")){style.background=color;style.backgroundClip="text";style.color="transparent";}}if(this.baselineShift){style.verticalAlign=measureToString(this.baselineShift);}style.fontKerning=this.kerningMode==="none"?"none":"normal";style.letterSpacing=measureToString(this.letterSpacing);if(this.lineThrough!==0){style.textDecoration="line-through";if(this.lineThrough===2){style.textDecorationStyle="double";}}if(this.overline!==0){style.textDecoration="overline";if(this.overline===2){style.textDecorationStyle="double";}}style.fontStyle=this.posture;style.fontSize=measureToString(0.99*this.size);setFontFamily(this,this,this[$globalData].fontFinder,style);if(this.underline!==0){style.textDecoration="underline";if(this.underline===2){style.textDecorationStyle="double";}}style.fontWeight=this.weight;return style;}}]);return Font;}(XFAObject);var Format=/*#__PURE__*/function(_XFAObject43){template_inherits(Format,_XFAObject43);var _super54=template_createSuper(Format);function Format(attributes){var _this54;template_classCallCheck(this,Format);_this54=_super54.call(this,TEMPLATE_NS_ID,"format",true);_this54.id=attributes.id||"";_this54.use=attributes.use||"";_this54.usehref=attributes.usehref||"";_this54.extras=null;_this54.picture=null;return _this54;}return template_createClass(Format);}(XFAObject);var Handler=/*#__PURE__*/function(_StringObject3){template_inherits(Handler,_StringObject3);var _super55=template_createSuper(Handler);function Handler(attributes){var _this55;template_classCallCheck(this,Handler);_this55=_super55.call(this,TEMPLATE_NS_ID,"handler");_this55.id=attributes.id||"";_this55.type=getStringOption(attributes.type,["optional","required"]);_this55.use=attributes.use||"";_this55.usehref=attributes.usehref||"";return _this55;}return template_createClass(Handler);}(StringObject);var Hyphenation=/*#__PURE__*/function(_XFAObject44){template_inherits(Hyphenation,_XFAObject44);var _super56=template_createSuper(Hyphenation);function Hyphenation(attributes){var _this56;template_classCallCheck(this,Hyphenation);_this56=_super56.call(this,TEMPLATE_NS_ID,"hyphenation");_this56.excludeAllCaps=getInteger({data:attributes.excludeAllCaps,defaultValue:0,validate:function validate(x){return x===1;}});_this56.excludeInitialCap=getInteger({data:attributes.excludeInitialCap,defaultValue:0,validate:function validate(x){return x===1;}});_this56.hyphenate=getInteger({data:attributes.hyphenate,defaultValue:0,validate:function validate(x){return x===1;}});_this56.id=attributes.id||"";_this56.pushCharacterCount=getInteger({data:attributes.pushCharacterCount,defaultValue:3,validate:function validate(x){return x>=0;}});_this56.remainCharacterCount=getInteger({data:attributes.remainCharacterCount,defaultValue:3,validate:function validate(x){return x>=0;}});_this56.use=attributes.use||"";_this56.usehref=attributes.usehref||"";_this56.wordCharacterCount=getInteger({data:attributes.wordCharacterCount,defaultValue:7,validate:function validate(x){return x>=0;}});return _this56;}return template_createClass(Hyphenation);}(XFAObject);var Image=/*#__PURE__*/function(_StringObject4){template_inherits(Image,_StringObject4);var _super57=template_createSuper(Image);function Image(attributes){var _this57;template_classCallCheck(this,Image);_this57=_super57.call(this,TEMPLATE_NS_ID,"image");_this57.aspect=getStringOption(attributes.aspect,["fit","actual","height","none","width"]);_this57.contentType=attributes.contentType||"";_this57.href=attributes.href||"";_this57.id=attributes.id||"";_this57.name=attributes.name||"";_this57.transferEncoding=getStringOption(attributes.transferEncoding,["base64","none","package"]);_this57.use=attributes.use||"";_this57.usehref=attributes.usehref||"";return _this57;}template_createClass(Image,[{key:$toHTML,value:function value(){if(this.contentType&&!MIMES.has(this.contentType.toLowerCase())){return HTMLResult.EMPTY;}var buffer=this[$globalData].images&&this[$globalData].images.get(this.href);if(!buffer&&(this.href||!this[$content])){return HTMLResult.EMPTY;}if(!buffer&&this.transferEncoding==="base64"){buffer=stringToBytes(atob(this[$content]));}if(!buffer){return HTMLResult.EMPTY;}if(!this.contentType){for(var _i=0,_IMAGES_HEADERS=IMAGES_HEADERS;_i<_IMAGES_HEADERS.length;_i++){var _IMAGES_HEADERS$_i=template_slicedToArray(_IMAGES_HEADERS[_i],2),header=_IMAGES_HEADERS$_i[0],type=_IMAGES_HEADERS$_i[1];if(buffer.length>header.length&&header.every(function(x,i){return x===buffer[i];})){this.contentType=type;break;}}if(!this.contentType){return HTMLResult.EMPTY;}}var blob=new Blob([buffer],{type:this.contentType});var style;switch(this.aspect){case"fit":case"actual":break;case"height":style={height:"100%",objectFit:"fill"};break;case"none":style={width:"100%",height:"100%",objectFit:"fill"};break;case"width":style={width:"100%",objectFit:"fill"};break;}var parent=this[$getParent]();return HTMLResult.success({name:"img",attributes:{class:["xfaImage"],style:style,src:URL.createObjectURL(blob),alt:parent?ariaLabel(parent[$getParent]()):null}});}}]);return Image;}(StringObject);var ImageEdit=/*#__PURE__*/function(_XFAObject45){template_inherits(ImageEdit,_XFAObject45);var _super58=template_createSuper(ImageEdit);function ImageEdit(attributes){var _this58;template_classCallCheck(this,ImageEdit);_this58=_super58.call(this,TEMPLATE_NS_ID,"imageEdit",true);_this58.data=getStringOption(attributes.data,["link","embed"]);_this58.id=attributes.id||"";_this58.use=attributes.use||"";_this58.usehref=attributes.usehref||"";_this58.border=null;_this58.extras=null;_this58.margin=null;return _this58;}template_createClass(ImageEdit,[{key:$toHTML,value:function value(availableSpace){if(this.data==="embed"){return HTMLResult.success({name:"div",children:[],attributes:{}});}return HTMLResult.EMPTY;}}]);return ImageEdit;}(XFAObject);var Integer=/*#__PURE__*/function(_ContentObject6){template_inherits(Integer,_ContentObject6);var _super59=template_createSuper(Integer);function Integer(attributes){var _this59;template_classCallCheck(this,Integer);_this59=_super59.call(this,TEMPLATE_NS_ID,"integer");_this59.id=attributes.id||"";_this59.name=attributes.name||"";_this59.use=attributes.use||"";_this59.usehref=attributes.usehref||"";return _this59;}template_createClass(Integer,[{key:$finalize,value:function value(){var number=parseInt(this[$content].trim(),10);this[$content]=isNaN(number)?null:number;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]!==null?this[$content].toString():"");}}]);return Integer;}(ContentObject);var Issuers=/*#__PURE__*/function(_XFAObject46){template_inherits(Issuers,_XFAObject46);var _super60=template_createSuper(Issuers);function Issuers(attributes){var _this60;template_classCallCheck(this,Issuers);_this60=_super60.call(this,TEMPLATE_NS_ID,"issuers",true);_this60.id=attributes.id||"";_this60.type=getStringOption(attributes.type,["optional","required"]);_this60.use=attributes.use||"";_this60.usehref=attributes.usehref||"";_this60.certificate=new XFAObjectArray();return _this60;}return template_createClass(Issuers);}(XFAObject);var Items=/*#__PURE__*/function(_XFAObject47){template_inherits(Items,_XFAObject47);var _super61=template_createSuper(Items);function Items(attributes){var _this61;template_classCallCheck(this,Items);_this61=_super61.call(this,TEMPLATE_NS_ID,"items",true);_this61.id=attributes.id||"";_this61.name=attributes.name||"";_this61.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this61.ref=attributes.ref||"";_this61.save=getInteger({data:attributes.save,defaultValue:0,validate:function validate(x){return x===1;}});_this61.use=attributes.use||"";_this61.usehref=attributes.usehref||"";_this61.boolean=new XFAObjectArray();_this61.date=new XFAObjectArray();_this61.dateTime=new XFAObjectArray();_this61.decimal=new XFAObjectArray();_this61.exData=new XFAObjectArray();_this61.float=new XFAObjectArray();_this61.image=new XFAObjectArray();_this61.integer=new XFAObjectArray();_this61.text=new XFAObjectArray();_this61.time=new XFAObjectArray();return _this61;}template_createClass(Items,[{key:$toHTML,value:function value(){var output=[];var _iterator6=template_createForOfIteratorHelper(this[$getChildren]()),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var child=_step6.value;output.push(child[$text]());}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}return HTMLResult.success(output);}}]);return Items;}(XFAObject);var Keep=/*#__PURE__*/function(_XFAObject48){template_inherits(Keep,_XFAObject48);var _super62=template_createSuper(Keep);function Keep(attributes){var _this62;template_classCallCheck(this,Keep);_this62=_super62.call(this,TEMPLATE_NS_ID,"keep",true);_this62.id=attributes.id||"";var options=["none","contentArea","pageArea"];_this62.intact=getStringOption(attributes.intact,options);_this62.next=getStringOption(attributes.next,options);_this62.previous=getStringOption(attributes.previous,options);_this62.use=attributes.use||"";_this62.usehref=attributes.usehref||"";_this62.extras=null;return _this62;}return template_createClass(Keep);}(XFAObject);var KeyUsage=/*#__PURE__*/function(_XFAObject49){template_inherits(KeyUsage,_XFAObject49);var _super63=template_createSuper(KeyUsage);function KeyUsage(attributes){var _this63;template_classCallCheck(this,KeyUsage);_this63=_super63.call(this,TEMPLATE_NS_ID,"keyUsage");var options=["","yes","no"];_this63.crlSign=getStringOption(attributes.crlSign,options);_this63.dataEncipherment=getStringOption(attributes.dataEncipherment,options);_this63.decipherOnly=getStringOption(attributes.decipherOnly,options);_this63.digitalSignature=getStringOption(attributes.digitalSignature,options);_this63.encipherOnly=getStringOption(attributes.encipherOnly,options);_this63.id=attributes.id||"";_this63.keyAgreement=getStringOption(attributes.keyAgreement,options);_this63.keyCertSign=getStringOption(attributes.keyCertSign,options);_this63.keyEncipherment=getStringOption(attributes.keyEncipherment,options);_this63.nonRepudiation=getStringOption(attributes.nonRepudiation,options);_this63.type=getStringOption(attributes.type,["optional","required"]);_this63.use=attributes.use||"";_this63.usehref=attributes.usehref||"";return _this63;}return template_createClass(KeyUsage);}(XFAObject);var Line=/*#__PURE__*/function(_XFAObject50){template_inherits(Line,_XFAObject50);var _super64=template_createSuper(Line);function Line(attributes){var _this64;template_classCallCheck(this,Line);_this64=_super64.call(this,TEMPLATE_NS_ID,"line",true);_this64.hand=getStringOption(attributes.hand,["even","left","right"]);_this64.id=attributes.id||"";_this64.slope=getStringOption(attributes.slope,["\\","/"]);_this64.use=attributes.use||"";_this64.usehref=attributes.usehref||"";_this64.edge=null;return _this64;}template_createClass(Line,[{key:$toHTML,value:function value(){var parent=this[$getParent]()[$getParent]();var edge=this.edge||new Edge({});var edgeStyle=edge[$toStyle]();var style=Object.create(null);var thickness=edge.presence==="visible"?edge.thickness:0;style.strokeWidth=measureToString(thickness);style.stroke=edgeStyle.color;var x1,y1,x2,y2;var width="100%";var height="100%";if(parent.w<=thickness){x1="50%";y1=0;x2="50%";y2="100%";width=style.strokeWidth;}else if(parent.h<=thickness){x1=0;y1="50%";x2="100%";y2="50%";height=style.strokeWidth;}else if(this.slope==="\\"){x1=0;y1=0;x2="100%";y2="100%";}else{x1=0;y1="100%";x2="100%";y2=0;}var line={name:"line",attributes:{xmlns:SVG_NS,x1:x1,y1:y1,x2:x2,y2:y2,style:style}};var svg={name:"svg",children:[line],attributes:{xmlns:SVG_NS,width:width,height:height,style:{overflow:"visible"}}};if(hasMargin(parent)){return HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[svg]});}svg.attributes.style.position="absolute";return HTMLResult.success(svg);}}]);return Line;}(XFAObject);var Linear=/*#__PURE__*/function(_XFAObject51){template_inherits(Linear,_XFAObject51);var _super65=template_createSuper(Linear);function Linear(attributes){var _this65;template_classCallCheck(this,Linear);_this65=_super65.call(this,TEMPLATE_NS_ID,"linear",true);_this65.id=attributes.id||"";_this65.type=getStringOption(attributes.type,["toRight","toBottom","toLeft","toTop"]);_this65.use=attributes.use||"";_this65.usehref=attributes.usehref||"";_this65.color=null;_this65.extras=null;return _this65;}template_createClass(Linear,[{key:$toStyle,value:function value(startColor){startColor=startColor?startColor[$toStyle]():"#FFFFFF";var transf=this.type.replace(/([RBLT])/," $1").toLowerCase();var endColor=this.color?this.color[$toStyle]():"#000000";return"linear-gradient(".concat(transf,", ").concat(startColor,", ").concat(endColor,")");}}]);return Linear;}(XFAObject);var LockDocument=/*#__PURE__*/function(_ContentObject7){template_inherits(LockDocument,_ContentObject7);var _super66=template_createSuper(LockDocument);function LockDocument(attributes){var _this66;template_classCallCheck(this,LockDocument);_this66=_super66.call(this,TEMPLATE_NS_ID,"lockDocument");_this66.id=attributes.id||"";_this66.type=getStringOption(attributes.type,["optional","required"]);_this66.use=attributes.use||"";_this66.usehref=attributes.usehref||"";return _this66;}template_createClass(LockDocument,[{key:$finalize,value:function value(){this[$content]=getStringOption(this[$content],["auto","0","1"]);}}]);return LockDocument;}(ContentObject);var Manifest=/*#__PURE__*/function(_XFAObject52){template_inherits(Manifest,_XFAObject52);var _super67=template_createSuper(Manifest);function Manifest(attributes){var _this67;template_classCallCheck(this,Manifest);_this67=_super67.call(this,TEMPLATE_NS_ID,"manifest",true);_this67.action=getStringOption(attributes.action,["include","all","exclude"]);_this67.id=attributes.id||"";_this67.name=attributes.name||"";_this67.use=attributes.use||"";_this67.usehref=attributes.usehref||"";_this67.extras=null;_this67.ref=new XFAObjectArray();return _this67;}return template_createClass(Manifest);}(XFAObject);var Margin=/*#__PURE__*/function(_XFAObject53){template_inherits(Margin,_XFAObject53);var _super68=template_createSuper(Margin);function Margin(attributes){var _this68;template_classCallCheck(this,Margin);_this68=_super68.call(this,TEMPLATE_NS_ID,"margin",true);_this68.bottomInset=getMeasurement(attributes.bottomInset,"0");_this68.id=attributes.id||"";_this68.leftInset=getMeasurement(attributes.leftInset,"0");_this68.rightInset=getMeasurement(attributes.rightInset,"0");_this68.topInset=getMeasurement(attributes.topInset,"0");_this68.use=attributes.use||"";_this68.usehref=attributes.usehref||"";_this68.extras=null;return _this68;}template_createClass(Margin,[{key:$toStyle,value:function value(){return{margin:measureToString(this.topInset)+" "+measureToString(this.rightInset)+" "+measureToString(this.bottomInset)+" "+measureToString(this.leftInset)};}}]);return Margin;}(XFAObject);var Mdp=/*#__PURE__*/function(_XFAObject54){template_inherits(Mdp,_XFAObject54);var _super69=template_createSuper(Mdp);function Mdp(attributes){var _this69;template_classCallCheck(this,Mdp);_this69=_super69.call(this,TEMPLATE_NS_ID,"mdp");_this69.id=attributes.id||"";_this69.permissions=getInteger({data:attributes.permissions,defaultValue:2,validate:function validate(x){return x===1||x===3;}});_this69.signatureType=getStringOption(attributes.signatureType,["filler","author"]);_this69.use=attributes.use||"";_this69.usehref=attributes.usehref||"";return _this69;}return template_createClass(Mdp);}(XFAObject);var Medium=/*#__PURE__*/function(_XFAObject55){template_inherits(Medium,_XFAObject55);var _super70=template_createSuper(Medium);function Medium(attributes){var _this70;template_classCallCheck(this,Medium);_this70=_super70.call(this,TEMPLATE_NS_ID,"medium");_this70.id=attributes.id||"";_this70.imagingBBox=getBBox(attributes.imagingBBox);_this70.long=getMeasurement(attributes.long);_this70.orientation=getStringOption(attributes.orientation,["portrait","landscape"]);_this70.short=getMeasurement(attributes.short);_this70.stock=attributes.stock||"";_this70.trayIn=getStringOption(attributes.trayIn,["auto","delegate","pageFront"]);_this70.trayOut=getStringOption(attributes.trayOut,["auto","delegate"]);_this70.use=attributes.use||"";_this70.usehref=attributes.usehref||"";return _this70;}return template_createClass(Medium);}(XFAObject);var Message=/*#__PURE__*/function(_XFAObject56){template_inherits(Message,_XFAObject56);var _super71=template_createSuper(Message);function Message(attributes){var _this71;template_classCallCheck(this,Message);_this71=_super71.call(this,TEMPLATE_NS_ID,"message",true);_this71.id=attributes.id||"";_this71.use=attributes.use||"";_this71.usehref=attributes.usehref||"";_this71.text=new XFAObjectArray();return _this71;}return template_createClass(Message);}(XFAObject);var NumericEdit=/*#__PURE__*/function(_XFAObject57){template_inherits(NumericEdit,_XFAObject57);var _super72=template_createSuper(NumericEdit);function NumericEdit(attributes){var _this72;template_classCallCheck(this,NumericEdit);_this72=_super72.call(this,TEMPLATE_NS_ID,"numericEdit",true);_this72.hScrollPolicy=getStringOption(attributes.hScrollPolicy,["auto","off","on"]);_this72.id=attributes.id||"";_this72.use=attributes.use||"";_this72.usehref=attributes.usehref||"";_this72.border=null;_this72.comb=null;_this72.extras=null;_this72.margin=null;return _this72;}template_createClass(NumericEdit,[{key:$toHTML,value:function value(availableSpace){var _field$$data4;var style=toStyle(this,"border","font","margin");var field=this[$getParent]()[$getParent]();var html={name:"input",attributes:{type:"text",fieldId:field[$uid],dataId:((_field$$data4=field[$data])===null||_field$$data4===void 0?void 0:_field$$data4[$uid])||field[$uid],class:["xfaTextfield"],style:style,"aria-label":ariaLabel(field),"aria-required":false}};if(isRequired(field)){html.attributes["aria-required"]=true;html.attributes.required=true;}return HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[html]});}}]);return NumericEdit;}(XFAObject);var Occur=/*#__PURE__*/function(_XFAObject58){template_inherits(Occur,_XFAObject58);var _super73=template_createSuper(Occur);function Occur(attributes){var _this73;template_classCallCheck(this,Occur);_this73=_super73.call(this,TEMPLATE_NS_ID,"occur",true);_this73.id=attributes.id||"";_this73.initial=attributes.initial!==""?getInteger({data:attributes.initial,defaultValue:"",validate:function validate(x){return true;}}):"";_this73.max=attributes.max!==""?getInteger({data:attributes.max,defaultValue:1,validate:function validate(x){return true;}}):"";_this73.min=attributes.min!==""?getInteger({data:attributes.min,defaultValue:1,validate:function validate(x){return true;}}):"";_this73.use=attributes.use||"";_this73.usehref=attributes.usehref||"";_this73.extras=null;return _this73;}template_createClass(Occur,[{key:$clean,value:function value(){var parent=this[$getParent]();var originalMin=this.min;if(this.min===""){this.min=parent instanceof PageArea||parent instanceof PageSet?0:1;}if(this.max===""){if(originalMin===""){this.max=parent instanceof PageArea||parent instanceof PageSet?-1:1;}else{this.max=this.min;}}if(this.max!==-1&&this.max<this.min){this.max=this.min;}if(this.initial===""){this.initial=parent instanceof Template?1:this.min;}}}]);return Occur;}(XFAObject);var Oid=/*#__PURE__*/function(_StringObject5){template_inherits(Oid,_StringObject5);var _super74=template_createSuper(Oid);function Oid(attributes){var _this74;template_classCallCheck(this,Oid);_this74=_super74.call(this,TEMPLATE_NS_ID,"oid");_this74.id=attributes.id||"";_this74.name=attributes.name||"";_this74.use=attributes.use||"";_this74.usehref=attributes.usehref||"";return _this74;}return template_createClass(Oid);}(StringObject);var Oids=/*#__PURE__*/function(_XFAObject59){template_inherits(Oids,_XFAObject59);var _super75=template_createSuper(Oids);function Oids(attributes){var _this75;template_classCallCheck(this,Oids);_this75=_super75.call(this,TEMPLATE_NS_ID,"oids",true);_this75.id=attributes.id||"";_this75.type=getStringOption(attributes.type,["optional","required"]);_this75.use=attributes.use||"";_this75.usehref=attributes.usehref||"";_this75.oid=new XFAObjectArray();return _this75;}return template_createClass(Oids);}(XFAObject);var Overflow=/*#__PURE__*/function(_XFAObject60){template_inherits(Overflow,_XFAObject60);var _super76=template_createSuper(Overflow);function Overflow(attributes){var _this76;template_classCallCheck(this,Overflow);_this76=_super76.call(this,TEMPLATE_NS_ID,"overflow");_this76.id=attributes.id||"";_this76.leader=attributes.leader||"";_this76.target=attributes.target||"";_this76.trailer=attributes.trailer||"";_this76.use=attributes.use||"";_this76.usehref=attributes.usehref||"";return _this76;}template_createClass(Overflow,[{key:$getExtra,value:function value(){if(!this[$extra]){var parent=this[$getParent]();var root=this[$getTemplateRoot]();var target=root[$searchNode](this.target,parent);var leader=root[$searchNode](this.leader,parent);var trailer=root[$searchNode](this.trailer,parent);this[$extra]={target:(target===null||target===void 0?void 0:target[0])||null,leader:(leader===null||leader===void 0?void 0:leader[0])||null,trailer:(trailer===null||trailer===void 0?void 0:trailer[0])||null,addLeader:false,addTrailer:false};}return this[$extra];}}]);return Overflow;}(XFAObject);var PageArea=/*#__PURE__*/function(_XFAObject61){template_inherits(PageArea,_XFAObject61);var _super77=template_createSuper(PageArea);function PageArea(attributes){var _this77;template_classCallCheck(this,PageArea);_this77=_super77.call(this,TEMPLATE_NS_ID,"pageArea",true);_this77.blankOrNotBlank=getStringOption(attributes.blankOrNotBlank,["any","blank","notBlank"]);_this77.id=attributes.id||"";_this77.initialNumber=getInteger({data:attributes.initialNumber,defaultValue:1,validate:function validate(x){return true;}});_this77.name=attributes.name||"";_this77.numbered=getInteger({data:attributes.numbered,defaultValue:1,validate:function validate(x){return true;}});_this77.oddOrEven=getStringOption(attributes.oddOrEven,["any","even","odd"]);_this77.pagePosition=getStringOption(attributes.pagePosition,["any","first","last","only","rest"]);_this77.relevant=getRelevant(attributes.relevant);_this77.use=attributes.use||"";_this77.usehref=attributes.usehref||"";_this77.desc=null;_this77.extras=null;_this77.medium=null;_this77.occur=null;_this77.area=new XFAObjectArray();_this77.contentArea=new XFAObjectArray();_this77.draw=new XFAObjectArray();_this77.exclGroup=new XFAObjectArray();_this77.field=new XFAObjectArray();_this77.subform=new XFAObjectArray();return _this77;}template_createClass(PageArea,[{key:$isUsable,value:function value(){if(!this[$extra]){this[$extra]={numberOfUse:0};return true;}return!this.occur||this.occur.max===-1||this[$extra].numberOfUse<this.occur.max;}},{key:$cleanPage,value:function value(){delete this[$extra];}},{key:$getNextPage,value:function value(){if(!this[$extra]){this[$extra]={numberOfUse:0};}var parent=this[$getParent]();if(parent.relation==="orderedOccurrence"){if(this[$isUsable]()){this[$extra].numberOfUse+=1;return this;}}return parent[$getNextPage]();}},{key:$getAvailableSpace,value:function value(){return this[$extra].space||{width:0,height:0};}},{key:$toHTML,value:function value(){if(!this[$extra]){this[$extra]={numberOfUse:1};}var children=[];this[$extra].children=children;var style=Object.create(null);if(this.medium&&this.medium.short&&this.medium.long){style.width=measureToString(this.medium.short);style.height=measureToString(this.medium.long);this[$extra].space={width:this.medium.short,height:this.medium.long};if(this.medium.orientation==="landscape"){var x=style.width;style.width=style.height;style.height=x;this[$extra].space={width:this.medium.long,height:this.medium.short};}}else{warn("XFA - No medium specified in pageArea: please file a bug.");}this[$childrenToHTML]({filter:new Set(["area","draw","field","subform"]),include:true});this[$childrenToHTML]({filter:new Set(["contentArea"]),include:true});return HTMLResult.success({name:"div",children:children,attributes:{class:["xfaPage"],id:this[$uid],style:style,xfaName:this.name}});}}]);return PageArea;}(XFAObject);var PageSet=/*#__PURE__*/function(_XFAObject62){template_inherits(PageSet,_XFAObject62);var _super78=template_createSuper(PageSet);function PageSet(attributes){var _this78;template_classCallCheck(this,PageSet);_this78=_super78.call(this,TEMPLATE_NS_ID,"pageSet",true);_this78.duplexImposition=getStringOption(attributes.duplexImposition,["longEdge","shortEdge"]);_this78.id=attributes.id||"";_this78.name=attributes.name||"";_this78.relation=getStringOption(attributes.relation,["orderedOccurrence","duplexPaginated","simplexPaginated"]);_this78.relevant=getRelevant(attributes.relevant);_this78.use=attributes.use||"";_this78.usehref=attributes.usehref||"";_this78.extras=null;_this78.occur=null;_this78.pageArea=new XFAObjectArray();_this78.pageSet=new XFAObjectArray();return _this78;}template_createClass(PageSet,[{key:$cleanPage,value:function value(){var _iterator7=template_createForOfIteratorHelper(this.pageArea.children),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var page=_step7.value;page[$cleanPage]();}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}var _iterator8=template_createForOfIteratorHelper(this.pageSet.children),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _page=_step8.value;_page[$cleanPage]();}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}},{key:$isUsable,value:function value(){return!this.occur||this.occur.max===-1||this[$extra].numberOfUse<this.occur.max;}},{key:$getNextPage,value:function value(){if(!this[$extra]){this[$extra]={numberOfUse:1,pageIndex:-1,pageSetIndex:-1};}if(this.relation==="orderedOccurrence"){if(this[$extra].pageIndex+1<this.pageArea.children.length){this[$extra].pageIndex+=1;var pageArea=this.pageArea.children[this[$extra].pageIndex];return pageArea[$getNextPage]();}if(this[$extra].pageSetIndex+1<this.pageSet.children.length){this[$extra].pageSetIndex+=1;return this.pageSet.children[this[$extra].pageSetIndex][$getNextPage]();}if(this[$isUsable]()){this[$extra].numberOfUse+=1;this[$extra].pageIndex=-1;this[$extra].pageSetIndex=-1;return this[$getNextPage]();}var parent=this[$getParent]();if(parent instanceof PageSet){return parent[$getNextPage]();}this[$cleanPage]();return this[$getNextPage]();}var pageNumber=this[$getTemplateRoot]()[$extra].pageNumber;var parity=pageNumber%2===0?"even":"odd";var position=pageNumber===0?"first":"rest";var page=this.pageArea.children.find(function(p){return p.oddOrEven===parity&&p.pagePosition===position;});if(page){return page;}page=this.pageArea.children.find(function(p){return p.oddOrEven==="any"&&p.pagePosition===position;});if(page){return page;}page=this.pageArea.children.find(function(p){return p.oddOrEven==="any"&&p.pagePosition==="any";});if(page){return page;}return this.pageArea.children[0];}}]);return PageSet;}(XFAObject);var Para=/*#__PURE__*/function(_XFAObject63){template_inherits(Para,_XFAObject63);var _super79=template_createSuper(Para);function Para(attributes){var _this79;template_classCallCheck(this,Para);_this79=_super79.call(this,TEMPLATE_NS_ID,"para",true);_this79.hAlign=getStringOption(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]);_this79.id=attributes.id||"";_this79.lineHeight=attributes.lineHeight?getMeasurement(attributes.lineHeight,"0pt"):"";_this79.marginLeft=attributes.marginLeft?getMeasurement(attributes.marginLeft,"0pt"):"";_this79.marginRight=attributes.marginRight?getMeasurement(attributes.marginRight,"0pt"):"";_this79.orphans=getInteger({data:attributes.orphans,defaultValue:0,validate:function validate(x){return x>=0;}});_this79.preserve=attributes.preserve||"";_this79.radixOffset=attributes.radixOffset?getMeasurement(attributes.radixOffset,"0pt"):"";_this79.spaceAbove=attributes.spaceAbove?getMeasurement(attributes.spaceAbove,"0pt"):"";_this79.spaceBelow=attributes.spaceBelow?getMeasurement(attributes.spaceBelow,"0pt"):"";_this79.tabDefault=attributes.tabDefault?getMeasurement(_this79.tabDefault):"";_this79.tabStops=(attributes.tabStops||"").trim().split(/\s+/).map(function(x,i){return i%2===1?getMeasurement(x):x;});_this79.textIndent=attributes.textIndent?getMeasurement(attributes.textIndent,"0pt"):"";_this79.use=attributes.use||"";_this79.usehref=attributes.usehref||"";_this79.vAlign=getStringOption(attributes.vAlign,["top","bottom","middle"]);_this79.widows=getInteger({data:attributes.widows,defaultValue:0,validate:function validate(x){return x>=0;}});_this79.hyphenation=null;return _this79;}template_createClass(Para,[{key:$toStyle,value:function value(){var style=toStyle(this,"hAlign");if(this.marginLeft!==""){style.paddingLeft=measureToString(this.marginLeft);}if(this.marginRight!==""){style.paddingight=measureToString(this.marginRight);}if(this.spaceAbove!==""){style.paddingTop=measureToString(this.spaceAbove);}if(this.spaceBelow!==""){style.paddingBottom=measureToString(this.spaceBelow);}if(this.textIndent!==""){style.textIndent=measureToString(this.textIndent);fixTextIndent(style);}if(this.lineHeight>0){style.lineHeight=measureToString(this.lineHeight);}if(this.tabDefault!==""){style.tabSize=measureToString(this.tabDefault);}if(this.tabStops.length>0){}if(this.hyphenatation){Object.assign(style,this.hyphenatation[$toStyle]());}return style;}}]);return Para;}(XFAObject);var PasswordEdit=/*#__PURE__*/function(_XFAObject64){template_inherits(PasswordEdit,_XFAObject64);var _super80=template_createSuper(PasswordEdit);function PasswordEdit(attributes){var _this80;template_classCallCheck(this,PasswordEdit);_this80=_super80.call(this,TEMPLATE_NS_ID,"passwordEdit",true);_this80.hScrollPolicy=getStringOption(attributes.hScrollPolicy,["auto","off","on"]);_this80.id=attributes.id||"";_this80.passwordChar=attributes.passwordChar||"*";_this80.use=attributes.use||"";_this80.usehref=attributes.usehref||"";_this80.border=null;_this80.extras=null;_this80.margin=null;return _this80;}return template_createClass(PasswordEdit);}(XFAObject);var template_Pattern=/*#__PURE__*/function(_XFAObject65){template_inherits(Pattern,_XFAObject65);var _super81=template_createSuper(Pattern);function Pattern(attributes){var _this81;template_classCallCheck(this,Pattern);_this81=_super81.call(this,TEMPLATE_NS_ID,"pattern",true);_this81.id=attributes.id||"";_this81.type=getStringOption(attributes.type,["crossHatch","crossDiagonal","diagonalLeft","diagonalRight","horizontal","vertical"]);_this81.use=attributes.use||"";_this81.usehref=attributes.usehref||"";_this81.color=null;_this81.extras=null;return _this81;}template_createClass(Pattern,[{key:$toStyle,value:function value(startColor){startColor=startColor?startColor[$toStyle]():"#FFFFFF";var endColor=this.color?this.color[$toStyle]():"#000000";var width=5;var cmd="repeating-linear-gradient";var colors="".concat(startColor,",").concat(startColor," ").concat(width,"px,").concat(endColor," ").concat(width,"px,").concat(endColor," ").concat(2*width,"px");switch(this.type){case"crossHatch":return"".concat(cmd,"(to top,").concat(colors,") ").concat(cmd,"(to right,").concat(colors,")");case"crossDiagonal":return"".concat(cmd,"(45deg,").concat(colors,") ").concat(cmd,"(-45deg,").concat(colors,")");case"diagonalLeft":return"".concat(cmd,"(45deg,").concat(colors,")");case"diagonalRight":return"".concat(cmd,"(-45deg,").concat(colors,")");case"horizontal":return"".concat(cmd,"(to top,").concat(colors,")");case"vertical":return"".concat(cmd,"(to right,").concat(colors,")");}return"";}}]);return Pattern;}(XFAObject);var Picture=/*#__PURE__*/function(_StringObject6){template_inherits(Picture,_StringObject6);var _super82=template_createSuper(Picture);function Picture(attributes){var _this82;template_classCallCheck(this,Picture);_this82=_super82.call(this,TEMPLATE_NS_ID,"picture");_this82.id=attributes.id||"";_this82.use=attributes.use||"";_this82.usehref=attributes.usehref||"";return _this82;}return template_createClass(Picture);}(StringObject);var Proto=/*#__PURE__*/function(_XFAObject66){template_inherits(Proto,_XFAObject66);var _super83=template_createSuper(Proto);function Proto(attributes){var _this83;template_classCallCheck(this,Proto);_this83=_super83.call(this,TEMPLATE_NS_ID,"proto",true);_this83.appearanceFilter=new XFAObjectArray();_this83.arc=new XFAObjectArray();_this83.area=new XFAObjectArray();_this83.assist=new XFAObjectArray();_this83.barcode=new XFAObjectArray();_this83.bindItems=new XFAObjectArray();_this83.bookend=new XFAObjectArray();_this83.boolean=new XFAObjectArray();_this83.border=new XFAObjectArray();_this83.break=new XFAObjectArray();_this83.breakAfter=new XFAObjectArray();_this83.breakBefore=new XFAObjectArray();_this83.button=new XFAObjectArray();_this83.calculate=new XFAObjectArray();_this83.caption=new XFAObjectArray();_this83.certificate=new XFAObjectArray();_this83.certificates=new XFAObjectArray();_this83.checkButton=new XFAObjectArray();_this83.choiceList=new XFAObjectArray();_this83.color=new XFAObjectArray();_this83.comb=new XFAObjectArray();_this83.connect=new XFAObjectArray();_this83.contentArea=new XFAObjectArray();_this83.corner=new XFAObjectArray();_this83.date=new XFAObjectArray();_this83.dateTime=new XFAObjectArray();_this83.dateTimeEdit=new XFAObjectArray();_this83.decimal=new XFAObjectArray();_this83.defaultUi=new XFAObjectArray();_this83.desc=new XFAObjectArray();_this83.digestMethod=new XFAObjectArray();_this83.digestMethods=new XFAObjectArray();_this83.draw=new XFAObjectArray();_this83.edge=new XFAObjectArray();_this83.encoding=new XFAObjectArray();_this83.encodings=new XFAObjectArray();_this83.encrypt=new XFAObjectArray();_this83.encryptData=new XFAObjectArray();_this83.encryption=new XFAObjectArray();_this83.encryptionMethod=new XFAObjectArray();_this83.encryptionMethods=new XFAObjectArray();_this83.event=new XFAObjectArray();_this83.exData=new XFAObjectArray();_this83.exObject=new XFAObjectArray();_this83.exclGroup=new XFAObjectArray();_this83.execute=new XFAObjectArray();_this83.extras=new XFAObjectArray();_this83.field=new XFAObjectArray();_this83.fill=new XFAObjectArray();_this83.filter=new XFAObjectArray();_this83.float=new XFAObjectArray();_this83.font=new XFAObjectArray();_this83.format=new XFAObjectArray();_this83.handler=new XFAObjectArray();_this83.hyphenation=new XFAObjectArray();_this83.image=new XFAObjectArray();_this83.imageEdit=new XFAObjectArray();_this83.integer=new XFAObjectArray();_this83.issuers=new XFAObjectArray();_this83.items=new XFAObjectArray();_this83.keep=new XFAObjectArray();_this83.keyUsage=new XFAObjectArray();_this83.line=new XFAObjectArray();_this83.linear=new XFAObjectArray();_this83.lockDocument=new XFAObjectArray();_this83.manifest=new XFAObjectArray();_this83.margin=new XFAObjectArray();_this83.mdp=new XFAObjectArray();_this83.medium=new XFAObjectArray();_this83.message=new XFAObjectArray();_this83.numericEdit=new XFAObjectArray();_this83.occur=new XFAObjectArray();_this83.oid=new XFAObjectArray();_this83.oids=new XFAObjectArray();_this83.overflow=new XFAObjectArray();_this83.pageArea=new XFAObjectArray();_this83.pageSet=new XFAObjectArray();_this83.para=new XFAObjectArray();_this83.passwordEdit=new XFAObjectArray();_this83.pattern=new XFAObjectArray();_this83.picture=new XFAObjectArray();_this83.radial=new XFAObjectArray();_this83.reason=new XFAObjectArray();_this83.reasons=new XFAObjectArray();_this83.rectangle=new XFAObjectArray();_this83.ref=new XFAObjectArray();_this83.script=new XFAObjectArray();_this83.setProperty=new XFAObjectArray();_this83.signData=new XFAObjectArray();_this83.signature=new XFAObjectArray();_this83.signing=new XFAObjectArray();_this83.solid=new XFAObjectArray();_this83.speak=new XFAObjectArray();_this83.stipple=new XFAObjectArray();_this83.subform=new XFAObjectArray();_this83.subformSet=new XFAObjectArray();_this83.subjectDN=new XFAObjectArray();_this83.subjectDNs=new XFAObjectArray();_this83.submit=new XFAObjectArray();_this83.text=new XFAObjectArray();_this83.textEdit=new XFAObjectArray();_this83.time=new XFAObjectArray();_this83.timeStamp=new XFAObjectArray();_this83.toolTip=new XFAObjectArray();_this83.traversal=new XFAObjectArray();_this83.traverse=new XFAObjectArray();_this83.ui=new XFAObjectArray();_this83.validate=new XFAObjectArray();_this83.value=new XFAObjectArray();_this83.variables=new XFAObjectArray();return _this83;}return template_createClass(Proto);}(XFAObject);var Radial=/*#__PURE__*/function(_XFAObject67){template_inherits(Radial,_XFAObject67);var _super84=template_createSuper(Radial);function Radial(attributes){var _this84;template_classCallCheck(this,Radial);_this84=_super84.call(this,TEMPLATE_NS_ID,"radial",true);_this84.id=attributes.id||"";_this84.type=getStringOption(attributes.type,["toEdge","toCenter"]);_this84.use=attributes.use||"";_this84.usehref=attributes.usehref||"";_this84.color=null;_this84.extras=null;return _this84;}template_createClass(Radial,[{key:$toStyle,value:function value(startColor){startColor=startColor?startColor[$toStyle]():"#FFFFFF";var endColor=this.color?this.color[$toStyle]():"#000000";var colors=this.type==="toEdge"?"".concat(startColor,",").concat(endColor):"".concat(endColor,",").concat(startColor);return"radial-gradient(circle at center, ".concat(colors,")");}}]);return Radial;}(XFAObject);var Reason=/*#__PURE__*/function(_StringObject7){template_inherits(Reason,_StringObject7);var _super85=template_createSuper(Reason);function Reason(attributes){var _this85;template_classCallCheck(this,Reason);_this85=_super85.call(this,TEMPLATE_NS_ID,"reason");_this85.id=attributes.id||"";_this85.name=attributes.name||"";_this85.use=attributes.use||"";_this85.usehref=attributes.usehref||"";return _this85;}return template_createClass(Reason);}(StringObject);var Reasons=/*#__PURE__*/function(_XFAObject68){template_inherits(Reasons,_XFAObject68);var _super86=template_createSuper(Reasons);function Reasons(attributes){var _this86;template_classCallCheck(this,Reasons);_this86=_super86.call(this,TEMPLATE_NS_ID,"reasons",true);_this86.id=attributes.id||"";_this86.type=getStringOption(attributes.type,["optional","required"]);_this86.use=attributes.use||"";_this86.usehref=attributes.usehref||"";_this86.reason=new XFAObjectArray();return _this86;}return template_createClass(Reasons);}(XFAObject);var Rectangle=/*#__PURE__*/function(_XFAObject69){template_inherits(Rectangle,_XFAObject69);var _super87=template_createSuper(Rectangle);function Rectangle(attributes){var _this87;template_classCallCheck(this,Rectangle);_this87=_super87.call(this,TEMPLATE_NS_ID,"rectangle",true);_this87.hand=getStringOption(attributes.hand,["even","left","right"]);_this87.id=attributes.id||"";_this87.use=attributes.use||"";_this87.usehref=attributes.usehref||"";_this87.corner=new XFAObjectArray(4);_this87.edge=new XFAObjectArray(4);_this87.fill=null;return _this87;}template_createClass(Rectangle,[{key:$toHTML,value:function value(){var _this$fill3;var edge=this.edge.children.length?this.edge.children[0]:new Edge({});var edgeStyle=edge[$toStyle]();var style=Object.create(null);if(((_this$fill3=this.fill)===null||_this$fill3===void 0?void 0:_this$fill3.presence)==="visible"){Object.assign(style,this.fill[$toStyle]());}else{style.fill="transparent";}style.strokeWidth=measureToString(edge.presence==="visible"?edge.thickness:0);style.stroke=edgeStyle.color;var corner=this.corner.children.length?this.corner.children[0]:new Corner({});var cornerStyle=corner[$toStyle]();var rect={name:"rect",attributes:{xmlns:SVG_NS,width:"100%",height:"100%",x:0,y:0,rx:cornerStyle.radius,ry:cornerStyle.radius,style:style}};var svg={name:"svg",children:[rect],attributes:{xmlns:SVG_NS,style:{overflow:"visible"},width:"100%",height:"100%"}};var parent=this[$getParent]()[$getParent]();if(hasMargin(parent)){return HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[svg]});}svg.attributes.style.position="absolute";return HTMLResult.success(svg);}}]);return Rectangle;}(XFAObject);var RefElement=/*#__PURE__*/function(_StringObject8){template_inherits(RefElement,_StringObject8);var _super88=template_createSuper(RefElement);function RefElement(attributes){var _this88;template_classCallCheck(this,RefElement);_this88=_super88.call(this,TEMPLATE_NS_ID,"ref");_this88.id=attributes.id||"";_this88.use=attributes.use||"";_this88.usehref=attributes.usehref||"";return _this88;}return template_createClass(RefElement);}(StringObject);var Script=/*#__PURE__*/function(_StringObject9){template_inherits(Script,_StringObject9);var _super89=template_createSuper(Script);function Script(attributes){var _this89;template_classCallCheck(this,Script);_this89=_super89.call(this,TEMPLATE_NS_ID,"script");_this89.binding=attributes.binding||"";_this89.contentType=attributes.contentType||"";_this89.id=attributes.id||"";_this89.name=attributes.name||"";_this89.runAt=getStringOption(attributes.runAt,["client","both","server"]);_this89.use=attributes.use||"";_this89.usehref=attributes.usehref||"";return _this89;}return template_createClass(Script);}(StringObject);var SetProperty=/*#__PURE__*/function(_XFAObject70){template_inherits(SetProperty,_XFAObject70);var _super90=template_createSuper(SetProperty);function SetProperty(attributes){var _this90;template_classCallCheck(this,SetProperty);_this90=_super90.call(this,TEMPLATE_NS_ID,"setProperty");_this90.connection=attributes.connection||"";_this90.ref=attributes.ref||"";_this90.target=attributes.target||"";return _this90;}return template_createClass(SetProperty);}(XFAObject);var SignData=/*#__PURE__*/function(_XFAObject71){template_inherits(SignData,_XFAObject71);var _super91=template_createSuper(SignData);function SignData(attributes){var _this91;template_classCallCheck(this,SignData);_this91=_super91.call(this,TEMPLATE_NS_ID,"signData",true);_this91.id=attributes.id||"";_this91.operation=getStringOption(attributes.operation,["sign","clear","verify"]);_this91.ref=attributes.ref||"";_this91.target=attributes.target||"";_this91.use=attributes.use||"";_this91.usehref=attributes.usehref||"";_this91.filter=null;_this91.manifest=null;return _this91;}return template_createClass(SignData);}(XFAObject);var Signature=/*#__PURE__*/function(_XFAObject72){template_inherits(Signature,_XFAObject72);var _super92=template_createSuper(Signature);function Signature(attributes){var _this92;template_classCallCheck(this,Signature);_this92=_super92.call(this,TEMPLATE_NS_ID,"signature",true);_this92.id=attributes.id||"";_this92.type=getStringOption(attributes.type,["PDF1.3","PDF1.6"]);_this92.use=attributes.use||"";_this92.usehref=attributes.usehref||"";_this92.border=null;_this92.extras=null;_this92.filter=null;_this92.manifest=null;_this92.margin=null;return _this92;}return template_createClass(Signature);}(XFAObject);var Signing=/*#__PURE__*/function(_XFAObject73){template_inherits(Signing,_XFAObject73);var _super93=template_createSuper(Signing);function Signing(attributes){var _this93;template_classCallCheck(this,Signing);_this93=_super93.call(this,TEMPLATE_NS_ID,"signing",true);_this93.id=attributes.id||"";_this93.type=getStringOption(attributes.type,["optional","required"]);_this93.use=attributes.use||"";_this93.usehref=attributes.usehref||"";_this93.certificate=new XFAObjectArray();return _this93;}return template_createClass(Signing);}(XFAObject);var Solid=/*#__PURE__*/function(_XFAObject74){template_inherits(Solid,_XFAObject74);var _super94=template_createSuper(Solid);function Solid(attributes){var _this94;template_classCallCheck(this,Solid);_this94=_super94.call(this,TEMPLATE_NS_ID,"solid",true);_this94.id=attributes.id||"";_this94.use=attributes.use||"";_this94.usehref=attributes.usehref||"";_this94.extras=null;return _this94;}template_createClass(Solid,[{key:$toStyle,value:function value(startColor){return startColor?startColor[$toStyle]():"#FFFFFF";}}]);return Solid;}(XFAObject);var Speak=/*#__PURE__*/function(_StringObject10){template_inherits(Speak,_StringObject10);var _super95=template_createSuper(Speak);function Speak(attributes){var _this95;template_classCallCheck(this,Speak);_this95=_super95.call(this,TEMPLATE_NS_ID,"speak");_this95.disable=getInteger({data:attributes.disable,defaultValue:0,validate:function validate(x){return x===1;}});_this95.id=attributes.id||"";_this95.priority=getStringOption(attributes.priority,["custom","caption","name","toolTip"]);_this95.rid=attributes.rid||"";_this95.use=attributes.use||"";_this95.usehref=attributes.usehref||"";return _this95;}return template_createClass(Speak);}(StringObject);var Stipple=/*#__PURE__*/function(_XFAObject75){template_inherits(Stipple,_XFAObject75);var _super96=template_createSuper(Stipple);function Stipple(attributes){var _this96;template_classCallCheck(this,Stipple);_this96=_super96.call(this,TEMPLATE_NS_ID,"stipple",true);_this96.id=attributes.id||"";_this96.rate=getInteger({data:attributes.rate,defaultValue:50,validate:function validate(x){return x>=0&&x<=100;}});_this96.use=attributes.use||"";_this96.usehref=attributes.usehref||"";_this96.color=null;_this96.extras=null;return _this96;}template_createClass(Stipple,[{key:$toStyle,value:function value(bgColor){var alpha=this.rate/100;return Util.makeHexColor(Math.round(bgColor.value.r*(1-alpha)+this.value.r*alpha),Math.round(bgColor.value.g*(1-alpha)+this.value.g*alpha),Math.round(bgColor.value.b*(1-alpha)+this.value.b*alpha));}}]);return Stipple;}(XFAObject);var Subform=/*#__PURE__*/function(_XFAObject76){template_inherits(Subform,_XFAObject76);var _super97=template_createSuper(Subform);function Subform(attributes){var _this97;template_classCallCheck(this,Subform);_this97=_super97.call(this,TEMPLATE_NS_ID,"subform",true);_this97.access=getStringOption(attributes.access,["open","nonInteractive","protected","readOnly"]);_this97.allowMacro=getInteger({data:attributes.allowMacro,defaultValue:0,validate:function validate(x){return x===1;}});_this97.anchorType=getStringOption(attributes.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]);_this97.colSpan=getInteger({data:attributes.colSpan,defaultValue:1,validate:function validate(n){return n>=1||n===-1;}});_this97.columnWidths=(attributes.columnWidths||"").trim().split(/\s+/).map(function(x){return x==="-1"?-1:getMeasurement(x);});_this97.h=attributes.h?getMeasurement(attributes.h):"";_this97.hAlign=getStringOption(attributes.hAlign,["left","center","justify","justifyAll","radix","right"]);_this97.id=attributes.id||"";_this97.layout=getStringOption(attributes.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]);_this97.locale=attributes.locale||"";_this97.maxH=getMeasurement(attributes.maxH,"0pt");_this97.maxW=getMeasurement(attributes.maxW,"0pt");_this97.mergeMode=getStringOption(attributes.mergeMode,["consumeData","matchTemplate"]);_this97.minH=getMeasurement(attributes.minH,"0pt");_this97.minW=getMeasurement(attributes.minW,"0pt");_this97.name=attributes.name||"";_this97.presence=getStringOption(attributes.presence,["visible","hidden","inactive","invisible"]);_this97.relevant=getRelevant(attributes.relevant);_this97.restoreState=getStringOption(attributes.restoreState,["manual","auto"]);_this97.scope=getStringOption(attributes.scope,["name","none"]);_this97.use=attributes.use||"";_this97.usehref=attributes.usehref||"";_this97.w=attributes.w?getMeasurement(attributes.w):"";_this97.x=getMeasurement(attributes.x,"0pt");_this97.y=getMeasurement(attributes.y,"0pt");_this97.assist=null;_this97.bind=null;_this97.bookend=null;_this97.border=null;_this97.break=null;_this97.calculate=null;_this97.desc=null;_this97.extras=null;_this97.keep=null;_this97.margin=null;_this97.occur=null;_this97.overflow=null;_this97.pageSet=null;_this97.para=null;_this97.traversal=null;_this97.validate=null;_this97.variables=null;_this97.area=new XFAObjectArray();_this97.breakAfter=new XFAObjectArray();_this97.breakBefore=new XFAObjectArray();_this97.connect=new XFAObjectArray();_this97.draw=new XFAObjectArray();_this97.event=new XFAObjectArray();_this97.exObject=new XFAObjectArray();_this97.exclGroup=new XFAObjectArray();_this97.field=new XFAObjectArray();_this97.proto=new XFAObjectArray();_this97.setProperty=new XFAObjectArray();_this97.subform=new XFAObjectArray();_this97.subformSet=new XFAObjectArray();return _this97;}template_createClass(Subform,[{key:$getSubformParent,value:function value(){var parent=this[$getParent]();if(parent instanceof SubformSet){return parent[$getSubformParent]();}return parent;}},{key:$isBindable,value:function value(){return true;}},{key:$isThereMoreWidth,value:function value(){return this.layout.endsWith("-tb")&&this[$extra].attempt===0&&this[$extra].numberInLine>0||this[$getParent]()[$isThereMoreWidth]();}},{key:$getContainedChildren,value:/*#__PURE__*/template_regeneratorRuntime().mark(function value(){return template_regeneratorRuntime().wrap(function value$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.delegateYield(getContainedChildren(this),"t0",1);case 1:case"end":return _context3.stop();}},value,this);})},{key:$flushHTML,value:function value(){return flushHTML(this);}},{key:$addHTML,value:function value(html,bbox){addHTML(this,html,bbox);}},{key:$getAvailableSpace,value:function value(){return getAvailableSpace(this);}},{key:$isSplittable,value:function value(){var _parent$layout2;var parent=this[$getSubformParent]();if(!parent[$isSplittable]()){return false;}if(this[$extra]._isSplittable!==undefined){return this[$extra]._isSplittable;}if(this.layout==="position"||this.layout.includes("row")){this[$extra]._isSplittable=false;return false;}if(this.keep&&this.keep.intact!=="none"){this[$extra]._isSplittable=false;return false;}if((_parent$layout2=parent.layout)!==null&&_parent$layout2!==void 0&&_parent$layout2.endsWith("-tb")&&parent[$extra].numberInLine!==0){return false;}this[$extra]._isSplittable=true;return true;}},{key:$toHTML,value:function value(availableSpace){var _this$$extra;setTabIndex(this);if(this.break){if(this.break.after!=="auto"||this.break.afterTarget!==""){var node=new BreakAfter({targetType:this.break.after,target:this.break.afterTarget,startNew:this.break.startNew.toString()});node[$globalData]=this[$globalData];this[$appendChild](node);this.breakAfter.push(node);}if(this.break.before!=="auto"||this.break.beforeTarget!==""){var _node=new BreakBefore({targetType:this.break.before,target:this.break.beforeTarget,startNew:this.break.startNew.toString()});_node[$globalData]=this[$globalData];this[$appendChild](_node);this.breakBefore.push(_node);}if(this.break.overflowTarget!==""){var _node2=new Overflow({target:this.break.overflowTarget,leader:this.break.overflowLeader,trailer:this.break.overflowTrailer});_node2[$globalData]=this[$globalData];this[$appendChild](_node2);this.overflow.push(_node2);}this[$removeChild](this.break);this.break=null;}if(this.presence==="hidden"||this.presence==="inactive"){return HTMLResult.EMPTY;}if(this.breakBefore.children.length>1||this.breakAfter.children.length>1){warn("XFA - Several breakBefore or breakAfter in subforms: please file a bug.");}if(this.breakBefore.children.length>=1){var breakBefore=this.breakBefore.children[0];if(handleBreak(breakBefore)){return HTMLResult.breakNode(breakBefore);}}if((_this$$extra=this[$extra])!==null&&_this$$extra!==void 0&&_this$$extra.afterBreakAfter){return HTMLResult.EMPTY;}fixDimensions(this);var children=[];var attributes={id:this[$uid],class:[]};setAccess(this,attributes.class);if(!this[$extra]){this[$extra]=Object.create(null);}Object.assign(this[$extra],{children:children,line:null,attributes:attributes,attempt:0,numberInLine:0,availableSpace:{width:Math.min(this.w||Infinity,availableSpace.width),height:Math.min(this.h||Infinity,availableSpace.height)},width:0,height:0,prevHeight:0,currentWidth:0});var root=this[$getTemplateRoot]();var savedNoLayoutFailure=root[$extra].noLayoutFailure;var isSplittable=this[$isSplittable]();if(!isSplittable){setFirstUnsplittable(this);}if(!checkDimensions(this,availableSpace)){return HTMLResult.FAILURE;}var filter=new Set(["area","draw","exclGroup","field","subform","subformSet"]);if(this.layout.includes("row")){var columnWidths=this[$getSubformParent]().columnWidths;if(Array.isArray(columnWidths)&&columnWidths.length>0){this[$extra].columnWidths=columnWidths;this[$extra].currentColumn=0;}}var style=toStyle(this,"anchorType","dimensions","position","presence","border","margin","hAlign");var classNames=["xfaSubform"];var cl=layoutClass(this);if(cl){classNames.push(cl);}attributes.style=style;attributes.class=classNames;if(this.name){attributes.xfaName=this.name;}if(this.overflow){var overflowExtra=this.overflow[$getExtra]();if(overflowExtra.addLeader){overflowExtra.addLeader=false;handleOverflow(this,overflowExtra.leader,availableSpace);}}this[$pushPara]();var isLrTb=this.layout==="lr-tb"||this.layout==="rl-tb";var maxRun=isLrTb?MAX_ATTEMPTS_FOR_LRTB_LAYOUT:1;for(;this[$extra].attempt<maxRun;this[$extra].attempt++){if(isLrTb&&this[$extra].attempt===MAX_ATTEMPTS_FOR_LRTB_LAYOUT-1){this[$extra].numberInLine=0;}var _result=this[$childrenToHTML]({filter:filter,include:true});if(_result.success){break;}if(_result.isBreak()){this[$popPara]();return _result;}if(isLrTb&&this[$extra].attempt===0&&this[$extra].numberInLine===0&&!root[$extra].noLayoutFailure){this[$extra].attempt=maxRun;break;}}this[$popPara]();if(!isSplittable){unsetFirstUnsplittable(this);}root[$extra].noLayoutFailure=savedNoLayoutFailure;if(this[$extra].attempt===maxRun){if(this.overflow){this[$getTemplateRoot]()[$extra].overflowNode=this.overflow;}if(!isSplittable){delete this[$extra];}return HTMLResult.FAILURE;}if(this.overflow){var _overflowExtra=this.overflow[$getExtra]();if(_overflowExtra.addTrailer){_overflowExtra.addTrailer=false;handleOverflow(this,_overflowExtra.trailer,availableSpace);}}var marginH=0;var marginV=0;if(this.margin){marginH=this.margin.leftInset+this.margin.rightInset;marginV=this.margin.topInset+this.margin.bottomInset;}var width=Math.max(this[$extra].width+marginH,this.w||0);var height=Math.max(this[$extra].height+marginV,this.h||0);var bbox=[this.x,this.y,width,height];if(this.w===""){style.width=measureToString(width);}if(this.h===""){style.height=measureToString(height);}if((style.width==="0px"||style.height==="0px")&&children.length===0){return HTMLResult.EMPTY;}var html={name:"div",attributes:attributes,children:children};applyAssist(this,attributes);var result=HTMLResult.success(createWrapper(this,html),bbox);if(this.breakAfter.children.length>=1){var breakAfter=this.breakAfter.children[0];if(handleBreak(breakAfter)){this[$extra].afterBreakAfter=result;return HTMLResult.breakNode(breakAfter);}}delete this[$extra];return result;}}]);return Subform;}(XFAObject);var SubformSet=/*#__PURE__*/function(_XFAObject77){template_inherits(SubformSet,_XFAObject77);var _super98=template_createSuper(SubformSet);function SubformSet(attributes){var _this98;template_classCallCheck(this,SubformSet);_this98=_super98.call(this,TEMPLATE_NS_ID,"subformSet",true);_this98.id=attributes.id||"";_this98.name=attributes.name||"";_this98.relation=getStringOption(attributes.relation,["ordered","choice","unordered"]);_this98.relevant=getRelevant(attributes.relevant);_this98.use=attributes.use||"";_this98.usehref=attributes.usehref||"";_this98.bookend=null;_this98.break=null;_this98.desc=null;_this98.extras=null;_this98.occur=null;_this98.overflow=null;_this98.breakAfter=new XFAObjectArray();_this98.breakBefore=new XFAObjectArray();_this98.subform=new XFAObjectArray();_this98.subformSet=new XFAObjectArray();return _this98;}template_createClass(SubformSet,[{key:$getContainedChildren,value:/*#__PURE__*/template_regeneratorRuntime().mark(function value(){return template_regeneratorRuntime().wrap(function value$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.delegateYield(getContainedChildren(this),"t0",1);case 1:case"end":return _context4.stop();}},value,this);})},{key:$getSubformParent,value:function value(){var parent=this[$getParent]();while(!(parent instanceof Subform)){parent=parent[$getParent]();}return parent;}},{key:$isBindable,value:function value(){return true;}}]);return SubformSet;}(XFAObject);var SubjectDN=/*#__PURE__*/function(_ContentObject8){template_inherits(SubjectDN,_ContentObject8);var _super99=template_createSuper(SubjectDN);function SubjectDN(attributes){var _this99;template_classCallCheck(this,SubjectDN);_this99=_super99.call(this,TEMPLATE_NS_ID,"subjectDN");_this99.delimiter=attributes.delimiter||",";_this99.id=attributes.id||"";_this99.name=attributes.name||"";_this99.use=attributes.use||"";_this99.usehref=attributes.usehref||"";return _this99;}template_createClass(SubjectDN,[{key:$finalize,value:function value(){this[$content]=new Map(this[$content].split(this.delimiter).map(function(kv){kv=kv.split("=",2);kv[0]=kv[0].trim();return kv;}));}}]);return SubjectDN;}(ContentObject);var SubjectDNs=/*#__PURE__*/function(_XFAObject78){template_inherits(SubjectDNs,_XFAObject78);var _super100=template_createSuper(SubjectDNs);function SubjectDNs(attributes){var _this100;template_classCallCheck(this,SubjectDNs);_this100=_super100.call(this,TEMPLATE_NS_ID,"subjectDNs",true);_this100.id=attributes.id||"";_this100.type=getStringOption(attributes.type,["optional","required"]);_this100.use=attributes.use||"";_this100.usehref=attributes.usehref||"";_this100.subjectDN=new XFAObjectArray();return _this100;}return template_createClass(SubjectDNs);}(XFAObject);var Submit=/*#__PURE__*/function(_XFAObject79){template_inherits(Submit,_XFAObject79);var _super101=template_createSuper(Submit);function Submit(attributes){var _this101;template_classCallCheck(this,Submit);_this101=_super101.call(this,TEMPLATE_NS_ID,"submit",true);_this101.embedPDF=getInteger({data:attributes.embedPDF,defaultValue:0,validate:function validate(x){return x===1;}});_this101.format=getStringOption(attributes.format,["xdp","formdata","pdf","urlencoded","xfd","xml"]);_this101.id=attributes.id||"";_this101.target=attributes.target||"";_this101.textEncoding=getKeyword({data:attributes.textEncoding?attributes.textEncoding.toLowerCase():"",defaultValue:"",validate:function validate(k){return["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(k)||k.match(/iso-8859-\d{2}/);}});_this101.use=attributes.use||"";_this101.usehref=attributes.usehref||"";_this101.xdpContent=attributes.xdpContent||"";_this101.encrypt=null;_this101.encryptData=new XFAObjectArray();_this101.signData=new XFAObjectArray();return _this101;}return template_createClass(Submit);}(XFAObject);var Template=/*#__PURE__*/function(_XFAObject80){template_inherits(Template,_XFAObject80);var _super102=template_createSuper(Template);function Template(attributes){var _this102;template_classCallCheck(this,Template);_this102=_super102.call(this,TEMPLATE_NS_ID,"template",true);_this102.baseProfile=getStringOption(attributes.baseProfile,["full","interactiveForms"]);_this102.extras=null;_this102.subform=new XFAObjectArray();return _this102;}template_createClass(Template,[{key:$finalize,value:function value(){if(this.subform.children.length===0){warn("XFA - No subforms in template node.");}if(this.subform.children.length>=2){warn("XFA - Several subforms in template node: please file a bug.");}this[$tabIndex]=DEFAULT_TAB_INDEX;}},{key:$isSplittable,value:function value(){return true;}},{key:$searchNode,value:function value(expr,container){if(expr.startsWith("#")){return[this[$ids].get(expr.slice(1))];}return searchNode(this,container,expr,true,true);}},{key:$toPages,value:/*#__PURE__*/template_regeneratorRuntime().mark(function value(){var _root$break,_root$subform$childre,_this103=this;var root,pageAreas,mainHtml,pageArea,breakBefore,breakBeforeTarget,target,pageAreaParent,targetPageArea,leader,trailer,hasSomething,hasSomethingCounter,startIndex,_loop,_ret;return template_regeneratorRuntime().wrap(function value$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(this.subform.children.length){_context6.next=2;break;}return _context6.abrupt("return",HTMLResult.success({name:"div",children:[]}));case 2:this[$extra]={overflowNode:null,firstUnsplittable:null,currentContentArea:null,currentPageArea:null,noLayoutFailure:false,pageNumber:1,pagePosition:"first",oddOrEven:"odd",blankOrNotBlank:"nonBlank",paraStack:[]};root=this.subform.children[0];root.pageSet[$cleanPage]();pageAreas=root.pageSet.pageArea.children;mainHtml={name:"div",children:[]};pageArea=null;breakBefore=null;breakBeforeTarget=null;if(root.breakBefore.children.length>=1){breakBefore=root.breakBefore.children[0];breakBeforeTarget=breakBefore.target;}else if(root.subform.children.length>=1&&root.subform.children[0].breakBefore.children.length>=1){breakBefore=root.subform.children[0].breakBefore.children[0];breakBeforeTarget=breakBefore.target;}else if((_root$break=root.break)!==null&&_root$break!==void 0&&_root$break.beforeTarget){breakBefore=root.break;breakBeforeTarget=breakBefore.beforeTarget;}else if(root.subform.children.length>=1&&(_root$subform$childre=root.subform.children[0].break)!==null&&_root$subform$childre!==void 0&&_root$subform$childre.beforeTarget){breakBefore=root.subform.children[0].break;breakBeforeTarget=breakBefore.beforeTarget;}if(breakBefore){target=this[$searchNode](breakBeforeTarget,breakBefore[$getParent]());if(target instanceof PageArea){pageArea=target;breakBefore[$extra]={};}}if(!pageArea){pageArea=pageAreas[0];}pageArea[$extra]={numberOfUse:1};pageAreaParent=pageArea[$getParent]();pageAreaParent[$extra]={numberOfUse:1,pageIndex:pageAreaParent.pageArea.children.indexOf(pageArea),pageSetIndex:0};leader=null;trailer=null;hasSomething=true;hasSomethingCounter=0;startIndex=0;_loop=/*#__PURE__*/template_regeneratorRuntime().mark(function _loop(){var page,contentAreas,htmlContentAreas,flush,i,ii,contentArea,space,html,_html$html$children,node,_node3,overflowExtra,_target,currentIndex,index;return template_regeneratorRuntime().wrap(function _loop$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(hasSomething){_context5.next=7;break;}mainHtml.children.pop();if(!(++hasSomethingCounter===MAX_EMPTY_PAGES)){_context5.next=5;break;}warn("XFA - Something goes wrong: please file a bug.");return _context5.abrupt("return",{v:mainHtml});case 5:_context5.next=8;break;case 7:hasSomethingCounter=0;case 8:targetPageArea=null;_this103[$extra].currentPageArea=pageArea;page=pageArea[$toHTML]().html;mainHtml.children.push(page);if(leader){_this103[$extra].noLayoutFailure=true;page.children.push(leader[$toHTML](pageArea[$extra].space).html);leader=null;}if(trailer){_this103[$extra].noLayoutFailure=true;page.children.push(trailer[$toHTML](pageArea[$extra].space).html);trailer=null;}contentAreas=pageArea.contentArea.children;htmlContentAreas=page.children.filter(function(node){return node.attributes.class.includes("xfaContentarea");});hasSomething=false;_this103[$extra].firstUnsplittable=null;_this103[$extra].noLayoutFailure=false;flush=function flush(index){var html=root[$flushHTML]();if(html){var _html$children;hasSomething||(hasSomething=((_html$children=html.children)===null||_html$children===void 0?void 0:_html$children.length)>0);htmlContentAreas[index].children.push(html);}};i=startIndex,ii=contentAreas.length;case 21:if(!(i<ii)){_context5.next=56;break;}contentArea=_this103[$extra].currentContentArea=contentAreas[i];space={width:contentArea.w,height:contentArea.h};startIndex=0;if(leader){htmlContentAreas[i].children.push(leader[$toHTML](space).html);leader=null;}if(trailer){htmlContentAreas[i].children.push(trailer[$toHTML](space).html);trailer=null;}html=root[$toHTML](space);if(!html.success){_context5.next=31;break;}if(html.html){hasSomething||(hasSomething=((_html$html$children=html.html.children)===null||_html$html$children===void 0?void 0:_html$html$children.length)>0);htmlContentAreas[i].children.push(html.html);}else if(!hasSomething&&mainHtml.children.length>1){mainHtml.children.pop();}return _context5.abrupt("return",{v:mainHtml});case 31:if(!html.isBreak()){_context5.next=40;break;}node=html.breakNode;flush(i);if(!(node.targetType==="auto")){_context5.next=36;break;}return _context5.abrupt("continue",53);case 36:if(node.leader){leader=_this103[$searchNode](node.leader,node[$getParent]());leader=leader?leader[0]:null;}if(node.trailer){trailer=_this103[$searchNode](node.trailer,node[$getParent]());trailer=trailer?trailer[0]:null;}if(node.targetType==="pageArea"){targetPageArea=node[$extra].target;i=Infinity;}else if(!node[$extra].target){i=node[$extra].index;}else{targetPageArea=node[$extra].target;startIndex=node[$extra].index+1;i=Infinity;}return _context5.abrupt("continue",53);case 40:if(!_this103[$extra].overflowNode){_context5.next=52;break;}_node3=_this103[$extra].overflowNode;_this103[$extra].overflowNode=null;overflowExtra=_node3[$getExtra]();_target=overflowExtra.target;overflowExtra.addLeader=overflowExtra.leader!==null;overflowExtra.addTrailer=overflowExtra.trailer!==null;flush(i);currentIndex=i;i=Infinity;if(_target instanceof PageArea){targetPageArea=_target;}else if(_target instanceof ContentArea){index=contentAreas.indexOf(_target);if(index!==-1){if(index>currentIndex){i=index-1;}else{startIndex=index;}}else{targetPageArea=_target[$getParent]();startIndex=targetPageArea.contentArea.children.indexOf(_target);}}return _context5.abrupt("continue",53);case 52:flush(i);case 53:i++;_context5.next=21;break;case 56:_this103[$extra].pageNumber+=1;if(targetPageArea){if(targetPageArea[$isUsable]()){targetPageArea[$extra].numberOfUse+=1;}else{targetPageArea=null;}}pageArea=targetPageArea||pageArea[$getNextPage]();_context5.next=61;return null;case 61:case"end":return _context5.stop();}},_loop);});case 22:if(false){}return _context6.delegateYield(_loop(),"t0",24);case 24:_ret=_context6.t0;if(!_ret){_context6.next=27;break;}return _context6.abrupt("return",_ret.v);case 27:_context6.next=22;break;case 29:case"end":return _context6.stop();}},value,this);})}]);return Template;}(XFAObject);var Text=/*#__PURE__*/function(_ContentObject9){template_inherits(Text,_ContentObject9);var _super103=template_createSuper(Text);function Text(attributes){var _this104;template_classCallCheck(this,Text);_this104=_super103.call(this,TEMPLATE_NS_ID,"text");_this104.id=attributes.id||"";_this104.maxChars=getInteger({data:attributes.maxChars,defaultValue:0,validate:function validate(x){return x>=0;}});_this104.name=attributes.name||"";_this104.rid=attributes.rid||"";_this104.use=attributes.use||"";_this104.usehref=attributes.usehref||"";return _this104;}template_createClass(Text,[{key:$acceptWhitespace,value:function value(){return true;}},{key:$onChild,value:function value(child){if(child[$namespaceId]===NamespaceIds.xhtml.id){this[$content]=child;return true;}warn("XFA - Invalid content in Text: ".concat(child[$nodeName],"."));return false;}},{key:$onText,value:function value(str){if(this[$content]instanceof XFAObject){return;}template_get(template_getPrototypeOf(Text.prototype),$onText,this).call(this,str);}},{key:$finalize,value:function value(){if(typeof this[$content]==="string"){this[$content]=this[$content].replaceAll("\r\n","\n");}}},{key:$getExtra,value:function value(){if(typeof this[$content]==="string"){return this[$content].split(/[\u2029\u2028\n]/).reduce(function(acc,line){if(line){acc.push(line);}return acc;},[]).join("\n");}return this[$content][$text]();}},{key:$toHTML,value:function value(availableSpace){if(typeof this[$content]==="string"){var html=valueToHtml(this[$content]).html;if(this[$content].includes("\u2029")){html.name="div";html.children=[];this[$content].split("\u2029").map(function(para){return para.split(/[\u2028\n]/).reduce(function(acc,line){acc.push({name:"span",value:line},{name:"br"});return acc;},[]);}).forEach(function(lines){html.children.push({name:"p",children:lines});});}else if(/[\u2028\n]/.test(this[$content])){html.name="div";html.children=[];this[$content].split(/[\u2028\n]/).forEach(function(line){html.children.push({name:"span",value:line},{name:"br"});});}return HTMLResult.success(html);}return this[$content][$toHTML](availableSpace);}}]);return Text;}(ContentObject);var TextEdit=/*#__PURE__*/function(_XFAObject81){template_inherits(TextEdit,_XFAObject81);var _super104=template_createSuper(TextEdit);function TextEdit(attributes){var _this105;template_classCallCheck(this,TextEdit);_this105=_super104.call(this,TEMPLATE_NS_ID,"textEdit",true);_this105.allowRichText=getInteger({data:attributes.allowRichText,defaultValue:0,validate:function validate(x){return x===1;}});_this105.hScrollPolicy=getStringOption(attributes.hScrollPolicy,["auto","off","on"]);_this105.id=attributes.id||"";_this105.multiLine=getInteger({data:attributes.multiLine,defaultValue:"",validate:function validate(x){return x===0||x===1;}});_this105.use=attributes.use||"";_this105.usehref=attributes.usehref||"";_this105.vScrollPolicy=getStringOption(attributes.vScrollPolicy,["auto","off","on"]);_this105.border=null;_this105.comb=null;_this105.extras=null;_this105.margin=null;return _this105;}template_createClass(TextEdit,[{key:$toHTML,value:function value(availableSpace){var style=toStyle(this,"border","font","margin");var html;var field=this[$getParent]()[$getParent]();if(this.multiLine===""){this.multiLine=field instanceof Draw?1:0;}if(this.multiLine===1){var _field$$data5;html={name:"textarea",attributes:{dataId:((_field$$data5=field[$data])===null||_field$$data5===void 0?void 0:_field$$data5[$uid])||field[$uid],fieldId:field[$uid],class:["xfaTextfield"],style:style,"aria-label":ariaLabel(field),"aria-required":false}};}else{var _field$$data6;html={name:"input",attributes:{type:"text",dataId:((_field$$data6=field[$data])===null||_field$$data6===void 0?void 0:_field$$data6[$uid])||field[$uid],fieldId:field[$uid],class:["xfaTextfield"],style:style,"aria-label":ariaLabel(field),"aria-required":false}};}if(isRequired(field)){html.attributes["aria-required"]=true;html.attributes.required=true;}return HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[html]});}}]);return TextEdit;}(XFAObject);var Time=/*#__PURE__*/function(_StringObject11){template_inherits(Time,_StringObject11);var _super105=template_createSuper(Time);function Time(attributes){var _this106;template_classCallCheck(this,Time);_this106=_super105.call(this,TEMPLATE_NS_ID,"time");_this106.id=attributes.id||"";_this106.name=attributes.name||"";_this106.use=attributes.use||"";_this106.usehref=attributes.usehref||"";return _this106;}template_createClass(Time,[{key:$finalize,value:function value(){var date=this[$content].trim();this[$content]=date?new Date(date):null;}},{key:$toHTML,value:function value(availableSpace){return valueToHtml(this[$content]?this[$content].toString():"");}}]);return Time;}(StringObject);var TimeStamp=/*#__PURE__*/function(_XFAObject82){template_inherits(TimeStamp,_XFAObject82);var _super106=template_createSuper(TimeStamp);function TimeStamp(attributes){var _this107;template_classCallCheck(this,TimeStamp);_this107=_super106.call(this,TEMPLATE_NS_ID,"timeStamp");_this107.id=attributes.id||"";_this107.server=attributes.server||"";_this107.type=getStringOption(attributes.type,["optional","required"]);_this107.use=attributes.use||"";_this107.usehref=attributes.usehref||"";return _this107;}return template_createClass(TimeStamp);}(XFAObject);var ToolTip=/*#__PURE__*/function(_StringObject12){template_inherits(ToolTip,_StringObject12);var _super107=template_createSuper(ToolTip);function ToolTip(attributes){var _this108;template_classCallCheck(this,ToolTip);_this108=_super107.call(this,TEMPLATE_NS_ID,"toolTip");_this108.id=attributes.id||"";_this108.rid=attributes.rid||"";_this108.use=attributes.use||"";_this108.usehref=attributes.usehref||"";return _this108;}return template_createClass(ToolTip);}(StringObject);var Traversal=/*#__PURE__*/function(_XFAObject83){template_inherits(Traversal,_XFAObject83);var _super108=template_createSuper(Traversal);function Traversal(attributes){var _this109;template_classCallCheck(this,Traversal);_this109=_super108.call(this,TEMPLATE_NS_ID,"traversal",true);_this109.id=attributes.id||"";_this109.use=attributes.use||"";_this109.usehref=attributes.usehref||"";_this109.extras=null;_this109.traverse=new XFAObjectArray();return _this109;}return template_createClass(Traversal);}(XFAObject);var Traverse=/*#__PURE__*/function(_XFAObject84){template_inherits(Traverse,_XFAObject84);var _super109=template_createSuper(Traverse);function Traverse(attributes){var _this110;template_classCallCheck(this,Traverse);_this110=_super109.call(this,TEMPLATE_NS_ID,"traverse",true);_this110.id=attributes.id||"";_this110.operation=getStringOption(attributes.operation,["next","back","down","first","left","right","up"]);_this110.ref=attributes.ref||"";_this110.use=attributes.use||"";_this110.usehref=attributes.usehref||"";_this110.extras=null;_this110.script=null;return _this110;}template_createClass(Traverse,[{key:"name",get:function get(){return this.operation;}},{key:$isTransparent,value:function value(){return false;}}]);return Traverse;}(XFAObject);var Ui=/*#__PURE__*/function(_XFAObject85){template_inherits(Ui,_XFAObject85);var _super110=template_createSuper(Ui);function Ui(attributes){var _this111;template_classCallCheck(this,Ui);_this111=_super110.call(this,TEMPLATE_NS_ID,"ui",true);_this111.id=attributes.id||"";_this111.use=attributes.use||"";_this111.usehref=attributes.usehref||"";_this111.extras=null;_this111.picture=null;_this111.barcode=null;_this111.button=null;_this111.checkButton=null;_this111.choiceList=null;_this111.dateTimeEdit=null;_this111.defaultUi=null;_this111.imageEdit=null;_this111.numericEdit=null;_this111.passwordEdit=null;_this111.signature=null;_this111.textEdit=null;return _this111;}template_createClass(Ui,[{key:$getExtra,value:function value(){if(this[$extra]===undefined){var _iterator9=template_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var name=_step9.value;if(name==="extras"||name==="picture"){continue;}var obj=this[name];if(!(obj instanceof XFAObject)){continue;}this[$extra]=obj;return obj;}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}this[$extra]=null;}return this[$extra];}},{key:$toHTML,value:function value(availableSpace){var obj=this[$getExtra]();if(obj){return obj[$toHTML](availableSpace);}return HTMLResult.EMPTY;}}]);return Ui;}(XFAObject);var Validate=/*#__PURE__*/function(_XFAObject86){template_inherits(Validate,_XFAObject86);var _super111=template_createSuper(Validate);function Validate(attributes){var _this112;template_classCallCheck(this,Validate);_this112=_super111.call(this,TEMPLATE_NS_ID,"validate",true);_this112.formatTest=getStringOption(attributes.formatTest,["warning","disabled","error"]);_this112.id=attributes.id||"";_this112.nullTest=getStringOption(attributes.nullTest,["disabled","error","warning"]);_this112.scriptTest=getStringOption(attributes.scriptTest,["error","disabled","warning"]);_this112.use=attributes.use||"";_this112.usehref=attributes.usehref||"";_this112.extras=null;_this112.message=null;_this112.picture=null;_this112.script=null;return _this112;}return template_createClass(Validate);}(XFAObject);var Value=/*#__PURE__*/function(_XFAObject87){template_inherits(Value,_XFAObject87);var _super112=template_createSuper(Value);function Value(attributes){var _this113;template_classCallCheck(this,Value);_this113=_super112.call(this,TEMPLATE_NS_ID,"value",true);_this113.id=attributes.id||"";_this113.override=getInteger({data:attributes.override,defaultValue:0,validate:function validate(x){return x===1;}});_this113.relevant=getRelevant(attributes.relevant);_this113.use=attributes.use||"";_this113.usehref=attributes.usehref||"";_this113.arc=null;_this113.boolean=null;_this113.date=null;_this113.dateTime=null;_this113.decimal=null;_this113.exData=null;_this113.float=null;_this113.image=null;_this113.integer=null;_this113.line=null;_this113.rectangle=null;_this113.text=null;_this113.time=null;return _this113;}template_createClass(Value,[{key:$setValue,value:function(_value7){function value(_x5){return _value7.apply(this,arguments);}value.toString=function(){return _value7.toString();};return value;}(function(value){var parent=this[$getParent]();if(parent instanceof Field){var _parent$ui;if((_parent$ui=parent.ui)!==null&&_parent$ui!==void 0&&_parent$ui.imageEdit){if(!this.image){this.image=new Image({});this[$appendChild](this.image);}this.image[$content]=value[$content];return;}}var valueName=value[$nodeName];if(this[valueName]!==null){this[valueName][$content]=value[$content];return;}var _iterator10=template_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var name=_step10.value;var obj=this[name];if(obj instanceof XFAObject){this[name]=null;this[$removeChild](obj);}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}this[value[$nodeName]]=value;this[$appendChild](value);})},{key:$text,value:function value(){if(this.exData){if(typeof this.exData[$content]==="string"){return this.exData[$content].trim();}return this.exData[$content][$text]().trim();}var _iterator11=template_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var name=_step11.value;if(name==="image"){continue;}var obj=this[name];if(obj instanceof XFAObject){return(obj[$content]||"").toString().trim();}}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}return null;}},{key:$toHTML,value:function value(availableSpace){var _iterator12=template_createForOfIteratorHelper(Object.getOwnPropertyNames(this)),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var name=_step12.value;var obj=this[name];if(!(obj instanceof XFAObject)){continue;}return obj[$toHTML](availableSpace);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}return HTMLResult.EMPTY;}}]);return Value;}(XFAObject);var Variables=/*#__PURE__*/function(_XFAObject88){template_inherits(Variables,_XFAObject88);var _super113=template_createSuper(Variables);function Variables(attributes){var _this114;template_classCallCheck(this,Variables);_this114=_super113.call(this,TEMPLATE_NS_ID,"variables",true);_this114.id=attributes.id||"";_this114.use=attributes.use||"";_this114.usehref=attributes.usehref||"";_this114.boolean=new XFAObjectArray();_this114.date=new XFAObjectArray();_this114.dateTime=new XFAObjectArray();_this114.decimal=new XFAObjectArray();_this114.exData=new XFAObjectArray();_this114.float=new XFAObjectArray();_this114.image=new XFAObjectArray();_this114.integer=new XFAObjectArray();_this114.manifest=new XFAObjectArray();_this114.script=new XFAObjectArray();_this114.text=new XFAObjectArray();_this114.time=new XFAObjectArray();return _this114;}template_createClass(Variables,[{key:$isTransparent,value:function value(){return true;}}]);return Variables;}(XFAObject);var TemplateNamespace=/*#__PURE__*/function(){function TemplateNamespace(){template_classCallCheck(this,TemplateNamespace);}template_createClass(TemplateNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(TemplateNamespace.hasOwnProperty(name)){var node=TemplateNamespace[name](attributes);node[$setSetAttributes](attributes);return node;}return undefined;}},{key:"appearanceFilter",value:function appearanceFilter(attrs){return new AppearanceFilter(attrs);}},{key:"arc",value:function arc(attrs){return new Arc(attrs);}},{key:"area",value:function area(attrs){return new Area(attrs);}},{key:"assist",value:function assist(attrs){return new Assist(attrs);}},{key:"barcode",value:function barcode(attrs){return new Barcode(attrs);}},{key:"bind",value:function bind(attrs){return new Bind(attrs);}},{key:"bindItems",value:function bindItems(attrs){return new BindItems(attrs);}},{key:"bookend",value:function bookend(attrs){return new Bookend(attrs);}},{key:"boolean",value:function boolean(attrs){return new BooleanElement(attrs);}},{key:"border",value:function border(attrs){return new Border(attrs);}},{key:"break",value:function _break(attrs){return new Break(attrs);}},{key:"breakAfter",value:function breakAfter(attrs){return new BreakAfter(attrs);}},{key:"breakBefore",value:function breakBefore(attrs){return new BreakBefore(attrs);}},{key:"button",value:function button(attrs){return new Button(attrs);}},{key:"calculate",value:function calculate(attrs){return new Calculate(attrs);}},{key:"caption",value:function caption(attrs){return new Caption(attrs);}},{key:"certificate",value:function certificate(attrs){return new Certificate(attrs);}},{key:"certificates",value:function certificates(attrs){return new Certificates(attrs);}},{key:"checkButton",value:function checkButton(attrs){return new CheckButton(attrs);}},{key:"choiceList",value:function choiceList(attrs){return new ChoiceList(attrs);}},{key:"color",value:function color(attrs){return new Color(attrs);}},{key:"comb",value:function comb(attrs){return new Comb(attrs);}},{key:"connect",value:function connect(attrs){return new Connect(attrs);}},{key:"contentArea",value:function contentArea(attrs){return new ContentArea(attrs);}},{key:"corner",value:function corner(attrs){return new Corner(attrs);}},{key:"date",value:function date(attrs){return new DateElement(attrs);}},{key:"dateTime",value:function dateTime(attrs){return new DateTime(attrs);}},{key:"dateTimeEdit",value:function dateTimeEdit(attrs){return new DateTimeEdit(attrs);}},{key:"decimal",value:function decimal(attrs){return new Decimal(attrs);}},{key:"defaultUi",value:function defaultUi(attrs){return new DefaultUi(attrs);}},{key:"desc",value:function desc(attrs){return new Desc(attrs);}},{key:"digestMethod",value:function digestMethod(attrs){return new DigestMethod(attrs);}},{key:"digestMethods",value:function digestMethods(attrs){return new DigestMethods(attrs);}},{key:"draw",value:function draw(attrs){return new Draw(attrs);}},{key:"edge",value:function edge(attrs){return new Edge(attrs);}},{key:"encoding",value:function encoding(attrs){return new Encoding(attrs);}},{key:"encodings",value:function encodings(attrs){return new Encodings(attrs);}},{key:"encrypt",value:function encrypt(attrs){return new Encrypt(attrs);}},{key:"encryptData",value:function encryptData(attrs){return new EncryptData(attrs);}},{key:"encryption",value:function encryption(attrs){return new Encryption(attrs);}},{key:"encryptionMethod",value:function encryptionMethod(attrs){return new EncryptionMethod(attrs);}},{key:"encryptionMethods",value:function encryptionMethods(attrs){return new EncryptionMethods(attrs);}},{key:"event",value:function event(attrs){return new Event(attrs);}},{key:"exData",value:function exData(attrs){return new ExData(attrs);}},{key:"exObject",value:function exObject(attrs){return new ExObject(attrs);}},{key:"exclGroup",value:function exclGroup(attrs){return new ExclGroup(attrs);}},{key:"execute",value:function execute(attrs){return new Execute(attrs);}},{key:"extras",value:function extras(attrs){return new Extras(attrs);}},{key:"field",value:function field(attrs){return new Field(attrs);}},{key:"fill",value:function fill(attrs){return new Fill(attrs);}},{key:"filter",value:function filter(attrs){return new Filter(attrs);}},{key:"float",value:function float(attrs){return new Float(attrs);}},{key:"font",value:function font(attrs){return new template_Font(attrs);}},{key:"format",value:function format(attrs){return new Format(attrs);}},{key:"handler",value:function handler(attrs){return new Handler(attrs);}},{key:"hyphenation",value:function hyphenation(attrs){return new Hyphenation(attrs);}},{key:"image",value:function image(attrs){return new Image(attrs);}},{key:"imageEdit",value:function imageEdit(attrs){return new ImageEdit(attrs);}},{key:"integer",value:function integer(attrs){return new Integer(attrs);}},{key:"issuers",value:function issuers(attrs){return new Issuers(attrs);}},{key:"items",value:function items(attrs){return new Items(attrs);}},{key:"keep",value:function keep(attrs){return new Keep(attrs);}},{key:"keyUsage",value:function keyUsage(attrs){return new KeyUsage(attrs);}},{key:"line",value:function line(attrs){return new Line(attrs);}},{key:"linear",value:function linear(attrs){return new Linear(attrs);}},{key:"lockDocument",value:function lockDocument(attrs){return new LockDocument(attrs);}},{key:"manifest",value:function manifest(attrs){return new Manifest(attrs);}},{key:"margin",value:function margin(attrs){return new Margin(attrs);}},{key:"mdp",value:function mdp(attrs){return new Mdp(attrs);}},{key:"medium",value:function medium(attrs){return new Medium(attrs);}},{key:"message",value:function message(attrs){return new Message(attrs);}},{key:"numericEdit",value:function numericEdit(attrs){return new NumericEdit(attrs);}},{key:"occur",value:function occur(attrs){return new Occur(attrs);}},{key:"oid",value:function oid(attrs){return new Oid(attrs);}},{key:"oids",value:function oids(attrs){return new Oids(attrs);}},{key:"overflow",value:function overflow(attrs){return new Overflow(attrs);}},{key:"pageArea",value:function pageArea(attrs){return new PageArea(attrs);}},{key:"pageSet",value:function pageSet(attrs){return new PageSet(attrs);}},{key:"para",value:function para(attrs){return new Para(attrs);}},{key:"passwordEdit",value:function passwordEdit(attrs){return new PasswordEdit(attrs);}},{key:"pattern",value:function pattern(attrs){return new template_Pattern(attrs);}},{key:"picture",value:function picture(attrs){return new Picture(attrs);}},{key:"proto",value:function proto(attrs){return new Proto(attrs);}},{key:"radial",value:function radial(attrs){return new Radial(attrs);}},{key:"reason",value:function reason(attrs){return new Reason(attrs);}},{key:"reasons",value:function reasons(attrs){return new Reasons(attrs);}},{key:"rectangle",value:function rectangle(attrs){return new Rectangle(attrs);}},{key:"ref",value:function ref(attrs){return new RefElement(attrs);}},{key:"script",value:function script(attrs){return new Script(attrs);}},{key:"setProperty",value:function setProperty(attrs){return new SetProperty(attrs);}},{key:"signData",value:function signData(attrs){return new SignData(attrs);}},{key:"signature",value:function signature(attrs){return new Signature(attrs);}},{key:"signing",value:function signing(attrs){return new Signing(attrs);}},{key:"solid",value:function solid(attrs){return new Solid(attrs);}},{key:"speak",value:function speak(attrs){return new Speak(attrs);}},{key:"stipple",value:function stipple(attrs){return new Stipple(attrs);}},{key:"subform",value:function subform(attrs){return new Subform(attrs);}},{key:"subformSet",value:function subformSet(attrs){return new SubformSet(attrs);}},{key:"subjectDN",value:function subjectDN(attrs){return new SubjectDN(attrs);}},{key:"subjectDNs",value:function subjectDNs(attrs){return new SubjectDNs(attrs);}},{key:"submit",value:function submit(attrs){return new Submit(attrs);}},{key:"template",value:function template(attrs){return new Template(attrs);}},{key:"text",value:function text(attrs){return new Text(attrs);}},{key:"textEdit",value:function textEdit(attrs){return new TextEdit(attrs);}},{key:"time",value:function time(attrs){return new Time(attrs);}},{key:"timeStamp",value:function timeStamp(attrs){return new TimeStamp(attrs);}},{key:"toolTip",value:function toolTip(attrs){return new ToolTip(attrs);}},{key:"traversal",value:function traversal(attrs){return new Traversal(attrs);}},{key:"traverse",value:function traverse(attrs){return new Traverse(attrs);}},{key:"ui",value:function ui(attrs){return new Ui(attrs);}},{key:"validate",value:function validate(attrs){return new Validate(attrs);}},{key:"value",value:function value(attrs){return new Value(attrs);}},{key:"variables",value:function variables(attrs){return new Variables(attrs);}}]);return TemplateNamespace;}();
;// CONCATENATED MODULE: ./src/core/xfa/bind.js
function bind_typeof(o){"@babel/helpers - typeof";return bind_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},bind_typeof(o);}function bind_slicedToArray(arr,i){return bind_arrayWithHoles(arr)||bind_iterableToArrayLimit(arr,i)||bind_unsupportedIterableToArray(arr,i)||bind_nonIterableRest();}function bind_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function bind_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function bind_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function bind_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=bind_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function bind_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return bind_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bind_arrayLikeToArray(o,minLen);}function bind_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function bind_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function bind_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,bind_toPropertyKey(descriptor.key),descriptor);}}function bind_createClass(Constructor,protoProps,staticProps){if(protoProps)bind_defineProperties(Constructor.prototype,protoProps);if(staticProps)bind_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function bind_toPropertyKey(arg){var key=bind_toPrimitive(arg,"string");return bind_typeof(key)==="symbol"?key:String(key);}function bind_toPrimitive(input,hint){if(bind_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(bind_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var bind_NS_DATASETS=NamespaceIds.datasets.id;function createText(content){var node=new Text({});node[$content]=content;return node;}var Binder=/*#__PURE__*/function(){function Binder(root){var _root$datasets;bind_classCallCheck(this,Binder);this.root=root;this.datasets=root.datasets;this.data=((_root$datasets=root.datasets)===null||_root$datasets===void 0?void 0:_root$datasets.data)||new XmlObject(NamespaceIds.datasets.id,"data");this.emptyMerge=this.data[$getChildren]().length===0;this.root.form=this.form=root.template[$clone]();}bind_createClass(Binder,[{key:"_isConsumeData",value:function _isConsumeData(){return!this.emptyMerge&&this._mergeMode;}},{key:"_isMatchTemplate",value:function _isMatchTemplate(){return!this._isConsumeData();}},{key:"bind",value:function bind(){this._bindElement(this.form,this.data);return this.form;}},{key:"getData",value:function getData(){return this.data;}},{key:"_bindValue",value:function _bindValue(formNode,data,picture){formNode[$data]=data;if(formNode[$hasSettableValue]()){var _formNode$ui;if(data[$isDataValue]()){var value=data[$getDataValue]();formNode[$setValue](createText(value));}else if(formNode instanceof Field&&((_formNode$ui=formNode.ui)===null||_formNode$ui===void 0||(_formNode$ui=_formNode$ui.choiceList)===null||_formNode$ui===void 0?void 0:_formNode$ui.open)==="multiSelect"){var _value=data[$getChildren]().map(function(child){return child[$content].trim();}).join("\n");formNode[$setValue](createText(_value));}else if(this._isConsumeData()){warn("XFA - Nodes haven't the same type.");}}else if(!data[$isDataValue]()||this._isMatchTemplate()){this._bindElement(formNode,data);}else{warn("XFA - Nodes haven't the same type.");}}},{key:"_findDataByNameToConsume",value:function _findDataByNameToConsume(name,isValue,dataNode,global){var _match;if(!name){return null;}var generator,match;for(var i=0;i<3;i++){generator=dataNode[$getRealChildrenByNameIt](name,false,true);while(true){match=generator.next().value;if(!match){break;}if(isValue===match[$isDataValue]()){return match;}}if(dataNode[$namespaceId]===NamespaceIds.datasets.id&&dataNode[$nodeName]==="data"){break;}dataNode=dataNode[$getParent]();}if(!global){return null;}generator=this.data[$getRealChildrenByNameIt](name,true,false);match=generator.next().value;if(match){return match;}generator=this.data[$getAttributeIt](name,true);match=generator.next().value;if((_match=match)!==null&&_match!==void 0&&_match[$isDataValue]()){return match;}return null;}},{key:"_setProperties",value:function _setProperties(formNode,dataNode){if(!formNode.hasOwnProperty("setProperty")){return;}var _iterator=bind_createForOfIteratorHelper(formNode.setProperty.children),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_step.value,ref=_step$value.ref,target=_step$value.target,connection=_step$value.connection;if(connection){continue;}if(!ref){continue;}var nodes=searchNode(this.root,dataNode,ref,false,false);if(!nodes){warn("XFA - Invalid reference: ".concat(ref,"."));continue;}var _nodes=bind_slicedToArray(nodes,1),node=_nodes[0];if(!node[$isDescendent](this.data)){warn("XFA - Invalid node: must be a data node.");continue;}var targetNodes=searchNode(this.root,formNode,target,false,false);if(!targetNodes){warn("XFA - Invalid target: ".concat(target,"."));continue;}var _targetNodes=bind_slicedToArray(targetNodes,1),targetNode=_targetNodes[0];if(!targetNode[$isDescendent](formNode)){warn("XFA - Invalid target: must be a property or subproperty.");continue;}var targetParent=targetNode[$getParent]();if(targetNode instanceof SetProperty||targetParent instanceof SetProperty){warn("XFA - Invalid target: cannot be a setProperty or one of its properties.");continue;}if(targetNode instanceof BindItems||targetParent instanceof BindItems){warn("XFA - Invalid target: cannot be a bindItems or one of its properties.");continue;}var content=node[$text]();var name=targetNode[$nodeName];if(targetNode instanceof XFAAttribute){var attrs=Object.create(null);attrs[name]=content;var obj=Reflect.construct(Object.getPrototypeOf(targetParent).constructor,[attrs]);targetParent[name]=obj[name];continue;}if(!targetNode.hasOwnProperty($content)){warn("XFA - Invalid node to use in setProperty");continue;}targetNode[$data]=node;targetNode[$content]=content;targetNode[$finalize]();}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:"_bindItems",value:function _bindItems(formNode,dataNode){if(!formNode.hasOwnProperty("items")||!formNode.hasOwnProperty("bindItems")||formNode.bindItems.isEmpty()){return;}var _iterator2=bind_createForOfIteratorHelper(formNode.items.children),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var item=_step2.value;formNode[$removeChild](item);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}formNode.items.clear();var labels=new Items({});var values=new Items({});formNode[$appendChild](labels);formNode.items.push(labels);formNode[$appendChild](values);formNode.items.push(values);var _iterator3=bind_createForOfIteratorHelper(formNode.bindItems.children),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step3$value=_step3.value,ref=_step3$value.ref,labelRef=_step3$value.labelRef,valueRef=_step3$value.valueRef,connection=_step3$value.connection;if(connection){continue;}if(!ref){continue;}var nodes=searchNode(this.root,dataNode,ref,false,false);if(!nodes){warn("XFA - Invalid reference: ".concat(ref,"."));continue;}var _iterator4=bind_createForOfIteratorHelper(nodes),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var node=_step4.value;if(!node[$isDescendent](this.datasets)){warn("XFA - Invalid ref (".concat(ref,"): must be a datasets child."));continue;}var labelNodes=searchNode(this.root,node,labelRef,true,false);if(!labelNodes){warn("XFA - Invalid label: ".concat(labelRef,"."));continue;}var _labelNodes=bind_slicedToArray(labelNodes,1),labelNode=_labelNodes[0];if(!labelNode[$isDescendent](this.datasets)){warn("XFA - Invalid label: must be a datasets child.");continue;}var valueNodes=searchNode(this.root,node,valueRef,true,false);if(!valueNodes){warn("XFA - Invalid value: ".concat(valueRef,"."));continue;}var _valueNodes=bind_slicedToArray(valueNodes,1),valueNode=_valueNodes[0];if(!valueNode[$isDescendent](this.datasets)){warn("XFA - Invalid value: must be a datasets child.");continue;}var label=createText(labelNode[$text]());var value=createText(valueNode[$text]());labels[$appendChild](label);labels.text.push(label);values[$appendChild](value);values.text.push(value);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}},{key:"_bindOccurrences",value:function _bindOccurrences(formNode,matches,picture){var baseClone;if(matches.length>1){baseClone=formNode[$clone]();baseClone[$removeChild](baseClone.occur);baseClone.occur=null;}this._bindValue(formNode,matches[0],picture);this._setProperties(formNode,matches[0]);this._bindItems(formNode,matches[0]);if(matches.length===1){return;}var parent=formNode[$getParent]();var name=formNode[$nodeName];var pos=parent[$indexOf](formNode);for(var i=1,ii=matches.length;i<ii;i++){var match=matches[i];var clone=baseClone[$clone]();parent[name].push(clone);parent[$insertAt](pos+i,clone);this._bindValue(clone,match,picture);this._setProperties(clone,match);this._bindItems(clone,match);}}},{key:"_createOccurrences",value:function _createOccurrences(formNode){if(!this.emptyMerge){return;}var occur=formNode.occur;if(!occur||occur.initial<=1){return;}var parent=formNode[$getParent]();var name=formNode[$nodeName];if(!(parent[name]instanceof XFAObjectArray)){return;}var currentNumber;if(formNode.name){currentNumber=parent[name].children.filter(function(e){return e.name===formNode.name;}).length;}else{currentNumber=parent[name].children.length;}var pos=parent[$indexOf](formNode)+1;var ii=occur.initial-currentNumber;if(ii){var nodeClone=formNode[$clone]();nodeClone[$removeChild](nodeClone.occur);nodeClone.occur=null;parent[name].push(nodeClone);parent[$insertAt](pos,nodeClone);for(var i=1;i<ii;i++){var clone=nodeClone[$clone]();parent[name].push(clone);parent[$insertAt](pos+i,clone);}}}},{key:"_getOccurInfo",value:function _getOccurInfo(formNode){var name=formNode.name,occur=formNode.occur;if(!occur||!name){return[1,1];}var max=occur.max===-1?Infinity:occur.max;return[occur.min,max];}},{key:"_setAndBind",value:function _setAndBind(formNode,dataNode){this._setProperties(formNode,dataNode);this._bindItems(formNode,dataNode);this._bindElement(formNode,dataNode);}},{key:"_bindElement",value:function _bindElement(formNode,dataNode){var uselessNodes=[];this._createOccurrences(formNode);var _iterator5=bind_createForOfIteratorHelper(formNode[$getChildren]()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var child=_step5.value;if(child[$data]){continue;}if(this._mergeMode===undefined&&child[$nodeName]==="subform"){this._mergeMode=child.mergeMode==="consumeData";var dataChildren=dataNode[$getChildren]();if(dataChildren.length>0){this._bindOccurrences(child,[dataChildren[0]],null);}else if(this.emptyMerge){var nsId=dataNode[$namespaceId]===bind_NS_DATASETS?-1:dataNode[$namespaceId];var dataChild=child[$data]=new XmlObject(nsId,child.name||"root");dataNode[$appendChild](dataChild);this._bindElement(child,dataChild);}continue;}if(!child[$isBindable]()){continue;}var global=false;var picture=null;var ref=null;var match=null;if(child.bind){switch(child.bind.match){case"none":this._setAndBind(child,dataNode);continue;case"global":global=true;break;case"dataRef":if(!child.bind.ref){warn("XFA - ref is empty in node ".concat(child[$nodeName],"."));this._setAndBind(child,dataNode);continue;}ref=child.bind.ref;break;default:break;}if(child.bind.picture){picture=child.bind.picture[$content];}}var _this$_getOccurInfo=this._getOccurInfo(child),_this$_getOccurInfo2=bind_slicedToArray(_this$_getOccurInfo,2),min=_this$_getOccurInfo2[0],max=_this$_getOccurInfo2[1];if(ref){match=searchNode(this.root,dataNode,ref,true,false);if(match===null){match=createDataNode(this.data,dataNode,ref);if(!match){continue;}if(this._isConsumeData()){match[$consumed]=true;}this._setAndBind(child,match);continue;}else{if(this._isConsumeData()){match=match.filter(function(node){return!node[$consumed];});}if(match.length>max){match=match.slice(0,max);}else if(match.length===0){match=null;}if(match&&this._isConsumeData()){match.forEach(function(node){node[$consumed]=true;});}}}else{if(!child.name){this._setAndBind(child,dataNode);continue;}if(this._isConsumeData()){var matches=[];while(matches.length<max){var found=this._findDataByNameToConsume(child.name,child[$hasSettableValue](),dataNode,global);if(!found){break;}found[$consumed]=true;matches.push(found);}match=matches.length>0?matches:null;}else{match=dataNode[$getRealChildrenByNameIt](child.name,false,this.emptyMerge).next().value;if(!match){if(min===0){uselessNodes.push(child);continue;}var _nsId=dataNode[$namespaceId]===bind_NS_DATASETS?-1:dataNode[$namespaceId];match=child[$data]=new XmlObject(_nsId,child.name);if(this.emptyMerge){match[$consumed]=true;}dataNode[$appendChild](match);this._setAndBind(child,match);continue;}if(this.emptyMerge){match[$consumed]=true;}match=[match];}}if(match){this._bindOccurrences(child,match,picture);}else if(min>0){this._setAndBind(child,dataNode);}else{uselessNodes.push(child);}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}uselessNodes.forEach(function(node){return node[$getParent]()[$removeChild](node);});}}]);return Binder;}();
;// CONCATENATED MODULE: ./src/core/xfa/data.js
function data_typeof(o){"@babel/helpers - typeof";return data_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},data_typeof(o);}function data_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=data_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function data_slicedToArray(arr,i){return data_arrayWithHoles(arr)||data_iterableToArrayLimit(arr,i)||data_unsupportedIterableToArray(arr,i)||data_nonIterableRest();}function data_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function data_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return data_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return data_arrayLikeToArray(o,minLen);}function data_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function data_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function data_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function data_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function data_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,data_toPropertyKey(descriptor.key),descriptor);}}function data_createClass(Constructor,protoProps,staticProps){if(protoProps)data_defineProperties(Constructor.prototype,protoProps);if(staticProps)data_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function data_toPropertyKey(arg){var key=data_toPrimitive(arg,"string");return data_typeof(key)==="symbol"?key:String(key);}function data_toPrimitive(input,hint){if(data_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(data_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var DataHandler=/*#__PURE__*/function(){function DataHandler(root,data){data_classCallCheck(this,DataHandler);this.data=data;this.dataset=root.datasets||null;}data_createClass(DataHandler,[{key:"serialize",value:function serialize(storage){var stack=[[-1,this.data[$getChildren]()]];while(stack.length>0){var last=stack.at(-1);var _last=data_slicedToArray(last,2),i=_last[0],children=_last[1];if(i+1===children.length){stack.pop();continue;}var child=children[++last[0]];var storageEntry=storage.get(child[$uid]);if(storageEntry){child[$setValue](storageEntry);}else{var attributes=child[$getAttributes]();var _iterator=data_createForOfIteratorHelper(attributes.values()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;var entry=storage.get(value[$uid]);if(entry){value[$setValue](entry);break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}var nodes=child[$getChildren]();if(nodes.length>0){stack.push([-1,nodes]);}}var buf=["<xfa:datasets xmlns:xfa=\"http://www.xfa.org/schema/xfa-data/1.0/\">"];if(this.dataset){var _iterator2=data_createForOfIteratorHelper(this.dataset[$getChildren]()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _child=_step2.value;if(_child[$nodeName]!=="data"){_child[$toString](buf);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}this.data[$toString](buf);buf.push("</xfa:datasets>");return buf.join("");}}]);return DataHandler;}();
;// CONCATENATED MODULE: ./src/core/xfa/config.js
function config_typeof(o){"@babel/helpers - typeof";return config_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},config_typeof(o);}function config_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=config_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function config_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return config_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return config_arrayLikeToArray(o,minLen);}function config_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function config_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,config_toPropertyKey(descriptor.key),descriptor);}}function config_createClass(Constructor,protoProps,staticProps){if(protoProps)config_defineProperties(Constructor.prototype,protoProps);if(staticProps)config_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function config_toPropertyKey(arg){var key=config_toPrimitive(arg,"string");return config_typeof(key)==="symbol"?key:String(key);}function config_toPrimitive(input,hint){if(config_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(config_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function config_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function config_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)config_setPrototypeOf(subClass,superClass);}function config_setPrototypeOf(o,p){config_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return config_setPrototypeOf(o,p);}function config_createSuper(Derived){var hasNativeReflectConstruct=config_isNativeReflectConstruct();return function _createSuperInternal(){var Super=config_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=config_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return config_possibleConstructorReturn(this,result);};}function config_possibleConstructorReturn(self,call){if(call&&(config_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return config_assertThisInitialized(self);}function config_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function config_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function config_getPrototypeOf(o){config_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return config_getPrototypeOf(o);}var CONFIG_NS_ID=NamespaceIds.config.id;var Acrobat=/*#__PURE__*/function(_XFAObject){config_inherits(Acrobat,_XFAObject);var _super=config_createSuper(Acrobat);function Acrobat(attributes){var _this;config_classCallCheck(this,Acrobat);_this=_super.call(this,CONFIG_NS_ID,"acrobat",true);_this.acrobat7=null;_this.autoSave=null;_this.common=null;_this.validate=null;_this.validateApprovalSignatures=null;_this.submitUrl=new XFAObjectArray();return _this;}return config_createClass(Acrobat);}(XFAObject);var Acrobat7=/*#__PURE__*/function(_XFAObject2){config_inherits(Acrobat7,_XFAObject2);var _super2=config_createSuper(Acrobat7);function Acrobat7(attributes){var _this2;config_classCallCheck(this,Acrobat7);_this2=_super2.call(this,CONFIG_NS_ID,"acrobat7",true);_this2.dynamicRender=null;return _this2;}return config_createClass(Acrobat7);}(XFAObject);var _ADBE_JSConsole=/*#__PURE__*/function(_OptionObject){config_inherits(ADBE_JSConsole,_OptionObject);var _super3=config_createSuper(ADBE_JSConsole);function ADBE_JSConsole(attributes){config_classCallCheck(this,ADBE_JSConsole);return _super3.call(this,CONFIG_NS_ID,"ADBE_JSConsole",["delegate","Enable","Disable"]);}return config_createClass(ADBE_JSConsole);}(OptionObject);var _ADBE_JSDebugger=/*#__PURE__*/function(_OptionObject2){config_inherits(ADBE_JSDebugger,_OptionObject2);var _super4=config_createSuper(ADBE_JSDebugger);function ADBE_JSDebugger(attributes){config_classCallCheck(this,ADBE_JSDebugger);return _super4.call(this,CONFIG_NS_ID,"ADBE_JSDebugger",["delegate","Enable","Disable"]);}return config_createClass(ADBE_JSDebugger);}(OptionObject);var AddSilentPrint=/*#__PURE__*/function(_Option){config_inherits(AddSilentPrint,_Option);var _super5=config_createSuper(AddSilentPrint);function AddSilentPrint(attributes){config_classCallCheck(this,AddSilentPrint);return _super5.call(this,CONFIG_NS_ID,"addSilentPrint");}return config_createClass(AddSilentPrint);}(Option01);var AddViewerPreferences=/*#__PURE__*/function(_Option2){config_inherits(AddViewerPreferences,_Option2);var _super6=config_createSuper(AddViewerPreferences);function AddViewerPreferences(attributes){config_classCallCheck(this,AddViewerPreferences);return _super6.call(this,CONFIG_NS_ID,"addViewerPreferences");}return config_createClass(AddViewerPreferences);}(Option01);var AdjustData=/*#__PURE__*/function(_Option3){config_inherits(AdjustData,_Option3);var _super7=config_createSuper(AdjustData);function AdjustData(attributes){config_classCallCheck(this,AdjustData);return _super7.call(this,CONFIG_NS_ID,"adjustData");}return config_createClass(AdjustData);}(Option10);var AdobeExtensionLevel=/*#__PURE__*/function(_IntegerObject){config_inherits(AdobeExtensionLevel,_IntegerObject);var _super8=config_createSuper(AdobeExtensionLevel);function AdobeExtensionLevel(attributes){config_classCallCheck(this,AdobeExtensionLevel);return _super8.call(this,CONFIG_NS_ID,"adobeExtensionLevel",0,function(n){return n>=1&&n<=8;});}return config_createClass(AdobeExtensionLevel);}(IntegerObject);var Agent=/*#__PURE__*/function(_XFAObject3){config_inherits(Agent,_XFAObject3);var _super9=config_createSuper(Agent);function Agent(attributes){var _this3;config_classCallCheck(this,Agent);_this3=_super9.call(this,CONFIG_NS_ID,"agent",true);_this3.name=attributes.name?attributes.name.trim():"";_this3.common=new XFAObjectArray();return _this3;}return config_createClass(Agent);}(XFAObject);var AlwaysEmbed=/*#__PURE__*/function(_ContentObject){config_inherits(AlwaysEmbed,_ContentObject);var _super10=config_createSuper(AlwaysEmbed);function AlwaysEmbed(attributes){config_classCallCheck(this,AlwaysEmbed);return _super10.call(this,CONFIG_NS_ID,"alwaysEmbed");}return config_createClass(AlwaysEmbed);}(ContentObject);var Amd=/*#__PURE__*/function(_StringObject){config_inherits(Amd,_StringObject);var _super11=config_createSuper(Amd);function Amd(attributes){config_classCallCheck(this,Amd);return _super11.call(this,CONFIG_NS_ID,"amd");}return config_createClass(Amd);}(StringObject);var config_Area=/*#__PURE__*/function(_XFAObject4){config_inherits(Area,_XFAObject4);var _super12=config_createSuper(Area);function Area(attributes){var _this4;config_classCallCheck(this,Area);_this4=_super12.call(this,CONFIG_NS_ID,"area");_this4.level=getInteger({data:attributes.level,defaultValue:0,validate:function validate(n){return n>=1&&n<=3;}});_this4.name=getStringOption(attributes.name,["","barcode","coreinit","deviceDriver","font","general","layout","merge","script","signature","sourceSet","templateCache"]);return _this4;}return config_createClass(Area);}(XFAObject);var Attributes=/*#__PURE__*/function(_OptionObject3){config_inherits(Attributes,_OptionObject3);var _super13=config_createSuper(Attributes);function Attributes(attributes){config_classCallCheck(this,Attributes);return _super13.call(this,CONFIG_NS_ID,"attributes",["preserve","delegate","ignore"]);}return config_createClass(Attributes);}(OptionObject);var AutoSave=/*#__PURE__*/function(_OptionObject4){config_inherits(AutoSave,_OptionObject4);var _super14=config_createSuper(AutoSave);function AutoSave(attributes){config_classCallCheck(this,AutoSave);return _super14.call(this,CONFIG_NS_ID,"autoSave",["disabled","enabled"]);}return config_createClass(AutoSave);}(OptionObject);var Base=/*#__PURE__*/function(_StringObject2){config_inherits(Base,_StringObject2);var _super15=config_createSuper(Base);function Base(attributes){config_classCallCheck(this,Base);return _super15.call(this,CONFIG_NS_ID,"base");}return config_createClass(Base);}(StringObject);var BatchOutput=/*#__PURE__*/function(_XFAObject5){config_inherits(BatchOutput,_XFAObject5);var _super16=config_createSuper(BatchOutput);function BatchOutput(attributes){var _this5;config_classCallCheck(this,BatchOutput);_this5=_super16.call(this,CONFIG_NS_ID,"batchOutput");_this5.format=getStringOption(attributes.format,["none","concat","zip","zipCompress"]);return _this5;}return config_createClass(BatchOutput);}(XFAObject);var BehaviorOverride=/*#__PURE__*/function(_ContentObject2){config_inherits(BehaviorOverride,_ContentObject2);var _super17=config_createSuper(BehaviorOverride);function BehaviorOverride(attributes){config_classCallCheck(this,BehaviorOverride);return _super17.call(this,CONFIG_NS_ID,"behaviorOverride");}config_createClass(BehaviorOverride,[{key:$finalize,value:function value(){this[$content]=new Map(this[$content].trim().split(/\s+/).filter(function(x){return x.includes(":");}).map(function(x){return x.split(":",2);}));}}]);return BehaviorOverride;}(ContentObject);var Cache=/*#__PURE__*/function(_XFAObject6){config_inherits(Cache,_XFAObject6);var _super18=config_createSuper(Cache);function Cache(attributes){var _this6;config_classCallCheck(this,Cache);_this6=_super18.call(this,CONFIG_NS_ID,"cache",true);_this6.templateCache=null;return _this6;}return config_createClass(Cache);}(XFAObject);var Change=/*#__PURE__*/function(_Option4){config_inherits(Change,_Option4);var _super19=config_createSuper(Change);function Change(attributes){config_classCallCheck(this,Change);return _super19.call(this,CONFIG_NS_ID,"change");}return config_createClass(Change);}(Option01);var Common=/*#__PURE__*/function(_XFAObject7){config_inherits(Common,_XFAObject7);var _super20=config_createSuper(Common);function Common(attributes){var _this7;config_classCallCheck(this,Common);_this7=_super20.call(this,CONFIG_NS_ID,"common",true);_this7.data=null;_this7.locale=null;_this7.localeSet=null;_this7.messaging=null;_this7.suppressBanner=null;_this7.template=null;_this7.validationMessaging=null;_this7.versionControl=null;_this7.log=new XFAObjectArray();return _this7;}return config_createClass(Common);}(XFAObject);var Compress=/*#__PURE__*/function(_XFAObject8){config_inherits(Compress,_XFAObject8);var _super21=config_createSuper(Compress);function Compress(attributes){var _this8;config_classCallCheck(this,Compress);_this8=_super21.call(this,CONFIG_NS_ID,"compress");_this8.scope=getStringOption(attributes.scope,["imageOnly","document"]);return _this8;}return config_createClass(Compress);}(XFAObject);var CompressLogicalStructure=/*#__PURE__*/function(_Option5){config_inherits(CompressLogicalStructure,_Option5);var _super22=config_createSuper(CompressLogicalStructure);function CompressLogicalStructure(attributes){config_classCallCheck(this,CompressLogicalStructure);return _super22.call(this,CONFIG_NS_ID,"compressLogicalStructure");}return config_createClass(CompressLogicalStructure);}(Option01);var CompressObjectStream=/*#__PURE__*/function(_Option6){config_inherits(CompressObjectStream,_Option6);var _super23=config_createSuper(CompressObjectStream);function CompressObjectStream(attributes){config_classCallCheck(this,CompressObjectStream);return _super23.call(this,CONFIG_NS_ID,"compressObjectStream");}return config_createClass(CompressObjectStream);}(Option10);var Compression=/*#__PURE__*/function(_XFAObject9){config_inherits(Compression,_XFAObject9);var _super24=config_createSuper(Compression);function Compression(attributes){var _this9;config_classCallCheck(this,Compression);_this9=_super24.call(this,CONFIG_NS_ID,"compression",true);_this9.compressLogicalStructure=null;_this9.compressObjectStream=null;_this9.level=null;_this9.type=null;return _this9;}return config_createClass(Compression);}(XFAObject);var Config=/*#__PURE__*/function(_XFAObject10){config_inherits(Config,_XFAObject10);var _super25=config_createSuper(Config);function Config(attributes){var _this10;config_classCallCheck(this,Config);_this10=_super25.call(this,CONFIG_NS_ID,"config",true);_this10.acrobat=null;_this10.present=null;_this10.trace=null;_this10.agent=new XFAObjectArray();return _this10;}return config_createClass(Config);}(XFAObject);var Conformance=/*#__PURE__*/function(_OptionObject5){config_inherits(Conformance,_OptionObject5);var _super26=config_createSuper(Conformance);function Conformance(attributes){config_classCallCheck(this,Conformance);return _super26.call(this,CONFIG_NS_ID,"conformance",["A","B"]);}return config_createClass(Conformance);}(OptionObject);var ContentCopy=/*#__PURE__*/function(_Option7){config_inherits(ContentCopy,_Option7);var _super27=config_createSuper(ContentCopy);function ContentCopy(attributes){config_classCallCheck(this,ContentCopy);return _super27.call(this,CONFIG_NS_ID,"contentCopy");}return config_createClass(ContentCopy);}(Option01);var Copies=/*#__PURE__*/function(_IntegerObject2){config_inherits(Copies,_IntegerObject2);var _super28=config_createSuper(Copies);function Copies(attributes){config_classCallCheck(this,Copies);return _super28.call(this,CONFIG_NS_ID,"copies",1,function(n){return n>=1;});}return config_createClass(Copies);}(IntegerObject);var Creator=/*#__PURE__*/function(_StringObject3){config_inherits(Creator,_StringObject3);var _super29=config_createSuper(Creator);function Creator(attributes){config_classCallCheck(this,Creator);return _super29.call(this,CONFIG_NS_ID,"creator");}return config_createClass(Creator);}(StringObject);var CurrentPage=/*#__PURE__*/function(_IntegerObject3){config_inherits(CurrentPage,_IntegerObject3);var _super30=config_createSuper(CurrentPage);function CurrentPage(attributes){config_classCallCheck(this,CurrentPage);return _super30.call(this,CONFIG_NS_ID,"currentPage",0,function(n){return n>=0;});}return config_createClass(CurrentPage);}(IntegerObject);var Data=/*#__PURE__*/function(_XFAObject11){config_inherits(Data,_XFAObject11);var _super31=config_createSuper(Data);function Data(attributes){var _this11;config_classCallCheck(this,Data);_this11=_super31.call(this,CONFIG_NS_ID,"data",true);_this11.adjustData=null;_this11.attributes=null;_this11.incrementalLoad=null;_this11.outputXSL=null;_this11.range=null;_this11.record=null;_this11.startNode=null;_this11.uri=null;_this11.window=null;_this11.xsl=null;_this11.excludeNS=new XFAObjectArray();_this11.transform=new XFAObjectArray();return _this11;}return config_createClass(Data);}(XFAObject);var Debug=/*#__PURE__*/function(_XFAObject12){config_inherits(Debug,_XFAObject12);var _super32=config_createSuper(Debug);function Debug(attributes){var _this12;config_classCallCheck(this,Debug);_this12=_super32.call(this,CONFIG_NS_ID,"debug",true);_this12.uri=null;return _this12;}return config_createClass(Debug);}(XFAObject);var DefaultTypeface=/*#__PURE__*/function(_ContentObject3){config_inherits(DefaultTypeface,_ContentObject3);var _super33=config_createSuper(DefaultTypeface);function DefaultTypeface(attributes){var _this13;config_classCallCheck(this,DefaultTypeface);_this13=_super33.call(this,CONFIG_NS_ID,"defaultTypeface");_this13.writingScript=getStringOption(attributes.writingScript,["*","Arabic","Cyrillic","EastEuropeanRoman","Greek","Hebrew","Japanese","Korean","Roman","SimplifiedChinese","Thai","TraditionalChinese","Vietnamese"]);return _this13;}return config_createClass(DefaultTypeface);}(ContentObject);var Destination=/*#__PURE__*/function(_OptionObject6){config_inherits(Destination,_OptionObject6);var _super34=config_createSuper(Destination);function Destination(attributes){config_classCallCheck(this,Destination);return _super34.call(this,CONFIG_NS_ID,"destination",["pdf","pcl","ps","webClient","zpl"]);}return config_createClass(Destination);}(OptionObject);var DocumentAssembly=/*#__PURE__*/function(_Option8){config_inherits(DocumentAssembly,_Option8);var _super35=config_createSuper(DocumentAssembly);function DocumentAssembly(attributes){config_classCallCheck(this,DocumentAssembly);return _super35.call(this,CONFIG_NS_ID,"documentAssembly");}return config_createClass(DocumentAssembly);}(Option01);var Driver=/*#__PURE__*/function(_XFAObject13){config_inherits(Driver,_XFAObject13);var _super36=config_createSuper(Driver);function Driver(attributes){var _this14;config_classCallCheck(this,Driver);_this14=_super36.call(this,CONFIG_NS_ID,"driver",true);_this14.name=attributes.name?attributes.name.trim():"";_this14.fontInfo=null;_this14.xdc=null;return _this14;}return config_createClass(Driver);}(XFAObject);var DuplexOption=/*#__PURE__*/function(_OptionObject7){config_inherits(DuplexOption,_OptionObject7);var _super37=config_createSuper(DuplexOption);function DuplexOption(attributes){config_classCallCheck(this,DuplexOption);return _super37.call(this,CONFIG_NS_ID,"duplexOption",["simplex","duplexFlipLongEdge","duplexFlipShortEdge"]);}return config_createClass(DuplexOption);}(OptionObject);var DynamicRender=/*#__PURE__*/function(_OptionObject8){config_inherits(DynamicRender,_OptionObject8);var _super38=config_createSuper(DynamicRender);function DynamicRender(attributes){config_classCallCheck(this,DynamicRender);return _super38.call(this,CONFIG_NS_ID,"dynamicRender",["forbidden","required"]);}return config_createClass(DynamicRender);}(OptionObject);var Embed=/*#__PURE__*/function(_Option9){config_inherits(Embed,_Option9);var _super39=config_createSuper(Embed);function Embed(attributes){config_classCallCheck(this,Embed);return _super39.call(this,CONFIG_NS_ID,"embed");}return config_createClass(Embed);}(Option01);var config_Encrypt=/*#__PURE__*/function(_Option10){config_inherits(Encrypt,_Option10);var _super40=config_createSuper(Encrypt);function Encrypt(attributes){config_classCallCheck(this,Encrypt);return _super40.call(this,CONFIG_NS_ID,"encrypt");}return config_createClass(Encrypt);}(Option01);var config_Encryption=/*#__PURE__*/function(_XFAObject14){config_inherits(Encryption,_XFAObject14);var _super41=config_createSuper(Encryption);function Encryption(attributes){var _this15;config_classCallCheck(this,Encryption);_this15=_super41.call(this,CONFIG_NS_ID,"encryption",true);_this15.encrypt=null;_this15.encryptionLevel=null;_this15.permissions=null;return _this15;}return config_createClass(Encryption);}(XFAObject);var EncryptionLevel=/*#__PURE__*/function(_OptionObject9){config_inherits(EncryptionLevel,_OptionObject9);var _super42=config_createSuper(EncryptionLevel);function EncryptionLevel(attributes){config_classCallCheck(this,EncryptionLevel);return _super42.call(this,CONFIG_NS_ID,"encryptionLevel",["40bit","128bit"]);}return config_createClass(EncryptionLevel);}(OptionObject);var Enforce=/*#__PURE__*/function(_StringObject4){config_inherits(Enforce,_StringObject4);var _super43=config_createSuper(Enforce);function Enforce(attributes){config_classCallCheck(this,Enforce);return _super43.call(this,CONFIG_NS_ID,"enforce");}return config_createClass(Enforce);}(StringObject);var Equate=/*#__PURE__*/function(_XFAObject15){config_inherits(Equate,_XFAObject15);var _super44=config_createSuper(Equate);function Equate(attributes){var _this16;config_classCallCheck(this,Equate);_this16=_super44.call(this,CONFIG_NS_ID,"equate");_this16.force=getInteger({data:attributes.force,defaultValue:1,validate:function validate(n){return n===0;}});_this16.from=attributes.from||"";_this16.to=attributes.to||"";return _this16;}return config_createClass(Equate);}(XFAObject);var EquateRange=/*#__PURE__*/function(_XFAObject16){config_inherits(EquateRange,_XFAObject16);var _super45=config_createSuper(EquateRange);function EquateRange(attributes){var _this17;config_classCallCheck(this,EquateRange);_this17=_super45.call(this,CONFIG_NS_ID,"equateRange");_this17.from=attributes.from||"";_this17.to=attributes.to||"";_this17._unicodeRange=attributes.unicodeRange||"";return _this17;}config_createClass(EquateRange,[{key:"unicodeRange",get:function get(){var ranges=[];var unicodeRegex=/U\+([0-9a-fA-F]+)/;var unicodeRange=this._unicodeRange;var _iterator=config_createForOfIteratorHelper(unicodeRange.split(",").map(function(x){return x.trim();}).filter(function(x){return!!x;})),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var range=_step.value;range=range.split("-",2).map(function(x){var found=x.match(unicodeRegex);if(!found){return 0;}return parseInt(found[1],16);});if(range.length===1){range.push(range[0]);}ranges.push(range);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return shadow(this,"unicodeRange",ranges);}}]);return EquateRange;}(XFAObject);var Exclude=/*#__PURE__*/function(_ContentObject4){config_inherits(Exclude,_ContentObject4);var _super46=config_createSuper(Exclude);function Exclude(attributes){config_classCallCheck(this,Exclude);return _super46.call(this,CONFIG_NS_ID,"exclude");}config_createClass(Exclude,[{key:$finalize,value:function value(){this[$content]=this[$content].trim().split(/\s+/).filter(function(x){return x&&["calculate","close","enter","exit","initialize","ready","validate"].includes(x);});}}]);return Exclude;}(ContentObject);var ExcludeNS=/*#__PURE__*/function(_StringObject5){config_inherits(ExcludeNS,_StringObject5);var _super47=config_createSuper(ExcludeNS);function ExcludeNS(attributes){config_classCallCheck(this,ExcludeNS);return _super47.call(this,CONFIG_NS_ID,"excludeNS");}return config_createClass(ExcludeNS);}(StringObject);var FlipLabel=/*#__PURE__*/function(_OptionObject10){config_inherits(FlipLabel,_OptionObject10);var _super48=config_createSuper(FlipLabel);function FlipLabel(attributes){config_classCallCheck(this,FlipLabel);return _super48.call(this,CONFIG_NS_ID,"flipLabel",["usePrinterSetting","on","off"]);}return config_createClass(FlipLabel);}(OptionObject);var config_FontInfo=/*#__PURE__*/function(_XFAObject17){config_inherits(FontInfo,_XFAObject17);var _super49=config_createSuper(FontInfo);function FontInfo(attributes){var _this18;config_classCallCheck(this,FontInfo);_this18=_super49.call(this,CONFIG_NS_ID,"fontInfo",true);_this18.embed=null;_this18.map=null;_this18.subsetBelow=null;_this18.alwaysEmbed=new XFAObjectArray();_this18.defaultTypeface=new XFAObjectArray();_this18.neverEmbed=new XFAObjectArray();return _this18;}return config_createClass(FontInfo);}(XFAObject);var FormFieldFilling=/*#__PURE__*/function(_Option11){config_inherits(FormFieldFilling,_Option11);var _super50=config_createSuper(FormFieldFilling);function FormFieldFilling(attributes){config_classCallCheck(this,FormFieldFilling);return _super50.call(this,CONFIG_NS_ID,"formFieldFilling");}return config_createClass(FormFieldFilling);}(Option01);var GroupParent=/*#__PURE__*/function(_StringObject6){config_inherits(GroupParent,_StringObject6);var _super51=config_createSuper(GroupParent);function GroupParent(attributes){config_classCallCheck(this,GroupParent);return _super51.call(this,CONFIG_NS_ID,"groupParent");}return config_createClass(GroupParent);}(StringObject);var IfEmpty=/*#__PURE__*/function(_OptionObject11){config_inherits(IfEmpty,_OptionObject11);var _super52=config_createSuper(IfEmpty);function IfEmpty(attributes){config_classCallCheck(this,IfEmpty);return _super52.call(this,CONFIG_NS_ID,"ifEmpty",["dataValue","dataGroup","ignore","remove"]);}return config_createClass(IfEmpty);}(OptionObject);var IncludeXDPContent=/*#__PURE__*/function(_StringObject7){config_inherits(IncludeXDPContent,_StringObject7);var _super53=config_createSuper(IncludeXDPContent);function IncludeXDPContent(attributes){config_classCallCheck(this,IncludeXDPContent);return _super53.call(this,CONFIG_NS_ID,"includeXDPContent");}return config_createClass(IncludeXDPContent);}(StringObject);var IncrementalLoad=/*#__PURE__*/function(_OptionObject12){config_inherits(IncrementalLoad,_OptionObject12);var _super54=config_createSuper(IncrementalLoad);function IncrementalLoad(attributes){config_classCallCheck(this,IncrementalLoad);return _super54.call(this,CONFIG_NS_ID,"incrementalLoad",["none","forwardOnly"]);}return config_createClass(IncrementalLoad);}(OptionObject);var IncrementalMerge=/*#__PURE__*/function(_Option12){config_inherits(IncrementalMerge,_Option12);var _super55=config_createSuper(IncrementalMerge);function IncrementalMerge(attributes){config_classCallCheck(this,IncrementalMerge);return _super55.call(this,CONFIG_NS_ID,"incrementalMerge");}return config_createClass(IncrementalMerge);}(Option01);var Interactive=/*#__PURE__*/function(_Option13){config_inherits(Interactive,_Option13);var _super56=config_createSuper(Interactive);function Interactive(attributes){config_classCallCheck(this,Interactive);return _super56.call(this,CONFIG_NS_ID,"interactive");}return config_createClass(Interactive);}(Option01);var Jog=/*#__PURE__*/function(_OptionObject13){config_inherits(Jog,_OptionObject13);var _super57=config_createSuper(Jog);function Jog(attributes){config_classCallCheck(this,Jog);return _super57.call(this,CONFIG_NS_ID,"jog",["usePrinterSetting","none","pageSet"]);}return config_createClass(Jog);}(OptionObject);var LabelPrinter=/*#__PURE__*/function(_XFAObject18){config_inherits(LabelPrinter,_XFAObject18);var _super58=config_createSuper(LabelPrinter);function LabelPrinter(attributes){var _this19;config_classCallCheck(this,LabelPrinter);_this19=_super58.call(this,CONFIG_NS_ID,"labelPrinter",true);_this19.name=getStringOption(attributes.name,["zpl","dpl","ipl","tcpl"]);_this19.batchOutput=null;_this19.flipLabel=null;_this19.fontInfo=null;_this19.xdc=null;return _this19;}return config_createClass(LabelPrinter);}(XFAObject);var Layout=/*#__PURE__*/function(_OptionObject14){config_inherits(Layout,_OptionObject14);var _super59=config_createSuper(Layout);function Layout(attributes){config_classCallCheck(this,Layout);return _super59.call(this,CONFIG_NS_ID,"layout",["paginate","panel"]);}return config_createClass(Layout);}(OptionObject);var Level=/*#__PURE__*/function(_IntegerObject4){config_inherits(Level,_IntegerObject4);var _super60=config_createSuper(Level);function Level(attributes){config_classCallCheck(this,Level);return _super60.call(this,CONFIG_NS_ID,"level",0,function(n){return n>0;});}return config_createClass(Level);}(IntegerObject);var Linearized=/*#__PURE__*/function(_Option14){config_inherits(Linearized,_Option14);var _super61=config_createSuper(Linearized);function Linearized(attributes){config_classCallCheck(this,Linearized);return _super61.call(this,CONFIG_NS_ID,"linearized");}return config_createClass(Linearized);}(Option01);var Locale=/*#__PURE__*/function(_StringObject8){config_inherits(Locale,_StringObject8);var _super62=config_createSuper(Locale);function Locale(attributes){config_classCallCheck(this,Locale);return _super62.call(this,CONFIG_NS_ID,"locale");}return config_createClass(Locale);}(StringObject);var LocaleSet=/*#__PURE__*/function(_StringObject9){config_inherits(LocaleSet,_StringObject9);var _super63=config_createSuper(LocaleSet);function LocaleSet(attributes){config_classCallCheck(this,LocaleSet);return _super63.call(this,CONFIG_NS_ID,"localeSet");}return config_createClass(LocaleSet);}(StringObject);var Log=/*#__PURE__*/function(_XFAObject19){config_inherits(Log,_XFAObject19);var _super64=config_createSuper(Log);function Log(attributes){var _this20;config_classCallCheck(this,Log);_this20=_super64.call(this,CONFIG_NS_ID,"log",true);_this20.mode=null;_this20.threshold=null;_this20.to=null;_this20.uri=null;return _this20;}return config_createClass(Log);}(XFAObject);var MapElement=/*#__PURE__*/function(_XFAObject20){config_inherits(MapElement,_XFAObject20);var _super65=config_createSuper(MapElement);function MapElement(attributes){var _this21;config_classCallCheck(this,MapElement);_this21=_super65.call(this,CONFIG_NS_ID,"map",true);_this21.equate=new XFAObjectArray();_this21.equateRange=new XFAObjectArray();return _this21;}return config_createClass(MapElement);}(XFAObject);var MediumInfo=/*#__PURE__*/function(_XFAObject21){config_inherits(MediumInfo,_XFAObject21);var _super66=config_createSuper(MediumInfo);function MediumInfo(attributes){var _this22;config_classCallCheck(this,MediumInfo);_this22=_super66.call(this,CONFIG_NS_ID,"mediumInfo",true);_this22.map=null;return _this22;}return config_createClass(MediumInfo);}(XFAObject);var config_Message=/*#__PURE__*/function(_XFAObject22){config_inherits(Message,_XFAObject22);var _super67=config_createSuper(Message);function Message(attributes){var _this23;config_classCallCheck(this,Message);_this23=_super67.call(this,CONFIG_NS_ID,"message",true);_this23.msgId=null;_this23.severity=null;return _this23;}return config_createClass(Message);}(XFAObject);var Messaging=/*#__PURE__*/function(_XFAObject23){config_inherits(Messaging,_XFAObject23);var _super68=config_createSuper(Messaging);function Messaging(attributes){var _this24;config_classCallCheck(this,Messaging);_this24=_super68.call(this,CONFIG_NS_ID,"messaging",true);_this24.message=new XFAObjectArray();return _this24;}return config_createClass(Messaging);}(XFAObject);var Mode=/*#__PURE__*/function(_OptionObject15){config_inherits(Mode,_OptionObject15);var _super69=config_createSuper(Mode);function Mode(attributes){config_classCallCheck(this,Mode);return _super69.call(this,CONFIG_NS_ID,"mode",["append","overwrite"]);}return config_createClass(Mode);}(OptionObject);var ModifyAnnots=/*#__PURE__*/function(_Option15){config_inherits(ModifyAnnots,_Option15);var _super70=config_createSuper(ModifyAnnots);function ModifyAnnots(attributes){config_classCallCheck(this,ModifyAnnots);return _super70.call(this,CONFIG_NS_ID,"modifyAnnots");}return config_createClass(ModifyAnnots);}(Option01);var MsgId=/*#__PURE__*/function(_IntegerObject5){config_inherits(MsgId,_IntegerObject5);var _super71=config_createSuper(MsgId);function MsgId(attributes){config_classCallCheck(this,MsgId);return _super71.call(this,CONFIG_NS_ID,"msgId",1,function(n){return n>=1;});}return config_createClass(MsgId);}(IntegerObject);var NameAttr=/*#__PURE__*/function(_StringObject10){config_inherits(NameAttr,_StringObject10);var _super72=config_createSuper(NameAttr);function NameAttr(attributes){config_classCallCheck(this,NameAttr);return _super72.call(this,CONFIG_NS_ID,"nameAttr");}return config_createClass(NameAttr);}(StringObject);var NeverEmbed=/*#__PURE__*/function(_ContentObject5){config_inherits(NeverEmbed,_ContentObject5);var _super73=config_createSuper(NeverEmbed);function NeverEmbed(attributes){config_classCallCheck(this,NeverEmbed);return _super73.call(this,CONFIG_NS_ID,"neverEmbed");}return config_createClass(NeverEmbed);}(ContentObject);var NumberOfCopies=/*#__PURE__*/function(_IntegerObject6){config_inherits(NumberOfCopies,_IntegerObject6);var _super74=config_createSuper(NumberOfCopies);function NumberOfCopies(attributes){config_classCallCheck(this,NumberOfCopies);return _super74.call(this,CONFIG_NS_ID,"numberOfCopies",null,function(n){return n>=2&&n<=5;});}return config_createClass(NumberOfCopies);}(IntegerObject);var OpenAction=/*#__PURE__*/function(_XFAObject24){config_inherits(OpenAction,_XFAObject24);var _super75=config_createSuper(OpenAction);function OpenAction(attributes){var _this25;config_classCallCheck(this,OpenAction);_this25=_super75.call(this,CONFIG_NS_ID,"openAction",true);_this25.destination=null;return _this25;}return config_createClass(OpenAction);}(XFAObject);var Output=/*#__PURE__*/function(_XFAObject25){config_inherits(Output,_XFAObject25);var _super76=config_createSuper(Output);function Output(attributes){var _this26;config_classCallCheck(this,Output);_this26=_super76.call(this,CONFIG_NS_ID,"output",true);_this26.to=null;_this26.type=null;_this26.uri=null;return _this26;}return config_createClass(Output);}(XFAObject);var OutputBin=/*#__PURE__*/function(_StringObject11){config_inherits(OutputBin,_StringObject11);var _super77=config_createSuper(OutputBin);function OutputBin(attributes){config_classCallCheck(this,OutputBin);return _super77.call(this,CONFIG_NS_ID,"outputBin");}return config_createClass(OutputBin);}(StringObject);var OutputXSL=/*#__PURE__*/function(_XFAObject26){config_inherits(OutputXSL,_XFAObject26);var _super78=config_createSuper(OutputXSL);function OutputXSL(attributes){var _this27;config_classCallCheck(this,OutputXSL);_this27=_super78.call(this,CONFIG_NS_ID,"outputXSL",true);_this27.uri=null;return _this27;}return config_createClass(OutputXSL);}(XFAObject);var Overprint=/*#__PURE__*/function(_OptionObject16){config_inherits(Overprint,_OptionObject16);var _super79=config_createSuper(Overprint);function Overprint(attributes){config_classCallCheck(this,Overprint);return _super79.call(this,CONFIG_NS_ID,"overprint",["none","both","draw","field"]);}return config_createClass(Overprint);}(OptionObject);var Packets=/*#__PURE__*/function(_StringObject12){config_inherits(Packets,_StringObject12);var _super80=config_createSuper(Packets);function Packets(attributes){config_classCallCheck(this,Packets);return _super80.call(this,CONFIG_NS_ID,"packets");}config_createClass(Packets,[{key:$finalize,value:function value(){if(this[$content]==="*"){return;}this[$content]=this[$content].trim().split(/\s+/).filter(function(x){return["config","datasets","template","xfdf","xslt"].includes(x);});}}]);return Packets;}(StringObject);var PageOffset=/*#__PURE__*/function(_XFAObject27){config_inherits(PageOffset,_XFAObject27);var _super81=config_createSuper(PageOffset);function PageOffset(attributes){var _this28;config_classCallCheck(this,PageOffset);_this28=_super81.call(this,CONFIG_NS_ID,"pageOffset");_this28.x=getInteger({data:attributes.x,defaultValue:"useXDCSetting",validate:function validate(n){return true;}});_this28.y=getInteger({data:attributes.y,defaultValue:"useXDCSetting",validate:function validate(n){return true;}});return _this28;}return config_createClass(PageOffset);}(XFAObject);var PageRange=/*#__PURE__*/function(_StringObject13){config_inherits(PageRange,_StringObject13);var _super82=config_createSuper(PageRange);function PageRange(attributes){config_classCallCheck(this,PageRange);return _super82.call(this,CONFIG_NS_ID,"pageRange");}config_createClass(PageRange,[{key:$finalize,value:function value(){var numbers=this[$content].trim().split(/\s+/).map(function(x){return parseInt(x,10);});var ranges=[];for(var i=0,ii=numbers.length;i<ii;i+=2){ranges.push(numbers.slice(i,i+2));}this[$content]=ranges;}}]);return PageRange;}(StringObject);var Pagination=/*#__PURE__*/function(_OptionObject17){config_inherits(Pagination,_OptionObject17);var _super83=config_createSuper(Pagination);function Pagination(attributes){config_classCallCheck(this,Pagination);return _super83.call(this,CONFIG_NS_ID,"pagination",["simplex","duplexShortEdge","duplexLongEdge"]);}return config_createClass(Pagination);}(OptionObject);var PaginationOverride=/*#__PURE__*/function(_OptionObject18){config_inherits(PaginationOverride,_OptionObject18);var _super84=config_createSuper(PaginationOverride);function PaginationOverride(attributes){config_classCallCheck(this,PaginationOverride);return _super84.call(this,CONFIG_NS_ID,"paginationOverride",["none","forceDuplex","forceDuplexLongEdge","forceDuplexShortEdge","forceSimplex"]);}return config_createClass(PaginationOverride);}(OptionObject);var Part=/*#__PURE__*/function(_IntegerObject7){config_inherits(Part,_IntegerObject7);var _super85=config_createSuper(Part);function Part(attributes){config_classCallCheck(this,Part);return _super85.call(this,CONFIG_NS_ID,"part",1,function(n){return false;});}return config_createClass(Part);}(IntegerObject);var Pcl=/*#__PURE__*/function(_XFAObject28){config_inherits(Pcl,_XFAObject28);var _super86=config_createSuper(Pcl);function Pcl(attributes){var _this29;config_classCallCheck(this,Pcl);_this29=_super86.call(this,CONFIG_NS_ID,"pcl",true);_this29.name=attributes.name||"";_this29.batchOutput=null;_this29.fontInfo=null;_this29.jog=null;_this29.mediumInfo=null;_this29.outputBin=null;_this29.pageOffset=null;_this29.staple=null;_this29.xdc=null;return _this29;}return config_createClass(Pcl);}(XFAObject);var Pdf=/*#__PURE__*/function(_XFAObject29){config_inherits(Pdf,_XFAObject29);var _super87=config_createSuper(Pdf);function Pdf(attributes){var _this30;config_classCallCheck(this,Pdf);_this30=_super87.call(this,CONFIG_NS_ID,"pdf",true);_this30.name=attributes.name||"";_this30.adobeExtensionLevel=null;_this30.batchOutput=null;_this30.compression=null;_this30.creator=null;_this30.encryption=null;_this30.fontInfo=null;_this30.interactive=null;_this30.linearized=null;_this30.openAction=null;_this30.pdfa=null;_this30.producer=null;_this30.renderPolicy=null;_this30.scriptModel=null;_this30.silentPrint=null;_this30.submitFormat=null;_this30.tagged=null;_this30.version=null;_this30.viewerPreferences=null;_this30.xdc=null;return _this30;}return config_createClass(Pdf);}(XFAObject);var Pdfa=/*#__PURE__*/function(_XFAObject30){config_inherits(Pdfa,_XFAObject30);var _super88=config_createSuper(Pdfa);function Pdfa(attributes){var _this31;config_classCallCheck(this,Pdfa);_this31=_super88.call(this,CONFIG_NS_ID,"pdfa",true);_this31.amd=null;_this31.conformance=null;_this31.includeXDPContent=null;_this31.part=null;return _this31;}return config_createClass(Pdfa);}(XFAObject);var Permissions=/*#__PURE__*/function(_XFAObject31){config_inherits(Permissions,_XFAObject31);var _super89=config_createSuper(Permissions);function Permissions(attributes){var _this32;config_classCallCheck(this,Permissions);_this32=_super89.call(this,CONFIG_NS_ID,"permissions",true);_this32.accessibleContent=null;_this32.change=null;_this32.contentCopy=null;_this32.documentAssembly=null;_this32.formFieldFilling=null;_this32.modifyAnnots=null;_this32.plaintextMetadata=null;_this32.print=null;_this32.printHighQuality=null;return _this32;}return config_createClass(Permissions);}(XFAObject);var PickTrayByPDFSize=/*#__PURE__*/function(_Option16){config_inherits(PickTrayByPDFSize,_Option16);var _super90=config_createSuper(PickTrayByPDFSize);function PickTrayByPDFSize(attributes){config_classCallCheck(this,PickTrayByPDFSize);return _super90.call(this,CONFIG_NS_ID,"pickTrayByPDFSize");}return config_createClass(PickTrayByPDFSize);}(Option01);var config_Picture=/*#__PURE__*/function(_StringObject14){config_inherits(Picture,_StringObject14);var _super91=config_createSuper(Picture);function Picture(attributes){config_classCallCheck(this,Picture);return _super91.call(this,CONFIG_NS_ID,"picture");}return config_createClass(Picture);}(StringObject);var PlaintextMetadata=/*#__PURE__*/function(_Option17){config_inherits(PlaintextMetadata,_Option17);var _super92=config_createSuper(PlaintextMetadata);function PlaintextMetadata(attributes){config_classCallCheck(this,PlaintextMetadata);return _super92.call(this,CONFIG_NS_ID,"plaintextMetadata");}return config_createClass(PlaintextMetadata);}(Option01);var Presence=/*#__PURE__*/function(_OptionObject19){config_inherits(Presence,_OptionObject19);var _super93=config_createSuper(Presence);function Presence(attributes){config_classCallCheck(this,Presence);return _super93.call(this,CONFIG_NS_ID,"presence",["preserve","dissolve","dissolveStructure","ignore","remove"]);}return config_createClass(Presence);}(OptionObject);var Present=/*#__PURE__*/function(_XFAObject32){config_inherits(Present,_XFAObject32);var _super94=config_createSuper(Present);function Present(attributes){var _this33;config_classCallCheck(this,Present);_this33=_super94.call(this,CONFIG_NS_ID,"present",true);_this33.behaviorOverride=null;_this33.cache=null;_this33.common=null;_this33.copies=null;_this33.destination=null;_this33.incrementalMerge=null;_this33.layout=null;_this33.output=null;_this33.overprint=null;_this33.pagination=null;_this33.paginationOverride=null;_this33.script=null;_this33.validate=null;_this33.xdp=null;_this33.driver=new XFAObjectArray();_this33.labelPrinter=new XFAObjectArray();_this33.pcl=new XFAObjectArray();_this33.pdf=new XFAObjectArray();_this33.ps=new XFAObjectArray();_this33.submitUrl=new XFAObjectArray();_this33.webClient=new XFAObjectArray();_this33.zpl=new XFAObjectArray();return _this33;}return config_createClass(Present);}(XFAObject);var Print=/*#__PURE__*/function(_Option18){config_inherits(Print,_Option18);var _super95=config_createSuper(Print);function Print(attributes){config_classCallCheck(this,Print);return _super95.call(this,CONFIG_NS_ID,"print");}return config_createClass(Print);}(Option01);var PrintHighQuality=/*#__PURE__*/function(_Option19){config_inherits(PrintHighQuality,_Option19);var _super96=config_createSuper(PrintHighQuality);function PrintHighQuality(attributes){config_classCallCheck(this,PrintHighQuality);return _super96.call(this,CONFIG_NS_ID,"printHighQuality");}return config_createClass(PrintHighQuality);}(Option01);var PrintScaling=/*#__PURE__*/function(_OptionObject20){config_inherits(PrintScaling,_OptionObject20);var _super97=config_createSuper(PrintScaling);function PrintScaling(attributes){config_classCallCheck(this,PrintScaling);return _super97.call(this,CONFIG_NS_ID,"printScaling",["appdefault","noScaling"]);}return config_createClass(PrintScaling);}(OptionObject);var PrinterName=/*#__PURE__*/function(_StringObject15){config_inherits(PrinterName,_StringObject15);var _super98=config_createSuper(PrinterName);function PrinterName(attributes){config_classCallCheck(this,PrinterName);return _super98.call(this,CONFIG_NS_ID,"printerName");}return config_createClass(PrinterName);}(StringObject);var Producer=/*#__PURE__*/function(_StringObject16){config_inherits(Producer,_StringObject16);var _super99=config_createSuper(Producer);function Producer(attributes){config_classCallCheck(this,Producer);return _super99.call(this,CONFIG_NS_ID,"producer");}return config_createClass(Producer);}(StringObject);var Ps=/*#__PURE__*/function(_XFAObject33){config_inherits(Ps,_XFAObject33);var _super100=config_createSuper(Ps);function Ps(attributes){var _this34;config_classCallCheck(this,Ps);_this34=_super100.call(this,CONFIG_NS_ID,"ps",true);_this34.name=attributes.name||"";_this34.batchOutput=null;_this34.fontInfo=null;_this34.jog=null;_this34.mediumInfo=null;_this34.outputBin=null;_this34.staple=null;_this34.xdc=null;return _this34;}return config_createClass(Ps);}(XFAObject);var Range=/*#__PURE__*/function(_ContentObject6){config_inherits(Range,_ContentObject6);var _super101=config_createSuper(Range);function Range(attributes){config_classCallCheck(this,Range);return _super101.call(this,CONFIG_NS_ID,"range");}config_createClass(Range,[{key:$finalize,value:function value(){this[$content]=this[$content].trim().split(/\s*,\s*/,2).map(function(range){return range.split("-").map(function(x){return parseInt(x.trim(),10);});}).filter(function(range){return range.every(function(x){return!isNaN(x);});}).map(function(range){if(range.length===1){range.push(range[0]);}return range;});}}]);return Range;}(ContentObject);var Record=/*#__PURE__*/function(_ContentObject7){config_inherits(Record,_ContentObject7);var _super102=config_createSuper(Record);function Record(attributes){config_classCallCheck(this,Record);return _super102.call(this,CONFIG_NS_ID,"record");}config_createClass(Record,[{key:$finalize,value:function value(){this[$content]=this[$content].trim();var n=parseInt(this[$content],10);if(!isNaN(n)&&n>=0){this[$content]=n;}}}]);return Record;}(ContentObject);var Relevant=/*#__PURE__*/function(_ContentObject8){config_inherits(Relevant,_ContentObject8);var _super103=config_createSuper(Relevant);function Relevant(attributes){config_classCallCheck(this,Relevant);return _super103.call(this,CONFIG_NS_ID,"relevant");}config_createClass(Relevant,[{key:$finalize,value:function value(){this[$content]=this[$content].trim().split(/\s+/);}}]);return Relevant;}(ContentObject);var Rename=/*#__PURE__*/function(_ContentObject9){config_inherits(Rename,_ContentObject9);var _super104=config_createSuper(Rename);function Rename(attributes){config_classCallCheck(this,Rename);return _super104.call(this,CONFIG_NS_ID,"rename");}config_createClass(Rename,[{key:$finalize,value:function value(){this[$content]=this[$content].trim();if(this[$content].toLowerCase().startsWith("xml")||new RegExp("[\\p{L}_][\\p{L}\\d._\\p{M}-]*","u").test(this[$content])){warn("XFA - Rename: invalid XFA name");}}}]);return Rename;}(ContentObject);var RenderPolicy=/*#__PURE__*/function(_OptionObject21){config_inherits(RenderPolicy,_OptionObject21);var _super105=config_createSuper(RenderPolicy);function RenderPolicy(attributes){config_classCallCheck(this,RenderPolicy);return _super105.call(this,CONFIG_NS_ID,"renderPolicy",["server","client"]);}return config_createClass(RenderPolicy);}(OptionObject);var RunScripts=/*#__PURE__*/function(_OptionObject22){config_inherits(RunScripts,_OptionObject22);var _super106=config_createSuper(RunScripts);function RunScripts(attributes){config_classCallCheck(this,RunScripts);return _super106.call(this,CONFIG_NS_ID,"runScripts",["both","client","none","server"]);}return config_createClass(RunScripts);}(OptionObject);var config_Script=/*#__PURE__*/function(_XFAObject34){config_inherits(Script,_XFAObject34);var _super107=config_createSuper(Script);function Script(attributes){var _this35;config_classCallCheck(this,Script);_this35=_super107.call(this,CONFIG_NS_ID,"script",true);_this35.currentPage=null;_this35.exclude=null;_this35.runScripts=null;return _this35;}return config_createClass(Script);}(XFAObject);var ScriptModel=/*#__PURE__*/function(_OptionObject23){config_inherits(ScriptModel,_OptionObject23);var _super108=config_createSuper(ScriptModel);function ScriptModel(attributes){config_classCallCheck(this,ScriptModel);return _super108.call(this,CONFIG_NS_ID,"scriptModel",["XFA","none"]);}return config_createClass(ScriptModel);}(OptionObject);var Severity=/*#__PURE__*/function(_OptionObject24){config_inherits(Severity,_OptionObject24);var _super109=config_createSuper(Severity);function Severity(attributes){config_classCallCheck(this,Severity);return _super109.call(this,CONFIG_NS_ID,"severity",["ignore","error","information","trace","warning"]);}return config_createClass(Severity);}(OptionObject);var SilentPrint=/*#__PURE__*/function(_XFAObject35){config_inherits(SilentPrint,_XFAObject35);var _super110=config_createSuper(SilentPrint);function SilentPrint(attributes){var _this36;config_classCallCheck(this,SilentPrint);_this36=_super110.call(this,CONFIG_NS_ID,"silentPrint",true);_this36.addSilentPrint=null;_this36.printerName=null;return _this36;}return config_createClass(SilentPrint);}(XFAObject);var Staple=/*#__PURE__*/function(_XFAObject36){config_inherits(Staple,_XFAObject36);var _super111=config_createSuper(Staple);function Staple(attributes){var _this37;config_classCallCheck(this,Staple);_this37=_super111.call(this,CONFIG_NS_ID,"staple");_this37.mode=getStringOption(attributes.mode,["usePrinterSetting","on","off"]);return _this37;}return config_createClass(Staple);}(XFAObject);var StartNode=/*#__PURE__*/function(_StringObject17){config_inherits(StartNode,_StringObject17);var _super112=config_createSuper(StartNode);function StartNode(attributes){config_classCallCheck(this,StartNode);return _super112.call(this,CONFIG_NS_ID,"startNode");}return config_createClass(StartNode);}(StringObject);var StartPage=/*#__PURE__*/function(_IntegerObject8){config_inherits(StartPage,_IntegerObject8);var _super113=config_createSuper(StartPage);function StartPage(attributes){config_classCallCheck(this,StartPage);return _super113.call(this,CONFIG_NS_ID,"startPage",0,function(n){return true;});}return config_createClass(StartPage);}(IntegerObject);var SubmitFormat=/*#__PURE__*/function(_OptionObject25){config_inherits(SubmitFormat,_OptionObject25);var _super114=config_createSuper(SubmitFormat);function SubmitFormat(attributes){config_classCallCheck(this,SubmitFormat);return _super114.call(this,CONFIG_NS_ID,"submitFormat",["html","delegate","fdf","xml","pdf"]);}return config_createClass(SubmitFormat);}(OptionObject);var SubmitUrl=/*#__PURE__*/function(_StringObject18){config_inherits(SubmitUrl,_StringObject18);var _super115=config_createSuper(SubmitUrl);function SubmitUrl(attributes){config_classCallCheck(this,SubmitUrl);return _super115.call(this,CONFIG_NS_ID,"submitUrl");}return config_createClass(SubmitUrl);}(StringObject);var SubsetBelow=/*#__PURE__*/function(_IntegerObject9){config_inherits(SubsetBelow,_IntegerObject9);var _super116=config_createSuper(SubsetBelow);function SubsetBelow(attributes){config_classCallCheck(this,SubsetBelow);return _super116.call(this,CONFIG_NS_ID,"subsetBelow",100,function(n){return n>=0&&n<=100;});}return config_createClass(SubsetBelow);}(IntegerObject);var SuppressBanner=/*#__PURE__*/function(_Option20){config_inherits(SuppressBanner,_Option20);var _super117=config_createSuper(SuppressBanner);function SuppressBanner(attributes){config_classCallCheck(this,SuppressBanner);return _super117.call(this,CONFIG_NS_ID,"suppressBanner");}return config_createClass(SuppressBanner);}(Option01);var Tagged=/*#__PURE__*/function(_Option21){config_inherits(Tagged,_Option21);var _super118=config_createSuper(Tagged);function Tagged(attributes){config_classCallCheck(this,Tagged);return _super118.call(this,CONFIG_NS_ID,"tagged");}return config_createClass(Tagged);}(Option01);var config_Template=/*#__PURE__*/function(_XFAObject37){config_inherits(Template,_XFAObject37);var _super119=config_createSuper(Template);function Template(attributes){var _this38;config_classCallCheck(this,Template);_this38=_super119.call(this,CONFIG_NS_ID,"template",true);_this38.base=null;_this38.relevant=null;_this38.startPage=null;_this38.uri=null;_this38.xsl=null;return _this38;}return config_createClass(Template);}(XFAObject);var Threshold=/*#__PURE__*/function(_OptionObject26){config_inherits(Threshold,_OptionObject26);var _super120=config_createSuper(Threshold);function Threshold(attributes){config_classCallCheck(this,Threshold);return _super120.call(this,CONFIG_NS_ID,"threshold",["trace","error","information","warning"]);}return config_createClass(Threshold);}(OptionObject);var To=/*#__PURE__*/function(_OptionObject27){config_inherits(To,_OptionObject27);var _super121=config_createSuper(To);function To(attributes){config_classCallCheck(this,To);return _super121.call(this,CONFIG_NS_ID,"to",["null","memory","stderr","stdout","system","uri"]);}return config_createClass(To);}(OptionObject);var TemplateCache=/*#__PURE__*/function(_XFAObject38){config_inherits(TemplateCache,_XFAObject38);var _super122=config_createSuper(TemplateCache);function TemplateCache(attributes){var _this39;config_classCallCheck(this,TemplateCache);_this39=_super122.call(this,CONFIG_NS_ID,"templateCache");_this39.maxEntries=getInteger({data:attributes.maxEntries,defaultValue:5,validate:function validate(n){return n>=0;}});return _this39;}return config_createClass(TemplateCache);}(XFAObject);var Trace=/*#__PURE__*/function(_XFAObject39){config_inherits(Trace,_XFAObject39);var _super123=config_createSuper(Trace);function Trace(attributes){var _this40;config_classCallCheck(this,Trace);_this40=_super123.call(this,CONFIG_NS_ID,"trace",true);_this40.area=new XFAObjectArray();return _this40;}return config_createClass(Trace);}(XFAObject);var config_Transform=/*#__PURE__*/function(_XFAObject40){config_inherits(Transform,_XFAObject40);var _super124=config_createSuper(Transform);function Transform(attributes){var _this41;config_classCallCheck(this,Transform);_this41=_super124.call(this,CONFIG_NS_ID,"transform",true);_this41.groupParent=null;_this41.ifEmpty=null;_this41.nameAttr=null;_this41.picture=null;_this41.presence=null;_this41.rename=null;_this41.whitespace=null;return _this41;}return config_createClass(Transform);}(XFAObject);var Type=/*#__PURE__*/function(_OptionObject28){config_inherits(Type,_OptionObject28);var _super125=config_createSuper(Type);function Type(attributes){config_classCallCheck(this,Type);return _super125.call(this,CONFIG_NS_ID,"type",["none","ascii85","asciiHex","ccittfax","flate","lzw","runLength","native","xdp","mergedXDP"]);}return config_createClass(Type);}(OptionObject);var Uri=/*#__PURE__*/function(_StringObject19){config_inherits(Uri,_StringObject19);var _super126=config_createSuper(Uri);function Uri(attributes){config_classCallCheck(this,Uri);return _super126.call(this,CONFIG_NS_ID,"uri");}return config_createClass(Uri);}(StringObject);var config_Validate=/*#__PURE__*/function(_OptionObject29){config_inherits(Validate,_OptionObject29);var _super127=config_createSuper(Validate);function Validate(attributes){config_classCallCheck(this,Validate);return _super127.call(this,CONFIG_NS_ID,"validate",["preSubmit","prePrint","preExecute","preSave"]);}return config_createClass(Validate);}(OptionObject);var ValidateApprovalSignatures=/*#__PURE__*/function(_ContentObject10){config_inherits(ValidateApprovalSignatures,_ContentObject10);var _super128=config_createSuper(ValidateApprovalSignatures);function ValidateApprovalSignatures(attributes){config_classCallCheck(this,ValidateApprovalSignatures);return _super128.call(this,CONFIG_NS_ID,"validateApprovalSignatures");}config_createClass(ValidateApprovalSignatures,[{key:$finalize,value:function value(){this[$content]=this[$content].trim().split(/\s+/).filter(function(x){return["docReady","postSign"].includes(x);});}}]);return ValidateApprovalSignatures;}(ContentObject);var ValidationMessaging=/*#__PURE__*/function(_OptionObject30){config_inherits(ValidationMessaging,_OptionObject30);var _super129=config_createSuper(ValidationMessaging);function ValidationMessaging(attributes){config_classCallCheck(this,ValidationMessaging);return _super129.call(this,CONFIG_NS_ID,"validationMessaging",["allMessagesIndividually","allMessagesTogether","firstMessageOnly","noMessages"]);}return config_createClass(ValidationMessaging);}(OptionObject);var Version=/*#__PURE__*/function(_OptionObject31){config_inherits(Version,_OptionObject31);var _super130=config_createSuper(Version);function Version(attributes){config_classCallCheck(this,Version);return _super130.call(this,CONFIG_NS_ID,"version",["1.7","1.6","1.5","1.4","1.3","1.2"]);}return config_createClass(Version);}(OptionObject);var VersionControl=/*#__PURE__*/function(_XFAObject41){config_inherits(VersionControl,_XFAObject41);var _super131=config_createSuper(VersionControl);function VersionControl(attributes){var _this42;config_classCallCheck(this,VersionControl);_this42=_super131.call(this,CONFIG_NS_ID,"VersionControl");_this42.outputBelow=getStringOption(attributes.outputBelow,["warn","error","update"]);_this42.sourceAbove=getStringOption(attributes.sourceAbove,["warn","error"]);_this42.sourceBelow=getStringOption(attributes.sourceBelow,["update","maintain"]);return _this42;}return config_createClass(VersionControl);}(XFAObject);var ViewerPreferences=/*#__PURE__*/function(_XFAObject42){config_inherits(ViewerPreferences,_XFAObject42);var _super132=config_createSuper(ViewerPreferences);function ViewerPreferences(attributes){var _this43;config_classCallCheck(this,ViewerPreferences);_this43=_super132.call(this,CONFIG_NS_ID,"viewerPreferences",true);_this43.ADBE_JSConsole=null;_this43.ADBE_JSDebugger=null;_this43.addViewerPreferences=null;_this43.duplexOption=null;_this43.enforce=null;_this43.numberOfCopies=null;_this43.pageRange=null;_this43.pickTrayByPDFSize=null;_this43.printScaling=null;return _this43;}return config_createClass(ViewerPreferences);}(XFAObject);var WebClient=/*#__PURE__*/function(_XFAObject43){config_inherits(WebClient,_XFAObject43);var _super133=config_createSuper(WebClient);function WebClient(attributes){var _this44;config_classCallCheck(this,WebClient);_this44=_super133.call(this,CONFIG_NS_ID,"webClient",true);_this44.name=attributes.name?attributes.name.trim():"";_this44.fontInfo=null;_this44.xdc=null;return _this44;}return config_createClass(WebClient);}(XFAObject);var Whitespace=/*#__PURE__*/function(_OptionObject32){config_inherits(Whitespace,_OptionObject32);var _super134=config_createSuper(Whitespace);function Whitespace(attributes){config_classCallCheck(this,Whitespace);return _super134.call(this,CONFIG_NS_ID,"whitespace",["preserve","ltrim","normalize","rtrim","trim"]);}return config_createClass(Whitespace);}(OptionObject);var config_Window=/*#__PURE__*/function(_ContentObject11){config_inherits(Window,_ContentObject11);var _super135=config_createSuper(Window);function Window(attributes){config_classCallCheck(this,Window);return _super135.call(this,CONFIG_NS_ID,"window");}config_createClass(Window,[{key:$finalize,value:function value(){var pair=this[$content].trim().split(/\s*,\s*/,2).map(function(x){return parseInt(x,10);});if(pair.some(function(x){return isNaN(x);})){this[$content]=[0,0];return;}if(pair.length===1){pair.push(pair[0]);}this[$content]=pair;}}]);return Window;}(ContentObject);var Xdc=/*#__PURE__*/function(_XFAObject44){config_inherits(Xdc,_XFAObject44);var _super136=config_createSuper(Xdc);function Xdc(attributes){var _this45;config_classCallCheck(this,Xdc);_this45=_super136.call(this,CONFIG_NS_ID,"xdc",true);_this45.uri=new XFAObjectArray();_this45.xsl=new XFAObjectArray();return _this45;}return config_createClass(Xdc);}(XFAObject);var Xdp=/*#__PURE__*/function(_XFAObject45){config_inherits(Xdp,_XFAObject45);var _super137=config_createSuper(Xdp);function Xdp(attributes){var _this46;config_classCallCheck(this,Xdp);_this46=_super137.call(this,CONFIG_NS_ID,"xdp",true);_this46.packets=null;return _this46;}return config_createClass(Xdp);}(XFAObject);var Xsl=/*#__PURE__*/function(_XFAObject46){config_inherits(Xsl,_XFAObject46);var _super138=config_createSuper(Xsl);function Xsl(attributes){var _this47;config_classCallCheck(this,Xsl);_this47=_super138.call(this,CONFIG_NS_ID,"xsl",true);_this47.debug=null;_this47.uri=null;return _this47;}return config_createClass(Xsl);}(XFAObject);var Zpl=/*#__PURE__*/function(_XFAObject47){config_inherits(Zpl,_XFAObject47);var _super139=config_createSuper(Zpl);function Zpl(attributes){var _this48;config_classCallCheck(this,Zpl);_this48=_super139.call(this,CONFIG_NS_ID,"zpl",true);_this48.name=attributes.name?attributes.name.trim():"";_this48.batchOutput=null;_this48.flipLabel=null;_this48.fontInfo=null;_this48.xdc=null;return _this48;}return config_createClass(Zpl);}(XFAObject);var ConfigNamespace=/*#__PURE__*/function(){function ConfigNamespace(){config_classCallCheck(this,ConfigNamespace);}config_createClass(ConfigNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(ConfigNamespace.hasOwnProperty(name)){return ConfigNamespace[name](attributes);}return undefined;}},{key:"acrobat",value:function acrobat(attrs){return new Acrobat(attrs);}},{key:"acrobat7",value:function acrobat7(attrs){return new Acrobat7(attrs);}},{key:"ADBE_JSConsole",value:function ADBE_JSConsole(attrs){return new _ADBE_JSConsole(attrs);}},{key:"ADBE_JSDebugger",value:function ADBE_JSDebugger(attrs){return new _ADBE_JSDebugger(attrs);}},{key:"addSilentPrint",value:function addSilentPrint(attrs){return new AddSilentPrint(attrs);}},{key:"addViewerPreferences",value:function addViewerPreferences(attrs){return new AddViewerPreferences(attrs);}},{key:"adjustData",value:function adjustData(attrs){return new AdjustData(attrs);}},{key:"adobeExtensionLevel",value:function adobeExtensionLevel(attrs){return new AdobeExtensionLevel(attrs);}},{key:"agent",value:function agent(attrs){return new Agent(attrs);}},{key:"alwaysEmbed",value:function alwaysEmbed(attrs){return new AlwaysEmbed(attrs);}},{key:"amd",value:function amd(attrs){return new Amd(attrs);}},{key:"area",value:function area(attrs){return new config_Area(attrs);}},{key:"attributes",value:function attributes(attrs){return new Attributes(attrs);}},{key:"autoSave",value:function autoSave(attrs){return new AutoSave(attrs);}},{key:"base",value:function base(attrs){return new Base(attrs);}},{key:"batchOutput",value:function batchOutput(attrs){return new BatchOutput(attrs);}},{key:"behaviorOverride",value:function behaviorOverride(attrs){return new BehaviorOverride(attrs);}},{key:"cache",value:function cache(attrs){return new Cache(attrs);}},{key:"change",value:function change(attrs){return new Change(attrs);}},{key:"common",value:function common(attrs){return new Common(attrs);}},{key:"compress",value:function compress(attrs){return new Compress(attrs);}},{key:"compressLogicalStructure",value:function compressLogicalStructure(attrs){return new CompressLogicalStructure(attrs);}},{key:"compressObjectStream",value:function compressObjectStream(attrs){return new CompressObjectStream(attrs);}},{key:"compression",value:function compression(attrs){return new Compression(attrs);}},{key:"config",value:function config(attrs){return new Config(attrs);}},{key:"conformance",value:function conformance(attrs){return new Conformance(attrs);}},{key:"contentCopy",value:function contentCopy(attrs){return new ContentCopy(attrs);}},{key:"copies",value:function copies(attrs){return new Copies(attrs);}},{key:"creator",value:function creator(attrs){return new Creator(attrs);}},{key:"currentPage",value:function currentPage(attrs){return new CurrentPage(attrs);}},{key:"data",value:function data(attrs){return new Data(attrs);}},{key:"debug",value:function debug(attrs){return new Debug(attrs);}},{key:"defaultTypeface",value:function defaultTypeface(attrs){return new DefaultTypeface(attrs);}},{key:"destination",value:function destination(attrs){return new Destination(attrs);}},{key:"documentAssembly",value:function documentAssembly(attrs){return new DocumentAssembly(attrs);}},{key:"driver",value:function driver(attrs){return new Driver(attrs);}},{key:"duplexOption",value:function duplexOption(attrs){return new DuplexOption(attrs);}},{key:"dynamicRender",value:function dynamicRender(attrs){return new DynamicRender(attrs);}},{key:"embed",value:function embed(attrs){return new Embed(attrs);}},{key:"encrypt",value:function encrypt(attrs){return new config_Encrypt(attrs);}},{key:"encryption",value:function encryption(attrs){return new config_Encryption(attrs);}},{key:"encryptionLevel",value:function encryptionLevel(attrs){return new EncryptionLevel(attrs);}},{key:"enforce",value:function enforce(attrs){return new Enforce(attrs);}},{key:"equate",value:function equate(attrs){return new Equate(attrs);}},{key:"equateRange",value:function equateRange(attrs){return new EquateRange(attrs);}},{key:"exclude",value:function exclude(attrs){return new Exclude(attrs);}},{key:"excludeNS",value:function excludeNS(attrs){return new ExcludeNS(attrs);}},{key:"flipLabel",value:function flipLabel(attrs){return new FlipLabel(attrs);}},{key:"fontInfo",value:function fontInfo(attrs){return new config_FontInfo(attrs);}},{key:"formFieldFilling",value:function formFieldFilling(attrs){return new FormFieldFilling(attrs);}},{key:"groupParent",value:function groupParent(attrs){return new GroupParent(attrs);}},{key:"ifEmpty",value:function ifEmpty(attrs){return new IfEmpty(attrs);}},{key:"includeXDPContent",value:function includeXDPContent(attrs){return new IncludeXDPContent(attrs);}},{key:"incrementalLoad",value:function incrementalLoad(attrs){return new IncrementalLoad(attrs);}},{key:"incrementalMerge",value:function incrementalMerge(attrs){return new IncrementalMerge(attrs);}},{key:"interactive",value:function interactive(attrs){return new Interactive(attrs);}},{key:"jog",value:function jog(attrs){return new Jog(attrs);}},{key:"labelPrinter",value:function labelPrinter(attrs){return new LabelPrinter(attrs);}},{key:"layout",value:function layout(attrs){return new Layout(attrs);}},{key:"level",value:function level(attrs){return new Level(attrs);}},{key:"linearized",value:function linearized(attrs){return new Linearized(attrs);}},{key:"locale",value:function locale(attrs){return new Locale(attrs);}},{key:"localeSet",value:function localeSet(attrs){return new LocaleSet(attrs);}},{key:"log",value:function log(attrs){return new Log(attrs);}},{key:"map",value:function map(attrs){return new MapElement(attrs);}},{key:"mediumInfo",value:function mediumInfo(attrs){return new MediumInfo(attrs);}},{key:"message",value:function message(attrs){return new config_Message(attrs);}},{key:"messaging",value:function messaging(attrs){return new Messaging(attrs);}},{key:"mode",value:function mode(attrs){return new Mode(attrs);}},{key:"modifyAnnots",value:function modifyAnnots(attrs){return new ModifyAnnots(attrs);}},{key:"msgId",value:function msgId(attrs){return new MsgId(attrs);}},{key:"nameAttr",value:function nameAttr(attrs){return new NameAttr(attrs);}},{key:"neverEmbed",value:function neverEmbed(attrs){return new NeverEmbed(attrs);}},{key:"numberOfCopies",value:function numberOfCopies(attrs){return new NumberOfCopies(attrs);}},{key:"openAction",value:function openAction(attrs){return new OpenAction(attrs);}},{key:"output",value:function output(attrs){return new Output(attrs);}},{key:"outputBin",value:function outputBin(attrs){return new OutputBin(attrs);}},{key:"outputXSL",value:function outputXSL(attrs){return new OutputXSL(attrs);}},{key:"overprint",value:function overprint(attrs){return new Overprint(attrs);}},{key:"packets",value:function packets(attrs){return new Packets(attrs);}},{key:"pageOffset",value:function pageOffset(attrs){return new PageOffset(attrs);}},{key:"pageRange",value:function pageRange(attrs){return new PageRange(attrs);}},{key:"pagination",value:function pagination(attrs){return new Pagination(attrs);}},{key:"paginationOverride",value:function paginationOverride(attrs){return new PaginationOverride(attrs);}},{key:"part",value:function part(attrs){return new Part(attrs);}},{key:"pcl",value:function pcl(attrs){return new Pcl(attrs);}},{key:"pdf",value:function pdf(attrs){return new Pdf(attrs);}},{key:"pdfa",value:function pdfa(attrs){return new Pdfa(attrs);}},{key:"permissions",value:function permissions(attrs){return new Permissions(attrs);}},{key:"pickTrayByPDFSize",value:function pickTrayByPDFSize(attrs){return new PickTrayByPDFSize(attrs);}},{key:"picture",value:function picture(attrs){return new config_Picture(attrs);}},{key:"plaintextMetadata",value:function plaintextMetadata(attrs){return new PlaintextMetadata(attrs);}},{key:"presence",value:function presence(attrs){return new Presence(attrs);}},{key:"present",value:function present(attrs){return new Present(attrs);}},{key:"print",value:function print(attrs){return new Print(attrs);}},{key:"printHighQuality",value:function printHighQuality(attrs){return new PrintHighQuality(attrs);}},{key:"printScaling",value:function printScaling(attrs){return new PrintScaling(attrs);}},{key:"printerName",value:function printerName(attrs){return new PrinterName(attrs);}},{key:"producer",value:function producer(attrs){return new Producer(attrs);}},{key:"ps",value:function ps(attrs){return new Ps(attrs);}},{key:"range",value:function range(attrs){return new Range(attrs);}},{key:"record",value:function record(attrs){return new Record(attrs);}},{key:"relevant",value:function relevant(attrs){return new Relevant(attrs);}},{key:"rename",value:function rename(attrs){return new Rename(attrs);}},{key:"renderPolicy",value:function renderPolicy(attrs){return new RenderPolicy(attrs);}},{key:"runScripts",value:function runScripts(attrs){return new RunScripts(attrs);}},{key:"script",value:function script(attrs){return new config_Script(attrs);}},{key:"scriptModel",value:function scriptModel(attrs){return new ScriptModel(attrs);}},{key:"severity",value:function severity(attrs){return new Severity(attrs);}},{key:"silentPrint",value:function silentPrint(attrs){return new SilentPrint(attrs);}},{key:"staple",value:function staple(attrs){return new Staple(attrs);}},{key:"startNode",value:function startNode(attrs){return new StartNode(attrs);}},{key:"startPage",value:function startPage(attrs){return new StartPage(attrs);}},{key:"submitFormat",value:function submitFormat(attrs){return new SubmitFormat(attrs);}},{key:"submitUrl",value:function submitUrl(attrs){return new SubmitUrl(attrs);}},{key:"subsetBelow",value:function subsetBelow(attrs){return new SubsetBelow(attrs);}},{key:"suppressBanner",value:function suppressBanner(attrs){return new SuppressBanner(attrs);}},{key:"tagged",value:function tagged(attrs){return new Tagged(attrs);}},{key:"template",value:function template(attrs){return new config_Template(attrs);}},{key:"templateCache",value:function templateCache(attrs){return new TemplateCache(attrs);}},{key:"threshold",value:function threshold(attrs){return new Threshold(attrs);}},{key:"to",value:function to(attrs){return new To(attrs);}},{key:"trace",value:function trace(attrs){return new Trace(attrs);}},{key:"transform",value:function transform(attrs){return new config_Transform(attrs);}},{key:"type",value:function type(attrs){return new Type(attrs);}},{key:"uri",value:function uri(attrs){return new Uri(attrs);}},{key:"validate",value:function validate(attrs){return new config_Validate(attrs);}},{key:"validateApprovalSignatures",value:function validateApprovalSignatures(attrs){return new ValidateApprovalSignatures(attrs);}},{key:"validationMessaging",value:function validationMessaging(attrs){return new ValidationMessaging(attrs);}},{key:"version",value:function version(attrs){return new Version(attrs);}},{key:"versionControl",value:function versionControl(attrs){return new VersionControl(attrs);}},{key:"viewerPreferences",value:function viewerPreferences(attrs){return new ViewerPreferences(attrs);}},{key:"webClient",value:function webClient(attrs){return new WebClient(attrs);}},{key:"whitespace",value:function whitespace(attrs){return new Whitespace(attrs);}},{key:"window",value:function window(attrs){return new config_Window(attrs);}},{key:"xdc",value:function xdc(attrs){return new Xdc(attrs);}},{key:"xdp",value:function xdp(attrs){return new Xdp(attrs);}},{key:"xsl",value:function xsl(attrs){return new Xsl(attrs);}},{key:"zpl",value:function zpl(attrs){return new Zpl(attrs);}}]);return ConfigNamespace;}();
;// CONCATENATED MODULE: ./src/core/xfa/connection_set.js
function connection_set_typeof(o){"@babel/helpers - typeof";return connection_set_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},connection_set_typeof(o);}function connection_set_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,connection_set_toPropertyKey(descriptor.key),descriptor);}}function connection_set_createClass(Constructor,protoProps,staticProps){if(protoProps)connection_set_defineProperties(Constructor.prototype,protoProps);if(staticProps)connection_set_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function connection_set_toPropertyKey(arg){var key=connection_set_toPrimitive(arg,"string");return connection_set_typeof(key)==="symbol"?key:String(key);}function connection_set_toPrimitive(input,hint){if(connection_set_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(connection_set_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function connection_set_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function connection_set_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)connection_set_setPrototypeOf(subClass,superClass);}function connection_set_setPrototypeOf(o,p){connection_set_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return connection_set_setPrototypeOf(o,p);}function connection_set_createSuper(Derived){var hasNativeReflectConstruct=connection_set_isNativeReflectConstruct();return function _createSuperInternal(){var Super=connection_set_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=connection_set_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return connection_set_possibleConstructorReturn(this,result);};}function connection_set_possibleConstructorReturn(self,call){if(call&&(connection_set_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return connection_set_assertThisInitialized(self);}function connection_set_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function connection_set_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function connection_set_getPrototypeOf(o){connection_set_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return connection_set_getPrototypeOf(o);}var CONNECTION_SET_NS_ID=NamespaceIds.connectionSet.id;var ConnectionSet=/*#__PURE__*/function(_XFAObject){connection_set_inherits(ConnectionSet,_XFAObject);var _super=connection_set_createSuper(ConnectionSet);function ConnectionSet(attributes){var _this;connection_set_classCallCheck(this,ConnectionSet);_this=_super.call(this,CONNECTION_SET_NS_ID,"connectionSet",true);_this.wsdlConnection=new XFAObjectArray();_this.xmlConnection=new XFAObjectArray();_this.xsdConnection=new XFAObjectArray();return _this;}return connection_set_createClass(ConnectionSet);}(XFAObject);var EffectiveInputPolicy=/*#__PURE__*/function(_XFAObject2){connection_set_inherits(EffectiveInputPolicy,_XFAObject2);var _super2=connection_set_createSuper(EffectiveInputPolicy);function EffectiveInputPolicy(attributes){var _this2;connection_set_classCallCheck(this,EffectiveInputPolicy);_this2=_super2.call(this,CONNECTION_SET_NS_ID,"effectiveInputPolicy");_this2.id=attributes.id||"";_this2.name=attributes.name||"";_this2.use=attributes.use||"";_this2.usehref=attributes.usehref||"";return _this2;}return connection_set_createClass(EffectiveInputPolicy);}(XFAObject);var EffectiveOutputPolicy=/*#__PURE__*/function(_XFAObject3){connection_set_inherits(EffectiveOutputPolicy,_XFAObject3);var _super3=connection_set_createSuper(EffectiveOutputPolicy);function EffectiveOutputPolicy(attributes){var _this3;connection_set_classCallCheck(this,EffectiveOutputPolicy);_this3=_super3.call(this,CONNECTION_SET_NS_ID,"effectiveOutputPolicy");_this3.id=attributes.id||"";_this3.name=attributes.name||"";_this3.use=attributes.use||"";_this3.usehref=attributes.usehref||"";return _this3;}return connection_set_createClass(EffectiveOutputPolicy);}(XFAObject);var Operation=/*#__PURE__*/function(_StringObject){connection_set_inherits(Operation,_StringObject);var _super4=connection_set_createSuper(Operation);function Operation(attributes){var _this4;connection_set_classCallCheck(this,Operation);_this4=_super4.call(this,CONNECTION_SET_NS_ID,"operation");_this4.id=attributes.id||"";_this4.input=attributes.input||"";_this4.name=attributes.name||"";_this4.output=attributes.output||"";_this4.use=attributes.use||"";_this4.usehref=attributes.usehref||"";return _this4;}return connection_set_createClass(Operation);}(StringObject);var RootElement=/*#__PURE__*/function(_StringObject2){connection_set_inherits(RootElement,_StringObject2);var _super5=connection_set_createSuper(RootElement);function RootElement(attributes){var _this5;connection_set_classCallCheck(this,RootElement);_this5=_super5.call(this,CONNECTION_SET_NS_ID,"rootElement");_this5.id=attributes.id||"";_this5.name=attributes.name||"";_this5.use=attributes.use||"";_this5.usehref=attributes.usehref||"";return _this5;}return connection_set_createClass(RootElement);}(StringObject);var SoapAction=/*#__PURE__*/function(_StringObject3){connection_set_inherits(SoapAction,_StringObject3);var _super6=connection_set_createSuper(SoapAction);function SoapAction(attributes){var _this6;connection_set_classCallCheck(this,SoapAction);_this6=_super6.call(this,CONNECTION_SET_NS_ID,"soapAction");_this6.id=attributes.id||"";_this6.name=attributes.name||"";_this6.use=attributes.use||"";_this6.usehref=attributes.usehref||"";return _this6;}return connection_set_createClass(SoapAction);}(StringObject);var SoapAddress=/*#__PURE__*/function(_StringObject4){connection_set_inherits(SoapAddress,_StringObject4);var _super7=connection_set_createSuper(SoapAddress);function SoapAddress(attributes){var _this7;connection_set_classCallCheck(this,SoapAddress);_this7=_super7.call(this,CONNECTION_SET_NS_ID,"soapAddress");_this7.id=attributes.id||"";_this7.name=attributes.name||"";_this7.use=attributes.use||"";_this7.usehref=attributes.usehref||"";return _this7;}return connection_set_createClass(SoapAddress);}(StringObject);var connection_set_Uri=/*#__PURE__*/function(_StringObject5){connection_set_inherits(Uri,_StringObject5);var _super8=connection_set_createSuper(Uri);function Uri(attributes){var _this8;connection_set_classCallCheck(this,Uri);_this8=_super8.call(this,CONNECTION_SET_NS_ID,"uri");_this8.id=attributes.id||"";_this8.name=attributes.name||"";_this8.use=attributes.use||"";_this8.usehref=attributes.usehref||"";return _this8;}return connection_set_createClass(Uri);}(StringObject);var WsdlAddress=/*#__PURE__*/function(_StringObject6){connection_set_inherits(WsdlAddress,_StringObject6);var _super9=connection_set_createSuper(WsdlAddress);function WsdlAddress(attributes){var _this9;connection_set_classCallCheck(this,WsdlAddress);_this9=_super9.call(this,CONNECTION_SET_NS_ID,"wsdlAddress");_this9.id=attributes.id||"";_this9.name=attributes.name||"";_this9.use=attributes.use||"";_this9.usehref=attributes.usehref||"";return _this9;}return connection_set_createClass(WsdlAddress);}(StringObject);var WsdlConnection=/*#__PURE__*/function(_XFAObject4){connection_set_inherits(WsdlConnection,_XFAObject4);var _super10=connection_set_createSuper(WsdlConnection);function WsdlConnection(attributes){var _this10;connection_set_classCallCheck(this,WsdlConnection);_this10=_super10.call(this,CONNECTION_SET_NS_ID,"wsdlConnection",true);_this10.dataDescription=attributes.dataDescription||"";_this10.name=attributes.name||"";_this10.effectiveInputPolicy=null;_this10.effectiveOutputPolicy=null;_this10.operation=null;_this10.soapAction=null;_this10.soapAddress=null;_this10.wsdlAddress=null;return _this10;}return connection_set_createClass(WsdlConnection);}(XFAObject);var XmlConnection=/*#__PURE__*/function(_XFAObject5){connection_set_inherits(XmlConnection,_XFAObject5);var _super11=connection_set_createSuper(XmlConnection);function XmlConnection(attributes){var _this11;connection_set_classCallCheck(this,XmlConnection);_this11=_super11.call(this,CONNECTION_SET_NS_ID,"xmlConnection",true);_this11.dataDescription=attributes.dataDescription||"";_this11.name=attributes.name||"";_this11.uri=null;return _this11;}return connection_set_createClass(XmlConnection);}(XFAObject);var XsdConnection=/*#__PURE__*/function(_XFAObject6){connection_set_inherits(XsdConnection,_XFAObject6);var _super12=connection_set_createSuper(XsdConnection);function XsdConnection(attributes){var _this12;connection_set_classCallCheck(this,XsdConnection);_this12=_super12.call(this,CONNECTION_SET_NS_ID,"xsdConnection",true);_this12.dataDescription=attributes.dataDescription||"";_this12.name=attributes.name||"";_this12.rootElement=null;_this12.uri=null;return _this12;}return connection_set_createClass(XsdConnection);}(XFAObject);var ConnectionSetNamespace=/*#__PURE__*/function(){function ConnectionSetNamespace(){connection_set_classCallCheck(this,ConnectionSetNamespace);}connection_set_createClass(ConnectionSetNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(ConnectionSetNamespace.hasOwnProperty(name)){return ConnectionSetNamespace[name](attributes);}return undefined;}},{key:"connectionSet",value:function connectionSet(attrs){return new ConnectionSet(attrs);}},{key:"effectiveInputPolicy",value:function effectiveInputPolicy(attrs){return new EffectiveInputPolicy(attrs);}},{key:"effectiveOutputPolicy",value:function effectiveOutputPolicy(attrs){return new EffectiveOutputPolicy(attrs);}},{key:"operation",value:function operation(attrs){return new Operation(attrs);}},{key:"rootElement",value:function rootElement(attrs){return new RootElement(attrs);}},{key:"soapAction",value:function soapAction(attrs){return new SoapAction(attrs);}},{key:"soapAddress",value:function soapAddress(attrs){return new SoapAddress(attrs);}},{key:"uri",value:function uri(attrs){return new connection_set_Uri(attrs);}},{key:"wsdlAddress",value:function wsdlAddress(attrs){return new WsdlAddress(attrs);}},{key:"wsdlConnection",value:function wsdlConnection(attrs){return new WsdlConnection(attrs);}},{key:"xmlConnection",value:function xmlConnection(attrs){return new XmlConnection(attrs);}},{key:"xsdConnection",value:function xsdConnection(attrs){return new XsdConnection(attrs);}}]);return ConnectionSetNamespace;}();
;// CONCATENATED MODULE: ./src/core/xfa/datasets.js
function datasets_typeof(o){"@babel/helpers - typeof";return datasets_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},datasets_typeof(o);}function datasets_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function datasets_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,datasets_toPropertyKey(descriptor.key),descriptor);}}function datasets_createClass(Constructor,protoProps,staticProps){if(protoProps)datasets_defineProperties(Constructor.prototype,protoProps);if(staticProps)datasets_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function datasets_toPropertyKey(arg){var key=datasets_toPrimitive(arg,"string");return datasets_typeof(key)==="symbol"?key:String(key);}function datasets_toPrimitive(input,hint){if(datasets_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(datasets_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function datasets_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)datasets_setPrototypeOf(subClass,superClass);}function datasets_setPrototypeOf(o,p){datasets_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return datasets_setPrototypeOf(o,p);}function datasets_createSuper(Derived){var hasNativeReflectConstruct=datasets_isNativeReflectConstruct();return function _createSuperInternal(){var Super=datasets_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=datasets_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return datasets_possibleConstructorReturn(this,result);};}function datasets_possibleConstructorReturn(self,call){if(call&&(datasets_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return datasets_assertThisInitialized(self);}function datasets_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function datasets_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function datasets_getPrototypeOf(o){datasets_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return datasets_getPrototypeOf(o);}var DATASETS_NS_ID=NamespaceIds.datasets.id;var datasets_Data=/*#__PURE__*/function(_XmlObject){datasets_inherits(Data,_XmlObject);var _super=datasets_createSuper(Data);function Data(attributes){datasets_classCallCheck(this,Data);return _super.call(this,DATASETS_NS_ID,"data",attributes);}datasets_createClass(Data,[{key:$isNsAgnostic,value:function value(){return true;}}]);return Data;}(XmlObject);var Datasets=/*#__PURE__*/function(_XFAObject){datasets_inherits(Datasets,_XFAObject);var _super2=datasets_createSuper(Datasets);function Datasets(attributes){var _this;datasets_classCallCheck(this,Datasets);_this=_super2.call(this,DATASETS_NS_ID,"datasets",true);_this.data=null;_this.Signature=null;return _this;}datasets_createClass(Datasets,[{key:$onChild,value:function value(child){var name=child[$nodeName];if(name==="data"&&child[$namespaceId]===DATASETS_NS_ID||name==="Signature"&&child[$namespaceId]===NamespaceIds.signature.id){this[name]=child;}this[$appendChild](child);}}]);return Datasets;}(XFAObject);var DatasetsNamespace=/*#__PURE__*/function(){function DatasetsNamespace(){datasets_classCallCheck(this,DatasetsNamespace);}datasets_createClass(DatasetsNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(DatasetsNamespace.hasOwnProperty(name)){return DatasetsNamespace[name](attributes);}return undefined;}},{key:"datasets",value:function datasets(attributes){return new Datasets(attributes);}},{key:"data",value:function data(attributes){return new datasets_Data(attributes);}}]);return DatasetsNamespace;}();
;// CONCATENATED MODULE: ./src/core/xfa/locale_set.js
function locale_set_typeof(o){"@babel/helpers - typeof";return locale_set_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},locale_set_typeof(o);}function locale_set_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,locale_set_toPropertyKey(descriptor.key),descriptor);}}function locale_set_createClass(Constructor,protoProps,staticProps){if(protoProps)locale_set_defineProperties(Constructor.prototype,protoProps);if(staticProps)locale_set_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function locale_set_toPropertyKey(arg){var key=locale_set_toPrimitive(arg,"string");return locale_set_typeof(key)==="symbol"?key:String(key);}function locale_set_toPrimitive(input,hint){if(locale_set_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(locale_set_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function locale_set_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function locale_set_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)locale_set_setPrototypeOf(subClass,superClass);}function locale_set_setPrototypeOf(o,p){locale_set_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return locale_set_setPrototypeOf(o,p);}function locale_set_createSuper(Derived){var hasNativeReflectConstruct=locale_set_isNativeReflectConstruct();return function _createSuperInternal(){var Super=locale_set_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=locale_set_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return locale_set_possibleConstructorReturn(this,result);};}function locale_set_possibleConstructorReturn(self,call){if(call&&(locale_set_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return locale_set_assertThisInitialized(self);}function locale_set_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function locale_set_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function locale_set_getPrototypeOf(o){locale_set_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return locale_set_getPrototypeOf(o);}var LOCALE_SET_NS_ID=NamespaceIds.localeSet.id;var CalendarSymbols=/*#__PURE__*/function(_XFAObject){locale_set_inherits(CalendarSymbols,_XFAObject);var _super=locale_set_createSuper(CalendarSymbols);function CalendarSymbols(attributes){var _this;locale_set_classCallCheck(this,CalendarSymbols);_this=_super.call(this,LOCALE_SET_NS_ID,"calendarSymbols",true);_this.name="gregorian";_this.dayNames=new XFAObjectArray(2);_this.eraNames=null;_this.meridiemNames=null;_this.monthNames=new XFAObjectArray(2);return _this;}return locale_set_createClass(CalendarSymbols);}(XFAObject);var CurrencySymbol=/*#__PURE__*/function(_StringObject){locale_set_inherits(CurrencySymbol,_StringObject);var _super2=locale_set_createSuper(CurrencySymbol);function CurrencySymbol(attributes){var _this2;locale_set_classCallCheck(this,CurrencySymbol);_this2=_super2.call(this,LOCALE_SET_NS_ID,"currencySymbol");_this2.name=getStringOption(attributes.name,["symbol","isoname","decimal"]);return _this2;}return locale_set_createClass(CurrencySymbol);}(StringObject);var CurrencySymbols=/*#__PURE__*/function(_XFAObject2){locale_set_inherits(CurrencySymbols,_XFAObject2);var _super3=locale_set_createSuper(CurrencySymbols);function CurrencySymbols(attributes){var _this3;locale_set_classCallCheck(this,CurrencySymbols);_this3=_super3.call(this,LOCALE_SET_NS_ID,"currencySymbols",true);_this3.currencySymbol=new XFAObjectArray(3);return _this3;}return locale_set_createClass(CurrencySymbols);}(XFAObject);var DatePattern=/*#__PURE__*/function(_StringObject2){locale_set_inherits(DatePattern,_StringObject2);var _super4=locale_set_createSuper(DatePattern);function DatePattern(attributes){var _this4;locale_set_classCallCheck(this,DatePattern);_this4=_super4.call(this,LOCALE_SET_NS_ID,"datePattern");_this4.name=getStringOption(attributes.name,["full","long","med","short"]);return _this4;}return locale_set_createClass(DatePattern);}(StringObject);var DatePatterns=/*#__PURE__*/function(_XFAObject3){locale_set_inherits(DatePatterns,_XFAObject3);var _super5=locale_set_createSuper(DatePatterns);function DatePatterns(attributes){var _this5;locale_set_classCallCheck(this,DatePatterns);_this5=_super5.call(this,LOCALE_SET_NS_ID,"datePatterns",true);_this5.datePattern=new XFAObjectArray(4);return _this5;}return locale_set_createClass(DatePatterns);}(XFAObject);var DateTimeSymbols=/*#__PURE__*/function(_ContentObject){locale_set_inherits(DateTimeSymbols,_ContentObject);var _super6=locale_set_createSuper(DateTimeSymbols);function DateTimeSymbols(attributes){locale_set_classCallCheck(this,DateTimeSymbols);return _super6.call(this,LOCALE_SET_NS_ID,"dateTimeSymbols");}return locale_set_createClass(DateTimeSymbols);}(ContentObject);var Day=/*#__PURE__*/function(_StringObject3){locale_set_inherits(Day,_StringObject3);var _super7=locale_set_createSuper(Day);function Day(attributes){locale_set_classCallCheck(this,Day);return _super7.call(this,LOCALE_SET_NS_ID,"day");}return locale_set_createClass(Day);}(StringObject);var DayNames=/*#__PURE__*/function(_XFAObject4){locale_set_inherits(DayNames,_XFAObject4);var _super8=locale_set_createSuper(DayNames);function DayNames(attributes){var _this6;locale_set_classCallCheck(this,DayNames);_this6=_super8.call(this,LOCALE_SET_NS_ID,"dayNames",true);_this6.abbr=getInteger({data:attributes.abbr,defaultValue:0,validate:function validate(x){return x===1;}});_this6.day=new XFAObjectArray(7);return _this6;}return locale_set_createClass(DayNames);}(XFAObject);var Era=/*#__PURE__*/function(_StringObject4){locale_set_inherits(Era,_StringObject4);var _super9=locale_set_createSuper(Era);function Era(attributes){locale_set_classCallCheck(this,Era);return _super9.call(this,LOCALE_SET_NS_ID,"era");}return locale_set_createClass(Era);}(StringObject);var EraNames=/*#__PURE__*/function(_XFAObject5){locale_set_inherits(EraNames,_XFAObject5);var _super10=locale_set_createSuper(EraNames);function EraNames(attributes){var _this7;locale_set_classCallCheck(this,EraNames);_this7=_super10.call(this,LOCALE_SET_NS_ID,"eraNames",true);_this7.era=new XFAObjectArray(2);return _this7;}return locale_set_createClass(EraNames);}(XFAObject);var locale_set_Locale=/*#__PURE__*/function(_XFAObject6){locale_set_inherits(Locale,_XFAObject6);var _super11=locale_set_createSuper(Locale);function Locale(attributes){var _this8;locale_set_classCallCheck(this,Locale);_this8=_super11.call(this,LOCALE_SET_NS_ID,"locale",true);_this8.desc=attributes.desc||"";_this8.name="isoname";_this8.calendarSymbols=null;_this8.currencySymbols=null;_this8.datePatterns=null;_this8.dateTimeSymbols=null;_this8.numberPatterns=null;_this8.numberSymbols=null;_this8.timePatterns=null;_this8.typeFaces=null;return _this8;}return locale_set_createClass(Locale);}(XFAObject);var locale_set_LocaleSet=/*#__PURE__*/function(_XFAObject7){locale_set_inherits(LocaleSet,_XFAObject7);var _super12=locale_set_createSuper(LocaleSet);function LocaleSet(attributes){var _this9;locale_set_classCallCheck(this,LocaleSet);_this9=_super12.call(this,LOCALE_SET_NS_ID,"localeSet",true);_this9.locale=new XFAObjectArray();return _this9;}return locale_set_createClass(LocaleSet);}(XFAObject);var Meridiem=/*#__PURE__*/function(_StringObject5){locale_set_inherits(Meridiem,_StringObject5);var _super13=locale_set_createSuper(Meridiem);function Meridiem(attributes){locale_set_classCallCheck(this,Meridiem);return _super13.call(this,LOCALE_SET_NS_ID,"meridiem");}return locale_set_createClass(Meridiem);}(StringObject);var MeridiemNames=/*#__PURE__*/function(_XFAObject8){locale_set_inherits(MeridiemNames,_XFAObject8);var _super14=locale_set_createSuper(MeridiemNames);function MeridiemNames(attributes){var _this10;locale_set_classCallCheck(this,MeridiemNames);_this10=_super14.call(this,LOCALE_SET_NS_ID,"meridiemNames",true);_this10.meridiem=new XFAObjectArray(2);return _this10;}return locale_set_createClass(MeridiemNames);}(XFAObject);var Month=/*#__PURE__*/function(_StringObject6){locale_set_inherits(Month,_StringObject6);var _super15=locale_set_createSuper(Month);function Month(attributes){locale_set_classCallCheck(this,Month);return _super15.call(this,LOCALE_SET_NS_ID,"month");}return locale_set_createClass(Month);}(StringObject);var MonthNames=/*#__PURE__*/function(_XFAObject9){locale_set_inherits(MonthNames,_XFAObject9);var _super16=locale_set_createSuper(MonthNames);function MonthNames(attributes){var _this11;locale_set_classCallCheck(this,MonthNames);_this11=_super16.call(this,LOCALE_SET_NS_ID,"monthNames",true);_this11.abbr=getInteger({data:attributes.abbr,defaultValue:0,validate:function validate(x){return x===1;}});_this11.month=new XFAObjectArray(12);return _this11;}return locale_set_createClass(MonthNames);}(XFAObject);var NumberPattern=/*#__PURE__*/function(_StringObject7){locale_set_inherits(NumberPattern,_StringObject7);var _super17=locale_set_createSuper(NumberPattern);function NumberPattern(attributes){var _this12;locale_set_classCallCheck(this,NumberPattern);_this12=_super17.call(this,LOCALE_SET_NS_ID,"numberPattern");_this12.name=getStringOption(attributes.name,["full","long","med","short"]);return _this12;}return locale_set_createClass(NumberPattern);}(StringObject);var NumberPatterns=/*#__PURE__*/function(_XFAObject10){locale_set_inherits(NumberPatterns,_XFAObject10);var _super18=locale_set_createSuper(NumberPatterns);function NumberPatterns(attributes){var _this13;locale_set_classCallCheck(this,NumberPatterns);_this13=_super18.call(this,LOCALE_SET_NS_ID,"numberPatterns",true);_this13.numberPattern=new XFAObjectArray(4);return _this13;}return locale_set_createClass(NumberPatterns);}(XFAObject);var NumberSymbol=/*#__PURE__*/function(_StringObject8){locale_set_inherits(NumberSymbol,_StringObject8);var _super19=locale_set_createSuper(NumberSymbol);function NumberSymbol(attributes){var _this14;locale_set_classCallCheck(this,NumberSymbol);_this14=_super19.call(this,LOCALE_SET_NS_ID,"numberSymbol");_this14.name=getStringOption(attributes.name,["decimal","grouping","percent","minus","zero"]);return _this14;}return locale_set_createClass(NumberSymbol);}(StringObject);var NumberSymbols=/*#__PURE__*/function(_XFAObject11){locale_set_inherits(NumberSymbols,_XFAObject11);var _super20=locale_set_createSuper(NumberSymbols);function NumberSymbols(attributes){var _this15;locale_set_classCallCheck(this,NumberSymbols);_this15=_super20.call(this,LOCALE_SET_NS_ID,"numberSymbols",true);_this15.numberSymbol=new XFAObjectArray(5);return _this15;}return locale_set_createClass(NumberSymbols);}(XFAObject);var TimePattern=/*#__PURE__*/function(_StringObject9){locale_set_inherits(TimePattern,_StringObject9);var _super21=locale_set_createSuper(TimePattern);function TimePattern(attributes){var _this16;locale_set_classCallCheck(this,TimePattern);_this16=_super21.call(this,LOCALE_SET_NS_ID,"timePattern");_this16.name=getStringOption(attributes.name,["full","long","med","short"]);return _this16;}return locale_set_createClass(TimePattern);}(StringObject);var TimePatterns=/*#__PURE__*/function(_XFAObject12){locale_set_inherits(TimePatterns,_XFAObject12);var _super22=locale_set_createSuper(TimePatterns);function TimePatterns(attributes){var _this17;locale_set_classCallCheck(this,TimePatterns);_this17=_super22.call(this,LOCALE_SET_NS_ID,"timePatterns",true);_this17.timePattern=new XFAObjectArray(4);return _this17;}return locale_set_createClass(TimePatterns);}(XFAObject);var TypeFace=/*#__PURE__*/function(_XFAObject13){locale_set_inherits(TypeFace,_XFAObject13);var _super23=locale_set_createSuper(TypeFace);function TypeFace(attributes){var _this18;locale_set_classCallCheck(this,TypeFace);_this18=_super23.call(this,LOCALE_SET_NS_ID,"typeFace",true);_this18.name=attributes.name|"";return _this18;}return locale_set_createClass(TypeFace);}(XFAObject);var TypeFaces=/*#__PURE__*/function(_XFAObject14){locale_set_inherits(TypeFaces,_XFAObject14);var _super24=locale_set_createSuper(TypeFaces);function TypeFaces(attributes){var _this19;locale_set_classCallCheck(this,TypeFaces);_this19=_super24.call(this,LOCALE_SET_NS_ID,"typeFaces",true);_this19.typeFace=new XFAObjectArray();return _this19;}return locale_set_createClass(TypeFaces);}(XFAObject);var LocaleSetNamespace=/*#__PURE__*/function(){function LocaleSetNamespace(){locale_set_classCallCheck(this,LocaleSetNamespace);}locale_set_createClass(LocaleSetNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(LocaleSetNamespace.hasOwnProperty(name)){return LocaleSetNamespace[name](attributes);}return undefined;}},{key:"calendarSymbols",value:function calendarSymbols(attrs){return new CalendarSymbols(attrs);}},{key:"currencySymbol",value:function currencySymbol(attrs){return new CurrencySymbol(attrs);}},{key:"currencySymbols",value:function currencySymbols(attrs){return new CurrencySymbols(attrs);}},{key:"datePattern",value:function datePattern(attrs){return new DatePattern(attrs);}},{key:"datePatterns",value:function datePatterns(attrs){return new DatePatterns(attrs);}},{key:"dateTimeSymbols",value:function dateTimeSymbols(attrs){return new DateTimeSymbols(attrs);}},{key:"day",value:function day(attrs){return new Day(attrs);}},{key:"dayNames",value:function dayNames(attrs){return new DayNames(attrs);}},{key:"era",value:function era(attrs){return new Era(attrs);}},{key:"eraNames",value:function eraNames(attrs){return new EraNames(attrs);}},{key:"locale",value:function locale(attrs){return new locale_set_Locale(attrs);}},{key:"localeSet",value:function localeSet(attrs){return new locale_set_LocaleSet(attrs);}},{key:"meridiem",value:function meridiem(attrs){return new Meridiem(attrs);}},{key:"meridiemNames",value:function meridiemNames(attrs){return new MeridiemNames(attrs);}},{key:"month",value:function month(attrs){return new Month(attrs);}},{key:"monthNames",value:function monthNames(attrs){return new MonthNames(attrs);}},{key:"numberPattern",value:function numberPattern(attrs){return new NumberPattern(attrs);}},{key:"numberPatterns",value:function numberPatterns(attrs){return new NumberPatterns(attrs);}},{key:"numberSymbol",value:function numberSymbol(attrs){return new NumberSymbol(attrs);}},{key:"numberSymbols",value:function numberSymbols(attrs){return new NumberSymbols(attrs);}},{key:"timePattern",value:function timePattern(attrs){return new TimePattern(attrs);}},{key:"timePatterns",value:function timePatterns(attrs){return new TimePatterns(attrs);}},{key:"typeFace",value:function typeFace(attrs){return new TypeFace(attrs);}},{key:"typeFaces",value:function typeFaces(attrs){return new TypeFaces(attrs);}}]);return LocaleSetNamespace;}();
;// CONCATENATED MODULE: ./src/core/xfa/signature.js
function signature_typeof(o){"@babel/helpers - typeof";return signature_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},signature_typeof(o);}function signature_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,signature_toPropertyKey(descriptor.key),descriptor);}}function signature_createClass(Constructor,protoProps,staticProps){if(protoProps)signature_defineProperties(Constructor.prototype,protoProps);if(staticProps)signature_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function signature_toPropertyKey(arg){var key=signature_toPrimitive(arg,"string");return signature_typeof(key)==="symbol"?key:String(key);}function signature_toPrimitive(input,hint){if(signature_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(signature_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function signature_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function signature_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)signature_setPrototypeOf(subClass,superClass);}function signature_setPrototypeOf(o,p){signature_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return signature_setPrototypeOf(o,p);}function signature_createSuper(Derived){var hasNativeReflectConstruct=signature_isNativeReflectConstruct();return function _createSuperInternal(){var Super=signature_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=signature_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return signature_possibleConstructorReturn(this,result);};}function signature_possibleConstructorReturn(self,call){if(call&&(signature_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return signature_assertThisInitialized(self);}function signature_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function signature_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function signature_getPrototypeOf(o){signature_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return signature_getPrototypeOf(o);}var SIGNATURE_NS_ID=NamespaceIds.signature.id;var signature_Signature=/*#__PURE__*/function(_XFAObject){signature_inherits(Signature,_XFAObject);var _super=signature_createSuper(Signature);function Signature(attributes){signature_classCallCheck(this,Signature);return _super.call(this,SIGNATURE_NS_ID,"signature",true);}return signature_createClass(Signature);}(XFAObject);var SignatureNamespace=/*#__PURE__*/function(){function SignatureNamespace(){signature_classCallCheck(this,SignatureNamespace);}signature_createClass(SignatureNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(SignatureNamespace.hasOwnProperty(name)){return SignatureNamespace[name](attributes);}return undefined;}},{key:"signature",value:function signature(attributes){return new signature_Signature(attributes);}}]);return SignatureNamespace;}();
;// CONCATENATED MODULE: ./src/core/xfa/stylesheet.js
function stylesheet_typeof(o){"@babel/helpers - typeof";return stylesheet_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},stylesheet_typeof(o);}function stylesheet_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,stylesheet_toPropertyKey(descriptor.key),descriptor);}}function stylesheet_createClass(Constructor,protoProps,staticProps){if(protoProps)stylesheet_defineProperties(Constructor.prototype,protoProps);if(staticProps)stylesheet_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function stylesheet_toPropertyKey(arg){var key=stylesheet_toPrimitive(arg,"string");return stylesheet_typeof(key)==="symbol"?key:String(key);}function stylesheet_toPrimitive(input,hint){if(stylesheet_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(stylesheet_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function stylesheet_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function stylesheet_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)stylesheet_setPrototypeOf(subClass,superClass);}function stylesheet_setPrototypeOf(o,p){stylesheet_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return stylesheet_setPrototypeOf(o,p);}function stylesheet_createSuper(Derived){var hasNativeReflectConstruct=stylesheet_isNativeReflectConstruct();return function _createSuperInternal(){var Super=stylesheet_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=stylesheet_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return stylesheet_possibleConstructorReturn(this,result);};}function stylesheet_possibleConstructorReturn(self,call){if(call&&(stylesheet_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return stylesheet_assertThisInitialized(self);}function stylesheet_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function stylesheet_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function stylesheet_getPrototypeOf(o){stylesheet_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return stylesheet_getPrototypeOf(o);}var STYLESHEET_NS_ID=NamespaceIds.stylesheet.id;var Stylesheet=/*#__PURE__*/function(_XFAObject){stylesheet_inherits(Stylesheet,_XFAObject);var _super=stylesheet_createSuper(Stylesheet);function Stylesheet(attributes){stylesheet_classCallCheck(this,Stylesheet);return _super.call(this,STYLESHEET_NS_ID,"stylesheet",true);}return stylesheet_createClass(Stylesheet);}(XFAObject);var StylesheetNamespace=/*#__PURE__*/function(){function StylesheetNamespace(){stylesheet_classCallCheck(this,StylesheetNamespace);}stylesheet_createClass(StylesheetNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(StylesheetNamespace.hasOwnProperty(name)){return StylesheetNamespace[name](attributes);}return undefined;}},{key:"stylesheet",value:function stylesheet(attributes){return new Stylesheet(attributes);}}]);return StylesheetNamespace;}();
;// CONCATENATED MODULE: ./src/core/xfa/xdp.js
function xdp_typeof(o){"@babel/helpers - typeof";return xdp_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},xdp_typeof(o);}function xdp_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function xdp_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,xdp_toPropertyKey(descriptor.key),descriptor);}}function xdp_createClass(Constructor,protoProps,staticProps){if(protoProps)xdp_defineProperties(Constructor.prototype,protoProps);if(staticProps)xdp_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function xdp_toPropertyKey(arg){var key=xdp_toPrimitive(arg,"string");return xdp_typeof(key)==="symbol"?key:String(key);}function xdp_toPrimitive(input,hint){if(xdp_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(xdp_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function xdp_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)xdp_setPrototypeOf(subClass,superClass);}function xdp_setPrototypeOf(o,p){xdp_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return xdp_setPrototypeOf(o,p);}function xdp_createSuper(Derived){var hasNativeReflectConstruct=xdp_isNativeReflectConstruct();return function _createSuperInternal(){var Super=xdp_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=xdp_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return xdp_possibleConstructorReturn(this,result);};}function xdp_possibleConstructorReturn(self,call){if(call&&(xdp_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return xdp_assertThisInitialized(self);}function xdp_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function xdp_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function xdp_getPrototypeOf(o){xdp_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return xdp_getPrototypeOf(o);}var XDP_NS_ID=NamespaceIds.xdp.id;var xdp_Xdp=/*#__PURE__*/function(_XFAObject){xdp_inherits(Xdp,_XFAObject);var _super=xdp_createSuper(Xdp);function Xdp(attributes){var _this;xdp_classCallCheck(this,Xdp);_this=_super.call(this,XDP_NS_ID,"xdp",true);_this.uuid=attributes.uuid||"";_this.timeStamp=attributes.timeStamp||"";_this.config=null;_this.connectionSet=null;_this.datasets=null;_this.localeSet=null;_this.stylesheet=new XFAObjectArray();_this.template=null;return _this;}xdp_createClass(Xdp,[{key:$onChildCheck,value:function value(child){var ns=NamespaceIds[child[$nodeName]];return ns&&child[$namespaceId]===ns.id;}}]);return Xdp;}(XFAObject);var XdpNamespace=/*#__PURE__*/function(){function XdpNamespace(){xdp_classCallCheck(this,XdpNamespace);}xdp_createClass(XdpNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(XdpNamespace.hasOwnProperty(name)){return XdpNamespace[name](attributes);}return undefined;}},{key:"xdp",value:function xdp(attributes){return new xdp_Xdp(attributes);}}]);return XdpNamespace;}();
;// CONCATENATED MODULE: ./src/core/xfa/xhtml.js
function xhtml_typeof(o){"@babel/helpers - typeof";return xhtml_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},xhtml_typeof(o);}function xhtml_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function xhtml_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,xhtml_toPropertyKey(descriptor.key),descriptor);}}function xhtml_createClass(Constructor,protoProps,staticProps){if(protoProps)xhtml_defineProperties(Constructor.prototype,protoProps);if(staticProps)xhtml_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function xhtml_toPropertyKey(arg){var key=xhtml_toPrimitive(arg,"string");return xhtml_typeof(key)==="symbol"?key:String(key);}function xhtml_toPrimitive(input,hint){if(xhtml_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(xhtml_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function xhtml_get(){if(typeof Reflect!=="undefined"&&Reflect.get){xhtml_get=Reflect.get.bind();}else{xhtml_get=function _get(target,property,receiver){var base=xhtml_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return xhtml_get.apply(this,arguments);}function xhtml_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=xhtml_getPrototypeOf(object);if(object===null)break;}return object;}function xhtml_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)xhtml_setPrototypeOf(subClass,superClass);}function xhtml_setPrototypeOf(o,p){xhtml_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return xhtml_setPrototypeOf(o,p);}function xhtml_createSuper(Derived){var hasNativeReflectConstruct=xhtml_isNativeReflectConstruct();return function _createSuperInternal(){var Super=xhtml_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=xhtml_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return xhtml_possibleConstructorReturn(this,result);};}function xhtml_possibleConstructorReturn(self,call){if(call&&(xhtml_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return xhtml_assertThisInitialized(self);}function xhtml_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function xhtml_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function xhtml_getPrototypeOf(o){xhtml_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return xhtml_getPrototypeOf(o);}function xhtml_slicedToArray(arr,i){return xhtml_arrayWithHoles(arr)||xhtml_iterableToArrayLimit(arr,i)||xhtml_unsupportedIterableToArray(arr,i)||xhtml_nonIterableRest();}function xhtml_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function xhtml_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function xhtml_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function xhtml_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=xhtml_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function xhtml_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return xhtml_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xhtml_arrayLikeToArray(o,minLen);}function xhtml_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}var XHTML_NS_ID=NamespaceIds.xhtml.id;var $richText=Symbol();var VALID_STYLES=new Set(["color","font","font-family","font-size","font-stretch","font-style","font-weight","margin","margin-bottom","margin-left","margin-right","margin-top","letter-spacing","line-height","orphans","page-break-after","page-break-before","page-break-inside","tab-interval","tab-stop","text-align","text-decoration","text-indent","vertical-align","widows","kerning-mode","xfa-font-horizontal-scale","xfa-font-vertical-scale","xfa-spacerun","xfa-tab-stops"]);var StyleMapping=new Map([["page-break-after","breakAfter"],["page-break-before","breakBefore"],["page-break-inside","breakInside"],["kerning-mode",function(value){return value==="none"?"none":"normal";}],["xfa-font-horizontal-scale",function(value){return"scaleX(".concat(Math.max(0,Math.min(parseInt(value)/100)).toFixed(2),")");}],["xfa-font-vertical-scale",function(value){return"scaleY(".concat(Math.max(0,Math.min(parseInt(value)/100)).toFixed(2),")");}],["xfa-spacerun",""],["xfa-tab-stops",""],["font-size",function(value,original){value=original.fontSize=getMeasurement(value);return measureToString(0.99*value);}],["letter-spacing",function(value){return measureToString(getMeasurement(value));}],["line-height",function(value){return measureToString(getMeasurement(value));}],["margin",function(value){return measureToString(getMeasurement(value));}],["margin-bottom",function(value){return measureToString(getMeasurement(value));}],["margin-left",function(value){return measureToString(getMeasurement(value));}],["margin-right",function(value){return measureToString(getMeasurement(value));}],["margin-top",function(value){return measureToString(getMeasurement(value));}],["text-indent",function(value){return measureToString(getMeasurement(value));}],["font-family",function(value){return value;}],["vertical-align",function(value){return measureToString(getMeasurement(value));}]]);var spacesRegExp=/\s+/g;var crlfRegExp=/[\r\n]+/g;var crlfForRichTextRegExp=/\r\n?/g;function mapStyle(styleStr,node,richText){var style=Object.create(null);if(!styleStr){return style;}var original=Object.create(null);var _iterator=xhtml_createForOfIteratorHelper(styleStr.split(";").map(function(s){return s.split(":",2);})),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=xhtml_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];var mapping=StyleMapping.get(key);if(mapping===""){continue;}var newValue=value;if(mapping){newValue=typeof mapping==="string"?mapping:mapping(value,original);}if(key.endsWith("scale")){style.transform=style.transform?"".concat(style[key]," ").concat(newValue):newValue;}else{style[key.replaceAll(/-([a-zA-Z])/g,function(_,x){return x.toUpperCase();})]=newValue;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(style.fontFamily){setFontFamily({typeface:style.fontFamily,weight:style.fontWeight||"normal",posture:style.fontStyle||"normal",size:original.fontSize||0},node,node[$globalData].fontFinder,style);}if(richText&&style.verticalAlign&&style.verticalAlign!=="0px"&&style.fontSize){var SUB_SUPER_SCRIPT_FACTOR=0.583;var VERTICAL_FACTOR=0.333;var fontSize=getMeasurement(style.fontSize);style.fontSize=measureToString(fontSize*SUB_SUPER_SCRIPT_FACTOR);style.verticalAlign=measureToString(Math.sign(getMeasurement(style.verticalAlign))*fontSize*VERTICAL_FACTOR);}if(richText&&style.fontSize){style.fontSize="calc(".concat(style.fontSize," * var(--scale-factor))");}fixTextIndent(style);return style;}function checkStyle(node){if(!node.style){return"";}return node.style.trim().split(/\s*;\s*/).filter(function(s){return!!s;}).map(function(s){return s.split(/\s*:\s*/,2);}).filter(function(_ref){var _ref2=xhtml_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if(key==="font-family"){node[$globalData].usedTypefaces.add(value);}return VALID_STYLES.has(key);}).map(function(kv){return kv.join(":");}).join(";");}var NoWhites=new Set(["body","html"]);var XhtmlObject=/*#__PURE__*/function(_XmlObject){xhtml_inherits(XhtmlObject,_XmlObject);var _super=xhtml_createSuper(XhtmlObject);function XhtmlObject(attributes,name){var _this;xhtml_classCallCheck(this,XhtmlObject);_this=_super.call(this,XHTML_NS_ID,name);_this[$richText]=false;_this.style=attributes.style||"";return _this;}xhtml_createClass(XhtmlObject,[{key:$clean,value:function value(builder){xhtml_get(xhtml_getPrototypeOf(XhtmlObject.prototype),$clean,this).call(this,builder);this.style=checkStyle(this);}},{key:$acceptWhitespace,value:function value(){return!NoWhites.has(this[$nodeName]);}},{key:$onText,value:function value(str){var richText=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!richText){str=str.replaceAll(crlfRegExp,"");if(!this.style.includes("xfa-spacerun:yes")){str=str.replaceAll(spacesRegExp," ");}}else{this[$richText]=true;}if(str){this[$content]+=str;}}},{key:$pushGlyphs,value:function value(measure){var mustPop=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var xfaFont=Object.create(null);var margin={top:NaN,bottom:NaN,left:NaN,right:NaN};var lineHeight=null;var _iterator2=xhtml_createForOfIteratorHelper(this.style.split(";").map(function(s){return s.split(":",2);})),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=xhtml_slicedToArray(_step2.value,2),key=_step2$value[0],value=_step2$value[1];switch(key){case"font-family":xfaFont.typeface=stripQuotes(value);break;case"font-size":xfaFont.size=getMeasurement(value);break;case"font-weight":xfaFont.weight=value;break;case"font-style":xfaFont.posture=value;break;case"letter-spacing":xfaFont.letterSpacing=getMeasurement(value);break;case"margin":var values=value.split(/ \t/).map(function(x){return getMeasurement(x);});switch(values.length){case 1:margin.top=margin.bottom=margin.left=margin.right=values[0];break;case 2:margin.top=margin.bottom=values[0];margin.left=margin.right=values[1];break;case 3:margin.top=values[0];margin.bottom=values[2];margin.left=margin.right=values[1];break;case 4:margin.top=values[0];margin.left=values[1];margin.bottom=values[2];margin.right=values[3];break;}break;case"margin-top":margin.top=getMeasurement(value);break;case"margin-bottom":margin.bottom=getMeasurement(value);break;case"margin-left":margin.left=getMeasurement(value);break;case"margin-right":margin.right=getMeasurement(value);break;case"line-height":lineHeight=getMeasurement(value);break;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}measure.pushData(xfaFont,margin,lineHeight);if(this[$content]){measure.addString(this[$content]);}else{var _iterator3=xhtml_createForOfIteratorHelper(this[$getChildren]()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var child=_step3.value;if(child[$nodeName]==="#text"){measure.addString(child[$content]);continue;}child[$pushGlyphs](measure);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}if(mustPop){measure.popFont();}}},{key:$toHTML,value:function value(availableSpace){var children=[];this[$extra]={children:children};this[$childrenToHTML]({});if(children.length===0&&!this[$content]){return HTMLResult.EMPTY;}var value;if(this[$richText]){value=this[$content]?this[$content].replaceAll(crlfForRichTextRegExp,"\n"):undefined;}else{value=this[$content]||undefined;}return HTMLResult.success({name:this[$nodeName],attributes:{href:this.href,style:mapStyle(this.style,this,this[$richText])},children:children,value:value});}}]);return XhtmlObject;}(XmlObject);var A=/*#__PURE__*/function(_XhtmlObject){xhtml_inherits(A,_XhtmlObject);var _super2=xhtml_createSuper(A);function A(attributes){var _this2;xhtml_classCallCheck(this,A);_this2=_super2.call(this,attributes,"a");_this2.href=fixURL(attributes.href)||"";return _this2;}return xhtml_createClass(A);}(XhtmlObject);var B=/*#__PURE__*/function(_XhtmlObject2){xhtml_inherits(B,_XhtmlObject2);var _super3=xhtml_createSuper(B);function B(attributes){xhtml_classCallCheck(this,B);return _super3.call(this,attributes,"b");}xhtml_createClass(B,[{key:$pushGlyphs,value:function value(measure){measure.pushFont({weight:"bold"});xhtml_get(xhtml_getPrototypeOf(B.prototype),$pushGlyphs,this).call(this,measure);measure.popFont();}}]);return B;}(XhtmlObject);var Body=/*#__PURE__*/function(_XhtmlObject3){xhtml_inherits(Body,_XhtmlObject3);var _super4=xhtml_createSuper(Body);function Body(attributes){xhtml_classCallCheck(this,Body);return _super4.call(this,attributes,"body");}xhtml_createClass(Body,[{key:$toHTML,value:function value(availableSpace){var res=xhtml_get(xhtml_getPrototypeOf(Body.prototype),$toHTML,this).call(this,availableSpace);var html=res.html;if(!html){return HTMLResult.EMPTY;}html.name="div";html.attributes.class=["xfaRich"];return res;}}]);return Body;}(XhtmlObject);var Br=/*#__PURE__*/function(_XhtmlObject4){xhtml_inherits(Br,_XhtmlObject4);var _super5=xhtml_createSuper(Br);function Br(attributes){xhtml_classCallCheck(this,Br);return _super5.call(this,attributes,"br");}xhtml_createClass(Br,[{key:$text,value:function value(){return"\n";}},{key:$pushGlyphs,value:function value(measure){measure.addString("\n");}},{key:$toHTML,value:function value(availableSpace){return HTMLResult.success({name:"br"});}}]);return Br;}(XhtmlObject);var Html=/*#__PURE__*/function(_XhtmlObject5){xhtml_inherits(Html,_XhtmlObject5);var _super6=xhtml_createSuper(Html);function Html(attributes){xhtml_classCallCheck(this,Html);return _super6.call(this,attributes,"html");}xhtml_createClass(Html,[{key:$toHTML,value:function value(availableSpace){var children=[];this[$extra]={children:children};this[$childrenToHTML]({});if(children.length===0){return HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},value:this[$content]||""});}if(children.length===1){var _child$attributes;var child=children[0];if((_child$attributes=child.attributes)!==null&&_child$attributes!==void 0&&_child$attributes.class.includes("xfaRich")){return HTMLResult.success(child);}}return HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},children:children});}}]);return Html;}(XhtmlObject);var I=/*#__PURE__*/function(_XhtmlObject6){xhtml_inherits(I,_XhtmlObject6);var _super7=xhtml_createSuper(I);function I(attributes){xhtml_classCallCheck(this,I);return _super7.call(this,attributes,"i");}xhtml_createClass(I,[{key:$pushGlyphs,value:function value(measure){measure.pushFont({posture:"italic"});xhtml_get(xhtml_getPrototypeOf(I.prototype),$pushGlyphs,this).call(this,measure);measure.popFont();}}]);return I;}(XhtmlObject);var Li=/*#__PURE__*/function(_XhtmlObject7){xhtml_inherits(Li,_XhtmlObject7);var _super8=xhtml_createSuper(Li);function Li(attributes){xhtml_classCallCheck(this,Li);return _super8.call(this,attributes,"li");}return xhtml_createClass(Li);}(XhtmlObject);var Ol=/*#__PURE__*/function(_XhtmlObject8){xhtml_inherits(Ol,_XhtmlObject8);var _super9=xhtml_createSuper(Ol);function Ol(attributes){xhtml_classCallCheck(this,Ol);return _super9.call(this,attributes,"ol");}return xhtml_createClass(Ol);}(XhtmlObject);var P=/*#__PURE__*/function(_XhtmlObject9){xhtml_inherits(P,_XhtmlObject9);var _super10=xhtml_createSuper(P);function P(attributes){xhtml_classCallCheck(this,P);return _super10.call(this,attributes,"p");}xhtml_createClass(P,[{key:$pushGlyphs,value:function value(measure){xhtml_get(xhtml_getPrototypeOf(P.prototype),$pushGlyphs,this).call(this,measure,false);measure.addString("\n");measure.addPara();measure.popFont();}},{key:$text,value:function value(){var siblings=this[$getParent]()[$getChildren]();if(siblings.at(-1)===this){return xhtml_get(xhtml_getPrototypeOf(P.prototype),$text,this).call(this);}return xhtml_get(xhtml_getPrototypeOf(P.prototype),$text,this).call(this)+"\n";}}]);return P;}(XhtmlObject);var Span=/*#__PURE__*/function(_XhtmlObject10){xhtml_inherits(Span,_XhtmlObject10);var _super11=xhtml_createSuper(Span);function Span(attributes){xhtml_classCallCheck(this,Span);return _super11.call(this,attributes,"span");}return xhtml_createClass(Span);}(XhtmlObject);var Sub=/*#__PURE__*/function(_XhtmlObject11){xhtml_inherits(Sub,_XhtmlObject11);var _super12=xhtml_createSuper(Sub);function Sub(attributes){xhtml_classCallCheck(this,Sub);return _super12.call(this,attributes,"sub");}return xhtml_createClass(Sub);}(XhtmlObject);var Sup=/*#__PURE__*/function(_XhtmlObject12){xhtml_inherits(Sup,_XhtmlObject12);var _super13=xhtml_createSuper(Sup);function Sup(attributes){xhtml_classCallCheck(this,Sup);return _super13.call(this,attributes,"sup");}return xhtml_createClass(Sup);}(XhtmlObject);var Ul=/*#__PURE__*/function(_XhtmlObject13){xhtml_inherits(Ul,_XhtmlObject13);var _super14=xhtml_createSuper(Ul);function Ul(attributes){xhtml_classCallCheck(this,Ul);return _super14.call(this,attributes,"ul");}return xhtml_createClass(Ul);}(XhtmlObject);var XhtmlNamespace=/*#__PURE__*/function(){function XhtmlNamespace(){xhtml_classCallCheck(this,XhtmlNamespace);}xhtml_createClass(XhtmlNamespace,null,[{key:$buildXFAObject,value:function value(name,attributes){if(XhtmlNamespace.hasOwnProperty(name)){return XhtmlNamespace[name](attributes);}return undefined;}},{key:"a",value:function a(attributes){return new A(attributes);}},{key:"b",value:function b(attributes){return new B(attributes);}},{key:"body",value:function body(attributes){return new Body(attributes);}},{key:"br",value:function br(attributes){return new Br(attributes);}},{key:"html",value:function html(attributes){return new Html(attributes);}},{key:"i",value:function i(attributes){return new I(attributes);}},{key:"li",value:function li(attributes){return new Li(attributes);}},{key:"ol",value:function ol(attributes){return new Ol(attributes);}},{key:"p",value:function p(attributes){return new P(attributes);}},{key:"span",value:function span(attributes){return new Span(attributes);}},{key:"sub",value:function sub(attributes){return new Sub(attributes);}},{key:"sup",value:function sup(attributes){return new Sup(attributes);}},{key:"ul",value:function ul(attributes){return new Ul(attributes);}}]);return XhtmlNamespace;}();
;// CONCATENATED MODULE: ./src/core/xfa/setup.js
var NamespaceSetUp={config:ConfigNamespace,connection:ConnectionSetNamespace,datasets:DatasetsNamespace,localeSet:LocaleSetNamespace,signature:SignatureNamespace,stylesheet:StylesheetNamespace,template:TemplateNamespace,xdp:XdpNamespace,xhtml:XhtmlNamespace};
;// CONCATENATED MODULE: ./src/core/xfa/unknown.js
function unknown_typeof(o){"@babel/helpers - typeof";return unknown_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},unknown_typeof(o);}function unknown_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function unknown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,unknown_toPropertyKey(descriptor.key),descriptor);}}function unknown_createClass(Constructor,protoProps,staticProps){if(protoProps)unknown_defineProperties(Constructor.prototype,protoProps);if(staticProps)unknown_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function unknown_toPropertyKey(arg){var key=unknown_toPrimitive(arg,"string");return unknown_typeof(key)==="symbol"?key:String(key);}function unknown_toPrimitive(input,hint){if(unknown_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(unknown_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var UnknownNamespace=/*#__PURE__*/function(){function UnknownNamespace(nsId){unknown_classCallCheck(this,UnknownNamespace);this.namespaceId=nsId;}unknown_createClass(UnknownNamespace,[{key:$buildXFAObject,value:function value(name,attributes){return new XmlObject(this.namespaceId,name,attributes);}}]);return UnknownNamespace;}();
;// CONCATENATED MODULE: ./src/core/xfa/builder.js
function builder_typeof(o){"@babel/helpers - typeof";return builder_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},builder_typeof(o);}function builder_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=builder_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function builder_slicedToArray(arr,i){return builder_arrayWithHoles(arr)||builder_iterableToArrayLimit(arr,i)||builder_unsupportedIterableToArray(arr,i)||builder_nonIterableRest();}function builder_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function builder_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function builder_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function builder_toConsumableArray(arr){return builder_arrayWithoutHoles(arr)||builder_iterableToArray(arr)||builder_unsupportedIterableToArray(arr)||builder_nonIterableSpread();}function builder_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function builder_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return builder_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return builder_arrayLikeToArray(o,minLen);}function builder_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function builder_arrayWithoutHoles(arr){if(Array.isArray(arr))return builder_arrayLikeToArray(arr);}function builder_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function builder_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function builder_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,builder_toPropertyKey(descriptor.key),descriptor);}}function builder_createClass(Constructor,protoProps,staticProps){if(protoProps)builder_defineProperties(Constructor.prototype,protoProps);if(staticProps)builder_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function builder_toPropertyKey(arg){var key=builder_toPrimitive(arg,"string");return builder_typeof(key)==="symbol"?key:String(key);}function builder_toPrimitive(input,hint){if(builder_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(builder_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function builder_get(){if(typeof Reflect!=="undefined"&&Reflect.get){builder_get=Reflect.get.bind();}else{builder_get=function _get(target,property,receiver){var base=builder_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return builder_get.apply(this,arguments);}function builder_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=builder_getPrototypeOf(object);if(object===null)break;}return object;}function builder_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)builder_setPrototypeOf(subClass,superClass);}function builder_setPrototypeOf(o,p){builder_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return builder_setPrototypeOf(o,p);}function builder_createSuper(Derived){var hasNativeReflectConstruct=builder_isNativeReflectConstruct();return function _createSuperInternal(){var Super=builder_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=builder_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return builder_possibleConstructorReturn(this,result);};}function builder_possibleConstructorReturn(self,call){if(call&&(builder_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return builder_assertThisInitialized(self);}function builder_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function builder_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function builder_getPrototypeOf(o){builder_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return builder_getPrototypeOf(o);}var Root=/*#__PURE__*/function(_XFAObject){builder_inherits(Root,_XFAObject);var _super=builder_createSuper(Root);function Root(ids){var _this;builder_classCallCheck(this,Root);_this=_super.call(this,-1,"root",Object.create(null));_this.element=null;_this[$ids]=ids;return _this;}builder_createClass(Root,[{key:$onChild,value:function value(child){this.element=child;return true;}},{key:$finalize,value:function value(){builder_get(builder_getPrototypeOf(Root.prototype),$finalize,this).call(this);if(this.element.template instanceof Template){this[$ids].set($root,this.element);this.element.template[$resolvePrototypes](this[$ids]);this.element.template[$ids]=this[$ids];}}}]);return Root;}(XFAObject);var Empty=/*#__PURE__*/function(_XFAObject2){builder_inherits(Empty,_XFAObject2);var _super2=builder_createSuper(Empty);function Empty(){builder_classCallCheck(this,Empty);return _super2.call(this,-1,"",Object.create(null));}builder_createClass(Empty,[{key:$onChild,value:function value(_){return false;}}]);return Empty;}(XFAObject);var Builder=/*#__PURE__*/function(){function Builder(){var rootNameSpace=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;builder_classCallCheck(this,Builder);this._namespaceStack=[];this._nsAgnosticLevel=0;this._namespacePrefixes=new Map();this._namespaces=new Map();this._nextNsId=Math.max.apply(Math,builder_toConsumableArray(Object.values(NamespaceIds).map(function(_ref){var id=_ref.id;return id;})));this._currentNamespace=rootNameSpace||new UnknownNamespace(++this._nextNsId);}builder_createClass(Builder,[{key:"buildRoot",value:function buildRoot(ids){return new Root(ids);}},{key:"build",value:function build(_ref2){var nsPrefix=_ref2.nsPrefix,name=_ref2.name,attributes=_ref2.attributes,namespace=_ref2.namespace,prefixes=_ref2.prefixes;var hasNamespaceDef=namespace!==null;if(hasNamespaceDef){this._namespaceStack.push(this._currentNamespace);this._currentNamespace=this._searchNamespace(namespace);}if(prefixes){this._addNamespacePrefix(prefixes);}if(attributes.hasOwnProperty($nsAttributes)){var dataTemplate=NamespaceSetUp.datasets;var nsAttrs=attributes[$nsAttributes];var xfaAttrs=null;for(var _i=0,_Object$entries=Object.entries(nsAttrs);_i<_Object$entries.length;_i++){var _Object$entries$_i=builder_slicedToArray(_Object$entries[_i],2),ns=_Object$entries$_i[0],attrs=_Object$entries$_i[1];var nsToUse=this._getNamespaceToUse(ns);if(nsToUse===dataTemplate){xfaAttrs={xfa:attrs};break;}}if(xfaAttrs){attributes[$nsAttributes]=xfaAttrs;}else{delete attributes[$nsAttributes];}}var namespaceToUse=this._getNamespaceToUse(nsPrefix);var node=(namespaceToUse===null||namespaceToUse===void 0?void 0:namespaceToUse[$buildXFAObject](name,attributes))||new Empty();if(node[$isNsAgnostic]()){this._nsAgnosticLevel++;}if(hasNamespaceDef||prefixes||node[$isNsAgnostic]()){node[$cleanup]={hasNamespace:hasNamespaceDef,prefixes:prefixes,nsAgnostic:node[$isNsAgnostic]()};}return node;}},{key:"isNsAgnostic",value:function isNsAgnostic(){return this._nsAgnosticLevel>0;}},{key:"_searchNamespace",value:function _searchNamespace(nsName){var ns=this._namespaces.get(nsName);if(ns){return ns;}for(var _i2=0,_Object$entries2=Object.entries(NamespaceIds);_i2<_Object$entries2.length;_i2++){var _Object$entries2$_i=builder_slicedToArray(_Object$entries2[_i2],2),name=_Object$entries2$_i[0],check=_Object$entries2$_i[1].check;if(check(nsName)){ns=NamespaceSetUp[name];if(ns){this._namespaces.set(nsName,ns);return ns;}break;}}ns=new UnknownNamespace(++this._nextNsId);this._namespaces.set(nsName,ns);return ns;}},{key:"_addNamespacePrefix",value:function _addNamespacePrefix(prefixes){var _iterator=builder_createForOfIteratorHelper(prefixes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_step.value,prefix=_step$value.prefix,value=_step$value.value;var namespace=this._searchNamespace(value);var prefixStack=this._namespacePrefixes.get(prefix);if(!prefixStack){prefixStack=[];this._namespacePrefixes.set(prefix,prefixStack);}prefixStack.push(namespace);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:"_getNamespaceToUse",value:function _getNamespaceToUse(prefix){if(!prefix){return this._currentNamespace;}var prefixStack=this._namespacePrefixes.get(prefix);if((prefixStack===null||prefixStack===void 0?void 0:prefixStack.length)>0){return prefixStack.at(-1);}warn("Unknown namespace prefix: ".concat(prefix,"."));return null;}},{key:"clean",value:function clean(data){var _this2=this;var hasNamespace=data.hasNamespace,prefixes=data.prefixes,nsAgnostic=data.nsAgnostic;if(hasNamespace){this._currentNamespace=this._namespaceStack.pop();}if(prefixes){prefixes.forEach(function(_ref3){var prefix=_ref3.prefix;_this2._namespacePrefixes.get(prefix).pop();});}if(nsAgnostic){this._nsAgnosticLevel--;}}}]);return Builder;}();
;// CONCATENATED MODULE: ./src/core/xfa/parser.js
function xfa_parser_typeof(o){"@babel/helpers - typeof";return xfa_parser_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},xfa_parser_typeof(o);}function parser_slicedToArray(arr,i){return parser_arrayWithHoles(arr)||parser_iterableToArrayLimit(arr,i)||parser_unsupportedIterableToArray(arr,i)||parser_nonIterableRest();}function parser_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function parser_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function parser_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function parser_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=parser_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function parser_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return parser_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return parser_arrayLikeToArray(o,minLen);}function parser_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function xfa_parser_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function xfa_parser_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,xfa_parser_toPropertyKey(descriptor.key),descriptor);}}function xfa_parser_createClass(Constructor,protoProps,staticProps){if(protoProps)xfa_parser_defineProperties(Constructor.prototype,protoProps);if(staticProps)xfa_parser_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function xfa_parser_toPropertyKey(arg){var key=xfa_parser_toPrimitive(arg,"string");return xfa_parser_typeof(key)==="symbol"?key:String(key);}function xfa_parser_toPrimitive(input,hint){if(xfa_parser_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(xfa_parser_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function parser_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)parser_setPrototypeOf(subClass,superClass);}function parser_setPrototypeOf(o,p){parser_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return parser_setPrototypeOf(o,p);}function parser_createSuper(Derived){var hasNativeReflectConstruct=parser_isNativeReflectConstruct();return function _createSuperInternal(){var Super=parser_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=parser_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return parser_possibleConstructorReturn(this,result);};}function parser_possibleConstructorReturn(self,call){if(call&&(xfa_parser_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return parser_assertThisInitialized(self);}function parser_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function parser_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function parser_getPrototypeOf(o){parser_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return parser_getPrototypeOf(o);}var XFAParser=/*#__PURE__*/function(_XMLParserBase){parser_inherits(XFAParser,_XMLParserBase);var _super=parser_createSuper(XFAParser);function XFAParser(){var _this;var rootNameSpace=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var richText=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;xfa_parser_classCallCheck(this,XFAParser);_this=_super.call(this);_this._builder=new Builder(rootNameSpace);_this._stack=[];_this._globalData={usedTypefaces:new Set()};_this._ids=new Map();_this._current=_this._builder.buildRoot(_this._ids);_this._errorCode=XMLParserErrorCode.NoError;_this._whiteRegex=/^\s+$/;_this._nbsps=/\xa0+/g;_this._richText=richText;return _this;}xfa_parser_createClass(XFAParser,[{key:"parse",value:function parse(data){this.parseXml(data);if(this._errorCode!==XMLParserErrorCode.NoError){return undefined;}this._current[$finalize]();return this._current.element;}},{key:"onText",value:function onText(text){text=text.replace(this._nbsps,function(match){return match.slice(1)+" ";});if(this._richText||this._current[$acceptWhitespace]()){this._current[$onText](text,this._richText);return;}if(this._whiteRegex.test(text)){return;}this._current[$onText](text.trim());}},{key:"onCdata",value:function onCdata(text){this._current[$onText](text);}},{key:"_mkAttributes",value:function _mkAttributes(attributes,tagName){var namespace=null;var prefixes=null;var attributeObj=Object.create({});var _iterator=parser_createForOfIteratorHelper(attributes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_step.value,name=_step$value.name,value=_step$value.value;if(name==="xmlns"){if(!namespace){namespace=value;}else{warn("XFA - multiple namespace definition in <".concat(tagName,">"));}}else if(name.startsWith("xmlns:")){var prefix=name.substring("xmlns:".length);if(!prefixes){prefixes=[];}prefixes.push({prefix:prefix,value:value});}else{var i=name.indexOf(":");if(i===-1){attributeObj[name]=value;}else{var _nsAttrs;var nsAttrs=attributeObj[$nsAttributes];if(!nsAttrs){nsAttrs=attributeObj[$nsAttributes]=Object.create(null);}var _ref=[name.slice(0,i),name.slice(i+1)],ns=_ref[0],attrName=_ref[1];var attrs=(_nsAttrs=nsAttrs)[ns]||(_nsAttrs[ns]=Object.create(null));attrs[attrName]=value;}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return[namespace,prefixes,attributeObj];}},{key:"_getNameAndPrefix",value:function _getNameAndPrefix(name,nsAgnostic){var i=name.indexOf(":");if(i===-1){return[name,null];}return[name.substring(i+1),nsAgnostic?"":name.substring(0,i)];}},{key:"onBeginElement",value:function onBeginElement(tagName,attributes,isEmpty){var _this$_mkAttributes=this._mkAttributes(attributes,tagName),_this$_mkAttributes2=parser_slicedToArray(_this$_mkAttributes,3),namespace=_this$_mkAttributes2[0],prefixes=_this$_mkAttributes2[1],attributesObj=_this$_mkAttributes2[2];var _this$_getNameAndPref=this._getNameAndPrefix(tagName,this._builder.isNsAgnostic()),_this$_getNameAndPref2=parser_slicedToArray(_this$_getNameAndPref,2),name=_this$_getNameAndPref2[0],nsPrefix=_this$_getNameAndPref2[1];var node=this._builder.build({nsPrefix:nsPrefix,name:name,attributes:attributesObj,namespace:namespace,prefixes:prefixes});node[$globalData]=this._globalData;if(isEmpty){node[$finalize]();if(this._current[$onChild](node)){node[$setId](this._ids);}node[$clean](this._builder);return;}this._stack.push(this._current);this._current=node;}},{key:"onEndElement",value:function onEndElement(name){var node=this._current;if(node[$isCDATAXml]()&&typeof node[$content]==="string"){var parser=new XFAParser();parser._globalData=this._globalData;var root=parser.parse(node[$content]);node[$content]=null;node[$onChild](root);}node[$finalize]();this._current=this._stack.pop();if(this._current[$onChild](node)){node[$setId](this._ids);}node[$clean](this._builder);}},{key:"onError",value:function onError(code){this._errorCode=code;}}]);return XFAParser;}(XMLParserBase);
;// CONCATENATED MODULE: ./src/core/xfa/factory.js
function factory_typeof(o){"@babel/helpers - typeof";return factory_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},factory_typeof(o);}function factory_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=factory_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function factory_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return factory_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return factory_arrayLikeToArray(o,minLen);}function factory_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function factory_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */factory_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==factory_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(factory_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function factory_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){factory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function factory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function factory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,factory_toPropertyKey(descriptor.key),descriptor);}}function factory_createClass(Constructor,protoProps,staticProps){if(protoProps)factory_defineProperties(Constructor.prototype,protoProps);if(staticProps)factory_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function factory_toPropertyKey(arg){var key=factory_toPrimitive(arg,"string");return factory_typeof(key)==="symbol"?key:String(key);}function factory_toPrimitive(input,hint){if(factory_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(factory_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var XFAFactory=/*#__PURE__*/function(){function XFAFactory(data){factory_classCallCheck(this,XFAFactory);try{this.root=new XFAParser().parse(XFAFactory._createDocument(data));var binder=new Binder(this.root);this.form=binder.bind();this.dataHandler=new DataHandler(this.root,binder.getData());this.form[$globalData].template=this.form;}catch(e){warn("XFA - an error occurred during parsing and binding: ".concat(e));}}factory_createClass(XFAFactory,[{key:"isValid",value:function isValid(){return this.root&&this.form;}},{key:"_createPagesHelper",value:function _createPagesHelper(){var iterator=this.form[$toPages]();return new Promise(function(resolve,reject){var nextIteration=function nextIteration(){try{var value=iterator.next();if(value.done){resolve(value.value);}else{setTimeout(nextIteration,0);}}catch(e){reject(e);}};setTimeout(nextIteration,0);});}},{key:"_createPages",value:function(){var _createPages2=factory_asyncToGenerator(/*#__PURE__*/factory_regeneratorRuntime().mark(function _callee(){return factory_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this._createPagesHelper();case 3:this.pages=_context.sent;this.dims=this.pages.children.map(function(c){var _c$attributes$style=c.attributes.style,width=_c$attributes$style.width,height=_c$attributes$style.height;return[0,0,parseInt(width),parseInt(height)];});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);warn("XFA - an error occurred during layout: ".concat(_context.t0));case 10:case"end":return _context.stop();}},_callee,this,[[0,7]]);}));function _createPages(){return _createPages2.apply(this,arguments);}return _createPages;}()},{key:"getBoundingBox",value:function getBoundingBox(pageIndex){return this.dims[pageIndex];}},{key:"getNumPages",value:function(){var _getNumPages=factory_asyncToGenerator(/*#__PURE__*/factory_regeneratorRuntime().mark(function _callee2(){return factory_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(this.pages){_context2.next=3;break;}_context2.next=3;return this._createPages();case 3:return _context2.abrupt("return",this.dims.length);case 4:case"end":return _context2.stop();}},_callee2,this);}));function getNumPages(){return _getNumPages.apply(this,arguments);}return getNumPages;}()},{key:"setImages",value:function setImages(images){this.form[$globalData].images=images;}},{key:"setFonts",value:function setFonts(fonts){this.form[$globalData].fontFinder=new FontFinder(fonts);var missingFonts=[];var _iterator=factory_createForOfIteratorHelper(this.form[$globalData].usedTypefaces),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var typeface=_step.value;typeface=stripQuotes(typeface);var font=this.form[$globalData].fontFinder.find(typeface);if(!font){missingFonts.push(typeface);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(missingFonts.length>0){return missingFonts;}return null;}},{key:"appendFonts",value:function appendFonts(fonts,reallyMissingFonts){this.form[$globalData].fontFinder.add(fonts,reallyMissingFonts);}},{key:"getPages",value:function(){var _getPages=factory_asyncToGenerator(/*#__PURE__*/factory_regeneratorRuntime().mark(function _callee3(){var pages;return factory_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(this.pages){_context3.next=3;break;}_context3.next=3;return this._createPages();case 3:pages=this.pages;this.pages=null;return _context3.abrupt("return",pages);case 6:case"end":return _context3.stop();}},_callee3,this);}));function getPages(){return _getPages.apply(this,arguments);}return getPages;}()},{key:"serializeData",value:function serializeData(storage){return this.dataHandler.serialize(storage);}}],[{key:"_createDocument",value:function _createDocument(data){if(!data["/xdp:xdp"]){return data["xdp:xdp"];}return Object.values(data).join("");}},{key:"getRichTextAsHtml",value:function getRichTextAsHtml(rc){if(!rc||typeof rc!=="string"){return null;}try{var root=new XFAParser(XhtmlNamespace,true).parse(rc);if(!["body","xhtml"].includes(root[$nodeName])){var newRoot=XhtmlNamespace.body({});newRoot[$appendChild](root);root=newRoot;}var result=root[$toHTML]();if(!result.success){return null;}var html=result.html;var attributes=html.attributes;if(attributes){if(attributes.class){attributes.class=attributes.class.filter(function(attr){return!attr.startsWith("xfa");});}attributes.dir="auto";}return{html:html,str:root[$text]()};}catch(e){warn("XFA - an error occurred during parsing of rich text: ".concat(e));}return null;}}]);return XFAFactory;}();
;// CONCATENATED MODULE: ./src/core/annotation.js
function annotation_get(){if(typeof Reflect!=="undefined"&&Reflect.get){annotation_get=Reflect.get.bind();}else{annotation_get=function _get(target,property,receiver){var base=annotation_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return annotation_get.apply(this,arguments);}function annotation_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=annotation_getPrototypeOf(object);if(object===null)break;}return object;}function annotation_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)annotation_setPrototypeOf(subClass,superClass);}function annotation_setPrototypeOf(o,p){annotation_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return annotation_setPrototypeOf(o,p);}function annotation_createSuper(Derived){var hasNativeReflectConstruct=annotation_isNativeReflectConstruct();return function _createSuperInternal(){var Super=annotation_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=annotation_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return annotation_possibleConstructorReturn(this,result);};}function annotation_possibleConstructorReturn(self,call){if(call&&(annotation_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return annotation_assertThisInitialized(self);}function annotation_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function annotation_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function annotation_getPrototypeOf(o){annotation_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return annotation_getPrototypeOf(o);}function annotation_typeof(o){"@babel/helpers - typeof";return annotation_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},annotation_typeof(o);}function annotation_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=annotation_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function annotation_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */annotation_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==annotation_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(annotation_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function annotation_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function annotation_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){annotation_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){annotation_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function annotation_slicedToArray(arr,i){return annotation_arrayWithHoles(arr)||annotation_iterableToArrayLimit(arr,i)||annotation_unsupportedIterableToArray(arr,i)||annotation_nonIterableRest();}function annotation_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function annotation_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return annotation_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return annotation_arrayLikeToArray(o,minLen);}function annotation_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function annotation_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function annotation_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function annotation_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function annotation_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,annotation_toPropertyKey(descriptor.key),descriptor);}}function annotation_createClass(Constructor,protoProps,staticProps){if(protoProps)annotation_defineProperties(Constructor.prototype,protoProps);if(staticProps)annotation_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function annotation_toPropertyKey(arg){var key=annotation_toPrimitive(arg,"string");return annotation_typeof(key)==="symbol"?key:String(key);}function annotation_toPrimitive(input,hint){if(annotation_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(annotation_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var AnnotationFactory=/*#__PURE__*/function(){function AnnotationFactory(){annotation_classCallCheck(this,AnnotationFactory);}annotation_createClass(AnnotationFactory,null,[{key:"createGlobals",value:function createGlobals(pdfManager){return Promise.all([pdfManager.ensureCatalog("acroForm"),pdfManager.ensureDoc("xfaDatasets"),pdfManager.ensureCatalog("structTreeRoot"),pdfManager.ensureCatalog("baseUrl"),pdfManager.ensureCatalog("attachments")]).then(function(_ref){var _ref2=annotation_slicedToArray(_ref,5),acroForm=_ref2[0],xfaDatasets=_ref2[1],structTreeRoot=_ref2[2],baseUrl=_ref2[3],attachments=_ref2[4];return{pdfManager:pdfManager,acroForm:acroForm instanceof Dict?acroForm:Dict.empty,xfaDatasets:xfaDatasets,structTreeRoot:structTreeRoot,baseUrl:baseUrl,attachments:attachments};},function(reason){warn("createGlobals: \"".concat(reason,"\"."));return null;});}},{key:"create",value:function(){var _create2=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee(xref,ref,annotationGlobals,idFactory,collectFields,pageRef){var pageIndex;return annotation_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!collectFields){_context.next=6;break;}_context.next=3;return this._getPageIndex(xref,ref,annotationGlobals.pdfManager);case 3:_context.t0=_context.sent;_context.next=7;break;case 6:_context.t0=null;case 7:pageIndex=_context.t0;return _context.abrupt("return",annotationGlobals.pdfManager.ensure(this,"_create",[xref,ref,annotationGlobals,idFactory,collectFields,pageIndex,pageRef]));case 9:case"end":return _context.stop();}},_callee,this);}));function create(_x,_x2,_x3,_x4,_x5,_x6){return _create2.apply(this,arguments);}return create;}()},{key:"_create",value:function _create(xref,ref,annotationGlobals,idFactory){var collectFields=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var pageIndex=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var pageRef=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;var dict=xref.fetchIfRef(ref);if(!(dict instanceof Dict)){return undefined;}var acroForm=annotationGlobals.acroForm,pdfManager=annotationGlobals.pdfManager;var id=ref instanceof Ref?ref.toString():"annot_".concat(idFactory.createObjId());var subtype=dict.get("Subtype");subtype=subtype instanceof Name?subtype.name:null;var parameters={xref:xref,ref:ref,dict:dict,subtype:subtype,id:id,annotationGlobals:annotationGlobals,collectFields:collectFields,needAppearances:!collectFields&&acroForm.get("NeedAppearances")===true,pageIndex:pageIndex,evaluatorOptions:pdfManager.evaluatorOptions,pageRef:pageRef};switch(subtype){case"Link":return new LinkAnnotation(parameters);case"Text":return new TextAnnotation(parameters);case"Widget":var fieldType=getInheritableProperty({dict:dict,key:"FT"});fieldType=fieldType instanceof Name?fieldType.name:null;switch(fieldType){case"Tx":return new TextWidgetAnnotation(parameters);case"Btn":return new ButtonWidgetAnnotation(parameters);case"Ch":return new ChoiceWidgetAnnotation(parameters);case"Sig":if(self.showUnverifiedSignatures){info("The PDF file contains a signature. Please take into account that it can't be verified yet. ngx-extended-pdf-viewer also displays forged signatures, so use this feature only if you're sure what you're doing.");return new SignatureWidgetAnnotation(parameters);}}warn("Unimplemented widget field type \"".concat(fieldType,"\", ")+"falling back to base field type.");return new WidgetAnnotation(parameters);case"Popup":return new PopupAnnotation(parameters);case"FreeText":return new FreeTextAnnotation(parameters);case"Line":return new LineAnnotation(parameters);case"Square":return new SquareAnnotation(parameters);case"Circle":return new CircleAnnotation(parameters);case"PolyLine":return new PolylineAnnotation(parameters);case"Polygon":return new PolygonAnnotation(parameters);case"Caret":return new CaretAnnotation(parameters);case"Ink":return new InkAnnotation(parameters);case"Highlight":return new HighlightAnnotation(parameters);case"Underline":return new UnderlineAnnotation(parameters);case"Squiggly":return new SquigglyAnnotation(parameters);case"StrikeOut":return new StrikeOutAnnotation(parameters);case"Stamp":return new StampAnnotation(parameters);case"FileAttachment":return new FileAttachmentAnnotation(parameters);default:if(!collectFields){if(!subtype){warn("Annotation is missing the required /Subtype.");}else{warn("Unimplemented annotation type \"".concat(subtype,"\", ")+"falling back to base annotation.");}}return new Annotation(parameters);}}},{key:"_getPageIndex",value:function(){var _getPageIndex2=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee2(xref,ref,pdfManager){var annotDict,pageRef,pageIndex,numPages,_pageIndex,page,annotations,_iterator,_step,annotRef;return annotation_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return xref.fetchIfRefAsync(ref);case 3:annotDict=_context2.sent;if(annotDict instanceof Dict){_context2.next=6;break;}return _context2.abrupt("return",-1);case 6:pageRef=annotDict.getRaw("P");if(!(pageRef instanceof Ref)){_context2.next=18;break;}_context2.prev=8;_context2.next=11;return pdfManager.ensureCatalog("getPageIndex",[pageRef]);case 11:pageIndex=_context2.sent;return _context2.abrupt("return",pageIndex);case 15:_context2.prev=15;_context2.t0=_context2["catch"](8);info("_getPageIndex -- not a valid page reference: \"".concat(_context2.t0,"\"."));case 18:if(!annotDict.has("Kids")){_context2.next=20;break;}return _context2.abrupt("return",-1);case 20:_context2.next=22;return pdfManager.ensureDoc("numPages");case 22:numPages=_context2.sent;_pageIndex=0;case 24:if(!(_pageIndex<numPages)){_context2.next=51;break;}_context2.next=27;return pdfManager.getPage(_pageIndex);case 27:page=_context2.sent;_context2.next=30;return pdfManager.ensure(page,"annotations");case 30:annotations=_context2.sent;_iterator=annotation_createForOfIteratorHelper(annotations);_context2.prev=32;_iterator.s();case 34:if((_step=_iterator.n()).done){_context2.next=40;break;}annotRef=_step.value;if(!(annotRef instanceof Ref&&isRefsEqual(annotRef,ref))){_context2.next=38;break;}return _context2.abrupt("return",_pageIndex);case 38:_context2.next=34;break;case 40:_context2.next=45;break;case 42:_context2.prev=42;_context2.t1=_context2["catch"](32);_iterator.e(_context2.t1);case 45:_context2.prev=45;_iterator.f();return _context2.finish(45);case 48:_pageIndex++;_context2.next=24;break;case 51:_context2.next=56;break;case 53:_context2.prev=53;_context2.t2=_context2["catch"](0);warn("_getPageIndex: \"".concat(_context2.t2,"\"."));case 56:return _context2.abrupt("return",-1);case 57:case"end":return _context2.stop();}},_callee2,null,[[0,53],[8,15],[32,42,45,48]]);}));function _getPageIndex(_x7,_x8,_x9){return _getPageIndex2.apply(this,arguments);}return _getPageIndex;}()},{key:"generateImages",value:function generateImages(annotations,xref,isOffscreenCanvasSupported){if(!isOffscreenCanvasSupported){warn("generateImages: OffscreenCanvas is not supported, cannot save or print some annotations with images.");return null;}var imagePromises;var _iterator2=annotation_createForOfIteratorHelper(annotations),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_step2.value,bitmapId=_step2$value.bitmapId,bitmap=_step2$value.bitmap;if(!bitmap){continue;}imagePromises||(imagePromises=new Map());imagePromises.set(bitmapId,StampAnnotation.createImage(bitmap,xref));}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return imagePromises;}},{key:"saveNewAnnotations",value:function(){var _saveNewAnnotations=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee3(evaluator,task,annotations,imagePromises){var xref,baseFontRef,dependencies,promises,isOffscreenCanvasSupported,_iterator3,_step3,annotation,baseFont,buffer,image,imageStream,smaskStream,_buffer,smaskRef,imageRef;return annotation_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:xref=evaluator.xref;dependencies=[];promises=[];isOffscreenCanvasSupported=evaluator.options.isOffscreenCanvasSupported;_iterator3=annotation_createForOfIteratorHelper(annotations);_context3.prev=5;_iterator3.s();case 7:if((_step3=_iterator3.n()).done){_context3.next=55;break;}annotation=_step3.value;if(!annotation.deleted){_context3.next=11;break;}return _context3.abrupt("continue",53);case 11:_context3.t0=annotation.annotationType;_context3.next=_context3.t0===AnnotationEditorType.FREETEXT?14:_context3.t0===AnnotationEditorType.HIGHLIGHT?27:_context3.t0===AnnotationEditorType.INK?29:_context3.t0===AnnotationEditorType.STAMP?31:53;break;case 14:if(baseFontRef){_context3.next=25;break;}baseFont=new Dict(xref);baseFont.set("BaseFont",Name.get("Helvetica"));baseFont.set("Type",Name.get("Font"));baseFont.set("Subtype",Name.get("Type1"));baseFont.set("Encoding",Name.get("WinAnsiEncoding"));buffer=[];baseFontRef=xref.getNewTemporaryRef();_context3.next=24;return writeObject(baseFontRef,baseFont,buffer,xref);case 24:dependencies.push({ref:baseFontRef,data:buffer.join("")});case 25:promises.push(FreeTextAnnotation.createNewAnnotation(xref,annotation,dependencies,{evaluator:evaluator,task:task,baseFontRef:baseFontRef}));return _context3.abrupt("break",53);case 27:promises.push(HighlightAnnotation.createNewAnnotation(xref,annotation,dependencies));return _context3.abrupt("break",53);case 29:promises.push(InkAnnotation.createNewAnnotation(xref,annotation,dependencies));return _context3.abrupt("break",53);case 31:if(isOffscreenCanvasSupported){_context3.next=33;break;}return _context3.abrupt("break",53);case 33:_context3.next=35;return imagePromises.get(annotation.bitmapId);case 35:image=_context3.sent;if(!image.imageStream){_context3.next=51;break;}imageStream=image.imageStream,smaskStream=image.smaskStream;_buffer=[];if(!smaskStream){_context3.next=46;break;}smaskRef=xref.getNewTemporaryRef();_context3.next=43;return writeObject(smaskRef,smaskStream,_buffer,xref);case 43:dependencies.push({ref:smaskRef,data:_buffer.join("")});imageStream.dict.set("SMask",smaskRef);_buffer.length=0;case 46:imageRef=image.imageRef=xref.getNewTemporaryRef();_context3.next=49;return writeObject(imageRef,imageStream,_buffer,xref);case 49:dependencies.push({ref:imageRef,data:_buffer.join("")});image.imageStream=image.smaskStream=null;case 51:promises.push(StampAnnotation.createNewAnnotation(xref,annotation,dependencies,{image:image}));return _context3.abrupt("break",53);case 53:_context3.next=7;break;case 55:_context3.next=60;break;case 57:_context3.prev=57;_context3.t1=_context3["catch"](5);_iterator3.e(_context3.t1);case 60:_context3.prev=60;_iterator3.f();return _context3.finish(60);case 63:_context3.next=65;return Promise.all(promises);case 65:_context3.t2=_context3.sent;_context3.t3=dependencies;return _context3.abrupt("return",{annotations:_context3.t2,dependencies:_context3.t3});case 68:case"end":return _context3.stop();}},_callee3,null,[[5,57,60,63]]);}));function saveNewAnnotations(_x10,_x11,_x12,_x13){return _saveNewAnnotations.apply(this,arguments);}return saveNewAnnotations;}()},{key:"printNewAnnotations",value:function(){var _printNewAnnotations=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee4(annotationGlobals,evaluator,task,annotations,imagePromises){var options,xref,promises,_iterator4,_step4,annotation,image,imageStream,smaskStream;return annotation_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(annotations){_context4.next=2;break;}return _context4.abrupt("return",null);case 2:options=evaluator.options,xref=evaluator.xref;promises=[];_iterator4=annotation_createForOfIteratorHelper(annotations);_context4.prev=5;_iterator4.s();case 7:if((_step4=_iterator4.n()).done){_context4.next=30;break;}annotation=_step4.value;if(!annotation.deleted){_context4.next=11;break;}return _context4.abrupt("continue",28);case 11:_context4.t0=annotation.annotationType;_context4.next=_context4.t0===AnnotationEditorType.FREETEXT?14:_context4.t0===AnnotationEditorType.HIGHLIGHT?16:_context4.t0===AnnotationEditorType.INK?18:_context4.t0===AnnotationEditorType.STAMP?20:28;break;case 14:promises.push(FreeTextAnnotation.createNewPrintAnnotation(annotationGlobals,xref,annotation,{evaluator:evaluator,task:task,evaluatorOptions:options}));return _context4.abrupt("break",28);case 16:promises.push(HighlightAnnotation.createNewPrintAnnotation(annotationGlobals,xref,annotation,{evaluatorOptions:options}));return _context4.abrupt("break",28);case 18:promises.push(InkAnnotation.createNewPrintAnnotation(annotationGlobals,xref,annotation,{evaluatorOptions:options}));return _context4.abrupt("break",28);case 20:if(options.isOffscreenCanvasSupported){_context4.next=22;break;}return _context4.abrupt("break",28);case 22:_context4.next=24;return imagePromises.get(annotation.bitmapId);case 24:image=_context4.sent;if(image.imageStream){imageStream=image.imageStream,smaskStream=image.smaskStream;if(smaskStream){imageStream.dict.set("SMask",smaskStream);}image.imageRef=new JpegStream(imageStream,imageStream.length);image.imageStream=image.smaskStream=null;}promises.push(StampAnnotation.createNewPrintAnnotation(annotationGlobals,xref,annotation,{image:image,evaluatorOptions:options}));return _context4.abrupt("break",28);case 28:_context4.next=7;break;case 30:_context4.next=35;break;case 32:_context4.prev=32;_context4.t1=_context4["catch"](5);_iterator4.e(_context4.t1);case 35:_context4.prev=35;_iterator4.f();return _context4.finish(35);case 38:return _context4.abrupt("return",Promise.all(promises));case 39:case"end":return _context4.stop();}},_callee4,null,[[5,32,35,38]]);}));function printNewAnnotations(_x14,_x15,_x16,_x17,_x18){return _printNewAnnotations.apply(this,arguments);}return printNewAnnotations;}()}]);return AnnotationFactory;}();function getRgbColor(color){var defaultColor=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new Uint8ClampedArray(3);if(!Array.isArray(color)){return defaultColor;}var rgbColor=defaultColor||new Uint8ClampedArray(3);switch(color.length){case 0:return null;case 1:ColorSpace.singletons.gray.getRgbItem(color,0,rgbColor,0);return rgbColor;case 3:ColorSpace.singletons.rgb.getRgbItem(color,0,rgbColor,0);return rgbColor;case 4:ColorSpace.singletons.cmyk.getRgbItem(color,0,rgbColor,0);return rgbColor;default:return defaultColor;}}function getPdfColorArray(color){return Array.from(color,function(c){return c/255;});}function getQuadPoints(dict,rect){var quadPoints=dict.getArray("QuadPoints");if(!Array.isArray(quadPoints)||quadPoints.length===0||quadPoints.length%8>0){return null;}var quadPointsLists=[];for(var i=0,ii=quadPoints.length/8;i<ii;i++){var minX=Infinity,maxX=-Infinity,minY=Infinity,maxY=-Infinity;for(var j=i*8,jj=i*8+8;j<jj;j+=2){var x=quadPoints[j];var y=quadPoints[j+1];minX=Math.min(x,minX);maxX=Math.max(x,maxX);minY=Math.min(y,minY);maxY=Math.max(y,maxY);}if(rect!==null&&(minX<rect[0]||maxX>rect[2]||minY<rect[1]||maxY>rect[3])){return null;}quadPointsLists.push([{x:minX,y:maxY},{x:maxX,y:maxY},{x:minX,y:minY},{x:maxX,y:minY}]);}return quadPointsLists;}function getTransformMatrix(rect,bbox,matrix){var _Util$getAxialAligned=Util.getAxialAlignedBoundingBox(bbox,matrix),_Util$getAxialAligned2=annotation_slicedToArray(_Util$getAxialAligned,4),minX=_Util$getAxialAligned2[0],minY=_Util$getAxialAligned2[1],maxX=_Util$getAxialAligned2[2],maxY=_Util$getAxialAligned2[3];if(minX===maxX||minY===maxY){return[1,0,0,1,rect[0],rect[1]];}var xRatio=(rect[2]-rect[0])/(maxX-minX);var yRatio=(rect[3]-rect[1])/(maxY-minY);return[xRatio,0,0,yRatio,rect[0]-minX*xRatio,rect[1]-minY*yRatio];}var Annotation=/*#__PURE__*/function(){function Annotation(params){annotation_classCallCheck(this,Annotation);var dict=params.dict,xref=params.xref,annotationGlobals=params.annotationGlobals;this.setTitle(dict.get("T"));this.setContents(dict.get("Contents"));this.setModificationDate(dict.get("M"));this.setFlags(dict.get("F"));this.setRectangle(dict.getArray("Rect"));this.setColor(dict.getArray("C"));this.setBorderStyle(dict);this.setAppearance(dict);this.setOptionalContent(dict);var MK=dict.get("MK");this.setBorderAndBackgroundColors(MK);this.setRotation(MK,dict);this.ref=params.ref instanceof Ref?params.ref:null;this._streams=[];if(this.appearance){this._streams.push(this.appearance);}var isLocked=!!(this.flags&AnnotationFlag.LOCKED);var isContentLocked=!!(this.flags&AnnotationFlag.LOCKEDCONTENTS);if(annotationGlobals.structTreeRoot){var structParent=dict.get("StructParent");structParent=Number.isInteger(structParent)&&structParent>=0?structParent:-1;annotationGlobals.structTreeRoot.addAnnotationIdToPage(params.pageRef,structParent);}this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,backgroundColor:this.backgroundColor,borderColor:this.borderColor,rotation:this.rotation,contentsObj:this._contents,hasAppearance:!!this.appearance,id:params.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:params.subtype,hasOwnCanvas:false,noRotate:!!(this.flags&AnnotationFlag.NOROTATE),noHTML:isLocked&&isContentLocked};if(params.collectFields){var kids=dict.get("Kids");if(Array.isArray(kids)){var kidIds=[];var _iterator5=annotation_createForOfIteratorHelper(kids),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var kid=_step5.value;if(kid instanceof Ref){kidIds.push(kid.toString());}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}if(kidIds.length!==0){this.data.kidIds=kidIds;}}this.data.actions=collectActions(xref,dict,AnnotationActionEventType);this.data.fieldName=this._constructFieldName(dict);this.data.pageIndex=params.pageIndex;}this._isOffscreenCanvasSupported=params.evaluatorOptions.isOffscreenCanvasSupported;this._fallbackFontDict=null;this._needAppearances=false;}annotation_createClass(Annotation,[{key:"_hasFlag",value:function _hasFlag(flags,flag){return!!(flags&flag);}},{key:"_isViewable",value:function _isViewable(flags){return!this._hasFlag(flags,AnnotationFlag.INVISIBLE)&&!this._hasFlag(flags,AnnotationFlag.NOVIEW);}},{key:"_isPrintable",value:function _isPrintable(flags){return this._hasFlag(flags,AnnotationFlag.PRINT)&&!this._hasFlag(flags,AnnotationFlag.HIDDEN)&&!this._hasFlag(flags,AnnotationFlag.INVISIBLE);}},{key:"mustBeViewed",value:function mustBeViewed(annotationStorage,_renderForms){var _annotationStorage$ge;var noView=annotationStorage===null||annotationStorage===void 0||(_annotationStorage$ge=annotationStorage.get(this.data.id))===null||_annotationStorage$ge===void 0?void 0:_annotationStorage$ge.noView;if(noView!==undefined){return!noView;}return this.viewable&&!this._hasFlag(this.flags,AnnotationFlag.HIDDEN);}},{key:"mustBePrinted",value:function mustBePrinted(annotationStorage){var _annotationStorage$ge2;var noPrint=annotationStorage===null||annotationStorage===void 0||(_annotationStorage$ge2=annotationStorage.get(this.data.id))===null||_annotationStorage$ge2===void 0?void 0:_annotationStorage$ge2.noPrint;if(noPrint!==undefined){return!noPrint;}return this.printable;}},{key:"viewable",get:function get(){if(this.data.quadPoints===null){return false;}if(this.flags===0){return true;}return this._isViewable(this.flags);}},{key:"printable",get:function get(){if(this.data.quadPoints===null){return false;}if(this.flags===0){return false;}return this._isPrintable(this.flags);}},{key:"_parseStringHelper",value:function _parseStringHelper(data){var str=typeof data==="string"?stringToPDFString(data):"";var dir=str&&bidi(str).dir==="rtl"?"rtl":"ltr";return{str:str,dir:dir};}},{key:"setDefaultAppearance",value:function setDefaultAppearance(params){var dict=params.dict,annotationGlobals=params.annotationGlobals;var defaultAppearance=getInheritableProperty({dict:dict,key:"DA"})||annotationGlobals.acroForm.get("DA");this._defaultAppearance=typeof defaultAppearance==="string"?defaultAppearance:"";this.data.defaultAppearanceData=parseDefaultAppearance(this._defaultAppearance);}},{key:"setTitle",value:function setTitle(title){this._title=this._parseStringHelper(title);}},{key:"setContents",value:function setContents(contents){this._contents=this._parseStringHelper(contents);}},{key:"setModificationDate",value:function setModificationDate(modificationDate){this.modificationDate=typeof modificationDate==="string"?modificationDate:null;}},{key:"setFlags",value:function setFlags(flags){this.flags=Number.isInteger(flags)&&flags>0?flags:0;if(this.flags&AnnotationFlag.INVISIBLE&&this.constructor.name!=="Annotation"){this.flags^=AnnotationFlag.INVISIBLE;}}},{key:"hasFlag",value:function hasFlag(flag){return this._hasFlag(this.flags,flag);}},{key:"setRectangle",value:function setRectangle(rectangle){this.rectangle=Array.isArray(rectangle)&&rectangle.length===4?Util.normalizeRect(rectangle):[0,0,0,0];}},{key:"setColor",value:function setColor(color){this.color=getRgbColor(color);}},{key:"setLineEndings",value:function setLineEndings(lineEndings){this.lineEndings=["None","None"];if(Array.isArray(lineEndings)&&lineEndings.length===2){for(var i=0;i<2;i++){var obj=lineEndings[i];if(obj instanceof Name){switch(obj.name){case"None":continue;case"Square":case"Circle":case"Diamond":case"OpenArrow":case"ClosedArrow":case"Butt":case"ROpenArrow":case"RClosedArrow":case"Slash":this.lineEndings[i]=obj.name;continue;}}warn("Ignoring invalid lineEnding: ".concat(obj));}}}},{key:"setRotation",value:function setRotation(mk,dict){this.rotation=0;var angle=mk instanceof Dict?mk.get("R")||0:dict.get("Rotate")||0;if(Number.isInteger(angle)&&angle!==0){angle%=360;if(angle<0){angle+=360;}if(angle%90===0){this.rotation=angle;}}}},{key:"setBorderAndBackgroundColors",value:function setBorderAndBackgroundColors(mk){if(mk instanceof Dict){this.borderColor=getRgbColor(mk.getArray("BC"),null);this.backgroundColor=getRgbColor(mk.getArray("BG"),null);}else{this.borderColor=this.backgroundColor=null;}}},{key:"setBorderStyle",value:function setBorderStyle(borderStyle){this.borderStyle=new AnnotationBorderStyle();if(!(borderStyle instanceof Dict)){return;}if(borderStyle.has("BS")){var dict=borderStyle.get("BS");var dictType=dict.get("Type");if(!dictType||isName(dictType,"Border")){this.borderStyle.setWidth(dict.get("W"),this.rectangle);this.borderStyle.setStyle(dict.get("S"));this.borderStyle.setDashArray(dict.getArray("D"));}}else if(borderStyle.has("Border")){var array=borderStyle.getArray("Border");if(Array.isArray(array)&&array.length>=3){this.borderStyle.setHorizontalCornerRadius(array[0]);this.borderStyle.setVerticalCornerRadius(array[1]);this.borderStyle.setWidth(array[2],this.rectangle);if(array.length===4){this.borderStyle.setDashArray(array[3],true);}}}else{this.borderStyle.setWidth(0);}}},{key:"setAppearance",value:function setAppearance(dict){this.appearance=null;var appearanceStates=dict.get("AP");if(!(appearanceStates instanceof Dict)){return;}var normalAppearanceState=appearanceStates.get("N");if(normalAppearanceState instanceof BaseStream){this.appearance=normalAppearanceState;return;}if(!(normalAppearanceState instanceof Dict)){return;}var as=dict.get("AS");if(!(as instanceof Name)||!normalAppearanceState.has(as.name)){return;}var appearance=normalAppearanceState.get(as.name);if(appearance instanceof BaseStream){this.appearance=appearance;}}},{key:"setOptionalContent",value:function setOptionalContent(dict){this.oc=null;var oc=dict.get("OC");if(oc instanceof Name){warn("setOptionalContent: Support for /Name-entry is not implemented.");}else if(oc instanceof Dict){this.oc=oc;}}},{key:"loadResources",value:function loadResources(keys,appearance){return appearance.dict.getAsync("Resources").then(function(resources){if(!resources){return undefined;}var objectLoader=new ObjectLoader(resources,keys,resources.xref);return objectLoader.load().then(function(){return resources;});});}},{key:"getOperatorList",value:function(){var _getOperatorList=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee5(evaluator,task,intent,renderForms,annotationStorage){var data,appearance,isUsingOwnCanvas,appearanceDict,resources,bbox,matrix,transform,opList,optionalContent;return annotation_regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:data=this.data;appearance=this.appearance;isUsingOwnCanvas=!!(this.data.hasOwnCanvas&&intent&RenderingIntentFlag.DISPLAY);if(appearance){_context5.next=8;break;}if(isUsingOwnCanvas){_context5.next=6;break;}return _context5.abrupt("return",{opList:new OperatorList(),separateForm:false,separateCanvas:false});case 6:appearance=new StringStream("");appearance.dict=new Dict();case 8:appearanceDict=appearance.dict;_context5.next=11;return this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"],appearance);case 11:resources=_context5.sent;bbox=appearanceDict.getArray("BBox")||[0,0,1,1];matrix=appearanceDict.getArray("Matrix")||[1,0,0,1,0,0];transform=getTransformMatrix(data.rect,bbox,matrix);opList=new OperatorList();if(!this.oc){_context5.next=20;break;}_context5.next=19;return evaluator.parseMarkedContentProps(this.oc,null);case 19:optionalContent=_context5.sent;case 20:if(optionalContent!==undefined){opList.addOp(OPS.beginMarkedContentProps,["OC",optionalContent]);}opList.addOp(OPS.beginAnnotation,[data.id,data.rect,transform,matrix,isUsingOwnCanvas]);_context5.next=24;return evaluator.getOperatorList({stream:appearance,task:task,resources:resources,operatorList:opList,fallbackFontDict:this._fallbackFontDict});case 24:opList.addOp(OPS.endAnnotation,[]);if(optionalContent!==undefined){opList.addOp(OPS.endMarkedContent,[]);}this.reset();return _context5.abrupt("return",{opList:opList,separateForm:false,separateCanvas:isUsingOwnCanvas});case 28:case"end":return _context5.stop();}},_callee5,this);}));function getOperatorList(_x19,_x20,_x21,_x22,_x23){return _getOperatorList.apply(this,arguments);}return getOperatorList;}()},{key:"save",value:function(){var _save=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee6(evaluator,task,annotationStorage){return annotation_regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:return _context6.abrupt("return",null);case 1:case"end":return _context6.stop();}},_callee6);}));function save(_x24,_x25,_x26){return _save.apply(this,arguments);}return save;}()},{key:"hasTextContent",get:function get(){return false;}},{key:"extractTextContent",value:function(){var _extractTextContent=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee7(evaluator,task,viewBox){var resources,text,buffer,firstPosition,sink,appearanceDict,bbox,matrix,rect,transform;return annotation_regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:if(this.appearance){_context7.next=2;break;}return _context7.abrupt("return");case 2:_context7.next=4;return this.loadResources(["ExtGState","Font","Properties","XObject"],this.appearance);case 4:resources=_context7.sent;text=[];buffer=[];firstPosition=null;sink={desiredSize:Math.Infinity,ready:true,enqueue:function enqueue(chunk,size){var _iterator6=annotation_createForOfIteratorHelper(chunk.items),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var item=_step6.value;if(item.str===undefined){continue;}firstPosition||(firstPosition=item.transform.slice(-2));buffer.push(item.str);if(item.hasEOL){text.push(buffer.join(""));buffer.length=0;}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}};_context7.next=11;return evaluator.getTextContent({stream:this.appearance,task:task,resources:resources,includeMarkedContent:true,sink:sink,viewBox:viewBox});case 11:this.reset();if(buffer.length){text.push(buffer.join(""));}if(text.length>1||text[0]){appearanceDict=this.appearance.dict;bbox=appearanceDict.getArray("BBox")||[0,0,1,1];matrix=appearanceDict.getArray("Matrix")||[1,0,0,1,0,0];rect=this.data.rect;transform=getTransformMatrix(rect,bbox,matrix);transform[4]-=rect[0];transform[5]-=rect[1];firstPosition=Util.applyTransform(firstPosition,transform);firstPosition=Util.applyTransform(firstPosition,matrix);this.data.textPosition=firstPosition;this.data.textContent=text;}case 14:case"end":return _context7.stop();}},_callee7,this);}));function extractTextContent(_x27,_x28,_x29){return _extractTextContent.apply(this,arguments);}return extractTextContent;}()},{key:"getFieldObject",value:function getFieldObject(){if(this.data.kidIds){return{id:this.data.id,actions:this.data.actions,name:this.data.fieldName,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:"",kidIds:this.data.kidIds,page:this.data.pageIndex,rotation:this.rotation};}return null;}},{key:"reset",value:function reset(){var _iterator7=annotation_createForOfIteratorHelper(this._streams),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var stream=_step7.value;stream.reset();}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}},{key:"_constructFieldName",value:function _constructFieldName(dict){if(!dict.has("T")&&!dict.has("Parent")){warn("Unknown field name, falling back to empty field name.");return"";}if(!dict.has("Parent")){return stringToPDFString(dict.get("T"));}var fieldName=[];if(dict.has("T")){fieldName.unshift(stringToPDFString(dict.get("T")));}var loopDict=dict;var visited=new RefSet();if(dict.objId){visited.put(dict.objId);}while(loopDict.has("Parent")){loopDict=loopDict.get("Parent");if(!(loopDict instanceof Dict)||loopDict.objId&&visited.has(loopDict.objId)){break;}if(loopDict.objId){visited.put(loopDict.objId);}if(loopDict.has("T")){fieldName.unshift(stringToPDFString(loopDict.get("T")));}}return fieldName.join(".");}}]);return Annotation;}();var AnnotationBorderStyle=/*#__PURE__*/function(){function AnnotationBorderStyle(){annotation_classCallCheck(this,AnnotationBorderStyle);this.width=1;this.style=AnnotationBorderStyleType.SOLID;this.dashArray=[3];this.horizontalCornerRadius=0;this.verticalCornerRadius=0;}annotation_createClass(AnnotationBorderStyle,[{key:"setWidth",value:function setWidth(width){var rect=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[0,0,0,0];if(width instanceof Name){this.width=0;return;}if(typeof width==="number"){if(width>0){var maxWidth=(rect[2]-rect[0])/2;var maxHeight=(rect[3]-rect[1])/2;if(maxWidth>0&&maxHeight>0&&(width>maxWidth||width>maxHeight)){warn("AnnotationBorderStyle.setWidth - ignoring width: ".concat(width));width=1;}}this.width=width;}}},{key:"setStyle",value:function setStyle(style){if(!(style instanceof Name)){return;}switch(style.name){case"S":this.style=AnnotationBorderStyleType.SOLID;break;case"D":this.style=AnnotationBorderStyleType.DASHED;break;case"B":this.style=AnnotationBorderStyleType.BEVELED;break;case"I":this.style=AnnotationBorderStyleType.INSET;break;case"U":this.style=AnnotationBorderStyleType.UNDERLINE;break;default:break;}}},{key:"setDashArray",value:function setDashArray(dashArray){var forceStyle=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(Array.isArray(dashArray)&&dashArray.length>0){var isValid=true;var allZeros=true;var _iterator8=annotation_createForOfIteratorHelper(dashArray),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var element=_step8.value;var validNumber=+element>=0;if(!validNumber){isValid=false;break;}else if(element>0){allZeros=false;}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}if(isValid&&!allZeros){this.dashArray=dashArray;if(forceStyle){this.setStyle(Name.get("D"));}}else{this.width=0;}}else if(dashArray){this.width=0;}}},{key:"setHorizontalCornerRadius",value:function setHorizontalCornerRadius(radius){if(Number.isInteger(radius)){this.horizontalCornerRadius=radius;}}},{key:"setVerticalCornerRadius",value:function setVerticalCornerRadius(radius){if(Number.isInteger(radius)){this.verticalCornerRadius=radius;}}}]);return AnnotationBorderStyle;}();var MarkupAnnotation=/*#__PURE__*/function(_Annotation){annotation_inherits(MarkupAnnotation,_Annotation);var _super=annotation_createSuper(MarkupAnnotation);function MarkupAnnotation(params){var _this;annotation_classCallCheck(this,MarkupAnnotation);_this=_super.call(this,params);var dict=params.dict;if(dict.has("IRT")){var rawIRT=dict.getRaw("IRT");_this.data.inReplyTo=rawIRT instanceof Ref?rawIRT.toString():null;var rt=dict.get("RT");_this.data.replyType=rt instanceof Name?rt.name:AnnotationReplyType.REPLY;}var popupRef=null;if(_this.data.replyType===AnnotationReplyType.GROUP){var parent=dict.get("IRT");_this.setTitle(parent.get("T"));_this.data.titleObj=_this._title;_this.setContents(parent.get("Contents"));_this.data.contentsObj=_this._contents;if(!parent.has("CreationDate")){_this.data.creationDate=null;}else{_this.setCreationDate(parent.get("CreationDate"));_this.data.creationDate=_this.creationDate;}if(!parent.has("M")){_this.data.modificationDate=null;}else{_this.setModificationDate(parent.get("M"));_this.data.modificationDate=_this.modificationDate;}popupRef=parent.getRaw("Popup");if(!parent.has("C")){_this.data.color=null;}else{_this.setColor(parent.getArray("C"));_this.data.color=_this.color;}}else{_this.data.titleObj=_this._title;_this.setCreationDate(dict.get("CreationDate"));_this.data.creationDate=_this.creationDate;popupRef=dict.getRaw("Popup");if(!dict.has("C")){_this.data.color=null;}}_this.data.popupRef=popupRef instanceof Ref?popupRef.toString():null;if(dict.has("RC")){_this.data.richText=XFAFactory.getRichTextAsHtml(dict.get("RC"));}return _this;}annotation_createClass(MarkupAnnotation,[{key:"setCreationDate",value:function setCreationDate(creationDate){this.creationDate=typeof creationDate==="string"?creationDate:null;}},{key:"_setDefaultAppearance",value:function _setDefaultAppearance(_ref3){var xref=_ref3.xref,extra=_ref3.extra,strokeColor=_ref3.strokeColor,fillColor=_ref3.fillColor,blendMode=_ref3.blendMode,strokeAlpha=_ref3.strokeAlpha,fillAlpha=_ref3.fillAlpha,pointsCallback=_ref3.pointsCallback;var minX=Number.MAX_VALUE;var minY=Number.MAX_VALUE;var maxX=Number.MIN_VALUE;var maxY=Number.MIN_VALUE;var buffer=["q"];if(extra){buffer.push(extra);}if(strokeColor){buffer.push("".concat(strokeColor[0]," ").concat(strokeColor[1]," ").concat(strokeColor[2]," RG"));}if(fillColor){buffer.push("".concat(fillColor[0]," ").concat(fillColor[1]," ").concat(fillColor[2]," rg"));}var pointsArray=this.data.quadPoints;if(!pointsArray){pointsArray=[[{x:this.rectangle[0],y:this.rectangle[3]},{x:this.rectangle[2],y:this.rectangle[3]},{x:this.rectangle[0],y:this.rectangle[1]},{x:this.rectangle[2],y:this.rectangle[1]}]];}var _iterator9=annotation_createForOfIteratorHelper(pointsArray),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var points=_step9.value;var _pointsCallback=pointsCallback(buffer,points),_pointsCallback2=annotation_slicedToArray(_pointsCallback,4),mX=_pointsCallback2[0],MX=_pointsCallback2[1],mY=_pointsCallback2[2],MY=_pointsCallback2[3];minX=Math.min(minX,mX);maxX=Math.max(maxX,MX);minY=Math.min(minY,mY);maxY=Math.max(maxY,MY);}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}buffer.push("Q");var formDict=new Dict(xref);var appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("Subtype",Name.get("Form"));var appearanceStream=new StringStream(buffer.join(" "));appearanceStream.dict=appearanceStreamDict;formDict.set("Fm0",appearanceStream);var gsDict=new Dict(xref);if(blendMode){gsDict.set("BM",Name.get(blendMode));}if(typeof strokeAlpha==="number"){gsDict.set("CA",strokeAlpha);}if(typeof fillAlpha==="number"){gsDict.set("ca",fillAlpha);}var stateDict=new Dict(xref);stateDict.set("GS0",gsDict);var resources=new Dict(xref);resources.set("ExtGState",stateDict);resources.set("XObject",formDict);var appearanceDict=new Dict(xref);appearanceDict.set("Resources",resources);var bbox=this.data.rect=[minX,minY,maxX,maxY];appearanceDict.set("BBox",bbox);this.appearance=new StringStream("/GS0 gs /Fm0 Do");this.appearance.dict=appearanceDict;this._streams.push(this.appearance,appearanceStream);}}],[{key:"createNewAnnotation",value:function(){var _createNewAnnotation=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee8(xref,annotation,dependencies,params){var annotationRef,ap,buffer,annotationDict,apRef;return annotation_regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:annotationRef=annotation.ref||(annotation.ref=xref.getNewTemporaryRef());_context8.next=3;return this.createNewAppearanceStream(annotation,xref,params);case 3:ap=_context8.sent;buffer=[];if(!ap){_context8.next=13;break;}apRef=xref.getNewTemporaryRef();annotationDict=this.createNewDict(annotation,xref,{apRef:apRef});_context8.next=10;return writeObject(apRef,ap,buffer,xref);case 10:dependencies.push({ref:apRef,data:buffer.join("")});_context8.next=14;break;case 13:annotationDict=this.createNewDict(annotation,xref,{});case 14:if(Number.isInteger(annotation.parentTreeId)){annotationDict.set("StructParent",annotation.parentTreeId);}buffer.length=0;_context8.next=18;return writeObject(annotationRef,annotationDict,buffer,xref);case 18:return _context8.abrupt("return",{ref:annotationRef,data:buffer.join("")});case 19:case"end":return _context8.stop();}},_callee8,this);}));function createNewAnnotation(_x30,_x31,_x32,_x33){return _createNewAnnotation.apply(this,arguments);}return createNewAnnotation;}()},{key:"createNewPrintAnnotation",value:function(){var _createNewPrintAnnotation=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee9(annotationGlobals,xref,annotation,params){var ap,annotationDict,newAnnotation;return annotation_regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.createNewAppearanceStream(annotation,xref,params);case 2:ap=_context9.sent;annotationDict=this.createNewDict(annotation,xref,{ap:ap});newAnnotation=new this.prototype.constructor({dict:annotationDict,xref:xref,annotationGlobals:annotationGlobals,evaluatorOptions:params.evaluatorOptions});if(annotation.ref){newAnnotation.ref=newAnnotation.refToReplace=annotation.ref;}return _context9.abrupt("return",newAnnotation);case 7:case"end":return _context9.stop();}},_callee9,this);}));function createNewPrintAnnotation(_x34,_x35,_x36,_x37){return _createNewPrintAnnotation.apply(this,arguments);}return createNewPrintAnnotation;}()}]);return MarkupAnnotation;}(Annotation);var WidgetAnnotation=/*#__PURE__*/function(_Annotation2){annotation_inherits(WidgetAnnotation,_Annotation2);var _super2=annotation_createSuper(WidgetAnnotation);function WidgetAnnotation(params){var _this2$appearance;var _this2;annotation_classCallCheck(this,WidgetAnnotation);_this2=_super2.call(this,params);var dict=params.dict,xref=params.xref,annotationGlobals=params.annotationGlobals;var data=_this2.data;_this2._needAppearances=params.needAppearances;data.annotationType=AnnotationType.WIDGET;if(data.fieldName===undefined){data.fieldName=_this2._constructFieldName(dict);}if(data.actions===undefined){data.actions=collectActions(xref,dict,AnnotationActionEventType);}var fieldValue=getInheritableProperty({dict:dict,key:"V",getArray:true});data.fieldValue=_this2._decodeFormValue(fieldValue);var defaultFieldValue=getInheritableProperty({dict:dict,key:"DV",getArray:true});data.defaultFieldValue=_this2._decodeFormValue(defaultFieldValue);if(fieldValue===undefined&&annotationGlobals.xfaDatasets){var path=_this2._title.str;if(path){_this2._hasValueFromXFA=true;data.fieldValue=fieldValue=annotationGlobals.xfaDatasets.getValue(path);}}if(fieldValue===undefined&&data.defaultFieldValue!==null){data.fieldValue=data.defaultFieldValue;}data.alternativeText=stringToPDFString(dict.get("TU")||"");_this2.setDefaultAppearance(params);data.hasAppearance||(data.hasAppearance=_this2._needAppearances&&data.fieldValue!==undefined&&data.fieldValue!==null);var fieldType=getInheritableProperty({dict:dict,key:"FT"});data.fieldType=fieldType instanceof Name?fieldType.name:null;var localResources=getInheritableProperty({dict:dict,key:"DR"});var acroFormResources=annotationGlobals.acroForm.get("DR");var appearanceResources=(_this2$appearance=_this2.appearance)===null||_this2$appearance===void 0?void 0:_this2$appearance.dict.get("Resources");_this2._fieldResources={localResources:localResources,acroFormResources:acroFormResources,appearanceResources:appearanceResources,mergedResources:Dict.merge({xref:xref,dictArray:[localResources,appearanceResources,acroFormResources],mergeSubDicts:true})};data.fieldFlags=getInheritableProperty({dict:dict,key:"Ff"});if(!Number.isInteger(data.fieldFlags)||data.fieldFlags<0){data.fieldFlags=0;}data.readOnly=_this2.hasFieldFlag(AnnotationFieldFlag.READONLY);data.required=_this2.hasFieldFlag(AnnotationFieldFlag.REQUIRED);data.hidden=_this2._hasFlag(data.annotationFlags,AnnotationFlag.HIDDEN)||_this2._hasFlag(data.annotationFlags,AnnotationFlag.NOVIEW);if(data.fieldType==="Sig"){if(!self.showUnverifiedSignatures){_this2.setFlags(AnnotationFlag.HIDDEN);info("The PDF file contains a signature. Please take into account that it can't be verified yet. By default, ngx-extended-pdf-viewer hides signatures until you configure it otherwise.");}}return _this2;}annotation_createClass(WidgetAnnotation,[{key:"_decodeFormValue",value:function _decodeFormValue(formValue){if(Array.isArray(formValue)){return formValue.filter(function(item){return typeof item==="string";}).map(function(item){return stringToPDFString(item);});}else if(formValue instanceof Name){return stringToPDFString(formValue.name);}else if(typeof formValue==="string"){return stringToPDFString(formValue);}return null;}},{key:"hasFieldFlag",value:function hasFieldFlag(flag){return!!(this.data.fieldFlags&flag);}},{key:"_isViewable",value:function _isViewable(flags){return true;}},{key:"mustBeViewed",value:function mustBeViewed(annotationStorage,renderForms){if(renderForms){return this.viewable;}return annotation_get(annotation_getPrototypeOf(WidgetAnnotation.prototype),"mustBeViewed",this).call(this,annotationStorage,renderForms)&&!this._hasFlag(this.flags,AnnotationFlag.NOVIEW);}},{key:"getRotationMatrix",value:function getRotationMatrix(annotationStorage){var _annotationStorage$ge3;var rotation=annotationStorage===null||annotationStorage===void 0||(_annotationStorage$ge3=annotationStorage.get(this.data.id))===null||_annotationStorage$ge3===void 0?void 0:_annotationStorage$ge3.rotation;if(rotation===undefined){rotation=this.rotation;}if(rotation===0){return IDENTITY_MATRIX;}var width=this.data.rect[2]-this.data.rect[0];var height=this.data.rect[3]-this.data.rect[1];return core_utils_getRotationMatrix(rotation,width,height);}},{key:"getBorderAndBackgroundAppearances",value:function getBorderAndBackgroundAppearances(annotationStorage){var _annotationStorage$ge4;var rotation=annotationStorage===null||annotationStorage===void 0||(_annotationStorage$ge4=annotationStorage.get(this.data.id))===null||_annotationStorage$ge4===void 0?void 0:_annotationStorage$ge4.rotation;if(rotation===undefined){rotation=this.rotation;}if(!this.backgroundColor&&!this.borderColor){return"";}var width=this.data.rect[2]-this.data.rect[0];var height=this.data.rect[3]-this.data.rect[1];var rect=rotation===0||rotation===180?"0 0 ".concat(width," ").concat(height," re"):"0 0 ".concat(height," ").concat(width," re");var str="";if(this.backgroundColor){str="".concat(getPdfColor(this.backgroundColor,true)," ").concat(rect," f ");}if(this.borderColor){var borderWidth=this.borderStyle.width||1;str+="".concat(borderWidth," w ").concat(getPdfColor(this.borderColor,false)," ").concat(rect," S ");}return str;}},{key:"getOperatorList",value:function(){var _getOperatorList2=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee10(evaluator,task,intent,renderForms,annotationStorage){var content,opList,isUsingOwnCanvas,matrix,bbox,transform,optionalContent,stream;return annotation_regeneratorRuntime().wrap(function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:if(!(renderForms&&!(this instanceof SignatureWidgetAnnotation)&&!this.data.noHTML&&!this.data.hasOwnCanvas)){_context10.next=2;break;}return _context10.abrupt("return",{opList:new OperatorList(),separateForm:true,separateCanvas:false});case 2:if(this._hasText){_context10.next=4;break;}return _context10.abrupt("return",annotation_get(annotation_getPrototypeOf(WidgetAnnotation.prototype),"getOperatorList",this).call(this,evaluator,task,intent,renderForms,annotationStorage));case 4:_context10.next=6;return this._getAppearance(evaluator,task,intent,annotationStorage);case 6:content=_context10.sent;if(!(this.appearance&&content===null)){_context10.next=9;break;}return _context10.abrupt("return",annotation_get(annotation_getPrototypeOf(WidgetAnnotation.prototype),"getOperatorList",this).call(this,evaluator,task,intent,renderForms,annotationStorage));case 9:opList=new OperatorList();if(!(!this._defaultAppearance||content===null)){_context10.next=12;break;}return _context10.abrupt("return",{opList:opList,separateForm:false,separateCanvas:false});case 12:isUsingOwnCanvas=!!(this.data.hasOwnCanvas&&intent&RenderingIntentFlag.DISPLAY);matrix=[1,0,0,1,0,0];bbox=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]];transform=getTransformMatrix(this.data.rect,bbox,matrix);if(!this.oc){_context10.next=20;break;}_context10.next=19;return evaluator.parseMarkedContentProps(this.oc,null);case 19:optionalContent=_context10.sent;case 20:if(optionalContent!==undefined){opList.addOp(OPS.beginMarkedContentProps,["OC",optionalContent]);}opList.addOp(OPS.beginAnnotation,[this.data.id,this.data.rect,transform,this.getRotationMatrix(annotationStorage),isUsingOwnCanvas]);stream=new StringStream(content);_context10.next=25;return evaluator.getOperatorList({stream:stream,task:task,resources:this._fieldResources.mergedResources,operatorList:opList});case 25:opList.addOp(OPS.endAnnotation,[]);if(optionalContent!==undefined){opList.addOp(OPS.endMarkedContent,[]);}return _context10.abrupt("return",{opList:opList,separateForm:false,separateCanvas:isUsingOwnCanvas});case 28:case"end":return _context10.stop();}},_callee10,this);}));function getOperatorList(_x38,_x39,_x40,_x41,_x42){return _getOperatorList2.apply(this,arguments);}return getOperatorList;}()},{key:"_getMKDict",value:function _getMKDict(rotation){var mk=new Dict(null);if(rotation){mk.set("R",rotation);}if(this.borderColor){mk.set("BC",getPdfColorArray(this.borderColor));}if(this.backgroundColor){mk.set("BG",getPdfColorArray(this.backgroundColor));}return mk.size>0?mk:null;}},{key:"amendSavedDict",value:function amendSavedDict(annotationStorage,dict){}},{key:"save",value:function(){var _save2=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee11(evaluator,task,annotationStorage){var _this3=this,_appearance;var storageEntry,value,rotation,appearance,needAppearances,xref,originalDict,dict,_iterator10,_step10,key,xfa,encoder,maybeMK,buffer,changes,newRef,AP,resources,appearanceStream,appearanceDict,rotationMatrix;return annotation_regeneratorRuntime().wrap(function _callee11$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:storageEntry=annotationStorage===null||annotationStorage===void 0?void 0:annotationStorage.get(this.data.id);value=storageEntry===null||storageEntry===void 0?void 0:storageEntry.value,rotation=storageEntry===null||storageEntry===void 0?void 0:storageEntry.rotation;if(!(value===this.data.fieldValue||value===undefined)){_context11.next=6;break;}if(!(!this._hasValueFromXFA&&rotation===undefined)){_context11.next=5;break;}return _context11.abrupt("return",null);case 5:value||(value=this.data.fieldValue);case 6:if(!(rotation===undefined&&!this._hasValueFromXFA&&Array.isArray(value)&&Array.isArray(this.data.fieldValue)&&value.length===this.data.fieldValue.length&&value.every(function(x,i){return x===_this3.data.fieldValue[i];}))){_context11.next=8;break;}return _context11.abrupt("return",null);case 8:if(rotation===undefined){rotation=this.rotation;}appearance=null;if(this._needAppearances){_context11.next=18;break;}_context11.next=13;return this._getAppearance(evaluator,task,RenderingIntentFlag.SAVE,annotationStorage);case 13:appearance=_context11.sent;if(!(appearance===null)){_context11.next=16;break;}return _context11.abrupt("return",null);case 16:_context11.next=18;break;case 18:needAppearances=false;if((_appearance=appearance)!==null&&_appearance!==void 0&&_appearance.needAppearances){needAppearances=true;appearance=null;}xref=evaluator.xref;originalDict=xref.fetchIfRef(this.ref);if(originalDict instanceof Dict){_context11.next=24;break;}return _context11.abrupt("return",null);case 24:dict=new Dict(xref);_iterator10=annotation_createForOfIteratorHelper(originalDict.getKeys());try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){key=_step10.value;if(key!=="AP"){dict.set(key,originalDict.getRaw(key));}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}xfa={path:this.data.fieldName,value:value};encoder=function encoder(val){return isAscii(val)?val:stringToUTF16String(val,true);};dict.set("V",Array.isArray(value)?value.map(encoder):encoder(value));this.amendSavedDict(annotationStorage,dict);maybeMK=this._getMKDict(rotation);if(maybeMK){dict.set("MK",maybeMK);}buffer=[];changes=[{ref:this.ref,data:"",xfa:xfa,needAppearances:needAppearances}];if(!(appearance!==null)){_context11.next=52;break;}newRef=xref.getNewTemporaryRef();AP=new Dict(xref);dict.set("AP",AP);AP.set("N",newRef);resources=this._getSaveFieldResources(xref);appearanceStream=new StringStream(appearance);appearanceDict=appearanceStream.dict=new Dict(xref);appearanceDict.set("Subtype",Name.get("Form"));appearanceDict.set("Resources",resources);appearanceDict.set("BBox",[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]]);rotationMatrix=this.getRotationMatrix(annotationStorage);if(rotationMatrix!==IDENTITY_MATRIX){appearanceDict.set("Matrix",rotationMatrix);}_context11.next=50;return writeObject(newRef,appearanceStream,buffer,xref);case 50:changes.push({ref:newRef,data:buffer.join(""),xfa:null,needAppearances:false});buffer.length=0;case 52:dict.set("M","D:".concat(getModificationDate()));_context11.next=55;return writeObject(this.ref,dict,buffer,xref);case 55:changes[0].data=buffer.join("");return _context11.abrupt("return",changes);case 57:case"end":return _context11.stop();}},_callee11,this);}));function save(_x43,_x44,_x45){return _save2.apply(this,arguments);}return save;}()},{key:"_getAppearance",value:function(){var _getAppearance2=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee12(evaluator,task,intent,annotationStorage){var isPassword,storageEntry,value,rotation,colors,option,lineCount,lines,defaultPadding,defaultHPadding,totalHeight,totalWidth,_ref5,font,defaultAppearance,fontSize,lineHeight,encodedLines,encodingError,_iterator11,_step11,line,encodedString,fontFamily,fakeUnicodeFont,resources,newFont,oldFont,_iterator12,_step12,key,fontName,i,ii,savedDefaultAppearance,_this$_computeFontSiz,_this$_computeFontSiz2,_this$_computeFontSiz3,_this$_computeFontSiz4,descent,defaultVPadding,alignment,bottomPadding,prevInfo,renderedText;return annotation_regeneratorRuntime().wrap(function _callee12$(_context12){while(1)switch(_context12.prev=_context12.next){case 0:isPassword=this.hasFieldFlag(AnnotationFieldFlag.PASSWORD);if(!isPassword){_context12.next=3;break;}return _context12.abrupt("return",null);case 3:storageEntry=annotationStorage===null||annotationStorage===void 0?void 0:annotationStorage.get(this.data.id);if(storageEntry){value=storageEntry.formattedValue||storageEntry.value;rotation=storageEntry.rotation;}if(!(rotation===undefined&&value===undefined&&!this._needAppearances)){_context12.next=8;break;}if(!(!this._hasValueFromXFA||this.appearance)){_context12.next=8;break;}return _context12.abrupt("return",null);case 8:colors=this.getBorderAndBackgroundAppearances(annotationStorage);if(!(value===undefined)){_context12.next=13;break;}value=this.data.fieldValue;if(value){_context12.next=13;break;}return _context12.abrupt("return","/Tx BMC q ".concat(colors,"Q EMC"));case 13:if(Array.isArray(value)&&value.length===1){value=value[0];}assert(typeof value==="string","Expected `value` to be a string.");value=value.trim();if(this.data.combo){option=this.data.options.find(function(_ref4){var exportValue=_ref4.exportValue;return value===exportValue;});value=(option===null||option===void 0?void 0:option.displayValue)||value;}if(!(value==="")){_context12.next=19;break;}return _context12.abrupt("return","/Tx BMC q ".concat(colors,"Q EMC"));case 19:if(rotation===undefined){rotation=this.rotation;}lineCount=-1;if(this.data.multiLine){lines=value.split(/\r\n?|\n/).map(function(line){return line.normalize("NFC");});lineCount=lines.length;}else{lines=[value.replace(/\r\n?|\n/,"").normalize("NFC")];}defaultPadding=1;defaultHPadding=2;totalHeight=this.data.rect[3]-this.data.rect[1];totalWidth=this.data.rect[2]-this.data.rect[0];if(rotation===90||rotation===270){_ref5=[totalHeight,totalWidth];totalWidth=_ref5[0];totalHeight=_ref5[1];}if(!this._defaultAppearance){this.data.defaultAppearanceData=parseDefaultAppearance(this._defaultAppearance="/Helvetica 0 Tf 0 g");}_context12.next=30;return WidgetAnnotation._getFontData(evaluator,task,this.data.defaultAppearanceData,this._fieldResources.mergedResources);case 30:font=_context12.sent;encodedLines=[];encodingError=false;_iterator11=annotation_createForOfIteratorHelper(lines);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){line=_step11.value;encodedString=font.encodeString(line);if(encodedString.length>1){encodingError=true;}encodedLines.push(encodedString.join(""));}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}if(!(encodingError&&intent&RenderingIntentFlag.SAVE)){_context12.next=37;break;}return _context12.abrupt("return",{needAppearances:true});case 37:if(!(encodingError&&this._isOffscreenCanvasSupported)){_context12.next=59;break;}fontFamily=this.data.comb?"monospace":"sans-serif";fakeUnicodeFont=new FakeUnicodeFont(evaluator.xref,fontFamily);resources=fakeUnicodeFont.createFontResources(lines.join(""));newFont=resources.getRaw("Font");if(this._fieldResources.mergedResources.has("Font")){oldFont=this._fieldResources.mergedResources.get("Font");_iterator12=annotation_createForOfIteratorHelper(newFont.getKeys());try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){key=_step12.value;oldFont.set(key,newFont.getRaw(key));}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}else{this._fieldResources.mergedResources.set("Font",newFont);}fontName=fakeUnicodeFont.fontName.name;_context12.next=46;return WidgetAnnotation._getFontData(evaluator,task,{fontName:fontName,fontSize:0},resources);case 46:font=_context12.sent;for(i=0,ii=encodedLines.length;i<ii;i++){encodedLines[i]=stringToUTF16String(lines[i]);}savedDefaultAppearance=Object.assign(Object.create(null),this.data.defaultAppearanceData);this.data.defaultAppearanceData.fontSize=0;this.data.defaultAppearanceData.fontName=fontName;_this$_computeFontSiz=this._computeFontSize(totalHeight-2*defaultPadding,totalWidth-2*defaultHPadding,value,font,lineCount);_this$_computeFontSiz2=annotation_slicedToArray(_this$_computeFontSiz,3);defaultAppearance=_this$_computeFontSiz2[0];fontSize=_this$_computeFontSiz2[1];lineHeight=_this$_computeFontSiz2[2];this.data.defaultAppearanceData=savedDefaultAppearance;_context12.next=65;break;case 59:if(!this._isOffscreenCanvasSupported){warn("_getAppearance: OffscreenCanvas is not supported, annotation may not render correctly.");}_this$_computeFontSiz3=this._computeFontSize(totalHeight-2*defaultPadding,totalWidth-2*defaultHPadding,value,font,lineCount);_this$_computeFontSiz4=annotation_slicedToArray(_this$_computeFontSiz3,3);defaultAppearance=_this$_computeFontSiz4[0];fontSize=_this$_computeFontSiz4[1];lineHeight=_this$_computeFontSiz4[2];case 65:descent=font.descent;if(isNaN(descent)){descent=BASELINE_FACTOR*lineHeight;}else{descent=Math.max(BASELINE_FACTOR*lineHeight,Math.abs(descent)*fontSize);}defaultVPadding=Math.min(Math.floor((totalHeight-fontSize)/2),defaultPadding);alignment=this.data.textAlignment;if(!this.data.multiLine){_context12.next=71;break;}return _context12.abrupt("return",this._getMultilineAppearance(defaultAppearance,encodedLines,font,fontSize,totalWidth,totalHeight,alignment,defaultHPadding,defaultVPadding,descent,lineHeight,annotationStorage));case 71:if(!this.data.comb){_context12.next=73;break;}return _context12.abrupt("return",this._getCombAppearance(defaultAppearance,font,encodedLines[0],fontSize,totalWidth,totalHeight,defaultHPadding,defaultVPadding,descent,lineHeight,annotationStorage));case 73:bottomPadding=defaultVPadding+descent;if(!(alignment===0||alignment>2)){_context12.next=76;break;}return _context12.abrupt("return","/Tx BMC q ".concat(colors,"BT ")+defaultAppearance+" 1 0 0 1 ".concat(numberToString(defaultHPadding)," ").concat(numberToString(bottomPadding)," Tm (").concat(escapeString(encodedLines[0]),") Tj")+" ET Q EMC");case 76:prevInfo={shift:0};renderedText=this._renderText(encodedLines[0],font,fontSize,totalWidth,alignment,prevInfo,defaultHPadding,bottomPadding);return _context12.abrupt("return","/Tx BMC q ".concat(colors,"BT ")+defaultAppearance+" 1 0 0 1 0 0 Tm ".concat(renderedText)+" ET Q EMC");case 79:case"end":return _context12.stop();}},_callee12,this);}));function _getAppearance(_x46,_x47,_x48,_x49){return _getAppearance2.apply(this,arguments);}return _getAppearance;}()},{key:"_getTextWidth",value:function _getTextWidth(text,font){return font.charsToGlyphs(text).reduce(function(width,glyph){return width+glyph.width;},0)/1000;}},{key:"_computeFontSize",value:function _computeFontSize(height,width,text,font,lineCount){var _this4=this;var fontSize=this.data.defaultAppearanceData.fontSize;var lineHeight=(fontSize||12)*LINE_FACTOR,numberOfLines=Math.round(height/lineHeight);if(!fontSize){var roundWithTwoDigits=function roundWithTwoDigits(x){return Math.floor(x*100)/100;};if(lineCount===-1){var textWidth=this._getTextWidth(text,font);fontSize=roundWithTwoDigits(Math.min(height/LINE_FACTOR,textWidth>width?width/textWidth:Infinity));numberOfLines=1;}else{var lines=text.split(/\r\n?|\n/);var cachedLines=[];var _iterator13=annotation_createForOfIteratorHelper(lines),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var line=_step13.value;var encoded=font.encodeString(line).join("");var glyphs=font.charsToGlyphs(encoded);var positions=font.getCharPositions(encoded);cachedLines.push({line:encoded,glyphs:glyphs,positions:positions});}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}var isTooBig=function isTooBig(fsize){var totalHeight=0;for(var _i=0,_cachedLines=cachedLines;_i<_cachedLines.length;_i++){var cache=_cachedLines[_i];var chunks=_this4._splitLine(null,font,fsize,width,cache);totalHeight+=chunks.length*fsize;if(totalHeight>height){return true;}}return false;};numberOfLines=Math.max(numberOfLines,lineCount);while(true){lineHeight=height/numberOfLines;fontSize=roundWithTwoDigits(lineHeight/LINE_FACTOR);if(isTooBig(fontSize)){numberOfLines++;continue;}break;}}var _this$data$defaultApp=this.data.defaultAppearanceData,fontName=_this$data$defaultApp.fontName,fontColor=_this$data$defaultApp.fontColor;this._defaultAppearance=createDefaultAppearance({fontSize:fontSize,fontName:fontName,fontColor:fontColor});}return[this._defaultAppearance,fontSize,height/numberOfLines];}},{key:"_renderText",value:function _renderText(text,font,fontSize,totalWidth,alignment,prevInfo,hPadding,vPadding){var shift;if(alignment===1){var width=this._getTextWidth(text,font)*fontSize;shift=(totalWidth-width)/2;}else if(alignment===2){var _width=this._getTextWidth(text,font)*fontSize;shift=totalWidth-_width-hPadding;}else{shift=hPadding;}var shiftStr=numberToString(shift-prevInfo.shift);prevInfo.shift=shift;vPadding=numberToString(vPadding);return"".concat(shiftStr," ").concat(vPadding," Td (").concat(escapeString(text),") Tj");}},{key:"_getSaveFieldResources",value:function _getSaveFieldResources(xref){var _this$data$defaultApp2;var _this$_fieldResources=this._fieldResources,localResources=_this$_fieldResources.localResources,appearanceResources=_this$_fieldResources.appearanceResources,acroFormResources=_this$_fieldResources.acroFormResources;var fontName=(_this$data$defaultApp2=this.data.defaultAppearanceData)===null||_this$data$defaultApp2===void 0?void 0:_this$data$defaultApp2.fontName;if(!fontName){return localResources||Dict.empty;}for(var _i2=0,_arr=[localResources,appearanceResources];_i2<_arr.length;_i2++){var resources=_arr[_i2];if(resources instanceof Dict){var localFont=resources.get("Font");if(localFont instanceof Dict&&localFont.has(fontName)){return resources;}}}if(acroFormResources instanceof Dict){var acroFormFont=acroFormResources.get("Font");if(acroFormFont instanceof Dict&&acroFormFont.has(fontName)){var subFontDict=new Dict(xref);subFontDict.set(fontName,acroFormFont.getRaw(fontName));var subResourcesDict=new Dict(xref);subResourcesDict.set("Font",subFontDict);return Dict.merge({xref:xref,dictArray:[subResourcesDict,localResources],mergeSubDicts:true});}}return localResources||Dict.empty;}},{key:"getFieldObject",value:function getFieldObject(){return null;}}],[{key:"_getFontData",value:function(){var _getFontData2=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee13(evaluator,task,appearanceData,resources){var operatorList,initialState,fontName,fontSize;return annotation_regeneratorRuntime().wrap(function _callee13$(_context13){while(1)switch(_context13.prev=_context13.next){case 0:operatorList=new OperatorList();initialState={font:null,clone:function clone(){return this;}};fontName=appearanceData.fontName,fontSize=appearanceData.fontSize;_context13.next=5;return evaluator.handleSetFont(resources,[fontName&&Name.get(fontName),fontSize],null,operatorList,task,initialState,null);case 5:return _context13.abrupt("return",initialState.font);case 6:case"end":return _context13.stop();}},_callee13);}));function _getFontData(_x50,_x51,_x52,_x53){return _getFontData2.apply(this,arguments);}return _getFontData;}()}]);return WidgetAnnotation;}(Annotation);var TextWidgetAnnotation=/*#__PURE__*/function(_WidgetAnnotation){annotation_inherits(TextWidgetAnnotation,_WidgetAnnotation);var _super3=annotation_createSuper(TextWidgetAnnotation);function TextWidgetAnnotation(params){var _this5;annotation_classCallCheck(this,TextWidgetAnnotation);_this5=_super3.call(this,params);_this5.data.hasOwnCanvas=_this5.data.readOnly&&!_this5.data.noHTML;_this5._hasText=true;var dict=params.dict;if(typeof _this5.data.fieldValue!=="string"){_this5.data.fieldValue="";}var alignment=getInheritableProperty({dict:dict,key:"Q"});if(!Number.isInteger(alignment)||alignment<0||alignment>2){alignment=null;}_this5.data.textAlignment=alignment;var maximumLength=getInheritableProperty({dict:dict,key:"MaxLen"});if(!Number.isInteger(maximumLength)||maximumLength<0){maximumLength=0;}_this5.data.maxLen=maximumLength;_this5.data.multiLine=_this5.hasFieldFlag(AnnotationFieldFlag.MULTILINE);_this5.data.comb=_this5.hasFieldFlag(AnnotationFieldFlag.COMB)&&!_this5.hasFieldFlag(AnnotationFieldFlag.MULTILINE)&&!_this5.hasFieldFlag(AnnotationFieldFlag.PASSWORD)&&!_this5.hasFieldFlag(AnnotationFieldFlag.FILESELECT)&&_this5.data.maxLen!==0;_this5.data.doNotScroll=_this5.hasFieldFlag(AnnotationFieldFlag.DONOTSCROLL);return _this5;}annotation_createClass(TextWidgetAnnotation,[{key:"hasTextContent",get:function get(){return!!this.appearance&&!this._needAppearances;}},{key:"_getCombAppearance",value:function _getCombAppearance(defaultAppearance,font,text,fontSize,width,height,hPadding,vPadding,descent,lineHeight,annotationStorage){var combWidth=width/this.data.maxLen;var colors=this.getBorderAndBackgroundAppearances(annotationStorage);var buf=[];var positions=font.getCharPositions(text);var _iterator14=annotation_createForOfIteratorHelper(positions),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var _step14$value=annotation_slicedToArray(_step14.value,2),start=_step14$value[0],end=_step14$value[1];buf.push("(".concat(escapeString(text.substring(start,end)),") Tj"));}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}var renderedComb=buf.join(" ".concat(numberToString(combWidth)," 0 Td "));return"/Tx BMC q ".concat(colors,"BT ")+defaultAppearance+" 1 0 0 1 ".concat(numberToString(hPadding)," ").concat(numberToString(vPadding+descent)," Tm ").concat(renderedComb)+" ET Q EMC";}},{key:"_getMultilineAppearance",value:function _getMultilineAppearance(defaultAppearance,lines,font,fontSize,width,height,alignment,hPadding,vPadding,descent,lineHeight,annotationStorage){var buf=[];var totalWidth=width-2*hPadding;var prevInfo={shift:0};for(var i=0,ii=lines.length;i<ii;i++){var line=lines[i];var chunks=this._splitLine(line,font,fontSize,totalWidth);for(var j=0,jj=chunks.length;j<jj;j++){var chunk=chunks[j];var vShift=i===0&&j===0?-vPadding-(lineHeight-descent):-lineHeight;buf.push(this._renderText(chunk,font,fontSize,width,alignment,prevInfo,hPadding,vShift));}}var colors=this.getBorderAndBackgroundAppearances(annotationStorage);var renderedText=buf.join("\n");return"/Tx BMC q ".concat(colors,"BT ")+defaultAppearance+" 1 0 0 1 0 ".concat(numberToString(height)," Tm ").concat(renderedText)+" ET Q EMC";}},{key:"_splitLine",value:function _splitLine(line,font,fontSize,width){var cache=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};line=cache.line||line;var glyphs=cache.glyphs||font.charsToGlyphs(line);if(glyphs.length<=1){return[line];}var positions=cache.positions||font.getCharPositions(line);var scale=fontSize/1000;var chunks=[];var lastSpacePosInStringStart=-1,lastSpacePosInStringEnd=-1,lastSpacePos=-1,startChunk=0,currentWidth=0;for(var i=0,ii=glyphs.length;i<ii;i++){var _positions$i=annotation_slicedToArray(positions[i],2),start=_positions$i[0],end=_positions$i[1];var glyph=glyphs[i];var glyphWidth=glyph.width*scale;if(glyph.unicode===" "){if(currentWidth+glyphWidth>width){chunks.push(line.substring(startChunk,start));startChunk=start;currentWidth=glyphWidth;lastSpacePosInStringStart=-1;lastSpacePos=-1;}else{currentWidth+=glyphWidth;lastSpacePosInStringStart=start;lastSpacePosInStringEnd=end;lastSpacePos=i;}}else if(currentWidth+glyphWidth>width){if(lastSpacePosInStringStart!==-1){chunks.push(line.substring(startChunk,lastSpacePosInStringEnd));startChunk=lastSpacePosInStringEnd;i=lastSpacePos+1;lastSpacePosInStringStart=-1;currentWidth=0;}else{chunks.push(line.substring(startChunk,start));startChunk=start;currentWidth=glyphWidth;}}else{currentWidth+=glyphWidth;}}if(startChunk<line.length){chunks.push(line.substring(startChunk,line.length));}return chunks;}},{key:"getFieldObject",value:function getFieldObject(){return{id:this.data.id,value:this.data.fieldValue,defaultValue:this.data.defaultFieldValue||"",multiline:this.data.multiLine,password:this.hasFieldFlag(AnnotationFieldFlag.PASSWORD),charLimit:this.data.maxLen,comb:this.data.comb,editable:!this.data.readOnly,hidden:this.data.hidden,name:this.data.fieldName,rect:this.data.rect,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:"text"};}}]);return TextWidgetAnnotation;}(WidgetAnnotation);var ButtonWidgetAnnotation=/*#__PURE__*/function(_WidgetAnnotation2){annotation_inherits(ButtonWidgetAnnotation,_WidgetAnnotation2);var _super4=annotation_createSuper(ButtonWidgetAnnotation);function ButtonWidgetAnnotation(params){var _this6;annotation_classCallCheck(this,ButtonWidgetAnnotation);_this6=_super4.call(this,params);_this6.checkedAppearance=null;_this6.uncheckedAppearance=null;_this6.data.checkBox=!_this6.hasFieldFlag(AnnotationFieldFlag.RADIO)&&!_this6.hasFieldFlag(AnnotationFieldFlag.PUSHBUTTON);_this6.data.radioButton=_this6.hasFieldFlag(AnnotationFieldFlag.RADIO)&&!_this6.hasFieldFlag(AnnotationFieldFlag.PUSHBUTTON);_this6.data.pushButton=_this6.hasFieldFlag(AnnotationFieldFlag.PUSHBUTTON);_this6.data.isTooltipOnly=false;if(_this6.data.checkBox){_this6._processCheckBox(params);}else if(_this6.data.radioButton){_this6._processRadioButton(params);}else if(_this6.data.pushButton){_this6.data.hasOwnCanvas=true;_this6.data.noHTML=false;_this6._processPushButton(params);}else{warn("Invalid field flags for button widget annotation");}return _this6;}annotation_createClass(ButtonWidgetAnnotation,[{key:"getOperatorList",value:function(){var _getOperatorList3=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee14(evaluator,task,intent,renderForms,annotationStorage){var value,rotation,storageEntry,appearance,savedAppearance,savedMatrix,operatorList;return annotation_regeneratorRuntime().wrap(function _callee14$(_context14){while(1)switch(_context14.prev=_context14.next){case 0:if(!this.data.pushButton){_context14.next=2;break;}return _context14.abrupt("return",annotation_get(annotation_getPrototypeOf(ButtonWidgetAnnotation.prototype),"getOperatorList",this).call(this,evaluator,task,intent,false,annotationStorage));case 2:value=null;rotation=null;if(annotationStorage){storageEntry=annotationStorage.get(this.data.id);value=storageEntry?storageEntry.value:null;rotation=storageEntry?storageEntry.rotation:null;}if(!(value===null&&this.appearance)){_context14.next=7;break;}return _context14.abrupt("return",annotation_get(annotation_getPrototypeOf(ButtonWidgetAnnotation.prototype),"getOperatorList",this).call(this,evaluator,task,intent,renderForms,annotationStorage));case 7:if(value===null||value===undefined){value=this.data.checkBox?this.data.fieldValue===this.data.exportValue:this.data.fieldValue===this.data.buttonValue;}appearance=value?this.checkedAppearance:this.uncheckedAppearance;if(!appearance){_context14.next=18;break;}savedAppearance=this.appearance;savedMatrix=appearance.dict.getArray("Matrix")||IDENTITY_MATRIX;if(rotation){appearance.dict.set("Matrix",this.getRotationMatrix(annotationStorage));}this.appearance=appearance;operatorList=annotation_get(annotation_getPrototypeOf(ButtonWidgetAnnotation.prototype),"getOperatorList",this).call(this,evaluator,task,intent,renderForms,annotationStorage);this.appearance=savedAppearance;appearance.dict.set("Matrix",savedMatrix);return _context14.abrupt("return",operatorList);case 18:return _context14.abrupt("return",{opList:new OperatorList(),separateForm:false,separateCanvas:false});case 19:case"end":return _context14.stop();}},_callee14,this);}));function getOperatorList(_x54,_x55,_x56,_x57,_x58){return _getOperatorList3.apply(this,arguments);}return getOperatorList;}()},{key:"save",value:function(){var _save3=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee15(evaluator,task,annotationStorage){return annotation_regeneratorRuntime().wrap(function _callee15$(_context15){while(1)switch(_context15.prev=_context15.next){case 0:if(!this.data.checkBox){_context15.next=2;break;}return _context15.abrupt("return",this._saveCheckbox(evaluator,task,annotationStorage));case 2:if(!this.data.radioButton){_context15.next=4;break;}return _context15.abrupt("return",this._saveRadioButton(evaluator,task,annotationStorage));case 4:return _context15.abrupt("return",null);case 5:case"end":return _context15.stop();}},_callee15,this);}));function save(_x59,_x60,_x61){return _save3.apply(this,arguments);}return save;}()},{key:"_saveCheckbox",value:function(){var _saveCheckbox2=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee16(evaluator,task,annotationStorage){var storageEntry,rotation,value,defaultValue,dict,xfa,name,maybeMK,buffer;return annotation_regeneratorRuntime().wrap(function _callee16$(_context16){while(1)switch(_context16.prev=_context16.next){case 0:if(annotationStorage){_context16.next=2;break;}return _context16.abrupt("return",null);case 2:storageEntry=annotationStorage.get(this.data.id);rotation=storageEntry===null||storageEntry===void 0?void 0:storageEntry.rotation,value=storageEntry===null||storageEntry===void 0?void 0:storageEntry.value;if(!(rotation===undefined)){_context16.next=10;break;}if(!(value===undefined)){_context16.next=7;break;}return _context16.abrupt("return",null);case 7:defaultValue=this.data.fieldValue===this.data.exportValue;if(!(defaultValue===value)){_context16.next=10;break;}return _context16.abrupt("return",null);case 10:dict=evaluator.xref.fetchIfRef(this.ref);if(dict instanceof Dict){_context16.next=13;break;}return _context16.abrupt("return",null);case 13:if(rotation===undefined){rotation=this.rotation;}if(value===undefined){value=this.data.fieldValue===this.data.exportValue;}xfa={path:this.data.fieldName,value:value?this.data.exportValue:""};name=Name.get(value?this.data.exportValue:"Off");dict.set("V",name);dict.set("AS",name);dict.set("M","D:".concat(getModificationDate()));maybeMK=this._getMKDict(rotation);if(maybeMK){dict.set("MK",maybeMK);}buffer=[];_context16.next=25;return writeObject(this.ref,dict,buffer,evaluator.xref);case 25:return _context16.abrupt("return",[{ref:this.ref,data:buffer.join(""),xfa:xfa}]);case 26:case"end":return _context16.stop();}},_callee16,this);}));function _saveCheckbox(_x62,_x63,_x64){return _saveCheckbox2.apply(this,arguments);}return _saveCheckbox;}()},{key:"_saveRadioButton",value:function(){var _saveRadioButton2=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee17(evaluator,task,annotationStorage){var storageEntry,rotation,value,defaultValue,dict,xfa,name,buffer,parentData,parent,maybeMK,newRefs;return annotation_regeneratorRuntime().wrap(function _callee17$(_context17){while(1)switch(_context17.prev=_context17.next){case 0:if(annotationStorage){_context17.next=2;break;}return _context17.abrupt("return",null);case 2:storageEntry=annotationStorage.get(this.data.id);rotation=storageEntry===null||storageEntry===void 0?void 0:storageEntry.rotation,value=storageEntry===null||storageEntry===void 0?void 0:storageEntry.value;if(!(rotation===undefined)){_context17.next=10;break;}if(!(value===undefined)){_context17.next=7;break;}return _context17.abrupt("return",null);case 7:defaultValue=this.data.fieldValue===this.data.buttonValue;if(!(defaultValue===value)){_context17.next=10;break;}return _context17.abrupt("return",null);case 10:dict=evaluator.xref.fetchIfRef(this.ref);if(dict instanceof Dict){_context17.next=13;break;}return _context17.abrupt("return",null);case 13:if(value===undefined){value=this.data.fieldValue===this.data.buttonValue;}if(rotation===undefined){rotation=this.rotation;}xfa={path:this.data.fieldName,value:value?this.data.buttonValue:""};name=Name.get(value?this.data.buttonValue:"Off");buffer=[];parentData=null;if(!value){_context17.next=30;break;}if(!(this.parent instanceof Ref)){_context17.next=29;break;}parent=evaluator.xref.fetch(this.parent);parent.set("V",name);_context17.next=25;return writeObject(this.parent,parent,buffer,evaluator.xref);case 25:parentData=buffer.join("");buffer.length=0;_context17.next=30;break;case 29:if(this.parent instanceof Dict){this.parent.set("V",name);}case 30:dict.set("AS",name);dict.set("M","D:".concat(getModificationDate()));maybeMK=this._getMKDict(rotation);if(maybeMK){dict.set("MK",maybeMK);}_context17.next=36;return writeObject(this.ref,dict,buffer,evaluator.xref);case 36:newRefs=[{ref:this.ref,data:buffer.join(""),xfa:xfa}];if(parentData){newRefs.push({ref:this.parent,data:parentData,xfa:null});}return _context17.abrupt("return",newRefs);case 39:case"end":return _context17.stop();}},_callee17,this);}));function _saveRadioButton(_x65,_x66,_x67){return _saveRadioButton2.apply(this,arguments);}return _saveRadioButton;}()},{key:"_getDefaultCheckedAppearance",value:function _getDefaultCheckedAppearance(params,type){var width=this.data.rect[2]-this.data.rect[0];var height=this.data.rect[3]-this.data.rect[1];var bbox=[0,0,width,height];var FONT_RATIO=0.8;var fontSize=Math.min(width,height)*FONT_RATIO;var metrics,char;if(type==="check"){metrics={width:0.755*fontSize,height:0.705*fontSize};char="\x33";}else if(type==="disc"){metrics={width:0.791*fontSize,height:0.705*fontSize};char="\x6C";}else{unreachable("_getDefaultCheckedAppearance - unsupported type: ".concat(type));}var xShift=numberToString((width-metrics.width)/2);var yShift=numberToString((height-metrics.height)/2);var appearance="q BT /PdfJsZaDb ".concat(fontSize," Tf 0 g ").concat(xShift," ").concat(yShift," Td (").concat(char,") Tj ET Q");var appearanceStreamDict=new Dict(params.xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",bbox);appearanceStreamDict.set("Matrix",[1,0,0,1,0,0]);appearanceStreamDict.set("Length",appearance.length);var resources=new Dict(params.xref);var font=new Dict(params.xref);font.set("PdfJsZaDb",this.fallbackFontDict);resources.set("Font",font);appearanceStreamDict.set("Resources",resources);this.checkedAppearance=new StringStream(appearance);this.checkedAppearance.dict=appearanceStreamDict;this._streams.push(this.checkedAppearance);}},{key:"_processCheckBox",value:function _processCheckBox(params){var customAppearance=params.dict.get("AP");if(!(customAppearance instanceof Dict)){return;}var normalAppearance=customAppearance.get("N");if(!(normalAppearance instanceof Dict)){return;}var asValue=this._decodeFormValue(params.dict.get("AS"));if(typeof asValue==="string"){this.data.fieldValue=asValue;}var yes=this.data.fieldValue!==null&&this.data.fieldValue!=="Off"?this.data.fieldValue:"Yes";var exportValues=normalAppearance.getKeys();if(exportValues.length===0){exportValues.push("Off",yes);}else if(exportValues.length===1){if(exportValues[0]==="Off"){exportValues.push(yes);}else{exportValues.unshift("Off");}}else if(exportValues.includes(yes)){exportValues.length=0;exportValues.push("Off",yes);}else{var otherYes=exportValues.find(function(v){return v!=="Off";});exportValues.length=0;exportValues.push("Off",otherYes);}if(!exportValues.includes(this.data.fieldValue)){this.data.fieldValue="Off";}this.data.exportValue=exportValues[1];var checkedAppearance=normalAppearance.get(this.data.exportValue);this.checkedAppearance=checkedAppearance instanceof BaseStream?checkedAppearance:null;var uncheckedAppearance=normalAppearance.get("Off");this.uncheckedAppearance=uncheckedAppearance instanceof BaseStream?uncheckedAppearance:null;if(this.checkedAppearance){this._streams.push(this.checkedAppearance);}else{this._getDefaultCheckedAppearance(params,"check");}if(this.uncheckedAppearance){this._streams.push(this.uncheckedAppearance);}this._fallbackFontDict=this.fallbackFontDict;if(this.data.defaultFieldValue===null){this.data.defaultFieldValue="Off";}}},{key:"_processRadioButton",value:function _processRadioButton(params){this.data.buttonValue=null;var fieldParent=params.dict.get("Parent");if(fieldParent instanceof Dict){this.parent=params.dict.getRaw("Parent");var fieldParentValue=fieldParent.get("V");if(fieldParentValue instanceof Name){this.data.fieldValue=this._decodeFormValue(fieldParentValue);}}var appearanceStates=params.dict.get("AP");if(!(appearanceStates instanceof Dict)){return;}var normalAppearance=appearanceStates.get("N");if(!(normalAppearance instanceof Dict)){return;}var _iterator15=annotation_createForOfIteratorHelper(normalAppearance.getKeys()),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var key=_step15.value;if(key!=="Off"){this.data.buttonValue=this._decodeFormValue(key);break;}}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}var checkedAppearance=normalAppearance.get(this.data.buttonValue);this.checkedAppearance=checkedAppearance instanceof BaseStream?checkedAppearance:null;var uncheckedAppearance=normalAppearance.get("Off");this.uncheckedAppearance=uncheckedAppearance instanceof BaseStream?uncheckedAppearance:null;if(this.checkedAppearance){this._streams.push(this.checkedAppearance);}else{this._getDefaultCheckedAppearance(params,"disc");}if(this.uncheckedAppearance){this._streams.push(this.uncheckedAppearance);}this._fallbackFontDict=this.fallbackFontDict;if(this.data.defaultFieldValue===null){this.data.defaultFieldValue="Off";}}},{key:"_processPushButton",value:function _processPushButton(params){var dict=params.dict,annotationGlobals=params.annotationGlobals;if(!dict.has("A")&&!dict.has("AA")&&!this.data.alternativeText){warn("Push buttons without action dictionaries are not supported");return;}this.data.isTooltipOnly=!dict.has("A")&&!dict.has("AA");Catalog.parseDestDictionary({destDict:dict,resultObj:this.data,docBaseUrl:annotationGlobals.baseUrl,docAttachments:annotationGlobals.attachments});}},{key:"getFieldObject",value:function getFieldObject(){var type="button";var exportValues;if(this.data.checkBox){type="checkbox";exportValues=this.data.exportValue;}else if(this.data.radioButton){type="radiobutton";exportValues=this.data.buttonValue;}return{id:this.data.id,value:this.data.fieldValue||"Off",defaultValue:this.data.defaultFieldValue,exportValues:exportValues,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,hidden:this.data.hidden,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:type};}},{key:"fallbackFontDict",get:function get(){var dict=new Dict();dict.set("BaseFont",Name.get("ZapfDingbats"));dict.set("Type",Name.get("FallbackType"));dict.set("Subtype",Name.get("FallbackType"));dict.set("Encoding",Name.get("ZapfDingbatsEncoding"));return shadow(this,"fallbackFontDict",dict);}}]);return ButtonWidgetAnnotation;}(WidgetAnnotation);var ChoiceWidgetAnnotation=/*#__PURE__*/function(_WidgetAnnotation3){annotation_inherits(ChoiceWidgetAnnotation,_WidgetAnnotation3);var _super5=annotation_createSuper(ChoiceWidgetAnnotation);function ChoiceWidgetAnnotation(params){var _this7;annotation_classCallCheck(this,ChoiceWidgetAnnotation);_this7=_super5.call(this,params);var dict=params.dict,xref=params.xref;_this7.indices=dict.getArray("I");_this7.hasIndices=Array.isArray(_this7.indices)&&_this7.indices.length>0;_this7.data.options=[];var options=getInheritableProperty({dict:dict,key:"Opt"});if(Array.isArray(options)){for(var i=0,ii=options.length;i<ii;i++){var option=xref.fetchIfRef(options[i]);var isOptionArray=Array.isArray(option);_this7.data.options[i]={exportValue:_this7._decodeFormValue(isOptionArray?xref.fetchIfRef(option[0]):option),displayValue:_this7._decodeFormValue(isOptionArray?xref.fetchIfRef(option[1]):option)};}}if(!_this7.hasIndices){if(typeof _this7.data.fieldValue==="string"){_this7.data.fieldValue=[_this7.data.fieldValue];}else if(!_this7.data.fieldValue){_this7.data.fieldValue=[];}}else{_this7.data.fieldValue=[];var _ii=_this7.data.options.length;var _iterator16=annotation_createForOfIteratorHelper(_this7.indices),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var _i3=_step16.value;if(Number.isInteger(_i3)&&_i3>=0&&_i3<_ii){_this7.data.fieldValue.push(_this7.data.options[_i3].exportValue);}}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}}_this7.data.combo=_this7.hasFieldFlag(AnnotationFieldFlag.COMBO);_this7.data.multiSelect=_this7.hasFieldFlag(AnnotationFieldFlag.MULTISELECT);_this7._hasText=true;return _this7;}annotation_createClass(ChoiceWidgetAnnotation,[{key:"getFieldObject",value:function getFieldObject(){var type=this.data.combo?"combobox":"listbox";var value=this.data.fieldValue.length>0?this.data.fieldValue[0]:null;return{id:this.data.id,value:value,defaultValue:this.data.defaultFieldValue,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,numItems:this.data.fieldValue.length,multipleSelection:this.data.multiSelect,hidden:this.data.hidden,actions:this.data.actions,items:this.data.options,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:type};}},{key:"amendSavedDict",value:function amendSavedDict(annotationStorage,dict){var _annotationStorage$ge5;if(!this.hasIndices){return;}var values=annotationStorage===null||annotationStorage===void 0||(_annotationStorage$ge5=annotationStorage.get(this.data.id))===null||_annotationStorage$ge5===void 0?void 0:_annotationStorage$ge5.value;if(!Array.isArray(values)){values=[values];}var indices=[];var options=this.data.options;for(var i=0,j=0,ii=options.length;i<ii;i++){if(options[i].exportValue===values[j]){indices.push(i);j+=1;}}dict.set("I",indices);}},{key:"_getAppearance",value:function(){var _getAppearance3=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee18(evaluator,task,intent,annotationStorage){var exportedValue,rotation,storageEntry,defaultPadding,defaultHPadding,totalHeight,totalWidth,_ref6,lineCount,valueIndices,i,exportValue,font,defaultAppearance,fontSize,_lineHeight,lineWidth,value,_iterator17,_step17,displayValue,width,_this$_computeFontSiz5,_this$_computeFontSiz6,lineHeight,vPadding,numberOfVisibleLines,firstIndex,minIndex,maxIndex,end,buf,_iterator18,_step18,index,prevInfo,_i4,_displayValue,vpadding;return annotation_regeneratorRuntime().wrap(function _callee18$(_context18){while(1)switch(_context18.prev=_context18.next){case 0:if(!this.data.combo){_context18.next=2;break;}return _context18.abrupt("return",annotation_get(annotation_getPrototypeOf(ChoiceWidgetAnnotation.prototype),"_getAppearance",this).call(this,evaluator,task,intent,annotationStorage));case 2:storageEntry=annotationStorage===null||annotationStorage===void 0?void 0:annotationStorage.get(this.data.id);if(storageEntry){rotation=storageEntry.rotation;exportedValue=storageEntry.value;}if(!(rotation===undefined&&exportedValue===undefined&&!this._needAppearances)){_context18.next=6;break;}return _context18.abrupt("return",null);case 6:if(exportedValue===undefined){exportedValue=this.data.fieldValue;}else if(!Array.isArray(exportedValue)){exportedValue=[exportedValue];}defaultPadding=1;defaultHPadding=2;totalHeight=this.data.rect[3]-this.data.rect[1];totalWidth=this.data.rect[2]-this.data.rect[0];if(rotation===90||rotation===270){_ref6=[totalHeight,totalWidth];totalWidth=_ref6[0];totalHeight=_ref6[1];}lineCount=this.data.options.length;valueIndices=[];for(i=0;i<lineCount;i++){exportValue=this.data.options[i].exportValue;if(exportedValue.includes(exportValue)){valueIndices.push(i);}}if(!this._defaultAppearance){this.data.defaultAppearanceData=parseDefaultAppearance(this._defaultAppearance="/Helvetica 0 Tf 0 g");}_context18.next=18;return WidgetAnnotation._getFontData(evaluator,task,this.data.defaultAppearanceData,this._fieldResources.mergedResources);case 18:font=_context18.sent;fontSize=this.data.defaultAppearanceData.fontSize;if(!fontSize){_lineHeight=(totalHeight-defaultPadding)/lineCount;lineWidth=-1;_iterator17=annotation_createForOfIteratorHelper(this.data.options);try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){displayValue=_step17.value.displayValue;width=this._getTextWidth(displayValue,font);if(width>lineWidth){lineWidth=width;value=displayValue;}}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}_this$_computeFontSiz5=this._computeFontSize(_lineHeight,totalWidth-2*defaultHPadding,value,font,-1);_this$_computeFontSiz6=annotation_slicedToArray(_this$_computeFontSiz5,2);defaultAppearance=_this$_computeFontSiz6[0];fontSize=_this$_computeFontSiz6[1];}else{defaultAppearance=this._defaultAppearance;}lineHeight=fontSize*LINE_FACTOR;vPadding=(lineHeight-fontSize)/2;numberOfVisibleLines=Math.floor(totalHeight/lineHeight);firstIndex=0;if(valueIndices.length>0){minIndex=Math.min.apply(Math,valueIndices);maxIndex=Math.max.apply(Math,valueIndices);firstIndex=Math.max(0,maxIndex-numberOfVisibleLines+1);if(firstIndex>minIndex){firstIndex=minIndex;}}end=Math.min(firstIndex+numberOfVisibleLines+1,lineCount);buf=["/Tx BMC q","1 1 ".concat(totalWidth," ").concat(totalHeight," re W n")];if(valueIndices.length){buf.push("0.600006 0.756866 0.854904 rg");_iterator18=annotation_createForOfIteratorHelper(valueIndices);try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){index=_step18.value;if(firstIndex<=index&&index<end){buf.push("1 ".concat(totalHeight-(index-firstIndex+1)*lineHeight," ").concat(totalWidth," ").concat(lineHeight," re f"));}}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}}buf.push("BT",defaultAppearance,"1 0 0 1 0 ".concat(totalHeight," Tm"));prevInfo={shift:0};for(_i4=firstIndex;_i4<end;_i4++){_displayValue=this.data.options[_i4].displayValue;vpadding=_i4===firstIndex?vPadding:0;buf.push(this._renderText(_displayValue,font,fontSize,totalWidth,0,prevInfo,defaultHPadding,-lineHeight+vpadding));}buf.push("ET Q EMC");return _context18.abrupt("return",buf.join("\n"));case 34:case"end":return _context18.stop();}},_callee18,this);}));function _getAppearance(_x68,_x69,_x70,_x71){return _getAppearance3.apply(this,arguments);}return _getAppearance;}()}]);return ChoiceWidgetAnnotation;}(WidgetAnnotation);var SignatureWidgetAnnotation=/*#__PURE__*/function(_WidgetAnnotation4){annotation_inherits(SignatureWidgetAnnotation,_WidgetAnnotation4);var _super6=annotation_createSuper(SignatureWidgetAnnotation);function SignatureWidgetAnnotation(params){var _this8;annotation_classCallCheck(this,SignatureWidgetAnnotation);_this8=_super6.call(this,params);_this8.data.fieldValue=null;_this8.data.hasOwnCanvas=_this8.data.noRotate;_this8.data.noHTML=!_this8.data.hasOwnCanvas;return _this8;}annotation_createClass(SignatureWidgetAnnotation,[{key:"getFieldObject",value:function getFieldObject(){return{id:this.data.id,value:null,page:this.data.pageIndex,type:"signature"};}}]);return SignatureWidgetAnnotation;}(WidgetAnnotation);var TextAnnotation=/*#__PURE__*/function(_MarkupAnnotation){annotation_inherits(TextAnnotation,_MarkupAnnotation);var _super7=annotation_createSuper(TextAnnotation);function TextAnnotation(params){var _this9;annotation_classCallCheck(this,TextAnnotation);var DEFAULT_ICON_SIZE=22;_this9=_super7.call(this,params);_this9.data.noRotate=true;_this9.data.hasOwnCanvas=_this9.data.noRotate;_this9.data.noHTML=false;var dict=params.dict;_this9.data.annotationType=AnnotationType.TEXT;if(_this9.data.hasAppearance){_this9.data.name="NoIcon";}else{_this9.data.rect[1]=_this9.data.rect[3]-DEFAULT_ICON_SIZE;_this9.data.rect[2]=_this9.data.rect[0]+DEFAULT_ICON_SIZE;_this9.data.name=dict.has("Name")?dict.get("Name").name:"Note";}if(dict.has("State")){_this9.data.state=dict.get("State")||null;_this9.data.stateModel=dict.get("StateModel")||null;}else{_this9.data.state=null;_this9.data.stateModel=null;}return _this9;}return annotation_createClass(TextAnnotation);}(MarkupAnnotation);var LinkAnnotation=/*#__PURE__*/function(_Annotation3){annotation_inherits(LinkAnnotation,_Annotation3);var _super8=annotation_createSuper(LinkAnnotation);function LinkAnnotation(params){var _this10$data;var _this10;annotation_classCallCheck(this,LinkAnnotation);_this10=_super8.call(this,params);var dict=params.dict,annotationGlobals=params.annotationGlobals;_this10.data.annotationType=AnnotationType.LINK;var quadPoints=getQuadPoints(dict,_this10.rectangle);if(quadPoints){_this10.data.quadPoints=quadPoints;}(_this10$data=_this10.data).borderColor||(_this10$data.borderColor=_this10.data.color);Catalog.parseDestDictionary({destDict:dict,resultObj:_this10.data,docBaseUrl:annotationGlobals.baseUrl,docAttachments:annotationGlobals.attachments});return _this10;}return annotation_createClass(LinkAnnotation);}(Annotation);var PopupAnnotation=/*#__PURE__*/function(_Annotation4){annotation_inherits(PopupAnnotation,_Annotation4);var _super9=annotation_createSuper(PopupAnnotation);function PopupAnnotation(params){var _this11;annotation_classCallCheck(this,PopupAnnotation);_this11=_super9.call(this,params);var dict=params.dict;_this11.data.annotationType=AnnotationType.POPUP;_this11.data.noHTML=false;if(_this11.data.rect[0]===_this11.data.rect[2]||_this11.data.rect[1]===_this11.data.rect[3]){_this11.data.rect=null;}var parentItem=dict.get("Parent");if(!parentItem){warn("Popup annotation has a missing or invalid parent annotation.");return annotation_possibleConstructorReturn(_this11);}var parentRect=parentItem.getArray("Rect");_this11.data.parentRect=Array.isArray(parentRect)&&parentRect.length===4?Util.normalizeRect(parentRect):null;var rt=parentItem.get("RT");if(isName(rt,AnnotationReplyType.GROUP)){parentItem=parentItem.get("IRT");}if(!parentItem.has("M")){_this11.data.modificationDate=null;}else{_this11.setModificationDate(parentItem.get("M"));_this11.data.modificationDate=_this11.modificationDate;}if(!parentItem.has("C")){_this11.data.color=null;}else{_this11.setColor(parentItem.getArray("C"));_this11.data.color=_this11.color;}if(!_this11.viewable){var parentFlags=parentItem.get("F");if(_this11._isViewable(parentFlags)){_this11.setFlags(parentFlags);}}_this11.setTitle(parentItem.get("T"));_this11.data.titleObj=_this11._title;_this11.setContents(parentItem.get("Contents"));_this11.data.contentsObj=_this11._contents;if(parentItem.has("RC")){_this11.data.richText=XFAFactory.getRichTextAsHtml(parentItem.get("RC"));}_this11.data.open=!!dict.get("Open");return _this11;}return annotation_createClass(PopupAnnotation);}(Annotation);var FreeTextAnnotation=/*#__PURE__*/function(_MarkupAnnotation2){annotation_inherits(FreeTextAnnotation,_MarkupAnnotation2);var _super10=annotation_createSuper(FreeTextAnnotation);function FreeTextAnnotation(params){var _this12;annotation_classCallCheck(this,FreeTextAnnotation);_this12=_super10.call(this,params);_this12.data.hasOwnCanvas=!_this12.data.noHTML;_this12.data.noHTML=false;var evaluatorOptions=params.evaluatorOptions,xref=params.xref;_this12.data.annotationType=AnnotationType.FREETEXT;_this12.setDefaultAppearance(params);if(_this12.appearance){var _parseAppearanceStrea=parseAppearanceStream(_this12.appearance,evaluatorOptions,xref),fontColor=_parseAppearanceStrea.fontColor,fontSize=_parseAppearanceStrea.fontSize;_this12.data.defaultAppearanceData.fontColor=fontColor;_this12.data.defaultAppearanceData.fontSize=fontSize||10;}else if(_this12._isOffscreenCanvasSupported){var _this12$data$defaultA;var strokeAlpha=params.dict.get("CA");var fakeUnicodeFont=new FakeUnicodeFont(xref,"sans-serif");(_this12$data$defaultA=_this12.data.defaultAppearanceData).fontSize||(_this12$data$defaultA.fontSize=10);var _this12$data$defaultA2=_this12.data.defaultAppearanceData,_fontColor=_this12$data$defaultA2.fontColor,_fontSize=_this12$data$defaultA2.fontSize;_this12.appearance=fakeUnicodeFont.createAppearance(_this12._contents.str,_this12.rectangle,_this12.rotation,_fontSize,_fontColor,strokeAlpha);_this12._streams.push(_this12.appearance,FakeUnicodeFont.toUnicodeStream);}else{warn("FreeTextAnnotation: OffscreenCanvas is not supported, annotation may not render correctly.");}return _this12;}annotation_createClass(FreeTextAnnotation,[{key:"hasTextContent",get:function get(){return!!this.appearance;}}],[{key:"createNewDict",value:function createNewDict(annotation,xref,_ref7){var apRef=_ref7.apRef,ap=_ref7.ap;var color=annotation.color,fontSize=annotation.fontSize,rect=annotation.rect,rotation=annotation.rotation,user=annotation.user,value=annotation.value;var freetext=new Dict(xref);freetext.set("Type",Name.get("Annot"));freetext.set("Subtype",Name.get("FreeText"));freetext.set("CreationDate","D:".concat(getModificationDate()));freetext.set("Rect",rect);var da="/Helv ".concat(fontSize," Tf ").concat(getPdfColor(color,true));freetext.set("DA",da);freetext.set("Contents",isAscii(value)?value:stringToUTF16String(value,true));freetext.set("F",4);freetext.set("Border",[0,0,0]);freetext.set("Rotate",rotation);if(user){freetext.set("T",isAscii(user)?user:stringToUTF16String(user,true));}if(apRef||ap){var n=new Dict(xref);freetext.set("AP",n);if(apRef){n.set("N",apRef);}else{n.set("N",ap);}}return freetext;}},{key:"createNewAppearanceStream",value:function(){var _createNewAppearanceStream=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee19(annotation,xref,params){var baseFontRef,evaluator,task,color,fontSize,rect,rotation,value,resources,font,baseFont,helv,_rect,x1,y1,x2,y2,w,h,_ref8,lines,scale,totalWidth,encodedLines,_iterator19,_step19,_line,encoded,lineWidth,glyphs,_iterator20,_step20,glyph,hscale,vscale,lineHeight,lineAscent,totalHeight,fscale,newFontSize,firstPoint,clipBox,matrix,buffer,vShift,i,ii,line,appearance,appearanceStreamDict,ap;return annotation_regeneratorRuntime().wrap(function _callee19$(_context19){while(1)switch(_context19.prev=_context19.next){case 0:baseFontRef=params.baseFontRef,evaluator=params.evaluator,task=params.task;color=annotation.color,fontSize=annotation.fontSize,rect=annotation.rect,rotation=annotation.rotation,value=annotation.value;resources=new Dict(xref);font=new Dict(xref);if(baseFontRef){font.set("Helv",baseFontRef);}else{baseFont=new Dict(xref);baseFont.set("BaseFont",Name.get("Helvetica"));baseFont.set("Type",Name.get("Font"));baseFont.set("Subtype",Name.get("Type1"));baseFont.set("Encoding",Name.get("WinAnsiEncoding"));font.set("Helv",baseFont);}resources.set("Font",font);_context19.next=8;return WidgetAnnotation._getFontData(evaluator,task,{fontName:"Helv",fontSize:fontSize},resources);case 8:helv=_context19.sent;_rect=annotation_slicedToArray(rect,4),x1=_rect[0],y1=_rect[1],x2=_rect[2],y2=_rect[3];w=x2-x1;h=y2-y1;if(rotation%180!==0){_ref8=[h,w];w=_ref8[0];h=_ref8[1];}lines=value.split("\n");scale=fontSize/1000;totalWidth=-Infinity;encodedLines=[];_iterator19=annotation_createForOfIteratorHelper(lines);_context19.prev=18;_iterator19.s();case 20:if((_step19=_iterator19.n()).done){_context19.next=34;break;}_line=_step19.value;encoded=helv.encodeString(_line);if(!(encoded.length>1)){_context19.next=25;break;}return _context19.abrupt("return",null);case 25:_line=encoded.join("");encodedLines.push(_line);lineWidth=0;glyphs=helv.charsToGlyphs(_line);_iterator20=annotation_createForOfIteratorHelper(glyphs);try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){glyph=_step20.value;lineWidth+=glyph.width*scale;}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}totalWidth=Math.max(totalWidth,lineWidth);case 32:_context19.next=20;break;case 34:_context19.next=39;break;case 36:_context19.prev=36;_context19.t0=_context19["catch"](18);_iterator19.e(_context19.t0);case 39:_context19.prev=39;_iterator19.f();return _context19.finish(39);case 42:hscale=1;if(totalWidth>w){hscale=w/totalWidth;}vscale=1;lineHeight=LINE_FACTOR*fontSize;lineAscent=(LINE_FACTOR-LINE_DESCENT_FACTOR)*fontSize;totalHeight=lineHeight*lines.length;if(totalHeight>h){vscale=h/totalHeight;}fscale=Math.min(hscale,vscale);newFontSize=fontSize*fscale;_context19.t1=rotation;_context19.next=_context19.t1===0?54:_context19.t1===90?58:_context19.t1===180?62:_context19.t1===270?66:70;break;case 54:matrix=[1,0,0,1];clipBox=[rect[0],rect[1],w,h];firstPoint=[rect[0],rect[3]-lineAscent];return _context19.abrupt("break",70);case 58:matrix=[0,1,-1,0];clipBox=[rect[1],-rect[2],w,h];firstPoint=[rect[1],-rect[0]-lineAscent];return _context19.abrupt("break",70);case 62:matrix=[-1,0,0,-1];clipBox=[-rect[2],-rect[3],w,h];firstPoint=[-rect[2],-rect[1]-lineAscent];return _context19.abrupt("break",70);case 66:matrix=[0,-1,1,0];clipBox=[-rect[3],rect[0],w,h];firstPoint=[-rect[3],rect[2]-lineAscent];return _context19.abrupt("break",70);case 70:buffer=["q","".concat(matrix.join(" ")," 0 0 cm"),"".concat(clipBox.join(" ")," re W n"),"BT","".concat(getPdfColor(color,true)),"0 Tc /Helv ".concat(numberToString(newFontSize)," Tf")];buffer.push("".concat(firstPoint.join(" ")," Td (").concat(escapeString(encodedLines[0]),") Tj"));vShift=numberToString(lineHeight);for(i=1,ii=encodedLines.length;i<ii;i++){line=encodedLines[i];buffer.push("0 -".concat(vShift," Td (").concat(escapeString(line),") Tj"));}buffer.push("ET","Q");appearance=buffer.join("\n");appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",rect);appearanceStreamDict.set("Resources",resources);appearanceStreamDict.set("Matrix",[1,0,0,1,-rect[0],-rect[1]]);ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return _context19.abrupt("return",ap);case 86:case"end":return _context19.stop();}},_callee19,null,[[18,36,39,42]]);}));function createNewAppearanceStream(_x72,_x73,_x74){return _createNewAppearanceStream.apply(this,arguments);}return createNewAppearanceStream;}()}]);return FreeTextAnnotation;}(MarkupAnnotation);var LineAnnotation=/*#__PURE__*/function(_MarkupAnnotation3){annotation_inherits(LineAnnotation,_MarkupAnnotation3);var _super11=annotation_createSuper(LineAnnotation);function LineAnnotation(params){var _this13;annotation_classCallCheck(this,LineAnnotation);_this13=_super11.call(this,params);var dict=params.dict,xref=params.xref;_this13.data.annotationType=AnnotationType.LINE;_this13.data.hasOwnCanvas=_this13.data.noRotate;_this13.data.noHTML=false;var lineCoordinates=dict.getArray("L");_this13.data.lineCoordinates=Util.normalizeRect(lineCoordinates);_this13.setLineEndings(dict.getArray("LE"));_this13.data.lineEndings=_this13.lineEndings;if(!_this13.appearance){var strokeColor=_this13.color?getPdfColorArray(_this13.color):[0,0,0];var strokeAlpha=dict.get("CA");var interiorColor=getRgbColor(dict.getArray("IC"),null);var fillColor=interiorColor?getPdfColorArray(interiorColor):null;var fillAlpha=fillColor?strokeAlpha:null;var borderWidth=_this13.borderStyle.width||1,borderAdjust=2*borderWidth;var bbox=[_this13.data.lineCoordinates[0]-borderAdjust,_this13.data.lineCoordinates[1]-borderAdjust,_this13.data.lineCoordinates[2]+borderAdjust,_this13.data.lineCoordinates[3]+borderAdjust];if(!Util.intersect(_this13.rectangle,bbox)){_this13.rectangle=bbox;}_this13._setDefaultAppearance({xref:xref,extra:"".concat(borderWidth," w"),strokeColor:strokeColor,fillColor:fillColor,strokeAlpha:strokeAlpha,fillAlpha:fillAlpha,pointsCallback:function pointsCallback(buffer,points){buffer.push("".concat(lineCoordinates[0]," ").concat(lineCoordinates[1]," m"),"".concat(lineCoordinates[2]," ").concat(lineCoordinates[3]," l"),"S");return[points[0].x-borderWidth,points[1].x+borderWidth,points[3].y-borderWidth,points[1].y+borderWidth];}});}return _this13;}return annotation_createClass(LineAnnotation);}(MarkupAnnotation);var SquareAnnotation=/*#__PURE__*/function(_MarkupAnnotation4){annotation_inherits(SquareAnnotation,_MarkupAnnotation4);var _super12=annotation_createSuper(SquareAnnotation);function SquareAnnotation(params){var _this14;annotation_classCallCheck(this,SquareAnnotation);_this14=_super12.call(this,params);var dict=params.dict,xref=params.xref;_this14.data.annotationType=AnnotationType.SQUARE;_this14.data.hasOwnCanvas=_this14.data.noRotate;_this14.data.noHTML=false;if(!_this14.appearance){var strokeColor=_this14.color?getPdfColorArray(_this14.color):[0,0,0];var strokeAlpha=dict.get("CA");var interiorColor=getRgbColor(dict.getArray("IC"),null);var fillColor=interiorColor?getPdfColorArray(interiorColor):null;var fillAlpha=fillColor?strokeAlpha:null;if(_this14.borderStyle.width===0&&!fillColor){return annotation_possibleConstructorReturn(_this14);}_this14._setDefaultAppearance({xref:xref,extra:"".concat(_this14.borderStyle.width," w"),strokeColor:strokeColor,fillColor:fillColor,strokeAlpha:strokeAlpha,fillAlpha:fillAlpha,pointsCallback:function pointsCallback(buffer,points){var x=points[2].x+_this14.borderStyle.width/2;var y=points[2].y+_this14.borderStyle.width/2;var width=points[3].x-points[2].x-_this14.borderStyle.width;var height=points[1].y-points[3].y-_this14.borderStyle.width;buffer.push("".concat(x," ").concat(y," ").concat(width," ").concat(height," re"));if(fillColor){buffer.push("B");}else{buffer.push("S");}return[points[0].x,points[1].x,points[3].y,points[1].y];}});}return _this14;}return annotation_createClass(SquareAnnotation);}(MarkupAnnotation);var CircleAnnotation=/*#__PURE__*/function(_MarkupAnnotation5){annotation_inherits(CircleAnnotation,_MarkupAnnotation5);var _super13=annotation_createSuper(CircleAnnotation);function CircleAnnotation(params){var _this15;annotation_classCallCheck(this,CircleAnnotation);_this15=_super13.call(this,params);var dict=params.dict,xref=params.xref;_this15.data.annotationType=AnnotationType.CIRCLE;if(!_this15.appearance){var strokeColor=_this15.color?getPdfColorArray(_this15.color):[0,0,0];var strokeAlpha=dict.get("CA");var interiorColor=getRgbColor(dict.getArray("IC"),null);var fillColor=interiorColor?getPdfColorArray(interiorColor):null;var fillAlpha=fillColor?strokeAlpha:null;if(_this15.borderStyle.width===0&&!fillColor){return annotation_possibleConstructorReturn(_this15);}var controlPointsDistance=4/3*Math.tan(Math.PI/(2*4));_this15._setDefaultAppearance({xref:xref,extra:"".concat(_this15.borderStyle.width," w"),strokeColor:strokeColor,fillColor:fillColor,strokeAlpha:strokeAlpha,fillAlpha:fillAlpha,pointsCallback:function pointsCallback(buffer,points){var x0=points[0].x+_this15.borderStyle.width/2;var y0=points[0].y-_this15.borderStyle.width/2;var x1=points[3].x-_this15.borderStyle.width/2;var y1=points[3].y+_this15.borderStyle.width/2;var xMid=x0+(x1-x0)/2;var yMid=y0+(y1-y0)/2;var xOffset=(x1-x0)/2*controlPointsDistance;var yOffset=(y1-y0)/2*controlPointsDistance;buffer.push("".concat(xMid," ").concat(y1," m"),"".concat(xMid+xOffset," ").concat(y1," ").concat(x1," ").concat(yMid+yOffset," ").concat(x1," ").concat(yMid," c"),"".concat(x1," ").concat(yMid-yOffset," ").concat(xMid+xOffset," ").concat(y0," ").concat(xMid," ").concat(y0," c"),"".concat(xMid-xOffset," ").concat(y0," ").concat(x0," ").concat(yMid-yOffset," ").concat(x0," ").concat(yMid," c"),"".concat(x0," ").concat(yMid+yOffset," ").concat(xMid-xOffset," ").concat(y1," ").concat(xMid," ").concat(y1," c"),"h");if(fillColor){buffer.push("B");}else{buffer.push("S");}return[points[0].x,points[1].x,points[3].y,points[1].y];}});}return _this15;}return annotation_createClass(CircleAnnotation);}(MarkupAnnotation);var PolylineAnnotation=/*#__PURE__*/function(_MarkupAnnotation6){annotation_inherits(PolylineAnnotation,_MarkupAnnotation6);var _super14=annotation_createSuper(PolylineAnnotation);function PolylineAnnotation(params){var _this16;annotation_classCallCheck(this,PolylineAnnotation);_this16=_super14.call(this,params);var dict=params.dict,xref=params.xref;_this16.data.annotationType=AnnotationType.POLYLINE;_this16.data.hasOwnCanvas=_this16.data.noRotate;_this16.data.noHTML=false;_this16.data.vertices=[];if(!(annotation_assertThisInitialized(_this16)instanceof PolygonAnnotation)){_this16.setLineEndings(dict.getArray("LE"));_this16.data.lineEndings=_this16.lineEndings;}var rawVertices=dict.getArray("Vertices");if(!Array.isArray(rawVertices)){return annotation_possibleConstructorReturn(_this16);}for(var i=0,ii=rawVertices.length;i<ii;i+=2){_this16.data.vertices.push({x:rawVertices[i],y:rawVertices[i+1]});}if(!_this16.appearance){var strokeColor=_this16.color?getPdfColorArray(_this16.color):[0,0,0];var strokeAlpha=dict.get("CA");var borderWidth=_this16.borderStyle.width||1,borderAdjust=2*borderWidth;var bbox=[Infinity,Infinity,-Infinity,-Infinity];var _iterator21=annotation_createForOfIteratorHelper(_this16.data.vertices),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var vertex=_step21.value;bbox[0]=Math.min(bbox[0],vertex.x-borderAdjust);bbox[1]=Math.min(bbox[1],vertex.y-borderAdjust);bbox[2]=Math.max(bbox[2],vertex.x+borderAdjust);bbox[3]=Math.max(bbox[3],vertex.y+borderAdjust);}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}if(!Util.intersect(_this16.rectangle,bbox)){_this16.rectangle=bbox;}_this16._setDefaultAppearance({xref:xref,extra:"".concat(borderWidth," w"),strokeColor:strokeColor,strokeAlpha:strokeAlpha,pointsCallback:function pointsCallback(buffer,points){var vertices=_this16.data.vertices;for(var _i5=0,_ii2=vertices.length;_i5<_ii2;_i5++){buffer.push("".concat(vertices[_i5].x," ").concat(vertices[_i5].y," ").concat(_i5===0?"m":"l"));}buffer.push("S");return[points[0].x,points[1].x,points[3].y,points[1].y];}});}return _this16;}return annotation_createClass(PolylineAnnotation);}(MarkupAnnotation);var PolygonAnnotation=/*#__PURE__*/function(_PolylineAnnotation){annotation_inherits(PolygonAnnotation,_PolylineAnnotation);var _super15=annotation_createSuper(PolygonAnnotation);function PolygonAnnotation(params){var _this17;annotation_classCallCheck(this,PolygonAnnotation);_this17=_super15.call(this,params);_this17.data.annotationType=AnnotationType.POLYGON;return _this17;}return annotation_createClass(PolygonAnnotation);}(PolylineAnnotation);var CaretAnnotation=/*#__PURE__*/function(_MarkupAnnotation7){annotation_inherits(CaretAnnotation,_MarkupAnnotation7);var _super16=annotation_createSuper(CaretAnnotation);function CaretAnnotation(params){var _this18;annotation_classCallCheck(this,CaretAnnotation);_this18=_super16.call(this,params);_this18.data.annotationType=AnnotationType.CARET;return _this18;}return annotation_createClass(CaretAnnotation);}(MarkupAnnotation);var InkAnnotation=/*#__PURE__*/function(_MarkupAnnotation8){annotation_inherits(InkAnnotation,_MarkupAnnotation8);var _super17=annotation_createSuper(InkAnnotation);function InkAnnotation(params){var _this19;annotation_classCallCheck(this,InkAnnotation);_this19=_super17.call(this,params);_this19.data.hasOwnCanvas=_this19.data.noRotate;_this19.data.noHTML=false;var dict=params.dict,xref=params.xref;_this19.data.annotationType=AnnotationType.INK;_this19.data.inkLists=[];var rawInkLists=dict.getArray("InkList");if(!Array.isArray(rawInkLists)){return annotation_possibleConstructorReturn(_this19);}for(var i=0,ii=rawInkLists.length;i<ii;++i){_this19.data.inkLists.push([]);for(var j=0,jj=rawInkLists[i].length;j<jj;j+=2){_this19.data.inkLists[i].push({x:xref.fetchIfRef(rawInkLists[i][j]),y:xref.fetchIfRef(rawInkLists[i][j+1])});}}if(!_this19.appearance){var strokeColor=_this19.color?getPdfColorArray(_this19.color):[0,0,0];var strokeAlpha=dict.get("CA");var borderWidth=_this19.borderStyle.width||1,borderAdjust=2*borderWidth;var bbox=[Infinity,Infinity,-Infinity,-Infinity];var _iterator22=annotation_createForOfIteratorHelper(_this19.data.inkLists),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var inkLists=_step22.value;var _iterator24=annotation_createForOfIteratorHelper(inkLists),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var vertex=_step24.value;bbox[0]=Math.min(bbox[0],vertex.x-borderAdjust);bbox[1]=Math.min(bbox[1],vertex.y-borderAdjust);bbox[2]=Math.max(bbox[2],vertex.x+borderAdjust);bbox[3]=Math.max(bbox[3],vertex.y+borderAdjust);}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}if(!Util.intersect(_this19.rectangle,bbox)){_this19.rectangle=bbox;}_this19._setDefaultAppearance({xref:xref,extra:"".concat(borderWidth," w"),strokeColor:strokeColor,strokeAlpha:strokeAlpha,pointsCallback:function pointsCallback(buffer,points){var _iterator23=annotation_createForOfIteratorHelper(_this19.data.inkLists),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var inkList=_step23.value;for(var _i6=0,_ii3=inkList.length;_i6<_ii3;_i6++){buffer.push("".concat(inkList[_i6].x," ").concat(inkList[_i6].y," ").concat(_i6===0?"m":"l"));}buffer.push("S");}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}return[points[0].x,points[1].x,points[3].y,points[1].y];}});}return _this19;}annotation_createClass(InkAnnotation,null,[{key:"createNewDict",value:function createNewDict(annotation,xref,_ref9){var apRef=_ref9.apRef,ap=_ref9.ap;var color=annotation.color,opacity=annotation.opacity,paths=annotation.paths,rect=annotation.rect,rotation=annotation.rotation,thickness=annotation.thickness;var ink=new Dict(xref);ink.set("Type",Name.get("Annot"));ink.set("Subtype",Name.get("Ink"));ink.set("CreationDate","D:".concat(getModificationDate()));ink.set("Rect",rect);ink.set("InkList",paths.map(function(p){return p.points;}));ink.set("F",4);ink.set("Rotate",rotation);var bs=new Dict(xref);ink.set("BS",bs);bs.set("W",thickness);ink.set("C",Array.from(color,function(c){return c/255;}));ink.set("CA",opacity);var n=new Dict(xref);ink.set("AP",n);if(apRef){n.set("N",apRef);}else{n.set("N",ap);}return ink;}},{key:"createNewAppearanceStream",value:function(){var _createNewAppearanceStream2=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee20(annotation,xref,params){var color,rect,paths,thickness,opacity,appearanceBuffer,buffer,_iterator25,_step25,bezier,i,ii,curve,appearance,appearanceStreamDict,resources,extGState,r0,ap;return annotation_regeneratorRuntime().wrap(function _callee20$(_context20){while(1)switch(_context20.prev=_context20.next){case 0:color=annotation.color,rect=annotation.rect,paths=annotation.paths,thickness=annotation.thickness,opacity=annotation.opacity;appearanceBuffer=["".concat(thickness," w 1 J 1 j"),"".concat(getPdfColor(color,false))];if(opacity!==1){appearanceBuffer.push("/R0 gs");}buffer=[];_iterator25=annotation_createForOfIteratorHelper(paths);try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){bezier=_step25.value.bezier;buffer.length=0;buffer.push("".concat(numberToString(bezier[0])," ").concat(numberToString(bezier[1])," m"));for(i=2,ii=bezier.length;i<ii;i+=6){curve=bezier.slice(i,i+6).map(numberToString).join(" ");buffer.push("".concat(curve," c"));}buffer.push("S");appearanceBuffer.push(buffer.join("\n"));}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}appearance=appearanceBuffer.join("\n");appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",rect);appearanceStreamDict.set("Length",appearance.length);if(opacity!==1){resources=new Dict(xref);extGState=new Dict(xref);r0=new Dict(xref);r0.set("CA",opacity);r0.set("Type",Name.get("ExtGState"));extGState.set("R0",r0);resources.set("ExtGState",extGState);appearanceStreamDict.set("Resources",resources);}ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return _context20.abrupt("return",ap);case 17:case"end":return _context20.stop();}},_callee20);}));function createNewAppearanceStream(_x75,_x76,_x77){return _createNewAppearanceStream2.apply(this,arguments);}return createNewAppearanceStream;}()}]);return InkAnnotation;}(MarkupAnnotation);var HighlightAnnotation=/*#__PURE__*/function(_MarkupAnnotation9){annotation_inherits(HighlightAnnotation,_MarkupAnnotation9);var _super18=annotation_createSuper(HighlightAnnotation);function HighlightAnnotation(params){var _this20;annotation_classCallCheck(this,HighlightAnnotation);_this20=_super18.call(this,params);var dict=params.dict,xref=params.xref;_this20.data.annotationType=AnnotationType.HIGHLIGHT;var quadPoints=_this20.data.quadPoints=getQuadPoints(dict,null);if(quadPoints){var _this20$appearance;var resources=(_this20$appearance=_this20.appearance)===null||_this20$appearance===void 0?void 0:_this20$appearance.dict.get("Resources");if(!_this20.appearance||!(resources!==null&&resources!==void 0&&resources.has("ExtGState"))){if(_this20.appearance){warn("HighlightAnnotation - ignoring built-in appearance stream.");}var fillColor=_this20.color?getPdfColorArray(_this20.color):[1,1,0];var fillAlpha=dict.get("CA");_this20._setDefaultAppearance({xref:xref,fillColor:fillColor,blendMode:"Multiply",fillAlpha:fillAlpha,pointsCallback:function pointsCallback(buffer,points){buffer.push("".concat(points[0].x," ").concat(points[0].y," m"),"".concat(points[1].x," ").concat(points[1].y," l"),"".concat(points[3].x," ").concat(points[3].y," l"),"".concat(points[2].x," ").concat(points[2].y," l"),"f");return[points[0].x,points[1].x,points[3].y,points[1].y];}});}}else{_this20.data.popupRef=null;}return _this20;}annotation_createClass(HighlightAnnotation,null,[{key:"createNewDict",value:function createNewDict(annotation,xref,_ref10){var apRef=_ref10.apRef,ap=_ref10.ap;var color=annotation.color,opacity=annotation.opacity,rect=annotation.rect,rotation=annotation.rotation,user=annotation.user,quadPoints=annotation.quadPoints;var highlight=new Dict(xref);highlight.set("Type",Name.get("Annot"));highlight.set("Subtype",Name.get("Highlight"));highlight.set("CreationDate","D:".concat(getModificationDate()));highlight.set("Rect",rect);highlight.set("F",4);highlight.set("Border",[0,0,0]);highlight.set("Rotate",rotation);highlight.set("QuadPoints",quadPoints);highlight.set("C",Array.from(color,function(c){return c/255;}));highlight.set("CA",opacity);if(user){highlight.set("T",isAscii(user)?user:stringToUTF16String(user,true));}if(apRef||ap){var n=new Dict(xref);highlight.set("AP",n);n.set("N",apRef||ap);}return highlight;}},{key:"createNewAppearanceStream",value:function(){var _createNewAppearanceStream3=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee21(annotation,xref,params){var color,rect,outlines,opacity,appearanceBuffer,buffer,_iterator26,_step26,outline,i,ii,appearance,appearanceStreamDict,resources,extGState,r0,ap;return annotation_regeneratorRuntime().wrap(function _callee21$(_context21){while(1)switch(_context21.prev=_context21.next){case 0:color=annotation.color,rect=annotation.rect,outlines=annotation.outlines,opacity=annotation.opacity;appearanceBuffer=["".concat(getPdfColor(color,true)),"/R0 gs"];buffer=[];_iterator26=annotation_createForOfIteratorHelper(outlines);try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){outline=_step26.value;buffer.length=0;buffer.push("".concat(numberToString(outline[0])," ").concat(numberToString(outline[1])," m"));for(i=2,ii=outline.length;i<ii;i+=2){buffer.push("".concat(numberToString(outline[i])," ").concat(numberToString(outline[i+1])," l"));}buffer.push("h");appearanceBuffer.push(buffer.join("\n"));}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}appearanceBuffer.push("f*");appearance=appearanceBuffer.join("\n");appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",rect);appearanceStreamDict.set("Length",appearance.length);resources=new Dict(xref);extGState=new Dict(xref);resources.set("ExtGState",extGState);appearanceStreamDict.set("Resources",resources);r0=new Dict(xref);extGState.set("R0",r0);r0.set("BM",Name.get("Multiply"));if(opacity!==1){r0.set("ca",opacity);r0.set("Type",Name.get("ExtGState"));}ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return _context21.abrupt("return",ap);case 24:case"end":return _context21.stop();}},_callee21);}));function createNewAppearanceStream(_x78,_x79,_x80){return _createNewAppearanceStream3.apply(this,arguments);}return createNewAppearanceStream;}()}]);return HighlightAnnotation;}(MarkupAnnotation);var UnderlineAnnotation=/*#__PURE__*/function(_MarkupAnnotation10){annotation_inherits(UnderlineAnnotation,_MarkupAnnotation10);var _super19=annotation_createSuper(UnderlineAnnotation);function UnderlineAnnotation(params){var _this21;annotation_classCallCheck(this,UnderlineAnnotation);_this21=_super19.call(this,params);var dict=params.dict,xref=params.xref;_this21.data.annotationType=AnnotationType.UNDERLINE;var quadPoints=_this21.data.quadPoints=getQuadPoints(dict,null);if(quadPoints){if(!_this21.appearance){var strokeColor=_this21.color?getPdfColorArray(_this21.color):[0,0,0];var strokeAlpha=dict.get("CA");_this21._setDefaultAppearance({xref:xref,extra:"[] 0 d 0.571 w",strokeColor:strokeColor,strokeAlpha:strokeAlpha,pointsCallback:function pointsCallback(buffer,points){buffer.push("".concat(points[2].x," ").concat(points[2].y+1.3," m"),"".concat(points[3].x," ").concat(points[3].y+1.3," l"),"S");return[points[0].x,points[1].x,points[3].y,points[1].y];}});}}else{_this21.data.popupRef=null;}return _this21;}return annotation_createClass(UnderlineAnnotation);}(MarkupAnnotation);var SquigglyAnnotation=/*#__PURE__*/function(_MarkupAnnotation11){annotation_inherits(SquigglyAnnotation,_MarkupAnnotation11);var _super20=annotation_createSuper(SquigglyAnnotation);function SquigglyAnnotation(params){var _this22;annotation_classCallCheck(this,SquigglyAnnotation);_this22=_super20.call(this,params);var dict=params.dict,xref=params.xref;_this22.data.annotationType=AnnotationType.SQUIGGLY;var quadPoints=_this22.data.quadPoints=getQuadPoints(dict,null);if(quadPoints){if(!_this22.appearance){var strokeColor=_this22.color?getPdfColorArray(_this22.color):[0,0,0];var strokeAlpha=dict.get("CA");_this22._setDefaultAppearance({xref:xref,extra:"[] 0 d 1 w",strokeColor:strokeColor,strokeAlpha:strokeAlpha,pointsCallback:function pointsCallback(buffer,points){var dy=(points[0].y-points[2].y)/6;var shift=dy;var x=points[2].x;var y=points[2].y;var xEnd=points[3].x;buffer.push("".concat(x," ").concat(y+shift," m"));do{x+=2;shift=shift===0?dy:0;buffer.push("".concat(x," ").concat(y+shift," l"));}while(x<xEnd);buffer.push("S");return[points[2].x,xEnd,y-2*dy,y+2*dy];}});}}else{_this22.data.popupRef=null;}return _this22;}return annotation_createClass(SquigglyAnnotation);}(MarkupAnnotation);var StrikeOutAnnotation=/*#__PURE__*/function(_MarkupAnnotation12){annotation_inherits(StrikeOutAnnotation,_MarkupAnnotation12);var _super21=annotation_createSuper(StrikeOutAnnotation);function StrikeOutAnnotation(params){var _this23;annotation_classCallCheck(this,StrikeOutAnnotation);_this23=_super21.call(this,params);var dict=params.dict,xref=params.xref;_this23.data.annotationType=AnnotationType.STRIKEOUT;var quadPoints=_this23.data.quadPoints=getQuadPoints(dict,null);if(quadPoints){if(!_this23.appearance){var strokeColor=_this23.color?getPdfColorArray(_this23.color):[0,0,0];var strokeAlpha=dict.get("CA");_this23._setDefaultAppearance({xref:xref,extra:"[] 0 d 1 w",strokeColor:strokeColor,strokeAlpha:strokeAlpha,pointsCallback:function pointsCallback(buffer,points){buffer.push("".concat((points[0].x+points[2].x)/2," ")+"".concat((points[0].y+points[2].y)/2," m"),"".concat((points[1].x+points[3].x)/2," ")+"".concat((points[1].y+points[3].y)/2," l"),"S");return[points[0].x,points[1].x,points[3].y,points[1].y];}});}}else{_this23.data.popupRef=null;}return _this23;}return annotation_createClass(StrikeOutAnnotation);}(MarkupAnnotation);var StampAnnotation=/*#__PURE__*/function(_MarkupAnnotation13){annotation_inherits(StampAnnotation,_MarkupAnnotation13);var _super22=annotation_createSuper(StampAnnotation);function StampAnnotation(params){var _this24;annotation_classCallCheck(this,StampAnnotation);_this24=_super22.call(this,params);_this24.data.annotationType=AnnotationType.STAMP;_this24.data.hasOwnCanvas=_this24.data.noRotate;_this24.data.noHTML=false;return _this24;}annotation_createClass(StampAnnotation,null,[{key:"createImage",value:function(){var _createImage=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee22(bitmap,xref){var width,height,canvas,ctx,data,buf32,hasAlpha,jpegBufferPromise,xobjectName,imageName,image,smaskStream,alphaBuffer,i,ii,_i7,_ii4,smask,imageStream;return annotation_regeneratorRuntime().wrap(function _callee22$(_context22){while(1)switch(_context22.prev=_context22.next){case 0:width=bitmap.width,height=bitmap.height;canvas=new OffscreenCanvas(width,height);ctx=canvas.getContext("2d",{alpha:true});ctx.drawImage(bitmap,0,0);data=ctx.getImageData(0,0,width,height).data;buf32=new Uint32Array(data.buffer);hasAlpha=buf32.some(FeatureTest.isLittleEndian?function(x){return x>>>24!==0xff;}:function(x){return(x&0xff)!==0xff;});if(hasAlpha){ctx.fillStyle="white";ctx.fillRect(0,0,width,height);ctx.drawImage(bitmap,0,0);}jpegBufferPromise=canvas.convertToBlob({type:"image/jpeg",quality:1}).then(function(blob){return blob.arrayBuffer();});xobjectName=Name.get("XObject");imageName=Name.get("Image");image=new Dict(xref);image.set("Type",xobjectName);image.set("Subtype",imageName);image.set("BitsPerComponent",8);image.set("ColorSpace",Name.get("DeviceRGB"));image.set("Filter",Name.get("DCTDecode"));image.set("BBox",[0,0,width,height]);image.set("Width",width);image.set("Height",height);smaskStream=null;if(hasAlpha){alphaBuffer=new Uint8Array(buf32.length);if(FeatureTest.isLittleEndian){for(i=0,ii=buf32.length;i<ii;i++){alphaBuffer[i]=buf32[i]>>>24;}}else{for(_i7=0,_ii4=buf32.length;_i7<_ii4;_i7++){alphaBuffer[_i7]=buf32[_i7]&0xff;}}smask=new Dict(xref);smask.set("Type",xobjectName);smask.set("Subtype",imageName);smask.set("BitsPerComponent",8);smask.set("ColorSpace",Name.get("DeviceGray"));smask.set("Width",width);smask.set("Height",height);smaskStream=new Stream(alphaBuffer,0,0,smask);}_context22.t0=Stream;_context22.next=25;return jpegBufferPromise;case 25:_context22.t1=_context22.sent;_context22.t2=image;imageStream=new _context22.t0(_context22.t1,0,0,_context22.t2);return _context22.abrupt("return",{imageStream:imageStream,smaskStream:smaskStream,width:width,height:height});case 29:case"end":return _context22.stop();}},_callee22);}));function createImage(_x81,_x82){return _createImage.apply(this,arguments);}return createImage;}()},{key:"createNewDict",value:function createNewDict(annotation,xref,_ref11){var apRef=_ref11.apRef,ap=_ref11.ap;var rect=annotation.rect,rotation=annotation.rotation,user=annotation.user;var stamp=new Dict(xref);stamp.set("Type",Name.get("Annot"));stamp.set("Subtype",Name.get("Stamp"));stamp.set("CreationDate","D:".concat(getModificationDate()));stamp.set("Rect",rect);stamp.set("F",4);stamp.set("Border",[0,0,0]);stamp.set("Rotate",rotation);if(user){stamp.set("T",isAscii(user)?user:stringToUTF16String(user,true));}if(apRef||ap){var n=new Dict(xref);stamp.set("AP",n);if(apRef){n.set("N",apRef);}else{n.set("N",ap);}}return stamp;}},{key:"createNewAppearanceStream",value:function(){var _createNewAppearanceStream4=annotation_asyncToGenerator(/*#__PURE__*/annotation_regeneratorRuntime().mark(function _callee23(annotation,xref,params){var rotation,_params$image,imageRef,width,height,resources,xobject,appearance,appearanceStreamDict,matrix,ap;return annotation_regeneratorRuntime().wrap(function _callee23$(_context23){while(1)switch(_context23.prev=_context23.next){case 0:rotation=annotation.rotation;_params$image=params.image,imageRef=_params$image.imageRef,width=_params$image.width,height=_params$image.height;resources=new Dict(xref);xobject=new Dict(xref);resources.set("XObject",xobject);xobject.set("Im0",imageRef);appearance="q ".concat(width," 0 0 ").concat(height," 0 0 cm /Im0 Do Q");appearanceStreamDict=new Dict(xref);appearanceStreamDict.set("FormType",1);appearanceStreamDict.set("Subtype",Name.get("Form"));appearanceStreamDict.set("Type",Name.get("XObject"));appearanceStreamDict.set("BBox",[0,0,width,height]);appearanceStreamDict.set("Resources",resources);if(rotation){matrix=core_utils_getRotationMatrix(rotation,width,height);appearanceStreamDict.set("Matrix",matrix);}ap=new StringStream(appearance);ap.dict=appearanceStreamDict;return _context23.abrupt("return",ap);case 17:case"end":return _context23.stop();}},_callee23);}));function createNewAppearanceStream(_x83,_x84,_x85){return _createNewAppearanceStream4.apply(this,arguments);}return createNewAppearanceStream;}()}]);return StampAnnotation;}(MarkupAnnotation);var FileAttachmentAnnotation=/*#__PURE__*/function(_MarkupAnnotation14){annotation_inherits(FileAttachmentAnnotation,_MarkupAnnotation14);var _super23=annotation_createSuper(FileAttachmentAnnotation);function FileAttachmentAnnotation(params){var _this25;annotation_classCallCheck(this,FileAttachmentAnnotation);_this25=_super23.call(this,params);var dict=params.dict,xref=params.xref;var file=new FileSpec(dict.get("FS"),xref);_this25.data.annotationType=AnnotationType.FILEATTACHMENT;_this25.data.hasOwnCanvas=_this25.data.noRotate;_this25.data.noHTML=false;_this25.data.file=file.serializable;var name=dict.get("Name");_this25.data.name=name instanceof Name?stringToPDFString(name.name):"PushPin";var fillAlpha=dict.get("ca");_this25.data.fillAlpha=typeof fillAlpha==="number"&&fillAlpha>=0&&fillAlpha<=1?fillAlpha:null;return _this25;}return annotation_createClass(FileAttachmentAnnotation);}(MarkupAnnotation);
;// CONCATENATED MODULE: ./src/core/dataset_reader.js
function dataset_reader_typeof(o){"@babel/helpers - typeof";return dataset_reader_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},dataset_reader_typeof(o);}function dataset_reader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function dataset_reader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,dataset_reader_toPropertyKey(descriptor.key),descriptor);}}function dataset_reader_createClass(Constructor,protoProps,staticProps){if(protoProps)dataset_reader_defineProperties(Constructor.prototype,protoProps);if(staticProps)dataset_reader_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function dataset_reader_toPropertyKey(arg){var key=dataset_reader_toPrimitive(arg,"string");return dataset_reader_typeof(key)==="symbol"?key:String(key);}function dataset_reader_toPrimitive(input,hint){if(dataset_reader_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(dataset_reader_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function dataset_reader_get(){if(typeof Reflect!=="undefined"&&Reflect.get){dataset_reader_get=Reflect.get.bind();}else{dataset_reader_get=function _get(target,property,receiver){var base=dataset_reader_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return dataset_reader_get.apply(this,arguments);}function dataset_reader_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=dataset_reader_getPrototypeOf(object);if(object===null)break;}return object;}function dataset_reader_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)dataset_reader_setPrototypeOf(subClass,superClass);}function dataset_reader_setPrototypeOf(o,p){dataset_reader_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return dataset_reader_setPrototypeOf(o,p);}function dataset_reader_createSuper(Derived){var hasNativeReflectConstruct=dataset_reader_isNativeReflectConstruct();return function _createSuperInternal(){var Super=dataset_reader_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=dataset_reader_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return dataset_reader_possibleConstructorReturn(this,result);};}function dataset_reader_possibleConstructorReturn(self,call){if(call&&(dataset_reader_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return dataset_reader_assertThisInitialized(self);}function dataset_reader_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function dataset_reader_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function dataset_reader_getPrototypeOf(o){dataset_reader_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return dataset_reader_getPrototypeOf(o);}function decodeString(str){try{return stringToUTF8String(str);}catch(ex){warn("UTF-8 decoding failed: \"".concat(ex,"\"."));return str;}}var DatasetXMLParser=/*#__PURE__*/function(_SimpleXMLParser){dataset_reader_inherits(DatasetXMLParser,_SimpleXMLParser);var _super=dataset_reader_createSuper(DatasetXMLParser);function DatasetXMLParser(options){var _this;dataset_reader_classCallCheck(this,DatasetXMLParser);_this=_super.call(this,options);_this.node=null;return _this;}dataset_reader_createClass(DatasetXMLParser,[{key:"onEndElement",value:function onEndElement(name){var node=dataset_reader_get(dataset_reader_getPrototypeOf(DatasetXMLParser.prototype),"onEndElement",this).call(this,name);if(node&&name==="xfa:datasets"){this.node=node;throw new Error("Aborting DatasetXMLParser.");}}}]);return DatasetXMLParser;}(SimpleXMLParser);var DatasetReader=/*#__PURE__*/function(){function DatasetReader(data){dataset_reader_classCallCheck(this,DatasetReader);if(data.datasets){this.node=new SimpleXMLParser({hasAttributes:true}).parseFromString(data.datasets).documentElement;}else{var parser=new DatasetXMLParser({hasAttributes:true});try{parser.parseFromString(data["xdp:xdp"]);}catch(_unused){}this.node=parser.node;}}dataset_reader_createClass(DatasetReader,[{key:"getValue",value:function getValue(path){if(!this.node||!path){return"";}var node=this.node.searchNode(parseXFAPath(path),0);if(!node){return"";}var first=node.firstChild;if((first===null||first===void 0?void 0:first.nodeName)==="value"){return node.children.map(function(child){return decodeString(child.textContent);});}return decodeString(node.textContent);}}]);return DatasetReader;}();
;// CONCATENATED MODULE: ./src/core/xref.js
function xref_typeof(o){"@babel/helpers - typeof";return xref_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},xref_typeof(o);}function xref_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */xref_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==xref_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(xref_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function xref_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function xref_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){xref_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){xref_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function xref_toConsumableArray(arr){return xref_arrayWithoutHoles(arr)||xref_iterableToArray(arr)||xref_unsupportedIterableToArray(arr)||xref_nonIterableSpread();}function xref_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function xref_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function xref_arrayWithoutHoles(arr){if(Array.isArray(arr))return xref_arrayLikeToArray(arr);}function xref_slicedToArray(arr,i){return xref_arrayWithHoles(arr)||xref_iterableToArrayLimit(arr,i)||xref_unsupportedIterableToArray(arr,i)||xref_nonIterableRest();}function xref_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function xref_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return xref_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xref_arrayLikeToArray(o,minLen);}function xref_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function xref_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function xref_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function xref_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function xref_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,xref_toPropertyKey(descriptor.key),descriptor);}}function xref_createClass(Constructor,protoProps,staticProps){if(protoProps)xref_defineProperties(Constructor.prototype,protoProps);if(staticProps)xref_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function xref_toPropertyKey(arg){var key=xref_toPrimitive(arg,"string");return xref_typeof(key)==="symbol"?key:String(key);}function xref_toPrimitive(input,hint){if(xref_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(xref_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function xref_classPrivateFieldInitSpec(obj,privateMap,value){xref_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function xref_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function xref_classPrivateFieldSet(receiver,privateMap,value){var descriptor=xref_classExtractFieldDescriptor(receiver,privateMap,"set");xref_classApplyDescriptorSet(receiver,descriptor,value);return value;}function xref_classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}function xref_classPrivateFieldGet(receiver,privateMap){var descriptor=xref_classExtractFieldDescriptor(receiver,privateMap,"get");return xref_classApplyDescriptorGet(receiver,descriptor);}function xref_classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function xref_classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}var _firstXRefStmPos=/*#__PURE__*/new WeakMap();var XRef=/*#__PURE__*/function(){function XRef(stream,pdfManager){xref_classCallCheck(this,XRef);xref_classPrivateFieldInitSpec(this,_firstXRefStmPos,{writable:true,value:null});this.stream=stream;this.pdfManager=pdfManager;this.entries=[];this._xrefStms=new Set();this._cacheMap=new Map();this._pendingRefs=new RefSet();this._newPersistentRefNum=null;this._newTemporaryRefNum=null;}xref_createClass(XRef,[{key:"getNewPersistentRef",value:function getNewPersistentRef(obj){if(this._newPersistentRefNum===null){this._newPersistentRefNum=this.entries.length||1;}var num=this._newPersistentRefNum++;this._cacheMap.set(num,obj);return Ref.get(num,0);}},{key:"getNewTemporaryRef",value:function getNewTemporaryRef(){if(this._newTemporaryRefNum===null){this._newTemporaryRefNum=this.entries.length||1;}return Ref.get(this._newTemporaryRefNum++,0);}},{key:"resetNewTemporaryRef",value:function resetNewTemporaryRef(){this._newTemporaryRefNum=null;}},{key:"setStartXRef",value:function setStartXRef(startXRef){this.startXRefQueue=[startXRef];}},{key:"parse",value:function parse(){var recoveryMode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var trailerDict;if(!recoveryMode){trailerDict=this.readXRef();}else{warn("Indexing all PDF objects");trailerDict=this.indexObjects();}trailerDict.assignXref(this);this.trailer=trailerDict;var encrypt;try{encrypt=trailerDict.get("Encrypt");}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("XRef.parse - Invalid \"Encrypt\" reference: \"".concat(ex,"\"."));}if(encrypt instanceof Dict){var ids=trailerDict.get("ID");var fileId=ids!==null&&ids!==void 0&&ids.length?ids[0]:"";encrypt.suppressEncryption=true;this.encrypt=new CipherTransformFactory(encrypt,fileId,this.pdfManager.password);}var root;try{root=trailerDict.get("Root");}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("XRef.parse - Invalid \"Root\" reference: \"".concat(ex,"\"."));}if(root instanceof Dict){try{var pages=root.get("Pages");if(pages instanceof Dict){this.root=root;return;}}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("XRef.parse - Invalid \"Pages\" reference: \"".concat(ex,"\"."));}}if(!recoveryMode){throw new XRefParseException();}throw new InvalidPDFException("Invalid Root reference.");}},{key:"processXRefTable",value:function processXRefTable(parser){if(!("tableState"in this)){this.tableState={entryNum:0,streamPos:parser.lexer.stream.pos,parserBuf1:parser.buf1,parserBuf2:parser.buf2};}var obj=this.readXRefTable(parser);if(!isCmd(obj,"trailer")){throw new FormatError("Invalid XRef table: could not find trailer dictionary");}var dict=parser.getObj();if(!(dict instanceof Dict)&&dict.dict){dict=dict.dict;}if(!(dict instanceof Dict)){throw new FormatError("Invalid XRef table: could not parse trailer dictionary");}delete this.tableState;return dict;}},{key:"readXRefTable",value:function readXRefTable(parser){var stream=parser.lexer.stream;var tableState=this.tableState;stream.pos=tableState.streamPos;parser.buf1=tableState.parserBuf1;parser.buf2=tableState.parserBuf2;var obj;while(true){if(!("firstEntryNum"in tableState)||!("entryCount"in tableState)){if(isCmd(obj=parser.getObj(),"trailer")){break;}tableState.firstEntryNum=obj;tableState.entryCount=parser.getObj();}var first=tableState.firstEntryNum;var count=tableState.entryCount;if(!Number.isInteger(first)||!Number.isInteger(count)){throw new FormatError("Invalid XRef table: wrong types in subsection header");}for(var i=tableState.entryNum;i<count;i++){tableState.streamPos=stream.pos;tableState.entryNum=i;tableState.parserBuf1=parser.buf1;tableState.parserBuf2=parser.buf2;var entry={};entry.offset=parser.getObj();entry.gen=parser.getObj();var type=parser.getObj();if(type instanceof Cmd){switch(type.cmd){case"f":entry.free=true;break;case"n":entry.uncompressed=true;break;}}if(!Number.isInteger(entry.offset)||!Number.isInteger(entry.gen)||!(entry.free||entry.uncompressed)){throw new FormatError("Invalid entry in XRef subsection: ".concat(first,", ").concat(count));}if(i===0&&entry.free&&first===1){first=0;}if(!this.entries[i+first]){this.entries[i+first]=entry;}}tableState.entryNum=0;tableState.streamPos=stream.pos;tableState.parserBuf1=parser.buf1;tableState.parserBuf2=parser.buf2;delete tableState.firstEntryNum;delete tableState.entryCount;}if(this.entries[0]&&!this.entries[0].free){throw new FormatError("Invalid XRef table: unexpected first object");}return obj;}},{key:"processXRefStream",value:function processXRefStream(stream){if(!("streamState"in this)){var streamParameters=stream.dict;var byteWidths=streamParameters.get("W");var range=streamParameters.get("Index");if(!range){range=[0,streamParameters.get("Size")];}this.streamState={entryRanges:range,byteWidths:byteWidths,entryNum:0,streamPos:stream.pos};}this.readXRefStream(stream);delete this.streamState;return stream.dict;}},{key:"readXRefStream",value:function readXRefStream(stream){var streamState=this.streamState;stream.pos=streamState.streamPos;var _streamState$byteWidt=xref_slicedToArray(streamState.byteWidths,3),typeFieldWidth=_streamState$byteWidt[0],offsetFieldWidth=_streamState$byteWidt[1],generationFieldWidth=_streamState$byteWidt[2];var entryRanges=streamState.entryRanges;while(entryRanges.length>0){var _entryRanges=xref_slicedToArray(entryRanges,2),first=_entryRanges[0],n=_entryRanges[1];if(!Number.isInteger(first)||!Number.isInteger(n)){throw new FormatError("Invalid XRef range fields: ".concat(first,", ").concat(n));}if(!Number.isInteger(typeFieldWidth)||!Number.isInteger(offsetFieldWidth)||!Number.isInteger(generationFieldWidth)){throw new FormatError("Invalid XRef entry fields length: ".concat(first,", ").concat(n));}for(var i=streamState.entryNum;i<n;++i){streamState.entryNum=i;streamState.streamPos=stream.pos;var type=0,offset=0,generation=0;for(var j=0;j<typeFieldWidth;++j){var typeByte=stream.getByte();if(typeByte===-1){throw new FormatError("Invalid XRef byteWidths 'type'.");}type=type<<8|typeByte;}if(typeFieldWidth===0){type=1;}for(var _j=0;_j<offsetFieldWidth;++_j){var offsetByte=stream.getByte();if(offsetByte===-1){throw new FormatError("Invalid XRef byteWidths 'offset'.");}offset=offset<<8|offsetByte;}for(var _j2=0;_j2<generationFieldWidth;++_j2){var generationByte=stream.getByte();if(generationByte===-1){throw new FormatError("Invalid XRef byteWidths 'generation'.");}generation=generation<<8|generationByte;}var entry={};entry.offset=offset;entry.gen=generation;switch(type){case 0:entry.free=true;break;case 1:entry.uncompressed=true;break;case 2:break;default:throw new FormatError("Invalid XRef entry type: ".concat(type));}if(!this.entries[first+i]){this.entries[first+i]=entry;}}streamState.entryNum=0;streamState.streamPos=stream.pos;entryRanges.splice(0,2);}}},{key:"indexObjects",value:function indexObjects(){var TAB=0x9,LF=0xa,CR=0xd,SPACE=0x20;var PERCENT=0x25,LT=0x3c;function readToken(data,offset){var token="",ch=data[offset];while(ch!==LF&&ch!==CR&&ch!==LT){if(++offset>=data.length){break;}token+=String.fromCharCode(ch);ch=data[offset];}return token;}function skipUntil(data,offset,what){var length=what.length,dataLength=data.length;var skipped=0;while(offset<dataLength){var i=0;while(i<length&&data[offset+i]===what[i]){++i;}if(i>=length){break;}offset++;skipped++;}return skipped;}var gEndobjRegExp=/\b(endobj|\d+\s+\d+\s+obj|xref|trailer\s*<<)\b/g;var gStartxrefRegExp=/\b(startxref|\d+\s+\d+\s+obj)\b/g;var objRegExp=/^(\d+)\s+(\d+)\s+obj\b/;var trailerBytes=new Uint8Array([116,114,97,105,108,101,114]);var startxrefBytes=new Uint8Array([115,116,97,114,116,120,114,101,102]);var xrefBytes=new Uint8Array([47,88,82,101,102]);this.entries.length=0;this._cacheMap.clear();var stream=this.stream;stream.pos=0;var buffer=stream.getBytes(),bufferStr=bytesToString(buffer),length=buffer.length;var position=stream.start;var trailers=[],xrefStms=[];while(position<length){var ch=buffer[position];if(ch===TAB||ch===LF||ch===CR||ch===SPACE){++position;continue;}if(ch===PERCENT){do{++position;if(position>=length){break;}ch=buffer[position];}while(ch!==LF&&ch!==CR);continue;}var token=readToken(buffer,position);var m=void 0;if(token.startsWith("xref")&&(token.length===4||/\s/.test(token[4]))){position+=skipUntil(buffer,position,trailerBytes);trailers.push(position);position+=skipUntil(buffer,position,startxrefBytes);}else if(m=objRegExp.exec(token)){var num=m[1]|0,gen=m[2]|0;var startPos=position+token.length;var contentLength=void 0,updateEntries=false;if(!this.entries[num]){updateEntries=true;}else if(this.entries[num].gen===gen){try{var parser=new Parser({lexer:new Lexer(stream.makeSubStream(startPos))});parser.getObj();updateEntries=true;}catch(ex){if(ex instanceof ParserEOFException){warn("indexObjects -- checking object (".concat(token,"): \"").concat(ex,"\"."));}else{updateEntries=true;}}}if(updateEntries){this.entries[num]={offset:position-stream.start,gen:gen,uncompressed:true};}gEndobjRegExp.lastIndex=startPos;var match=gEndobjRegExp.exec(bufferStr);if(match){var endPos=gEndobjRegExp.lastIndex+1;contentLength=endPos-position;if(match[1]!=="endobj"){warn("indexObjects: Found \"".concat(match[1],"\" inside of another \"obj\", ")+'caused by missing "endobj" -- trying to recover.');contentLength-=match[1].length+1;}}else{contentLength=length-position;}var content=buffer.subarray(position,position+contentLength);var xrefTagOffset=skipUntil(content,0,xrefBytes);if(xrefTagOffset<contentLength&&content[xrefTagOffset+5]<64){xrefStms.push(position-stream.start);this._xrefStms.add(position-stream.start);}position+=contentLength;}else if(token.startsWith("trailer")&&(token.length===7||/\s/.test(token[7]))){trailers.push(position);var _startPos=position+token.length;var _contentLength=void 0;gStartxrefRegExp.lastIndex=_startPos;var _match=gStartxrefRegExp.exec(bufferStr);if(_match){var _endPos=gStartxrefRegExp.lastIndex+1;_contentLength=_endPos-position;if(_match[1]!=="startxref"){warn("indexObjects: Found \"".concat(_match[1],"\" after \"trailer\", ")+'caused by missing "startxref" -- trying to recover.');_contentLength-=_match[1].length+1;}}else{_contentLength=length-position;}position+=_contentLength;}else{position+=token.length+1;}}for(var _i=0,_xrefStms=xrefStms;_i<_xrefStms.length;_i++){var xrefStm=_xrefStms[_i];this.startXRefQueue.push(xrefStm);this.readXRef(true);}var trailerDicts=[];var isEncrypted=false;for(var _i2=0,_trailers=trailers;_i2<_trailers.length;_i2++){var trailer=_trailers[_i2];stream.pos=trailer;var _parser=new Parser({lexer:new Lexer(stream),xref:this,allowStreams:true,recoveryMode:true});var obj=_parser.getObj();if(!isCmd(obj,"trailer")){continue;}var dict=_parser.getObj();if(!(dict instanceof Dict)){continue;}trailerDicts.push(dict);if(dict.has("Encrypt")){isEncrypted=true;}}var trailerDict,trailerError;for(var _i3=0,_arr=[].concat(trailerDicts,["genFallback"],trailerDicts);_i3<_arr.length;_i3++){var _dict=_arr[_i3];if(_dict==="genFallback"){if(!trailerError){break;}this._generationFallback=true;continue;}var validPagesDict=false;try{var rootDict=_dict.get("Root");if(!(rootDict instanceof Dict)){continue;}var pagesDict=rootDict.get("Pages");if(!(pagesDict instanceof Dict)){continue;}var pagesCount=pagesDict.get("Count");if(Number.isInteger(pagesCount)){validPagesDict=true;}}catch(ex){trailerError=ex;continue;}if(validPagesDict&&(!isEncrypted||_dict.has("Encrypt"))&&_dict.has("ID")){return _dict;}trailerDict=_dict;}if(trailerDict){return trailerDict;}if(this.topDict){return this.topDict;}throw new InvalidPDFException("Invalid PDF structure.");}},{key:"readXRef",value:function readXRef(){var recoveryMode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var stream=this.stream;var startXRefParsedCache=new Set();while(this.startXRefQueue.length){try{var startXRef=this.startXRefQueue[0];if(startXRefParsedCache.has(startXRef)){warn("readXRef - skipping XRef table since it was already parsed.");this.startXRefQueue.shift();continue;}startXRefParsedCache.add(startXRef);stream.pos=startXRef+stream.start;var parser=new Parser({lexer:new Lexer(stream),xref:this,allowStreams:true});var obj=parser.getObj();var dict=void 0;if(isCmd(obj,"xref")){dict=this.processXRefTable(parser);if(!this.topDict){this.topDict=dict;}obj=dict.get("XRefStm");if(Number.isInteger(obj)&&!this._xrefStms.has(obj)){var _classPrivateFieldGet2;this._xrefStms.add(obj);this.startXRefQueue.push(obj);(_classPrivateFieldGet2=xref_classPrivateFieldGet(this,_firstXRefStmPos))!==null&&_classPrivateFieldGet2!==void 0?_classPrivateFieldGet2:xref_classPrivateFieldSet(this,_firstXRefStmPos,obj);}}else if(Number.isInteger(obj)){if(!Number.isInteger(parser.getObj())||!isCmd(parser.getObj(),"obj")||!((obj=parser.getObj())instanceof BaseStream)){throw new FormatError("Invalid XRef stream");}dict=this.processXRefStream(obj);if(!this.topDict){this.topDict=dict;}if(!dict){throw new FormatError("Failed to read XRef stream");}}else{throw new FormatError("Invalid XRef stream header");}obj=dict.get("Prev");if(Number.isInteger(obj)){this.startXRefQueue.push(obj);}else if(obj instanceof Ref){this.startXRefQueue.push(obj.num);}}catch(e){if(e instanceof MissingDataException){throw e;}info("(while reading XRef): "+e);}this.startXRefQueue.shift();}if(this.topDict){return this.topDict;}if(recoveryMode){return undefined;}throw new XRefParseException();}},{key:"lastXRefStreamPos",get:function get(){var _classPrivateFieldGet3;return(_classPrivateFieldGet3=xref_classPrivateFieldGet(this,_firstXRefStmPos))!==null&&_classPrivateFieldGet3!==void 0?_classPrivateFieldGet3:this._xrefStms.size>0?Math.max.apply(Math,xref_toConsumableArray(this._xrefStms)):null;}},{key:"getEntry",value:function getEntry(i){var xrefEntry=this.entries[i];if(xrefEntry&&!xrefEntry.free&&xrefEntry.offset){return xrefEntry;}return null;}},{key:"fetchIfRef",value:function fetchIfRef(obj){var suppressEncryption=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(obj instanceof Ref){return this.fetch(obj,suppressEncryption);}return obj;}},{key:"fetch",value:function fetch(ref){var suppressEncryption=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!(ref instanceof Ref)){throw new Error("ref object is not a reference");}var num=ref.num;var cacheEntry=this._cacheMap.get(num);if(cacheEntry!==undefined){if(cacheEntry instanceof Dict&&!cacheEntry.objId){cacheEntry.objId=ref.toString();}return cacheEntry;}var xrefEntry=this.getEntry(num);if(xrefEntry===null){this._cacheMap.set(num,xrefEntry);return xrefEntry;}if(this._pendingRefs.has(ref)){this._pendingRefs.remove(ref);warn("Ignoring circular reference: ".concat(ref,"."));return CIRCULAR_REF;}this._pendingRefs.put(ref);try{xrefEntry=xrefEntry.uncompressed?this.fetchUncompressed(ref,xrefEntry,suppressEncryption):this.fetchCompressed(ref,xrefEntry,suppressEncryption);this._pendingRefs.remove(ref);}catch(ex){this._pendingRefs.remove(ref);throw ex;}if(xrefEntry instanceof Dict){xrefEntry.objId=ref.toString();}else if(xrefEntry instanceof BaseStream){xrefEntry.dict.objId=ref.toString();}return xrefEntry;}},{key:"fetchUncompressed",value:function fetchUncompressed(ref,xrefEntry){var suppressEncryption=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var gen=ref.gen;var num=ref.num;if(xrefEntry.gen!==gen){var msg="Inconsistent generation in XRef: ".concat(ref);if(this._generationFallback&&xrefEntry.gen<gen){warn(msg);return this.fetchUncompressed(Ref.get(num,xrefEntry.gen),xrefEntry,suppressEncryption);}throw new XRefEntryException(msg);}var stream=this.stream.makeSubStream(xrefEntry.offset+this.stream.start);var parser=new Parser({lexer:new Lexer(stream),xref:this,allowStreams:true});var obj1=parser.getObj();var obj2=parser.getObj();var obj3=parser.getObj();if(obj1!==num||obj2!==gen||!(obj3 instanceof Cmd)){throw new XRefEntryException("Bad (uncompressed) XRef entry: ".concat(ref));}if(obj3.cmd!=="obj"){if(obj3.cmd.startsWith("obj")){num=parseInt(obj3.cmd.substring(3),10);if(!Number.isNaN(num)){return num;}}throw new XRefEntryException("Bad (uncompressed) XRef entry: ".concat(ref));}xrefEntry=this.encrypt&&!suppressEncryption?parser.getObj(this.encrypt.createCipherTransform(num,gen)):parser.getObj();if(!(xrefEntry instanceof BaseStream)){this._cacheMap.set(num,xrefEntry);}return xrefEntry;}},{key:"fetchCompressed",value:function fetchCompressed(ref,xrefEntry){var suppressEncryption=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var tableOffset=xrefEntry.offset;var stream=this.fetch(Ref.get(tableOffset,0));if(!(stream instanceof BaseStream)){throw new FormatError("bad ObjStm stream");}var first=stream.dict.get("First");var n=stream.dict.get("N");if(!Number.isInteger(first)||!Number.isInteger(n)){throw new FormatError("invalid first and n parameters for ObjStm stream");}var parser=new Parser({lexer:new Lexer(stream),xref:this,allowStreams:true});var nums=new Array(n);var offsets=new Array(n);for(var i=0;i<n;++i){var num=parser.getObj();if(!Number.isInteger(num)){throw new FormatError("invalid object number in the ObjStm stream: ".concat(num));}var offset=parser.getObj();if(!Number.isInteger(offset)){throw new FormatError("invalid object offset in the ObjStm stream: ".concat(offset));}nums[i]=num;offsets[i]=offset;}var start=(stream.start||0)+first;var entries=new Array(n);for(var _i4=0;_i4<n;++_i4){var length=_i4<n-1?offsets[_i4+1]-offsets[_i4]:undefined;if(length<0){throw new FormatError("Invalid offset in the ObjStm stream.");}parser=new Parser({lexer:new Lexer(stream.makeSubStream(start+offsets[_i4],length,stream.dict)),xref:this,allowStreams:true});var obj=parser.getObj();entries[_i4]=obj;if(obj instanceof BaseStream){continue;}var _num=nums[_i4],entry=this.entries[_num];if(entry&&entry.offset===tableOffset&&entry.gen===_i4){this._cacheMap.set(_num,obj);}}xrefEntry=entries[xrefEntry.gen];if(xrefEntry===undefined){throw new XRefEntryException("Bad (compressed) XRef entry: ".concat(ref));}return xrefEntry;}},{key:"fetchIfRefAsync",value:function(){var _fetchIfRefAsync=xref_asyncToGenerator(/*#__PURE__*/xref_regeneratorRuntime().mark(function _callee(obj,suppressEncryption){return xref_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(obj instanceof Ref)){_context.next=2;break;}return _context.abrupt("return",this.fetchAsync(obj,suppressEncryption));case 2:return _context.abrupt("return",obj);case 3:case"end":return _context.stop();}},_callee,this);}));function fetchIfRefAsync(_x,_x2){return _fetchIfRefAsync.apply(this,arguments);}return fetchIfRefAsync;}()},{key:"fetchAsync",value:function(){var _fetchAsync=xref_asyncToGenerator(/*#__PURE__*/xref_regeneratorRuntime().mark(function _callee2(ref,suppressEncryption){return xref_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;return _context2.abrupt("return",this.fetch(ref,suppressEncryption));case 4:_context2.prev=4;_context2.t0=_context2["catch"](0);if(_context2.t0 instanceof MissingDataException){_context2.next=8;break;}throw _context2.t0;case 8:_context2.next=10;return this.pdfManager.requestRange(_context2.t0.begin,_context2.t0.end);case 10:return _context2.abrupt("return",this.fetchAsync(ref,suppressEncryption));case 11:case"end":return _context2.stop();}},_callee2,this,[[0,4]]);}));function fetchAsync(_x3,_x4){return _fetchAsync.apply(this,arguments);}return fetchAsync;}()},{key:"getCatalogObj",value:function getCatalogObj(){return this.root;}}]);return XRef;}();
;// CONCATENATED MODULE: ./src/core/document.js
function document_typeof(o){"@babel/helpers - typeof";return document_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},document_typeof(o);}function document_defineProperty(obj,key,value){key=document_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function document_slicedToArray(arr,i){return document_arrayWithHoles(arr)||document_iterableToArrayLimit(arr,i)||document_unsupportedIterableToArray(arr,i)||document_nonIterableRest();}function document_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function document_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function document_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function document_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */document_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==document_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(document_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function document_toConsumableArray(arr){return document_arrayWithoutHoles(arr)||document_iterableToArray(arr)||document_unsupportedIterableToArray(arr)||document_nonIterableSpread();}function document_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function document_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function document_arrayWithoutHoles(arr){if(Array.isArray(arr))return document_arrayLikeToArray(arr);}function document_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=document_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function document_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return document_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return document_arrayLikeToArray(o,minLen);}function document_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function document_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function document_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){document_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){document_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function document_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)document_setPrototypeOf(subClass,superClass);}function document_setPrototypeOf(o,p){document_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return document_setPrototypeOf(o,p);}function document_createSuper(Derived){var hasNativeReflectConstruct=document_isNativeReflectConstruct();return function _createSuperInternal(){var Super=document_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=document_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return document_possibleConstructorReturn(this,result);};}function document_possibleConstructorReturn(self,call){if(call&&(document_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return document_assertThisInitialized(self);}function document_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function document_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function document_getPrototypeOf(o){document_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return document_getPrototypeOf(o);}function document_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function document_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,document_toPropertyKey(descriptor.key),descriptor);}}function document_createClass(Constructor,protoProps,staticProps){if(protoProps)document_defineProperties(Constructor.prototype,protoProps);if(staticProps)document_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function document_toPropertyKey(arg){var key=document_toPrimitive(arg,"string");return document_typeof(key)==="symbol"?key:String(key);}function document_toPrimitive(input,hint){if(document_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(document_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function document_classPrivateMethodInitSpec(obj,privateSet){document_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function document_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function document_classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}var DEFAULT_USER_UNIT=1.0;var LETTER_SIZE_MEDIABOX=[0,0,612,792];var _replaceIdByRef=/*#__PURE__*/new WeakSet();var Page=/*#__PURE__*/function(){function Page(_ref2){var pdfManager=_ref2.pdfManager,xref=_ref2.xref,pageIndex=_ref2.pageIndex,pageDict=_ref2.pageDict,_ref=_ref2.ref,globalIdFactory=_ref2.globalIdFactory,fontCache=_ref2.fontCache,builtInCMapCache=_ref2.builtInCMapCache,standardFontDataCache=_ref2.standardFontDataCache,globalImageCache=_ref2.globalImageCache,systemFontCache=_ref2.systemFontCache,nonBlendModesSet=_ref2.nonBlendModesSet,xfaFactory=_ref2.xfaFactory;document_classCallCheck(this,Page);document_classPrivateMethodInitSpec(this,_replaceIdByRef);this.pdfManager=pdfManager;this.pageIndex=pageIndex;this.pageDict=pageDict;this.xref=xref;this.ref=_ref;this.fontCache=fontCache;this.builtInCMapCache=builtInCMapCache;this.standardFontDataCache=standardFontDataCache;this.globalImageCache=globalImageCache;this.systemFontCache=systemFontCache;this.nonBlendModesSet=nonBlendModesSet;this.evaluatorOptions=pdfManager.evaluatorOptions;this.resourcesPromise=null;this.xfaFactory=xfaFactory;var idCounters={obj:0};this._localIdFactory=/*#__PURE__*/function(_globalIdFactory){document_inherits(_class2,_globalIdFactory);var _super=document_createSuper(_class2);function _class2(){document_classCallCheck(this,_class2);return _super.apply(this,arguments);}document_createClass(_class2,null,[{key:"createObjId",value:function createObjId(){return"p".concat(pageIndex,"_").concat(++idCounters.obj);}},{key:"getPageObjId",value:function getPageObjId(){return"p".concat(_ref.toString());}}]);return _class2;}(globalIdFactory);}document_createClass(Page,[{key:"_getInheritableProperty",value:function _getInheritableProperty(key){var getArray=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var value=getInheritableProperty({dict:this.pageDict,key:key,getArray:getArray,stopWhenFound:false});if(!Array.isArray(value)){return value;}if(value.length===1||!(value[0]instanceof Dict)){return value[0];}return Dict.merge({xref:this.xref,dictArray:value});}},{key:"content",get:function get(){return this.pageDict.getArray("Contents");}},{key:"resources",get:function get(){var resources=this._getInheritableProperty("Resources");return shadow(this,"resources",resources instanceof Dict?resources:Dict.empty);}},{key:"_getBoundingBox",value:function _getBoundingBox(name){if(this.xfaData){return this.xfaData.bbox;}var box=this._getInheritableProperty(name,true);if(Array.isArray(box)&&box.length===4){box=Util.normalizeRect(box);if(box[2]-box[0]>0&&box[3]-box[1]>0){return box;}warn("Empty, or invalid, /".concat(name," entry."));}return null;}},{key:"mediaBox",get:function get(){return shadow(this,"mediaBox",this._getBoundingBox("MediaBox")||LETTER_SIZE_MEDIABOX);}},{key:"cropBox",get:function get(){return shadow(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox);}},{key:"userUnit",get:function get(){var obj=this.pageDict.get("UserUnit");if(typeof obj!=="number"||obj<=0){obj=DEFAULT_USER_UNIT;}return shadow(this,"userUnit",obj);}},{key:"view",get:function get(){var cropBox=this.cropBox,mediaBox=this.mediaBox;if(cropBox!==mediaBox&&!isArrayEqual(cropBox,mediaBox)){var box=Util.intersect(cropBox,mediaBox);if(box&&box[2]-box[0]>0&&box[3]-box[1]>0){return shadow(this,"view",box);}warn("Empty /CropBox and /MediaBox intersection.");}return shadow(this,"view",mediaBox);}},{key:"rotate",get:function get(){var rotate=this._getInheritableProperty("Rotate")||0;if(rotate%90!==0){rotate=0;}else if(rotate>=360){rotate%=360;}else if(rotate<0){rotate=(rotate%360+360)%360;}return shadow(this,"rotate",rotate);}},{key:"_onSubStreamError",value:function _onSubStreamError(reason,objId){if(this.evaluatorOptions.ignoreErrors){warn("getContentStream - ignoring sub-stream (".concat(objId,"): \"").concat(reason,"\"."));return;}throw reason;}},{key:"getContentStream",value:function getContentStream(){var _this=this;return this.pdfManager.ensure(this,"content").then(function(content){if(content instanceof BaseStream){return content;}if(Array.isArray(content)){return new StreamsSequenceStream(content,_this._onSubStreamError.bind(_this));}return new NullStream();});}},{key:"xfaData",get:function get(){return shadow(this,"xfaData",this.xfaFactory?{bbox:this.xfaFactory.getBoundingBox(this.pageIndex)}:null);}},{key:"saveNewAnnotations",value:function(){var _saveNewAnnotations=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee(handler,task,annotations,imagePromises){var partialEvaluator,deletedAnnotations,existingAnnotations,pageDict,annotationsArray,newData,_iterator,_step,ref,savedDict,buffer,objects;return document_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!this.xfaFactory){_context.next=2;break;}throw new Error("XFA: Cannot save new annotations.");case 2:partialEvaluator=new PartialEvaluator({xref:this.xref,handler:handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions});deletedAnnotations=new RefSet();existingAnnotations=new RefSet();document_classPrivateMethodGet(this,_replaceIdByRef,_replaceIdByRef2).call(this,annotations,deletedAnnotations,existingAnnotations);pageDict=this.pageDict;annotationsArray=this.annotations.filter(function(a){return!(a instanceof Ref&&deletedAnnotations.has(a));});_context.next=10;return AnnotationFactory.saveNewAnnotations(partialEvaluator,task,annotations,imagePromises);case 10:newData=_context.sent;_iterator=document_createForOfIteratorHelper(newData.annotations);try{for(_iterator.s();!(_step=_iterator.n()).done;){ref=_step.value.ref;if(ref instanceof Ref&&!existingAnnotations.has(ref)){annotationsArray.push(ref);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}savedDict=pageDict.get("Annots");pageDict.set("Annots",annotationsArray);buffer=[];_context.next=18;return writeObject(this.ref,pageDict,buffer,this.xref);case 18:if(savedDict){pageDict.set("Annots",savedDict);}objects=newData.dependencies;objects.push.apply(objects,[{ref:this.ref,data:buffer.join("")}].concat(document_toConsumableArray(newData.annotations)));return _context.abrupt("return",objects);case 22:case"end":return _context.stop();}},_callee,this);}));function saveNewAnnotations(_x,_x2,_x3,_x4){return _saveNewAnnotations.apply(this,arguments);}return saveNewAnnotations;}()},{key:"save",value:function save(handler,task,annotationStorage){var partialEvaluator=new PartialEvaluator({xref:this.xref,handler:handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions});return this._parsedAnnotations.then(function(annotations){var newRefsPromises=[];var _iterator2=document_createForOfIteratorHelper(annotations),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var annotation=_step2.value;if(!annotation.mustBePrinted(annotationStorage)){continue;}newRefsPromises.push(annotation.save(partialEvaluator,task,annotationStorage).catch(function(reason){warn("save - ignoring annotation data during "+"\"".concat(task.name,"\" task: \"").concat(reason,"\"."));return null;}));}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return Promise.all(newRefsPromises).then(function(newRefs){return newRefs.filter(function(newRef){return!!newRef;});});});}},{key:"loadResources",value:function loadResources(keys){var _this2=this;if(!this.resourcesPromise){this.resourcesPromise=this.pdfManager.ensure(this,"resources");}return this.resourcesPromise.then(function(){var objectLoader=new ObjectLoader(_this2.resources,keys,_this2.xref);return objectLoader.load();});}},{key:"getOperatorList",value:function getOperatorList(_ref3){var _this3=this;var handler=_ref3.handler,sink=_ref3.sink,task=_ref3.task,intent=_ref3.intent,cacheKey=_ref3.cacheKey,_ref3$annotationStora=_ref3.annotationStorage,annotationStorage=_ref3$annotationStora===void 0?null:_ref3$annotationStora;var contentStreamPromise=this.getContentStream();var resourcesPromise=this.loadResources(["ColorSpace","ExtGState","Font","Pattern","Properties","Shading","XObject"]);var partialEvaluator=new PartialEvaluator({xref:this.xref,handler:handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions});var newAnnotationsByPage=!this.xfaFactory?getNewAnnotationsMap(annotationStorage):null;var deletedAnnotations=null;var newAnnotationsPromise=Promise.resolve(null);if(newAnnotationsByPage){var newAnnotations=newAnnotationsByPage.get(this.pageIndex);if(newAnnotations){var annotationGlobalsPromise=this.pdfManager.ensureDoc("annotationGlobals");var imagePromises;var missingBitmaps=new Set();var _iterator3=document_createForOfIteratorHelper(newAnnotations),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step3$value=_step3.value,bitmapId=_step3$value.bitmapId,bitmap=_step3$value.bitmap;if(bitmapId&&!bitmap&&!missingBitmaps.has(bitmapId)){missingBitmaps.add(bitmapId);}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var isOffscreenCanvasSupported=this.evaluatorOptions.isOffscreenCanvasSupported;if(missingBitmaps.size>0){var annotationWithBitmaps=newAnnotations.slice();var _iterator4=document_createForOfIteratorHelper(annotationStorage),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step4$value=document_slicedToArray(_step4.value,2),key=_step4$value[0],annotation=_step4$value[1];if(!key.startsWith(AnnotationEditorPrefix)){continue;}if(annotation.bitmap&&missingBitmaps.has(annotation.bitmapId)){annotationWithBitmaps.push(annotation);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}imagePromises=AnnotationFactory.generateImages(annotationWithBitmaps,this.xref,isOffscreenCanvasSupported);}else{imagePromises=AnnotationFactory.generateImages(newAnnotations,this.xref,isOffscreenCanvasSupported);}deletedAnnotations=new RefSet();document_classPrivateMethodGet(this,_replaceIdByRef,_replaceIdByRef2).call(this,newAnnotations,deletedAnnotations,null);newAnnotationsPromise=annotationGlobalsPromise.then(function(annotationGlobals){if(!annotationGlobals){return null;}return AnnotationFactory.printNewAnnotations(annotationGlobals,partialEvaluator,task,newAnnotations,imagePromises);});}}var dataPromises=Promise.all([contentStreamPromise,resourcesPromise]);var pageListPromise=dataPromises.then(function(_ref4){var _ref5=document_slicedToArray(_ref4,1),contentStream=_ref5[0];var opList=new OperatorList(intent,sink);handler.send("StartRenderPage",{transparency:partialEvaluator.hasBlendModes(_this3.resources,_this3.nonBlendModesSet),pageIndex:_this3.pageIndex,cacheKey:cacheKey});return partialEvaluator.getOperatorList({stream:contentStream,task:task,resources:_this3.resources,operatorList:opList}).then(function(){return opList;});});return Promise.all([pageListPromise,this._parsedAnnotations,newAnnotationsPromise]).then(function(_ref6){var _ref7=document_slicedToArray(_ref6,3),pageOpList=_ref7[0],annotations=_ref7[1],newAnnotations=_ref7[2];if(newAnnotations){annotations=annotations.filter(function(a){return!(a.ref&&deletedAnnotations.has(a.ref));});var _loop=function _loop(_i,_ii){var newAnnotation=newAnnotations[_i];if(newAnnotation.refToReplace){var j=annotations.findIndex(function(a){return a.ref&&isRefsEqual(a.ref,newAnnotation.refToReplace);});if(j>=0){annotations.splice(j,1,newAnnotation);newAnnotations.splice(_i--,1);_ii--;}}i=_i,ii=_ii;};for(var i=0,ii=newAnnotations.length;i<ii;i++){_loop(i,ii);}annotations=annotations.concat(newAnnotations);}if(annotations.length===0||intent&RenderingIntentFlag.ANNOTATIONS_DISABLE){pageOpList.flush(true);return{length:pageOpList.totalLength};}var renderForms=!!(intent&RenderingIntentFlag.ANNOTATIONS_FORMS),intentAny=!!(intent&RenderingIntentFlag.ANY),intentDisplay=!!(intent&RenderingIntentFlag.DISPLAY),intentPrint=!!(intent&RenderingIntentFlag.PRINT);var opListPromises=[];var _iterator5=document_createForOfIteratorHelper(annotations),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _annotation=_step5.value;if(intentAny||intentDisplay&&_annotation.mustBeViewed(annotationStorage,renderForms)||intentPrint&&_annotation.mustBePrinted(annotationStorage)){opListPromises.push(_annotation.getOperatorList(partialEvaluator,task,intent,renderForms,annotationStorage).catch(function(reason){warn("getOperatorList - ignoring annotation data during "+"\"".concat(task.name,"\" task: \"").concat(reason,"\"."));return{opList:null,separateForm:false,separateCanvas:false};}));}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}return Promise.all(opListPromises).then(function(opLists){var form=false,canvas=false;var _iterator6=document_createForOfIteratorHelper(opLists),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _step6$value=_step6.value,opList=_step6$value.opList,separateForm=_step6$value.separateForm,separateCanvas=_step6$value.separateCanvas;pageOpList.addOpList(opList);form||(form=separateForm);canvas||(canvas=separateCanvas);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}pageOpList.flush(true,{form:form,canvas:canvas});return{length:pageOpList.totalLength};});});}},{key:"extractTextContent",value:function extractTextContent(_ref8){var _this4=this;var handler=_ref8.handler,task=_ref8.task,includeMarkedContent=_ref8.includeMarkedContent,disableNormalization=_ref8.disableNormalization,sink=_ref8.sink;var contentStreamPromise=this.getContentStream();var resourcesPromise=this.loadResources(["ExtGState","Font","Properties","XObject"]);var dataPromises=Promise.all([contentStreamPromise,resourcesPromise]);return dataPromises.then(function(_ref9){var _ref10=document_slicedToArray(_ref9,1),contentStream=_ref10[0];var partialEvaluator=new PartialEvaluator({xref:_this4.xref,handler:handler,pageIndex:_this4.pageIndex,idFactory:_this4._localIdFactory,fontCache:_this4.fontCache,builtInCMapCache:_this4.builtInCMapCache,standardFontDataCache:_this4.standardFontDataCache,globalImageCache:_this4.globalImageCache,systemFontCache:_this4.systemFontCache,options:_this4.evaluatorOptions});return partialEvaluator.getTextContent({stream:contentStream,task:task,resources:_this4.resources,includeMarkedContent:includeMarkedContent,disableNormalization:disableNormalization,sink:sink,viewBox:_this4.view});});}},{key:"getStructTree",value:function(){var _getStructTree=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee2(){var structTreeRoot,structTree;return document_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.pdfManager.ensureCatalog("structTreeRoot");case 2:structTreeRoot=_context2.sent;if(structTreeRoot){_context2.next=5;break;}return _context2.abrupt("return",null);case 5:_context2.next=7;return this._parsedAnnotations;case 7:_context2.next=9;return this.pdfManager.ensure(this,"_parseStructTree",[structTreeRoot]);case 9:structTree=_context2.sent;return _context2.abrupt("return",structTree.serializable);case 11:case"end":return _context2.stop();}},_callee2,this);}));function getStructTree(){return _getStructTree.apply(this,arguments);}return getStructTree;}()},{key:"_parseStructTree",value:function _parseStructTree(structTreeRoot){var tree=new StructTreePage(structTreeRoot,this.pageDict);tree.parse(this.ref);return tree;}},{key:"getAnnotationsData",value:function(){var _getAnnotationsData=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee3(handler,task,intent){var annotations,annotationsData,textContentPromises,partialEvaluator,intentAny,intentDisplay,intentPrint,_iterator7,_step7,annotation,isVisible;return document_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this._parsedAnnotations;case 2:annotations=_context3.sent;if(!(annotations.length===0)){_context3.next=5;break;}return _context3.abrupt("return",annotations);case 5:annotationsData=[],textContentPromises=[];intentAny=!!(intent&RenderingIntentFlag.ANY),intentDisplay=!!(intent&RenderingIntentFlag.DISPLAY),intentPrint=!!(intent&RenderingIntentFlag.PRINT);_iterator7=document_createForOfIteratorHelper(annotations);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){annotation=_step7.value;isVisible=intentAny||intentDisplay&&annotation.viewable;if(isVisible||intentPrint&&annotation.printable){annotationsData.push(annotation.data);}if(annotation.hasTextContent&&isVisible){partialEvaluator||(partialEvaluator=new PartialEvaluator({xref:this.xref,handler:handler,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}));textContentPromises.push(annotation.extractTextContent(partialEvaluator,task,[-Infinity,-Infinity,Infinity,Infinity]).catch(function(reason){warn("getAnnotationsData - ignoring textContent during \"".concat(task.name,"\" task: \"").concat(reason,"\"."));}));}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}_context3.next=11;return Promise.all(textContentPromises);case 11:return _context3.abrupt("return",annotationsData);case 12:case"end":return _context3.stop();}},_callee3,this);}));function getAnnotationsData(_x5,_x6,_x7){return _getAnnotationsData.apply(this,arguments);}return getAnnotationsData;}()},{key:"annotations",get:function get(){var annots=this._getInheritableProperty("Annots");return shadow(this,"annotations",Array.isArray(annots)?annots:[]);}},{key:"_parsedAnnotations",get:function get(){var _this5=this;var promise=this.pdfManager.ensure(this,"annotations").then(/*#__PURE__*/function(){var _ref11=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee4(annots){var annotationGlobals,annotationPromises,_iterator8,_step8,annotationRef,sortedAnnotations,popupAnnotations,_iterator9,_step9,annotation;return document_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!(annots.length===0)){_context4.next=2;break;}return _context4.abrupt("return",annots);case 2:_context4.next=4;return _this5.pdfManager.ensureDoc("annotationGlobals");case 4:annotationGlobals=_context4.sent;if(annotationGlobals){_context4.next=7;break;}return _context4.abrupt("return",[]);case 7:annotationPromises=[];_iterator8=document_createForOfIteratorHelper(annots);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){annotationRef=_step8.value;annotationPromises.push(AnnotationFactory.create(_this5.xref,annotationRef,annotationGlobals,_this5._localIdFactory,false,_this5.ref).catch(function(reason){warn("_parsedAnnotations: \"".concat(reason,"\"."));return null;}));}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}sortedAnnotations=[];_context4.t0=document_createForOfIteratorHelper;_context4.next=14;return Promise.all(annotationPromises);case 14:_context4.t1=_context4.sent;_iterator9=(0,_context4.t0)(_context4.t1);_context4.prev=16;_iterator9.s();case 18:if((_step9=_iterator9.n()).done){_context4.next=28;break;}annotation=_step9.value;if(annotation){_context4.next=22;break;}return _context4.abrupt("continue",26);case 22:if(!(annotation instanceof PopupAnnotation)){_context4.next=25;break;}(popupAnnotations||(popupAnnotations=[])).push(annotation);return _context4.abrupt("continue",26);case 25:sortedAnnotations.push(annotation);case 26:_context4.next=18;break;case 28:_context4.next=33;break;case 30:_context4.prev=30;_context4.t2=_context4["catch"](16);_iterator9.e(_context4.t2);case 33:_context4.prev=33;_iterator9.f();return _context4.finish(33);case 36:if(popupAnnotations){sortedAnnotations.push.apply(sortedAnnotations,document_toConsumableArray(popupAnnotations));}return _context4.abrupt("return",sortedAnnotations);case 38:case"end":return _context4.stop();}},_callee4,null,[[16,30,33,36]]);}));return function(_x8){return _ref11.apply(this,arguments);};}());return shadow(this,"_parsedAnnotations",promise);}},{key:"jsActions",get:function get(){var actions=collectActions(this.xref,this.pageDict,PageActionEventType);return shadow(this,"jsActions",actions);}}]);return Page;}();function _replaceIdByRef2(annotations,deletedAnnotations,existingAnnotations){var _iterator20=document_createForOfIteratorHelper(annotations),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var annotation=_step20.value;if(annotation.id){var ref=Ref.fromString(annotation.id);if(!ref){warn("A non-linked annotation cannot be modified: ".concat(annotation.id));continue;}if(annotation.deleted){deletedAnnotations.put(ref);continue;}existingAnnotations===null||existingAnnotations===void 0||existingAnnotations.put(ref);annotation.ref=ref;delete annotation.id;}}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}}var PDF_HEADER_SIGNATURE=new Uint8Array([0x25,0x50,0x44,0x46,0x2d]);var STARTXREF_SIGNATURE=new Uint8Array([0x73,0x74,0x61,0x72,0x74,0x78,0x72,0x65,0x66]);var ENDOBJ_SIGNATURE=new Uint8Array([0x65,0x6e,0x64,0x6f,0x62,0x6a]);var FINGERPRINT_FIRST_BYTES=1024;var EMPTY_FINGERPRINT="\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";function find(stream,signature){var limit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1024;var backwards=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var signatureLength=signature.length;var scanBytes=stream.peekBytes(limit);var scanLength=scanBytes.length-signatureLength;if(scanLength<=0){return false;}if(backwards){var signatureEnd=signatureLength-1;var pos=scanBytes.length-1;while(pos>=signatureEnd){var j=0;while(j<signatureLength&&scanBytes[pos-j]===signature[signatureEnd-j]){j++;}if(j>=signatureLength){stream.pos+=pos-signatureEnd;return true;}pos--;}}else{var _pos=0;while(_pos<=scanLength){var _j=0;while(_j<signatureLength&&scanBytes[_pos+_j]===signature[_j]){_j++;}if(_j>=signatureLength){stream.pos+=_pos;return true;}_pos++;}}return false;}var _collectFieldObjects=/*#__PURE__*/new WeakSet();var PDFDocument=/*#__PURE__*/function(){function PDFDocument(pdfManager,stream){document_classCallCheck(this,PDFDocument);document_classPrivateMethodInitSpec(this,_collectFieldObjects);if(stream.length<=0){throw new InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");}this.pdfManager=pdfManager;this.stream=stream;this.xref=new XRef(stream,pdfManager);this._pagePromises=new Map();this._version=null;var idCounters={font:0};this._globalIdFactory=/*#__PURE__*/function(){function _class4(){document_classCallCheck(this,_class4);}document_createClass(_class4,null,[{key:"getDocId",value:function getDocId(){return"g_".concat(pdfManager.docId);}},{key:"createFontId",value:function createFontId(){return"f".concat(++idCounters.font);}},{key:"createObjId",value:function createObjId(){unreachable("Abstract method `createObjId` called.");}},{key:"getPageObjId",value:function getPageObjId(){unreachable("Abstract method `getPageObjId` called.");}}]);return _class4;}();}document_createClass(PDFDocument,[{key:"parse",value:function parse(recoveryMode){this.xref.parse(recoveryMode);this.catalog=new Catalog(this.pdfManager,this.xref);}},{key:"linearization",get:function get(){var linearization=null;try{linearization=Linearization.create(this.stream);}catch(err){if(err instanceof MissingDataException){throw err;}info(err);}return shadow(this,"linearization",linearization);}},{key:"startXRef",get:function get(){var stream=this.stream;var startXRef=0;if(this.linearization){stream.reset();if(find(stream,ENDOBJ_SIGNATURE)){startXRef=stream.pos+6-stream.start;}}else{var step=1024;var startXRefLength=STARTXREF_SIGNATURE.length;var found=false,pos=stream.end;while(!found&&pos>0){pos-=step-startXRefLength;if(pos<0){pos=0;}stream.pos=pos;found=find(stream,STARTXREF_SIGNATURE,step,true);}if(found){stream.skip(9);var ch;do{ch=stream.getByte();}while(isWhiteSpace(ch));var str="";while(ch>=0x20&&ch<=0x39){str+=String.fromCharCode(ch);ch=stream.getByte();}startXRef=parseInt(str,10);if(isNaN(startXRef)){startXRef=0;}}}return shadow(this,"startXRef",startXRef);}},{key:"checkHeader",value:function checkHeader(){var stream=this.stream;stream.reset();if(!find(stream,PDF_HEADER_SIGNATURE)){return;}stream.moveStart();stream.skip(PDF_HEADER_SIGNATURE.length);var version="",ch;while((ch=stream.getByte())>0x20&&version.length<7){version+=String.fromCharCode(ch);}if(PDF_VERSION_REGEXP.test(version)){this._version=version;}else{warn("Invalid PDF header version: ".concat(version));}}},{key:"parseStartXRef",value:function parseStartXRef(){this.xref.setStartXRef(this.startXRef);}},{key:"numPages",get:function get(){var num=0;if(this.catalog.hasActualNumPages){num=this.catalog.numPages;}else if(this.xfaFactory){num=this.xfaFactory.getNumPages();}else if(this.linearization){num=this.linearization.numPages;}else{num=this.catalog.numPages;}return shadow(this,"numPages",num);}},{key:"_hasOnlyDocumentSignatures",value:function _hasOnlyDocumentSignatures(fields){var _this6=this;var recursionDepth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var RECURSION_LIMIT=10;if(!Array.isArray(fields)){return false;}return fields.every(function(field){field=_this6.xref.fetchIfRef(field);if(!(field instanceof Dict)){return false;}if(field.has("Kids")){if(++recursionDepth>RECURSION_LIMIT){warn("_hasOnlyDocumentSignatures: maximum recursion depth reached");return false;}return _this6._hasOnlyDocumentSignatures(field.get("Kids"),recursionDepth);}var isSignature=isName(field.get("FT"),"Sig");var rectangle=field.get("Rect");var isInvisible=Array.isArray(rectangle)&&rectangle.every(function(value){return value===0;});return isSignature&&isInvisible;});}},{key:"_xfaStreams",get:function get(){var acroForm=this.catalog.acroForm;if(!acroForm){return null;}var xfa=acroForm.get("XFA");var entries={"xdp:xdp":"",template:"",datasets:"",config:"",connectionSet:"",localeSet:"",stylesheet:"","/xdp:xdp":""};if(xfa instanceof BaseStream&&!xfa.isEmpty){entries["xdp:xdp"]=xfa;return entries;}if(!Array.isArray(xfa)||xfa.length===0){return null;}for(var i=0,ii=xfa.length;i<ii;i+=2){var name=void 0;if(i===0){name="xdp:xdp";}else if(i===ii-2){name="/xdp:xdp";}else{name=xfa[i];}if(!entries.hasOwnProperty(name)){continue;}var data=this.xref.fetchIfRef(xfa[i+1]);if(!(data instanceof BaseStream)||data.isEmpty){continue;}entries[name]=data;}return entries;}},{key:"xfaDatasets",get:function get(){var streams=this._xfaStreams;if(!streams){return shadow(this,"xfaDatasets",null);}for(var _i2=0,_arr=["datasets","xdp:xdp"];_i2<_arr.length;_i2++){var key=_arr[_i2];var stream=streams[key];if(!stream){continue;}try{var str=stringToUTF8String(stream.getString());var data=document_defineProperty({},key,str);return shadow(this,"xfaDatasets",new DatasetReader(data));}catch(_unused){warn("XFA - Invalid utf-8 string.");break;}}return shadow(this,"xfaDatasets",null);}},{key:"xfaData",get:function get(){var streams=this._xfaStreams;if(!streams){return null;}var data=Object.create(null);for(var _i3=0,_Object$entries=Object.entries(streams);_i3<_Object$entries.length;_i3++){var _Object$entries$_i=document_slicedToArray(_Object$entries[_i3],2),key=_Object$entries$_i[0],stream=_Object$entries$_i[1];if(!stream){continue;}try{data[key]=stringToUTF8String(stream.getString());}catch(_unused2){warn("XFA - Invalid utf-8 string.");return null;}}return data;}},{key:"xfaFactory",get:function get(){var data;if(this.pdfManager.enableXfa&&this.catalog.needsRendering&&this.formInfo.hasXfa&&!this.formInfo.hasAcroForm){data=this.xfaData;}return shadow(this,"xfaFactory",data?new XFAFactory(data):null);}},{key:"isPureXfa",get:function get(){return this.xfaFactory?this.xfaFactory.isValid():false;}},{key:"htmlForXfa",get:function get(){return this.xfaFactory?this.xfaFactory.getPages():null;}},{key:"loadXfaImages",value:function(){var _loadXfaImages=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee5(){var xfaImagesDict,keys,objectLoader,xfaImages,_iterator10,_step10,key,stream;return document_regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.pdfManager.ensureCatalog("xfaImages");case 2:xfaImagesDict=_context5.sent;if(xfaImagesDict){_context5.next=5;break;}return _context5.abrupt("return");case 5:keys=xfaImagesDict.getKeys();objectLoader=new ObjectLoader(xfaImagesDict,keys,this.xref);_context5.next=9;return objectLoader.load();case 9:xfaImages=new Map();_iterator10=document_createForOfIteratorHelper(keys);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){key=_step10.value;stream=xfaImagesDict.get(key);if(stream instanceof BaseStream){xfaImages.set(key,stream.getBytes());}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}this.xfaFactory.setImages(xfaImages);case 13:case"end":return _context5.stop();}},_callee5,this);}));function loadXfaImages(){return _loadXfaImages.apply(this,arguments);}return loadXfaImages;}()},{key:"loadXfaFonts",value:function(){var _loadXfaFonts=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee6(handler,task){var acroForm,resources,objectLoader,fontRes,options,partialEvaluator,operatorList,pdfFonts,initialState,fonts,promises,_iterator11,_step11,_step11$value,fontName,font,descriptor,fontFamily,fontWeight,italicAngle,cssFontInfo,missingFonts,reallyMissingFonts,_iterator12,_step12,missing,_iterator13,_step13,_missing,_i4,_arr2,fontInfo,name,dict;return document_regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.pdfManager.ensureCatalog("acroForm");case 2:acroForm=_context6.sent;if(acroForm){_context6.next=5;break;}return _context6.abrupt("return");case 5:_context6.next=7;return acroForm.getAsync("DR");case 7:resources=_context6.sent;if(resources instanceof Dict){_context6.next=10;break;}return _context6.abrupt("return");case 10:objectLoader=new ObjectLoader(resources,["Font"],this.xref);_context6.next=13;return objectLoader.load();case 13:fontRes=resources.get("Font");if(fontRes instanceof Dict){_context6.next=16;break;}return _context6.abrupt("return");case 16:options=Object.assign(Object.create(null),this.pdfManager.evaluatorOptions);options.useSystemFonts=false;partialEvaluator=new PartialEvaluator({xref:this.xref,handler:handler,pageIndex:-1,idFactory:this._globalIdFactory,fontCache:this.catalog.fontCache,builtInCMapCache:this.catalog.builtInCMapCache,standardFontDataCache:this.catalog.standardFontDataCache,options:options});operatorList=new OperatorList();pdfFonts=[];_context6.t0=function clone(){return this;};initialState={get font(){return pdfFonts.at(-1);},set font(font){pdfFonts.push(font);},clone:_context6.t0};fonts=new Map();fontRes.forEach(function(fontName,font){fonts.set(fontName,font);});promises=[];_iterator11=document_createForOfIteratorHelper(fonts);_context6.prev=27;_iterator11.s();case 29:if((_step11=_iterator11.n()).done){_context6.next=44;break;}_step11$value=document_slicedToArray(_step11.value,2),fontName=_step11$value[0],font=_step11$value[1];descriptor=font.get("FontDescriptor");if(descriptor instanceof Dict){_context6.next=34;break;}return _context6.abrupt("continue",42);case 34:fontFamily=descriptor.get("FontFamily");fontFamily=fontFamily.replaceAll(/[ ]+(\d)/g,"$1");fontWeight=descriptor.get("FontWeight");italicAngle=-descriptor.get("ItalicAngle");cssFontInfo={fontFamily:fontFamily,fontWeight:fontWeight,italicAngle:italicAngle};if(validateCSSFont(cssFontInfo)){_context6.next=41;break;}return _context6.abrupt("continue",42);case 41:promises.push(partialEvaluator.handleSetFont(resources,[Name.get(fontName),1],null,operatorList,task,initialState,null,cssFontInfo).catch(function(reason){warn("loadXfaFonts: \"".concat(reason,"\"."));return null;}));case 42:_context6.next=29;break;case 44:_context6.next=49;break;case 46:_context6.prev=46;_context6.t1=_context6["catch"](27);_iterator11.e(_context6.t1);case 49:_context6.prev=49;_iterator11.f();return _context6.finish(49);case 52:_context6.next=54;return Promise.all(promises);case 54:missingFonts=this.xfaFactory.setFonts(pdfFonts);if(missingFonts){_context6.next=57;break;}return _context6.abrupt("return");case 57:options.ignoreErrors=true;promises.length=0;pdfFonts.length=0;reallyMissingFonts=new Set();_iterator12=document_createForOfIteratorHelper(missingFonts);try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){missing=_step12.value;if(!getXfaFontName("".concat(missing,"-Regular"))){reallyMissingFonts.add(missing);}}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}if(reallyMissingFonts.size){missingFonts.push("PdfJS-Fallback");}_iterator13=document_createForOfIteratorHelper(missingFonts);_context6.prev=65;_iterator13.s();case 67:if((_step13=_iterator13.n()).done){_context6.next=74;break;}_missing=_step13.value;if(!reallyMissingFonts.has(_missing)){_context6.next=71;break;}return _context6.abrupt("continue",72);case 71:for(_i4=0,_arr2=[{name:"Regular",fontWeight:400,italicAngle:0},{name:"Bold",fontWeight:700,italicAngle:0},{name:"Italic",fontWeight:400,italicAngle:12},{name:"BoldItalic",fontWeight:700,italicAngle:12}];_i4<_arr2.length;_i4++){fontInfo=_arr2[_i4];name="".concat(_missing,"-").concat(fontInfo.name);dict=getXfaFontDict(name);promises.push(partialEvaluator.handleSetFont(resources,[Name.get(name),1],null,operatorList,task,initialState,dict,{fontFamily:_missing,fontWeight:fontInfo.fontWeight,italicAngle:fontInfo.italicAngle}).catch(function(reason){warn("loadXfaFonts: \"".concat(reason,"\"."));return null;}));}case 72:_context6.next=67;break;case 74:_context6.next=79;break;case 76:_context6.prev=76;_context6.t2=_context6["catch"](65);_iterator13.e(_context6.t2);case 79:_context6.prev=79;_iterator13.f();return _context6.finish(79);case 82:_context6.next=84;return Promise.all(promises);case 84:this.xfaFactory.appendFonts(pdfFonts,reallyMissingFonts);case 85:case"end":return _context6.stop();}},_callee6,this,[[27,46,49,52],[65,76,79,82]]);}));function loadXfaFonts(_x9,_x10){return _loadXfaFonts.apply(this,arguments);}return loadXfaFonts;}()},{key:"serializeXfaData",value:function(){var _serializeXfaData=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee7(annotationStorage){return document_regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _context7.abrupt("return",this.xfaFactory?this.xfaFactory.serializeData(annotationStorage):null);case 1:case"end":return _context7.stop();}},_callee7,this);}));function serializeXfaData(_x11){return _serializeXfaData.apply(this,arguments);}return serializeXfaData;}()},{key:"version",get:function get(){return this.catalog.version||this._version;}},{key:"formInfo",get:function get(){var formInfo={hasFields:false,hasAcroForm:false,hasXfa:false,hasSignatures:false};var acroForm=this.catalog.acroForm;if(!acroForm){return shadow(this,"formInfo",formInfo);}try{var fields=acroForm.get("Fields");var hasFields=Array.isArray(fields)&&fields.length>0;formInfo.hasFields=hasFields;var xfa=acroForm.get("XFA");formInfo.hasXfa=Array.isArray(xfa)&&xfa.length>0||xfa instanceof BaseStream&&!xfa.isEmpty;var sigFlags=acroForm.get("SigFlags");var hasSignatures=!!(sigFlags&0x1);var hasOnlyDocumentSignatures=hasSignatures&&this._hasOnlyDocumentSignatures(fields);formInfo.hasAcroForm=hasFields&&!hasOnlyDocumentSignatures;formInfo.hasSignatures=hasSignatures;}catch(ex){if(ex instanceof MissingDataException){throw ex;}warn("Cannot fetch form information: \"".concat(ex,"\"."));}return shadow(this,"formInfo",formInfo);}},{key:"documentInfo",get:function get(){var docInfo={PDFFormatVersion:this.version,Language:this.catalog.lang,EncryptFilterName:this.xref.encrypt?this.xref.encrypt.filterName:null,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection,IsSignaturesPresent:this.formInfo.hasSignatures};var infoDict;try{infoDict=this.xref.trailer.get("Info");}catch(err){if(err instanceof MissingDataException){throw err;}info("The document information dictionary is invalid.");}if(!(infoDict instanceof Dict)){return shadow(this,"documentInfo",docInfo);}var _iterator14=document_createForOfIteratorHelper(infoDict.getKeys()),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var key=_step14.value;var value=infoDict.get(key);switch(key){case"Title":case"Author":case"Subject":case"Keywords":case"Creator":case"Producer":case"CreationDate":case"ModDate":if(typeof value==="string"){docInfo[key]=stringToPDFString(value);continue;}break;case"Trapped":if(value instanceof Name){docInfo[key]=value;continue;}break;default:var customValue=void 0;switch(document_typeof(value)){case"string":customValue=stringToPDFString(value);break;case"number":case"boolean":customValue=value;break;default:if(value instanceof Name){customValue=value;}break;}if(customValue===undefined){warn("Bad value, for custom key \"".concat(key,"\", in Info: ").concat(value,"."));continue;}if(!docInfo.Custom){docInfo.Custom=Object.create(null);}docInfo.Custom[key]=customValue;continue;}warn("Bad value, for key \"".concat(key,"\", in Info: ").concat(value,"."));}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}return shadow(this,"documentInfo",docInfo);}},{key:"fingerprints",get:function get(){function validate(data){return typeof data==="string"&&data.length>0&&data!==EMPTY_FINGERPRINT;}function hexString(hash){var buf=[];var _iterator15=document_createForOfIteratorHelper(hash),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var num=_step15.value;var hex=num.toString(16);buf.push(hex.padStart(2,"0"));}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}return buf.join("");}var idArray=this.xref.trailer.get("ID");var hashOriginal,hashModified;if(Array.isArray(idArray)&&validate(idArray[0])){hashOriginal=stringToBytes(idArray[0]);if(idArray[1]!==idArray[0]&&validate(idArray[1])){hashModified=stringToBytes(idArray[1]);}}else{hashOriginal=calculateMD5(this.stream.getByteRange(0,FINGERPRINT_FIRST_BYTES),0,FINGERPRINT_FIRST_BYTES);}return shadow(this,"fingerprints",[hexString(hashOriginal),hashModified?hexString(hashModified):null]);}},{key:"_getLinearizationPage",value:function(){var _getLinearizationPage2=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee8(pageIndex){var catalog,linearization,xref,ref,obj,type;return document_regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:catalog=this.catalog,linearization=this.linearization,xref=this.xref;ref=Ref.get(linearization.objectNumberFirst,0);_context8.prev=2;_context8.next=5;return xref.fetchAsync(ref);case 5:obj=_context8.sent;if(!(obj instanceof Dict)){_context8.next=16;break;}type=obj.getRaw("Type");if(!(type instanceof Ref)){_context8.next=12;break;}_context8.next=11;return xref.fetchAsync(type);case 11:type=_context8.sent;case 12:if(!(isName(type,"Page")||!obj.has("Type")&&!obj.has("Kids"))){_context8.next=16;break;}if(!catalog.pageKidsCountCache.has(ref)){catalog.pageKidsCountCache.put(ref,1);}if(!catalog.pageIndexCache.has(ref)){catalog.pageIndexCache.put(ref,0);}return _context8.abrupt("return",[obj,ref]);case 16:throw new FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.");case 19:_context8.prev=19;_context8.t0=_context8["catch"](2);warn("_getLinearizationPage: \"".concat(_context8.t0.message,"\"."));return _context8.abrupt("return",catalog.getPageDict(pageIndex));case 23:case"end":return _context8.stop();}},_callee8,this,[[2,19]]);}));function _getLinearizationPage(_x12){return _getLinearizationPage2.apply(this,arguments);}return _getLinearizationPage;}()},{key:"getPage",value:function getPage(pageIndex){var _this7=this;var cachedPromise=this._pagePromises.get(pageIndex);if(cachedPromise){return cachedPromise;}var catalog=this.catalog,linearization=this.linearization,xfaFactory=this.xfaFactory;var promise;if(xfaFactory){promise=Promise.resolve([Dict.empty,null]);}else if((linearization===null||linearization===void 0?void 0:linearization.pageFirst)===pageIndex){promise=this._getLinearizationPage(pageIndex);}else{promise=catalog.getPageDict(pageIndex);}promise=promise.then(function(_ref12){var _ref13=document_slicedToArray(_ref12,2),pageDict=_ref13[0],ref=_ref13[1];return new Page({pdfManager:_this7.pdfManager,xref:_this7.xref,pageIndex:pageIndex,pageDict:pageDict,ref:ref,globalIdFactory:_this7._globalIdFactory,fontCache:catalog.fontCache,builtInCMapCache:catalog.builtInCMapCache,standardFontDataCache:catalog.standardFontDataCache,globalImageCache:catalog.globalImageCache,systemFontCache:catalog.systemFontCache,nonBlendModesSet:catalog.nonBlendModesSet,xfaFactory:xfaFactory});});this._pagePromises.set(pageIndex,promise);return promise;}},{key:"checkFirstPage",value:function(){var _checkFirstPage=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee9(){var recoveryMode,_args9=arguments;return document_regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:recoveryMode=_args9.length>0&&_args9[0]!==undefined?_args9[0]:false;if(!recoveryMode){_context9.next=3;break;}return _context9.abrupt("return");case 3:_context9.prev=3;_context9.next=6;return this.getPage(0);case 6:_context9.next=15;break;case 8:_context9.prev=8;_context9.t0=_context9["catch"](3);if(!(_context9.t0 instanceof XRefEntryException)){_context9.next=15;break;}this._pagePromises.delete(0);_context9.next=14;return this.cleanup();case 14:throw new XRefParseException();case 15:case"end":return _context9.stop();}},_callee9,this,[[3,8]]);}));function checkFirstPage(){return _checkFirstPage.apply(this,arguments);}return checkFirstPage;}()},{key:"checkLastPage",value:function(){var _checkLastPage=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee10(){var recoveryMode,catalog,pdfManager,numPages,pagesTree,_iterator16,_step16,_step16$value,pageIndex,_step16$value$,pageDict,ref,promise,_args10=arguments;return document_regeneratorRuntime().wrap(function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:recoveryMode=_args10.length>0&&_args10[0]!==undefined?_args10[0]:false;catalog=this.catalog,pdfManager=this.pdfManager;catalog.setActualNumPages();_context10.prev=3;_context10.next=6;return Promise.all([pdfManager.ensureDoc("xfaFactory"),pdfManager.ensureDoc("linearization"),pdfManager.ensureCatalog("numPages")]);case 6:if(!this.xfaFactory){_context10.next=10;break;}return _context10.abrupt("return");case 10:if(this.linearization){numPages=this.linearization.numPages;}else{numPages=catalog.numPages;}case 11:if(Number.isInteger(numPages)){_context10.next=15;break;}throw new FormatError("Page count is not an integer.");case 15:if(!(numPages<=1)){_context10.next=17;break;}return _context10.abrupt("return");case 17:_context10.next=19;return this.getPage(numPages-1);case 19:_context10.next=44;break;case 21:_context10.prev=21;_context10.t0=_context10["catch"](3);this._pagePromises.delete(numPages-1);_context10.next=26;return this.cleanup();case 26:if(!(_context10.t0 instanceof XRefEntryException&&!recoveryMode)){_context10.next=28;break;}throw new XRefParseException();case 28:warn("checkLastPage - invalid /Pages tree /Count: ".concat(numPages,"."));_context10.prev=29;_context10.next=32;return catalog.getAllPageDicts(recoveryMode);case 32:pagesTree=_context10.sent;_context10.next=41;break;case 35:_context10.prev=35;_context10.t1=_context10["catch"](29);if(!(_context10.t1 instanceof XRefEntryException&&!recoveryMode)){_context10.next=39;break;}throw new XRefParseException();case 39:catalog.setActualNumPages(1);return _context10.abrupt("return");case 41:_iterator16=document_createForOfIteratorHelper(pagesTree);try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){_step16$value=document_slicedToArray(_step16.value,2),pageIndex=_step16$value[0],_step16$value$=document_slicedToArray(_step16$value[1],2),pageDict=_step16$value$[0],ref=_step16$value$[1];promise=void 0;if(pageDict instanceof Error){promise=Promise.reject(pageDict);promise.catch(function(){});}else{promise=Promise.resolve(new Page({pdfManager:pdfManager,xref:this.xref,pageIndex:pageIndex,pageDict:pageDict,ref:ref,globalIdFactory:this._globalIdFactory,fontCache:catalog.fontCache,builtInCMapCache:catalog.builtInCMapCache,standardFontDataCache:catalog.standardFontDataCache,globalImageCache:catalog.globalImageCache,systemFontCache:catalog.systemFontCache,nonBlendModesSet:catalog.nonBlendModesSet,xfaFactory:null}));}this._pagePromises.set(pageIndex,promise);}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}catalog.setActualNumPages(pagesTree.size);case 44:case"end":return _context10.stop();}},_callee10,this,[[3,21],[29,35]]);}));function checkLastPage(){return _checkLastPage.apply(this,arguments);}return checkLastPage;}()},{key:"fontFallback",value:function fontFallback(id,handler){return this.catalog.fontFallback(id,handler);}},{key:"cleanup",value:function(){var _cleanup=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee11(){var manuallyTriggered,_args11=arguments;return document_regeneratorRuntime().wrap(function _callee11$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:manuallyTriggered=_args11.length>0&&_args11[0]!==undefined?_args11[0]:false;return _context11.abrupt("return",this.catalog?this.catalog.cleanup(manuallyTriggered):clearGlobalCaches());case 2:case"end":return _context11.stop();}},_callee11,this);}));function cleanup(){return _cleanup.apply(this,arguments);}return cleanup;}()},{key:"fieldObjects",get:function get(){var _this8=this;if(!this.formInfo.hasFields){return shadow(this,"fieldObjects",Promise.resolve(null));}var promise=Promise.all([this.pdfManager.ensureDoc("annotationGlobals"),this.pdfManager.ensureCatalog("acroForm")]).then(/*#__PURE__*/function(){var _ref15=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee12(_ref14){var _ref16,annotationGlobals,acroForm,visitedRefs,allFields,fieldPromises,_iterator17,_step17,fieldRef,allPromises,_iterator18,_step18,_loop2;return document_regeneratorRuntime().wrap(function _callee12$(_context13){while(1)switch(_context13.prev=_context13.next){case 0:_ref16=document_slicedToArray(_ref14,2),annotationGlobals=_ref16[0],acroForm=_ref16[1];if(annotationGlobals){_context13.next=3;break;}return _context13.abrupt("return",null);case 3:visitedRefs=new RefSet();allFields=Object.create(null);fieldPromises=new Map();_context13.t0=document_createForOfIteratorHelper;_context13.next=9;return acroForm.getAsync("Fields");case 9:_context13.t1=_context13.sent;_iterator17=(0,_context13.t0)(_context13.t1);_context13.prev=11;_iterator17.s();case 13:if((_step17=_iterator17.n()).done){_context13.next=19;break;}fieldRef=_step17.value;_context13.next=17;return document_classPrivateMethodGet(_this8,_collectFieldObjects,_collectFieldObjects2).call(_this8,"",fieldRef,fieldPromises,annotationGlobals,visitedRefs);case 17:_context13.next=13;break;case 19:_context13.next=24;break;case 21:_context13.prev=21;_context13.t2=_context13["catch"](11);_iterator17.e(_context13.t2);case 24:_context13.prev=24;_iterator17.f();return _context13.finish(24);case 27:allPromises=[];_iterator18=document_createForOfIteratorHelper(fieldPromises);_context13.prev=29;_loop2=/*#__PURE__*/document_regeneratorRuntime().mark(function _loop2(){var _step18$value,name,promises;return document_regeneratorRuntime().wrap(function _loop2$(_context12){while(1)switch(_context12.prev=_context12.next){case 0:_step18$value=document_slicedToArray(_step18.value,2),name=_step18$value[0],promises=_step18$value[1];allPromises.push(Promise.all(promises).then(function(fields){fields=fields.filter(function(field){return!!field;});if(fields.length>0){allFields[name]=fields;}}));case 2:case"end":return _context12.stop();}},_loop2);});_iterator18.s();case 32:if((_step18=_iterator18.n()).done){_context13.next=36;break;}return _context13.delegateYield(_loop2(),"t3",34);case 34:_context13.next=32;break;case 36:_context13.next=41;break;case 38:_context13.prev=38;_context13.t4=_context13["catch"](29);_iterator18.e(_context13.t4);case 41:_context13.prev=41;_iterator18.f();return _context13.finish(41);case 44:_context13.next=46;return Promise.all(allPromises);case 46:return _context13.abrupt("return",allFields);case 47:case"end":return _context13.stop();}},_callee12,null,[[11,21,24,27],[29,38,41,44]]);}));return function(_x13){return _ref15.apply(this,arguments);};}());return shadow(this,"fieldObjects",promise);}},{key:"hasJSActions",get:function get(){var promise=this.pdfManager.ensureDoc("_parseHasJSActions");return shadow(this,"hasJSActions",promise);}},{key:"_parseHasJSActions",value:function(){var _parseHasJSActions2=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee13(){var _yield$Promise$all,_yield$Promise$all2,catalogJsActions,fieldObjects;return document_regeneratorRuntime().wrap(function _callee13$(_context14){while(1)switch(_context14.prev=_context14.next){case 0:_context14.next=2;return Promise.all([this.pdfManager.ensureCatalog("jsActions"),this.pdfManager.ensureDoc("fieldObjects")]);case 2:_yield$Promise$all=_context14.sent;_yield$Promise$all2=document_slicedToArray(_yield$Promise$all,2);catalogJsActions=_yield$Promise$all2[0];fieldObjects=_yield$Promise$all2[1];if(!catalogJsActions){_context14.next=8;break;}return _context14.abrupt("return",true);case 8:if(!fieldObjects){_context14.next=10;break;}return _context14.abrupt("return",Object.values(fieldObjects).some(function(fieldObject){return fieldObject.some(function(object){return object.actions!==null;});}));case 10:return _context14.abrupt("return",false);case 11:case"end":return _context14.stop();}},_callee13,this);}));function _parseHasJSActions(){return _parseHasJSActions2.apply(this,arguments);}return _parseHasJSActions;}()},{key:"calculationOrderIds",get:function get(){var acroForm=this.catalog.acroForm;if(!(acroForm!==null&&acroForm!==void 0&&acroForm.has("CO"))){return shadow(this,"calculationOrderIds",null);}var calculationOrder=acroForm.get("CO");if(!Array.isArray(calculationOrder)||calculationOrder.length===0){return shadow(this,"calculationOrderIds",null);}var ids=[];var _iterator19=document_createForOfIteratorHelper(calculationOrder),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var id=_step19.value;if(id instanceof Ref){ids.push(id.toString());}}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}if(ids.length===0){return shadow(this,"calculationOrderIds",null);}return shadow(this,"calculationOrderIds",ids);}},{key:"annotationGlobals",get:function get(){return shadow(this,"annotationGlobals",AnnotationFactory.createGlobals(this.pdfManager));}}]);return PDFDocument;}();function _collectFieldObjects2(_x14,_x15,_x16,_x17,_x18){return _collectFieldObjects3.apply(this,arguments);}function _collectFieldObjects3(){_collectFieldObjects3=document_asyncToGenerator(/*#__PURE__*/document_regeneratorRuntime().mark(function _callee14(name,fieldRef,promises,annotationGlobals,visitedRefs){var xref,field,partName,obj,_partName,kids,_iterator21,_step21,kid;return document_regeneratorRuntime().wrap(function _callee14$(_context15){while(1)switch(_context15.prev=_context15.next){case 0:xref=this.xref;if(!(!(fieldRef instanceof Ref)||visitedRefs.has(fieldRef))){_context15.next=3;break;}return _context15.abrupt("return");case 3:visitedRefs.put(fieldRef);_context15.next=6;return xref.fetchAsync(fieldRef);case 6:field=_context15.sent;if(field instanceof Dict){_context15.next=9;break;}return _context15.abrupt("return");case 9:if(!field.has("T")){_context15.next=18;break;}_context15.t0=stringToPDFString;_context15.next=13;return field.getAsync("T");case 13:_context15.t1=_context15.sent;partName=(0,_context15.t0)(_context15.t1);name=name===""?partName:"".concat(name,".").concat(partName);_context15.next=39;break;case 18:obj=field;case 19:if(false){}obj=obj.getRaw("Parent");if(!(obj instanceof Ref)){_context15.next=27;break;}if(!visitedRefs.has(obj)){_context15.next=24;break;}return _context15.abrupt("break",39);case 24:_context15.next=26;return xref.fetchAsync(obj);case 26:obj=_context15.sent;case 27:if(obj instanceof Dict){_context15.next=29;break;}return _context15.abrupt("break",39);case 29:if(!obj.has("T")){_context15.next=37;break;}_context15.t2=stringToPDFString;_context15.next=33;return obj.getAsync("T");case 33:_context15.t3=_context15.sent;_partName=(0,_context15.t2)(_context15.t3);name=name===""?_partName:"".concat(name,".").concat(_partName);return _context15.abrupt("break",39);case 37:_context15.next=19;break;case 39:if(!promises.has(name)){promises.set(name,[]);}promises.get(name).push(AnnotationFactory.create(xref,fieldRef,annotationGlobals,null,true,null).then(function(annotation){return annotation===null||annotation===void 0?void 0:annotation.getFieldObject();}).catch(function(reason){warn("#collectFieldObjects: \"".concat(reason,"\"."));return null;}));if(field.has("Kids")){_context15.next=43;break;}return _context15.abrupt("return");case 43:_context15.next=45;return field.getAsync("Kids");case 45:kids=_context15.sent;if(!Array.isArray(kids)){_context15.next=64;break;}_iterator21=document_createForOfIteratorHelper(kids);_context15.prev=48;_iterator21.s();case 50:if((_step21=_iterator21.n()).done){_context15.next=56;break;}kid=_step21.value;_context15.next=54;return document_classPrivateMethodGet(this,_collectFieldObjects,_collectFieldObjects2).call(this,name,kid,promises,annotationGlobals,visitedRefs);case 54:_context15.next=50;break;case 56:_context15.next=61;break;case 58:_context15.prev=58;_context15.t4=_context15["catch"](48);_iterator21.e(_context15.t4);case 61:_context15.prev=61;_iterator21.f();return _context15.finish(61);case 64:case"end":return _context15.stop();}},_callee14,this,[[48,58,61,64]]);}));return _collectFieldObjects3.apply(this,arguments);}
;// CONCATENATED MODULE: ./src/core/pdf_manager.js
function pdf_manager_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)pdf_manager_setPrototypeOf(subClass,superClass);}function pdf_manager_setPrototypeOf(o,p){pdf_manager_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return pdf_manager_setPrototypeOf(o,p);}function pdf_manager_createSuper(Derived){var hasNativeReflectConstruct=pdf_manager_isNativeReflectConstruct();return function _createSuperInternal(){var Super=pdf_manager_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=pdf_manager_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return pdf_manager_possibleConstructorReturn(this,result);};}function pdf_manager_possibleConstructorReturn(self,call){if(call&&(pdf_manager_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return pdf_manager_assertThisInitialized(self);}function pdf_manager_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function pdf_manager_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function pdf_manager_getPrototypeOf(o){pdf_manager_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return pdf_manager_getPrototypeOf(o);}function pdf_manager_typeof(o){"@babel/helpers - typeof";return pdf_manager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},pdf_manager_typeof(o);}function pdf_manager_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */pdf_manager_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==pdf_manager_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(pdf_manager_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function pdf_manager_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function pdf_manager_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){pdf_manager_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){pdf_manager_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function pdf_manager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function pdf_manager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,pdf_manager_toPropertyKey(descriptor.key),descriptor);}}function pdf_manager_createClass(Constructor,protoProps,staticProps){if(protoProps)pdf_manager_defineProperties(Constructor.prototype,protoProps);if(staticProps)pdf_manager_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function pdf_manager_toPropertyKey(arg){var key=pdf_manager_toPrimitive(arg,"string");return pdf_manager_typeof(key)==="symbol"?key:String(key);}function pdf_manager_toPrimitive(input,hint){if(pdf_manager_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(pdf_manager_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function parseDocBaseUrl(url){if(url){var absoluteUrl=createValidAbsoluteUrl(url);if(absoluteUrl){return absoluteUrl.href;}warn("Invalid absolute docBaseUrl: \"".concat(url,"\"."));}return null;}var BasePdfManager=/*#__PURE__*/function(){function BasePdfManager(args){var _args$evaluatorOption;pdf_manager_classCallCheck(this,BasePdfManager);if(this.constructor===BasePdfManager){unreachable("Cannot initialize BasePdfManager.");}this._docBaseUrl=parseDocBaseUrl(args.docBaseUrl);this._docId=args.docId;this._password=args.password;this.enableXfa=args.enableXfa;(_args$evaluatorOption=args.evaluatorOptions).isOffscreenCanvasSupported&&(_args$evaluatorOption.isOffscreenCanvasSupported=FeatureTest.isOffscreenCanvasSupported);this.evaluatorOptions=args.evaluatorOptions;}pdf_manager_createClass(BasePdfManager,[{key:"docId",get:function get(){return this._docId;}},{key:"password",get:function get(){return this._password;}},{key:"docBaseUrl",get:function get(){return this._docBaseUrl;}},{key:"catalog",get:function get(){return this.pdfDocument.catalog;}},{key:"ensureDoc",value:function ensureDoc(prop,args){return this.ensure(this.pdfDocument,prop,args);}},{key:"ensureXRef",value:function ensureXRef(prop,args){return this.ensure(this.pdfDocument.xref,prop,args);}},{key:"ensureCatalog",value:function ensureCatalog(prop,args){return this.ensure(this.pdfDocument.catalog,prop,args);}},{key:"getPage",value:function getPage(pageIndex){return this.pdfDocument.getPage(pageIndex);}},{key:"fontFallback",value:function fontFallback(id,handler){return this.pdfDocument.fontFallback(id,handler);}},{key:"loadXfaFonts",value:function loadXfaFonts(handler,task){return this.pdfDocument.loadXfaFonts(handler,task);}},{key:"loadXfaImages",value:function loadXfaImages(){return this.pdfDocument.loadXfaImages();}},{key:"serializeXfaData",value:function serializeXfaData(annotationStorage){return this.pdfDocument.serializeXfaData(annotationStorage);}},{key:"cleanup",value:function cleanup(){var manuallyTriggered=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this.pdfDocument.cleanup(manuallyTriggered);}},{key:"ensure",value:function(){var _ensure=pdf_manager_asyncToGenerator(/*#__PURE__*/pdf_manager_regeneratorRuntime().mark(function _callee(obj,prop,args){return pdf_manager_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:unreachable("Abstract method `ensure` called");case 1:case"end":return _context.stop();}},_callee);}));function ensure(_x,_x2,_x3){return _ensure.apply(this,arguments);}return ensure;}()},{key:"requestRange",value:function requestRange(begin,end){unreachable("Abstract method `requestRange` called");}},{key:"requestLoadedStream",value:function requestLoadedStream(){var noFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;unreachable("Abstract method `requestLoadedStream` called");}},{key:"sendProgressiveData",value:function sendProgressiveData(chunk){unreachable("Abstract method `sendProgressiveData` called");}},{key:"updatePassword",value:function updatePassword(password){this._password=password;}},{key:"terminate",value:function terminate(reason){unreachable("Abstract method `terminate` called");}}]);return BasePdfManager;}();var LocalPdfManager=/*#__PURE__*/function(_BasePdfManager){pdf_manager_inherits(LocalPdfManager,_BasePdfManager);var _super=pdf_manager_createSuper(LocalPdfManager);function LocalPdfManager(args){var _this;pdf_manager_classCallCheck(this,LocalPdfManager);_this=_super.call(this,args);var stream=new Stream(args.source);_this.pdfDocument=new PDFDocument(pdf_manager_assertThisInitialized(_this),stream);_this._loadedStreamPromise=Promise.resolve(stream);return _this;}pdf_manager_createClass(LocalPdfManager,[{key:"ensure",value:function(){var _ensure2=pdf_manager_asyncToGenerator(/*#__PURE__*/pdf_manager_regeneratorRuntime().mark(function _callee2(obj,prop,args){var value;return pdf_manager_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:value=obj[prop];if(!(typeof value==="function")){_context2.next=3;break;}return _context2.abrupt("return",value.apply(obj,args));case 3:return _context2.abrupt("return",value);case 4:case"end":return _context2.stop();}},_callee2);}));function ensure(_x4,_x5,_x6){return _ensure2.apply(this,arguments);}return ensure;}()},{key:"requestRange",value:function requestRange(begin,end){return Promise.resolve();}},{key:"requestLoadedStream",value:function requestLoadedStream(){var noFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._loadedStreamPromise;}},{key:"terminate",value:function terminate(reason){}}]);return LocalPdfManager;}(BasePdfManager);var NetworkPdfManager=/*#__PURE__*/function(_BasePdfManager2){pdf_manager_inherits(NetworkPdfManager,_BasePdfManager2);var _super2=pdf_manager_createSuper(NetworkPdfManager);function NetworkPdfManager(args){var _this2;pdf_manager_classCallCheck(this,NetworkPdfManager);_this2=_super2.call(this,args);_this2.streamManager=new ChunkedStreamManager(args.source,{msgHandler:args.handler,length:args.length,disableAutoFetch:args.disableAutoFetch,rangeChunkSize:args.rangeChunkSize});_this2.pdfDocument=new PDFDocument(pdf_manager_assertThisInitialized(_this2),_this2.streamManager.getStream());return _this2;}pdf_manager_createClass(NetworkPdfManager,[{key:"ensure",value:function(){var _ensure3=pdf_manager_asyncToGenerator(/*#__PURE__*/pdf_manager_regeneratorRuntime().mark(function _callee3(obj,prop,args){var value;return pdf_manager_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;value=obj[prop];if(!(typeof value==="function")){_context3.next=4;break;}return _context3.abrupt("return",value.apply(obj,args));case 4:return _context3.abrupt("return",value);case 7:_context3.prev=7;_context3.t0=_context3["catch"](0);if(_context3.t0 instanceof MissingDataException){_context3.next=11;break;}throw _context3.t0;case 11:_context3.next=13;return this.requestRange(_context3.t0.begin,_context3.t0.end);case 13:return _context3.abrupt("return",this.ensure(obj,prop,args));case 14:case"end":return _context3.stop();}},_callee3,this,[[0,7]]);}));function ensure(_x7,_x8,_x9){return _ensure3.apply(this,arguments);}return ensure;}()},{key:"requestRange",value:function requestRange(begin,end){return this.streamManager.requestRange(begin,end);}},{key:"requestLoadedStream",value:function requestLoadedStream(){var noFetch=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this.streamManager.requestAllChunks(noFetch);}},{key:"sendProgressiveData",value:function sendProgressiveData(chunk){this.streamManager.onReceiveData({chunk:chunk});}},{key:"terminate",value:function terminate(reason){this.streamManager.abort(reason);}}]);return NetworkPdfManager;}(BasePdfManager);
;// CONCATENATED MODULE: ./src/shared/message_handler.js
function message_handler_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */message_handler_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==message_handler_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(message_handler_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function message_handler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function message_handler_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){message_handler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){message_handler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function message_handler_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function message_handler_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,message_handler_toPropertyKey(descriptor.key),descriptor);}}function message_handler_createClass(Constructor,protoProps,staticProps){if(protoProps)message_handler_defineProperties(Constructor.prototype,protoProps);if(staticProps)message_handler_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function message_handler_toPropertyKey(arg){var key=message_handler_toPrimitive(arg,"string");return message_handler_typeof(key)==="symbol"?key:String(key);}function message_handler_toPrimitive(input,hint){if(message_handler_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(message_handler_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function message_handler_classPrivateMethodInitSpec(obj,privateSet){message_handler_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function message_handler_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function message_handler_classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function message_handler_typeof(o){"@babel/helpers - typeof";return message_handler_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},message_handler_typeof(o);}var CallbackKind={UNKNOWN:0,DATA:1,ERROR:2};var StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){if(!(reason instanceof Error||message_handler_typeof(reason)==="object"&&reason!==null)){unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.');}switch(reason.name){case"AbortException":return new AbortException(reason.message);case"MissingPDFException":return new MissingPDFException(reason.message);case"PasswordException":return new PasswordException(reason.message,reason.code);case"UnexpectedResponseException":return new UnexpectedResponseException(reason.message,reason.status);case"UnknownErrorException":return new UnknownErrorException(reason.message,reason.details);default:return new UnknownErrorException(reason.message,reason.toString());}}var _createStreamSink=/*#__PURE__*/new WeakSet();var _processStreamMessage=/*#__PURE__*/new WeakSet();var _deleteStreamController=/*#__PURE__*/new WeakSet();var MessageHandler=/*#__PURE__*/function(){function MessageHandler(_sourceName,_targetName,_comObj){var _this=this;message_handler_classCallCheck(this,MessageHandler);message_handler_classPrivateMethodInitSpec(this,_deleteStreamController);message_handler_classPrivateMethodInitSpec(this,_processStreamMessage);message_handler_classPrivateMethodInitSpec(this,_createStreamSink);this.sourceName=_sourceName;this.targetName=_targetName;this.comObj=_comObj;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=function(event){var data=event.data;if(data.targetName!==_this.sourceName){return;}if(data.stream){message_handler_classPrivateMethodGet(_this,_processStreamMessage,_processStreamMessage2).call(_this,data);return;}if(data.callback){var callbackId=data.callbackId;var capability=_this.callbackCapabilities[callbackId];if(!capability){throw new Error("Cannot resolve callback ".concat(callbackId));}delete _this.callbackCapabilities[callbackId];if(data.callback===CallbackKind.DATA){capability.resolve(data.data);}else if(data.callback===CallbackKind.ERROR){capability.reject(wrapReason(data.reason));}else{throw new Error("Unexpected callback case");}return;}var action=_this.actionHandler[data.action];if(!action){throw new Error("Unknown action from worker: ".concat(data.action));}if(data.callbackId){var cbSourceName=_this.sourceName;var cbTargetName=data.sourceName;new Promise(function(resolve){resolve(action(data.data));}).then(function(result){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result});},function(reason){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)});});return;}if(data.streamId){message_handler_classPrivateMethodGet(_this,_createStreamSink,_createStreamSink2).call(_this,data);return;}action(data.data);};_comObj.addEventListener("message",this._onComObjOnMessage);}message_handler_createClass(MessageHandler,[{key:"on",value:function on(actionName,handler){var ah=this.actionHandler;if(ah[actionName]){throw new Error("There is already an actionName called \"".concat(actionName,"\""));}ah[actionName]=handler;}},{key:"send",value:function send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data},transfers);}},{key:"sendWithPromise",value:function sendWithPromise(actionName,data,transfers){var callbackId=this.callbackId++;var capability=new PromiseCapability();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId:callbackId,data:data},transfers);}catch(ex){capability.reject(ex);}return capability.promise;}},{key:"sendWithStream",value:function sendWithStream(actionName,data,queueingStrategy,transfers){var _this2=this;var streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:function start(controller){var startCapability=new PromiseCapability();_this2.streamControllers[streamId]={controller:controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:false};comObj.postMessage({sourceName:sourceName,targetName:targetName,action:actionName,streamId:streamId,data:data,desiredSize:controller.desiredSize},transfers);return startCapability.promise;},pull:function pull(controller){var pullCapability=new PromiseCapability();_this2.streamControllers[streamId].pullCall=pullCapability;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL,streamId:streamId,desiredSize:controller.desiredSize});return pullCapability.promise;},cancel:function cancel(reason){assert(reason instanceof Error,"cancel must have a valid reason");var cancelCapability=new PromiseCapability();_this2.streamControllers[streamId].cancelCall=cancelCapability;_this2.streamControllers[streamId].isClosed=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL,streamId:streamId,reason:wrapReason(reason)});return cancelCapability.promise;}},queueingStrategy);}},{key:"destroy",value:function destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage);}}]);return MessageHandler;}();function _createStreamSink2(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;var self=this,action=this.actionHandler[data.action];var streamSink={enqueue:function enqueue(chunk){var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var transfers=arguments.length>2?arguments[2]:undefined;if(this.isCancelled){return;}var lastDesiredSize=this.desiredSize;this.desiredSize-=size;if(lastDesiredSize>0&&this.desiredSize<=0){this.sinkCapability=new PromiseCapability();this.ready=this.sinkCapability.promise;}comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.ENQUEUE,streamId:streamId,chunk:chunk},transfers);},close:function close(){if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CLOSE,streamId:streamId});delete self.streamSinks[streamId];},error:function error(reason){assert(reason instanceof Error,"error must have a valid reason");if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.ERROR,streamId:streamId,reason:wrapReason(reason)});},sinkCapability:new PromiseCapability(),onPull:null,onCancel:null,isCancelled:false,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve();streamSink.ready=streamSink.sinkCapability.promise;this.streamSinks[streamId]=streamSink;new Promise(function(resolve){resolve(action(data.data,streamSink));}).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.START_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.START_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});}function _processStreamMessage2(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;var streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:if(data.success){streamController.startCall.resolve();}else{streamController.startCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL_COMPLETE:if(data.success){streamController.pullCall.resolve();}else{streamController.pullCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,success:true});break;}if(streamSink.desiredSize<=0&&data.desiredSize>0){streamSink.sinkCapability.resolve();}streamSink.desiredSize=data.desiredSize;new Promise(function(resolve){var _streamSink$onPull;resolve((_streamSink$onPull=streamSink.onPull)===null||_streamSink$onPull===void 0?void 0:_streamSink$onPull.call(streamSink));}).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});break;case StreamKind.ENQUEUE:assert(streamController,"enqueue should have stream controller");if(streamController.isClosed){break;}streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:assert(streamController,"close should have stream controller");if(streamController.isClosed){break;}streamController.isClosed=true;streamController.controller.close();message_handler_classPrivateMethodGet(this,_deleteStreamController,_deleteStreamController2).call(this,streamController,streamId);break;case StreamKind.ERROR:assert(streamController,"error should have stream controller");streamController.controller.error(wrapReason(data.reason));message_handler_classPrivateMethodGet(this,_deleteStreamController,_deleteStreamController2).call(this,streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:if(data.success){streamController.cancelCall.resolve();}else{streamController.cancelCall.reject(wrapReason(data.reason));}message_handler_classPrivateMethodGet(this,_deleteStreamController,_deleteStreamController2).call(this,streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink){break;}new Promise(function(resolve){var _streamSink$onCancel;resolve((_streamSink$onCancel=streamSink.onCancel)===null||_streamSink$onCancel===void 0?void 0:_streamSink$onCancel.call(streamSink,wrapReason(data.reason)));}).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});streamSink.sinkCapability.reject(wrapReason(data.reason));streamSink.isCancelled=true;delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case");}}function _deleteStreamController2(_x,_x2){return _deleteStreamController3.apply(this,arguments);}function _deleteStreamController3(){_deleteStreamController3=message_handler_asyncToGenerator(/*#__PURE__*/message_handler_regeneratorRuntime().mark(function _callee(streamController,streamId){var _streamController$sta,_streamController$pul,_streamController$can;return message_handler_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.allSettled([(_streamController$sta=streamController.startCall)===null||_streamController$sta===void 0?void 0:_streamController$sta.promise,(_streamController$pul=streamController.pullCall)===null||_streamController$pul===void 0?void 0:_streamController$pul.promise,(_streamController$can=streamController.cancelCall)===null||_streamController$can===void 0?void 0:_streamController$can.promise]);case 2:delete this.streamControllers[streamId];case 3:case"end":return _context.stop();}},_callee,this);}));return _deleteStreamController3.apply(this,arguments);}
;// CONCATENATED MODULE: ./src/core/worker_stream.js
function worker_stream_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */worker_stream_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==worker_stream_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(worker_stream_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function worker_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function worker_stream_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){worker_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){worker_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function worker_stream_typeof(o){"@babel/helpers - typeof";return worker_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},worker_stream_typeof(o);}function worker_stream_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=worker_stream_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function worker_stream_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return worker_stream_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return worker_stream_arrayLikeToArray(o,minLen);}function worker_stream_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function worker_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function worker_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,worker_stream_toPropertyKey(descriptor.key),descriptor);}}function worker_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)worker_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)worker_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function worker_stream_toPropertyKey(arg){var key=worker_stream_toPrimitive(arg,"string");return worker_stream_typeof(key)==="symbol"?key:String(key);}function worker_stream_toPrimitive(input,hint){if(worker_stream_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(worker_stream_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var PDFWorkerStream=/*#__PURE__*/function(){function PDFWorkerStream(msgHandler){worker_stream_classCallCheck(this,PDFWorkerStream);this._msgHandler=msgHandler;this._contentLength=null;this._fullRequestReader=null;this._rangeRequestReaders=[];}worker_stream_createClass(PDFWorkerStream,[{key:"getFullReader",value:function getFullReader(){assert(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once.");this._fullRequestReader=new PDFWorkerStreamReader(this._msgHandler);return this._fullRequestReader;}},{key:"getRangeReader",value:function getRangeReader(begin,end){var reader=new PDFWorkerStreamRangeReader(begin,end,this._msgHandler);this._rangeRequestReaders.push(reader);return reader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea;(_this$_fullRequestRea=this._fullRequestReader)===null||_this$_fullRequestRea===void 0||_this$_fullRequestRea.cancel(reason);var _iterator=worker_stream_createForOfIteratorHelper(this._rangeRequestReaders.slice(0)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var reader=_step.value;reader.cancel(reason);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}]);return PDFWorkerStream;}();var PDFWorkerStreamReader=/*#__PURE__*/function(){function PDFWorkerStreamReader(msgHandler){var _this=this;worker_stream_classCallCheck(this,PDFWorkerStreamReader);this._msgHandler=msgHandler;this.onProgress=null;this._contentLength=null;this._isRangeSupported=false;this._isStreamingSupported=false;var readableStream=this._msgHandler.sendWithStream("GetReader");this._reader=readableStream.getReader();this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then(function(data){_this._isStreamingSupported=data.isStreamingSupported;_this._isRangeSupported=data.isRangeSupported;_this._contentLength=data.contentLength;});}worker_stream_createClass(PDFWorkerStreamReader,[{key:"headersReady",get:function get(){return this._headersReady;}},{key:"contentLength",get:function get(){return this._contentLength;}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported;}},{key:"read",value:function(){var _read=worker_stream_asyncToGenerator(/*#__PURE__*/worker_stream_regeneratorRuntime().mark(function _callee(){var _yield$this$_reader$r,value,done;return worker_stream_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return this._reader.read();case 2:_yield$this$_reader$r=_context.sent;value=_yield$this$_reader$r.value;done=_yield$this$_reader$r.done;if(!done){_context.next=7;break;}return _context.abrupt("return",{value:undefined,done:true});case 7:return _context.abrupt("return",{value:value.buffer,done:false});case 8:case"end":return _context.stop();}},_callee,this);}));function read(){return _read.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._reader.cancel(reason);}}]);return PDFWorkerStreamReader;}();var PDFWorkerStreamRangeReader=/*#__PURE__*/function(){function PDFWorkerStreamRangeReader(begin,end,msgHandler){worker_stream_classCallCheck(this,PDFWorkerStreamRangeReader);this._msgHandler=msgHandler;this.onProgress=null;var readableStream=this._msgHandler.sendWithStream("GetRangeReader",{begin:begin,end:end});this._reader=readableStream.getReader();}worker_stream_createClass(PDFWorkerStreamRangeReader,[{key:"isStreamingSupported",get:function get(){return false;}},{key:"read",value:function(){var _read2=worker_stream_asyncToGenerator(/*#__PURE__*/worker_stream_regeneratorRuntime().mark(function _callee2(){var _yield$this$_reader$r2,value,done;return worker_stream_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this._reader.read();case 2:_yield$this$_reader$r2=_context2.sent;value=_yield$this$_reader$r2.value;done=_yield$this$_reader$r2.done;if(!done){_context2.next=7;break;}return _context2.abrupt("return",{value:undefined,done:true});case 7:return _context2.abrupt("return",{value:value.buffer,done:false});case 8:case"end":return _context2.stop();}},_callee2,this);}));function read(){return _read2.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._reader.cancel(reason);}}]);return PDFWorkerStreamRangeReader;}();
;// CONCATENATED MODULE: ./src/core/worker.js
function worker_typeof(o){"@babel/helpers - typeof";return worker_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},worker_typeof(o);}function worker_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */worker_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==worker_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(worker_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function worker_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=worker_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function worker_slicedToArray(arr,i){return worker_arrayWithHoles(arr)||worker_iterableToArrayLimit(arr,i)||worker_unsupportedIterableToArray(arr,i)||worker_nonIterableRest();}function worker_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function worker_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return worker_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return worker_arrayLikeToArray(o,minLen);}function worker_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function worker_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function worker_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function worker_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function worker_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){worker_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){worker_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function worker_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function worker_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,worker_toPropertyKey(descriptor.key),descriptor);}}function worker_createClass(Constructor,protoProps,staticProps){if(protoProps)worker_defineProperties(Constructor.prototype,protoProps);if(staticProps)worker_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function worker_toPropertyKey(arg){var key=worker_toPrimitive(arg,"string");return worker_typeof(key)==="symbol"?key:String(key);}function worker_toPrimitive(input,hint){if(worker_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(worker_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}if(!Promise.allSettled){Promise.allSettled=function(promises){var mappedPromises=promises.filter(function(o){return!!o;}).map(function(p){return p.then(function(value){return{status:"fulfilled",value:value};}).catch(function(reason){return{status:"rejected",reason:reason};});});return Promise.all(mappedPromises);};}var WorkerTask=/*#__PURE__*/function(){function WorkerTask(name){worker_classCallCheck(this,WorkerTask);this.name=name;this.terminated=false;this._capability=new PromiseCapability();}worker_createClass(WorkerTask,[{key:"finished",get:function get(){return this._capability.promise;}},{key:"finish",value:function finish(){this._capability.resolve();}},{key:"terminate",value:function terminate(){this.terminated=true;}},{key:"ensureNotTerminated",value:function ensureNotTerminated(){if(this.terminated){throw new Error("Worker task was terminated");}}}]);return WorkerTask;}();var WorkerMessageHandler=/*#__PURE__*/function(){function WorkerMessageHandler(){worker_classCallCheck(this,WorkerMessageHandler);}worker_createClass(WorkerMessageHandler,null,[{key:"setup",value:function setup(handler,port){var testMessageProcessed=false;handler.on("test",function(data){if(testMessageProcessed){return;}testMessageProcessed=true;handler.send("test",data instanceof Uint8Array);});handler.on("configure",function(data){setVerbosityLevel(data.verbosity);});handler.on("GetDocRequest",function(data){return WorkerMessageHandler.createDocumentHandler(data,port);});}},{key:"createDocumentHandler",value:function createDocumentHandler(docParams,port){var pdfManager;var terminated=false;var cancelXHRs=null;var WorkerTasks=new Set();var verbosity=getVerbosityLevel();var _docParams=docParams,docId=_docParams.docId,apiVersion=_docParams.apiVersion;var workerVersion='4.0.721';if(apiVersion!==workerVersion){throw new Error("The API version \"".concat(apiVersion,"\" does not match ")+"the Worker version \"".concat(workerVersion,"\"."));}var enumerableProperties=[];for(var property in[]){enumerableProperties.push(property);}if(enumerableProperties.length){throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+enumerableProperties.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");}var workerHandlerName=docId+"_worker";var handler=new MessageHandler(workerHandlerName,docId,port);function ensureNotTerminated(){if(terminated){throw new Error("Worker was terminated");}}function startWorkerTask(task){WorkerTasks.add(task);}function finishWorkerTask(task){task.finish();WorkerTasks.delete(task);}function loadDocument(_x){return _loadDocument.apply(this,arguments);}function _loadDocument(){_loadDocument=worker_asyncToGenerator(/*#__PURE__*/worker_regeneratorRuntime().mark(function _callee4(recoveryMode){var isPureXfa,task,_yield$Promise$all3,_yield$Promise$all4,numPages,fingerprints,htmlForXfa;return worker_regeneratorRuntime().wrap(function _callee4$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return pdfManager.ensureDoc("checkHeader");case 2:_context6.next=4;return pdfManager.ensureDoc("parseStartXRef");case 4:_context6.next=6;return pdfManager.ensureDoc("parse",[recoveryMode]);case 6:_context6.next=8;return pdfManager.ensureDoc("checkFirstPage",[recoveryMode]);case 8:_context6.next=10;return pdfManager.ensureDoc("checkLastPage",[recoveryMode]);case 10:_context6.next=12;return pdfManager.ensureDoc("isPureXfa");case 12:isPureXfa=_context6.sent;if(!isPureXfa){_context6.next=18;break;}task=new WorkerTask("loadXfaFonts");startWorkerTask(task);_context6.next=18;return Promise.all([pdfManager.loadXfaFonts(handler,task).catch(function(reason){}).then(function(){return finishWorkerTask(task);}),pdfManager.loadXfaImages()]);case 18:_context6.next=20;return Promise.all([pdfManager.ensureDoc("numPages"),pdfManager.ensureDoc("fingerprints")]);case 20:_yield$Promise$all3=_context6.sent;_yield$Promise$all4=worker_slicedToArray(_yield$Promise$all3,2);numPages=_yield$Promise$all4[0];fingerprints=_yield$Promise$all4[1];if(!isPureXfa){_context6.next=30;break;}_context6.next=27;return pdfManager.ensureDoc("htmlForXfa");case 27:_context6.t0=_context6.sent;_context6.next=31;break;case 30:_context6.t0=null;case 31:htmlForXfa=_context6.t0;return _context6.abrupt("return",{numPages:numPages,fingerprints:fingerprints,htmlForXfa:htmlForXfa});case 33:case"end":return _context6.stop();}},_callee4);}));return _loadDocument.apply(this,arguments);}function getPdfManager(_ref){var data=_ref.data,password=_ref.password,disableAutoFetch=_ref.disableAutoFetch,rangeChunkSize=_ref.rangeChunkSize,length=_ref.length,docBaseUrl=_ref.docBaseUrl,enableXfa=_ref.enableXfa,evaluatorOptions=_ref.evaluatorOptions;var pdfManagerArgs={source:null,disableAutoFetch:disableAutoFetch,docBaseUrl:docBaseUrl,docId:docId,enableXfa:enableXfa,evaluatorOptions:evaluatorOptions,handler:handler,length:length,password:password,rangeChunkSize:rangeChunkSize};var pdfManagerCapability=new PromiseCapability();var newPdfManager;if(data){try{pdfManagerArgs.source=data;newPdfManager=new LocalPdfManager(pdfManagerArgs);pdfManagerCapability.resolve(newPdfManager);}catch(ex){pdfManagerCapability.reject(ex);}return pdfManagerCapability.promise;}var pdfStream,cachedChunks=[];try{pdfStream=new PDFWorkerStream(handler);}catch(ex){pdfManagerCapability.reject(ex);return pdfManagerCapability.promise;}var fullRequest=pdfStream.getFullReader();fullRequest.headersReady.then(function(){if(!fullRequest.isRangeSupported){return;}pdfManagerArgs.source=pdfStream;pdfManagerArgs.length=fullRequest.contentLength;pdfManagerArgs.disableAutoFetch||(pdfManagerArgs.disableAutoFetch=fullRequest.isStreamingSupported);newPdfManager=new NetworkPdfManager(pdfManagerArgs);for(var _i=0,_cachedChunks=cachedChunks;_i<_cachedChunks.length;_i++){var chunk=_cachedChunks[_i];newPdfManager.sendProgressiveData(chunk);}cachedChunks=[];pdfManagerCapability.resolve(newPdfManager);cancelXHRs=null;}).catch(function(reason){pdfManagerCapability.reject(reason);cancelXHRs=null;});var loaded=0;var flushChunks=function flushChunks(){var pdfFile=arrayBuffersToBytes(cachedChunks);if(length&&pdfFile.length!==length){warn("reported HTTP length is different from actual");}try{pdfManagerArgs.source=pdfFile;newPdfManager=new LocalPdfManager(pdfManagerArgs);pdfManagerCapability.resolve(newPdfManager);}catch(ex){pdfManagerCapability.reject(ex);}cachedChunks=[];};new Promise(function(resolve,reject){var readChunk=function readChunk(_ref2){var value=_ref2.value,done=_ref2.done;try{ensureNotTerminated();if(done){if(!newPdfManager){flushChunks();}cancelXHRs=null;return;}loaded+=value.byteLength;if(!fullRequest.isStreamingSupported){handler.send("DocProgress",{loaded:loaded,total:Math.max(loaded,fullRequest.contentLength||0)});}if(newPdfManager){newPdfManager.sendProgressiveData(value);}else{cachedChunks.push(value);}fullRequest.read().then(readChunk,reject);}catch(e){reject(e);}};fullRequest.read().then(readChunk,reject);}).catch(function(e){pdfManagerCapability.reject(e);cancelXHRs=null;});cancelXHRs=function cancelXHRs(reason){pdfStream.cancelAllRequests(reason);};return pdfManagerCapability.promise;}function setupDoc(data){function onSuccess(doc){ensureNotTerminated();handler.send("GetDoc",{pdfInfo:doc});}function onFailure(ex){ensureNotTerminated();if(ex instanceof PasswordException){var task=new WorkerTask("PasswordException: response ".concat(ex.code));startWorkerTask(task);handler.sendWithPromise("PasswordRequest",ex).then(function(_ref3){var password=_ref3.password;finishWorkerTask(task);pdfManager.updatePassword(password);pdfManagerReady();}).catch(function(){finishWorkerTask(task);handler.send("DocException",ex);});}else if(ex instanceof InvalidPDFException||ex instanceof MissingPDFException||ex instanceof UnexpectedResponseException||ex instanceof UnknownErrorException){handler.send("DocException",ex);}else{handler.send("DocException",new UnknownErrorException(ex.message,ex.toString()));}}function pdfManagerReady(){ensureNotTerminated();loadDocument(false).then(onSuccess,function(reason){ensureNotTerminated();if(!(reason instanceof XRefParseException)){onFailure(reason);return;}pdfManager.requestLoadedStream().then(function(){ensureNotTerminated();loadDocument(true).then(onSuccess,onFailure);});});}ensureNotTerminated();getPdfManager(data).then(function(newPdfManager){if(terminated){newPdfManager.terminate(new AbortException("Worker was terminated."));throw new Error("Worker was terminated");}pdfManager=newPdfManager;pdfManager.requestLoadedStream(true).then(function(stream){handler.send("DataLoaded",{length:stream.bytes.byteLength});});}).then(pdfManagerReady,onFailure);}handler.on("GetPage",function(data){return pdfManager.getPage(data.pageIndex).then(function(page){return Promise.all([pdfManager.ensure(page,"rotate"),pdfManager.ensure(page,"ref"),pdfManager.ensure(page,"userUnit"),pdfManager.ensure(page,"view")]).then(function(_ref4){var _ref5=worker_slicedToArray(_ref4,4),rotate=_ref5[0],ref=_ref5[1],userUnit=_ref5[2],view=_ref5[3];return{rotate:rotate,ref:ref,userUnit:userUnit,view:view};});});});handler.on("GetPageIndex",function(data){var pageRef=Ref.get(data.num,data.gen);return pdfManager.ensureCatalog("getPageIndex",[pageRef]);});handler.on("GetDestinations",function(data){return pdfManager.ensureCatalog("destinations");});handler.on("GetDestination",function(data){return pdfManager.ensureCatalog("getDestination",[data.id]);});handler.on("GetPageLabels",function(data){return pdfManager.ensureCatalog("pageLabels");});handler.on("GetPageLayout",function(data){return pdfManager.ensureCatalog("pageLayout");});handler.on("GetPageMode",function(data){return pdfManager.ensureCatalog("pageMode");});handler.on("GetViewerPreferences",function(data){return pdfManager.ensureCatalog("viewerPreferences");});handler.on("GetOpenAction",function(data){return pdfManager.ensureCatalog("openAction");});handler.on("GetAttachments",function(data){return pdfManager.ensureCatalog("attachments");});handler.on("GetDocJSActions",function(data){return pdfManager.ensureCatalog("jsActions");});handler.on("GetPageJSActions",function(_ref6){var pageIndex=_ref6.pageIndex;return pdfManager.getPage(pageIndex).then(function(page){return pdfManager.ensure(page,"jsActions");});});handler.on("GetOutline",function(data){return pdfManager.ensureCatalog("documentOutline");});handler.on("GetOptionalContentConfig",function(data){return pdfManager.ensureCatalog("optionalContentConfig");});handler.on("GetPermissions",function(data){return pdfManager.ensureCatalog("permissions");});handler.on("GetMetadata",function(data){return Promise.all([pdfManager.ensureDoc("documentInfo"),pdfManager.ensureCatalog("metadata")]);});handler.on("GetMarkInfo",function(data){return pdfManager.ensureCatalog("markInfo");});handler.on("GetData",function(data){return pdfManager.requestLoadedStream().then(function(stream){return stream.bytes;});});handler.on("GetAnnotations",function(_ref7){var pageIndex=_ref7.pageIndex,intent=_ref7.intent;return pdfManager.getPage(pageIndex).then(function(page){var task=new WorkerTask("GetAnnotations: page ".concat(pageIndex));startWorkerTask(task);return page.getAnnotationsData(handler,task,intent).then(function(data){finishWorkerTask(task);return data;},function(reason){finishWorkerTask(task);throw reason;});});});handler.on("GetFieldObjects",function(data){return pdfManager.ensureDoc("fieldObjects");});handler.on("HasJSActions",function(data){return pdfManager.ensureDoc("hasJSActions");});handler.on("GetCalculationOrderIds",function(data){return pdfManager.ensureDoc("calculationOrderIds");});handler.on("SaveDocument",/*#__PURE__*/function(){var _ref9=worker_asyncToGenerator(/*#__PURE__*/worker_regeneratorRuntime().mark(function _callee3(_ref8){var isPureXfa,numPages,annotationStorage,filename,globalPromises,promises,newAnnotationsByPage,_yield$Promise$all,_yield$Promise$all2,stream,acroForm,acroFormRef,startXRef,xref,linearization,_structTreeRoot,catalogRef,structTreeRoot,imagePromises,newAnnotationPromises,_iterator,_step,_loop,_loop2,pageIndex,refs,newRefs,xfaData,needAppearances,xfa,xfaDatasetsRef,hasXfaDatasetsEntry,i,ii,newXrefInfo,_xref$lastXRefStreamP,infoObj,xrefInfo;return worker_regeneratorRuntime().wrap(function _callee3$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:isPureXfa=_ref8.isPureXfa,numPages=_ref8.numPages,annotationStorage=_ref8.annotationStorage,filename=_ref8.filename;globalPromises=[pdfManager.requestLoadedStream(),pdfManager.ensureCatalog("acroForm"),pdfManager.ensureCatalog("acroFormRef"),pdfManager.ensureDoc("startXRef"),pdfManager.ensureDoc("xref"),pdfManager.ensureDoc("linearization"),pdfManager.ensureCatalog("structTreeRoot")];promises=[];newAnnotationsByPage=!isPureXfa?getNewAnnotationsMap(annotationStorage):null;_context5.next=6;return Promise.all(globalPromises);case 6:_yield$Promise$all=_context5.sent;_yield$Promise$all2=worker_slicedToArray(_yield$Promise$all,7);stream=_yield$Promise$all2[0];acroForm=_yield$Promise$all2[1];acroFormRef=_yield$Promise$all2[2];startXRef=_yield$Promise$all2[3];xref=_yield$Promise$all2[4];linearization=_yield$Promise$all2[5];_structTreeRoot=_yield$Promise$all2[6];catalogRef=xref.trailer.getRaw("Root")||null;if(!newAnnotationsByPage){_context5.next=47;break;}if(_structTreeRoot){_context5.next=24;break;}_context5.next=20;return StructTreeRoot.canCreateStructureTree({catalogRef:catalogRef,pdfManager:pdfManager,newAnnotationsByPage:newAnnotationsByPage});case 20:if(!_context5.sent){_context5.next=22;break;}structTreeRoot=null;case 22:_context5.next=28;break;case 24:_context5.next=26;return _structTreeRoot.canUpdateStructTree({pdfManager:pdfManager,xref:xref,newAnnotationsByPage:newAnnotationsByPage});case 26:if(!_context5.sent){_context5.next=28;break;}structTreeRoot=_structTreeRoot;case 28:imagePromises=AnnotationFactory.generateImages(annotationStorage.values(),xref,pdfManager.evaluatorOptions.isOffscreenCanvasSupported);newAnnotationPromises=structTreeRoot===undefined?promises:[];_iterator=worker_createForOfIteratorHelper(newAnnotationsByPage);_context5.prev=31;_loop=/*#__PURE__*/worker_regeneratorRuntime().mark(function _loop(){var _step$value,pageIndex,annotations;return worker_regeneratorRuntime().wrap(function _loop$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_step$value=worker_slicedToArray(_step.value,2),pageIndex=_step$value[0],annotations=_step$value[1];newAnnotationPromises.push(pdfManager.getPage(pageIndex).then(function(page){var task=new WorkerTask("Save (editor): page ".concat(pageIndex));return page.saveNewAnnotations(handler,task,annotations,imagePromises).finally(function(){finishWorkerTask(task);});}));case 2:case"end":return _context3.stop();}},_loop);});_iterator.s();case 34:if((_step=_iterator.n()).done){_context5.next=38;break;}return _context5.delegateYield(_loop(),"t0",36);case 36:_context5.next=34;break;case 38:_context5.next=43;break;case 40:_context5.prev=40;_context5.t1=_context5["catch"](31);_iterator.e(_context5.t1);case 43:_context5.prev=43;_iterator.f();return _context5.finish(43);case 46:if(structTreeRoot===null){promises.push(Promise.all(newAnnotationPromises).then(/*#__PURE__*/function(){var _ref10=worker_asyncToGenerator(/*#__PURE__*/worker_regeneratorRuntime().mark(function _callee(newRefs){return worker_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return StructTreeRoot.createStructureTree({newAnnotationsByPage:newAnnotationsByPage,xref:xref,catalogRef:catalogRef,pdfManager:pdfManager,newRefs:newRefs});case 2:return _context.abrupt("return",newRefs);case 3:case"end":return _context.stop();}},_callee);}));return function(_x3){return _ref10.apply(this,arguments);};}()));}else if(structTreeRoot){promises.push(Promise.all(newAnnotationPromises).then(/*#__PURE__*/function(){var _ref11=worker_asyncToGenerator(/*#__PURE__*/worker_regeneratorRuntime().mark(function _callee2(newRefs){return worker_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return structTreeRoot.updateStructureTree({newAnnotationsByPage:newAnnotationsByPage,pdfManager:pdfManager,newRefs:newRefs});case 2:return _context2.abrupt("return",newRefs);case 3:case"end":return _context2.stop();}},_callee2);}));return function(_x4){return _ref11.apply(this,arguments);};}()));}case 47:if(!isPureXfa){_context5.next=51;break;}promises.push(pdfManager.serializeXfaData(annotationStorage));_context5.next=58;break;case 51:_loop2=/*#__PURE__*/worker_regeneratorRuntime().mark(function _loop2(pageIndex){return worker_regeneratorRuntime().wrap(function _loop2$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:promises.push(pdfManager.getPage(pageIndex).then(function(page){var task=new WorkerTask("Save: page ".concat(pageIndex));return page.save(handler,task,annotationStorage).finally(function(){finishWorkerTask(task);});}));case 1:case"end":return _context4.stop();}},_loop2);});pageIndex=0;case 53:if(!(pageIndex<numPages)){_context5.next=58;break;}return _context5.delegateYield(_loop2(pageIndex),"t2",55);case 55:pageIndex++;_context5.next=53;break;case 58:_context5.next=60;return Promise.all(promises);case 60:refs=_context5.sent;newRefs=[];xfaData=null;if(!isPureXfa){_context5.next=69;break;}xfaData=refs[0];if(xfaData){_context5.next=67;break;}return _context5.abrupt("return",stream.bytes);case 67:_context5.next=72;break;case 69:newRefs=refs.flat(2);if(!(newRefs.length===0)){_context5.next=72;break;}return _context5.abrupt("return",stream.bytes);case 72:needAppearances=acroFormRef&&acroForm instanceof Dict&&newRefs.some(function(ref){return ref.needAppearances;});xfa=acroForm instanceof Dict&&acroForm.get("XFA")||null;xfaDatasetsRef=null;hasXfaDatasetsEntry=false;if(Array.isArray(xfa)){for(i=0,ii=xfa.length;i<ii;i+=2){if(xfa[i]==="datasets"){xfaDatasetsRef=xfa[i+1];hasXfaDatasetsEntry=true;}}if(xfaDatasetsRef===null){xfaDatasetsRef=xref.getNewTemporaryRef();}}else if(xfa){warn("Unsupported XFA type.");}newXrefInfo=Object.create(null);if(xref.trailer){infoObj=Object.create(null);xrefInfo=xref.trailer.get("Info")||null;if(xrefInfo instanceof Dict){xrefInfo.forEach(function(key,value){if(typeof value==="string"){infoObj[key]=stringToPDFString(value);}});}newXrefInfo={rootRef:catalogRef,encryptRef:xref.trailer.getRaw("Encrypt")||null,newRef:xref.getNewTemporaryRef(),infoRef:xref.trailer.getRaw("Info")||null,info:infoObj,fileIds:xref.trailer.get("ID")||null,startXRef:linearization?startXRef:(_xref$lastXRefStreamP=xref.lastXRefStreamPos)!==null&&_xref$lastXRefStreamP!==void 0?_xref$lastXRefStreamP:startXRef,filename:filename};}return _context5.abrupt("return",incrementalUpdate({originalData:stream.bytes,xrefInfo:newXrefInfo,newRefs:newRefs,xref:xref,hasXfa:!!xfa,xfaDatasetsRef:xfaDatasetsRef,hasXfaDatasetsEntry:hasXfaDatasetsEntry,needAppearances:needAppearances,acroFormRef:acroFormRef,acroForm:acroForm,xfaData:xfaData}).finally(function(){xref.resetNewTemporaryRef();}));case 80:case"end":return _context5.stop();}},_callee3,null,[[31,40,43,46]]);}));return function(_x2){return _ref9.apply(this,arguments);};}());handler.on("GetOperatorList",function(data,sink){var pageIndex=data.pageIndex;pdfManager.getPage(pageIndex).then(function(page){var task=new WorkerTask("GetOperatorList: page ".concat(pageIndex));startWorkerTask(task);var start=verbosity>=VerbosityLevel.INFOS?Date.now():0;page.getOperatorList({handler:handler,sink:sink,task:task,intent:data.intent,cacheKey:data.cacheKey,annotationStorage:data.annotationStorage}).then(function(operatorListInfo){finishWorkerTask(task);if(start){info("page=".concat(pageIndex+1," - getOperatorList: time=")+"".concat(Date.now()-start,"ms, len=").concat(operatorListInfo.length));}sink.close();},function(reason){finishWorkerTask(task);if(task.terminated){return;}sink.error(reason);});});});handler.on("GetTextContent",function(data,sink){var pageIndex=data.pageIndex,includeMarkedContent=data.includeMarkedContent,disableNormalization=data.disableNormalization;pdfManager.getPage(pageIndex).then(function(page){var task=new WorkerTask("GetTextContent: page "+pageIndex);startWorkerTask(task);var start=verbosity>=VerbosityLevel.INFOS?Date.now():0;page.extractTextContent({handler:handler,task:task,sink:sink,includeMarkedContent:includeMarkedContent,disableNormalization:disableNormalization}).then(function(){finishWorkerTask(task);if(start){info("page=".concat(pageIndex+1," - getTextContent: time=")+"".concat(Date.now()-start,"ms"));}sink.close();},function(reason){finishWorkerTask(task);if(task.terminated){return;}sink.error(reason);});});});handler.on("GetStructTree",function(data){return pdfManager.getPage(data.pageIndex).then(function(page){return pdfManager.ensure(page,"getStructTree");});});handler.on("FontFallback",function(data){return pdfManager.fontFallback(data.id,handler);});handler.on("Cleanup",function(data){return pdfManager.cleanup(true);});handler.on("Terminate",function(data){terminated=true;var waitOn=[];if(pdfManager){pdfManager.terminate(new AbortException("Worker was terminated."));var cleanupPromise=pdfManager.cleanup();waitOn.push(cleanupPromise);pdfManager=null;}else{clearGlobalCaches();}if(cancelXHRs){cancelXHRs(new AbortException("Worker was terminated."));}var _iterator2=worker_createForOfIteratorHelper(WorkerTasks),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var task=_step2.value;waitOn.push(task.finished);task.terminate();}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return Promise.all(waitOn).then(function(){handler.destroy();handler=null;});});handler.on("Ready",function(data){setupDoc(docParams);docParams=null;});handler.on("showUnverifiedSignatures",function wphReady(data){if(data){info("showUnverifiedSignatures="+data+". This is an incompletely implemented feature. Signatures cannot be validated, so use it at own risk.");}self.showUnverifiedSignatures=data;});return workerHandlerName;}},{key:"initializeFromPort",value:function initializeFromPort(port){var handler=new MessageHandler("worker","main",port);WorkerMessageHandler.setup(handler,port);handler.send("ready",null);}}]);return WorkerMessageHandler;}();function isMessagePort(maybePort){return typeof maybePort.postMessage==="function"&&"onmessage"in maybePort;}if(typeof window==="undefined"&&typeof self!=="undefined"&&isMessagePort(self)){WorkerMessageHandler.initializeFromPort(self);}
;// CONCATENATED MODULE: ./src/pdf.worker.js
var pdfjsVersion='4.0.721';var pdfjsBuild='96abb558b';
})();

var __webpack_exports__WorkerMessageHandler = __webpack_exports__.WorkerMessageHandler;
export { __webpack_exports__WorkerMessageHandler as WorkerMessageHandler };
