window.ngxZone.runOutsideAngular(() => {
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2023 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */

(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		root["pdfjs-dist/build/pdf"] = module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		{
		define("pdfjs-dist/build/pdf", [], factory);
	  	root["pdfjs-dist/build/pdf"] = root.pdfjsLib = factory();
		}
	else if(typeof exports === 'object')
		root["pdfjs-dist/build/pdf"] = exports["pdfjs-dist/build/pdf"] = factory();
	else
		root["pdfjs-dist/build/pdf"] = root.pdfjsLib = factory();
})(globalThis, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ([
/* 0 */,
/* 1 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.VerbosityLevel=exports.Util=exports.UnknownErrorException=exports.UnexpectedResponseException=exports.TextRenderingMode=exports.RenderingIntentFlag=exports.PermissionFlag=exports.PasswordResponses=exports.PasswordException=exports.PageActionEventType=exports.OPS=exports.MissingPDFException=exports.MAX_IMAGE_SIZE_TO_CACHE=exports.LINE_FACTOR=exports.LINE_DESCENT_FACTOR=exports.InvalidPDFException=exports.ImageKind=exports.IDENTITY_MATRIX=exports.FormatError=exports.FeatureTest=exports.FONT_IDENTITY_MATRIX=exports.DocumentActionEventType=exports.CMapCompressionType=exports.BaseException=exports.BASELINE_FACTOR=exports.AnnotationType=exports.AnnotationStateModelType=exports.AnnotationReviewState=exports.AnnotationReplyType=exports.AnnotationMode=exports.AnnotationMarkedState=exports.AnnotationFlag=exports.AnnotationFieldFlag=exports.AnnotationEditorType=exports.AnnotationEditorPrefix=exports.AnnotationEditorParamsType=exports.AnnotationBorderStyleType=exports.AnnotationActionEventType=exports.AbortException=void 0;exports.assert=assert;exports.bytesToString=bytesToString;exports.createPromiseCapability=createPromiseCapability;exports.createValidAbsoluteUrl=createValidAbsoluteUrl;exports.getModificationDate=getModificationDate;exports.getVerbosityLevel=getVerbosityLevel;exports.info=info;exports.isArrayBuffer=isArrayBuffer;exports.isArrayEqual=isArrayEqual;exports.objectFromMap=objectFromMap;exports.objectSize=objectSize;exports.setVerbosityLevel=setVerbosityLevel;exports.shadow=shadow;exports.string32=string32;exports.stringToBytes=stringToBytes;exports.stringToPDFString=stringToPDFString;exports.stringToUTF8String=stringToUTF8String;exports.unreachable=unreachable;exports.utf8StringToString=utf8StringToString;exports.warn=warn;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}if(!globalThis._pdfjsCompatibilityChecked){globalThis._pdfjsCompatibilityChecked=true;__w_pdfjs_require__(2);}var IDENTITY_MATRIX=[1,0,0,1,0,0];exports.IDENTITY_MATRIX=IDENTITY_MATRIX;var FONT_IDENTITY_MATRIX=[0.001,0,0,0.001,0,0];exports.FONT_IDENTITY_MATRIX=FONT_IDENTITY_MATRIX;var MAX_IMAGE_SIZE_TO_CACHE=10e6;exports.MAX_IMAGE_SIZE_TO_CACHE=MAX_IMAGE_SIZE_TO_CACHE;var LINE_FACTOR=1.35;exports.LINE_FACTOR=LINE_FACTOR;var LINE_DESCENT_FACTOR=0.35;exports.LINE_DESCENT_FACTOR=LINE_DESCENT_FACTOR;var BASELINE_FACTOR=LINE_DESCENT_FACTOR/LINE_FACTOR;exports.BASELINE_FACTOR=BASELINE_FACTOR;var RenderingIntentFlag={ANY:0x01,DISPLAY:0x02,PRINT:0x04,SAVE:0x08,ANNOTATIONS_FORMS:0x10,ANNOTATIONS_STORAGE:0x20,ANNOTATIONS_DISABLE:0x40,OPLIST:0x100};exports.RenderingIntentFlag=RenderingIntentFlag;var AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};exports.AnnotationMode=AnnotationMode;var AnnotationEditorPrefix="pdfjs_internal_editor_";exports.AnnotationEditorPrefix=AnnotationEditorPrefix;var AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};exports.AnnotationEditorType=AnnotationEditorType;var AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};exports.AnnotationEditorParamsType=AnnotationEditorParamsType;var PermissionFlag={PRINT:0x04,MODIFY_CONTENTS:0x08,COPY:0x10,MODIFY_ANNOTATIONS:0x20,FILL_INTERACTIVE_FORMS:0x100,COPY_FOR_ACCESSIBILITY:0x200,ASSEMBLE:0x400,PRINT_HIGH_QUALITY:0x800};exports.PermissionFlag=PermissionFlag;var TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};exports.TextRenderingMode=TextRenderingMode;var ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};exports.ImageKind=ImageKind;var AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};exports.AnnotationType=AnnotationType;var AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};exports.AnnotationStateModelType=AnnotationStateModelType;var AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};exports.AnnotationMarkedState=AnnotationMarkedState;var AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};exports.AnnotationReviewState=AnnotationReviewState;var AnnotationReplyType={GROUP:"Group",REPLY:"R"};exports.AnnotationReplyType=AnnotationReplyType;var AnnotationFlag={INVISIBLE:0x01,HIDDEN:0x02,PRINT:0x04,NOZOOM:0x08,NOROTATE:0x10,NOVIEW:0x20,READONLY:0x40,LOCKED:0x80,TOGGLENOVIEW:0x100,LOCKEDCONTENTS:0x200};exports.AnnotationFlag=AnnotationFlag;var AnnotationFieldFlag={READONLY:0x0000001,REQUIRED:0x0000002,NOEXPORT:0x0000004,MULTILINE:0x0001000,PASSWORD:0x0002000,NOTOGGLETOOFF:0x0004000,RADIO:0x0008000,PUSHBUTTON:0x0010000,COMBO:0x0020000,EDIT:0x0040000,SORT:0x0080000,FILESELECT:0x0100000,MULTISELECT:0x0200000,DONOTSPELLCHECK:0x0400000,DONOTSCROLL:0x0800000,COMB:0x1000000,RICHTEXT:0x2000000,RADIOSINUNISON:0x2000000,COMMITONSELCHANGE:0x4000000};exports.AnnotationFieldFlag=AnnotationFieldFlag;var AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};exports.AnnotationBorderStyleType=AnnotationBorderStyleType;var AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};exports.AnnotationActionEventType=AnnotationActionEventType;var DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};exports.DocumentActionEventType=DocumentActionEventType;var PageActionEventType={O:"PageOpen",C:"PageClose"};exports.PageActionEventType=PageActionEventType;var VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};exports.VerbosityLevel=VerbosityLevel;var CMapCompressionType={NONE:0,BINARY:1};exports.CMapCompressionType=CMapCompressionType;var OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};exports.OPS=OPS;var PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};exports.PasswordResponses=PasswordResponses;var verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){if(Number.isInteger(level)){verbosity=level;}}function getVerbosityLevel(){return verbosity;}function info(msg){if(verbosity>=VerbosityLevel.INFOS){if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){console.log("Info: ".concat(msg));}else if(Window&&globalThis.ngxConsole){globalThis.ngxConsole.log("Info: ".concat(msg));}else{console.log("Info: ".concat(msg));}}}function warn(msg){if(verbosity>=VerbosityLevel.WARNINGS){if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){console.log("Warning: ".concat(msg));}else if(Window&&globalThis.ngxConsole){globalThis.ngxConsole.log("Warning: ".concat(msg));}else{console.log("Warning: ".concat(msg));}}}function unreachable(msg){throw new Error(msg);}function assert(cond,msg){if(!cond){unreachable(msg);}}function _isValidProtocol(url){if(!url){return false;}switch(url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":case"capacitor":return true;default:return false;}}function createValidAbsoluteUrl(url){var baseUrl=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!url){return null;}try{if(options&&typeof url==="string"){if(options.addDefaultProtocol&&url.startsWith("www.")){var dots=url.match(/\./g);if(dots&&dots.length>=2){url="http://".concat(url);}}if(options.tryConvertEncoding){try{url=stringToUTF8String(url);}catch(ex){}}}var absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(_isValidProtocol(absoluteUrl)){return absoluteUrl;}}catch(ex){}return null;}function shadow(obj,prop,value){var nonSerializable=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;Object.defineProperty(obj,prop,{value:value,enumerable:!nonSerializable,configurable:true,writable:false});return value;}var BaseException=function BaseExceptionClosure(){function BaseException(message,name){if(this.constructor===BaseException){unreachable("Cannot initialize BaseException.");}this.message=message;this.name=name;}BaseException.prototype=new Error();BaseException.constructor=BaseException;return BaseException;}();exports.BaseException=BaseException;var PasswordException=/*#__PURE__*/function(_BaseException){_inherits(PasswordException,_BaseException);var _super=_createSuper(PasswordException);function PasswordException(msg,code){var _this;_classCallCheck(this,PasswordException);_this=_super.call(this,msg,"PasswordException");_this.code=code;return _this;}return _createClass(PasswordException);}(BaseException);exports.PasswordException=PasswordException;var UnknownErrorException=/*#__PURE__*/function(_BaseException2){_inherits(UnknownErrorException,_BaseException2);var _super2=_createSuper(UnknownErrorException);function UnknownErrorException(msg,details){var _this2;_classCallCheck(this,UnknownErrorException);_this2=_super2.call(this,msg,"UnknownErrorException");_this2.details=details;return _this2;}return _createClass(UnknownErrorException);}(BaseException);exports.UnknownErrorException=UnknownErrorException;var InvalidPDFException=/*#__PURE__*/function(_BaseException3){_inherits(InvalidPDFException,_BaseException3);var _super3=_createSuper(InvalidPDFException);function InvalidPDFException(msg){_classCallCheck(this,InvalidPDFException);return _super3.call(this,msg,"InvalidPDFException");}return _createClass(InvalidPDFException);}(BaseException);exports.InvalidPDFException=InvalidPDFException;var MissingPDFException=/*#__PURE__*/function(_BaseException4){_inherits(MissingPDFException,_BaseException4);var _super4=_createSuper(MissingPDFException);function MissingPDFException(msg){_classCallCheck(this,MissingPDFException);return _super4.call(this,msg,"MissingPDFException");}return _createClass(MissingPDFException);}(BaseException);exports.MissingPDFException=MissingPDFException;var UnexpectedResponseException=/*#__PURE__*/function(_BaseException5){_inherits(UnexpectedResponseException,_BaseException5);var _super5=_createSuper(UnexpectedResponseException);function UnexpectedResponseException(msg,status){var _this3;_classCallCheck(this,UnexpectedResponseException);_this3=_super5.call(this,msg,"UnexpectedResponseException");_this3.status=status;return _this3;}return _createClass(UnexpectedResponseException);}(BaseException);exports.UnexpectedResponseException=UnexpectedResponseException;var FormatError=/*#__PURE__*/function(_BaseException6){_inherits(FormatError,_BaseException6);var _super6=_createSuper(FormatError);function FormatError(msg){_classCallCheck(this,FormatError);return _super6.call(this,msg,"FormatError");}return _createClass(FormatError);}(BaseException);exports.FormatError=FormatError;var AbortException=/*#__PURE__*/function(_BaseException7){_inherits(AbortException,_BaseException7);var _super7=_createSuper(AbortException);function AbortException(msg){_classCallCheck(this,AbortException);return _super7.call(this,msg,"AbortException");}return _createClass(AbortException);}(BaseException);exports.AbortException=AbortException;function bytesToString(bytes){if(_typeof(bytes)!=="object"||bytes===null||bytes.length===undefined){unreachable("Invalid argument for bytesToString");}var length=bytes.length;var MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT){return String.fromCharCode.apply(null,bytes);}var strBuf=[];for(var i=0;i<length;i+=MAX_ARGUMENT_COUNT){var chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length);var chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk));}return strBuf.join("");}function stringToBytes(str){if(typeof str!=="string"){unreachable("Invalid argument for stringToBytes");}var length=str.length;var bytes=new Uint8Array(length);for(var i=0;i<length;++i){bytes[i]=str.charCodeAt(i)&0xff;}return bytes;}function string32(value){return String.fromCharCode(value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff);}function objectSize(obj){return Object.keys(obj).length;}function objectFromMap(map){var obj=Object.create(null);var _iterator=_createForOfIteratorHelper(map),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];obj[key]=value;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return obj;}function isLittleEndian(){var buffer8=new Uint8Array(4);buffer8[0]=1;var view32=new Uint32Array(buffer8.buffer,0,1);return view32[0]===1;}function isEvalSupported(){try{new Function("");return true;}catch(e){return false;}}var FeatureTest=/*#__PURE__*/function(){function FeatureTest(){_classCallCheck(this,FeatureTest);}_createClass(FeatureTest,null,[{key:"isLittleEndian",get:function get(){return shadow(this,"isLittleEndian",isLittleEndian());}},{key:"isEvalSupported",get:function get(){return shadow(this,"isEvalSupported",isEvalSupported());}},{key:"isOffscreenCanvasSupported",get:function get(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!=="undefined");}},{key:"platform",get:function get(){if(typeof navigator==="undefined"){return shadow(this,"platform",{isWin:false,isMac:false});}return shadow(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")});}}]);return FeatureTest;}();exports.FeatureTest=FeatureTest;var hexNumbers=_toConsumableArray(Array(256).keys()).map(function(n){return n.toString(16).padStart(2,"0");});var Util=/*#__PURE__*/function(){function Util(){_classCallCheck(this,Util);}_createClass(Util,null,[{key:"makeHexColor",value:function makeHexColor(r,g,b){return"#".concat(hexNumbers[r]).concat(hexNumbers[g]).concat(hexNumbers[b]);}},{key:"scaleMinMax",value:function scaleMinMax(transform,minMax){var temp;if(transform[0]){if(transform[0]<0){temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;}minMax[0]*=transform[0];minMax[1]*=transform[0];if(transform[3]<0){temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;}minMax[2]*=transform[3];minMax[3]*=transform[3];}else{temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;if(transform[1]<0){temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;}minMax[2]*=transform[1];minMax[3]*=transform[1];if(transform[2]<0){temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;}minMax[0]*=transform[2];minMax[1]*=transform[2];}minMax[0]+=transform[4];minMax[1]+=transform[4];minMax[2]+=transform[5];minMax[3]+=transform[5];}},{key:"transform",value:function transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]];}},{key:"applyTransform",value:function applyTransform(p,m){var xt=p[0]*m[0]+p[1]*m[2]+m[4];var yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt];}},{key:"applyInverseTransform",value:function applyInverseTransform(p,m){var d=m[0]*m[3]-m[1]*m[2];var xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d;var yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt];}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(r,m){var p1=Util.applyTransform(r,m);var p2=Util.applyTransform(r.slice(2,4),m);var p3=Util.applyTransform([r[0],r[3]],m);var p4=Util.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])];}},{key:"inverseTransform",value:function inverseTransform(m){var d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d];}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(m){var transpose=[m[0],m[2],m[1],m[3]];var a=m[0]*transpose[0]+m[1]*transpose[2];var b=m[0]*transpose[1]+m[1]*transpose[3];var c=m[2]*transpose[0]+m[3]*transpose[2];var d=m[2]*transpose[1]+m[3]*transpose[3];var first=(a+d)/2;var second=Math.sqrt(Math.pow(a+d,2)-4*(a*d-c*b))/2;var sx=first+second||1;var sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)];}},{key:"normalizeRect",value:function normalizeRect(rect){var r=rect.slice(0);if(rect[0]>rect[2]){r[0]=rect[2];r[2]=rect[0];}if(rect[1]>rect[3]){r[1]=rect[3];r[3]=rect[1];}return r;}},{key:"intersect",value:function intersect(rect1,rect2){var xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2]));var xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh){return null;}var yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3]));var yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));if(yLow>yHigh){return null;}return[xLow,yLow,xHigh,yHigh];}},{key:"bezierBoundingBox",value:function bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3){var tvalues=[],bounds=[[],[]];var a,b,c,t,t1,t2,b2ac,sqrtb2ac;for(var i=0;i<2;++i){if(i===0){b=6*x0-12*x1+6*x2;a=-3*x0+9*x1-9*x2+3*x3;c=3*x1-3*x0;}else{b=6*y0-12*y1+6*y2;a=-3*y0+9*y1-9*y2+3*y3;c=3*y1-3*y0;}if(Math.abs(a)<1e-12){if(Math.abs(b)<1e-12){continue;}t=-c/b;if(0<t&&t<1){tvalues.push(t);}continue;}b2ac=b*b-4*c*a;sqrtb2ac=Math.sqrt(b2ac);if(b2ac<0){continue;}t1=(-b+sqrtb2ac)/(2*a);if(0<t1&&t1<1){tvalues.push(t1);}t2=(-b-sqrtb2ac)/(2*a);if(0<t2&&t2<1){tvalues.push(t2);}}var j=tvalues.length,mt;var jlen=j;while(j--){t=tvalues[j];mt=1-t;bounds[0][j]=mt*mt*mt*x0+3*mt*mt*t*x1+3*mt*t*t*x2+t*t*t*x3;bounds[1][j]=mt*mt*mt*y0+3*mt*mt*t*y1+3*mt*t*t*y2+t*t*t*y3;}bounds[0][jlen]=x0;bounds[1][jlen]=y0;bounds[0][jlen+1]=x3;bounds[1][jlen+1]=y3;bounds[0].length=bounds[1].length=jlen+2;return[Math.min.apply(Math,_toConsumableArray(bounds[0])),Math.min.apply(Math,_toConsumableArray(bounds[1])),Math.max.apply(Math,_toConsumableArray(bounds[0])),Math.max.apply(Math,_toConsumableArray(bounds[1]))];}}]);return Util;}();exports.Util=Util;var PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2d8,0x2c7,0x2c6,0x2d9,0x2dd,0x2db,0x2da,0x2dc,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2022,0x2020,0x2021,0x2026,0x2014,0x2013,0x192,0x2044,0x2039,0x203a,0x2212,0x2030,0x201e,0x201c,0x201d,0x2018,0x2019,0x201a,0x2122,0xfb01,0xfb02,0x141,0x152,0x160,0x178,0x17d,0x131,0x142,0x153,0x161,0x17e,0,0x20ac];function stringToPDFString(str){if(str[0]>="\xEF"){var encoding;if(str[0]==="\xFE"&&str[1]==="\xFF"){encoding="utf-16be";}else if(str[0]==="\xFF"&&str[1]==="\xFE"){encoding="utf-16le";}else if(str[0]==="\xEF"&&str[1]==="\xBB"&&str[2]==="\xBF"){encoding="utf-8";}if(encoding){try{var decoder=new TextDecoder(encoding,{fatal:true});var buffer=stringToBytes(str);return decoder.decode(buffer);}catch(ex){warn("stringToPDFString: \"".concat(ex,"\"."));}}}var strBuf=[];for(var i=0,ii=str.length;i<ii;i++){var code=PDFStringTranslateTable[str.charCodeAt(i)];strBuf.push(code?String.fromCharCode(code):str.charAt(i));}return strBuf.join("");}function stringToUTF8String(str){return decodeURIComponent(escape(str));}function utf8StringToString(str){return unescape(encodeURIComponent(str));}function isArrayBuffer(v){return _typeof(v)==="object"&&v!==null&&v.byteLength!==undefined;}function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length){return false;}for(var i=0,ii=arr1.length;i<ii;i++){if(arr1[i]!==arr2[i]){return false;}}return true;}function getModificationDate(){var date=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date();var buffer=[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")];return buffer.join("");}function createPromiseCapability(){var capability=Object.create(null);var isSettled=false;Object.defineProperty(capability,"settled",{get:function get(){return isSettled;}});capability.promise=new Promise(function(resolve,reject){capability.resolve=function(data){isSettled=true;resolve(data);};capability.reject=function(reason){isSettled=true;reject(reason);};});return capability;}

/***/ }),
/* 2 */
/***/ ((__unused_webpack_module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";
var isNodeJS=false;(function checkDOMMatrix(){if(globalThis.DOMMatrix||!isNodeJS){return;}globalThis.DOMMatrix=require("canvas").DOMMatrix;})();(function checkPath2D(){if(globalThis.Path2D||!isNodeJS){return;}var _non_webpack_require=require("canvas"),CanvasRenderingContext2D=_non_webpack_require.CanvasRenderingContext2D;var _non_webpack_require2=require("path2d-polyfill"),polyfillPath2D=_non_webpack_require2.polyfillPath2D;globalThis.CanvasRenderingContext2D=CanvasRenderingContext2D;polyfillPath2D(globalThis);})();(function checkReadableStream(){if(globalThis.ReadableStream||!isNodeJS){return;}globalThis.ReadableStream=require("web-streams-polyfill/dist/ponyfill.js").ReadableStream;})();(function checkArrayAt(){if(Array.prototype.at){return;}__w_pdfjs_require__(3);})();(function checkTypedArrayAt(){if(Uint8Array.prototype.at){return;}__w_pdfjs_require__(77);})();(function checkStructuredClone(){if(globalThis.structuredClone){return;}__w_pdfjs_require__(89);})();

/***/ }),
/* 3 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

__w_pdfjs_require__(4);
var entryUnbind = __w_pdfjs_require__(76);
module.exports = entryUnbind('Array', 'at');

/***/ }),
/* 4 */
/***/ ((__unused_webpack_module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var $ = __w_pdfjs_require__(5);
var toObject = __w_pdfjs_require__(42);
var lengthOfArrayLike = __w_pdfjs_require__(66);
var toIntegerOrInfinity = __w_pdfjs_require__(64);
var addToUnscopables = __w_pdfjs_require__(71);
$({
 target: 'Array',
 proto: true
}, {
 at: function at(index) {
  var O = toObject(this);
  var len = lengthOfArrayLike(O);
  var relativeIndex = toIntegerOrInfinity(index);
  var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;
  return k < 0 || k >= len ? undefined : O[k];
 }
});
addToUnscopables('at');

/***/ }),
/* 5 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var global = __w_pdfjs_require__(6);
var getOwnPropertyDescriptor = (__w_pdfjs_require__(7).f);
var createNonEnumerableProperty = __w_pdfjs_require__(46);
var defineBuiltIn = __w_pdfjs_require__(50);
var defineGlobalProperty = __w_pdfjs_require__(40);
var copyConstructorProperties = __w_pdfjs_require__(58);
var isForced = __w_pdfjs_require__(70);
module.exports = function (options, source) {
 var TARGET = options.target;
 var GLOBAL = options.global;
 var STATIC = options.stat;
 var FORCED, target, key, targetProperty, sourceProperty, descriptor;
 if (GLOBAL) {
  target = global;
 } else if (STATIC) {
  target = global[TARGET] || defineGlobalProperty(TARGET, {});
 } else {
  target = (global[TARGET] || {}).prototype;
 }
 if (target)
  for (key in source) {
   sourceProperty = source[key];
   if (options.dontCallGetSet) {
    descriptor = getOwnPropertyDescriptor(target, key);
    targetProperty = descriptor && descriptor.value;
   } else
    targetProperty = target[key];
   FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);
   if (!FORCED && targetProperty !== undefined) {
    if (typeof sourceProperty == typeof targetProperty)
     continue;
    copyConstructorProperties(sourceProperty, targetProperty);
   }
   if (options.sham || targetProperty && targetProperty.sham) {
    createNonEnumerableProperty(sourceProperty, 'sham', true);
   }
   defineBuiltIn(target, key, sourceProperty, options);
  }
};

/***/ }),
/* 6 */
/***/ ((module) => {

var check = function (it) {
 return it && it.Math == Math && it;
};
module.exports = check(typeof globalThis == 'object' && globalThis) || check(typeof window == 'object' && window) || check(typeof self == 'object' && self) || check(typeof global == 'object' && global) || (function () {
 return this;
}()) || Function('return this')();

/***/ }),
/* 7 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

var DESCRIPTORS = __w_pdfjs_require__(8);
var call = __w_pdfjs_require__(10);
var propertyIsEnumerableModule = __w_pdfjs_require__(12);
var createPropertyDescriptor = __w_pdfjs_require__(13);
var toIndexedObject = __w_pdfjs_require__(14);
var toPropertyKey = __w_pdfjs_require__(20);
var hasOwn = __w_pdfjs_require__(41);
var IE8_DOM_DEFINE = __w_pdfjs_require__(44);
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
exports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
 O = toIndexedObject(O);
 P = toPropertyKey(P);
 if (IE8_DOM_DEFINE)
  try {
   return $getOwnPropertyDescriptor(O, P);
  } catch (error) {
  }
 if (hasOwn(O, P))
  return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);
};

/***/ }),
/* 8 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var fails = __w_pdfjs_require__(9);
module.exports = !fails(function () {
 return Object.defineProperty({}, 1, {
  get: function () {
   return 7;
  }
 })[1] != 7;
});

/***/ }),
/* 9 */
/***/ ((module) => {

module.exports = function (exec) {
 try {
  return !!exec();
 } catch (error) {
  return true;
 }
};

/***/ }),
/* 10 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var NATIVE_BIND = __w_pdfjs_require__(11);
var call = Function.prototype.call;
module.exports = NATIVE_BIND ? call.bind(call) : function () {
 return call.apply(call, arguments);
};

/***/ }),
/* 11 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var fails = __w_pdfjs_require__(9);
module.exports = !fails(function () {
 var test = function () {
 }.bind();
 return typeof test != 'function' || test.hasOwnProperty('prototype');
});

/***/ }),
/* 12 */
/***/ ((__unused_webpack_module, exports) => {

"use strict";

var $propertyIsEnumerable = {}.propertyIsEnumerable;
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);
exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
 var descriptor = getOwnPropertyDescriptor(this, V);
 return !!descriptor && descriptor.enumerable;
} : $propertyIsEnumerable;

/***/ }),
/* 13 */
/***/ ((module) => {

module.exports = function (bitmap, value) {
 return {
  enumerable: !(bitmap & 1),
  configurable: !(bitmap & 2),
  writable: !(bitmap & 4),
  value: value
 };
};

/***/ }),
/* 14 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var IndexedObject = __w_pdfjs_require__(15);
var requireObjectCoercible = __w_pdfjs_require__(18);
module.exports = function (it) {
 return IndexedObject(requireObjectCoercible(it));
};

/***/ }),
/* 15 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
var fails = __w_pdfjs_require__(9);
var classof = __w_pdfjs_require__(17);
var $Object = Object;
var split = uncurryThis(''.split);
module.exports = fails(function () {
 return !$Object('z').propertyIsEnumerable(0);
}) ? function (it) {
 return classof(it) == 'String' ? split(it, '') : $Object(it);
} : $Object;

/***/ }),
/* 16 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var NATIVE_BIND = __w_pdfjs_require__(11);
var FunctionPrototype = Function.prototype;
var call = FunctionPrototype.call;
var uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);
module.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {
 return function () {
  return call.apply(fn, arguments);
 };
};

/***/ }),
/* 17 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
var toString = uncurryThis({}.toString);
var stringSlice = uncurryThis(''.slice);
module.exports = function (it) {
 return stringSlice(toString(it), 8, -1);
};

/***/ }),
/* 18 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var isNullOrUndefined = __w_pdfjs_require__(19);
var $TypeError = TypeError;
module.exports = function (it) {
 if (isNullOrUndefined(it))
  throw $TypeError("Can't call method on " + it);
 return it;
};

/***/ }),
/* 19 */
/***/ ((module) => {

module.exports = function (it) {
 return it === null || it === undefined;
};

/***/ }),
/* 20 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var toPrimitive = __w_pdfjs_require__(21);
var isSymbol = __w_pdfjs_require__(25);
module.exports = function (argument) {
 var key = toPrimitive(argument, 'string');
 return isSymbol(key) ? key : key + '';
};

/***/ }),
/* 21 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var call = __w_pdfjs_require__(10);
var isObject = __w_pdfjs_require__(22);
var isSymbol = __w_pdfjs_require__(25);
var getMethod = __w_pdfjs_require__(32);
var ordinaryToPrimitive = __w_pdfjs_require__(35);
var wellKnownSymbol = __w_pdfjs_require__(36);
var $TypeError = TypeError;
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');
module.exports = function (input, pref) {
 if (!isObject(input) || isSymbol(input))
  return input;
 var exoticToPrim = getMethod(input, TO_PRIMITIVE);
 var result;
 if (exoticToPrim) {
  if (pref === undefined)
   pref = 'default';
  result = call(exoticToPrim, input, pref);
  if (!isObject(result) || isSymbol(result))
   return result;
  throw $TypeError("Can't convert object to primitive value");
 }
 if (pref === undefined)
  pref = 'number';
 return ordinaryToPrimitive(input, pref);
};

/***/ }),
/* 22 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var isCallable = __w_pdfjs_require__(23);
var $documentAll = __w_pdfjs_require__(24);
var documentAll = $documentAll.all;
module.exports = $documentAll.IS_HTMLDDA ? function (it) {
 return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;
} : function (it) {
 return typeof it == 'object' ? it !== null : isCallable(it);
};

/***/ }),
/* 23 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var $documentAll = __w_pdfjs_require__(24);
var documentAll = $documentAll.all;
module.exports = $documentAll.IS_HTMLDDA ? function (argument) {
 return typeof argument == 'function' || argument === documentAll;
} : function (argument) {
 return typeof argument == 'function';
};

/***/ }),
/* 24 */
/***/ ((module) => {

var documentAll = typeof document == 'object' && document.all;
var IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;
module.exports = {
 all: documentAll,
 IS_HTMLDDA: IS_HTMLDDA
};

/***/ }),
/* 25 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var getBuiltIn = __w_pdfjs_require__(26);
var isCallable = __w_pdfjs_require__(23);
var isPrototypeOf = __w_pdfjs_require__(27);
var USE_SYMBOL_AS_UID = __w_pdfjs_require__(28);
var $Object = Object;
module.exports = USE_SYMBOL_AS_UID ? function (it) {
 return typeof it == 'symbol';
} : function (it) {
 var $Symbol = getBuiltIn('Symbol');
 return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));
};

/***/ }),
/* 26 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var global = __w_pdfjs_require__(6);
var isCallable = __w_pdfjs_require__(23);
var aFunction = function (argument) {
 return isCallable(argument) ? argument : undefined;
};
module.exports = function (namespace, method) {
 return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];
};

/***/ }),
/* 27 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
module.exports = uncurryThis({}.isPrototypeOf);

/***/ }),
/* 28 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var NATIVE_SYMBOL = __w_pdfjs_require__(29);
module.exports = NATIVE_SYMBOL && !Symbol.sham && typeof Symbol.iterator == 'symbol';

/***/ }),
/* 29 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var V8_VERSION = __w_pdfjs_require__(30);
var fails = __w_pdfjs_require__(9);
module.exports = !!Object.getOwnPropertySymbols && !fails(function () {
 var symbol = Symbol();
 return !String(symbol) || !(Object(symbol) instanceof Symbol) || !Symbol.sham && V8_VERSION && V8_VERSION < 41;
});

/***/ }),
/* 30 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var global = __w_pdfjs_require__(6);
var userAgent = __w_pdfjs_require__(31);
var process = global.process;
var Deno = global.Deno;
var versions = process && process.versions || Deno && Deno.version;
var v8 = versions && versions.v8;
var match, version;
if (v8) {
 match = v8.split('.');
 version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);
}
if (!version && userAgent) {
 match = userAgent.match(/Edge\/(\d+)/);
 if (!match || match[1] >= 74) {
  match = userAgent.match(/Chrome\/(\d+)/);
  if (match)
   version = +match[1];
 }
}
module.exports = version;

/***/ }),
/* 31 */
/***/ ((module) => {

module.exports = typeof navigator != 'undefined' && String(navigator.userAgent) || '';

/***/ }),
/* 32 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var aCallable = __w_pdfjs_require__(33);
var isNullOrUndefined = __w_pdfjs_require__(19);
module.exports = function (V, P) {
 var func = V[P];
 return isNullOrUndefined(func) ? undefined : aCallable(func);
};

/***/ }),
/* 33 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var isCallable = __w_pdfjs_require__(23);
var tryToString = __w_pdfjs_require__(34);
var $TypeError = TypeError;
module.exports = function (argument) {
 if (isCallable(argument))
  return argument;
 throw $TypeError(tryToString(argument) + ' is not a function');
};

/***/ }),
/* 34 */
/***/ ((module) => {

var $String = String;
module.exports = function (argument) {
 try {
  return $String(argument);
 } catch (error) {
  return 'Object';
 }
};

/***/ }),
/* 35 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var call = __w_pdfjs_require__(10);
var isCallable = __w_pdfjs_require__(23);
var isObject = __w_pdfjs_require__(22);
var $TypeError = TypeError;
module.exports = function (input, pref) {
 var fn, val;
 if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input)))
  return val;
 if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input)))
  return val;
 if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input)))
  return val;
 throw $TypeError("Can't convert object to primitive value");
};

/***/ }),
/* 36 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var global = __w_pdfjs_require__(6);
var shared = __w_pdfjs_require__(37);
var hasOwn = __w_pdfjs_require__(41);
var uid = __w_pdfjs_require__(43);
var NATIVE_SYMBOL = __w_pdfjs_require__(29);
var USE_SYMBOL_AS_UID = __w_pdfjs_require__(28);
var Symbol = global.Symbol;
var WellKnownSymbolsStore = shared('wks');
var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;
module.exports = function (name) {
 if (!hasOwn(WellKnownSymbolsStore, name)) {
  WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name) ? Symbol[name] : createWellKnownSymbol('Symbol.' + name);
 }
 return WellKnownSymbolsStore[name];
};

/***/ }),
/* 37 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var IS_PURE = __w_pdfjs_require__(38);
var store = __w_pdfjs_require__(39);
(module.exports = function (key, value) {
 return store[key] || (store[key] = value !== undefined ? value : {});
})('versions', []).push({
 version: '3.30.0',
 mode: IS_PURE ? 'pure' : 'global',
 copyright: 'Â© 2014-2023 Denis Pushkarev (zloirock.ru)',
 license: 'https://github.com/zloirock/core-js/blob/v3.30.0/LICENSE',
 source: 'https://github.com/zloirock/core-js'
});

/***/ }),
/* 38 */
/***/ ((module) => {

module.exports = false;

/***/ }),
/* 39 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var global = __w_pdfjs_require__(6);
var defineGlobalProperty = __w_pdfjs_require__(40);
var SHARED = '__core-js_shared__';
var store = global[SHARED] || defineGlobalProperty(SHARED, {});
module.exports = store;

/***/ }),
/* 40 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var global = __w_pdfjs_require__(6);
var defineProperty = Object.defineProperty;
module.exports = function (key, value) {
 try {
  defineProperty(global, key, {
   value: value,
   configurable: true,
   writable: true
  });
 } catch (error) {
  global[key] = value;
 }
 return value;
};

/***/ }),
/* 41 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
var toObject = __w_pdfjs_require__(42);
var hasOwnProperty = uncurryThis({}.hasOwnProperty);
module.exports = Object.hasOwn || function hasOwn(it, key) {
 return hasOwnProperty(toObject(it), key);
};

/***/ }),
/* 42 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var requireObjectCoercible = __w_pdfjs_require__(18);
var $Object = Object;
module.exports = function (argument) {
 return $Object(requireObjectCoercible(argument));
};

/***/ }),
/* 43 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
var id = 0;
var postfix = Math.random();
var toString = uncurryThis(1.0.toString);
module.exports = function (key) {
 return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);
};

/***/ }),
/* 44 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var DESCRIPTORS = __w_pdfjs_require__(8);
var fails = __w_pdfjs_require__(9);
var createElement = __w_pdfjs_require__(45);
module.exports = !DESCRIPTORS && !fails(function () {
 return Object.defineProperty(createElement('div'), 'a', {
  get: function () {
   return 7;
  }
 }).a != 7;
});

/***/ }),
/* 45 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var global = __w_pdfjs_require__(6);
var isObject = __w_pdfjs_require__(22);
var document = global.document;
var EXISTS = isObject(document) && isObject(document.createElement);
module.exports = function (it) {
 return EXISTS ? document.createElement(it) : {};
};

/***/ }),
/* 46 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var DESCRIPTORS = __w_pdfjs_require__(8);
var definePropertyModule = __w_pdfjs_require__(47);
var createPropertyDescriptor = __w_pdfjs_require__(13);
module.exports = DESCRIPTORS ? function (object, key, value) {
 return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
} : function (object, key, value) {
 object[key] = value;
 return object;
};

/***/ }),
/* 47 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

var DESCRIPTORS = __w_pdfjs_require__(8);
var IE8_DOM_DEFINE = __w_pdfjs_require__(44);
var V8_PROTOTYPE_DEFINE_BUG = __w_pdfjs_require__(48);
var anObject = __w_pdfjs_require__(49);
var toPropertyKey = __w_pdfjs_require__(20);
var $TypeError = TypeError;
var $defineProperty = Object.defineProperty;
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var ENUMERABLE = 'enumerable';
var CONFIGURABLE = 'configurable';
var WRITABLE = 'writable';
exports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {
 anObject(O);
 P = toPropertyKey(P);
 anObject(Attributes);
 if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {
  var current = $getOwnPropertyDescriptor(O, P);
  if (current && current[WRITABLE]) {
   O[P] = Attributes.value;
   Attributes = {
    configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],
    enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],
    writable: false
   };
  }
 }
 return $defineProperty(O, P, Attributes);
} : $defineProperty : function defineProperty(O, P, Attributes) {
 anObject(O);
 P = toPropertyKey(P);
 anObject(Attributes);
 if (IE8_DOM_DEFINE)
  try {
   return $defineProperty(O, P, Attributes);
  } catch (error) {
  }
 if ('get' in Attributes || 'set' in Attributes)
  throw $TypeError('Accessors not supported');
 if ('value' in Attributes)
  O[P] = Attributes.value;
 return O;
};

/***/ }),
/* 48 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var DESCRIPTORS = __w_pdfjs_require__(8);
var fails = __w_pdfjs_require__(9);
module.exports = DESCRIPTORS && fails(function () {
 return Object.defineProperty(function () {
 }, 'prototype', {
  value: 42,
  writable: false
 }).prototype != 42;
});

/***/ }),
/* 49 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var isObject = __w_pdfjs_require__(22);
var $String = String;
var $TypeError = TypeError;
module.exports = function (argument) {
 if (isObject(argument))
  return argument;
 throw $TypeError($String(argument) + ' is not an object');
};

/***/ }),
/* 50 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var isCallable = __w_pdfjs_require__(23);
var definePropertyModule = __w_pdfjs_require__(47);
var makeBuiltIn = __w_pdfjs_require__(51);
var defineGlobalProperty = __w_pdfjs_require__(40);
module.exports = function (O, key, value, options) {
 if (!options)
  options = {};
 var simple = options.enumerable;
 var name = options.name !== undefined ? options.name : key;
 if (isCallable(value))
  makeBuiltIn(value, name, options);
 if (options.global) {
  if (simple)
   O[key] = value;
  else
   defineGlobalProperty(key, value);
 } else {
  try {
   if (!options.unsafe)
    delete O[key];
   else if (O[key])
    simple = true;
  } catch (error) {
  }
  if (simple)
   O[key] = value;
  else
   definePropertyModule.f(O, key, {
    value: value,
    enumerable: false,
    configurable: !options.nonConfigurable,
    writable: !options.nonWritable
   });
 }
 return O;
};

/***/ }),
/* 51 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
var fails = __w_pdfjs_require__(9);
var isCallable = __w_pdfjs_require__(23);
var hasOwn = __w_pdfjs_require__(41);
var DESCRIPTORS = __w_pdfjs_require__(8);
var CONFIGURABLE_FUNCTION_NAME = (__w_pdfjs_require__(52).CONFIGURABLE);
var inspectSource = __w_pdfjs_require__(53);
var InternalStateModule = __w_pdfjs_require__(54);
var enforceInternalState = InternalStateModule.enforce;
var getInternalState = InternalStateModule.get;
var $String = String;
var defineProperty = Object.defineProperty;
var stringSlice = uncurryThis(''.slice);
var replace = uncurryThis(''.replace);
var join = uncurryThis([].join);
var CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {
 return defineProperty(function () {
 }, 'length', { value: 8 }).length !== 8;
});
var TEMPLATE = String(String).split('String');
var makeBuiltIn = module.exports = function (value, name, options) {
 if (stringSlice($String(name), 0, 7) === 'Symbol(') {
  name = '[' + replace($String(name), /^Symbol\(([^)]*)\)/, '$1') + ']';
 }
 if (options && options.getter)
  name = 'get ' + name;
 if (options && options.setter)
  name = 'set ' + name;
 if (!hasOwn(value, 'name') || CONFIGURABLE_FUNCTION_NAME && value.name !== name) {
  if (DESCRIPTORS)
   defineProperty(value, 'name', {
    value: name,
    configurable: true
   });
  else
   value.name = name;
 }
 if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {
  defineProperty(value, 'length', { value: options.arity });
 }
 try {
  if (options && hasOwn(options, 'constructor') && options.constructor) {
   if (DESCRIPTORS)
    defineProperty(value, 'prototype', { writable: false });
  } else if (value.prototype)
   value.prototype = undefined;
 } catch (error) {
 }
 var state = enforceInternalState(value);
 if (!hasOwn(state, 'source')) {
  state.source = join(TEMPLATE, typeof name == 'string' ? name : '');
 }
 return value;
};
Function.prototype.toString = makeBuiltIn(function toString() {
 return isCallable(this) && getInternalState(this).source || inspectSource(this);
}, 'toString');

/***/ }),
/* 52 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var DESCRIPTORS = __w_pdfjs_require__(8);
var hasOwn = __w_pdfjs_require__(41);
var FunctionPrototype = Function.prototype;
var getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;
var EXISTS = hasOwn(FunctionPrototype, 'name');
var PROPER = EXISTS && function something() {
}.name === 'something';
var CONFIGURABLE = EXISTS && (!DESCRIPTORS || DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable);
module.exports = {
 EXISTS: EXISTS,
 PROPER: PROPER,
 CONFIGURABLE: CONFIGURABLE
};

/***/ }),
/* 53 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
var isCallable = __w_pdfjs_require__(23);
var store = __w_pdfjs_require__(39);
var functionToString = uncurryThis(Function.toString);
if (!isCallable(store.inspectSource)) {
 store.inspectSource = function (it) {
  return functionToString(it);
 };
}
module.exports = store.inspectSource;

/***/ }),
/* 54 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var NATIVE_WEAK_MAP = __w_pdfjs_require__(55);
var global = __w_pdfjs_require__(6);
var isObject = __w_pdfjs_require__(22);
var createNonEnumerableProperty = __w_pdfjs_require__(46);
var hasOwn = __w_pdfjs_require__(41);
var shared = __w_pdfjs_require__(39);
var sharedKey = __w_pdfjs_require__(56);
var hiddenKeys = __w_pdfjs_require__(57);
var OBJECT_ALREADY_INITIALIZED = 'Object already initialized';
var TypeError = global.TypeError;
var WeakMap = global.WeakMap;
var set, get, has;
var enforce = function (it) {
 return has(it) ? get(it) : set(it, {});
};
var getterFor = function (TYPE) {
 return function (it) {
  var state;
  if (!isObject(it) || (state = get(it)).type !== TYPE) {
   throw TypeError('Incompatible receiver, ' + TYPE + ' required');
  }
  return state;
 };
};
if (NATIVE_WEAK_MAP || shared.state) {
 var store = shared.state || (shared.state = new WeakMap());
 store.get = store.get;
 store.has = store.has;
 store.set = store.set;
 set = function (it, metadata) {
  if (store.has(it))
   throw TypeError(OBJECT_ALREADY_INITIALIZED);
  metadata.facade = it;
  store.set(it, metadata);
  return metadata;
 };
 get = function (it) {
  return store.get(it) || {};
 };
 has = function (it) {
  return store.has(it);
 };
} else {
 var STATE = sharedKey('state');
 hiddenKeys[STATE] = true;
 set = function (it, metadata) {
  if (hasOwn(it, STATE))
   throw TypeError(OBJECT_ALREADY_INITIALIZED);
  metadata.facade = it;
  createNonEnumerableProperty(it, STATE, metadata);
  return metadata;
 };
 get = function (it) {
  return hasOwn(it, STATE) ? it[STATE] : {};
 };
 has = function (it) {
  return hasOwn(it, STATE);
 };
}
module.exports = {
 set: set,
 get: get,
 has: has,
 enforce: enforce,
 getterFor: getterFor
};

/***/ }),
/* 55 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var global = __w_pdfjs_require__(6);
var isCallable = __w_pdfjs_require__(23);
var WeakMap = global.WeakMap;
module.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));

/***/ }),
/* 56 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var shared = __w_pdfjs_require__(37);
var uid = __w_pdfjs_require__(43);
var keys = shared('keys');
module.exports = function (key) {
 return keys[key] || (keys[key] = uid(key));
};

/***/ }),
/* 57 */
/***/ ((module) => {

module.exports = {};

/***/ }),
/* 58 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var hasOwn = __w_pdfjs_require__(41);
var ownKeys = __w_pdfjs_require__(59);
var getOwnPropertyDescriptorModule = __w_pdfjs_require__(7);
var definePropertyModule = __w_pdfjs_require__(47);
module.exports = function (target, source, exceptions) {
 var keys = ownKeys(source);
 var defineProperty = definePropertyModule.f;
 var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
 for (var i = 0; i < keys.length; i++) {
  var key = keys[i];
  if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {
   defineProperty(target, key, getOwnPropertyDescriptor(source, key));
  }
 }
};

/***/ }),
/* 59 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var getBuiltIn = __w_pdfjs_require__(26);
var uncurryThis = __w_pdfjs_require__(16);
var getOwnPropertyNamesModule = __w_pdfjs_require__(60);
var getOwnPropertySymbolsModule = __w_pdfjs_require__(69);
var anObject = __w_pdfjs_require__(49);
var concat = uncurryThis([].concat);
module.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {
 var keys = getOwnPropertyNamesModule.f(anObject(it));
 var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
 return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;
};

/***/ }),
/* 60 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

var internalObjectKeys = __w_pdfjs_require__(61);
var enumBugKeys = __w_pdfjs_require__(68);
var hiddenKeys = enumBugKeys.concat('length', 'prototype');
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
 return internalObjectKeys(O, hiddenKeys);
};

/***/ }),
/* 61 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
var hasOwn = __w_pdfjs_require__(41);
var toIndexedObject = __w_pdfjs_require__(14);
var indexOf = (__w_pdfjs_require__(62).indexOf);
var hiddenKeys = __w_pdfjs_require__(57);
var push = uncurryThis([].push);
module.exports = function (object, names) {
 var O = toIndexedObject(object);
 var i = 0;
 var result = [];
 var key;
 for (key in O)
  !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);
 while (names.length > i)
  if (hasOwn(O, key = names[i++])) {
   ~indexOf(result, key) || push(result, key);
  }
 return result;
};

/***/ }),
/* 62 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var toIndexedObject = __w_pdfjs_require__(14);
var toAbsoluteIndex = __w_pdfjs_require__(63);
var lengthOfArrayLike = __w_pdfjs_require__(66);
var createMethod = function (IS_INCLUDES) {
 return function ($this, el, fromIndex) {
  var O = toIndexedObject($this);
  var length = lengthOfArrayLike(O);
  var index = toAbsoluteIndex(fromIndex, length);
  var value;
  if (IS_INCLUDES && el != el)
   while (length > index) {
    value = O[index++];
    if (value != value)
     return true;
   }
  else
   for (; length > index; index++) {
    if ((IS_INCLUDES || index in O) && O[index] === el)
     return IS_INCLUDES || index || 0;
   }
  return !IS_INCLUDES && -1;
 };
};
module.exports = {
 includes: createMethod(true),
 indexOf: createMethod(false)
};

/***/ }),
/* 63 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var toIntegerOrInfinity = __w_pdfjs_require__(64);
var max = Math.max;
var min = Math.min;
module.exports = function (index, length) {
 var integer = toIntegerOrInfinity(index);
 return integer < 0 ? max(integer + length, 0) : min(integer, length);
};

/***/ }),
/* 64 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var trunc = __w_pdfjs_require__(65);
module.exports = function (argument) {
 var number = +argument;
 return number !== number || number === 0 ? 0 : trunc(number);
};

/***/ }),
/* 65 */
/***/ ((module) => {

var ceil = Math.ceil;
var floor = Math.floor;
module.exports = Math.trunc || function trunc(x) {
 var n = +x;
 return (n > 0 ? floor : ceil)(n);
};

/***/ }),
/* 66 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var toLength = __w_pdfjs_require__(67);
module.exports = function (obj) {
 return toLength(obj.length);
};

/***/ }),
/* 67 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var toIntegerOrInfinity = __w_pdfjs_require__(64);
var min = Math.min;
module.exports = function (argument) {
 return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0;
};

/***/ }),
/* 68 */
/***/ ((module) => {

module.exports = [
 'constructor',
 'hasOwnProperty',
 'isPrototypeOf',
 'propertyIsEnumerable',
 'toLocaleString',
 'toString',
 'valueOf'
];

/***/ }),
/* 69 */
/***/ ((__unused_webpack_module, exports) => {

exports.f = Object.getOwnPropertySymbols;

/***/ }),
/* 70 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var fails = __w_pdfjs_require__(9);
var isCallable = __w_pdfjs_require__(23);
var replacement = /#|\.prototype\./;
var isForced = function (feature, detection) {
 var value = data[normalize(feature)];
 return value == POLYFILL ? true : value == NATIVE ? false : isCallable(detection) ? fails(detection) : !!detection;
};
var normalize = isForced.normalize = function (string) {
 return String(string).replace(replacement, '.').toLowerCase();
};
var data = isForced.data = {};
var NATIVE = isForced.NATIVE = 'N';
var POLYFILL = isForced.POLYFILL = 'P';
module.exports = isForced;

/***/ }),
/* 71 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var wellKnownSymbol = __w_pdfjs_require__(36);
var create = __w_pdfjs_require__(72);
var defineProperty = (__w_pdfjs_require__(47).f);
var UNSCOPABLES = wellKnownSymbol('unscopables');
var ArrayPrototype = Array.prototype;
if (ArrayPrototype[UNSCOPABLES] == undefined) {
 defineProperty(ArrayPrototype, UNSCOPABLES, {
  configurable: true,
  value: create(null)
 });
}
module.exports = function (key) {
 ArrayPrototype[UNSCOPABLES][key] = true;
};

/***/ }),
/* 72 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var anObject = __w_pdfjs_require__(49);
var definePropertiesModule = __w_pdfjs_require__(73);
var enumBugKeys = __w_pdfjs_require__(68);
var hiddenKeys = __w_pdfjs_require__(57);
var html = __w_pdfjs_require__(75);
var documentCreateElement = __w_pdfjs_require__(45);
var sharedKey = __w_pdfjs_require__(56);
var GT = '>';
var LT = '<';
var PROTOTYPE = 'prototype';
var SCRIPT = 'script';
var IE_PROTO = sharedKey('IE_PROTO');
var EmptyConstructor = function () {
};
var scriptTag = function (content) {
 return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
};
var NullProtoObjectViaActiveX = function (activeXDocument) {
 activeXDocument.write(scriptTag(''));
 activeXDocument.close();
 var temp = activeXDocument.parentWindow.Object;
 activeXDocument = null;
 return temp;
};
var NullProtoObjectViaIFrame = function () {
 var iframe = documentCreateElement('iframe');
 var JS = 'java' + SCRIPT + ':';
 var iframeDocument;
 iframe.style.display = 'none';
 html.appendChild(iframe);
 iframe.src = String(JS);
 iframeDocument = iframe.contentWindow.document;
 iframeDocument.open();
 iframeDocument.write(scriptTag('document.F=Object'));
 iframeDocument.close();
 return iframeDocument.F;
};
var activeXDocument;
var NullProtoObject = function () {
 try {
  activeXDocument = new ActiveXObject('htmlfile');
 } catch (error) {
 }
 NullProtoObject = typeof document != 'undefined' ? document.domain && activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame() : NullProtoObjectViaActiveX(activeXDocument);
 var length = enumBugKeys.length;
 while (length--)
  delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
 return NullProtoObject();
};
hiddenKeys[IE_PROTO] = true;
module.exports = Object.create || function create(O, Properties) {
 var result;
 if (O !== null) {
  EmptyConstructor[PROTOTYPE] = anObject(O);
  result = new EmptyConstructor();
  EmptyConstructor[PROTOTYPE] = null;
  result[IE_PROTO] = O;
 } else
  result = NullProtoObject();
 return Properties === undefined ? result : definePropertiesModule.f(result, Properties);
};

/***/ }),
/* 73 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

var DESCRIPTORS = __w_pdfjs_require__(8);
var V8_PROTOTYPE_DEFINE_BUG = __w_pdfjs_require__(48);
var definePropertyModule = __w_pdfjs_require__(47);
var anObject = __w_pdfjs_require__(49);
var toIndexedObject = __w_pdfjs_require__(14);
var objectKeys = __w_pdfjs_require__(74);
exports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {
 anObject(O);
 var props = toIndexedObject(Properties);
 var keys = objectKeys(Properties);
 var length = keys.length;
 var index = 0;
 var key;
 while (length > index)
  definePropertyModule.f(O, key = keys[index++], props[key]);
 return O;
};

/***/ }),
/* 74 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var internalObjectKeys = __w_pdfjs_require__(61);
var enumBugKeys = __w_pdfjs_require__(68);
module.exports = Object.keys || function keys(O) {
 return internalObjectKeys(O, enumBugKeys);
};

/***/ }),
/* 75 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var getBuiltIn = __w_pdfjs_require__(26);
module.exports = getBuiltIn('document', 'documentElement');

/***/ }),
/* 76 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var global = __w_pdfjs_require__(6);
var uncurryThis = __w_pdfjs_require__(16);
module.exports = function (CONSTRUCTOR, METHOD) {
 return uncurryThis(global[CONSTRUCTOR].prototype[METHOD]);
};

/***/ }),
/* 77 */
/***/ ((__unused_webpack_module, __unused_webpack_exports, __w_pdfjs_require__) => {

__w_pdfjs_require__(78);

/***/ }),
/* 78 */
/***/ ((__unused_webpack_module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var ArrayBufferViewCore = __w_pdfjs_require__(79);
var lengthOfArrayLike = __w_pdfjs_require__(66);
var toIntegerOrInfinity = __w_pdfjs_require__(64);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('at', function at(index) {
 var O = aTypedArray(this);
 var len = lengthOfArrayLike(O);
 var relativeIndex = toIntegerOrInfinity(index);
 var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;
 return k < 0 || k >= len ? undefined : O[k];
});

/***/ }),
/* 79 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var NATIVE_ARRAY_BUFFER = __w_pdfjs_require__(80);
var DESCRIPTORS = __w_pdfjs_require__(8);
var global = __w_pdfjs_require__(6);
var isCallable = __w_pdfjs_require__(23);
var isObject = __w_pdfjs_require__(22);
var hasOwn = __w_pdfjs_require__(41);
var classof = __w_pdfjs_require__(81);
var tryToString = __w_pdfjs_require__(34);
var createNonEnumerableProperty = __w_pdfjs_require__(46);
var defineBuiltIn = __w_pdfjs_require__(50);
var defineBuiltInAccessor = __w_pdfjs_require__(83);
var isPrototypeOf = __w_pdfjs_require__(27);
var getPrototypeOf = __w_pdfjs_require__(84);
var setPrototypeOf = __w_pdfjs_require__(86);
var wellKnownSymbol = __w_pdfjs_require__(36);
var uid = __w_pdfjs_require__(43);
var InternalStateModule = __w_pdfjs_require__(54);
var enforceInternalState = InternalStateModule.enforce;
var getInternalState = InternalStateModule.get;
var Int8Array = global.Int8Array;
var Int8ArrayPrototype = Int8Array && Int8Array.prototype;
var Uint8ClampedArray = global.Uint8ClampedArray;
var Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;
var TypedArray = Int8Array && getPrototypeOf(Int8Array);
var TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);
var ObjectPrototype = Object.prototype;
var TypeError = global.TypeError;
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');
var TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';
var NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(global.opera) !== 'Opera';
var TYPED_ARRAY_TAG_REQUIRED = false;
var NAME, Constructor, Prototype;
var TypedArrayConstructorsList = {
 Int8Array: 1,
 Uint8Array: 1,
 Uint8ClampedArray: 1,
 Int16Array: 2,
 Uint16Array: 2,
 Int32Array: 4,
 Uint32Array: 4,
 Float32Array: 4,
 Float64Array: 8
};
var BigIntArrayConstructorsList = {
 BigInt64Array: 8,
 BigUint64Array: 8
};
var isView = function isView(it) {
 if (!isObject(it))
  return false;
 var klass = classof(it);
 return klass === 'DataView' || hasOwn(TypedArrayConstructorsList, klass) || hasOwn(BigIntArrayConstructorsList, klass);
};
var getTypedArrayConstructor = function (it) {
 var proto = getPrototypeOf(it);
 if (!isObject(proto))
  return;
 var state = getInternalState(proto);
 return state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);
};
var isTypedArray = function (it) {
 if (!isObject(it))
  return false;
 var klass = classof(it);
 return hasOwn(TypedArrayConstructorsList, klass) || hasOwn(BigIntArrayConstructorsList, klass);
};
var aTypedArray = function (it) {
 if (isTypedArray(it))
  return it;
 throw TypeError('Target is not a typed array');
};
var aTypedArrayConstructor = function (C) {
 if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C)))
  return C;
 throw TypeError(tryToString(C) + ' is not a typed array constructor');
};
var exportTypedArrayMethod = function (KEY, property, forced, options) {
 if (!DESCRIPTORS)
  return;
 if (forced)
  for (var ARRAY in TypedArrayConstructorsList) {
   var TypedArrayConstructor = global[ARRAY];
   if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY))
    try {
     delete TypedArrayConstructor.prototype[KEY];
    } catch (error) {
     try {
      TypedArrayConstructor.prototype[KEY] = property;
     } catch (error2) {
     }
    }
  }
 if (!TypedArrayPrototype[KEY] || forced) {
  defineBuiltIn(TypedArrayPrototype, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);
 }
};
var exportTypedArrayStaticMethod = function (KEY, property, forced) {
 var ARRAY, TypedArrayConstructor;
 if (!DESCRIPTORS)
  return;
 if (setPrototypeOf) {
  if (forced)
   for (ARRAY in TypedArrayConstructorsList) {
    TypedArrayConstructor = global[ARRAY];
    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY))
     try {
      delete TypedArrayConstructor[KEY];
     } catch (error) {
     }
   }
  if (!TypedArray[KEY] || forced) {
   try {
    return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);
   } catch (error) {
   }
  } else
   return;
 }
 for (ARRAY in TypedArrayConstructorsList) {
  TypedArrayConstructor = global[ARRAY];
  if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {
   defineBuiltIn(TypedArrayConstructor, KEY, property);
  }
 }
};
for (NAME in TypedArrayConstructorsList) {
 Constructor = global[NAME];
 Prototype = Constructor && Constructor.prototype;
 if (Prototype)
  enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;
 else
  NATIVE_ARRAY_BUFFER_VIEWS = false;
}
for (NAME in BigIntArrayConstructorsList) {
 Constructor = global[NAME];
 Prototype = Constructor && Constructor.prototype;
 if (Prototype)
  enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;
}
if (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {
 TypedArray = function TypedArray() {
  throw TypeError('Incorrect invocation');
 };
 if (NATIVE_ARRAY_BUFFER_VIEWS)
  for (NAME in TypedArrayConstructorsList) {
   if (global[NAME])
    setPrototypeOf(global[NAME], TypedArray);
  }
}
if (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {
 TypedArrayPrototype = TypedArray.prototype;
 if (NATIVE_ARRAY_BUFFER_VIEWS)
  for (NAME in TypedArrayConstructorsList) {
   if (global[NAME])
    setPrototypeOf(global[NAME].prototype, TypedArrayPrototype);
  }
}
if (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {
 setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);
}
if (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {
 TYPED_ARRAY_TAG_REQUIRED = true;
 defineBuiltInAccessor(TypedArrayPrototype, TO_STRING_TAG, {
  configurable: true,
  get: function () {
   return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;
  }
 });
 for (NAME in TypedArrayConstructorsList)
  if (global[NAME]) {
   createNonEnumerableProperty(global[NAME], TYPED_ARRAY_TAG, NAME);
  }
}
module.exports = {
 NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,
 TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,
 aTypedArray: aTypedArray,
 aTypedArrayConstructor: aTypedArrayConstructor,
 exportTypedArrayMethod: exportTypedArrayMethod,
 exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,
 getTypedArrayConstructor: getTypedArrayConstructor,
 isView: isView,
 isTypedArray: isTypedArray,
 TypedArray: TypedArray,
 TypedArrayPrototype: TypedArrayPrototype
};

/***/ }),
/* 80 */
/***/ ((module) => {

module.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';

/***/ }),
/* 81 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var TO_STRING_TAG_SUPPORT = __w_pdfjs_require__(82);
var isCallable = __w_pdfjs_require__(23);
var classofRaw = __w_pdfjs_require__(17);
var wellKnownSymbol = __w_pdfjs_require__(36);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var $Object = Object;
var CORRECT_ARGUMENTS = classofRaw((function () {
 return arguments;
}())) == 'Arguments';
var tryGet = function (it, key) {
 try {
  return it[key];
 } catch (error) {
 }
};
module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {
 var O, tag, result;
 return it === undefined ? 'Undefined' : it === null ? 'Null' : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag : CORRECT_ARGUMENTS ? classofRaw(O) : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;
};

/***/ }),
/* 82 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var wellKnownSymbol = __w_pdfjs_require__(36);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};
test[TO_STRING_TAG] = 'z';
module.exports = String(test) === '[object z]';

/***/ }),
/* 83 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var makeBuiltIn = __w_pdfjs_require__(51);
var defineProperty = __w_pdfjs_require__(47);
module.exports = function (target, name, descriptor) {
 if (descriptor.get)
  makeBuiltIn(descriptor.get, name, { getter: true });
 if (descriptor.set)
  makeBuiltIn(descriptor.set, name, { setter: true });
 return defineProperty.f(target, name, descriptor);
};

/***/ }),
/* 84 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var hasOwn = __w_pdfjs_require__(41);
var isCallable = __w_pdfjs_require__(23);
var toObject = __w_pdfjs_require__(42);
var sharedKey = __w_pdfjs_require__(56);
var CORRECT_PROTOTYPE_GETTER = __w_pdfjs_require__(85);
var IE_PROTO = sharedKey('IE_PROTO');
var $Object = Object;
var ObjectPrototype = $Object.prototype;
module.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {
 var object = toObject(O);
 if (hasOwn(object, IE_PROTO))
  return object[IE_PROTO];
 var constructor = object.constructor;
 if (isCallable(constructor) && object instanceof constructor) {
  return constructor.prototype;
 }
 return object instanceof $Object ? ObjectPrototype : null;
};

/***/ }),
/* 85 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var fails = __w_pdfjs_require__(9);
module.exports = !fails(function () {
 function F() {
 }
 F.prototype.constructor = null;
 return Object.getPrototypeOf(new F()) !== F.prototype;
});

/***/ }),
/* 86 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThisAccessor = __w_pdfjs_require__(87);
var anObject = __w_pdfjs_require__(49);
var aPossiblePrototype = __w_pdfjs_require__(88);
module.exports = Object.setPrototypeOf || ('__proto__' in {} ? (function () {
 var CORRECT_SETTER = false;
 var test = {};
 var setter;
 try {
  setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');
  setter(test, []);
  CORRECT_SETTER = test instanceof Array;
 } catch (error) {
 }
 return function setPrototypeOf(O, proto) {
  anObject(O);
  aPossiblePrototype(proto);
  if (CORRECT_SETTER)
   setter(O, proto);
  else
   O.__proto__ = proto;
  return O;
 };
}()) : undefined);

/***/ }),
/* 87 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
var aCallable = __w_pdfjs_require__(33);
module.exports = function (object, key, method) {
 try {
  return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));
 } catch (error) {
 }
};

/***/ }),
/* 88 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var isCallable = __w_pdfjs_require__(23);
var $String = String;
var $TypeError = TypeError;
module.exports = function (argument) {
 if (typeof argument == 'object' || isCallable(argument))
  return argument;
 throw $TypeError("Can't set " + $String(argument) + ' as a prototype');
};

/***/ }),
/* 89 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

__w_pdfjs_require__(90);
__w_pdfjs_require__(97);
__w_pdfjs_require__(99);
__w_pdfjs_require__(122);
__w_pdfjs_require__(124);
var path = __w_pdfjs_require__(136);
module.exports = path.structuredClone;

/***/ }),
/* 90 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var toIndexedObject = __w_pdfjs_require__(14);
var addToUnscopables = __w_pdfjs_require__(71);
var Iterators = __w_pdfjs_require__(91);
var InternalStateModule = __w_pdfjs_require__(54);
var defineProperty = (__w_pdfjs_require__(47).f);
var defineIterator = __w_pdfjs_require__(92);
var createIterResultObject = __w_pdfjs_require__(96);
var IS_PURE = __w_pdfjs_require__(38);
var DESCRIPTORS = __w_pdfjs_require__(8);
var ARRAY_ITERATOR = 'Array Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);
module.exports = defineIterator(Array, 'Array', function (iterated, kind) {
 setInternalState(this, {
  type: ARRAY_ITERATOR,
  target: toIndexedObject(iterated),
  index: 0,
  kind: kind
 });
}, function () {
 var state = getInternalState(this);
 var target = state.target;
 var kind = state.kind;
 var index = state.index++;
 if (!target || index >= target.length) {
  state.target = undefined;
  return createIterResultObject(undefined, true);
 }
 if (kind == 'keys')
  return createIterResultObject(index, false);
 if (kind == 'values')
  return createIterResultObject(target[index], false);
 return createIterResultObject([
  index,
  target[index]
 ], false);
}, 'values');
var values = Iterators.Arguments = Iterators.Array;
addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');
if (!IS_PURE && DESCRIPTORS && values.name !== 'values')
 try {
  defineProperty(values, 'name', { value: 'values' });
 } catch (error) {
 }

/***/ }),
/* 91 */
/***/ ((module) => {

module.exports = {};

/***/ }),
/* 92 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var $ = __w_pdfjs_require__(5);
var call = __w_pdfjs_require__(10);
var IS_PURE = __w_pdfjs_require__(38);
var FunctionName = __w_pdfjs_require__(52);
var isCallable = __w_pdfjs_require__(23);
var createIteratorConstructor = __w_pdfjs_require__(93);
var getPrototypeOf = __w_pdfjs_require__(84);
var setPrototypeOf = __w_pdfjs_require__(86);
var setToStringTag = __w_pdfjs_require__(95);
var createNonEnumerableProperty = __w_pdfjs_require__(46);
var defineBuiltIn = __w_pdfjs_require__(50);
var wellKnownSymbol = __w_pdfjs_require__(36);
var Iterators = __w_pdfjs_require__(91);
var IteratorsCore = __w_pdfjs_require__(94);
var PROPER_FUNCTION_NAME = FunctionName.PROPER;
var CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;
var IteratorPrototype = IteratorsCore.IteratorPrototype;
var BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;
var ITERATOR = wellKnownSymbol('iterator');
var KEYS = 'keys';
var VALUES = 'values';
var ENTRIES = 'entries';
var returnThis = function () {
 return this;
};
module.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {
 createIteratorConstructor(IteratorConstructor, NAME, next);
 var getIterationMethod = function (KIND) {
  if (KIND === DEFAULT && defaultIterator)
   return defaultIterator;
  if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype)
   return IterablePrototype[KIND];
  switch (KIND) {
  case KEYS:
   return function keys() {
    return new IteratorConstructor(this, KIND);
   };
  case VALUES:
   return function values() {
    return new IteratorConstructor(this, KIND);
   };
  case ENTRIES:
   return function entries() {
    return new IteratorConstructor(this, KIND);
   };
  }
  return function () {
   return new IteratorConstructor(this);
  };
 };
 var TO_STRING_TAG = NAME + ' Iterator';
 var INCORRECT_VALUES_NAME = false;
 var IterablePrototype = Iterable.prototype;
 var nativeIterator = IterablePrototype[ITERATOR] || IterablePrototype['@@iterator'] || DEFAULT && IterablePrototype[DEFAULT];
 var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);
 var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;
 var CurrentIteratorPrototype, methods, KEY;
 if (anyNativeIterator) {
  CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));
  if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {
   if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {
    if (setPrototypeOf) {
     setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);
    } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {
     defineBuiltIn(CurrentIteratorPrototype, ITERATOR, returnThis);
    }
   }
   setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);
   if (IS_PURE)
    Iterators[TO_STRING_TAG] = returnThis;
  }
 }
 if (PROPER_FUNCTION_NAME && DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {
  if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {
   createNonEnumerableProperty(IterablePrototype, 'name', VALUES);
  } else {
   INCORRECT_VALUES_NAME = true;
   defaultIterator = function values() {
    return call(nativeIterator, this);
   };
  }
 }
 if (DEFAULT) {
  methods = {
   values: getIterationMethod(VALUES),
   keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
   entries: getIterationMethod(ENTRIES)
  };
  if (FORCED)
   for (KEY in methods) {
    if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
     defineBuiltIn(IterablePrototype, KEY, methods[KEY]);
    }
   }
  else
   $({
    target: NAME,
    proto: true,
    forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME
   }, methods);
 }
 if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {
  defineBuiltIn(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });
 }
 Iterators[NAME] = defaultIterator;
 return methods;
};

/***/ }),
/* 93 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var IteratorPrototype = (__w_pdfjs_require__(94).IteratorPrototype);
var create = __w_pdfjs_require__(72);
var createPropertyDescriptor = __w_pdfjs_require__(13);
var setToStringTag = __w_pdfjs_require__(95);
var Iterators = __w_pdfjs_require__(91);
var returnThis = function () {
 return this;
};
module.exports = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {
 var TO_STRING_TAG = NAME + ' Iterator';
 IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(+!ENUMERABLE_NEXT, next) });
 setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);
 Iterators[TO_STRING_TAG] = returnThis;
 return IteratorConstructor;
};

/***/ }),
/* 94 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var fails = __w_pdfjs_require__(9);
var isCallable = __w_pdfjs_require__(23);
var isObject = __w_pdfjs_require__(22);
var create = __w_pdfjs_require__(72);
var getPrototypeOf = __w_pdfjs_require__(84);
var defineBuiltIn = __w_pdfjs_require__(50);
var wellKnownSymbol = __w_pdfjs_require__(36);
var IS_PURE = __w_pdfjs_require__(38);
var ITERATOR = wellKnownSymbol('iterator');
var BUGGY_SAFARI_ITERATORS = false;
var IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;
if ([].keys) {
 arrayIterator = [].keys();
 if (!('next' in arrayIterator))
  BUGGY_SAFARI_ITERATORS = true;
 else {
  PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));
  if (PrototypeOfArrayIteratorPrototype !== Object.prototype)
   IteratorPrototype = PrototypeOfArrayIteratorPrototype;
 }
}
var NEW_ITERATOR_PROTOTYPE = !isObject(IteratorPrototype) || fails(function () {
 var test = {};
 return IteratorPrototype[ITERATOR].call(test) !== test;
});
if (NEW_ITERATOR_PROTOTYPE)
 IteratorPrototype = {};
else if (IS_PURE)
 IteratorPrototype = create(IteratorPrototype);
if (!isCallable(IteratorPrototype[ITERATOR])) {
 defineBuiltIn(IteratorPrototype, ITERATOR, function () {
  return this;
 });
}
module.exports = {
 IteratorPrototype: IteratorPrototype,
 BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS
};

/***/ }),
/* 95 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var defineProperty = (__w_pdfjs_require__(47).f);
var hasOwn = __w_pdfjs_require__(41);
var wellKnownSymbol = __w_pdfjs_require__(36);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
module.exports = function (target, TAG, STATIC) {
 if (target && !STATIC)
  target = target.prototype;
 if (target && !hasOwn(target, TO_STRING_TAG)) {
  defineProperty(target, TO_STRING_TAG, {
   configurable: true,
   value: TAG
  });
 }
};

/***/ }),
/* 96 */
/***/ ((module) => {

module.exports = function (value, done) {
 return {
  value: value,
  done: done
 };
};

/***/ }),
/* 97 */
/***/ ((__unused_webpack_module, __unused_webpack_exports, __w_pdfjs_require__) => {

var TO_STRING_TAG_SUPPORT = __w_pdfjs_require__(82);
var defineBuiltIn = __w_pdfjs_require__(50);
var toString = __w_pdfjs_require__(98);
if (!TO_STRING_TAG_SUPPORT) {
 defineBuiltIn(Object.prototype, 'toString', toString, { unsafe: true });
}

/***/ }),
/* 98 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var TO_STRING_TAG_SUPPORT = __w_pdfjs_require__(82);
var classof = __w_pdfjs_require__(81);
module.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {
 return '[object ' + classof(this) + ']';
};

/***/ }),
/* 99 */
/***/ ((__unused_webpack_module, __unused_webpack_exports, __w_pdfjs_require__) => {

__w_pdfjs_require__(100);

/***/ }),
/* 100 */
/***/ ((__unused_webpack_module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var collection = __w_pdfjs_require__(101);
var collectionStrong = __w_pdfjs_require__(119);
collection('Map', function (init) {
 return function Map() {
  return init(this, arguments.length ? arguments[0] : undefined);
 };
}, collectionStrong);

/***/ }),
/* 101 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var $ = __w_pdfjs_require__(5);
var global = __w_pdfjs_require__(6);
var uncurryThis = __w_pdfjs_require__(16);
var isForced = __w_pdfjs_require__(70);
var defineBuiltIn = __w_pdfjs_require__(50);
var InternalMetadataModule = __w_pdfjs_require__(102);
var iterate = __w_pdfjs_require__(109);
var anInstance = __w_pdfjs_require__(116);
var isCallable = __w_pdfjs_require__(23);
var isNullOrUndefined = __w_pdfjs_require__(19);
var isObject = __w_pdfjs_require__(22);
var fails = __w_pdfjs_require__(9);
var checkCorrectnessOfIteration = __w_pdfjs_require__(117);
var setToStringTag = __w_pdfjs_require__(95);
var inheritIfRequired = __w_pdfjs_require__(118);
module.exports = function (CONSTRUCTOR_NAME, wrapper, common) {
 var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;
 var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;
 var ADDER = IS_MAP ? 'set' : 'add';
 var NativeConstructor = global[CONSTRUCTOR_NAME];
 var NativePrototype = NativeConstructor && NativeConstructor.prototype;
 var Constructor = NativeConstructor;
 var exported = {};
 var fixMethod = function (KEY) {
  var uncurriedNativeMethod = uncurryThis(NativePrototype[KEY]);
  defineBuiltIn(NativePrototype, KEY, KEY == 'add' ? function add(value) {
   uncurriedNativeMethod(this, value === 0 ? 0 : value);
   return this;
  } : KEY == 'delete' ? function (key) {
   return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);
  } : KEY == 'get' ? function get(key) {
   return IS_WEAK && !isObject(key) ? undefined : uncurriedNativeMethod(this, key === 0 ? 0 : key);
  } : KEY == 'has' ? function has(key) {
   return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);
  } : function set(key, value) {
   uncurriedNativeMethod(this, key === 0 ? 0 : key, value);
   return this;
  });
 };
 var REPLACE = isForced(CONSTRUCTOR_NAME, !isCallable(NativeConstructor) || !(IS_WEAK || NativePrototype.forEach && !fails(function () {
  new NativeConstructor().entries().next();
 })));
 if (REPLACE) {
  Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);
  InternalMetadataModule.enable();
 } else if (isForced(CONSTRUCTOR_NAME, true)) {
  var instance = new Constructor();
  var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;
  var THROWS_ON_PRIMITIVES = fails(function () {
   instance.has(1);
  });
  var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) {
   new NativeConstructor(iterable);
  });
  var BUGGY_ZERO = !IS_WEAK && fails(function () {
   var $instance = new NativeConstructor();
   var index = 5;
   while (index--)
    $instance[ADDER](index, index);
   return !$instance.has(-0);
  });
  if (!ACCEPT_ITERABLES) {
   Constructor = wrapper(function (dummy, iterable) {
    anInstance(dummy, NativePrototype);
    var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);
    if (!isNullOrUndefined(iterable))
     iterate(iterable, that[ADDER], {
      that: that,
      AS_ENTRIES: IS_MAP
     });
    return that;
   });
   Constructor.prototype = NativePrototype;
   NativePrototype.constructor = Constructor;
  }
  if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {
   fixMethod('delete');
   fixMethod('has');
   IS_MAP && fixMethod('get');
  }
  if (BUGGY_ZERO || HASNT_CHAINING)
   fixMethod(ADDER);
  if (IS_WEAK && NativePrototype.clear)
   delete NativePrototype.clear;
 }
 exported[CONSTRUCTOR_NAME] = Constructor;
 $({
  global: true,
  constructor: true,
  forced: Constructor != NativeConstructor
 }, exported);
 setToStringTag(Constructor, CONSTRUCTOR_NAME);
 if (!IS_WEAK)
  common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);
 return Constructor;
};

/***/ }),
/* 102 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var $ = __w_pdfjs_require__(5);
var uncurryThis = __w_pdfjs_require__(16);
var hiddenKeys = __w_pdfjs_require__(57);
var isObject = __w_pdfjs_require__(22);
var hasOwn = __w_pdfjs_require__(41);
var defineProperty = (__w_pdfjs_require__(47).f);
var getOwnPropertyNamesModule = __w_pdfjs_require__(60);
var getOwnPropertyNamesExternalModule = __w_pdfjs_require__(103);
var isExtensible = __w_pdfjs_require__(106);
var uid = __w_pdfjs_require__(43);
var FREEZING = __w_pdfjs_require__(108);
var REQUIRED = false;
var METADATA = uid('meta');
var id = 0;
var setMetadata = function (it) {
 defineProperty(it, METADATA, {
  value: {
   objectID: 'O' + id++,
   weakData: {}
  }
 });
};
var fastKey = function (it, create) {
 if (!isObject(it))
  return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;
 if (!hasOwn(it, METADATA)) {
  if (!isExtensible(it))
   return 'F';
  if (!create)
   return 'E';
  setMetadata(it);
 }
 return it[METADATA].objectID;
};
var getWeakData = function (it, create) {
 if (!hasOwn(it, METADATA)) {
  if (!isExtensible(it))
   return true;
  if (!create)
   return false;
  setMetadata(it);
 }
 return it[METADATA].weakData;
};
var onFreeze = function (it) {
 if (FREEZING && REQUIRED && isExtensible(it) && !hasOwn(it, METADATA))
  setMetadata(it);
 return it;
};
var enable = function () {
 meta.enable = function () {
 };
 REQUIRED = true;
 var getOwnPropertyNames = getOwnPropertyNamesModule.f;
 var splice = uncurryThis([].splice);
 var test = {};
 test[METADATA] = 1;
 if (getOwnPropertyNames(test).length) {
  getOwnPropertyNamesModule.f = function (it) {
   var result = getOwnPropertyNames(it);
   for (var i = 0, length = result.length; i < length; i++) {
    if (result[i] === METADATA) {
     splice(result, i, 1);
     break;
    }
   }
   return result;
  };
  $({
   target: 'Object',
   stat: true,
   forced: true
  }, { getOwnPropertyNames: getOwnPropertyNamesExternalModule.f });
 }
};
var meta = module.exports = {
 enable: enable,
 fastKey: fastKey,
 getWeakData: getWeakData,
 onFreeze: onFreeze
};
hiddenKeys[METADATA] = true;

/***/ }),
/* 103 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var classof = __w_pdfjs_require__(17);
var toIndexedObject = __w_pdfjs_require__(14);
var $getOwnPropertyNames = (__w_pdfjs_require__(60).f);
var arraySlice = __w_pdfjs_require__(104);
var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
var getWindowNames = function (it) {
 try {
  return $getOwnPropertyNames(it);
 } catch (error) {
  return arraySlice(windowNames);
 }
};
module.exports.f = function getOwnPropertyNames(it) {
 return windowNames && classof(it) == 'Window' ? getWindowNames(it) : $getOwnPropertyNames(toIndexedObject(it));
};

/***/ }),
/* 104 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var toAbsoluteIndex = __w_pdfjs_require__(63);
var lengthOfArrayLike = __w_pdfjs_require__(66);
var createProperty = __w_pdfjs_require__(105);
var $Array = Array;
var max = Math.max;
module.exports = function (O, start, end) {
 var length = lengthOfArrayLike(O);
 var k = toAbsoluteIndex(start, length);
 var fin = toAbsoluteIndex(end === undefined ? length : end, length);
 var result = $Array(max(fin - k, 0));
 for (var n = 0; k < fin; k++, n++)
  createProperty(result, n, O[k]);
 result.length = n;
 return result;
};

/***/ }),
/* 105 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var toPropertyKey = __w_pdfjs_require__(20);
var definePropertyModule = __w_pdfjs_require__(47);
var createPropertyDescriptor = __w_pdfjs_require__(13);
module.exports = function (object, key, value) {
 var propertyKey = toPropertyKey(key);
 if (propertyKey in object)
  definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));
 else
  object[propertyKey] = value;
};

/***/ }),
/* 106 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var fails = __w_pdfjs_require__(9);
var isObject = __w_pdfjs_require__(22);
var classof = __w_pdfjs_require__(17);
var ARRAY_BUFFER_NON_EXTENSIBLE = __w_pdfjs_require__(107);
var $isExtensible = Object.isExtensible;
var FAILS_ON_PRIMITIVES = fails(function () {
 $isExtensible(1);
});
module.exports = FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE ? function isExtensible(it) {
 if (!isObject(it))
  return false;
 if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) == 'ArrayBuffer')
  return false;
 return $isExtensible ? $isExtensible(it) : true;
} : $isExtensible;

/***/ }),
/* 107 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var fails = __w_pdfjs_require__(9);
module.exports = fails(function () {
 if (typeof ArrayBuffer == 'function') {
  var buffer = new ArrayBuffer(8);
  if (Object.isExtensible(buffer))
   Object.defineProperty(buffer, 'a', { value: 8 });
 }
});

/***/ }),
/* 108 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var fails = __w_pdfjs_require__(9);
module.exports = !fails(function () {
 return Object.isExtensible(Object.preventExtensions({}));
});

/***/ }),
/* 109 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var bind = __w_pdfjs_require__(110);
var call = __w_pdfjs_require__(10);
var anObject = __w_pdfjs_require__(49);
var tryToString = __w_pdfjs_require__(34);
var isArrayIteratorMethod = __w_pdfjs_require__(112);
var lengthOfArrayLike = __w_pdfjs_require__(66);
var isPrototypeOf = __w_pdfjs_require__(27);
var getIterator = __w_pdfjs_require__(113);
var getIteratorMethod = __w_pdfjs_require__(114);
var iteratorClose = __w_pdfjs_require__(115);
var $TypeError = TypeError;
var Result = function (stopped, result) {
 this.stopped = stopped;
 this.result = result;
};
var ResultPrototype = Result.prototype;
module.exports = function (iterable, unboundFunction, options) {
 var that = options && options.that;
 var AS_ENTRIES = !!(options && options.AS_ENTRIES);
 var IS_RECORD = !!(options && options.IS_RECORD);
 var IS_ITERATOR = !!(options && options.IS_ITERATOR);
 var INTERRUPTED = !!(options && options.INTERRUPTED);
 var fn = bind(unboundFunction, that);
 var iterator, iterFn, index, length, result, next, step;
 var stop = function (condition) {
  if (iterator)
   iteratorClose(iterator, 'normal', condition);
  return new Result(true, condition);
 };
 var callFn = function (value) {
  if (AS_ENTRIES) {
   anObject(value);
   return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);
  }
  return INTERRUPTED ? fn(value, stop) : fn(value);
 };
 if (IS_RECORD) {
  iterator = iterable.iterator;
 } else if (IS_ITERATOR) {
  iterator = iterable;
 } else {
  iterFn = getIteratorMethod(iterable);
  if (!iterFn)
   throw $TypeError(tryToString(iterable) + ' is not iterable');
  if (isArrayIteratorMethod(iterFn)) {
   for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {
    result = callFn(iterable[index]);
    if (result && isPrototypeOf(ResultPrototype, result))
     return result;
   }
   return new Result(false);
  }
  iterator = getIterator(iterable, iterFn);
 }
 next = IS_RECORD ? iterable.next : iterator.next;
 while (!(step = call(next, iterator)).done) {
  try {
   result = callFn(step.value);
  } catch (error) {
   iteratorClose(iterator, 'throw', error);
  }
  if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result))
   return result;
 }
 return new Result(false);
};

/***/ }),
/* 110 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(111);
var aCallable = __w_pdfjs_require__(33);
var NATIVE_BIND = __w_pdfjs_require__(11);
var bind = uncurryThis(uncurryThis.bind);
module.exports = function (fn, that) {
 aCallable(fn);
 return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function () {
  return fn.apply(that, arguments);
 };
};

/***/ }),
/* 111 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var classofRaw = __w_pdfjs_require__(17);
var uncurryThis = __w_pdfjs_require__(16);
module.exports = function (fn) {
 if (classofRaw(fn) === 'Function')
  return uncurryThis(fn);
};

/***/ }),
/* 112 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var wellKnownSymbol = __w_pdfjs_require__(36);
var Iterators = __w_pdfjs_require__(91);
var ITERATOR = wellKnownSymbol('iterator');
var ArrayPrototype = Array.prototype;
module.exports = function (it) {
 return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);
};

/***/ }),
/* 113 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var call = __w_pdfjs_require__(10);
var aCallable = __w_pdfjs_require__(33);
var anObject = __w_pdfjs_require__(49);
var tryToString = __w_pdfjs_require__(34);
var getIteratorMethod = __w_pdfjs_require__(114);
var $TypeError = TypeError;
module.exports = function (argument, usingIterator) {
 var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;
 if (aCallable(iteratorMethod))
  return anObject(call(iteratorMethod, argument));
 throw $TypeError(tryToString(argument) + ' is not iterable');
};

/***/ }),
/* 114 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var classof = __w_pdfjs_require__(81);
var getMethod = __w_pdfjs_require__(32);
var isNullOrUndefined = __w_pdfjs_require__(19);
var Iterators = __w_pdfjs_require__(91);
var wellKnownSymbol = __w_pdfjs_require__(36);
var ITERATOR = wellKnownSymbol('iterator');
module.exports = function (it) {
 if (!isNullOrUndefined(it))
  return getMethod(it, ITERATOR) || getMethod(it, '@@iterator') || Iterators[classof(it)];
};

/***/ }),
/* 115 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var call = __w_pdfjs_require__(10);
var anObject = __w_pdfjs_require__(49);
var getMethod = __w_pdfjs_require__(32);
module.exports = function (iterator, kind, value) {
 var innerResult, innerError;
 anObject(iterator);
 try {
  innerResult = getMethod(iterator, 'return');
  if (!innerResult) {
   if (kind === 'throw')
    throw value;
   return value;
  }
  innerResult = call(innerResult, iterator);
 } catch (error) {
  innerError = true;
  innerResult = error;
 }
 if (kind === 'throw')
  throw value;
 if (innerError)
  throw innerResult;
 anObject(innerResult);
 return value;
};

/***/ }),
/* 116 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var isPrototypeOf = __w_pdfjs_require__(27);
var $TypeError = TypeError;
module.exports = function (it, Prototype) {
 if (isPrototypeOf(Prototype, it))
  return it;
 throw $TypeError('Incorrect invocation');
};

/***/ }),
/* 117 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var wellKnownSymbol = __w_pdfjs_require__(36);
var ITERATOR = wellKnownSymbol('iterator');
var SAFE_CLOSING = false;
try {
 var called = 0;
 var iteratorWithReturn = {
  next: function () {
   return { done: !!called++ };
  },
  'return': function () {
   SAFE_CLOSING = true;
  }
 };
 iteratorWithReturn[ITERATOR] = function () {
  return this;
 };
 Array.from(iteratorWithReturn, function () {
  throw 2;
 });
} catch (error) {
}
module.exports = function (exec, SKIP_CLOSING) {
 if (!SKIP_CLOSING && !SAFE_CLOSING)
  return false;
 var ITERATION_SUPPORT = false;
 try {
  var object = {};
  object[ITERATOR] = function () {
   return {
    next: function () {
     return { done: ITERATION_SUPPORT = true };
    }
   };
  };
  exec(object);
 } catch (error) {
 }
 return ITERATION_SUPPORT;
};

/***/ }),
/* 118 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var isCallable = __w_pdfjs_require__(23);
var isObject = __w_pdfjs_require__(22);
var setPrototypeOf = __w_pdfjs_require__(86);
module.exports = function ($this, dummy, Wrapper) {
 var NewTarget, NewTargetPrototype;
 if (setPrototypeOf && isCallable(NewTarget = dummy.constructor) && NewTarget !== Wrapper && isObject(NewTargetPrototype = NewTarget.prototype) && NewTargetPrototype !== Wrapper.prototype)
  setPrototypeOf($this, NewTargetPrototype);
 return $this;
};

/***/ }),
/* 119 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var create = __w_pdfjs_require__(72);
var defineBuiltInAccessor = __w_pdfjs_require__(83);
var defineBuiltIns = __w_pdfjs_require__(120);
var bind = __w_pdfjs_require__(110);
var anInstance = __w_pdfjs_require__(116);
var isNullOrUndefined = __w_pdfjs_require__(19);
var iterate = __w_pdfjs_require__(109);
var defineIterator = __w_pdfjs_require__(92);
var createIterResultObject = __w_pdfjs_require__(96);
var setSpecies = __w_pdfjs_require__(121);
var DESCRIPTORS = __w_pdfjs_require__(8);
var fastKey = (__w_pdfjs_require__(102).fastKey);
var InternalStateModule = __w_pdfjs_require__(54);
var setInternalState = InternalStateModule.set;
var internalStateGetterFor = InternalStateModule.getterFor;
module.exports = {
 getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {
  var Constructor = wrapper(function (that, iterable) {
   anInstance(that, Prototype);
   setInternalState(that, {
    type: CONSTRUCTOR_NAME,
    index: create(null),
    first: undefined,
    last: undefined,
    size: 0
   });
   if (!DESCRIPTORS)
    that.size = 0;
   if (!isNullOrUndefined(iterable))
    iterate(iterable, that[ADDER], {
     that: that,
     AS_ENTRIES: IS_MAP
    });
  });
  var Prototype = Constructor.prototype;
  var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);
  var define = function (that, key, value) {
   var state = getInternalState(that);
   var entry = getEntry(that, key);
   var previous, index;
   if (entry) {
    entry.value = value;
   } else {
    state.last = entry = {
     index: index = fastKey(key, true),
     key: key,
     value: value,
     previous: previous = state.last,
     next: undefined,
     removed: false
    };
    if (!state.first)
     state.first = entry;
    if (previous)
     previous.next = entry;
    if (DESCRIPTORS)
     state.size++;
    else
     that.size++;
    if (index !== 'F')
     state.index[index] = entry;
   }
   return that;
  };
  var getEntry = function (that, key) {
   var state = getInternalState(that);
   var index = fastKey(key);
   var entry;
   if (index !== 'F')
    return state.index[index];
   for (entry = state.first; entry; entry = entry.next) {
    if (entry.key == key)
     return entry;
   }
  };
  defineBuiltIns(Prototype, {
   clear: function clear() {
    var that = this;
    var state = getInternalState(that);
    var data = state.index;
    var entry = state.first;
    while (entry) {
     entry.removed = true;
     if (entry.previous)
      entry.previous = entry.previous.next = undefined;
     delete data[entry.index];
     entry = entry.next;
    }
    state.first = state.last = undefined;
    if (DESCRIPTORS)
     state.size = 0;
    else
     that.size = 0;
   },
   'delete': function (key) {
    var that = this;
    var state = getInternalState(that);
    var entry = getEntry(that, key);
    if (entry) {
     var next = entry.next;
     var prev = entry.previous;
     delete state.index[entry.index];
     entry.removed = true;
     if (prev)
      prev.next = next;
     if (next)
      next.previous = prev;
     if (state.first == entry)
      state.first = next;
     if (state.last == entry)
      state.last = prev;
     if (DESCRIPTORS)
      state.size--;
     else
      that.size--;
    }
    return !!entry;
   },
   forEach: function forEach(callbackfn) {
    var state = getInternalState(this);
    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    var entry;
    while (entry = entry ? entry.next : state.first) {
     boundFunction(entry.value, entry.key, this);
     while (entry && entry.removed)
      entry = entry.previous;
    }
   },
   has: function has(key) {
    return !!getEntry(this, key);
   }
  });
  defineBuiltIns(Prototype, IS_MAP ? {
   get: function get(key) {
    var entry = getEntry(this, key);
    return entry && entry.value;
   },
   set: function set(key, value) {
    return define(this, key === 0 ? 0 : key, value);
   }
  } : {
   add: function add(value) {
    return define(this, value = value === 0 ? 0 : value, value);
   }
  });
  if (DESCRIPTORS)
   defineBuiltInAccessor(Prototype, 'size', {
    configurable: true,
    get: function () {
     return getInternalState(this).size;
    }
   });
  return Constructor;
 },
 setStrong: function (Constructor, CONSTRUCTOR_NAME, IS_MAP) {
  var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';
  var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);
  var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);
  defineIterator(Constructor, CONSTRUCTOR_NAME, function (iterated, kind) {
   setInternalState(this, {
    type: ITERATOR_NAME,
    target: iterated,
    state: getInternalCollectionState(iterated),
    kind: kind,
    last: undefined
   });
  }, function () {
   var state = getInternalIteratorState(this);
   var kind = state.kind;
   var entry = state.last;
   while (entry && entry.removed)
    entry = entry.previous;
   if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {
    state.target = undefined;
    return createIterResultObject(undefined, true);
   }
   if (kind == 'keys')
    return createIterResultObject(entry.key, false);
   if (kind == 'values')
    return createIterResultObject(entry.value, false);
   return createIterResultObject([
    entry.key,
    entry.value
   ], false);
  }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);
  setSpecies(CONSTRUCTOR_NAME);
 }
};

/***/ }),
/* 120 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var defineBuiltIn = __w_pdfjs_require__(50);
module.exports = function (target, src, options) {
 for (var key in src)
  defineBuiltIn(target, key, src[key], options);
 return target;
};

/***/ }),
/* 121 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var getBuiltIn = __w_pdfjs_require__(26);
var defineBuiltInAccessor = __w_pdfjs_require__(83);
var wellKnownSymbol = __w_pdfjs_require__(36);
var DESCRIPTORS = __w_pdfjs_require__(8);
var SPECIES = wellKnownSymbol('species');
module.exports = function (CONSTRUCTOR_NAME) {
 var Constructor = getBuiltIn(CONSTRUCTOR_NAME);
 if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
  defineBuiltInAccessor(Constructor, SPECIES, {
   configurable: true,
   get: function () {
    return this;
   }
  });
 }
};

/***/ }),
/* 122 */
/***/ ((__unused_webpack_module, __unused_webpack_exports, __w_pdfjs_require__) => {

__w_pdfjs_require__(123);

/***/ }),
/* 123 */
/***/ ((__unused_webpack_module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var collection = __w_pdfjs_require__(101);
var collectionStrong = __w_pdfjs_require__(119);
collection('Set', function (init) {
 return function Set() {
  return init(this, arguments.length ? arguments[0] : undefined);
 };
}, collectionStrong);

/***/ }),
/* 124 */
/***/ ((__unused_webpack_module, __unused_webpack_exports, __w_pdfjs_require__) => {

var IS_PURE = __w_pdfjs_require__(38);
var $ = __w_pdfjs_require__(5);
var global = __w_pdfjs_require__(6);
var getBuiltin = __w_pdfjs_require__(26);
var uncurryThis = __w_pdfjs_require__(16);
var fails = __w_pdfjs_require__(9);
var uid = __w_pdfjs_require__(43);
var isCallable = __w_pdfjs_require__(23);
var isConstructor = __w_pdfjs_require__(125);
var isNullOrUndefined = __w_pdfjs_require__(19);
var isObject = __w_pdfjs_require__(22);
var isSymbol = __w_pdfjs_require__(25);
var iterate = __w_pdfjs_require__(109);
var anObject = __w_pdfjs_require__(49);
var classof = __w_pdfjs_require__(81);
var hasOwn = __w_pdfjs_require__(41);
var createProperty = __w_pdfjs_require__(105);
var createNonEnumerableProperty = __w_pdfjs_require__(46);
var lengthOfArrayLike = __w_pdfjs_require__(66);
var validateArgumentsLength = __w_pdfjs_require__(126);
var getRegExpFlags = __w_pdfjs_require__(127);
var MapHelpers = __w_pdfjs_require__(129);
var SetHelpers = __w_pdfjs_require__(130);
var ERROR_STACK_INSTALLABLE = __w_pdfjs_require__(131);
var PROPER_TRANSFER = __w_pdfjs_require__(132);
var Object = global.Object;
var Array = global.Array;
var Date = global.Date;
var Error = global.Error;
var EvalError = global.EvalError;
var RangeError = global.RangeError;
var ReferenceError = global.ReferenceError;
var SyntaxError = global.SyntaxError;
var TypeError = global.TypeError;
var URIError = global.URIError;
var PerformanceMark = global.PerformanceMark;
var WebAssembly = global.WebAssembly;
var CompileError = WebAssembly && WebAssembly.CompileError || Error;
var LinkError = WebAssembly && WebAssembly.LinkError || Error;
var RuntimeError = WebAssembly && WebAssembly.RuntimeError || Error;
var DOMException = getBuiltin('DOMException');
var Map = MapHelpers.Map;
var mapHas = MapHelpers.has;
var mapGet = MapHelpers.get;
var mapSet = MapHelpers.set;
var Set = SetHelpers.Set;
var setAdd = SetHelpers.add;
var objectKeys = getBuiltin('Object', 'keys');
var push = uncurryThis([].push);
var thisBooleanValue = uncurryThis(true.valueOf);
var thisNumberValue = uncurryThis(1.0.valueOf);
var thisStringValue = uncurryThis(''.valueOf);
var thisTimeValue = uncurryThis(Date.prototype.getTime);
var PERFORMANCE_MARK = uid('structuredClone');
var DATA_CLONE_ERROR = 'DataCloneError';
var TRANSFERRING = 'Transferring';
var checkBasicSemantic = function (structuredCloneImplementation) {
 return !fails(function () {
  var set1 = new global.Set([7]);
  var set2 = structuredCloneImplementation(set1);
  var number = structuredCloneImplementation(Object(7));
  return set2 == set1 || !set2.has(7) || typeof number != 'object' || number != 7;
 }) && structuredCloneImplementation;
};
var checkErrorsCloning = function (structuredCloneImplementation, $Error) {
 return !fails(function () {
  var error = new $Error();
  var test = structuredCloneImplementation({
   a: error,
   b: error
  });
  return !(test && test.a === test.b && test.a instanceof $Error && test.a.stack === error.stack);
 });
};
var checkNewErrorsCloningSemantic = function (structuredCloneImplementation) {
 return !fails(function () {
  var test = structuredCloneImplementation(new global.AggregateError([1], PERFORMANCE_MARK, { cause: 3 }));
  return test.name != 'AggregateError' || test.errors[0] != 1 || test.message != PERFORMANCE_MARK || test.cause != 3;
 });
};
var nativeStructuredClone = global.structuredClone;
var FORCED_REPLACEMENT = IS_PURE || !checkErrorsCloning(nativeStructuredClone, Error) || !checkErrorsCloning(nativeStructuredClone, DOMException) || !checkNewErrorsCloningSemantic(nativeStructuredClone);
var structuredCloneFromMark = !nativeStructuredClone && checkBasicSemantic(function (value) {
 return new PerformanceMark(PERFORMANCE_MARK, { detail: value }).detail;
});
var nativeRestrictedStructuredClone = checkBasicSemantic(nativeStructuredClone) || structuredCloneFromMark;
var throwUncloneable = function (type) {
 throw new DOMException('Uncloneable type: ' + type, DATA_CLONE_ERROR);
};
var throwUnpolyfillable = function (type, action) {
 throw new DOMException((action || 'Cloning') + ' of ' + type + ' cannot be properly polyfilled in this engine', DATA_CLONE_ERROR);
};
var createDataTransfer = function () {
 var dataTransfer;
 try {
  dataTransfer = new global.DataTransfer();
 } catch (error) {
  try {
   dataTransfer = new global.ClipboardEvent('').clipboardData;
  } catch (error2) {
  }
 }
 return dataTransfer && dataTransfer.items && dataTransfer.files ? dataTransfer : null;
};
var structuredCloneInternal = function (value, map) {
 if (isSymbol(value))
  throwUncloneable('Symbol');
 if (!isObject(value))
  return value;
 if (map) {
  if (mapHas(map, value))
   return mapGet(map, value);
 } else
  map = new Map();
 var type = classof(value);
 var deep = false;
 var C, name, cloned, dataTransfer, i, length, keys, key, source, target, options;
 switch (type) {
 case 'Array':
  cloned = Array(lengthOfArrayLike(value));
  deep = true;
  break;
 case 'Object':
  cloned = {};
  deep = true;
  break;
 case 'Map':
  cloned = new Map();
  deep = true;
  break;
 case 'Set':
  cloned = new Set();
  deep = true;
  break;
 case 'RegExp':
  cloned = new RegExp(value.source, getRegExpFlags(value));
  break;
 case 'Error':
  name = value.name;
  switch (name) {
  case 'AggregateError':
   cloned = getBuiltin('AggregateError')([]);
   break;
  case 'EvalError':
   cloned = EvalError();
   break;
  case 'RangeError':
   cloned = RangeError();
   break;
  case 'ReferenceError':
   cloned = ReferenceError();
   break;
  case 'SyntaxError':
   cloned = SyntaxError();
   break;
  case 'TypeError':
   cloned = TypeError();
   break;
  case 'URIError':
   cloned = URIError();
   break;
  case 'CompileError':
   cloned = CompileError();
   break;
  case 'LinkError':
   cloned = LinkError();
   break;
  case 'RuntimeError':
   cloned = RuntimeError();
   break;
  default:
   cloned = Error();
  }
  deep = true;
  break;
 case 'DOMException':
  cloned = new DOMException(value.message, value.name);
  deep = true;
  break;
 case 'DataView':
 case 'Int8Array':
 case 'Uint8Array':
 case 'Uint8ClampedArray':
 case 'Int16Array':
 case 'Uint16Array':
 case 'Int32Array':
 case 'Uint32Array':
 case 'Float32Array':
 case 'Float64Array':
 case 'BigInt64Array':
 case 'BigUint64Array':
  C = global[type];
  if (!isObject(C))
   throwUnpolyfillable(type);
  cloned = new C(structuredCloneInternal(value.buffer, map), value.byteOffset, type === 'DataView' ? value.byteLength : value.length);
  break;
 case 'DOMQuad':
  try {
   cloned = new DOMQuad(structuredCloneInternal(value.p1, map), structuredCloneInternal(value.p2, map), structuredCloneInternal(value.p3, map), structuredCloneInternal(value.p4, map));
  } catch (error) {
   if (nativeRestrictedStructuredClone) {
    cloned = nativeRestrictedStructuredClone(value);
   } else
    throwUnpolyfillable(type);
  }
  break;
 case 'FileList':
  dataTransfer = createDataTransfer();
  if (dataTransfer) {
   for (i = 0, length = lengthOfArrayLike(value); i < length; i++) {
    dataTransfer.items.add(structuredCloneInternal(value[i], map));
   }
   cloned = dataTransfer.files;
  } else if (nativeRestrictedStructuredClone) {
   cloned = nativeRestrictedStructuredClone(value);
  } else
   throwUnpolyfillable(type);
  break;
 case 'ImageData':
  try {
   cloned = new ImageData(structuredCloneInternal(value.data, map), value.width, value.height, { colorSpace: value.colorSpace });
  } catch (error) {
   if (nativeRestrictedStructuredClone) {
    cloned = nativeRestrictedStructuredClone(value);
   } else
    throwUnpolyfillable(type);
  }
  break;
 default:
  if (nativeRestrictedStructuredClone) {
   cloned = nativeRestrictedStructuredClone(value);
  } else
   switch (type) {
   case 'BigInt':
    cloned = Object(value.valueOf());
    break;
   case 'Boolean':
    cloned = Object(thisBooleanValue(value));
    break;
   case 'Number':
    cloned = Object(thisNumberValue(value));
    break;
   case 'String':
    cloned = Object(thisStringValue(value));
    break;
   case 'Date':
    cloned = new Date(thisTimeValue(value));
    break;
   case 'ArrayBuffer':
    C = global.DataView;
    if (!C && typeof value.slice != 'function')
     throwUnpolyfillable(type);
    try {
     if (typeof value.slice == 'function' && !value.resizable) {
      cloned = value.slice(0);
     } else {
      length = value.byteLength;
      options = 'maxByteLength' in value ? { maxByteLength: value.maxByteLength } : undefined;
      cloned = new ArrayBuffer(length, options);
      source = new C(value);
      target = new C(cloned);
      for (i = 0; i < length; i++) {
       target.setUint8(i, source.getUint8(i));
      }
     }
    } catch (error) {
     throw new DOMException('ArrayBuffer is detached', DATA_CLONE_ERROR);
    }
    break;
   case 'SharedArrayBuffer':
    cloned = value;
    break;
   case 'Blob':
    try {
     cloned = value.slice(0, value.size, value.type);
    } catch (error) {
     throwUnpolyfillable(type);
    }
    break;
   case 'DOMPoint':
   case 'DOMPointReadOnly':
    C = global[type];
    try {
     cloned = C.fromPoint ? C.fromPoint(value) : new C(value.x, value.y, value.z, value.w);
    } catch (error) {
     throwUnpolyfillable(type);
    }
    break;
   case 'DOMRect':
   case 'DOMRectReadOnly':
    C = global[type];
    try {
     cloned = C.fromRect ? C.fromRect(value) : new C(value.x, value.y, value.width, value.height);
    } catch (error) {
     throwUnpolyfillable(type);
    }
    break;
   case 'DOMMatrix':
   case 'DOMMatrixReadOnly':
    C = global[type];
    try {
     cloned = C.fromMatrix ? C.fromMatrix(value) : new C(value);
    } catch (error) {
     throwUnpolyfillable(type);
    }
    break;
   case 'AudioData':
   case 'VideoFrame':
    if (!isCallable(value.clone))
     throwUnpolyfillable(type);
    try {
     cloned = value.clone();
    } catch (error) {
     throwUncloneable(type);
    }
    break;
   case 'File':
    try {
     cloned = new File([value], value.name, value);
    } catch (error) {
     throwUnpolyfillable(type);
    }
    break;
   case 'CropTarget':
   case 'CryptoKey':
   case 'FileSystemDirectoryHandle':
   case 'FileSystemFileHandle':
   case 'FileSystemHandle':
   case 'GPUCompilationInfo':
   case 'GPUCompilationMessage':
   case 'ImageBitmap':
   case 'RTCCertificate':
   case 'WebAssembly.Module':
    throwUnpolyfillable(type);
   default:
    throwUncloneable(type);
   }
 }
 mapSet(map, value, cloned);
 if (deep)
  switch (type) {
  case 'Array':
  case 'Object':
   keys = objectKeys(value);
   for (i = 0, length = lengthOfArrayLike(keys); i < length; i++) {
    key = keys[i];
    createProperty(cloned, key, structuredCloneInternal(value[key], map));
   }
   break;
  case 'Map':
   value.forEach(function (v, k) {
    mapSet(cloned, structuredCloneInternal(k, map), structuredCloneInternal(v, map));
   });
   break;
  case 'Set':
   value.forEach(function (v) {
    setAdd(cloned, structuredCloneInternal(v, map));
   });
   break;
  case 'Error':
   createNonEnumerableProperty(cloned, 'message', structuredCloneInternal(value.message, map));
   if (hasOwn(value, 'cause')) {
    createNonEnumerableProperty(cloned, 'cause', structuredCloneInternal(value.cause, map));
   }
   if (name == 'AggregateError') {
    cloned.errors = structuredCloneInternal(value.errors, map);
   }
  case 'DOMException':
   if (ERROR_STACK_INSTALLABLE) {
    createNonEnumerableProperty(cloned, 'stack', structuredCloneInternal(value.stack, map));
   }
  }
 return cloned;
};
var tryToTransfer = function (rawTransfer, map) {
 if (!isObject(rawTransfer))
  throw TypeError('Transfer option cannot be converted to a sequence');
 var transfer = [];
 iterate(rawTransfer, function (value) {
  push(transfer, anObject(value));
 });
 var i = 0;
 var length = lengthOfArrayLike(transfer);
 var value, type, C, transferredArray, transferred, canvas, context;
 if (PROPER_TRANSFER) {
  transferredArray = nativeStructuredClone(transfer, { transfer: transfer });
  while (i < length)
   mapSet(map, transfer[i], transferredArray[i++]);
 } else
  while (i < length) {
   value = transfer[i++];
   if (mapHas(map, value))
    throw new DOMException('Duplicate transferable', DATA_CLONE_ERROR);
   type = classof(value);
   switch (type) {
   case 'ImageBitmap':
    C = global.OffscreenCanvas;
    if (!isConstructor(C))
     throwUnpolyfillable(type, TRANSFERRING);
    try {
     canvas = new C(value.width, value.height);
     context = canvas.getContext('bitmaprenderer');
     context.transferFromImageBitmap(value);
     transferred = canvas.transferToImageBitmap();
    } catch (error) {
    }
    break;
   case 'AudioData':
   case 'VideoFrame':
    if (!isCallable(value.clone) || !isCallable(value.close))
     throwUnpolyfillable(type, TRANSFERRING);
    try {
     transferred = value.clone();
     value.close();
    } catch (error) {
    }
    break;
   case 'ArrayBuffer':
    if (!isCallable(value.transfer))
     throwUnpolyfillable(type, TRANSFERRING);
    transferred = value.transfer();
    break;
   case 'MediaSourceHandle':
   case 'MessagePort':
   case 'OffscreenCanvas':
   case 'ReadableStream':
   case 'TransformStream':
   case 'WritableStream':
    throwUnpolyfillable(type, TRANSFERRING);
   }
   if (transferred === undefined)
    throw new DOMException('This object cannot be transferred: ' + type, DATA_CLONE_ERROR);
   mapSet(map, value, transferred);
  }
};
$({
 global: true,
 enumerable: true,
 sham: !PROPER_TRANSFER,
 forced: FORCED_REPLACEMENT
}, {
 structuredClone: function structuredClone(value) {
  var options = validateArgumentsLength(arguments.length, 1) > 1 && !isNullOrUndefined(arguments[1]) ? anObject(arguments[1]) : undefined;
  var transfer = options ? options.transfer : undefined;
  var map;
  if (transfer !== undefined) {
   map = new Map();
   tryToTransfer(transfer, map);
  }
  return structuredCloneInternal(value, map);
 }
});

/***/ }),
/* 125 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
var fails = __w_pdfjs_require__(9);
var isCallable = __w_pdfjs_require__(23);
var classof = __w_pdfjs_require__(81);
var getBuiltIn = __w_pdfjs_require__(26);
var inspectSource = __w_pdfjs_require__(53);
var noop = function () {
};
var empty = [];
var construct = getBuiltIn('Reflect', 'construct');
var constructorRegExp = /^\s*(?:class|function)\b/;
var exec = uncurryThis(constructorRegExp.exec);
var INCORRECT_TO_STRING = !constructorRegExp.exec(noop);
var isConstructorModern = function isConstructor(argument) {
 if (!isCallable(argument))
  return false;
 try {
  construct(noop, empty, argument);
  return true;
 } catch (error) {
  return false;
 }
};
var isConstructorLegacy = function isConstructor(argument) {
 if (!isCallable(argument))
  return false;
 switch (classof(argument)) {
 case 'AsyncFunction':
 case 'GeneratorFunction':
 case 'AsyncGeneratorFunction':
  return false;
 }
 try {
  return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));
 } catch (error) {
  return true;
 }
};
isConstructorLegacy.sham = true;
module.exports = !construct || fails(function () {
 var called;
 return isConstructorModern(isConstructorModern.call) || !isConstructorModern(Object) || !isConstructorModern(function () {
  called = true;
 }) || called;
}) ? isConstructorLegacy : isConstructorModern;

/***/ }),
/* 126 */
/***/ ((module) => {

var $TypeError = TypeError;
module.exports = function (passed, required) {
 if (passed < required)
  throw $TypeError('Not enough arguments');
 return passed;
};

/***/ }),
/* 127 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var call = __w_pdfjs_require__(10);
var hasOwn = __w_pdfjs_require__(41);
var isPrototypeOf = __w_pdfjs_require__(27);
var regExpFlags = __w_pdfjs_require__(128);
var RegExpPrototype = RegExp.prototype;
module.exports = function (R) {
 var flags = R.flags;
 return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R) ? call(regExpFlags, R) : flags;
};

/***/ }),
/* 128 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

"use strict";

var anObject = __w_pdfjs_require__(49);
module.exports = function () {
 var that = anObject(this);
 var result = '';
 if (that.hasIndices)
  result += 'd';
 if (that.global)
  result += 'g';
 if (that.ignoreCase)
  result += 'i';
 if (that.multiline)
  result += 'm';
 if (that.dotAll)
  result += 's';
 if (that.unicode)
  result += 'u';
 if (that.unicodeSets)
  result += 'v';
 if (that.sticky)
  result += 'y';
 return result;
};

/***/ }),
/* 129 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
var MapPrototype = Map.prototype;
module.exports = {
 Map: Map,
 set: uncurryThis(MapPrototype.set),
 get: uncurryThis(MapPrototype.get),
 has: uncurryThis(MapPrototype.has),
 remove: uncurryThis(MapPrototype['delete']),
 proto: MapPrototype
};

/***/ }),
/* 130 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var uncurryThis = __w_pdfjs_require__(16);
var SetPrototype = Set.prototype;
module.exports = {
 Set: Set,
 add: uncurryThis(SetPrototype.add),
 has: uncurryThis(SetPrototype.has),
 remove: uncurryThis(SetPrototype['delete']),
 proto: SetPrototype
};

/***/ }),
/* 131 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var fails = __w_pdfjs_require__(9);
var createPropertyDescriptor = __w_pdfjs_require__(13);
module.exports = !fails(function () {
 var error = Error('a');
 if (!('stack' in error))
  return true;
 Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));
 return error.stack !== 7;
});

/***/ }),
/* 132 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var global = __w_pdfjs_require__(6);
var fails = __w_pdfjs_require__(9);
var V8 = __w_pdfjs_require__(30);
var IS_BROWSER = __w_pdfjs_require__(133);
var IS_DENO = __w_pdfjs_require__(134);
var IS_NODE = __w_pdfjs_require__(135);
var structuredClone = global.structuredClone;
module.exports = !!structuredClone && !fails(function () {
 if (IS_DENO && V8 > 92 || IS_NODE && V8 > 94 || IS_BROWSER && V8 > 97)
  return false;
 var buffer = new ArrayBuffer(8);
 var clone = structuredClone(buffer, { transfer: [buffer] });
 return buffer.byteLength != 0 || clone.byteLength != 8;
});

/***/ }),
/* 133 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var IS_DENO = __w_pdfjs_require__(134);
var IS_NODE = __w_pdfjs_require__(135);
module.exports = !IS_DENO && !IS_NODE && typeof window == 'object' && typeof document == 'object';

/***/ }),
/* 134 */
/***/ ((module) => {

module.exports = typeof Deno == 'object' && Deno && typeof Deno.version == 'object';

/***/ }),
/* 135 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var classof = __w_pdfjs_require__(17);
module.exports = typeof process != 'undefined' && classof(process) == 'process';

/***/ }),
/* 136 */
/***/ ((module, __unused_webpack_exports, __w_pdfjs_require__) => {

var global = __w_pdfjs_require__(6);
module.exports = global;

/***/ }),
/* 137 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0;exports.getDocument=getDocument;exports.version=void 0;var _util=__w_pdfjs_require__(1);var _annotation_storage=__w_pdfjs_require__(138);var _display_utils=__w_pdfjs_require__(141);var _font_loader=__w_pdfjs_require__(144);var _canvas=__w_pdfjs_require__(146);var _worker_options=__w_pdfjs_require__(149);var _is_node=__w_pdfjs_require__(145);var _message_handler=__w_pdfjs_require__(150);var _metadata=__w_pdfjs_require__(151);var _optional_content_config=__w_pdfjs_require__(152);var _transport_stream=__w_pdfjs_require__(153);var _xfa_text=__w_pdfjs_require__(154);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},"");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg);}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,"toString",function(){return"[object Generator]";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classStaticPrivateFieldSpecSet(receiver,classConstructor,descriptor,value){_classCheckPrivateStaticAccess(receiver,classConstructor);_classCheckPrivateStaticFieldDescriptor(descriptor,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}function _classStaticPrivateFieldSpecGet(receiver,classConstructor,descriptor){_classCheckPrivateStaticAccess(receiver,classConstructor);_classCheckPrivateStaticFieldDescriptor(descriptor,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classCheckPrivateStaticFieldDescriptor(descriptor,action){if(descriptor===undefined){throw new TypeError("attempted to "+action+" private static field before its declaration");}}function _classCheckPrivateStaticAccess(receiver,classConstructor){if(receiver!==classConstructor){throw new TypeError("Private static access of wrong provenance");}}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}var DEFAULT_RANGE_CHUNK_SIZE=65536;var RENDERING_CANCELLED_TIMEOUT=100;var DELAYED_CLEANUP_TIMEOUT=5000;var ServiceWorkerOptions={showUnverifiedSignatures:false};window.ServiceWorkerOptions=ServiceWorkerOptions;var DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;var DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;if(_is_node.isNodeJS){var _require=__w_pdfjs_require__(155),NodeCanvasFactory=_require.NodeCanvasFactory,NodeCMapReaderFactory=_require.NodeCMapReaderFactory,NodeFilterFactory=_require.NodeFilterFactory,NodeStandardFontDataFactory=_require.NodeStandardFontDataFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory;exports.DefaultFilterFactory=DefaultFilterFactory=NodeFilterFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory;}var createPDFNetworkStream;{if(_is_node.isNodeJS){var _require2=__w_pdfjs_require__(156),PDFNodeStream=_require2.PDFNodeStream;createPDFNetworkStream=function createPDFNetworkStream(params){return new PDFNodeStream(params);};}else{var _require3=__w_pdfjs_require__(159),PDFNetworkStream=_require3.PDFNetworkStream;var _require4=__w_pdfjs_require__(160),PDFFetchStream=_require4.PDFFetchStream;createPDFNetworkStream=function createPDFNetworkStream(params){return(0,_display_utils.isValidFetchUrl)(params.url)?new PDFFetchStream(params):new PDFNetworkStream(params);};}}function getDocument(src){var _src$password,_src$length;if(typeof src==="string"||src instanceof URL){src={url:src};}else if((0,_util.isArrayBuffer)(src)){src={data:src};}if(_typeof(src)!=="object"){throw new Error("Invalid parameter in getDocument, need parameter object.");}if(!src.url&&!src.data&&!src.range){throw new Error("Invalid parameter object: need either .data, .range or .url");}var task=new PDFDocumentLoadingTask();var docId=task.docId;var url=src.url?getUrlProp(src.url,src.baseHref):null;var data=src.data?getDataProp(src.data):null;var httpHeaders=src.httpHeaders||null;var withCredentials=src.withCredentials===true;var password=(_src$password=src.password)!==null&&_src$password!==void 0?_src$password:null;var rangeTransport=src.range instanceof PDFDataRangeTransport?src.range:null;var rangeChunkSize=Number.isInteger(src.rangeChunkSize)&&src.rangeChunkSize>0?src.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;var worker=src.worker instanceof PDFWorker?src.worker:null;var verbosity=src.verbosity;var docBaseUrl=typeof src.docBaseUrl==="string"&&!(0,_display_utils.isDataScheme)(src.docBaseUrl)?src.docBaseUrl:null;var cMapUrl=typeof src.cMapUrl==="function"?src.cMapUrl():typeof src.cMapUrl==="string"?src.cMapUrl:null;var cMapPacked=src.cMapPacked!==false;var CMapReaderFactory=src.CMapReaderFactory||DefaultCMapReaderFactory;var standardFontDataUrl=typeof src.standardFontDataUrl==="function"?src.standardFontDataUrl():typeof src.standardFontDataUrl==="string"?src.standardFontDataUrl:null;var StandardFontDataFactory=src.StandardFontDataFactory||DefaultStandardFontDataFactory;var ignoreErrors=src.stopAtErrors!==true;var maxImageSize=Number.isInteger(src.maxImageSize)&&src.maxImageSize>-1?src.maxImageSize:-1;var isEvalSupported=src.isEvalSupported!==false;var isOffscreenCanvasSupported=typeof src.isOffscreenCanvasSupported==="boolean"?src.isOffscreenCanvasSupported:!_is_node.isNodeJS;var canvasMaxAreaInBytes=Number.isInteger(src.canvasMaxAreaInBytes)?src.canvasMaxAreaInBytes:-1;var disableFontFace=typeof src.disableFontFace==="boolean"?src.disableFontFace:_is_node.isNodeJS;var fontExtraProperties=src.fontExtraProperties===true;var enableXfa=src.enableXfa===true;var ownerDocument=src.ownerDocument||globalThis.document;var disableRange=src.disableRange===true;var disableStream=src.disableStream===true;var disableAutoFetch=src.disableAutoFetch===true;var pdfBug=src.pdfBug===true;var length=rangeTransport?rangeTransport.length:(_src$length=src.length)!==null&&_src$length!==void 0?_src$length:NaN;var useSystemFonts=typeof src.useSystemFonts==="boolean"?src.useSystemFonts:!_is_node.isNodeJS&&!disableFontFace;var useWorkerFetch=typeof src.useWorkerFetch==="boolean"?src.useWorkerFetch:CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(cMapUrl,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(standardFontDataUrl,document.baseURI);var canvasFactory=src.canvasFactory||new DefaultCanvasFactory({ownerDocument:ownerDocument});var filterFactory=src.filterFactory||new DefaultFilterFactory({docId:docId,ownerDocument:ownerDocument});var styleElement=null;(0,_util.setVerbosityLevel)(verbosity);var transportFactory={canvasFactory:canvasFactory,filterFactory:filterFactory};if(!useWorkerFetch){transportFactory.cMapReaderFactory=new CMapReaderFactory({baseUrl:cMapUrl,isCompressed:cMapPacked});transportFactory.standardFontDataFactory=new StandardFontDataFactory({baseUrl:standardFontDataUrl});}if(!worker){var workerParams={verbosity:verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};worker=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams);task._worker=worker;}var fetchDocParams={docId:docId,apiVersion:'3.5.550',data:data,password:password,disableAutoFetch:disableAutoFetch,rangeChunkSize:rangeChunkSize,length:length,docBaseUrl:docBaseUrl,enableXfa:enableXfa,evaluatorOptions:{maxImageSize:maxImageSize,disableFontFace:disableFontFace,ignoreErrors:ignoreErrors,isEvalSupported:isEvalSupported,isOffscreenCanvasSupported:isOffscreenCanvasSupported,canvasMaxAreaInBytes:canvasMaxAreaInBytes,fontExtraProperties:fontExtraProperties,useSystemFonts:useSystemFonts,cMapUrl:useWorkerFetch?cMapUrl:null,standardFontDataUrl:useWorkerFetch?standardFontDataUrl:null}};var transportParams={ignoreErrors:ignoreErrors,isEvalSupported:isEvalSupported,disableFontFace:disableFontFace,fontExtraProperties:fontExtraProperties,enableXfa:enableXfa,ownerDocument:ownerDocument,disableAutoFetch:disableAutoFetch,pdfBug:pdfBug,styleElement:styleElement};worker.promise.then(function(){if(task.destroyed){throw new Error("Loading aborted");}var workerIdPromise=_fetchDocument(worker,fetchDocParams);var networkStreamPromise=new Promise(function(resolve){var networkStream;if(rangeTransport){networkStream=new _transport_stream.PDFDataTransportStream({length:length,initialData:rangeTransport.initialData,progressiveDone:rangeTransport.progressiveDone,contentDispositionFilename:rangeTransport.contentDispositionFilename,disableRange:disableRange,disableStream:disableStream},rangeTransport);}else if(!data){networkStream=createPDFNetworkStream({url:url,length:length,httpHeaders:httpHeaders,withCredentials:withCredentials,rangeChunkSize:rangeChunkSize,disableRange:disableRange,disableStream:disableStream});}resolve(networkStream);});return Promise.all([workerIdPromise,networkStreamPromise]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),workerId=_ref2[0],networkStream=_ref2[1];if(task.destroyed){throw new Error("Loading aborted");}var messageHandler=new _message_handler.MessageHandler(docId,workerId,worker.port);var transport=new WorkerTransport(messageHandler,task,networkStream,transportParams,transportFactory);task._transport=transport;messageHandler.send("showUnverifiedSignatures",window.ServiceWorkerOptions.showUnverifiedSignatures);messageHandler.send("Ready",null);});}).catch(task._capability.reject);return task;}function _fetchDocument(_x2,_x3){return _fetchDocument2.apply(this,arguments);}function _fetchDocument2(){_fetchDocument2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(worker,source){var workerId;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(!worker.destroyed){_context6.next=2;break;}throw new Error("Worker was destroyed");case 2:_context6.next=4;return worker.messageHandler.sendWithPromise("GetDocRequest",source,source.data?[source.data.buffer]:null);case 4:workerId=_context6.sent;if(!worker.destroyed){_context6.next=7;break;}throw new Error("Worker was destroyed");case 7:return _context6.abrupt("return",workerId);case 8:case"end":return _context6.stop();}},_callee6);}));return _fetchDocument2.apply(this,arguments);}function getUrlProp(val,baseHref){if(val instanceof URL){return val.href;}try{if(baseHref){return new URL(val,window.location.origin+baseHref).href;}else{return new URL(val,window.location).href;}}catch(ex){if(_is_node.isNodeJS&&typeof val==="string"){return val;}}throw new Error("Invalid PDF url data: "+"either string or URL-object is expected in the url property.");}function getDataProp(val){if(_is_node.isNodeJS&&typeof Buffer!=="undefined"&&val instanceof Buffer){(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`.");return new Uint8Array(val);}if(val instanceof Uint8Array&&val.byteLength===val.buffer.byteLength){return val;}if(typeof val==="string"){return(0,_util.stringToBytes)(val);}if(_typeof(val)==="object"&&!isNaN(val===null||val===void 0?void 0:val.length)||(0,_util.isArrayBuffer)(val)){return new Uint8Array(val);}throw new Error("Invalid PDF binary data: either TypedArray, "+"string, or array-like object is expected in the data property.");}var PDFDocumentLoadingTask=/*#__PURE__*/function(){function PDFDocumentLoadingTask(){var _PDFDocumentLoadingTa,_PDFDocumentLoadingTa2;_classCallCheck(this,PDFDocumentLoadingTask);this._capability=(0,_util.createPromiseCapability)();this._transport=null;this._worker=null;this.docId="d".concat((_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(_PDFDocumentLoadingTa=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),_PDFDocumentLoadingTa2=_PDFDocumentLoadingTa++,_PDFDocumentLoadingTa)),_PDFDocumentLoadingTa2));this.destroyed=false;this.onPassword=null;this.onProgress=null;}_createClass(PDFDocumentLoadingTask,[{key:"promise",get:function get(){return this._capability.promise;}},{key:"destroy",value:function(){var _destroy=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _this$_transport;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:this.destroyed=true;_context.next=3;return(_this$_transport=this._transport)===null||_this$_transport===void 0?void 0:_this$_transport.destroy();case 3:this._transport=null;if(this._worker){this._worker.destroy();this._worker=null;}case 5:case"end":return _context.stop();}},_callee,this);}));function destroy(){return _destroy.apply(this,arguments);}return destroy;}()}]);return PDFDocumentLoadingTask;}();exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:true,value:0};var PDFDataRangeTransport=/*#__PURE__*/function(){function PDFDataRangeTransport(length,initialData){var progressiveDone=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var contentDispositionFilename=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;_classCallCheck(this,PDFDataRangeTransport);this.length=length;this.initialData=initialData;this.progressiveDone=progressiveDone;this.contentDispositionFilename=contentDispositionFilename;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=(0,_util.createPromiseCapability)();}_createClass(PDFDataRangeTransport,[{key:"addRangeListener",value:function addRangeListener(listener){this._rangeListeners.push(listener);}},{key:"addProgressListener",value:function addProgressListener(listener){this._progressListeners.push(listener);}},{key:"addProgressiveReadListener",value:function addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener);}},{key:"addProgressiveDoneListener",value:function addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener);}},{key:"onDataRange",value:function onDataRange(begin,chunk){var _iterator=_createForOfIteratorHelper(this._rangeListeners),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var listener=_step.value;listener(begin,chunk);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:"onDataProgress",value:function onDataProgress(loaded,total){var _this=this;this._readyCapability.promise.then(function(){var _iterator2=_createForOfIteratorHelper(_this._progressListeners),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var listener=_step2.value;listener(loaded,total);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}});}},{key:"onDataProgressiveRead",value:function onDataProgressiveRead(chunk){var _this2=this;this._readyCapability.promise.then(function(){var _iterator3=_createForOfIteratorHelper(_this2._progressiveReadListeners),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var listener=_step3.value;listener(chunk);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}});}},{key:"onDataProgressiveDone",value:function onDataProgressiveDone(){var _this3=this;this._readyCapability.promise.then(function(){var _iterator4=_createForOfIteratorHelper(_this3._progressiveDoneListeners),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var listener=_step4.value;listener();}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}});}},{key:"transportReady",value:function transportReady(){this._readyCapability.resolve();}},{key:"requestDataRange",value:function requestDataRange(begin,end){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange");}},{key:"abort",value:function abort(){}}]);return PDFDataRangeTransport;}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=/*#__PURE__*/function(){function PDFDocumentProxy(pdfInfo,transport){_classCallCheck(this,PDFDocumentProxy);this._pdfInfo=pdfInfo;this._transport=transport;}_createClass(PDFDocumentProxy,[{key:"annotationStorage",get:function get(){return this._transport.annotationStorage;}},{key:"filterFactory",get:function get(){return this._transport.filterFactory;}},{key:"numPages",get:function get(){return this._pdfInfo.numPages;}},{key:"fingerprints",get:function get(){return this._pdfInfo.fingerprints;}},{key:"isPureXfa",get:function get(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa);}},{key:"allXfaHtml",get:function get(){return this._transport._htmlForXfa;}},{key:"getPage",value:function getPage(pageNumber){return this._transport.getPage(pageNumber);}},{key:"getPageIndex",value:function getPageIndex(ref){return this._transport.getPageIndex(ref);}},{key:"getDestinations",value:function getDestinations(){return this._transport.getDestinations();}},{key:"getDestination",value:function getDestination(id){return this._transport.getDestination(id);}},{key:"getPageLabels",value:function getPageLabels(){return this._transport.getPageLabels();}},{key:"getPageLayout",value:function getPageLayout(){return this._transport.getPageLayout();}},{key:"getPageMode",value:function getPageMode(){return this._transport.getPageMode();}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this._transport.getViewerPreferences();}},{key:"getOpenAction",value:function getOpenAction(){return this._transport.getOpenAction();}},{key:"getAttachments",value:function getAttachments(){return this._transport.getAttachments();}},{key:"getJavaScript",value:function getJavaScript(){return this._transport.getJavaScript();}},{key:"getJSActions",value:function getJSActions(){return this._transport.getDocJSActions();}},{key:"getOutline",value:function getOutline(){return this._transport.getOutline();}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this._transport.getOptionalContentConfig();}},{key:"getPermissions",value:function getPermissions(){return this._transport.getPermissions();}},{key:"getMetadata",value:function getMetadata(){return this._transport.getMetadata();}},{key:"getMarkInfo",value:function getMarkInfo(){return this._transport.getMarkInfo();}},{key:"getData",value:function getData(){return this._transport.getData();}},{key:"saveDocument",value:function saveDocument(){return this._transport.saveDocument();}},{key:"getDownloadInfo",value:function getDownloadInfo(){return this._transport.downloadInfoCapability.promise;}},{key:"cleanup",value:function cleanup(){var keepLoadedFonts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._transport.startCleanup(keepLoadedFonts||this.isPureXfa);}},{key:"destroy",value:function destroy(){return this.loadingTask.destroy();}},{key:"loadingParams",get:function get(){return this._transport.loadingParams;}},{key:"loadingTask",get:function get(){return this._transport.loadingTask;}},{key:"getFieldObjects",value:function getFieldObjects(){return this._transport.getFieldObjects();}},{key:"hasJSActions",value:function hasJSActions(){return this._transport.hasJSActions();}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this._transport.getCalculationOrderIds();}}]);return PDFDocumentProxy;}();exports.PDFDocumentProxy=PDFDocumentProxy;var _delayedCleanupTimeout=/*#__PURE__*/new WeakMap();var _pendingCleanup=/*#__PURE__*/new WeakMap();var _tryCleanup=/*#__PURE__*/new WeakSet();var _abortDelayedCleanup=/*#__PURE__*/new WeakSet();var PDFPageProxy=/*#__PURE__*/function(){function PDFPageProxy(pageIndex,pageInfo,transport){var pdfBug=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;_classCallCheck(this,PDFPageProxy);_classPrivateMethodInitSpec(this,_abortDelayedCleanup);_classPrivateMethodInitSpec(this,_tryCleanup);_classPrivateFieldInitSpec(this,_delayedCleanupTimeout,{writable:true,value:null});_classPrivateFieldInitSpec(this,_pendingCleanup,{writable:true,value:false});this._pageIndex=pageIndex;this._pageInfo=pageInfo;this._transport=transport;this._stats=pdfBug?new _display_utils.StatTimer():null;this._pdfBug=pdfBug;this.commonObjs=transport.commonObjs;this.objs=new PDFObjects();this._maybeCleanupAfterRender=false;this._intentStates=new Map();this.destroyed=false;}_createClass(PDFPageProxy,[{key:"pageNumber",get:function get(){return this._pageIndex+1;}},{key:"rotate",get:function get(){return this._pageInfo.rotate;}},{key:"ref",get:function get(){return this._pageInfo.ref;}},{key:"userUnit",get:function get(){return this._pageInfo.userUnit;}},{key:"view",get:function get(){return this._pageInfo.view;}},{key:"getViewport",value:function getViewport(){var _ref3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},scale=_ref3.scale,_ref3$rotation=_ref3.rotation,rotation=_ref3$rotation===void 0?this.rotate:_ref3$rotation,_ref3$offsetX=_ref3.offsetX,offsetX=_ref3$offsetX===void 0?0:_ref3$offsetX,_ref3$offsetY=_ref3.offsetY,offsetY=_ref3$offsetY===void 0?0:_ref3$offsetY,_ref3$dontFlip=_ref3.dontFlip,dontFlip=_ref3$dontFlip===void 0?false:_ref3$dontFlip;return new _display_utils.PageViewport({viewBox:this.view,scale:scale,rotation:rotation,offsetX:offsetX,offsetY:offsetY,dontFlip:dontFlip});}},{key:"getAnnotations",value:function getAnnotations(){var _ref4=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref4$intent=_ref4.intent,intent=_ref4$intent===void 0?"display":_ref4$intent;var intentArgs=this._transport.getRenderingIntent(intent);return this._transport.getAnnotations(this._pageIndex,intentArgs.renderingIntent);}},{key:"getJSActions",value:function getJSActions(){return this._transport.getPageJSActions(this._pageIndex);}},{key:"isPureXfa",get:function get(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa);}},{key:"getXfa",value:function(){var _getXfa=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _this$_transport$_htm;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",((_this$_transport$_htm=this._transport._htmlForXfa)===null||_this$_transport$_htm===void 0?void 0:_this$_transport$_htm.children[this._pageIndex])||null);case 1:case"end":return _context2.stop();}},_callee2,this);}));function getXfa(){return _getXfa.apply(this,arguments);}return getXfa;}()},{key:"render",value:function render(_ref5){var _arguments$,_this$_stats,_this4=this,_intentState;var canvasContext=_ref5.canvasContext,viewport=_ref5.viewport,_ref5$intent=_ref5.intent,intent=_ref5$intent===void 0?"display":_ref5$intent,_ref5$annotationMode=_ref5.annotationMode,annotationMode=_ref5$annotationMode===void 0?_util.AnnotationMode.ENABLE:_ref5$annotationMode,_ref5$transform=_ref5.transform,transform=_ref5$transform===void 0?null:_ref5$transform,_ref5$background=_ref5.background,background=_ref5$background===void 0?null:_ref5$background,_ref5$optionalContent=_ref5.optionalContentConfigPromise,optionalContentConfigPromise=_ref5$optionalContent===void 0?null:_ref5$optionalContent,_ref5$annotationCanva=_ref5.annotationCanvasMap,annotationCanvasMap=_ref5$annotationCanva===void 0?null:_ref5$annotationCanva,_ref5$pageColors=_ref5.pageColors,pageColors=_ref5$pageColors===void 0?null:_ref5$pageColors,_ref5$printAnnotation=_ref5.printAnnotationStorage,printAnnotationStorage=_ref5$printAnnotation===void 0?null:_ref5$printAnnotation;if((_arguments$=arguments[0])!==null&&_arguments$!==void 0&&_arguments$.canvasFactory){throw new Error("render no longer accepts the `canvasFactory`-option, "+"please pass it to the `getDocument`-function instead.");}(_this$_stats=this._stats)===null||_this$_stats===void 0?void 0:_this$_stats.time("Overall");var intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage);_classPrivateFieldSet(this,_pendingCleanup,false);_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this);if(!optionalContentConfigPromise){optionalContentConfigPromise=this._transport.getOptionalContentConfig();}var intentState=this._intentStates.get(intentArgs.cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(intentArgs.cacheKey,intentState);}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}var intentPrint=!!(intentArgs.renderingIntent&_util.RenderingIntentFlag.PRINT);if(!intentState.displayReadyCapability){var _this$_stats2;intentState.displayReadyCapability=(0,_util.createPromiseCapability)();intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};(_this$_stats2=this._stats)===null||_this$_stats2===void 0?void 0:_this$_stats2.time("Page Request");this._pumpOperatorList(intentArgs);}var complete=function complete(error){var _this4$_stats,_this4$_stats2;intentState.renderTasks.delete(internalRenderTask);if(_this4._maybeCleanupAfterRender||intentPrint){_classPrivateFieldSet(_this4,_pendingCleanup,true);}_classPrivateMethodGet(_this4,_tryCleanup,_tryCleanup2).call(_this4,!intentPrint);if(error){internalRenderTask.capability.reject(error);_this4._abortOperatorList({intentState:intentState,reason:error instanceof Error?error:new Error(error)});}else{internalRenderTask.capability.resolve();}(_this4$_stats=_this4._stats)===null||_this4$_stats===void 0?void 0:_this4$_stats.timeEnd("Rendering");(_this4$_stats2=_this4._stats)===null||_this4$_stats2===void 0?void 0:_this4$_stats2.timeEnd("Overall");};var internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext:canvasContext,viewport:viewport,transform:transform,background:background},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:annotationCanvasMap,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!intentPrint,pdfBug:this._pdfBug,pageColors:pageColors});((_intentState=intentState).renderTasks||(_intentState.renderTasks=new Set())).add(internalRenderTask);var renderTask=internalRenderTask.task;Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then(function(_ref6){var _this4$_stats3;var _ref7=_slicedToArray(_ref6,2),transparency=_ref7[0],optionalContentConfig=_ref7[1];if(_classPrivateFieldGet(_this4,_pendingCleanup)){complete();return;}(_this4$_stats3=_this4._stats)===null||_this4$_stats3===void 0?void 0:_this4$_stats3.time("Rendering");internalRenderTask.initializeGraphics({transparency:transparency,optionalContentConfig:optionalContentConfig});internalRenderTask.operatorListChanged();}).catch(complete);return renderTask;}},{key:"getOperatorList",value:function getOperatorList(){var _ref8=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref8$intent=_ref8.intent,intent=_ref8$intent===void 0?"display":_ref8$intent,_ref8$annotationMode=_ref8.annotationMode,annotationMode=_ref8$annotationMode===void 0?_util.AnnotationMode.ENABLE:_ref8$annotationMode,_ref8$printAnnotation=_ref8.printAnnotationStorage,printAnnotationStorage=_ref8$printAnnotation===void 0?null:_ref8$printAnnotation;function operatorListChanged(){if(intentState.operatorList.lastChunk){intentState.opListReadCapability.resolve(intentState.operatorList);intentState.renderTasks.delete(opListTask);}}var intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,true);var intentState=this._intentStates.get(intentArgs.cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(intentArgs.cacheKey,intentState);}var opListTask;if(!intentState.opListReadCapability){var _intentState2,_this$_stats3;opListTask=Object.create(null);opListTask.operatorListChanged=operatorListChanged;intentState.opListReadCapability=(0,_util.createPromiseCapability)();((_intentState2=intentState).renderTasks||(_intentState2.renderTasks=new Set())).add(opListTask);intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};(_this$_stats3=this._stats)===null||_this$_stats3===void 0?void 0:_this$_stats3.time("Page Request");this._pumpOperatorList(intentArgs);}return intentState.opListReadCapability.promise;}},{key:"streamTextContent",value:function streamTextContent(){var _ref9=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref9$includeMarkedCo=_ref9.includeMarkedContent,includeMarkedContent=_ref9$includeMarkedCo===void 0?false:_ref9$includeMarkedCo;var TEXT_CONTENT_CHUNK_SIZE=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:includeMarkedContent===true},{highWaterMark:TEXT_CONTENT_CHUNK_SIZE,size:function size(textContent){return textContent.items.length;}});}},{key:"getTextContent",value:function getTextContent(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(this._transport._htmlForXfa){return this.getXfa().then(function(xfa){return _xfa_text.XfaText.textContent(xfa);});}var readableStream=this.streamTextContent(params);return new Promise(function(resolve,reject){function pump(){reader.read().then(function(_ref10){var _textContent$items;var value=_ref10.value,done=_ref10.done;if(done){resolve(textContent);return;}Object.assign(textContent.styles,value.styles);(_textContent$items=textContent.items).push.apply(_textContent$items,_toConsumableArray(value.items));pump();},reject);}var reader=readableStream.getReader();var textContent={items:[],styles:Object.create(null)};pump();});}},{key:"getStructTree",value:function getStructTree(){return this._transport.getStructTree(this._pageIndex);}},{key:"_destroy",value:function _destroy(){this.destroyed=true;var waitOn=[];var _iterator5=_createForOfIteratorHelper(this._intentStates.values()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var intentState=_step5.value;this._abortOperatorList({intentState:intentState,reason:new Error("Page was destroyed."),force:true});if(intentState.opListReadCapability){continue;}var _iterator6=_createForOfIteratorHelper(intentState.renderTasks),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var internalRenderTask=_step6.value;waitOn.push(internalRenderTask.completed);internalRenderTask.cancel();}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}this.objs.clear();_classPrivateFieldSet(this,_pendingCleanup,false);_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this);return Promise.all(waitOn);}},{key:"cleanup",value:function cleanup(){var resetStats=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_classPrivateFieldSet(this,_pendingCleanup,true);var success=_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,false);if(resetStats&&success){this._stats&&(this._stats=new _display_utils.StatTimer());}return success;}},{key:"_startRenderPage",value:function _startRenderPage(transparency,cacheKey){var _this$_stats4,_intentState$displayR;var intentState=this._intentStates.get(cacheKey);if(!intentState){return;}(_this$_stats4=this._stats)===null||_this$_stats4===void 0?void 0:_this$_stats4.timeEnd("Page Request");(_intentState$displayR=intentState.displayReadyCapability)===null||_intentState$displayR===void 0?void 0:_intentState$displayR.resolve(transparency);}},{key:"_renderPageChunk",value:function _renderPageChunk(operatorListChunk,intentState){for(var i=0,ii=operatorListChunk.length;i<ii;i++){intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);}intentState.operatorList.lastChunk=operatorListChunk.lastChunk;intentState.operatorList.separateAnnots=operatorListChunk.separateAnnots;var _iterator7=_createForOfIteratorHelper(intentState.renderTasks),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var internalRenderTask=_step7.value;internalRenderTask.operatorListChanged();}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}if(operatorListChunk.lastChunk){_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,true);}}},{key:"_pumpOperatorList",value:function _pumpOperatorList(_ref11){var _this5=this;var renderingIntent=_ref11.renderingIntent,cacheKey=_ref11.cacheKey,annotationStorageMap=_ref11.annotationStorageMap;var readableStream=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:renderingIntent,cacheKey:cacheKey,annotationStorage:annotationStorageMap});var reader=readableStream.getReader();var intentState=this._intentStates.get(cacheKey);intentState.streamReader=reader;var pump=function pump(){reader.read().then(function(_ref12){var value=_ref12.value,done=_ref12.done;if(done){intentState.streamReader=null;return;}if(_this5._transport.destroyed){return;}_this5._renderPageChunk(value,intentState);pump();},function(reason){intentState.streamReader=null;if(_this5._transport.destroyed){return;}if(intentState.operatorList){intentState.operatorList.lastChunk=true;var _iterator8=_createForOfIteratorHelper(intentState.renderTasks),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var internalRenderTask=_step8.value;internalRenderTask.operatorListChanged();}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}_classPrivateMethodGet(_this5,_tryCleanup,_tryCleanup2).call(_this5,true);}if(intentState.displayReadyCapability){intentState.displayReadyCapability.reject(reason);}else if(intentState.opListReadCapability){intentState.opListReadCapability.reject(reason);}else{throw reason;}});};pump();}},{key:"_abortOperatorList",value:function _abortOperatorList(_ref13){var _this6=this;var intentState=_ref13.intentState,reason=_ref13.reason,_ref13$force=_ref13.force,force=_ref13$force===void 0?false:_ref13$force;if(!intentState.streamReader){return;}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}if(!force){if(intentState.renderTasks.size>0){return;}if(reason instanceof _display_utils.RenderingCancelledException){var delay=RENDERING_CANCELLED_TIMEOUT;if(reason.extraDelay>0&&reason.extraDelay<1000){delay+=reason.extraDelay;}intentState.streamReaderCancelTimeout=setTimeout(function(){intentState.streamReaderCancelTimeout=null;_this6._abortOperatorList({intentState:intentState,reason:reason,force:true});},delay);return;}}intentState.streamReader.cancel(new _util.AbortException(reason.message)).catch(function(){});intentState.streamReader=null;if(this._transport.destroyed){return;}var _iterator9=_createForOfIteratorHelper(this._intentStates),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step9$value=_slicedToArray(_step9.value,2),curCacheKey=_step9$value[0],curIntentState=_step9$value[1];if(curIntentState===intentState){this._intentStates.delete(curCacheKey);break;}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}this.cleanup();}},{key:"stats",get:function get(){return this._stats;}}]);return PDFPageProxy;}();exports.PDFPageProxy=PDFPageProxy;function _tryCleanup2(){var _this17=this;var delayed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this);if(!_classPrivateFieldGet(this,_pendingCleanup)){return false;}if(delayed){_classPrivateFieldSet(this,_delayedCleanupTimeout,setTimeout(function(){_classPrivateFieldSet(_this17,_delayedCleanupTimeout,null);_classPrivateMethodGet(_this17,_tryCleanup,_tryCleanup2).call(_this17,false);},DELAYED_CLEANUP_TIMEOUT));return false;}var _iterator13=_createForOfIteratorHelper(this._intentStates.values()),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _step13$value=_step13.value,renderTasks=_step13$value.renderTasks,operatorList=_step13$value.operatorList;if(renderTasks.size>0||!operatorList.lastChunk){return false;}}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}this._intentStates.clear();this.objs.clear();_classPrivateFieldSet(this,_pendingCleanup,false);return true;}function _abortDelayedCleanup2(){if(_classPrivateFieldGet(this,_delayedCleanupTimeout)){clearTimeout(_classPrivateFieldGet(this,_delayedCleanupTimeout));_classPrivateFieldSet(this,_delayedCleanupTimeout,null);}}var _listeners=/*#__PURE__*/new WeakMap();var _deferred=/*#__PURE__*/new WeakMap();var LoopbackPort=/*#__PURE__*/function(){function LoopbackPort(){_classCallCheck(this,LoopbackPort);_classPrivateFieldInitSpec(this,_listeners,{writable:true,value:new Set()});_classPrivateFieldInitSpec(this,_deferred,{writable:true,value:Promise.resolve()});}_createClass(LoopbackPort,[{key:"postMessage",value:function postMessage(obj,transfer){var _this7=this;var event={data:structuredClone(obj,transfer?{transfer:transfer}:null)};_classPrivateFieldGet(this,_deferred).then(function(){var _iterator10=_createForOfIteratorHelper(_classPrivateFieldGet(_this7,_listeners)),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var listener=_step10.value;listener.call(_this7,event);}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}});}},{key:"addEventListener",value:function addEventListener(name,listener){_classPrivateFieldGet(this,_listeners).add(listener);}},{key:"removeEventListener",value:function removeEventListener(name,listener){_classPrivateFieldGet(this,_listeners).delete(listener);}},{key:"terminate",value:function terminate(){_classPrivateFieldGet(this,_listeners).clear();}}]);return LoopbackPort;}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:false,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof require==="function"){PDFWorkerUtil.isWorkerDisabled=true;PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";}else if((typeof document==="undefined"?"undefined":_typeof(document))==="object"){var _document,_document$currentScri;var pdfjsFilePath=(_document=document)===null||_document===void 0?void 0:(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;if(pdfjsFilePath){PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2");}}PDFWorkerUtil.isSameOrigin=function(baseUrl,otherUrl){var base;try{base=new URL(baseUrl);if(!base.origin||base.origin==="null"){return false;}}catch(e){return false;}var other=new URL(otherUrl,base);return base.origin===other.origin;};PDFWorkerUtil.createCDNWrapper=function(url){var wrapper="importScripts(\"".concat(url,"\");");return URL.createObjectURL(new Blob([wrapper]));};}var _generateTrustedURL=/*#__PURE__*/new WeakSet();var PDFWorker=/*#__PURE__*/function(){function PDFWorker(){var _ref14=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref14$name=_ref14.name,name=_ref14$name===void 0?null:_ref14$name,_ref14$port=_ref14.port,port=_ref14$port===void 0?null:_ref14$port,_ref14$verbosity=_ref14.verbosity,verbosity=_ref14$verbosity===void 0?(0,_util.getVerbosityLevel)():_ref14$verbosity;_classCallCheck(this,PDFWorker);_classPrivateMethodInitSpec(this,_generateTrustedURL);if(port&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(port)){throw new Error("Cannot use more than one PDFWorker per port.");}this.name=name;this.destroyed=false;this.verbosity=verbosity;this._readyCapability=(0,_util.createPromiseCapability)();this._port=null;this._webWorker=null;this._messageHandler=null;if(port){_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(port,this);this._initializeFromPort(port);return;}this._initialize();}_createClass(PDFWorker,[{key:"promise",get:function get(){return this._readyCapability.promise;}},{key:"port",get:function get(){return this._port;}},{key:"messageHandler",get:function get(){return this._messageHandler;}},{key:"_initializeFromPort",value:function _initializeFromPort(port){this._port=port;this._messageHandler=new _message_handler.MessageHandler("main","worker",port);this._messageHandler.on("ready",function(){});this._readyCapability.resolve();this._messageHandler.send("configure",{verbosity:this.verbosity});}},{key:"_initialize",value:function _initialize(){var _this8=this;if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var workerSrc=PDFWorker.workerSrc;try{if(!PDFWorkerUtil.isSameOrigin(window.location.href,workerSrc)){workerSrc=PDFWorkerUtil.createCDNWrapper(new URL(workerSrc,window.location).href);}var worker=new Worker(_classPrivateMethodGet(this,_generateTrustedURL,_generateTrustedURL2).call(this,workerSrc));var messageHandler=new _message_handler.MessageHandler("main","worker",worker);var terminateEarly=function terminateEarly(){worker.removeEventListener("error",onWorkerError);messageHandler.destroy();worker.terminate();if(_this8.destroyed){_this8._readyCapability.reject(new Error("Worker was destroyed"));}else{_this8._setupFakeWorker();}};var onWorkerError=function onWorkerError(){if(!_this8._webWorker){terminateEarly();}};worker.addEventListener("error",onWorkerError);messageHandler.on("test",function(data){worker.removeEventListener("error",onWorkerError);if(_this8.destroyed){terminateEarly();return;}if(data){_this8._messageHandler=messageHandler;_this8._port=worker;_this8._webWorker=worker;_this8._readyCapability.resolve();messageHandler.send("configure",{verbosity:_this8.verbosity});}else{_this8._setupFakeWorker();messageHandler.destroy();worker.terminate();}});messageHandler.on("ready",function(data){worker.removeEventListener("error",onWorkerError);if(_this8.destroyed){terminateEarly();return;}try{sendTest();}catch(e){_this8._setupFakeWorker();}});var sendTest=function sendTest(){var testObj=new Uint8Array();messageHandler.send("test",testObj,[testObj.buffer]);};sendTest();return;}catch(e){(0,_util.info)("The worker has been disabled.");}}this._setupFakeWorker();}},{key:"_setupFakeWorker",value:function _setupFakeWorker(){var _this9=this;if(!PDFWorkerUtil.isWorkerDisabled){(0,_util.warn)("Setting up fake worker.");PDFWorkerUtil.isWorkerDisabled=true;}PDFWorker._setupFakeWorkerGlobal.then(function(WorkerMessageHandler){if(_this9.destroyed){_this9._readyCapability.reject(new Error("Worker was destroyed"));return;}var port=new LoopbackPort();_this9._port=port;var id="fake".concat(PDFWorkerUtil.fakeWorkerId++);var workerHandler=new _message_handler.MessageHandler(id+"_worker",id,port);WorkerMessageHandler.setup(workerHandler,port);var messageHandler=new _message_handler.MessageHandler(id,id+"_worker",port);_this9._messageHandler=messageHandler;_this9._readyCapability.resolve();messageHandler.send("configure",{verbosity:_this9.verbosity});}).catch(function(reason){_this9._readyCapability.reject(new Error("Setting up fake worker failed: \"".concat(reason.message,"\".")));});}},{key:"destroy",value:function destroy(){this.destroyed=true;if(this._webWorker){this._webWorker.terminate();this._webWorker=null;}_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null;}}}],[{key:"fromPort",value:function fromPort(params){if(!(params!==null&&params!==void 0&&params.port)){throw new Error("PDFWorker.fromPort - invalid method signature.");}if(_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(params.port)){return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(params.port);}return new PDFWorker(params);}},{key:"workerSrc",get:function get(){if(_worker_options.GlobalWorkerOptions.workerSrc){if(_worker_options.GlobalWorkerOptions.workerSrc.constructor.name==="Function"){return _worker_options.GlobalWorkerOptions.workerSrc();}return _worker_options.GlobalWorkerOptions.workerSrc;}if(PDFWorkerUtil.fallbackWorkerSrc!==null){if(!_is_node.isNodeJS){(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.');}return PDFWorkerUtil.fallbackWorkerSrc;}throw new Error('No "GlobalWorkerOptions.workerSrc" specified.');}},{key:"_mainThreadWorkerMessageHandler",get:function get(){try{var _globalThis$pdfjsWork;return((_globalThis$pdfjsWork=globalThis.pdfjsWorker)===null||_globalThis$pdfjsWork===void 0?void 0:_globalThis$pdfjsWork.WorkerMessageHandler)||null;}catch(ex){return null;}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this10=this;var loader=/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var mainWorkerMessageHandler,worker;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:mainWorkerMessageHandler=_this10._mainThreadWorkerMessageHandler;if(!mainWorkerMessageHandler){_context3.next=3;break;}return _context3.abrupt("return",mainWorkerMessageHandler);case 3:if(!(_is_node.isNodeJS&&typeof require==="function")){_context3.next=6;break;}worker=eval("require")(_this10.workerSrc);return _context3.abrupt("return",worker.WorkerMessageHandler);case 6:_context3.next=8;return(0,_display_utils.loadScript)(_this10.workerSrc);case 8:return _context3.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context3.stop();}},_callee3);}));return function loader(){return _ref15.apply(this,arguments);};}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader());}}]);return PDFWorker;}();exports.PDFWorker=PDFWorker;function _generateTrustedURL2(sourcePath){if(window.trustedTypes){var sanitizer=window.trustedTypes.createPolicy("foo",{createScriptURL:function createScriptURL(url){return url;}});return sanitizer.createScriptURL(sourcePath);}return sourcePath;}var _workerPorts={writable:true,value:new WeakMap()};var _methodPromises=/*#__PURE__*/new WeakMap();var _pageCache=/*#__PURE__*/new WeakMap();var _pagePromises=/*#__PURE__*/new WeakMap();var _cacheSimpleMethod=/*#__PURE__*/new WeakSet();var WorkerTransport=/*#__PURE__*/function(){function WorkerTransport(messageHandler,loadingTask,networkStream,params,factory){_classCallCheck(this,WorkerTransport);_classPrivateMethodInitSpec(this,_cacheSimpleMethod);_classPrivateFieldInitSpec(this,_methodPromises,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_pageCache,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_pagePromises,{writable:true,value:new Map()});this.messageHandler=messageHandler;this.loadingTask=loadingTask;this.commonObjs=new PDFObjects();this.fontLoader=new _font_loader.FontLoader({ownerDocument:params.ownerDocument,styleElement:params.styleElement});this._params=params;this.canvasFactory=factory.canvasFactory;this.filterFactory=factory.filterFactory;this.cMapReaderFactory=factory.cMapReaderFactory;this.standardFontDataFactory=factory.standardFontDataFactory;this.destroyed=false;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=networkStream;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=(0,_util.createPromiseCapability)();this.setupMessageHandler();}_createClass(WorkerTransport,[{key:"annotationStorage",get:function get(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage());}},{key:"getRenderingIntent",value:function getRenderingIntent(intent){var annotationMode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_util.AnnotationMode.ENABLE;var printAnnotationStorage=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var isOpList=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var renderingIntent=_util.RenderingIntentFlag.DISPLAY;var annotationMap=null;switch(intent){case"any":renderingIntent=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":renderingIntent=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(intent));}switch(annotationMode){case _util.AnnotationMode.DISABLE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE;var annotationStorage=renderingIntent&_util.RenderingIntentFlag.PRINT&&printAnnotationStorage instanceof _annotation_storage.PrintAnnotationStorage?printAnnotationStorage:this.annotationStorage;annotationMap=annotationStorage.serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(annotationMode));}if(isOpList){renderingIntent+=_util.RenderingIntentFlag.OPLIST;}return{renderingIntent:renderingIntent,cacheKey:"".concat(renderingIntent,"_").concat(_annotation_storage.AnnotationStorage.getHash(annotationMap)),annotationStorageMap:annotationMap};}},{key:"destroy",value:function destroy(){var _this11=this;if(this.destroyCapability){return this.destroyCapability.promise;}this.destroyed=true;this.destroyCapability=(0,_util.createPromiseCapability)();if(this._passwordCapability){this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));}var waitOn=[];var _iterator11=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values()),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var page=_step11.value;waitOn.push(page._destroy());}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}_classPrivateFieldGet(this,_pageCache).clear();_classPrivateFieldGet(this,_pagePromises).clear();if(this.hasOwnProperty("annotationStorage")){this.annotationStorage.resetModified();}var terminated=this.messageHandler.sendWithPromise("Terminate",null);waitOn.push(terminated);Promise.all(waitOn).then(function(){_this11.commonObjs.clear();_this11.fontLoader.clear();_classPrivateFieldGet(_this11,_methodPromises).clear();_this11.filterFactory.destroy();if(_this11._networkStream){_this11._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated."));}if(_this11.messageHandler){_this11.messageHandler.destroy();_this11.messageHandler=null;}_this11.destroyCapability.resolve();},this.destroyCapability.reject);return this.destroyCapability.promise;}},{key:"setupMessageHandler",value:function setupMessageHandler(){var _this12=this;var messageHandler=this.messageHandler,loadingTask=this.loadingTask;messageHandler.on("GetReader",function(data,sink){(0,_util.assert)(_this12._networkStream,"GetReader - no `IPDFStream` instance available.");_this12._fullReader=_this12._networkStream.getFullReader();_this12._fullReader.onProgress=function(evt){_this12._lastProgress={loaded:evt.loaded,total:evt.total};};sink.onPull=function(){_this12._fullReader.read().then(function(_ref16){var value=_ref16.value,done=_ref16.done;if(done){sink.close();return;}(0,_util.assert)(value instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer.");sink.enqueue(new Uint8Array(value),1,[value]);}).catch(function(reason){sink.error(reason);});};sink.onCancel=function(reason){_this12._fullReader.cancel(reason);sink.ready.catch(function(readyReason){if(_this12.destroyed){return;}throw readyReason;});};});messageHandler.on("ReaderHeadersReady",function(data){var headersCapability=(0,_util.createPromiseCapability)();var fullReader=_this12._fullReader;fullReader.headersReady.then(function(){if(!fullReader.isStreamingSupported||!fullReader.isRangeSupported){if(_this12._lastProgress){var _loadingTask$onProgre;(_loadingTask$onProgre=loadingTask.onProgress)===null||_loadingTask$onProgre===void 0?void 0:_loadingTask$onProgre.call(loadingTask,_this12._lastProgress);}fullReader.onProgress=function(evt){var _loadingTask$onProgre2;(_loadingTask$onProgre2=loadingTask.onProgress)===null||_loadingTask$onProgre2===void 0?void 0:_loadingTask$onProgre2.call(loadingTask,{loaded:evt.loaded,total:evt.total});};}headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength});},headersCapability.reject);return headersCapability.promise;});messageHandler.on("GetRangeReader",function(data,sink){(0,_util.assert)(_this12._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var rangeReader=_this12._networkStream.getRangeReader(data.begin,data.end);if(!rangeReader){sink.close();return;}sink.onPull=function(){rangeReader.read().then(function(_ref17){var value=_ref17.value,done=_ref17.done;if(done){sink.close();return;}(0,_util.assert)(value instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer.");sink.enqueue(new Uint8Array(value),1,[value]);}).catch(function(reason){sink.error(reason);});};sink.onCancel=function(reason){rangeReader.cancel(reason);sink.ready.catch(function(readyReason){if(_this12.destroyed){return;}throw readyReason;});};});messageHandler.on("GetDoc",function(_ref18){var pdfInfo=_ref18.pdfInfo;_this12._numPages=pdfInfo.numPages;_this12._htmlForXfa=pdfInfo.htmlForXfa;delete pdfInfo.htmlForXfa;loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,_this12));});messageHandler.on("DocException",function(ex){var reason;switch(ex.name){case"PasswordException":reason=new _util.PasswordException(ex.message,ex.code);break;case"InvalidPDFException":reason=new _util.InvalidPDFException(ex.message);break;case"MissingPDFException":reason=new _util.MissingPDFException(ex.message);break;case"UnexpectedResponseException":reason=new _util.UnexpectedResponseException(ex.message,ex.status);break;case"UnknownErrorException":reason=new _util.UnknownErrorException(ex.message,ex.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.");}loadingTask._capability.reject(reason);});messageHandler.on("PasswordRequest",function(exception){_this12._passwordCapability=(0,_util.createPromiseCapability)();if(loadingTask.onPassword){var updatePassword=function updatePassword(password){if(password instanceof Error){_this12._passwordCapability.reject(password);}else{_this12._passwordCapability.resolve({password:password});}};try{loadingTask.onPassword(updatePassword,exception.code);}catch(ex){_this12._passwordCapability.reject(ex);}}else{_this12._passwordCapability.reject(new _util.PasswordException(exception.message,exception.code));}return _this12._passwordCapability.promise;});messageHandler.on("DataLoaded",function(data){var _loadingTask$onProgre3;(_loadingTask$onProgre3=loadingTask.onProgress)===null||_loadingTask$onProgre3===void 0?void 0:_loadingTask$onProgre3.call(loadingTask,{loaded:data.length,total:data.length});_this12.downloadInfoCapability.resolve(data);});messageHandler.on("StartRenderPage",function(data){if(_this12.destroyed){return;}var page=_classPrivateFieldGet(_this12,_pageCache).get(data.pageIndex);page._startRenderPage(data.transparency,data.cacheKey);});messageHandler.on("commonobj",function(_ref19){var _globalThis$FontInspe;var _ref20=_slicedToArray(_ref19,3),id=_ref20[0],type=_ref20[1],exportedData=_ref20[2];if(_this12.destroyed){return;}if(_this12.commonObjs.has(id)){return;}switch(type){case"Font":var params=_this12._params;if("error"in exportedData){var exportedError=exportedData.error;(0,_util.warn)("Error during font loading: ".concat(exportedError));_this12.commonObjs.resolve(id,exportedError);break;}var inspectFont=params.pdfBug&&(_globalThis$FontInspe=globalThis.FontInspector)!==null&&_globalThis$FontInspe!==void 0&&_globalThis$FontInspe.enabled?function(font,url){return globalThis.FontInspector.fontAdded(font,url);}:null;var font=new _font_loader.FontFaceObject(exportedData,{isEvalSupported:params.isEvalSupported,disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,inspectFont:inspectFont});_this12.fontLoader.bind(font).catch(function(reason){return messageHandler.sendWithPromise("FontFallback",{id:id});}).finally(function(){if(!params.fontExtraProperties&&font.data){font.data=null;}_this12.commonObjs.resolve(id,font);});break;case"FontPath":case"Image":case"Pattern":_this12.commonObjs.resolve(id,exportedData);break;default:throw new Error("Got unknown common object type ".concat(type));}});messageHandler.on("obj",function(_ref21){var _ref22=_slicedToArray(_ref21,4),id=_ref22[0],pageIndex=_ref22[1],type=_ref22[2],imageData=_ref22[3];if(_this12.destroyed){return;}var pageProxy=_classPrivateFieldGet(_this12,_pageCache).get(pageIndex);if(pageProxy.objs.has(id)){return;}switch(type){case"Image":pageProxy.objs.resolve(id,imageData);if(imageData){var length;if(imageData.bitmap){var width=imageData.width,height=imageData.height;length=width*height*4;}else{var _imageData$data;length=((_imageData$data=imageData.data)===null||_imageData$data===void 0?void 0:_imageData$data.length)||0;}if(length>_util.MAX_IMAGE_SIZE_TO_CACHE){pageProxy._maybeCleanupAfterRender=true;}}break;case"Pattern":pageProxy.objs.resolve(id,imageData);break;default:throw new Error("Got unknown object type ".concat(type));}});messageHandler.on("DocProgress",function(data){var _loadingTask$onProgre4;if(_this12.destroyed){return;}(_loadingTask$onProgre4=loadingTask.onProgress)===null||_loadingTask$onProgre4===void 0?void 0:_loadingTask$onProgre4.call(loadingTask,{loaded:data.loaded,total:data.total});});messageHandler.on("FetchBuiltInCMap",function(data){if(_this12.destroyed){return Promise.reject(new Error("Worker was destroyed."));}if(!_this12.cMapReaderFactory){return Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."));}return _this12.cMapReaderFactory.fetch(data);});messageHandler.on("FetchStandardFontData",function(data){if(_this12.destroyed){return Promise.reject(new Error("Worker was destroyed."));}if(!_this12.standardFontDataFactory){return Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."));}return _this12.standardFontDataFactory.fetch(data);});}},{key:"getData",value:function getData(){return this.messageHandler.sendWithPromise("GetData",null);}},{key:"saveDocument",value:function saveDocument(){var _this$_fullReader$fil,_this$_fullReader,_this13=this;if(this.annotationStorage.size<=0){(0,_util.warn)("saveDocument called while `annotationStorage` is empty, "+"please use the getData-method instead.");}return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(_this$_fullReader$fil=(_this$_fullReader=this._fullReader)===null||_this$_fullReader===void 0?void 0:_this$_fullReader.filename)!==null&&_this$_fullReader$fil!==void 0?_this$_fullReader$fil:null}).finally(function(){_this13.annotationStorage.resetModified();});}},{key:"getPage",value:function getPage(pageNumber){var _this14=this;if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages){return Promise.reject(new Error("Invalid page request."));}var pageIndex=pageNumber-1,cachedPromise=_classPrivateFieldGet(this,_pagePromises).get(pageIndex);if(cachedPromise){return cachedPromise;}var promise=this.messageHandler.sendWithPromise("GetPage",{pageIndex:pageIndex}).then(function(pageInfo){if(_this14.destroyed){throw new Error("Transport destroyed");}var page=new PDFPageProxy(pageIndex,pageInfo,_this14,_this14._params.pdfBug);_classPrivateFieldGet(_this14,_pageCache).set(pageIndex,page);return page;});_classPrivateFieldGet(this,_pagePromises).set(pageIndex,promise);return promise;}},{key:"getPageIndex",value:function getPageIndex(ref){if(_typeof(ref)!=="object"||ref===null||!Number.isInteger(ref.num)||ref.num<0||!Number.isInteger(ref.gen)||ref.gen<0){return Promise.reject(new Error("Invalid pageIndex request."));}return this.messageHandler.sendWithPromise("GetPageIndex",{num:ref.num,gen:ref.gen});}},{key:"getAnnotations",value:function getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:pageIndex,intent:intent});}},{key:"getFieldObjects",value:function getFieldObjects(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"GetFieldObjects");}},{key:"hasJSActions",value:function hasJSActions(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"HasJSActions");}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null);}},{key:"getDestinations",value:function getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null);}},{key:"getDestination",value:function getDestination(id){if(typeof id!=="string"){return Promise.reject(new Error("Invalid destination request."));}return this.messageHandler.sendWithPromise("GetDestination",{id:id});}},{key:"getPageLabels",value:function getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null);}},{key:"getPageLayout",value:function getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null);}},{key:"getPageMode",value:function getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null);}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null);}},{key:"getOpenAction",value:function getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null);}},{key:"getAttachments",value:function getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null);}},{key:"getJavaScript",value:function getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null);}},{key:"getDocJSActions",value:function getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null);}},{key:"getPageJSActions",value:function getPageJSActions(pageIndex){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:pageIndex});}},{key:"getStructTree",value:function getStructTree(pageIndex){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:pageIndex});}},{key:"getOutline",value:function getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null);}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(function(results){return new _optional_content_config.OptionalContentConfig(results);});}},{key:"getPermissions",value:function getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null);}},{key:"getMetadata",value:function getMetadata(){var _this15=this;var name="GetMetadata",cachedPromise=_classPrivateFieldGet(this,_methodPromises).get(name);if(cachedPromise){return cachedPromise;}var promise=this.messageHandler.sendWithPromise(name,null).then(function(results){var _this15$_fullReader$f,_this15$_fullReader,_this15$_fullReader$c,_this15$_fullReader2;return{info:results[0],metadata:results[1]?new _metadata.Metadata(results[1]):null,contentDispositionFilename:(_this15$_fullReader$f=(_this15$_fullReader=_this15._fullReader)===null||_this15$_fullReader===void 0?void 0:_this15$_fullReader.filename)!==null&&_this15$_fullReader$f!==void 0?_this15$_fullReader$f:null,contentLength:(_this15$_fullReader$c=(_this15$_fullReader2=_this15._fullReader)===null||_this15$_fullReader2===void 0?void 0:_this15$_fullReader2.contentLength)!==null&&_this15$_fullReader$c!==void 0?_this15$_fullReader$c:null};});_classPrivateFieldGet(this,_methodPromises).set(name,promise);return promise;}},{key:"getMarkInfo",value:function getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null);}},{key:"startCleanup",value:function(){var _startCleanup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var keepLoadedFonts,_iterator12,_step12,page,cleanupSuccessful,_args4=arguments;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:keepLoadedFonts=_args4.length>0&&_args4[0]!==undefined?_args4[0]:false;if(!this.destroyed){_context4.next=3;break;}return _context4.abrupt("return");case 3:_context4.next=5;return this.messageHandler.sendWithPromise("Cleanup",null);case 5:_iterator12=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values());_context4.prev=6;_iterator12.s();case 8:if((_step12=_iterator12.n()).done){_context4.next=15;break;}page=_step12.value;cleanupSuccessful=page.cleanup();if(cleanupSuccessful){_context4.next=13;break;}throw new Error("startCleanup: Page ".concat(page.pageNumber," is currently rendering."));case 13:_context4.next=8;break;case 15:_context4.next=20;break;case 17:_context4.prev=17;_context4.t0=_context4["catch"](6);_iterator12.e(_context4.t0);case 20:_context4.prev=20;_iterator12.f();return _context4.finish(20);case 23:this.commonObjs.clear();if(!keepLoadedFonts){this.fontLoader.clear();}_classPrivateFieldGet(this,_methodPromises).clear();this.filterFactory.destroy(true);case 27:case"end":return _context4.stop();}},_callee4,this,[[6,17,20,23]]);}));function startCleanup(){return _startCleanup.apply(this,arguments);}return startCleanup;}()},{key:"loadingParams",get:function get(){var _this$_params=this._params,disableAutoFetch=_this$_params.disableAutoFetch,enableXfa=_this$_params.enableXfa;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:disableAutoFetch,enableXfa:enableXfa});}}]);return WorkerTransport;}();function _cacheSimpleMethod2(name){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var cachedPromise=_classPrivateFieldGet(this,_methodPromises).get(name);if(cachedPromise){return cachedPromise;}var promise=this.messageHandler.sendWithPromise(name,data);_classPrivateFieldGet(this,_methodPromises).set(name,promise);return promise;}var _objs=/*#__PURE__*/new WeakMap();var _ensureObj=/*#__PURE__*/new WeakSet();var PDFObjects=/*#__PURE__*/function(){function PDFObjects(){_classCallCheck(this,PDFObjects);_classPrivateMethodInitSpec(this,_ensureObj);_classPrivateFieldInitSpec(this,_objs,{writable:true,value:Object.create(null)});}_createClass(PDFObjects,[{key:"get",value:function get(objId){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(callback){var _obj=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,objId);_obj.capability.promise.then(function(){return callback(_obj.data);});return null;}var obj=_classPrivateFieldGet(this,_objs)[objId];if(!(obj!==null&&obj!==void 0&&obj.capability.settled)){throw new Error("Requesting object that isn't resolved yet ".concat(objId,"."));}return obj.data;}},{key:"has",value:function has(objId){var obj=_classPrivateFieldGet(this,_objs)[objId];return(obj===null||obj===void 0?void 0:obj.capability.settled)||false;}},{key:"resolve",value:function resolve(objId){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var obj=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,objId);obj.data=data;obj.capability.resolve();}},{key:"clear",value:function clear(){for(var objId in _classPrivateFieldGet(this,_objs)){var _data$bitmap;var data=_classPrivateFieldGet(this,_objs)[objId].data;data===null||data===void 0?void 0:(_data$bitmap=data.bitmap)===null||_data$bitmap===void 0?void 0:_data$bitmap.close();}_classPrivateFieldSet(this,_objs,Object.create(null));}}]);return PDFObjects;}();function _ensureObj2(objId){var obj=_classPrivateFieldGet(this,_objs)[objId];if(obj){return obj;}return _classPrivateFieldGet(this,_objs)[objId]={capability:(0,_util.createPromiseCapability)(),data:null};}var _internalRenderTask=/*#__PURE__*/new WeakMap();var RenderTask=/*#__PURE__*/function(){function RenderTask(internalRenderTask){_classCallCheck(this,RenderTask);_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:true,value:null});_classPrivateFieldSet(this,_internalRenderTask,internalRenderTask);this.onContinue=null;}_createClass(RenderTask,[{key:"promise",get:function get(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise;}},{key:"cancel",value:function cancel(){var extraDelay=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;_classPrivateFieldGet(this,_internalRenderTask).cancel(null,extraDelay);}},{key:"separateAnnots",get:function get(){var separateAnnots=_classPrivateFieldGet(this,_internalRenderTask).operatorList.separateAnnots;if(!separateAnnots){return false;}var _classPrivateFieldGet2=_classPrivateFieldGet(this,_internalRenderTask),annotationCanvasMap=_classPrivateFieldGet2.annotationCanvasMap;return separateAnnots.form||separateAnnots.canvas&&(annotationCanvasMap===null||annotationCanvasMap===void 0?void 0:annotationCanvasMap.size)>0;}}]);return RenderTask;}();exports.RenderTask=RenderTask;var InternalRenderTask=/*#__PURE__*/function(){function InternalRenderTask(_ref23){var callback=_ref23.callback,params=_ref23.params,objs=_ref23.objs,commonObjs=_ref23.commonObjs,annotationCanvasMap=_ref23.annotationCanvasMap,operatorList=_ref23.operatorList,pageIndex=_ref23.pageIndex,canvasFactory=_ref23.canvasFactory,filterFactory=_ref23.filterFactory,_ref23$useRequestAnim=_ref23.useRequestAnimationFrame,useRequestAnimationFrame=_ref23$useRequestAnim===void 0?false:_ref23$useRequestAnim,_ref23$pdfBug=_ref23.pdfBug,pdfBug=_ref23$pdfBug===void 0?false:_ref23$pdfBug,_ref23$pageColors=_ref23.pageColors,pageColors=_ref23$pageColors===void 0?null:_ref23$pageColors;_classCallCheck(this,InternalRenderTask);this.callback=callback;this.params=params;this.objs=objs;this.commonObjs=commonObjs;this.annotationCanvasMap=annotationCanvasMap;this.operatorListIdx=null;this.operatorList=operatorList;this._pageIndex=pageIndex;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this._pdfBug=pdfBug;this.pageColors=pageColors;this.running=false;this.graphicsReadyCallback=null;this.graphicsReady=false;this._useRequestAnimationFrame=useRequestAnimationFrame===true&&typeof window!=="undefined";this.cancelled=false;this.capability=(0,_util.createPromiseCapability)();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=params.canvasContext.canvas;}_createClass(InternalRenderTask,[{key:"completed",get:function get(){return this.capability.promise.catch(function(){});}},{key:"initializeGraphics",value:function initializeGraphics(_ref24){var _globalThis$StepperMa,_this$graphicsReadyCa;var _ref24$transparency=_ref24.transparency,transparency=_ref24$transparency===void 0?false:_ref24$transparency,optionalContentConfig=_ref24.optionalContentConfig;if(this.cancelled){return;}if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas)){throw new Error("Cannot use the same canvas during multiple render() operations. "+"Use different canvas or ensure previous operations were "+"cancelled or completed.");}_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas);}if(this._pdfBug&&(_globalThis$StepperMa=globalThis.StepperManager)!==null&&_globalThis$StepperMa!==void 0&&_globalThis$StepperMa.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint();}var _this$params=this.params,canvasContext=_this$params.canvasContext,viewport=_this$params.viewport,transform=_this$params.transform,background=_this$params.background;this.gfx=new _canvas.CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:optionalContentConfig},this.annotationCanvasMap);this.gfx.beginDrawing({transform:transform,viewport:viewport,transparency:transparency,background:background});this.operatorListIdx=0;this.graphicsReady=true;(_this$graphicsReadyCa=this.graphicsReadyCallback)===null||_this$graphicsReadyCa===void 0?void 0:_this$graphicsReadyCa.call(this);}},{key:"cancel",value:function cancel(){var _this$gfx;var error=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var extraDelay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.running=false;this.cancelled=true;(_this$gfx=this.gfx)===null||_this$gfx===void 0?void 0:_this$gfx.endDrawing(this.pageColors);if(this._canvas){_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);}this.callback(error||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas",extraDelay));}},{key:"operatorListChanged",value:function operatorListChanged(){var _this$stepper;if(!this.graphicsReady){if(!this.graphicsReadyCallback){this.graphicsReadyCallback=this._continueBound;}return;}(_this$stepper=this.stepper)===null||_this$stepper===void 0?void 0:_this$stepper.updateOperatorList(this.operatorList);if(this.running){return;}this._continue();}},{key:"_continue",value:function _continue(){this.running=true;if(this.cancelled){return;}if(this.task.onContinue){this.task.onContinue(this._scheduleNextBound);}else{this._scheduleNext();}}},{key:"_scheduleNext",value:function _scheduleNext(){var _this16=this;window.ngxZone.runOutsideAngular(function(){if(_this16._useRequestAnimationFrame){window.requestAnimationFrame(function(){_this16._nextBound().catch(_this16._cancelBound);});}else{Promise.resolve().then(_this16._nextBound).catch(_this16._cancelBound);}});}},{key:"_next",value:function(){var _next2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!this.cancelled){_context5.next=2;break;}return _context5.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=false;if(this.operatorList.lastChunk){this.gfx.endDrawing(this.pageColors);if(this._canvas){_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);}this.callback();}}case 4:case"end":return _context5.stop();}},_callee5,this);}));function _next(){return _next2.apply(this,arguments);}return _next;}()}]);return InternalRenderTask;}();var _canvasInUse={writable:true,value:new WeakSet()};var version='3.5.550';exports.version=version;var build='df5366593';exports.build=build;

/***/ }),
/* 138 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}Object.defineProperty(exports, "__esModule", ({value:true}));exports.PrintAnnotationStorage=exports.AnnotationStorage=void 0;var _util=__w_pdfjs_require__(1);var _editor=__w_pdfjs_require__(139);var _murmurhash=__w_pdfjs_require__(143);function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}var _modified=/*#__PURE__*/new WeakMap();var _storage=/*#__PURE__*/new WeakMap();var _setModified=/*#__PURE__*/new WeakSet();var AnnotationStorage=/*#__PURE__*/function(){function AnnotationStorage(){_classCallCheck(this,AnnotationStorage);_classPrivateMethodInitSpec(this,_setModified);_classPrivateFieldInitSpec(this,_modified,{writable:true,value:false});_classPrivateFieldInitSpec(this,_storage,{writable:true,value:new Map()});this.onSetModified=null;this.onResetModified=null;this.onAnnotationEditor=null;}_createClass(AnnotationStorage,[{key:"getValue",value:function getValue(key,defaultValue){var value=_classPrivateFieldGet(this,_storage).get(key);if(value===undefined){return defaultValue;}return Object.assign(defaultValue,value);}},{key:"getRawValue",value:function getRawValue(key){return _classPrivateFieldGet(this,_storage).get(key);}},{key:"remove",value:function remove(key){_classPrivateFieldGet(this,_storage).delete(key);if(_classPrivateFieldGet(this,_storage).size===0){this.resetModified();}if(typeof this.onAnnotationEditor==="function"){var _iterator=_createForOfIteratorHelper(_classPrivateFieldGet(this,_storage).values()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;if(value instanceof _editor.AnnotationEditor){return;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}this.onAnnotationEditor(null);}}},{key:"setValue",value:function setValue(key,value){var obj=_classPrivateFieldGet(this,_storage).get(key);var modified=false;if(obj!==undefined){for(var _i=0,_Object$entries=Object.entries(value);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),entry=_Object$entries$_i[0],val=_Object$entries$_i[1];if(obj[entry]!==val){modified=true;obj[entry]=val;}}}else{modified=true;_classPrivateFieldGet(this,_storage).set(key,value);}if(modified){_classPrivateMethodGet(this,_setModified,_setModified2).call(this);}if(value instanceof _editor.AnnotationEditor&&typeof this.onAnnotationEditor==="function"){this.onAnnotationEditor(value.constructor._type);}}},{key:"has",value:function has(key){return _classPrivateFieldGet(this,_storage).has(key);}},{key:"getAll",value:function getAll(){return _classPrivateFieldGet(this,_storage).size>0?(0,_util.objectFromMap)(_classPrivateFieldGet(this,_storage)):null;}},{key:"setAll",value:function setAll(obj){for(var _i2=0,_Object$entries2=Object.entries(obj);_i2<_Object$entries2.length;_i2++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i2],2),key=_Object$entries2$_i[0],val=_Object$entries2$_i[1];this.setValue(key,val);}}},{key:"size",get:function get(){return _classPrivateFieldGet(this,_storage).size;}},{key:"resetModified",value:function resetModified(){if(_classPrivateFieldGet(this,_modified)){_classPrivateFieldSet(this,_modified,false);if(typeof this.onResetModified==="function"){this.onResetModified();}}}},{key:"print",get:function get(){return new PrintAnnotationStorage(this);}},{key:"serializable",get:function get(){if(_classPrivateFieldGet(this,_storage).size===0){return null;}var clone=new Map();var _iterator2=_createForOfIteratorHelper(_classPrivateFieldGet(this,_storage)),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),key=_step2$value[0],val=_step2$value[1];var serialized=val instanceof _editor.AnnotationEditor?val.serialize():val;if(serialized){clone.set(key,serialized);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return clone;}}],[{key:"getHash",value:function getHash(map){if(!map){return"";}var hash=new _murmurhash.MurmurHash3_64();var _iterator3=_createForOfIteratorHelper(map),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step3$value=_slicedToArray(_step3.value,2),key=_step3$value[0],val=_step3$value[1];hash.update("".concat(key,":").concat(JSON.stringify(val)));}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return hash.hexdigest();}}]);return AnnotationStorage;}();exports.AnnotationStorage=AnnotationStorage;function _setModified2(){if(!_classPrivateFieldGet(this,_modified)){_classPrivateFieldSet(this,_modified,true);if(typeof this.onSetModified==="function"){this.onSetModified();}}}var _serializable=/*#__PURE__*/new WeakMap();var PrintAnnotationStorage=/*#__PURE__*/function(_AnnotationStorage){_inherits(PrintAnnotationStorage,_AnnotationStorage);var _super=_createSuper(PrintAnnotationStorage);function PrintAnnotationStorage(parent){var _this;_classCallCheck(this,PrintAnnotationStorage);_this=_super.call(this);_classPrivateFieldInitSpec(_assertThisInitialized(_this),_serializable,{writable:true,value:null});_classPrivateFieldSet(_assertThisInitialized(_this),_serializable,structuredClone(parent.serializable));return _this;}_createClass(PrintAnnotationStorage,[{key:"print",get:function get(){(0,_util.unreachable)("Should not call PrintAnnotationStorage.print");}},{key:"serializable",get:function get(){return _classPrivateFieldGet(this,_serializable);}}]);return PrintAnnotationStorage;}(AnnotationStorage);exports.PrintAnnotationStorage=PrintAnnotationStorage;

/***/ }),
/* 139 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}Object.defineProperty(exports, "__esModule", ({value:true}));exports.AnnotationEditor=void 0;var _tools=__w_pdfjs_require__(140);var _util=__w_pdfjs_require__(1);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}var _boundFocusin=/*#__PURE__*/new WeakMap();var _boundFocusout=/*#__PURE__*/new WeakMap();var _hasBeenSelected=/*#__PURE__*/new WeakMap();var _isEditing=/*#__PURE__*/new WeakMap();var _isInEditMode=/*#__PURE__*/new WeakMap();var _zIndex=/*#__PURE__*/new WeakMap();var AnnotationEditor=/*#__PURE__*/function(){function AnnotationEditor(parameters){_classCallCheck(this,AnnotationEditor);_classPrivateFieldInitSpec(this,_boundFocusin,{writable:true,value:this.focusin.bind(this)});_classPrivateFieldInitSpec(this,_boundFocusout,{writable:true,value:this.focusout.bind(this)});_classPrivateFieldInitSpec(this,_hasBeenSelected,{writable:true,value:false});_classPrivateFieldInitSpec(this,_isEditing,{writable:true,value:false});_classPrivateFieldInitSpec(this,_isInEditMode,{writable:true,value:false});_defineProperty(this,"_uiManager",null);_classPrivateFieldInitSpec(this,_zIndex,{writable:true,value:AnnotationEditor._zIndex++});if(this.constructor===AnnotationEditor){(0,_util.unreachable)("Cannot initialize AnnotationEditor.");}this.parent=parameters.parent;this.id=parameters.id;this.width=this.height=null;this.pageIndex=parameters.parent.pageIndex;this.name=parameters.name;this.div=null;this._uiManager=parameters.uiManager;var _this$parent$viewport=this.parent.viewport,rotation=_this$parent$viewport.rotation,_this$parent$viewport2=_this$parent$viewport.rawDims,pageWidth=_this$parent$viewport2.pageWidth,pageHeight=_this$parent$viewport2.pageHeight,pageX=_this$parent$viewport2.pageX,pageY=_this$parent$viewport2.pageY;this.rotation=rotation;this.pageDimensions=[pageWidth,pageHeight];this.pageTranslation=[pageX,pageY];var _this$parentDimension=_slicedToArray(this.parentDimensions,2),width=_this$parentDimension[0],height=_this$parentDimension[1];this.x=parameters.x/width;this.y=parameters.y/height;this.isAttachedToDOM=false;}_createClass(AnnotationEditor,[{key:"addCommands",value:function addCommands(params){this._uiManager.addCommands(params);}},{key:"currentLayer",get:function get(){return this._uiManager.currentLayer;}},{key:"setInBackground",value:function setInBackground(){this.div.style.zIndex=0;}},{key:"setInForeground",value:function setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(this,_zIndex);}},{key:"setParent",value:function setParent(parent){if(parent!==null){this.pageIndex=parent.pageIndex;this.pageDimensions=parent.pageDimensions;}this.parent=parent;}},{key:"focusin",value:function focusin(event){if(!_classPrivateFieldGet(this,_hasBeenSelected)){this.parent.setSelected(this);}else{_classPrivateFieldSet(this,_hasBeenSelected,false);}}},{key:"focusout",value:function focusout(event){var _this$parent;if(!this.isAttachedToDOM){return;}var target=event.relatedTarget;if(target!==null&&target!==void 0&&target.closest("#".concat(this.id))){return;}event.preventDefault();if(!((_this$parent=this.parent)!==null&&_this$parent!==void 0&&_this$parent.isMultipleSelection)){this.commitOrRemove();}}},{key:"commitOrRemove",value:function commitOrRemove(){if(this.isEmpty()){this.remove();}else{this.commit();}}},{key:"commit",value:function commit(){this.addToAnnotationStorage();}},{key:"addToAnnotationStorage",value:function addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this);}},{key:"dragstart",value:function dragstart(event){var rect=this.parent.div.getBoundingClientRect();this.startX=event.clientX-rect.x;this.startY=event.clientY-rect.y;event.dataTransfer.setData("text/plain",this.id);event.dataTransfer.effectAllowed="move";}},{key:"setAt",value:function setAt(x,y,tx,ty){var _this$parentDimension2=_slicedToArray(this.parentDimensions,2),width=_this$parentDimension2[0],height=_this$parentDimension2[1];var _this$screenToPageTra=this.screenToPageTranslation(tx,ty);var _this$screenToPageTra2=_slicedToArray(_this$screenToPageTra,2);tx=_this$screenToPageTra2[0];ty=_this$screenToPageTra2[1];this.x=(x+tx)/width;this.y=(y+ty)/height;this.div.style.left="".concat(100*this.x,"%");this.div.style.top="".concat(100*this.y,"%");}},{key:"translate",value:function translate(x,y){var _this$parentDimension3=_slicedToArray(this.parentDimensions,2),width=_this$parentDimension3[0],height=_this$parentDimension3[1];var _this$screenToPageTra3=this.screenToPageTranslation(x,y);var _this$screenToPageTra4=_slicedToArray(_this$screenToPageTra3,2);x=_this$screenToPageTra4[0];y=_this$screenToPageTra4[1];this.x+=x/width;this.y+=y/height;this.div.style.left="".concat(100*this.x,"%");this.div.style.top="".concat(100*this.y,"%");}},{key:"screenToPageTranslation",value:function screenToPageTranslation(x,y){switch(this.parentRotation){case 90:return[y,-x];case 180:return[-x,-y];case 270:return[-y,x];default:return[x,y];}}},{key:"parentScale",get:function get(){return this._uiManager.viewParameters.realScale;}},{key:"parentRotation",get:function get(){return this._uiManager.viewParameters.rotation;}},{key:"parentDimensions",get:function get(){var realScale=this._uiManager.viewParameters.realScale;var _this$pageDimensions=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions[0],pageHeight=_this$pageDimensions[1];return[pageWidth*realScale,pageHeight*realScale];}},{key:"setDims",value:function setDims(width,height){var _this$parentDimension4=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension4[0],parentHeight=_this$parentDimension4[1];this.div.style.width="".concat(100*width/parentWidth,"%");this.div.style.height="".concat(100*height/parentHeight,"%");}},{key:"fixDims",value:function fixDims(){var style=this.div.style;var height=style.height,width=style.width;var widthPercent=width.endsWith("%");var heightPercent=height.endsWith("%");if(widthPercent&&heightPercent){return;}var _this$parentDimension5=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension5[0],parentHeight=_this$parentDimension5[1];if(!widthPercent){style.width="".concat(100*parseFloat(width)/parentWidth,"%");}if(!heightPercent){style.height="".concat(100*parseFloat(height)/parentHeight,"%");}}},{key:"getInitialTranslation",value:function getInitialTranslation(){return[0,0];}},{key:"render",value:function render(){this.div=document.createElement("div");this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute("id",this.id);this.div.setAttribute("tabIndex",0);this.setInForeground();this.div.addEventListener("focusin",_classPrivateFieldGet(this,_boundFocusin));this.div.addEventListener("focusout",_classPrivateFieldGet(this,_boundFocusout));var _this$getInitialTrans=this.getInitialTranslation(),_this$getInitialTrans2=_slicedToArray(_this$getInitialTrans,2),tx=_this$getInitialTrans2[0],ty=_this$getInitialTrans2[1];this.translate(tx,ty);(0,_tools.bindEvents)(this,this.div,["dragstart","pointerdown"]);return this.div;}},{key:"pointerdown",value:function pointerdown(event){var isMac=_util.FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){event.preventDefault();return;}if(event.ctrlKey&&!isMac||event.shiftKey||event.metaKey&&isMac){this.parent.toggleSelected(this);}else{this.parent.setSelected(this);}_classPrivateFieldSet(this,_hasBeenSelected,true);}},{key:"getRect",value:function getRect(tx,ty){var scale=this.parentScale;var _this$pageDimensions2=_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions2[0],pageHeight=_this$pageDimensions2[1];var _this$pageTranslation=_slicedToArray(this.pageTranslation,2),pageX=_this$pageTranslation[0],pageY=_this$pageTranslation[1];var shiftX=tx/scale;var shiftY=ty/scale;var x=this.x*pageWidth;var y=this.y*pageHeight;var width=this.width*pageWidth;var height=this.height*pageHeight;switch(this.rotation){case 0:return[x+shiftX+pageX,pageHeight-y-shiftY-height+pageY,x+shiftX+width+pageX,pageHeight-y-shiftY+pageY];case 90:return[x+shiftY+pageX,pageHeight-y+shiftX+pageY,x+shiftY+height+pageX,pageHeight-y+shiftX+width+pageY];case 180:return[x-shiftX-width+pageX,pageHeight-y+shiftY+pageY,x-shiftX+pageX,pageHeight-y+shiftY+height+pageY];case 270:return[x-shiftY-height+pageX,pageHeight-y-shiftX-width+pageY,x-shiftY+pageX,pageHeight-y-shiftX+pageY];default:throw new Error("Invalid rotation");}}},{key:"getRectInCurrentCoords",value:function getRectInCurrentCoords(rect,pageHeight){var _rect=_slicedToArray(rect,4),x1=_rect[0],y1=_rect[1],x2=_rect[2],y2=_rect[3];var width=x2-x1;var height=y2-y1;switch(this.rotation){case 0:return[x1,pageHeight-y2,width,height];case 90:return[x1,pageHeight-y1,height,width];case 180:return[x2,pageHeight-y1,width,height];case 270:return[x2,pageHeight-y2,height,width];default:throw new Error("Invalid rotation");}}},{key:"onceAdded",value:function onceAdded(){}},{key:"isEmpty",value:function isEmpty(){return false;}},{key:"enableEditMode",value:function enableEditMode(){_classPrivateFieldSet(this,_isInEditMode,true);}},{key:"disableEditMode",value:function disableEditMode(){_classPrivateFieldSet(this,_isInEditMode,false);}},{key:"isInEditMode",value:function isInEditMode(){return _classPrivateFieldGet(this,_isInEditMode);}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return false;}},{key:"needsToBeRebuilt",value:function needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM;}},{key:"rebuild",value:function rebuild(){var _this$div;(_this$div=this.div)===null||_this$div===void 0?void 0:_this$div.addEventListener("focusin",_classPrivateFieldGet(this,_boundFocusin));}},{key:"serialize",value:function serialize(){(0,_util.unreachable)("An editor must be serializable");}},{key:"remove",value:function remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet(this,_boundFocusin));this.div.removeEventListener("focusout",_classPrivateFieldGet(this,_boundFocusout));if(!this.isEmpty()){this.commit();}this.parent.remove(this);}},{key:"select",value:function select(){var _this$div2;(_this$div2=this.div)===null||_this$div2===void 0?void 0:_this$div2.classList.add("selectedEditor");}},{key:"unselect",value:function unselect(){var _this$div3;(_this$div3=this.div)===null||_this$div3===void 0?void 0:_this$div3.classList.remove("selectedEditor");}},{key:"updateParams",value:function updateParams(type,value){}},{key:"disableEditing",value:function disableEditing(){}},{key:"enableEditing",value:function enableEditing(){}},{key:"propertiesToUpdate",get:function get(){return{};}},{key:"contentDiv",get:function get(){return this.div;}},{key:"isEditing",get:function get(){return _classPrivateFieldGet(this,_isEditing);},set:function set(value){_classPrivateFieldSet(this,_isEditing,value);if(value){this.parent.setSelected(this);this.parent.setActiveEditor(this);}else{this.parent.setActiveEditor(null);}}}],[{key:"_defaultLineColor",get:function get(){return(0,_util.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"));}},{key:"deserialize",value:function deserialize(data,parent,uiManager){var editor=new this.prototype.constructor({parent:parent,id:parent.getNextId(),uiManager:uiManager});editor.rotation=data.rotation;var _editor$pageDimension=_slicedToArray(editor.pageDimensions,2),pageWidth=_editor$pageDimension[0],pageHeight=_editor$pageDimension[1];var _editor$getRectInCurr=editor.getRectInCurrentCoords(data.rect,pageHeight),_editor$getRectInCurr2=_slicedToArray(_editor$getRectInCurr,4),x=_editor$getRectInCurr2[0],y=_editor$getRectInCurr2[1],width=_editor$getRectInCurr2[2],height=_editor$getRectInCurr2[3];editor.x=x/pageWidth;editor.y=y/pageHeight;editor.width=width/pageWidth;editor.height=height/pageHeight;return editor;}}]);return AnnotationEditor;}();exports.AnnotationEditor=AnnotationEditor;_defineProperty(AnnotationEditor,"_colorManager",new _tools.ColorManager());_defineProperty(AnnotationEditor,"_zIndex",1);

/***/ }),
/* 140 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}Object.defineProperty(exports, "__esModule", ({value:true}));exports.KeyboardManager=exports.CommandManager=exports.ColorManager=exports.AnnotationEditorUIManager=void 0;exports.bindEvents=bindEvents;exports.opacityToHex=opacityToHex;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(141);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function bindEvents(obj,element,names){var _iterator=_createForOfIteratorHelper(names),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var name=_step.value;element.addEventListener(name,obj[name].bind(obj));}}catch(err){_iterator.e(err);}finally{_iterator.f();}}function opacityToHex(opacity){return Math.round(Math.min(255,Math.max(1,255*opacity))).toString(16).padStart(2,"0");}var _id=/*#__PURE__*/new WeakMap();var IdManager=/*#__PURE__*/function(){function IdManager(){_classCallCheck(this,IdManager);_classPrivateFieldInitSpec(this,_id,{writable:true,value:0});}_createClass(IdManager,[{key:"getId",value:function getId(){var _this$id,_this$id2;return"".concat(_util.AnnotationEditorPrefix).concat((_classPrivateFieldSet(this,_id,(_this$id=_classPrivateFieldGet(this,_id),_this$id2=_this$id++,_this$id)),_this$id2));}}]);return IdManager;}();var _commands=/*#__PURE__*/new WeakMap();var _locked=/*#__PURE__*/new WeakMap();var _maxSize=/*#__PURE__*/new WeakMap();var _position=/*#__PURE__*/new WeakMap();var CommandManager=/*#__PURE__*/function(){function CommandManager(){var maxSize=arguments.length>0&&arguments[0]!==undefined?arguments[0]:128;_classCallCheck(this,CommandManager);_classPrivateFieldInitSpec(this,_commands,{writable:true,value:[]});_classPrivateFieldInitSpec(this,_locked,{writable:true,value:false});_classPrivateFieldInitSpec(this,_maxSize,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_position,{writable:true,value:-1});_classPrivateFieldSet(this,_maxSize,maxSize);}_createClass(CommandManager,[{key:"add",value:function add(_ref){var cmd=_ref.cmd,undo=_ref.undo,mustExec=_ref.mustExec,_ref$type=_ref.type,type=_ref$type===void 0?NaN:_ref$type,_ref$overwriteIfSameT=_ref.overwriteIfSameType,overwriteIfSameType=_ref$overwriteIfSameT===void 0?false:_ref$overwriteIfSameT,_ref$keepUndo=_ref.keepUndo,keepUndo=_ref$keepUndo===void 0?false:_ref$keepUndo;if(mustExec){cmd();}if(_classPrivateFieldGet(this,_locked)){return;}var save={cmd:cmd,undo:undo,type:type};if(_classPrivateFieldGet(this,_position)===-1){if(_classPrivateFieldGet(this,_commands).length>0){_classPrivateFieldGet(this,_commands).length=0;}_classPrivateFieldSet(this,_position,0);_classPrivateFieldGet(this,_commands).push(save);return;}if(overwriteIfSameType&&_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].type===type){if(keepUndo){save.undo=_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].undo;}_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)]=save;return;}var next=_classPrivateFieldGet(this,_position)+1;if(next===_classPrivateFieldGet(this,_maxSize)){_classPrivateFieldGet(this,_commands).splice(0,1);}else{_classPrivateFieldSet(this,_position,next);if(next<_classPrivateFieldGet(this,_commands).length){_classPrivateFieldGet(this,_commands).splice(next);}}_classPrivateFieldGet(this,_commands).push(save);}},{key:"undo",value:function undo(){if(_classPrivateFieldGet(this,_position)===-1){return;}_classPrivateFieldSet(this,_locked,true);_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].undo();_classPrivateFieldSet(this,_locked,false);_classPrivateFieldSet(this,_position,_classPrivateFieldGet(this,_position)-1);}},{key:"redo",value:function redo(){if(_classPrivateFieldGet(this,_position)<_classPrivateFieldGet(this,_commands).length-1){_classPrivateFieldSet(this,_position,_classPrivateFieldGet(this,_position)+1);_classPrivateFieldSet(this,_locked,true);_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].cmd();_classPrivateFieldSet(this,_locked,false);}}},{key:"hasSomethingToUndo",value:function hasSomethingToUndo(){return _classPrivateFieldGet(this,_position)!==-1;}},{key:"hasSomethingToRedo",value:function hasSomethingToRedo(){return _classPrivateFieldGet(this,_position)<_classPrivateFieldGet(this,_commands).length-1;}},{key:"destroy",value:function destroy(){_classPrivateFieldSet(this,_commands,null);}},{key:"reset",value:function reset(){_classPrivateFieldSet(this,_commands,[]);_classPrivateFieldSet(this,_position,-1);_classPrivateFieldSet(this,_locked,false);}}]);return CommandManager;}();exports.CommandManager=CommandManager;var _serialize=/*#__PURE__*/new WeakSet();var KeyboardManager=/*#__PURE__*/function(){function KeyboardManager(callbacks){_classCallCheck(this,KeyboardManager);_classPrivateMethodInitSpec(this,_serialize);this.buffer=[];this.callbacks=new Map();this.allKeys=new Set();var isMac=_util.FeatureTest.platform.isMac;var _iterator2=_createForOfIteratorHelper(callbacks),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),keys=_step2$value[0],callback=_step2$value[1];var _iterator3=_createForOfIteratorHelper(keys),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;var isMacKey=key.startsWith("mac+");if(isMac&&isMacKey){this.callbacks.set(key.slice(4),callback);this.allKeys.add(key.split("+").at(-1));}else if(!isMac&&!isMacKey){this.callbacks.set(key,callback);this.allKeys.add(key.split("+").at(-1));}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}_createClass(KeyboardManager,[{key:"exec",value:function exec(self,event){if(!this.allKeys.has(event.key)){return;}var callback=this.callbacks.get(_classPrivateMethodGet(this,_serialize,_serialize2).call(this,event));if(!callback){return;}callback.bind(self)();event.stopPropagation();event.preventDefault();}}]);return KeyboardManager;}();exports.KeyboardManager=KeyboardManager;function _serialize2(event){if(event.altKey){this.buffer.push("alt");}if(event.ctrlKey){this.buffer.push("ctrl");}if(event.metaKey){this.buffer.push("meta");}if(event.shiftKey){this.buffer.push("shift");}this.buffer.push(event.key);var str=this.buffer.join("+");this.buffer.length=0;return str;}var ColorManager=/*#__PURE__*/function(){function ColorManager(){_classCallCheck(this,ColorManager);}_createClass(ColorManager,[{key:"_colors",get:function get(){var colors=new Map([["CanvasText",null],["Canvas",null]]);(0,_display_utils.getColorValues)(colors);return(0,_util.shadow)(this,"_colors",colors);}},{key:"convert",value:function convert(color){var rgb=(0,_display_utils.getRGB)(color);if(!window.matchMedia("(forced-colors: active)").matches){return rgb;}var _iterator4=_createForOfIteratorHelper(this._colors),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step4$value=_slicedToArray(_step4.value,2),name=_step4$value[0],RGB=_step4$value[1];if(RGB.every(function(x,i){return x===rgb[i];})){return ColorManager._colorsMapping.get(name);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return rgb;}},{key:"getHexCode",value:function getHexCode(name){var rgb=this._colors.get(name);if(!rgb){return name;}return _util.Util.makeHexColor.apply(_util.Util,_toConsumableArray(rgb));}}]);return ColorManager;}();exports.ColorManager=ColorManager;_defineProperty(ColorManager,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var _activeEditor=/*#__PURE__*/new WeakMap();var _allEditors=/*#__PURE__*/new WeakMap();var _allLayers=/*#__PURE__*/new WeakMap();var _annotationStorage=/*#__PURE__*/new WeakMap();var _commandManager=/*#__PURE__*/new WeakMap();var _currentPageIndex=/*#__PURE__*/new WeakMap();var _editorTypes=/*#__PURE__*/new WeakMap();var _editorsToRescale=/*#__PURE__*/new WeakMap();var _eventBus=/*#__PURE__*/new WeakMap();var _idManager=/*#__PURE__*/new WeakMap();var _isEnabled=/*#__PURE__*/new WeakMap();var _mode=/*#__PURE__*/new WeakMap();var _selectedEditors=/*#__PURE__*/new WeakMap();var _boundCopy=/*#__PURE__*/new WeakMap();var _boundCut=/*#__PURE__*/new WeakMap();var _boundPaste=/*#__PURE__*/new WeakMap();var _boundKeydown=/*#__PURE__*/new WeakMap();var _boundOnEditingAction=/*#__PURE__*/new WeakMap();var _boundOnPageChanging=/*#__PURE__*/new WeakMap();var _boundOnScaleChanging=/*#__PURE__*/new WeakMap();var _boundOnRotationChanging=/*#__PURE__*/new WeakMap();var _previousStates=/*#__PURE__*/new WeakMap();var _container=/*#__PURE__*/new WeakMap();var _addKeyboardManager=/*#__PURE__*/new WeakSet();var _removeKeyboardManager=/*#__PURE__*/new WeakSet();var _addCopyPasteListeners=/*#__PURE__*/new WeakSet();var _removeCopyPasteListeners=/*#__PURE__*/new WeakSet();var _dispatchUpdateStates=/*#__PURE__*/new WeakSet();var _dispatchUpdateUI=/*#__PURE__*/new WeakSet();var _enableAll=/*#__PURE__*/new WeakSet();var _disableAll=/*#__PURE__*/new WeakSet();var _addEditorToLayer=/*#__PURE__*/new WeakSet();var _isEmpty=/*#__PURE__*/new WeakSet();var _selectEditors=/*#__PURE__*/new WeakSet();var AnnotationEditorUIManager=/*#__PURE__*/function(){function AnnotationEditorUIManager(container,eventBus,annotationStorage){_classCallCheck(this,AnnotationEditorUIManager);_classPrivateMethodInitSpec(this,_selectEditors);_classPrivateMethodInitSpec(this,_isEmpty);_classPrivateMethodInitSpec(this,_addEditorToLayer);_classPrivateMethodInitSpec(this,_disableAll);_classPrivateMethodInitSpec(this,_enableAll);_classPrivateMethodInitSpec(this,_dispatchUpdateUI);_classPrivateMethodInitSpec(this,_dispatchUpdateStates);_classPrivateMethodInitSpec(this,_removeCopyPasteListeners);_classPrivateMethodInitSpec(this,_addCopyPasteListeners);_classPrivateMethodInitSpec(this,_removeKeyboardManager);_classPrivateMethodInitSpec(this,_addKeyboardManager);_classPrivateFieldInitSpec(this,_activeEditor,{writable:true,value:null});_classPrivateFieldInitSpec(this,_allEditors,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_allLayers,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_annotationStorage,{writable:true,value:null});_classPrivateFieldInitSpec(this,_commandManager,{writable:true,value:new CommandManager()});_classPrivateFieldInitSpec(this,_currentPageIndex,{writable:true,value:0});_classPrivateFieldInitSpec(this,_editorTypes,{writable:true,value:null});_classPrivateFieldInitSpec(this,_editorsToRescale,{writable:true,value:new Set()});_classPrivateFieldInitSpec(this,_eventBus,{writable:true,value:null});_classPrivateFieldInitSpec(this,_idManager,{writable:true,value:new IdManager()});_classPrivateFieldInitSpec(this,_isEnabled,{writable:true,value:false});_classPrivateFieldInitSpec(this,_mode,{writable:true,value:_util.AnnotationEditorType.NONE});_classPrivateFieldInitSpec(this,_selectedEditors,{writable:true,value:new Set()});_classPrivateFieldInitSpec(this,_boundCopy,{writable:true,value:this.copy.bind(this)});_classPrivateFieldInitSpec(this,_boundCut,{writable:true,value:this.cut.bind(this)});_classPrivateFieldInitSpec(this,_boundPaste,{writable:true,value:this.paste.bind(this)});_classPrivateFieldInitSpec(this,_boundKeydown,{writable:true,value:this.keydown.bind(this)});_classPrivateFieldInitSpec(this,_boundOnEditingAction,{writable:true,value:this.onEditingAction.bind(this)});_classPrivateFieldInitSpec(this,_boundOnPageChanging,{writable:true,value:this.onPageChanging.bind(this)});_classPrivateFieldInitSpec(this,_boundOnScaleChanging,{writable:true,value:this.onScaleChanging.bind(this)});_classPrivateFieldInitSpec(this,_boundOnRotationChanging,{writable:true,value:this.onRotationChanging.bind(this)});_classPrivateFieldInitSpec(this,_previousStates,{writable:true,value:{isEditing:false,isEmpty:true,hasSomethingToUndo:false,hasSomethingToRedo:false,hasSelectedEditor:false}});_classPrivateFieldInitSpec(this,_container,{writable:true,value:null});_classPrivateFieldSet(this,_container,container);_classPrivateFieldSet(this,_eventBus,eventBus);_classPrivateFieldGet(this,_eventBus)._on("editingaction",_classPrivateFieldGet(this,_boundOnEditingAction));_classPrivateFieldGet(this,_eventBus)._on("pagechanging",_classPrivateFieldGet(this,_boundOnPageChanging));_classPrivateFieldGet(this,_eventBus)._on("scalechanging",_classPrivateFieldGet(this,_boundOnScaleChanging));_classPrivateFieldGet(this,_eventBus)._on("rotationchanging",_classPrivateFieldGet(this,_boundOnRotationChanging));_classPrivateFieldSet(this,_annotationStorage,annotationStorage);this.viewParameters={realScale:_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0};}_createClass(AnnotationEditorUIManager,[{key:"destroy",value:function destroy(){_classPrivateMethodGet(this,_removeKeyboardManager,_removeKeyboardManager2).call(this);_classPrivateFieldGet(this,_eventBus)._off("editingaction",_classPrivateFieldGet(this,_boundOnEditingAction));_classPrivateFieldGet(this,_eventBus)._off("pagechanging",_classPrivateFieldGet(this,_boundOnPageChanging));_classPrivateFieldGet(this,_eventBus)._off("scalechanging",_classPrivateFieldGet(this,_boundOnScaleChanging));_classPrivateFieldGet(this,_eventBus)._off("rotationchanging",_classPrivateFieldGet(this,_boundOnRotationChanging));var _iterator5=_createForOfIteratorHelper(_classPrivateFieldGet(this,_allLayers).values()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var layer=_step5.value;layer.destroy();}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}_classPrivateFieldGet(this,_allLayers).clear();_classPrivateFieldGet(this,_allEditors).clear();_classPrivateFieldGet(this,_editorsToRescale).clear();_classPrivateFieldSet(this,_activeEditor,null);_classPrivateFieldGet(this,_selectedEditors).clear();_classPrivateFieldGet(this,_commandManager).destroy();}},{key:"onPageChanging",value:function onPageChanging(_ref2){var pageNumber=_ref2.pageNumber;_classPrivateFieldSet(this,_currentPageIndex,pageNumber-1);}},{key:"focusMainContainer",value:function focusMainContainer(){_classPrivateFieldGet(this,_container).focus();}},{key:"addShouldRescale",value:function addShouldRescale(editor){_classPrivateFieldGet(this,_editorsToRescale).add(editor);}},{key:"removeShouldRescale",value:function removeShouldRescale(editor){_classPrivateFieldGet(this,_editorsToRescale).delete(editor);}},{key:"onScaleChanging",value:function onScaleChanging(_ref3){var scale=_ref3.scale;this.commitOrRemove();this.viewParameters.realScale=scale*_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS;var _iterator6=_createForOfIteratorHelper(_classPrivateFieldGet(this,_editorsToRescale)),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var editor=_step6.value;editor.onScaleChanging();}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}},{key:"onRotationChanging",value:function onRotationChanging(_ref4){var pagesRotation=_ref4.pagesRotation;this.commitOrRemove();this.viewParameters.rotation=pagesRotation;}},{key:"addToAnnotationStorage",value:function addToAnnotationStorage(editor){if(!editor.isEmpty()&&_classPrivateFieldGet(this,_annotationStorage)&&!_classPrivateFieldGet(this,_annotationStorage).has(editor.id)){_classPrivateFieldGet(this,_annotationStorage).setValue(editor.id,editor);}}},{key:"copy",value:function copy(event){event.preventDefault();if(_classPrivateFieldGet(this,_activeEditor)){_classPrivateFieldGet(this,_activeEditor).commitOrRemove();}if(!this.hasSelection){return;}var editors=[];var _iterator7=_createForOfIteratorHelper(_classPrivateFieldGet(this,_selectedEditors)),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var editor=_step7.value;if(!editor.isEmpty()){editors.push(editor.serialize());}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}if(editors.length===0){return;}event.clipboardData.setData("application/pdfjs",JSON.stringify(editors));}},{key:"cut",value:function cut(event){this.copy(event);this.delete();}},{key:"paste",value:function paste(event){event.preventDefault();var data=event.clipboardData.getData("application/pdfjs");this.addSerializedEditor(data);}},{key:"addSerializedEditor",value:function addSerializedEditor(data){var _this=this;var activateEditorIfNecessary=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!data){return;}try{if(typeof data==="string"){data=JSON.parse(data);}}catch(ex){(0,_util.warn)("paste: \"".concat(ex.message,"\"."));return;}if(!Array.isArray(data)){return;}var previousMode=_classPrivateFieldGet(this,_mode);if(activateEditorIfNecessary&&previousMode===_util.AnnotationEditorType.NONE){this.updateMode(_util.AnnotationEditorType.FREETEXT);}this.unselectAll();var layer=_classPrivateFieldGet(this,_allLayers).get(_classPrivateFieldGet(this,_currentPageIndex));try{var newEditors=[];var _iterator8=_createForOfIteratorHelper(data),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var editor=_step8.value;var deserializedEditor=layer.deserialize(editor);if(!deserializedEditor){return;}newEditors.push(deserializedEditor);}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}var cmd=function cmd(){for(var _i2=0,_newEditors=newEditors;_i2<_newEditors.length;_i2++){var editor=_newEditors[_i2];_classPrivateMethodGet(_this,_addEditorToLayer,_addEditorToLayer2).call(_this,editor);}_classPrivateMethodGet(_this,_selectEditors,_selectEditors2).call(_this,newEditors);};var undo=function undo(){for(var _i3=0,_newEditors2=newEditors;_i3<_newEditors2.length;_i3++){var editor=_newEditors2[_i3];editor.remove();}};this.addCommands({cmd:cmd,undo:undo,mustExec:true});}catch(ex){(0,_util.warn)("paste: \"".concat(ex.message,"\"."));}if(activateEditorIfNecessary&&previousMode!==_classPrivateFieldGet(this,_mode)){this.updateMode(previousMode);}}},{key:"keydown",value:function keydown(event){var _this$getActive;if(!((_this$getActive=this.getActive())!==null&&_this$getActive!==void 0&&_this$getActive.shouldGetKeyboardEvents())){AnnotationEditorUIManager._keyboardManager.exec(this,event);}}},{key:"onEditingAction",value:function onEditingAction(details){if(["undo","redo","delete","selectAll"].includes(details.name)){this[details.name]();}}},{key:"setEditingState",value:function setEditingState(isEditing){if(isEditing){_classPrivateMethodGet(this,_addKeyboardManager,_addKeyboardManager2).call(this);_classPrivateMethodGet(this,_addCopyPasteListeners,_addCopyPasteListeners2).call(this);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{isEditing:_classPrivateFieldGet(this,_mode)!==_util.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this),hasSomethingToUndo:_classPrivateFieldGet(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(this,_commandManager).hasSomethingToRedo(),hasSelectedEditor:false});}else{_classPrivateMethodGet(this,_removeKeyboardManager,_removeKeyboardManager2).call(this);_classPrivateMethodGet(this,_removeCopyPasteListeners,_removeCopyPasteListeners2).call(this);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{isEditing:false});}}},{key:"registerEditorTypes",value:function registerEditorTypes(types){if(_classPrivateFieldGet(this,_editorTypes)){return;}_classPrivateFieldSet(this,_editorTypes,types);var _iterator9=_createForOfIteratorHelper(_classPrivateFieldGet(this,_editorTypes)),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var editorType=_step9.value;_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editorType.defaultPropertiesToUpdate);}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}},{key:"getId",value:function getId(){return _classPrivateFieldGet(this,_idManager).getId();}},{key:"currentLayer",get:function get(){return _classPrivateFieldGet(this,_allLayers).get(_classPrivateFieldGet(this,_currentPageIndex));}},{key:"currentPageIndex",get:function get(){return _classPrivateFieldGet(this,_currentPageIndex);}},{key:"addLayer",value:function addLayer(layer){_classPrivateFieldGet(this,_allLayers).set(layer.pageIndex,layer);if(_classPrivateFieldGet(this,_isEnabled)){layer.enable();}else{layer.disable();}}},{key:"removeLayer",value:function removeLayer(layer){_classPrivateFieldGet(this,_allLayers).delete(layer.pageIndex);}},{key:"updateMode",value:function updateMode(mode){_classPrivateFieldSet(this,_mode,mode);if(mode===_util.AnnotationEditorType.NONE){this.setEditingState(false);_classPrivateMethodGet(this,_disableAll,_disableAll2).call(this);}else{this.setEditingState(true);_classPrivateMethodGet(this,_enableAll,_enableAll2).call(this);var _iterator10=_createForOfIteratorHelper(_classPrivateFieldGet(this,_allLayers).values()),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var layer=_step10.value;layer.updateMode(mode);}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}}}},{key:"updateToolbar",value:function updateToolbar(mode){if(mode===_classPrivateFieldGet(this,_mode)){return;}_classPrivateFieldGet(this,_eventBus).dispatch("switchannotationeditormode",{source:this,mode:mode});}},{key:"updateParams",value:function updateParams(type,value){if(!_classPrivateFieldGet(this,_editorTypes)){return;}var _iterator11=_createForOfIteratorHelper(_classPrivateFieldGet(this,_selectedEditors)),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var editor=_step11.value;editor.updateParams(type,value);}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}var _iterator12=_createForOfIteratorHelper(_classPrivateFieldGet(this,_editorTypes)),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var editorType=_step12.value;editorType.updateDefaultParams(type,value);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}},{key:"getEditors",value:function getEditors(pageIndex){var editors=[];var _iterator13=_createForOfIteratorHelper(_classPrivateFieldGet(this,_allEditors).values()),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var editor=_step13.value;if(editor.pageIndex===pageIndex){editors.push(editor);}}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}return editors;}},{key:"getEditor",value:function getEditor(id){return _classPrivateFieldGet(this,_allEditors).get(id);}},{key:"addEditor",value:function addEditor(editor){_classPrivateFieldGet(this,_allEditors).set(editor.id,editor);}},{key:"removeEditor",value:function removeEditor(editor){var _classPrivateFieldGet2;_classPrivateFieldGet(this,_allEditors).delete(editor.id);this.unselect(editor);(_classPrivateFieldGet2=_classPrivateFieldGet(this,_annotationStorage))===null||_classPrivateFieldGet2===void 0?void 0:_classPrivateFieldGet2.remove(editor.id);}},{key:"setActiveEditor",value:function setActiveEditor(editor){if(_classPrivateFieldGet(this,_activeEditor)===editor){return;}_classPrivateFieldSet(this,_activeEditor,editor);if(editor){_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate);}}},{key:"toggleSelected",value:function toggleSelected(editor){if(_classPrivateFieldGet(this,_selectedEditors).has(editor)){_classPrivateFieldGet(this,_selectedEditors).delete(editor);editor.unselect();_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection});return;}_classPrivateFieldGet(this,_selectedEditors).add(editor);editor.select();_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:true});}},{key:"setSelected",value:function setSelected(editor){var _iterator14=_createForOfIteratorHelper(_classPrivateFieldGet(this,_selectedEditors)),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var ed=_step14.value;if(ed!==editor){ed.unselect();}}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}_classPrivateFieldGet(this,_selectedEditors).clear();_classPrivateFieldGet(this,_selectedEditors).add(editor);editor.select();_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:true});}},{key:"isSelected",value:function isSelected(editor){return _classPrivateFieldGet(this,_selectedEditors).has(editor);}},{key:"unselect",value:function unselect(editor){editor.unselect();_classPrivateFieldGet(this,_selectedEditors).delete(editor);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection});}},{key:"hasSelection",get:function get(){return _classPrivateFieldGet(this,_selectedEditors).size!==0;}},{key:"undo",value:function undo(){_classPrivateFieldGet(this,_commandManager).undo();_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:_classPrivateFieldGet(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:true,isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this)});}},{key:"redo",value:function redo(){_classPrivateFieldGet(this,_commandManager).redo();_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:_classPrivateFieldGet(this,_commandManager).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this)});}},{key:"addCommands",value:function addCommands(params){_classPrivateFieldGet(this,_commandManager).add(params);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:false,isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this)});}},{key:"delete",value:function _delete(){var _this2=this;this.commitOrRemove();if(!this.hasSelection){return;}var editors=_toConsumableArray(_classPrivateFieldGet(this,_selectedEditors));var cmd=function cmd(){var _iterator15=_createForOfIteratorHelper(editors),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var editor=_step15.value;editor.remove();}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}};var undo=function undo(){var _iterator16=_createForOfIteratorHelper(editors),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var editor=_step16.value;_classPrivateMethodGet(_this2,_addEditorToLayer,_addEditorToLayer2).call(_this2,editor);}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}};this.addCommands({cmd:cmd,undo:undo,mustExec:true});}},{key:"commitOrRemove",value:function commitOrRemove(){var _classPrivateFieldGet3;(_classPrivateFieldGet3=_classPrivateFieldGet(this,_activeEditor))===null||_classPrivateFieldGet3===void 0?void 0:_classPrivateFieldGet3.commitOrRemove();}},{key:"selectAll",value:function selectAll(){var _iterator17=_createForOfIteratorHelper(_classPrivateFieldGet(this,_selectedEditors)),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var editor=_step17.value;editor.commit();}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}_classPrivateMethodGet(this,_selectEditors,_selectEditors2).call(this,_classPrivateFieldGet(this,_allEditors).values());}},{key:"unselectAll",value:function unselectAll(){if(_classPrivateFieldGet(this,_activeEditor)){_classPrivateFieldGet(this,_activeEditor).commitOrRemove();return;}if(_classPrivateFieldGet(this,_selectedEditors).size===0){return;}var _iterator18=_createForOfIteratorHelper(_classPrivateFieldGet(this,_selectedEditors)),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var editor=_step18.value;editor.unselect();}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}_classPrivateFieldGet(this,_selectedEditors).clear();_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:false});}},{key:"isActive",value:function isActive(editor){return _classPrivateFieldGet(this,_activeEditor)===editor;}},{key:"getActive",value:function getActive(){return _classPrivateFieldGet(this,_activeEditor);}},{key:"getMode",value:function getMode(){return _classPrivateFieldGet(this,_mode);}},{key:"removeEditors",value:function removeEditors(){var filterFunction=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){return true;};var hasChanged=false;_classPrivateFieldGet(this,_allEditors).forEach(function(editor){if(filterFunction(editor.serialize())){editor.remove();hasChanged=true;}});if(hasChanged){_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:false,hasSomethingToRedo:false,isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this)});_classPrivateFieldGet(this,_commandManager).reset();}}}]);return AnnotationEditorUIManager;}();exports.AnnotationEditorUIManager=AnnotationEditorUIManager;function _addKeyboardManager2(){_classPrivateFieldGet(this,_container).addEventListener("keydown",_classPrivateFieldGet(this,_boundKeydown));}function _removeKeyboardManager2(){_classPrivateFieldGet(this,_container).removeEventListener("keydown",_classPrivateFieldGet(this,_boundKeydown));}function _addCopyPasteListeners2(){document.addEventListener("copy",_classPrivateFieldGet(this,_boundCopy));document.addEventListener("cut",_classPrivateFieldGet(this,_boundCut));document.addEventListener("paste",_classPrivateFieldGet(this,_boundPaste));}function _removeCopyPasteListeners2(){document.removeEventListener("copy",_classPrivateFieldGet(this,_boundCopy));document.removeEventListener("cut",_classPrivateFieldGet(this,_boundCut));document.removeEventListener("paste",_classPrivateFieldGet(this,_boundPaste));}function _dispatchUpdateStates2(details){var _this3=this;var hasChanged=Object.entries(details).some(function(_ref5){var _ref6=_slicedToArray(_ref5,2),key=_ref6[0],value=_ref6[1];return _classPrivateFieldGet(_this3,_previousStates)[key]!==value;});if(hasChanged){_classPrivateFieldGet(this,_eventBus).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(this,_previousStates),details)});}}function _dispatchUpdateUI2(details){_classPrivateFieldGet(this,_eventBus).dispatch("annotationeditorparamschanged",{source:this,details:details});}function _enableAll2(){if(!_classPrivateFieldGet(this,_isEnabled)){_classPrivateFieldSet(this,_isEnabled,true);var _iterator19=_createForOfIteratorHelper(_classPrivateFieldGet(this,_allLayers).values()),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var layer=_step19.value;layer.enable();}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}}}function _disableAll2(){this.unselectAll();if(_classPrivateFieldGet(this,_isEnabled)){_classPrivateFieldSet(this,_isEnabled,false);var _iterator20=_createForOfIteratorHelper(_classPrivateFieldGet(this,_allLayers).values()),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var layer=_step20.value;layer.disable();}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}}}function _addEditorToLayer2(editor){var layer=_classPrivateFieldGet(this,_allLayers).get(editor.pageIndex);if(layer){layer.addOrRebuild(editor);}else{this.addEditor(editor);}}function _isEmpty2(){if(_classPrivateFieldGet(this,_allEditors).size===0){return true;}if(_classPrivateFieldGet(this,_allEditors).size===1){var _iterator21=_createForOfIteratorHelper(_classPrivateFieldGet(this,_allEditors).values()),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var editor=_step21.value;return editor.isEmpty();}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}}return false;}function _selectEditors2(editors){_classPrivateFieldGet(this,_selectedEditors).clear();var _iterator22=_createForOfIteratorHelper(editors),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var editor=_step22.value;if(editor.isEmpty()){continue;}_classPrivateFieldGet(this,_selectedEditors).add(editor);editor.select();}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:true});}_defineProperty(AnnotationEditorUIManager,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],AnnotationEditorUIManager.prototype.selectAll],[["ctrl+z","mac+meta+z"],AnnotationEditorUIManager.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],AnnotationEditorUIManager.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],AnnotationEditorUIManager.prototype.delete],[["Escape","mac+Escape"],AnnotationEditorUIManager.prototype.unselectAll]]));

/***/ }),
/* 141 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.StatTimer=exports.RenderingCancelledException=exports.PixelsPerInch=exports.PageViewport=exports.PDFDateString=exports.DOMStandardFontDataFactory=exports.DOMSVGFactory=exports.DOMFilterFactory=exports.DOMCanvasFactory=exports.DOMCMapReaderFactory=exports.AnnotationPrefix=void 0;exports.deprecated=deprecated;exports.getColorValues=getColorValues;exports.getCurrentTransform=getCurrentTransform;exports.getCurrentTransformInverse=getCurrentTransformInverse;exports.getFilenameFromUrl=getFilenameFromUrl;exports.getPdfFilenameFromUrl=getPdfFilenameFromUrl;exports.getRGB=getRGB;exports.getXfaPageViewport=getXfaPageViewport;exports.isDataScheme=isDataScheme;exports.isPdfFile=isPdfFile;exports.isValidFetchUrl=isValidFetchUrl;exports.loadScript=loadScript;exports.setLayerDimensions=setLayerDimensions;var _base_factory=__w_pdfjs_require__(142);var _util=__w_pdfjs_require__(1);function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},"");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg);}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,"toString",function(){return"[object Generator]";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var SVG_NS="http://www.w3.org/2000/svg";var AnnotationPrefix="pdfjs_internal_id_";exports.AnnotationPrefix=AnnotationPrefix;var PixelsPerInch=/*#__PURE__*/_createClass(function PixelsPerInch(){_classCallCheck(this,PixelsPerInch);});exports.PixelsPerInch=PixelsPerInch;_defineProperty(PixelsPerInch,"CSS",96.0);_defineProperty(PixelsPerInch,"PDF",72.0);_defineProperty(PixelsPerInch,"PDF_TO_CSS_UNITS",PixelsPerInch.CSS/PixelsPerInch.PDF);var _cache=/*#__PURE__*/new WeakMap();var _defs=/*#__PURE__*/new WeakMap();var _docId=/*#__PURE__*/new WeakMap();var _document=/*#__PURE__*/new WeakMap();var _hcmFilter=/*#__PURE__*/new WeakMap();var _hcmKey=/*#__PURE__*/new WeakMap();var _hcmUrl=/*#__PURE__*/new WeakMap();var _id=/*#__PURE__*/new WeakMap();var _cache2=/*#__PURE__*/new WeakMap();var _defs2=/*#__PURE__*/new WeakMap();var _appendFeFunc=/*#__PURE__*/new WeakSet();var DOMFilterFactory=/*#__PURE__*/function(_BaseFilterFactory){_inherits(DOMFilterFactory,_BaseFilterFactory);var _super=_createSuper(DOMFilterFactory);function DOMFilterFactory(){var _this;var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},docId=_ref.docId,_ref$ownerDocument=_ref.ownerDocument,ownerDocument=_ref$ownerDocument===void 0?globalThis.document:_ref$ownerDocument;_classCallCheck(this,DOMFilterFactory);_this=_super.call(this);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_appendFeFunc);_classPrivateFieldInitSpec(_assertThisInitialized(_this),_defs2,{get:_get_defs,set:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_cache2,{get:_get_cache,set:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_cache,{writable:true,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_defs,{writable:true,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_docId,{writable:true,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_document,{writable:true,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_hcmFilter,{writable:true,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_hcmKey,{writable:true,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_hcmUrl,{writable:true,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_id,{writable:true,value:0});_classPrivateFieldSet(_assertThisInitialized(_this),_docId,docId);_classPrivateFieldSet(_assertThisInitialized(_this),_document,ownerDocument);return _this;}_createClass(DOMFilterFactory,[{key:"addFilter",value:function addFilter(maps){var _this$id,_this$id2;if(!maps){return"none";}var value=_classPrivateFieldGet(this,_cache2).get(maps);if(value){return value;}var tableR,tableG,tableB,key;if(maps.length===1){var mapR=maps[0];var buffer=new Array(256);for(var i=0;i<256;i++){buffer[i]=mapR[i]/255;}key=tableR=tableG=tableB=buffer.join(",");}else{var _maps=_slicedToArray(maps,3),_mapR=_maps[0],mapG=_maps[1],mapB=_maps[2];var bufferR=new Array(256);var bufferG=new Array(256);var bufferB=new Array(256);for(var _i2=0;_i2<256;_i2++){bufferR[_i2]=_mapR[_i2]/255;bufferG[_i2]=mapG[_i2]/255;bufferB[_i2]=mapB[_i2]/255;}tableR=bufferR.join(",");tableG=bufferG.join(",");tableB=bufferB.join(",");key="".concat(tableR).concat(tableG).concat(tableB);}value=_classPrivateFieldGet(this,_cache2).get(key);if(value){_classPrivateFieldGet(this,_cache2).set(maps,value);return value;}var id="g_".concat(_classPrivateFieldGet(this,_docId),"_transfer_map_").concat((_classPrivateFieldSet(this,_id,(_this$id=_classPrivateFieldGet(this,_id),_this$id2=_this$id++,_this$id)),_this$id2));var url="url(#".concat(id,")");_classPrivateFieldGet(this,_cache2).set(maps,url);_classPrivateFieldGet(this,_cache2).set(key,url);var filter=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"filter",SVG_NS);filter.setAttribute("id",id);filter.setAttribute("color-interpolation-filters","sRGB");var feComponentTransfer=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"feComponentTransfer");filter.append(feComponentTransfer);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncR",tableR);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncG",tableG);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncB",tableB);_classPrivateFieldGet(this,_defs2).append(filter);return url;}},{key:"addHCMFilter",value:function addHCMFilter(fgColor,bgColor){var _classPrivateFieldGet2;var key="".concat(fgColor,"-").concat(bgColor);if(_classPrivateFieldGet(this,_hcmKey)===key){return _classPrivateFieldGet(this,_hcmUrl);}_classPrivateFieldSet(this,_hcmKey,key);_classPrivateFieldSet(this,_hcmUrl,"none");(_classPrivateFieldGet2=_classPrivateFieldGet(this,_hcmFilter))===null||_classPrivateFieldGet2===void 0?void 0:_classPrivateFieldGet2.remove();if(!fgColor||!bgColor){return _classPrivateFieldGet(this,_hcmUrl);}_classPrivateFieldGet(this,_defs2).style.color=fgColor;fgColor=getComputedStyle(_classPrivateFieldGet(this,_defs2)).getPropertyValue("color");var fgRGB=getRGB(fgColor);fgColor=_util.Util.makeHexColor.apply(_util.Util,_toConsumableArray(fgRGB));_classPrivateFieldGet(this,_defs2).style.color=bgColor;bgColor=getComputedStyle(_classPrivateFieldGet(this,_defs2)).getPropertyValue("color");var bgRGB=getRGB(bgColor);bgColor=_util.Util.makeHexColor.apply(_util.Util,_toConsumableArray(bgRGB));_classPrivateFieldGet(this,_defs2).style.color="";if(fgColor==="#000000"&&bgColor==="#ffffff"||fgColor===bgColor){return _classPrivateFieldGet(this,_hcmUrl);}var map=new Array(256);for(var i=0;i<=255;i++){var x=i/255;map[i]=x<=0.03928?x/12.92:Math.pow((x+0.055)/1.055,2.4);}var table=map.join(",");var id="g_".concat(_classPrivateFieldGet(this,_docId),"_hcm_filter");var filter=_classPrivateFieldSet(this,_hcmFilter,_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"filter",SVG_NS));filter.setAttribute("id",id);filter.setAttribute("color-interpolation-filters","sRGB");var feComponentTransfer=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"feComponentTransfer");filter.append(feComponentTransfer);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncR",table);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncG",table);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncB",table);var feColorMatrix=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"feColorMatrix");feColorMatrix.setAttribute("type","matrix");feColorMatrix.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0");filter.append(feColorMatrix);feComponentTransfer=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"feComponentTransfer");filter.append(feComponentTransfer);var getSteps=function getSteps(c,n){var start=fgRGB[c]/255;var end=bgRGB[c]/255;var arr=new Array(n+1);for(var _i3=0;_i3<=n;_i3++){arr[_i3]=start+_i3/n*(end-start);}return arr.join(",");};_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncR",getSteps(0,5));_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncG",getSteps(1,5));_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,"feFuncB",getSteps(2,5));_classPrivateFieldGet(this,_defs2).append(filter);_classPrivateFieldSet(this,_hcmUrl,"url(#".concat(id,")"));return _classPrivateFieldGet(this,_hcmUrl);}},{key:"destroy",value:function destroy(){var keepHCM=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(keepHCM&&_classPrivateFieldGet(this,_hcmUrl)){return;}if(_classPrivateFieldGet(this,_defs)){_classPrivateFieldGet(this,_defs).parentNode.parentNode.remove();_classPrivateFieldSet(this,_defs,null);}if(_classPrivateFieldGet(this,_cache)){_classPrivateFieldGet(this,_cache).clear();_classPrivateFieldSet(this,_cache,null);}_classPrivateFieldSet(this,_id,0);}}]);return DOMFilterFactory;}(_base_factory.BaseFilterFactory);exports.DOMFilterFactory=DOMFilterFactory;function _get_cache(){return _classPrivateFieldGet(this,_cache)||_classPrivateFieldSet(this,_cache,new Map());}function _get_defs(){if(!_classPrivateFieldGet(this,_defs)){var div=_classPrivateFieldGet(this,_document).createElement("div");var style=div.style;style.visibility="hidden";style.contain="strict";style.width=style.height=0;style.position="absolute";style.top=style.left=0;style.zIndex=-1;var svg=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"svg");svg.setAttribute("width",0);svg.setAttribute("height",0);_classPrivateFieldSet(this,_defs,_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,"defs"));div.append(svg);svg.append(_classPrivateFieldGet(this,_defs));_classPrivateFieldGet(this,_document).body.append(div);}return _classPrivateFieldGet(this,_defs);}function _appendFeFunc2(feComponentTransfer,func,table){var feFunc=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,func);feFunc.setAttribute("type","discrete");feFunc.setAttribute("tableValues",table);feComponentTransfer.append(feFunc);}var DOMCanvasFactory=/*#__PURE__*/function(_BaseCanvasFactory){_inherits(DOMCanvasFactory,_BaseCanvasFactory);var _super2=_createSuper(DOMCanvasFactory);function DOMCanvasFactory(){var _this2;var _ref2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref2$ownerDocument=_ref2.ownerDocument,ownerDocument=_ref2$ownerDocument===void 0?globalThis.document:_ref2$ownerDocument;_classCallCheck(this,DOMCanvasFactory);_this2=_super2.call(this);_this2._document=ownerDocument;return _this2;}_createClass(DOMCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(width,height){var canvas=this._document.createElement("canvas");canvas.width=width;canvas.height=height;return canvas;}}]);return DOMCanvasFactory;}(_base_factory.BaseCanvasFactory);exports.DOMCanvasFactory=DOMCanvasFactory;function fetchData(_x2){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var asTypedArray,response,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:asTypedArray=_args.length>1&&_args[1]!==undefined?_args[1]:false;if(!isValidFetchUrl(url,document.baseURI)){_context.next=21;break;}_context.next=4;return fetch(url);case 4:response=_context.sent;if(response.ok){_context.next=7;break;}throw new Error(response.statusText);case 7:if(!asTypedArray){_context.next=15;break;}_context.t1=Uint8Array;_context.next=11;return response.arrayBuffer();case 11:_context.t2=_context.sent;_context.t0=new _context.t1(_context.t2);_context.next=20;break;case 15:_context.t3=_util.stringToBytes;_context.next=18;return response.text();case 18:_context.t4=_context.sent;_context.t0=(0,_context.t3)(_context.t4);case 20:return _context.abrupt("return",_context.t0);case 21:return _context.abrupt("return",new Promise(function(resolve,reject){var request=new XMLHttpRequest();request.open("GET",url,true);if(asTypedArray){request.responseType="arraybuffer";}request.onreadystatechange=function(){if(request.readyState!==XMLHttpRequest.DONE){return;}if(request.status===200||request.status===0){var data;if(asTypedArray&&request.response){data=new Uint8Array(request.response);}else if(!asTypedArray&&request.responseText){data=(0,_util.stringToBytes)(request.responseText);}if(data){resolve(data);return;}}reject(new Error(request.statusText));};request.send(null);}));case 22:case"end":return _context.stop();}},_callee);}));return _fetchData.apply(this,arguments);}var DOMCMapReaderFactory=/*#__PURE__*/function(_BaseCMapReaderFactor){_inherits(DOMCMapReaderFactory,_BaseCMapReaderFactor);var _super3=_createSuper(DOMCMapReaderFactory);function DOMCMapReaderFactory(){_classCallCheck(this,DOMCMapReaderFactory);return _super3.apply(this,arguments);}_createClass(DOMCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(url,compressionType){return fetchData(url,this.isCompressed).then(function(data){return{cMapData:data,compressionType:compressionType};});}}]);return DOMCMapReaderFactory;}(_base_factory.BaseCMapReaderFactory);exports.DOMCMapReaderFactory=DOMCMapReaderFactory;var DOMStandardFontDataFactory=/*#__PURE__*/function(_BaseStandardFontData){_inherits(DOMStandardFontDataFactory,_BaseStandardFontData);var _super4=_createSuper(DOMStandardFontDataFactory);function DOMStandardFontDataFactory(){_classCallCheck(this,DOMStandardFontDataFactory);return _super4.apply(this,arguments);}_createClass(DOMStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(url){return fetchData(url,true);}}]);return DOMStandardFontDataFactory;}(_base_factory.BaseStandardFontDataFactory);exports.DOMStandardFontDataFactory=DOMStandardFontDataFactory;var DOMSVGFactory=/*#__PURE__*/function(_BaseSVGFactory){_inherits(DOMSVGFactory,_BaseSVGFactory);var _super5=_createSuper(DOMSVGFactory);function DOMSVGFactory(){_classCallCheck(this,DOMSVGFactory);return _super5.apply(this,arguments);}_createClass(DOMSVGFactory,[{key:"_createSVG",value:function _createSVG(type){return document.createElementNS(SVG_NS,type);}}]);return DOMSVGFactory;}(_base_factory.BaseSVGFactory);exports.DOMSVGFactory=DOMSVGFactory;var PageViewport=/*#__PURE__*/function(){function PageViewport(_ref3){var viewBox=_ref3.viewBox,scale=_ref3.scale,rotation=_ref3.rotation,_ref3$offsetX=_ref3.offsetX,offsetX=_ref3$offsetX===void 0?0:_ref3$offsetX,_ref3$offsetY=_ref3.offsetY,offsetY=_ref3$offsetY===void 0?0:_ref3$offsetY,_ref3$dontFlip=_ref3.dontFlip,dontFlip=_ref3$dontFlip===void 0?false:_ref3$dontFlip;_classCallCheck(this,PageViewport);this.viewBox=viewBox;this.scale=scale;this.rotation=rotation;this.offsetX=offsetX;this.offsetY=offsetY;var centerX=(viewBox[2]+viewBox[0])/2;var centerY=(viewBox[3]+viewBox[1])/2;var rotateA,rotateB,rotateC,rotateD;rotation%=360;if(rotation<0){rotation+=360;}switch(rotation){case 180:rotateA=-1;rotateB=0;rotateC=0;rotateD=1;break;case 90:rotateA=0;rotateB=1;rotateC=1;rotateD=0;break;case 270:rotateA=0;rotateB=-1;rotateC=-1;rotateD=0;break;case 0:rotateA=1;rotateB=0;rotateC=0;rotateD=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.");}if(dontFlip){rotateC=-rotateC;rotateD=-rotateD;}var offsetCanvasX,offsetCanvasY;var width,height;if(rotateA===0){offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX;offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY;width=(viewBox[3]-viewBox[1])*scale;height=(viewBox[2]-viewBox[0])*scale;}else{offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX;offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY;width=(viewBox[2]-viewBox[0])*scale;height=(viewBox[3]-viewBox[1])*scale;}this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY];this.width=width;this.height=height;}_createClass(PageViewport,[{key:"rawDims",get:function get(){var viewBox=this.viewBox;return(0,_util.shadow)(this,"rawDims",{pageWidth:viewBox[2]-viewBox[0],pageHeight:viewBox[3]-viewBox[1],pageX:viewBox[0],pageY:viewBox[1]});}},{key:"clone",value:function clone(){var _ref4=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref4$scale=_ref4.scale,scale=_ref4$scale===void 0?this.scale:_ref4$scale,_ref4$rotation=_ref4.rotation,rotation=_ref4$rotation===void 0?this.rotation:_ref4$rotation,_ref4$offsetX=_ref4.offsetX,offsetX=_ref4$offsetX===void 0?this.offsetX:_ref4$offsetX,_ref4$offsetY=_ref4.offsetY,offsetY=_ref4$offsetY===void 0?this.offsetY:_ref4$offsetY,_ref4$dontFlip=_ref4.dontFlip,dontFlip=_ref4$dontFlip===void 0?false:_ref4$dontFlip;return new PageViewport({viewBox:this.viewBox.slice(),scale:scale,rotation:rotation,offsetX:offsetX,offsetY:offsetY,dontFlip:dontFlip});}},{key:"convertToViewportPoint",value:function convertToViewportPoint(x,y){return _util.Util.applyTransform([x,y],this.transform);}},{key:"convertToViewportRectangle",value:function convertToViewportRectangle(rect){var topLeft=_util.Util.applyTransform([rect[0],rect[1]],this.transform);var bottomRight=_util.Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]];}},{key:"convertToPdfPoint",value:function convertToPdfPoint(x,y){return _util.Util.applyInverseTransform([x,y],this.transform);}}]);return PageViewport;}();exports.PageViewport=PageViewport;var RenderingCancelledException=/*#__PURE__*/function(_BaseException){_inherits(RenderingCancelledException,_BaseException);var _super6=_createSuper(RenderingCancelledException);function RenderingCancelledException(msg,type){var _this3;var extraDelay=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;_classCallCheck(this,RenderingCancelledException);_this3=_super6.call(this,msg,"RenderingCancelledException");_this3.type=type;_this3.extraDelay=extraDelay;return _this3;}return _createClass(RenderingCancelledException);}(_util.BaseException);exports.RenderingCancelledException=RenderingCancelledException;function isDataScheme(url){var ii=url.length;var i=0;while(i<ii&&url[i].trim()===""){i++;}return url.substring(i,i+5).toLowerCase()==="data:";}function isPdfFile(filename){return typeof filename==="string"&&/\.pdf$/i.test(filename);}function getFilenameFromUrl(url){var onlyStripPath=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!onlyStripPath){var _url$split=url.split(/[#?]/,1);var _url$split2=_slicedToArray(_url$split,1);url=_url$split2[0];}return url.substring(url.lastIndexOf("/")+1);}function getPdfFilenameFromUrl(url){var defaultFilename=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"document.pdf";if(window.PDFViewerApplication.appConfig.filenameForDownload){return window.PDFViewerApplication.appConfig.filenameForDownload;}if(typeof url!=="string"){return defaultFilename;}if(isDataScheme(url)){(0,_util.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.');return defaultFilename;}var reURI=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/;var reFilename=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i;var splitURI=reURI.exec(url);var suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename){suggestedFilename=suggestedFilename[0];if(suggestedFilename.includes("%")){try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0];}catch(ex){}}}return suggestedFilename||defaultFilename;}var StatTimer=/*#__PURE__*/function(){function StatTimer(){_classCallCheck(this,StatTimer);_defineProperty(this,"started",Object.create(null));_defineProperty(this,"times",[]);}_createClass(StatTimer,[{key:"time",value:function time(name){if(name in this.started){(0,_util.warn)("Timer is already running for ".concat(name));}this.started[name]=Date.now();}},{key:"timeEnd",value:function timeEnd(name){if(!(name in this.started)){(0,_util.warn)("Timer has not been started for ".concat(name));}this.times.push({name:name,start:this.started[name],end:Date.now()});delete this.started[name];}},{key:"toString",value:function toString(){var outBuf=[];var longest=0;var _iterator=_createForOfIteratorHelper(this.times),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var name=_step.value.name;longest=Math.max(name.length,longest);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(this.times),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_step2.value,_name=_step2$value.name,start=_step2$value.start,end=_step2$value.end;outBuf.push("".concat(_name.padEnd(longest)," ").concat(end-start,"ms\n"));}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return outBuf.join("");}}]);return StatTimer;}();exports.StatTimer=StatTimer;function isValidFetchUrl(url,baseUrl){try{var _ref5=baseUrl?new URL(url,baseUrl):new URL(url),protocol=_ref5.protocol;return protocol==="http:"||protocol==="https:"||protocol==="capacitor:";}catch(ex){return false;}}function generateTrustedURL(sourcePath){if(window.trustedTypes){var sanitizer=window.trustedTypes.createPolicy("foo",{createScriptURL:function createScriptURL(url){return url;}});return sanitizer.createScriptURL(sourcePath);}return sourcePath;}function loadScript(src){var removeScriptElement=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return new Promise(function(resolve,reject){var script=document.createElement("script");var source=src;if(src.constructor.name==="Function"){source=src();}var secureSource=generateTrustedURL(source);script.src=secureSource;script.onload=function(evt){if(removeScriptElement){script.remove();}resolve(evt);};script.onerror=function(error){globalThis.ngxConsole.log(error);reject(new Error("Cannot load script at: ".concat(script.src)));};(document.head||document.documentElement).append(script);});}function deprecated(details){globalThis.ngxConsole.log("Deprecated API usage: "+details);}var pdfDateStringRegex;var PDFDateString=/*#__PURE__*/function(){function PDFDateString(){_classCallCheck(this,PDFDateString);}_createClass(PDFDateString,null,[{key:"toDateObject",value:function toDateObject(input){if(!input||typeof input!=="string"){return null;}if(!pdfDateStringRegex){pdfDateStringRegex=new RegExp("^D:"+"(\\d{4})"+"(\\d{2})?"+"(\\d{2})?"+"(\\d{2})?"+"(\\d{2})?"+"(\\d{2})?"+"([Z|+|-])?"+"(\\d{2})?"+"'?"+"(\\d{2})?"+"'?");}var matches=pdfDateStringRegex.exec(input);if(!matches){return null;}var year=parseInt(matches[1],10);var month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;var day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;var hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;var minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;var second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;var universalTimeRelation=matches[7]||"Z";var offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;var offsetMinute=parseInt(matches[9],10)||0;offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0;if(universalTimeRelation==="-"){hour+=offsetHour;minute+=offsetMinute;}else if(universalTimeRelation==="+"){hour-=offsetHour;minute-=offsetMinute;}return new Date(Date.UTC(year,month,day,hour,minute,second));}}]);return PDFDateString;}();exports.PDFDateString=PDFDateString;function getXfaPageViewport(xfaPage,_ref6){var _ref6$scale=_ref6.scale,scale=_ref6$scale===void 0?1:_ref6$scale,_ref6$rotation=_ref6.rotation,rotation=_ref6$rotation===void 0?0:_ref6$rotation;var _xfaPage$attributes$s=xfaPage.attributes.style,width=_xfaPage$attributes$s.width,height=_xfaPage$attributes$s.height;var viewBox=[0,0,parseInt(width),parseInt(height)];return new PageViewport({viewBox:viewBox,scale:scale,rotation:rotation});}function getRGB(color){if(color.startsWith("#")){var colorRGB=parseInt(color.slice(1),16);return[(colorRGB&0xff0000)>>16,(colorRGB&0x00ff00)>>8,colorRGB&0x0000ff];}if(color.startsWith("rgb(")){return color.slice(4,-1).split(",").map(function(x){return parseInt(x);});}if(color.startsWith("rgba(")){return color.slice(5,-1).split(",").map(function(x){return parseInt(x);}).slice(0,3);}(0,_util.warn)("Not a valid color format: \"".concat(color,"\""));return[0,0,0];}function getColorValues(colors){var span=document.createElement("span");span.style.visibility="hidden";document.body.append(span);var _iterator3=_createForOfIteratorHelper(colors.keys()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var name=_step3.value;span.style.color=name;var computedColor=window.getComputedStyle(span).color;colors.set(name,getRGB(computedColor));}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}span.remove();}function getCurrentTransform(ctx){var _ctx$getTransform=ctx.getTransform(),a=_ctx$getTransform.a,b=_ctx$getTransform.b,c=_ctx$getTransform.c,d=_ctx$getTransform.d,e=_ctx$getTransform.e,f=_ctx$getTransform.f;return[a,b,c,d,e,f];}function getCurrentTransformInverse(ctx){var _ctx$getTransform$inv=ctx.getTransform().invertSelf(),a=_ctx$getTransform$inv.a,b=_ctx$getTransform$inv.b,c=_ctx$getTransform$inv.c,d=_ctx$getTransform$inv.d,e=_ctx$getTransform$inv.e,f=_ctx$getTransform$inv.f;return[a,b,c,d,e,f];}function setLayerDimensions(div,viewport){var mustFlip=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var mustRotate=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(viewport instanceof PageViewport){var _viewport$rawDims=viewport.rawDims,pageWidth=_viewport$rawDims.pageWidth,pageHeight=_viewport$rawDims.pageHeight;var style=div.style;var widthStr="calc(var(--scale-factor) * ".concat(pageWidth,"px)");var heightStr="calc(var(--scale-factor) * ".concat(pageHeight,"px)");if(!mustFlip||viewport.rotation%180===0){style.width=widthStr;style.height=heightStr;}else{style.width=heightStr;style.height=widthStr;}}if(mustRotate){div.setAttribute("data-main-rotation",viewport.rotation);}}

/***/ }),
/* 142 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.BaseStandardFontDataFactory=exports.BaseSVGFactory=exports.BaseFilterFactory=exports.BaseCanvasFactory=exports.BaseCMapReaderFactory=void 0;var _util=__w_pdfjs_require__(1);function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},"");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg);}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,"toString",function(){return"[object Generator]";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var BaseFilterFactory=/*#__PURE__*/function(){function BaseFilterFactory(){_classCallCheck(this,BaseFilterFactory);if(this.constructor===BaseFilterFactory){(0,_util.unreachable)("Cannot initialize BaseFilterFactory.");}}_createClass(BaseFilterFactory,[{key:"addFilter",value:function addFilter(maps){return"none";}},{key:"addHCMFilter",value:function addHCMFilter(fgColor,bgColor){return"none";}},{key:"destroy",value:function destroy(){var keepHCM=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;}}]);return BaseFilterFactory;}();exports.BaseFilterFactory=BaseFilterFactory;var BaseCanvasFactory=/*#__PURE__*/function(){function BaseCanvasFactory(){_classCallCheck(this,BaseCanvasFactory);if(this.constructor===BaseCanvasFactory){(0,_util.unreachable)("Cannot initialize BaseCanvasFactory.");}}_createClass(BaseCanvasFactory,[{key:"create",value:function create(width,height){if(width<=0||height<=0){throw new Error("Invalid canvas size");}var canvas=this._createCanvas(width,height);var options=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:true}:undefined;var context=canvas.getContext("2d",options);return{canvas:canvas,context:context};}},{key:"reset",value:function reset(canvasAndContext,width,height){if(!canvasAndContext.canvas){throw new Error("Canvas is not specified");}if(width<=0||height<=0){throw new Error("Invalid canvas size");}canvasAndContext.canvas.width=width;canvasAndContext.canvas.height=height;}},{key:"destroy",value:function destroy(canvasAndContext){if(!canvasAndContext.canvas){throw new Error("Canvas is not specified");}canvasAndContext.canvas.width=0;canvasAndContext.canvas.height=0;canvasAndContext.canvas=null;canvasAndContext.context=null;}},{key:"_createCanvas",value:function _createCanvas(width,height){(0,_util.unreachable)("Abstract method `_createCanvas` called.");}}]);return BaseCanvasFactory;}();exports.BaseCanvasFactory=BaseCanvasFactory;var BaseCMapReaderFactory=/*#__PURE__*/function(){function BaseCMapReaderFactory(_ref){var _ref$baseUrl=_ref.baseUrl,baseUrl=_ref$baseUrl===void 0?null:_ref$baseUrl,_ref$isCompressed=_ref.isCompressed,isCompressed=_ref$isCompressed===void 0?true:_ref$isCompressed;_classCallCheck(this,BaseCMapReaderFactory);if(this.constructor===BaseCMapReaderFactory){(0,_util.unreachable)("Cannot initialize BaseCMapReaderFactory.");}this.baseUrl=baseUrl;this.isCompressed=isCompressed;}_createClass(BaseCMapReaderFactory,[{key:"fetch",value:function(){var _fetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref2){var _this=this;var name,url,compressionType;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:name=_ref2.name;if(this.baseUrl){_context.next=3;break;}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that '+'the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(name){_context.next=5;break;}throw new Error("CMap name must be specified.");case 5:url=this.baseUrl+name+(this.isCompressed?".bcmap":"");compressionType=this.isCompressed?_util.CMapCompressionType.BINARY:_util.CMapCompressionType.NONE;return _context.abrupt("return",this._fetchData(url,compressionType).catch(function(reason){throw new Error("Unable to load ".concat(_this.isCompressed?"binary ":"","CMap at: ").concat(url));}));case 8:case"end":return _context.stop();}},_callee,this);}));function fetch(_x){return _fetch.apply(this,arguments);}return fetch;}()},{key:"_fetchData",value:function _fetchData(url,compressionType){(0,_util.unreachable)("Abstract method `_fetchData` called.");}}]);return BaseCMapReaderFactory;}();exports.BaseCMapReaderFactory=BaseCMapReaderFactory;var BaseStandardFontDataFactory=/*#__PURE__*/function(){function BaseStandardFontDataFactory(_ref3){var _ref3$baseUrl=_ref3.baseUrl,baseUrl=_ref3$baseUrl===void 0?null:_ref3$baseUrl;_classCallCheck(this,BaseStandardFontDataFactory);if(this.constructor===BaseStandardFontDataFactory){(0,_util.unreachable)("Cannot initialize BaseStandardFontDataFactory.");}this.baseUrl=baseUrl;}_createClass(BaseStandardFontDataFactory,[{key:"fetch",value:function(){var _fetch2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref4){var filename,url;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:filename=_ref4.filename;if(this.baseUrl){_context2.next=3;break;}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that '+'the "standardFontDataUrl" API parameter is provided.');case 3:if(filename){_context2.next=5;break;}throw new Error("Font filename must be specified.");case 5:url="".concat(this.baseUrl).concat(filename);return _context2.abrupt("return",this._fetchData(url).catch(function(reason){throw new Error("Unable to load font data at: ".concat(url));}));case 7:case"end":return _context2.stop();}},_callee2,this);}));function fetch(_x2){return _fetch2.apply(this,arguments);}return fetch;}()},{key:"_fetchData",value:function _fetchData(url){(0,_util.unreachable)("Abstract method `_fetchData` called.");}}]);return BaseStandardFontDataFactory;}();exports.BaseStandardFontDataFactory=BaseStandardFontDataFactory;var BaseSVGFactory=/*#__PURE__*/function(){function BaseSVGFactory(){_classCallCheck(this,BaseSVGFactory);if(this.constructor===BaseSVGFactory){(0,_util.unreachable)("Cannot initialize BaseSVGFactory.");}}_createClass(BaseSVGFactory,[{key:"create",value:function create(width,height){var skipDimensions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(width<=0||height<=0){throw new Error("Invalid SVG dimensions");}var svg=this._createSVG("svg:svg");svg.setAttribute("version","1.1");if(!skipDimensions){svg.setAttribute("width","".concat(width,"px"));svg.setAttribute("height","".concat(height,"px"));}svg.setAttribute("preserveAspectRatio","none");svg.setAttribute("viewBox","0 0 ".concat(width," ").concat(height));return svg;}},{key:"createElement",value:function createElement(type){if(typeof type!=="string"){throw new Error("Invalid SVG element type");}return this._createSVG(type);}},{key:"_createSVG",value:function _createSVG(type){(0,_util.unreachable)("Abstract method `_createSVG` called.");}}]);return BaseSVGFactory;}();exports.BaseSVGFactory=BaseSVGFactory;

/***/ }),
/* 143 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.MurmurHash3_64=void 0;var _util=__w_pdfjs_require__(1);function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var SEED=0xc3d2e1f0;var MASK_HIGH=0xffff0000;var MASK_LOW=0xffff;var MurmurHash3_64=/*#__PURE__*/function(){function MurmurHash3_64(seed){_classCallCheck(this,MurmurHash3_64);this.h1=seed?seed&0xffffffff:SEED;this.h2=seed?seed&0xffffffff:SEED;}_createClass(MurmurHash3_64,[{key:"update",value:function update(input){var data,length;if(typeof input==="string"){data=new Uint8Array(input.length*2);length=0;for(var i=0,ii=input.length;i<ii;i++){var code=input.charCodeAt(i);if(code<=0xff){data[length++]=code;}else{data[length++]=code>>>8;data[length++]=code&0xff;}}}else if((0,_util.isArrayBuffer)(input)){data=input.slice();length=data.byteLength;}else{throw new Error("Wrong data format in MurmurHash3_64_update. "+"Input must be a string or array.");}var blockCounts=length>>2;var tailLength=length-blockCounts*4;var dataUint32=new Uint32Array(data.buffer,0,blockCounts);var k1=0,k2=0;var h1=this.h1,h2=this.h2;var C1=0xcc9e2d51,C2=0x1b873593;var C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(var _i=0;_i<blockCounts;_i++){if(_i&1){k1=dataUint32[_i];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;h1^=k1;h1=h1<<13|h1>>>19;h1=h1*5+0xe6546b64;}else{k2=dataUint32[_i];k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW;k2=k2<<15|k2>>>17;k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW;h2^=k2;h2=h2<<13|h2>>>19;h2=h2*5+0xe6546b64;}}k1=0;switch(tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;if(blockCounts&1){h1^=k1;}else{h2^=k1;}}this.h1=h1;this.h2=h2;}},{key:"hexdigest",value:function hexdigest(){var h1=this.h1,h2=this.h2;h1^=h2>>>1;h1=h1*0xed558ccd&MASK_HIGH|h1*0x8ccd&MASK_LOW;h2=h2*0xff51afd7&MASK_HIGH|((h2<<16|h1>>>16)*0xafd7ed55&MASK_HIGH)>>>16;h1^=h2>>>1;h1=h1*0x1a85ec53&MASK_HIGH|h1*0xec53&MASK_LOW;h2=h2*0xc4ceb9fe&MASK_HIGH|((h2<<16|h1>>>16)*0xb9fe1a85&MASK_HIGH)>>>16;h1^=h2>>>1;return(h1>>>0).toString(16).padStart(8,"0")+(h2>>>0).toString(16).padStart(8,"0");}}]);return MurmurHash3_64;}();exports.MurmurHash3_64=MurmurHash3_64;

/***/ }),
/* 144 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.FontLoader=exports.FontFaceObject=void 0;var _util=__w_pdfjs_require__(1);var _is_node=__w_pdfjs_require__(145);function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},"");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg);}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,"toString",function(){return"[object Generator]";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var FontLoader=/*#__PURE__*/function(){function FontLoader(_ref){var _ref$ownerDocument=_ref.ownerDocument,ownerDocument=_ref$ownerDocument===void 0?globalThis.document:_ref$ownerDocument,_ref$styleElement=_ref.styleElement,styleElement=_ref$styleElement===void 0?null:_ref$styleElement;_classCallCheck(this,FontLoader);this._document=ownerDocument;this.nativeFontFaces=[];this.styleElement=null;this.loadingRequests=[];this.loadTestFontId=0;}_createClass(FontLoader,[{key:"addNativeFontFace",value:function addNativeFontFace(nativeFontFace){this.nativeFontFaces.push(nativeFontFace);this._document.fonts.add(nativeFontFace);}},{key:"insertRule",value:function insertRule(rule){if(!this.styleElement){this.styleElement=this._document.createElement("style");this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement);}var styleSheet=this.styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length);}},{key:"clear",value:function clear(){var _iterator=_createForOfIteratorHelper(this.nativeFontFaces),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var nativeFontFace=_step.value;this._document.fonts.delete(nativeFontFace);}}catch(err){_iterator.e(err);}finally{_iterator.f();}this.nativeFontFaces.length=0;if(this.styleElement){this.styleElement.remove();this.styleElement=null;}}},{key:"bind",value:function(){var _bind=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(font){var _this=this;var nativeFontFace,rule;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(font.attached||font.missingFile)){_context.next=2;break;}return _context.abrupt("return");case 2:font.attached=true;if(!this.isFontLoadingAPISupported){_context.next=18;break;}nativeFontFace=font.createNativeFontFace();if(!nativeFontFace){_context.next=17;break;}this.addNativeFontFace(nativeFontFace);_context.prev=7;_context.next=10;return nativeFontFace.loaded;case 10:_context.next=17;break;case 12:_context.prev=12;_context.t0=_context["catch"](7);(0,_util.warn)("Failed to load font '".concat(nativeFontFace.family,"': '").concat(_context.t0,"'."));font.disableFontFace=true;throw _context.t0;case 17:return _context.abrupt("return");case 18:rule=font.createFontFaceRule();if(!rule){_context.next=25;break;}this.insertRule(rule);if(!this.isSyncFontLoadingSupported){_context.next=23;break;}return _context.abrupt("return");case 23:_context.next=25;return new Promise(function(resolve){var request=_this._queueLoadingCallback(resolve);_this._prepareFontLoadEvent(font,request);});case 25:case"end":return _context.stop();}},_callee,this,[[7,12]]);}));function bind(_x){return _bind.apply(this,arguments);}return bind;}()},{key:"isFontLoadingAPISupported",get:function get(){var _this$_document;var hasFonts=!!((_this$_document=this._document)!==null&&_this$_document!==void 0&&_this$_document.fonts);return(0,_util.shadow)(this,"isFontLoadingAPISupported",hasFonts);}},{key:"isSyncFontLoadingSupported",get:function get(){var supported=false;if(_is_node.isNodeJS){supported=true;}else if(typeof navigator!=="undefined"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent)){supported=true;}return(0,_util.shadow)(this,"isSyncFontLoadingSupported",supported);}},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(callback){function completeRequest(){(0,_util.assert)(!request.done,"completeRequest() cannot be called twice.");request.done=true;while(loadingRequests.length>0&&loadingRequests[0].done){var otherRequest=loadingRequests.shift();setTimeout(otherRequest.callback,0);}}var loadingRequests=this.loadingRequests;var request={done:false,complete:completeRequest,callback:callback};loadingRequests.push(request);return request;}},{key:"_loadTestFont",get:function get(){var testFont=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA"+"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA"+"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA"+"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1"+"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD"+"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM"+"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D"+"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA"+"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA"+"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB"+"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY"+"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA"+"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA"+"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC"+"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3"+"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj"+"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,_util.shadow)(this,"_loadTestFont",testFont);}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(font,request){function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|data.charCodeAt(offset+3)&0xff;}function spliceString(s,offset,remove,insert){var chunk1=s.substring(0,offset);var chunk2=s.substring(offset+remove);return chunk1+insert+chunk2;}var i,ii;var canvas=this._document.createElement("canvas");canvas.width=1;canvas.height=1;var options=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:true}:undefined;var ctx=canvas.getContext("2d",options);var called=0;function isFontReady(name,callback){if(++called>30){(0,_util.warn)("Load test font never loaded.");callback();return;}ctx.font="30px "+name;ctx.fillText(".",0,20);var imageData=ctx.getImageData(0,0,1,1);if(imageData.data[3]>0){callback();return;}setTimeout(isFontReady.bind(null,name,callback));}var loadTestFontId="lt".concat(Date.now()).concat(this.loadTestFontId++);var data=this._loadTestFont;var COMMENT_OFFSET=976;data=spliceString(data,COMMENT_OFFSET,loadTestFontId.length,loadTestFontId);var CFF_CHECKSUM_OFFSET=16;var XXXX_VALUE=0x58585858;var checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4){checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0;}if(i<loadTestFontId.length){checksum=checksum-XXXX_VALUE+int32(loadTestFontId+"XXX",i)|0;}data=spliceString(data,CFF_CHECKSUM_OFFSET,4,(0,_util.string32)(checksum));var url="url(data:font/opentype;base64,".concat(btoa(data),");");var rule="@font-face {font-family:\"".concat(loadTestFontId,"\";src:").concat(url,"}");this.insertRule(rule);var div=this._document.createElement("div");div.style.visibility="hidden";div.style.width=div.style.height="10px";div.style.position="absolute";div.style.top=div.style.left="0px";for(var _i=0,_arr=[font.loadedName,loadTestFontId];_i<_arr.length;_i++){var name=_arr[_i];var span=this._document.createElement("span");span.textContent="Hi";span.style.fontFamily=name;div.append(span);}this._document.body.append(div);isFontReady(loadTestFontId,function(){div.remove();request.complete();});}}]);return FontLoader;}();exports.FontLoader=FontLoader;var FontFaceObject=/*#__PURE__*/function(){function FontFaceObject(translatedData,_ref2){var _ref2$isEvalSupported=_ref2.isEvalSupported,isEvalSupported=_ref2$isEvalSupported===void 0?true:_ref2$isEvalSupported,_ref2$disableFontFace=_ref2.disableFontFace,disableFontFace=_ref2$disableFontFace===void 0?false:_ref2$disableFontFace,_ref2$ignoreErrors=_ref2.ignoreErrors,ignoreErrors=_ref2$ignoreErrors===void 0?false:_ref2$ignoreErrors,_ref2$inspectFont=_ref2.inspectFont,inspectFont=_ref2$inspectFont===void 0?null:_ref2$inspectFont;_classCallCheck(this,FontFaceObject);this.compiledGlyphs=Object.create(null);for(var i in translatedData){this[i]=translatedData[i];}this.isEvalSupported=isEvalSupported!==false;this.disableFontFace=disableFontFace===true;this.ignoreErrors=ignoreErrors===true;this._inspectFont=inspectFont;}_createClass(FontFaceObject,[{key:"createNativeFontFace",value:function createNativeFontFace(){var _this$_inspectFont;if(!this.data||this.disableFontFace){return null;}var nativeFontFace;if(!this.cssFontInfo){nativeFontFace=new FontFace(this.loadedName,this.data,{});}else{var css={weight:this.cssFontInfo.fontWeight};if(this.cssFontInfo.italicAngle){css.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg");}nativeFontFace=new FontFace(this.cssFontInfo.fontFamily,this.data,css);}(_this$_inspectFont=this._inspectFont)===null||_this$_inspectFont===void 0?void 0:_this$_inspectFont.call(this,this);return nativeFontFace;}},{key:"createFontFaceRule",value:function createFontFaceRule(){var _this$_inspectFont2;if(!this.data||this.disableFontFace){return null;}var data=(0,_util.bytesToString)(this.data);var url="url(data:".concat(this.mimetype,";base64,").concat(btoa(data),");");var rule;if(!this.cssFontInfo){rule="@font-face {font-family:\"".concat(this.loadedName,"\";src:").concat(url,"}");}else{var css="font-weight: ".concat(this.cssFontInfo.fontWeight,";");if(this.cssFontInfo.italicAngle){css+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;");}rule="@font-face {font-family:\"".concat(this.cssFontInfo.fontFamily,"\";").concat(css,"src:").concat(url,"}");}(_this$_inspectFont2=this._inspectFont)===null||_this$_inspectFont2===void 0?void 0:_this$_inspectFont2.call(this,this,url);return rule;}},{key:"getPathGenerator",value:function getPathGenerator(objs,character){if(this.compiledGlyphs[character]!==undefined){return this.compiledGlyphs[character];}var cmds;try{cmds=objs.get(this.loadedName+"_path_"+character);}catch(ex){if(!this.ignoreErrors){throw ex;}(0,_util.warn)("getPathGenerator - ignoring character: \"".concat(ex,"\"."));return this.compiledGlyphs[character]=function(c,size){};}if(this.isEvalSupported&&_util.FeatureTest.isEvalSupported){var jsBuf=[];var _iterator2=_createForOfIteratorHelper(cmds),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var current=_step2.value;var args=current.args!==undefined?current.args.join(","):"";jsBuf.push("c.",current.cmd,"(",args,");\n");}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return this.compiledGlyphs[character]=new Function("c","size",jsBuf.join(""));}return this.compiledGlyphs[character]=function(c,size){var _iterator3=_createForOfIteratorHelper(cmds),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _current=_step3.value;if(_current.cmd==="scale"){_current.args=[size,-size];}c[_current.cmd].apply(c,_current.args);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}};}}]);return FontFaceObject;}();exports.FontFaceObject=FontFaceObject;

/***/ }),
/* 145 */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.isNodeJS=void 0;function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}var isNodeJS=(typeof process==="undefined"?"undefined":_typeof(process))==="object"&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");exports.isNodeJS=isNodeJS;

/***/ }),
/* 146 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.CanvasGraphics=void 0;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(141);var _pattern_helper=__w_pdfjs_require__(147);var _image_utils=__w_pdfjs_require__(148);var _is_node=__w_pdfjs_require__(145);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var MIN_FONT_SIZE=16;var MAX_FONT_SIZE=100;var MAX_GROUP_SIZE=4096;var EXECUTION_TIME=15;var EXECUTION_STEPS=10;var MAX_SIZE_TO_COMPILE=1000;var FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(ctx,destCtx){if(ctx._removeMirroring){throw new Error("Context is already forwarding operations.");}ctx.__originalSave=ctx.save;ctx.__originalRestore=ctx.restore;ctx.__originalRotate=ctx.rotate;ctx.__originalScale=ctx.scale;ctx.__originalTranslate=ctx.translate;ctx.__originalTransform=ctx.transform;ctx.__originalSetTransform=ctx.setTransform;ctx.__originalResetTransform=ctx.resetTransform;ctx.__originalClip=ctx.clip;ctx.__originalMoveTo=ctx.moveTo;ctx.__originalLineTo=ctx.lineTo;ctx.__originalBezierCurveTo=ctx.bezierCurveTo;ctx.__originalRect=ctx.rect;ctx.__originalClosePath=ctx.closePath;ctx.__originalBeginPath=ctx.beginPath;ctx._removeMirroring=function(){ctx.save=ctx.__originalSave;ctx.restore=ctx.__originalRestore;ctx.rotate=ctx.__originalRotate;ctx.scale=ctx.__originalScale;ctx.translate=ctx.__originalTranslate;ctx.transform=ctx.__originalTransform;ctx.setTransform=ctx.__originalSetTransform;ctx.resetTransform=ctx.__originalResetTransform;ctx.clip=ctx.__originalClip;ctx.moveTo=ctx.__originalMoveTo;ctx.lineTo=ctx.__originalLineTo;ctx.bezierCurveTo=ctx.__originalBezierCurveTo;ctx.rect=ctx.__originalRect;ctx.closePath=ctx.__originalClosePath;ctx.beginPath=ctx.__originalBeginPath;delete ctx._removeMirroring;};ctx.save=function ctxSave(){destCtx.save();this.__originalSave();};ctx.restore=function ctxRestore(){destCtx.restore();this.__originalRestore();};ctx.translate=function ctxTranslate(x,y){destCtx.translate(x,y);this.__originalTranslate(x,y);};ctx.scale=function ctxScale(x,y){destCtx.scale(x,y);this.__originalScale(x,y);};ctx.transform=function ctxTransform(a,b,c,d,e,f){destCtx.transform(a,b,c,d,e,f);this.__originalTransform(a,b,c,d,e,f);};ctx.setTransform=function ctxSetTransform(a,b,c,d,e,f){destCtx.setTransform(a,b,c,d,e,f);this.__originalSetTransform(a,b,c,d,e,f);};ctx.resetTransform=function ctxResetTransform(){destCtx.resetTransform();this.__originalResetTransform();};ctx.rotate=function ctxRotate(angle){destCtx.rotate(angle);this.__originalRotate(angle);};ctx.clip=function ctxRotate(rule){destCtx.clip(rule);this.__originalClip(rule);};ctx.moveTo=function(x,y){destCtx.moveTo(x,y);this.__originalMoveTo(x,y);};ctx.lineTo=function(x,y){destCtx.lineTo(x,y);this.__originalLineTo(x,y);};ctx.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){destCtx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);this.__originalBezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);};ctx.rect=function(x,y,width,height){destCtx.rect(x,y,width,height);this.__originalRect(x,y,width,height);};ctx.closePath=function(){destCtx.closePath();this.__originalClosePath();};ctx.beginPath=function(){destCtx.beginPath();this.__originalBeginPath();};}var CachedCanvases=/*#__PURE__*/function(){function CachedCanvases(canvasFactory){_classCallCheck(this,CachedCanvases);this.canvasFactory=canvasFactory;this.cache=Object.create(null);}_createClass(CachedCanvases,[{key:"getCanvas",value:function getCanvas(id,width,height){var canvasEntry;if(this.cache[id]!==undefined){canvasEntry=this.cache[id];this.canvasFactory.reset(canvasEntry,width,height);}else{canvasEntry=this.canvasFactory.create(width,height);this.cache[id]=canvasEntry;}return canvasEntry;}},{key:"delete",value:function _delete(id){delete this.cache[id];}},{key:"clear",value:function clear(){for(var id in this.cache){var canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry);delete this.cache[id];}}}]);return CachedCanvases;}();function drawImageAtIntegerCoords(ctx,srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH){var _getCurrentTransform=(0,_display_utils.getCurrentTransform)(ctx),_getCurrentTransform2=_slicedToArray(_getCurrentTransform,6),a=_getCurrentTransform2[0],b=_getCurrentTransform2[1],c=_getCurrentTransform2[2],d=_getCurrentTransform2[3],tx=_getCurrentTransform2[4],ty=_getCurrentTransform2[5];if(b===0&&c===0){var tlX=destX*a+tx;var rTlX=Math.round(tlX);var tlY=destY*d+ty;var rTlY=Math.round(tlY);var brX=(destX+destW)*a+tx;var rWidth=Math.abs(Math.round(brX)-rTlX)||1;var brY=(destY+destH)*d+ty;var rHeight=Math.abs(Math.round(brY)-rTlY)||1;ctx.setTransform(Math.sign(a),0,0,Math.sign(d),rTlX,rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rWidth,rHeight);ctx.setTransform(a,b,c,d,tx,ty);return[rWidth,rHeight];}if(a===0&&d===0){var _tlX=destY*c+tx;var _rTlX=Math.round(_tlX);var _tlY=destX*b+ty;var _rTlY=Math.round(_tlY);var _brX=(destY+destH)*c+tx;var _rWidth=Math.abs(Math.round(_brX)-_rTlX)||1;var _brY=(destX+destW)*b+ty;var _rHeight=Math.abs(Math.round(_brY)-_rTlY)||1;ctx.setTransform(0,Math.sign(b),Math.sign(c),0,_rTlX,_rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,_rHeight,_rWidth);ctx.setTransform(a,b,c,d,tx,ty);return[_rHeight,_rWidth];}ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);var scaleX=Math.hypot(a,b);var scaleY=Math.hypot(c,d);return[scaleX*destW,scaleY*destH];}function compileType3Glyph(imgData){var width=imgData.width,height=imgData.height;if(width>MAX_SIZE_TO_COMPILE||height>MAX_SIZE_TO_COMPILE){return null;}var POINT_TO_PROCESS_LIMIT=1000;var POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]);var width1=width+1;var points=new Uint8Array(width1*(height+1));var i,j,j0;var lineSize=width+7&~7;var data=new Uint8Array(lineSize*height),pos=0;var _iterator=_createForOfIteratorHelper(imgData.data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var elem=_step.value;var mask=128;while(mask>0){data[pos++]=elem&mask?0:255;mask>>=1;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var count=0;pos=0;if(data[pos]!==0){points[0]=1;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j]=data[pos]?2:1;++count;}pos++;}if(data[pos]!==0){points[j]=2;++count;}for(i=1;i<height;i++){pos=i*lineSize;j0=i*width1;if(data[pos-lineSize]!==data[pos]){points[j0]=data[pos]?1:8;++count;}var sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++){sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0);if(POINT_TYPES[sum]){points[j0+j]=POINT_TYPES[sum];++count;}pos++;}if(data[pos-lineSize]!==data[pos]){points[j0+j]=data[pos]?2:4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}}pos=lineSize*(height-1);j0=i*width1;if(data[pos]!==0){points[j0]=8;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j0+j]=data[pos]?4:8;++count;}pos++;}if(data[pos]!==0){points[j0+j]=4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}var steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]);var path=new Path2D();for(i=0;count&&i<=height;i++){var p=i*width1;var end=p+width;while(p<end&&!points[p]){p++;}if(p===end){continue;}path.moveTo(p%width1,i);var p0=p;var type=points[p];do{var step=steps[type];do{p+=step;}while(!points[p]);var pp=points[p];if(pp!==5&&pp!==10){type=pp;points[p]=0;}else{type=pp&0x33*type>>4;points[p]&=type>>2|type<<2;}path.lineTo(p%width1,p/width1|0);if(!points[p]){--count;}}while(p0!==p);--i;}data=null;points=null;var drawOutline=function drawOutline(c){c.save();c.scale(1/width,-1/height);c.translate(0,-height);c.fill(path);c.beginPath();c.restore();};return drawOutline;}var CanvasExtraState=/*#__PURE__*/function(){function CanvasExtraState(width,height){_classCallCheck(this,CanvasExtraState);this.alphaIsShape=false;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=_util.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=_util.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=_util.TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=false;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps="none";this.startNewPathAndClipBox([0,0,width,height]);}_createClass(CanvasExtraState,[{key:"clone",value:function clone(){var clone=Object.create(this);clone.clipBox=this.clipBox.slice();return clone;}},{key:"setCurrentPoint",value:function setCurrentPoint(x,y){this.x=x;this.y=y;}},{key:"updatePathMinMax",value:function updatePathMinMax(transform,x,y){var _Util$applyTransform=_util.Util.applyTransform([x,y],transform);var _Util$applyTransform2=_slicedToArray(_Util$applyTransform,2);x=_Util$applyTransform2[0];y=_Util$applyTransform2[1];this.minX=Math.min(this.minX,x);this.minY=Math.min(this.minY,y);this.maxX=Math.max(this.maxX,x);this.maxY=Math.max(this.maxY,y);}},{key:"updateRectMinMax",value:function updateRectMinMax(transform,rect){var p1=_util.Util.applyTransform(rect,transform);var p2=_util.Util.applyTransform(rect.slice(2),transform);this.minX=Math.min(this.minX,p1[0],p2[0]);this.minY=Math.min(this.minY,p1[1],p2[1]);this.maxX=Math.max(this.maxX,p1[0],p2[0]);this.maxY=Math.max(this.maxY,p1[1],p2[1]);}},{key:"updateScalingPathMinMax",value:function updateScalingPathMinMax(transform,minMax){_util.Util.scaleMinMax(transform,minMax);this.minX=Math.min(this.minX,minMax[0]);this.maxX=Math.max(this.maxX,minMax[1]);this.minY=Math.min(this.minY,minMax[2]);this.maxY=Math.max(this.maxY,minMax[3]);}},{key:"updateCurvePathMinMax",value:function updateCurvePathMinMax(transform,x0,y0,x1,y1,x2,y2,x3,y3,minMax){var box=_util.Util.bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3);if(minMax){minMax[0]=Math.min(minMax[0],box[0],box[2]);minMax[1]=Math.max(minMax[1],box[0],box[2]);minMax[2]=Math.min(minMax[2],box[1],box[3]);minMax[3]=Math.max(minMax[3],box[1],box[3]);return;}this.updateRectMinMax(transform,box);}},{key:"getPathBoundingBox",value:function getPathBoundingBox(){var pathType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_pattern_helper.PathType.FILL;var transform=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var box=[this.minX,this.minY,this.maxX,this.maxY];if(pathType===_pattern_helper.PathType.STROKE){if(!transform){(0,_util.unreachable)("Stroke bounding box must include transform.");}var scale=_util.Util.singularValueDecompose2dScale(transform);var xStrokePad=scale[0]*this.lineWidth/2;var yStrokePad=scale[1]*this.lineWidth/2;box[0]-=xStrokePad;box[1]-=yStrokePad;box[2]+=xStrokePad;box[3]+=yStrokePad;}return box;}},{key:"updateClipFromPath",value:function updateClipFromPath(){var intersect=_util.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(intersect||[0,0,0,0]);}},{key:"isEmptyClip",value:function isEmptyClip(){return this.minX===Infinity;}},{key:"startNewPathAndClipBox",value:function startNewPathAndClipBox(box){this.clipBox=box;this.minX=Infinity;this.minY=Infinity;this.maxX=0;this.maxY=0;}},{key:"getClippedPathBoundingBox",value:function getClippedPathBoundingBox(){var pathType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_pattern_helper.PathType.FILL;var transform=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return _util.Util.intersect(this.clipBox,this.getPathBoundingBox(pathType,transform));}}]);return CanvasExtraState;}();function putBinaryImageData(ctx,imgData){if(typeof ImageData!=="undefined"&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return;}var height=imgData.height,width=imgData.width;var partialChunkHeight=height%FULL_CHUNK_HEIGHT;var fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;var totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;var chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);var srcPos=0,destPos;var src=imgData.data;var dest=chunkImgData.data;var i,j,thisChunkHeight,elemsInThisChunk;if(imgData.kind===_util.ImageKind.GRAYSCALE_1BPP){var srcLength=src.byteLength;var dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2);var dest32DataLength=dest32.length;var fullSrcDiff=width+7>>3;var white=0xffffffff;var black=_util.FeatureTest.isLittleEndian?0xff000000:0x000000ff;for(i=0;i<totalChunks;i++){thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;destPos=0;for(j=0;j<thisChunkHeight;j++){var srcDiff=srcLength-srcPos;var k=0;var kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7;var kEndUnrolled=kEnd&~7;var mask=0;var srcByte=0;for(;k<kEndUnrolled;k+=8){srcByte=src[srcPos++];dest32[destPos++]=srcByte&128?white:black;dest32[destPos++]=srcByte&64?white:black;dest32[destPos++]=srcByte&32?white:black;dest32[destPos++]=srcByte&16?white:black;dest32[destPos++]=srcByte&8?white:black;dest32[destPos++]=srcByte&4?white:black;dest32[destPos++]=srcByte&2?white:black;dest32[destPos++]=srcByte&1?white:black;}for(;k<kEnd;k++){if(mask===0){srcByte=src[srcPos++];mask=128;}dest32[destPos++]=srcByte&mask?white:black;mask>>=1;}}while(destPos<dest32DataLength){dest32[destPos++]=0;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else if(imgData.kind===_util.ImageKind.RGBA_32BPP){j=0;elemsInThisChunk=width*FULL_CHUNK_HEIGHT*4;for(i=0;i<fullChunks;i++){dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));srcPos+=elemsInThisChunk;ctx.putImageData(chunkImgData,0,j);j+=FULL_CHUNK_HEIGHT;}if(i<totalChunks){elemsInThisChunk=width*partialChunkHeight*4;dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));ctx.putImageData(chunkImgData,0,j);}}else if(imgData.kind===_util.ImageKind.RGB_24BPP){thisChunkHeight=FULL_CHUNK_HEIGHT;elemsInThisChunk=width*thisChunkHeight;for(i=0;i<totalChunks;i++){if(i>=fullChunks){thisChunkHeight=partialChunkHeight;elemsInThisChunk=width*thisChunkHeight;}destPos=0;for(j=elemsInThisChunk;j--;){dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=255;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else{throw new Error("bad image kind: ".concat(imgData.kind));}}function putBinaryImageMask(ctx,imgData){if(imgData.bitmap){ctx.drawImage(imgData.bitmap,0,0);return;}var height=imgData.height,width=imgData.width;var partialChunkHeight=height%FULL_CHUNK_HEIGHT;var fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;var totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;var chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);var srcPos=0;var src=imgData.data;var dest=chunkImgData.data;for(var i=0;i<totalChunks;i++){var thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;var _convertBlackAndWhite=(0,_image_utils.convertBlackAndWhiteToRGBA)({src:src,srcPos:srcPos,dest:dest,width:width,height:thisChunkHeight,nonBlackColor:0});srcPos=_convertBlackAndWhite.srcPos;ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}function copyCtxState(sourceCtx,destCtx){var properties=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(var _i2=0,_properties=properties;_i2<_properties.length;_i2++){var property=_properties[_i2];if(sourceCtx[property]!==undefined){destCtx[property]=sourceCtx[property];}}if(sourceCtx.setLineDash!==undefined){destCtx.setLineDash(sourceCtx.getLineDash());destCtx.lineDashOffset=sourceCtx.lineDashOffset;}}function resetCtxToDefault(ctx){ctx.strokeStyle=ctx.fillStyle="#000000";ctx.fillRule="nonzero";ctx.globalAlpha=1;ctx.lineWidth=1;ctx.lineCap="butt";ctx.lineJoin="miter";ctx.miterLimit=10;ctx.globalCompositeOperation="source-over";ctx.font="10px sans-serif";if(ctx.setLineDash!==undefined){ctx.setLineDash([]);ctx.lineDashOffset=0;}if(!_is_node.isNodeJS){ctx.filter="none";}}function composeSMaskBackdrop(bytes,r0,g0,b0){var length=bytes.length;for(var i=3;i<length;i+=4){var alpha=bytes[i];if(alpha===0){bytes[i-3]=r0;bytes[i-2]=g0;bytes[i-1]=b0;}else if(alpha<255){var alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8;bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8;bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8;}}}function composeSMaskAlpha(maskData,layerData,transferMap){var length=maskData.length;var scale=1/255;for(var i=3;i<length;i+=4){var alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*scale|0;}}function composeSMaskLuminosity(maskData,layerData,transferMap){var length=maskData.length;for(var i=3;i<length;i+=4){var y=maskData[i-3]*77+maskData[i-2]*152+maskData[i-1]*28;layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16;}}function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap,layerOffsetX,layerOffsetY,maskOffsetX,maskOffsetY){var hasBackdrop=!!backdrop;var r0=hasBackdrop?backdrop[0]:0;var g0=hasBackdrop?backdrop[1]:0;var b0=hasBackdrop?backdrop[2]:0;var composeFn;if(subtype==="Luminosity"){composeFn=composeSMaskLuminosity;}else{composeFn=composeSMaskAlpha;}var PIXELS_TO_PROCESS=1048576;var chunkSize=Math.min(height,Math.ceil(PIXELS_TO_PROCESS/width));for(var row=0;row<height;row+=chunkSize){var chunkHeight=Math.min(chunkSize,height-row);var maskData=maskCtx.getImageData(layerOffsetX-maskOffsetX,row+(layerOffsetY-maskOffsetY),width,chunkHeight);var layerData=layerCtx.getImageData(layerOffsetX,row+layerOffsetY,width,chunkHeight);if(hasBackdrop){composeSMaskBackdrop(maskData.data,r0,g0,b0);}composeFn(maskData.data,layerData.data,transferMap);layerCtx.putImageData(layerData,layerOffsetX,row+layerOffsetY);}}function composeSMask(ctx,smask,layerCtx,layerBox){var layerOffsetX=layerBox[0];var layerOffsetY=layerBox[1];var layerWidth=layerBox[2]-layerOffsetX;var layerHeight=layerBox[3]-layerOffsetY;if(layerWidth===0||layerHeight===0){return;}genericComposeSMask(smask.context,layerCtx,layerWidth,layerHeight,smask.subtype,smask.backdrop,smask.transferMap,layerOffsetX,layerOffsetY,smask.offsetX,smask.offsetY);ctx.save();ctx.globalAlpha=1;ctx.globalCompositeOperation="source-over";ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(layerCtx.canvas,0,0);ctx.restore();}function getImageSmoothingEnabled(transform,interpolate){var scale=_util.Util.singularValueDecompose2dScale(transform);scale[0]=Math.fround(scale[0]);scale[1]=Math.fround(scale[1]);var actualScale=Math.fround((globalThis.devicePixelRatio||1)*_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);if(interpolate!==undefined){return interpolate;}else if(scale[0]<=actualScale||scale[1]<=actualScale){return true;}return false;}var LINE_CAP_STYLES=["butt","round","square"];var LINE_JOIN_STYLES=["miter","round","bevel"];var NORMAL_CLIP={};var EO_CLIP={};var _restoreInitialState=/*#__PURE__*/new WeakSet();var CanvasGraphics=/*#__PURE__*/function(){function CanvasGraphics(canvasCtx,commonObjs,objs,canvasFactory,filterFactory,_ref,annotationCanvasMap){var optionalContentConfig=_ref.optionalContentConfig,_ref$markedContentSta=_ref.markedContentStack,markedContentStack=_ref$markedContentSta===void 0?null:_ref$markedContentSta;_classCallCheck(this,CanvasGraphics);_classPrivateMethodInitSpec(this,_restoreInitialState);this.ctx=canvasCtx;this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=false;this.res=null;this.xobjs=null;this.commonObjs=commonObjs;this.objs=objs;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=true;this.markedContentStack=markedContentStack||[];this.optionalContentConfig=optionalContentConfig;this.cachedCanvases=new CachedCanvases(this.canvasFactory);this.cachedPatterns=new Map();this.annotationCanvasMap=annotationCanvasMap;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map();}_createClass(CanvasGraphics,[{key:"getObject",value:function getObject(data){var fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(typeof data==="string"){return data.startsWith("g_")?this.commonObjs.get(data):this.objs.get(data);}return fallback;}},{key:"beginDrawing",value:function beginDrawing(_ref2){var _this$ctx3;var transform=_ref2.transform,viewport=_ref2.viewport,_ref2$transparency=_ref2.transparency,transparency=_ref2$transparency===void 0?false:_ref2$transparency,_ref2$background=_ref2.background,background=_ref2$background===void 0?null:_ref2$background;var width=this.ctx.canvas.width;var height=this.ctx.canvas.height;var savedFillStyle=this.ctx.fillStyle;this.ctx.fillStyle=background||"#ffffff";this.ctx.fillRect(0,0,width,height);this.ctx.fillStyle=savedFillStyle;if(transparency){var _this$ctx;var transparentCanvas=this.cachedCanvases.getCanvas("transparent",width,height);this.compositeCtx=this.ctx;this.transparentCanvas=transparentCanvas.canvas;this.ctx=transparentCanvas.context;this.ctx.save();(_this$ctx=this.ctx).transform.apply(_this$ctx,_toConsumableArray((0,_display_utils.getCurrentTransform)(this.compositeCtx)));}this.ctx.save();resetCtxToDefault(this.ctx);if(transform){var _this$ctx2;(_this$ctx2=this.ctx).transform.apply(_this$ctx2,_toConsumableArray(transform));this.outputScaleX=transform[0];this.outputScaleY=transform[0];}(_this$ctx3=this.ctx).transform.apply(_this$ctx3,_toConsumableArray(viewport.transform));this.viewportScale=viewport.scale;this.baseTransform=(0,_display_utils.getCurrentTransform)(this.ctx);}},{key:"executeOperatorList",value:function executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){var argsArray=operatorList.argsArray;var fnArray=operatorList.fnArray;var i=executionStartIdx||0;var argsArrayLen=argsArray.length;if(argsArrayLen===i){return i;}var chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback==="function";var endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;var steps=0;var commonObjs=this.commonObjs;var objs=this.objs;var fnId;while(true){if(stepper!==undefined&&i===stepper.nextBreakPoint){stepper.breakIt(i,continueCallback);return i;}fnId=fnArray[i];if(fnId!==_util.OPS.dependency){this[fnId].apply(this,argsArray[i]);}else{var _iterator2=_createForOfIteratorHelper(argsArray[i]),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var depObjId=_step2.value;var objsPool=depObjId.startsWith("g_")?commonObjs:objs;if(!objsPool.has(depObjId)){objsPool.get(depObjId,continueCallback);return i;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}i++;if(i===argsArrayLen){return i;}if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime){continueCallback();return i;}steps=0;}}}},{key:"endDrawing",value:function endDrawing(){var pageColors=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_classPrivateMethodGet(this,_restoreInitialState,_restoreInitialState2).call(this);this.cachedCanvases.clear();this.cachedPatterns.clear();var _iterator3=_createForOfIteratorHelper(this._cachedBitmapsMap.values()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var cache=_step3.value;var _iterator4=_createForOfIteratorHelper(cache.values()),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var canvas=_step4.value;if(typeof HTMLCanvasElement!=="undefined"&&canvas instanceof HTMLCanvasElement){canvas.width=canvas.height=0;}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}cache.clear();}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}this._cachedBitmapsMap.clear();if(pageColors){var hcmFilterId=this.filterFactory.addHCMFilter(pageColors.foreground,pageColors.background);if(hcmFilterId!=="none"){var savedFilter=this.ctx.filter;this.ctx.filter=hcmFilterId;this.ctx.drawImage(this.ctx.canvas,0,0);this.ctx.filter=savedFilter;}}}},{key:"_scaleImage",value:function _scaleImage(img,inverseTransform){var width=img.width;var height=img.height;var widthScale=Math.max(Math.hypot(inverseTransform[0],inverseTransform[1]),1);var heightScale=Math.max(Math.hypot(inverseTransform[2],inverseTransform[3]),1);var paintWidth=width,paintHeight=height;var tmpCanvasId="prescale1";var tmpCanvas,tmpCtx;while(widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1){var newWidth=paintWidth,newHeight=paintHeight;if(widthScale>2&&paintWidth>1){newWidth=paintWidth>=16384?Math.floor(paintWidth/2)-1||1:Math.ceil(paintWidth/2);widthScale/=paintWidth/newWidth;}if(heightScale>2&&paintHeight>1){newHeight=paintHeight>=16384?Math.floor(paintHeight/2)-1||1:Math.ceil(paintHeight)/2;heightScale/=paintHeight/newHeight;}tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight);tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,newWidth,newHeight);tmpCtx.drawImage(img,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight);img=tmpCanvas.canvas;paintWidth=newWidth;paintHeight=newHeight;tmpCanvasId=tmpCanvasId==="prescale1"?"prescale2":"prescale1";}return{img:img,paintWidth:paintWidth,paintHeight:paintHeight};}},{key:"_createMaskCanvas",value:function _createMaskCanvas(img){var ctx=this.ctx;var width=img.width,height=img.height;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var currentTransform=(0,_display_utils.getCurrentTransform)(ctx);var cache,cacheKey,scaled,maskCanvas;if((img.bitmap||img.data)&&img.count>1){var mainKey=img.bitmap||img.data.buffer;cacheKey=JSON.stringify(isPatternFill?currentTransform:[currentTransform.slice(0,4),fillColor]);cache=this._cachedBitmapsMap.get(mainKey);if(!cache){cache=new Map();this._cachedBitmapsMap.set(mainKey,cache);}var cachedImage=cache.get(cacheKey);if(cachedImage&&!isPatternFill){var _offsetX=Math.round(Math.min(currentTransform[0],currentTransform[2])+currentTransform[4]);var _offsetY=Math.round(Math.min(currentTransform[1],currentTransform[3])+currentTransform[5]);return{canvas:cachedImage,offsetX:_offsetX,offsetY:_offsetY};}scaled=cachedImage;}if(!scaled){maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height);putBinaryImageMask(maskCanvas.context,img);}var maskToCanvas=_util.Util.transform(currentTransform,[1/width,0,0,-1/height,0,0]);maskToCanvas=_util.Util.transform(maskToCanvas,[1,0,0,1,0,-height]);var cord1=_util.Util.applyTransform([0,0],maskToCanvas);var cord2=_util.Util.applyTransform([width,height],maskToCanvas);var rect=_util.Util.normalizeRect([cord1[0],cord1[1],cord2[0],cord2[1]]);var drawnWidth=Math.round(rect[2]-rect[0])||1;var drawnHeight=Math.round(rect[3]-rect[1])||1;var fillCanvas=this.cachedCanvases.getCanvas("fillCanvas",drawnWidth,drawnHeight);var fillCtx=fillCanvas.context;var offsetX=Math.min(cord1[0],cord2[0]);var offsetY=Math.min(cord1[1],cord2[1]);fillCtx.translate(-offsetX,-offsetY);fillCtx.transform.apply(fillCtx,_toConsumableArray(maskToCanvas));if(!scaled){scaled=this._scaleImage(maskCanvas.canvas,(0,_display_utils.getCurrentTransformInverse)(fillCtx));scaled=scaled.img;if(cache&&isPatternFill){cache.set(cacheKey,scaled);}}fillCtx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils.getCurrentTransform)(fillCtx),img.interpolate);drawImageAtIntegerCoords(fillCtx,scaled,0,0,scaled.width,scaled.height,0,0,width,height);fillCtx.globalCompositeOperation="source-in";var inverse=_util.Util.transform((0,_display_utils.getCurrentTransformInverse)(fillCtx),[1,0,0,1,-offsetX,-offsetY]);fillCtx.fillStyle=isPatternFill?fillColor.getPattern(ctx,this,inverse,_pattern_helper.PathType.FILL):fillColor;fillCtx.fillRect(0,0,width,height);if(cache&&!isPatternFill){this.cachedCanvases.delete("fillCanvas");cache.set(cacheKey,fillCanvas.canvas);}return{canvas:fillCanvas.canvas,offsetX:Math.round(offsetX),offsetY:Math.round(offsetY)};}},{key:"setLineWidth",value:function setLineWidth(width){if(width!==this.current.lineWidth){this._cachedScaleForStroking=null;}this.current.lineWidth=width;this.ctx.lineWidth=width;}},{key:"setLineCap",value:function setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style];}},{key:"setLineJoin",value:function setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style];}},{key:"setMiterLimit",value:function setMiterLimit(limit){this.ctx.miterLimit=limit;}},{key:"setDash",value:function setDash(dashArray,dashPhase){var ctx=this.ctx;if(ctx.setLineDash!==undefined){ctx.setLineDash(dashArray);ctx.lineDashOffset=dashPhase;}}},{key:"setRenderingIntent",value:function setRenderingIntent(intent){}},{key:"setFlatness",value:function setFlatness(flatness){}},{key:"setGState",value:function setGState(states){var _iterator5=_createForOfIteratorHelper(states),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _step5$value=_slicedToArray(_step5.value,2),key=_step5$value[0],value=_step5$value[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value[0],value[1]);break;case"CA":this.current.strokeAlpha=value;break;case"ca":this.current.fillAlpha=value;this.ctx.globalAlpha=value;break;case"BM":this.ctx.globalCompositeOperation=value;break;case"SMask":this.current.activeSMask=value?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(value);break;}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}},{key:"inSMaskMode",get:function get(){return!!this.suspendedCtx;}},{key:"checkSMaskState",value:function checkSMaskState(){var inSMaskMode=this.inSMaskMode;if(this.current.activeSMask&&!inSMaskMode){this.beginSMaskMode();}else if(!this.current.activeSMask&&inSMaskMode){this.endSMaskMode();}}},{key:"beginSMaskMode",value:function beginSMaskMode(){if(this.inSMaskMode){throw new Error("beginSMaskMode called while already in smask mode");}var drawnWidth=this.ctx.canvas.width;var drawnHeight=this.ctx.canvas.height;var cacheId="smaskGroupAt"+this.groupLevel;var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);this.suspendedCtx=this.ctx;this.ctx=scratchCanvas.context;var ctx=this.ctx;ctx.setTransform.apply(ctx,_toConsumableArray((0,_display_utils.getCurrentTransform)(this.suspendedCtx)));copyCtxState(this.suspendedCtx,ctx);mirrorContextOperations(ctx,this.suspendedCtx);this.setGState([["BM","source-over"],["ca",1],["CA",1]]);}},{key:"endSMaskMode",value:function endSMaskMode(){if(!this.inSMaskMode){throw new Error("endSMaskMode called while not in smask mode");}this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null;}},{key:"compose",value:function compose(dirtyBox){if(!this.current.activeSMask){return;}if(!dirtyBox){dirtyBox=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];}else{dirtyBox[0]=Math.floor(dirtyBox[0]);dirtyBox[1]=Math.floor(dirtyBox[1]);dirtyBox[2]=Math.ceil(dirtyBox[2]);dirtyBox[3]=Math.ceil(dirtyBox[3]);}var smask=this.current.activeSMask;var suspendedCtx=this.suspendedCtx;composeSMask(suspendedCtx,smask,this.ctx,dirtyBox);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore();}},{key:"save",value:function save(){if(this.inSMaskMode){copyCtxState(this.ctx,this.suspendedCtx);this.suspendedCtx.save();}else{this.ctx.save();}var old=this.current;this.stateStack.push(old);this.current=old.clone();}},{key:"restore",value:function restore(){if(this.stateStack.length===0&&this.inSMaskMode){this.endSMaskMode();}if(this.stateStack.length!==0){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();copyCtxState(this.suspendedCtx,this.ctx);}else{this.ctx.restore();}this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;}}},{key:"transform",value:function transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f);this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;}},{key:"constructPath",value:function constructPath(ops,args,minMax){var ctx=this.ctx;var current=this.current;var x=current.x,y=current.y;var startX,startY;var currentTransform=(0,_display_utils.getCurrentTransform)(ctx);var isScalingMatrix=currentTransform[0]===0&&currentTransform[3]===0||currentTransform[1]===0&&currentTransform[2]===0;var minMaxForBezier=isScalingMatrix?minMax.slice(0):null;for(var i=0,j=0,ii=ops.length;i<ii;i++){switch(ops[i]|0){case _util.OPS.rectangle:x=args[j++];y=args[j++];var width=args[j++];var height=args[j++];var xw=x+width;var yh=y+height;ctx.moveTo(x,y);if(width===0||height===0){ctx.lineTo(xw,yh);}else{ctx.lineTo(xw,y);ctx.lineTo(xw,yh);ctx.lineTo(x,yh);}if(!isScalingMatrix){current.updateRectMinMax(currentTransform,[x,y,xw,yh]);}ctx.closePath();break;case _util.OPS.moveTo:x=args[j++];y=args[j++];ctx.moveTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case _util.OPS.lineTo:x=args[j++];y=args[j++];ctx.lineTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case _util.OPS.curveTo:startX=x;startY=y;x=args[j+4];y=args[j+5];ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],args[j+2],args[j+3],x,y,minMaxForBezier);j+=6;break;case _util.OPS.curveTo2:startX=x;startY=y;ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]);current.updateCurvePathMinMax(currentTransform,startX,startY,x,y,args[j],args[j+1],args[j+2],args[j+3],minMaxForBezier);x=args[j+2];y=args[j+3];j+=4;break;case _util.OPS.curveTo3:startX=x;startY=y;x=args[j+2];y=args[j+3];ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],x,y,x,y,minMaxForBezier);j+=4;break;case _util.OPS.closePath:ctx.closePath();break;}}if(isScalingMatrix){current.updateScalingPathMinMax(currentTransform,minMaxForBezier);}current.setCurrentPoint(x,y);}},{key:"closePath",value:function closePath(){this.ctx.closePath();}},{key:"stroke",value:function stroke(){var consumePath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var ctx=this.ctx;var strokeColor=this.current.strokeColor;ctx.globalAlpha=this.current.strokeAlpha;if(this.contentVisible){if(_typeof(strokeColor)==="object"&&strokeColor!==null&&strokeColor!==void 0&&strokeColor.getPattern){ctx.save();ctx.strokeStyle=strokeColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.STROKE);this.rescaleAndStroke(false);ctx.restore();}else{this.rescaleAndStroke(true);}}if(consumePath){this.consumePath(this.current.getClippedPathBoundingBox());}ctx.globalAlpha=this.current.fillAlpha;}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke();}},{key:"fill",value:function fill(){var consumePath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var ctx=this.ctx;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var needRestore=false;if(isPatternFill){ctx.save();ctx.fillStyle=fillColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL);needRestore=true;}var intersect=this.current.getClippedPathBoundingBox();if(this.contentVisible&&intersect!==null){if(this.pendingEOFill){ctx.fill("evenodd");this.pendingEOFill=false;}else{ctx.fill();}}if(needRestore){ctx.restore();}if(consumePath){this.consumePath(intersect);}}},{key:"eoFill",value:function eoFill(){this.pendingEOFill=true;this.fill();}},{key:"fillStroke",value:function fillStroke(){this.fill(false);this.stroke(false);this.consumePath();}},{key:"eoFillStroke",value:function eoFillStroke(){this.pendingEOFill=true;this.fillStroke();}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke();}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.pendingEOFill=true;this.closePath();this.fillStroke();}},{key:"endPath",value:function endPath(){this.consumePath();}},{key:"clip",value:function clip(){this.pendingClip=NORMAL_CLIP;}},{key:"eoClip",value:function eoClip(){this.pendingClip=EO_CLIP;}},{key:"beginText",value:function beginText(){this.current.textMatrix=_util.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}},{key:"endText",value:function endText(){var paths=this.pendingTextPaths;var ctx=this.ctx;if(paths===undefined){ctx.beginPath();return;}ctx.save();ctx.beginPath();var _iterator6=_createForOfIteratorHelper(paths),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var path=_step6.value;ctx.setTransform.apply(ctx,_toConsumableArray(path.transform));ctx.translate(path.x,path.y);path.addToPath(ctx,path.fontSize);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}ctx.restore();ctx.clip();ctx.beginPath();delete this.pendingTextPaths;}},{key:"setCharSpacing",value:function setCharSpacing(spacing){this.current.charSpacing=spacing;}},{key:"setWordSpacing",value:function setWordSpacing(spacing){this.current.wordSpacing=spacing;}},{key:"setHScale",value:function setHScale(scale){this.current.textHScale=scale/100;}},{key:"setLeading",value:function setLeading(leading){this.current.leading=-leading;}},{key:"setFont",value:function setFont(fontRefName,size){var fontObj=this.commonObjs.get(fontRefName);var current=this.current;if(!fontObj){throw new Error("Can't find font for ".concat(fontRefName));}current.fontMatrix=fontObj.fontMatrix||_util.FONT_IDENTITY_MATRIX;if(current.fontMatrix[0]===0||current.fontMatrix[3]===0){(0,_util.warn)("Invalid font matrix for font "+fontRefName);}if(size<0){size=-size;current.fontDirection=-1;}else{current.fontDirection=1;}this.current.font=fontObj;this.current.fontSize=size;if(fontObj.isType3Font){return;}var name=fontObj.loadedName||"sans-serif";var bold="normal";if(fontObj.black){bold="900";}else if(fontObj.bold){bold="bold";}var italic=fontObj.italic?"italic":"normal";var typeface="\"".concat(name,"\", ").concat(fontObj.fallbackName);var browserFontSize=size;if(size<MIN_FONT_SIZE){browserFontSize=MIN_FONT_SIZE;}else if(size>MAX_FONT_SIZE){browserFontSize=MAX_FONT_SIZE;}this.current.fontSizeScale=size/browserFontSize;this.ctx.font="".concat(italic," ").concat(bold," ").concat(browserFontSize,"px ").concat(typeface);}},{key:"setTextRenderingMode",value:function setTextRenderingMode(mode){this.current.textRenderingMode=mode;}},{key:"setTextRise",value:function setTextRise(rise){this.current.textRise=rise;}},{key:"moveText",value:function moveText(x,y){this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y;}},{key:"setLeadingMoveText",value:function setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y);}},{key:"setTextMatrix",value:function setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.hypot(a,b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading);}},{key:"paintChar",value:function paintChar(character,x,y,patternTransform){var ctx=this.ctx;var current=this.current;var font=current.font;var textRenderingMode=current.textRenderingMode;var fontSize=current.fontSize/current.fontSizeScale;var fillStrokeMode=textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;var isAddToPathSet=!!(textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG);var patternFill=current.patternFill&&!font.missingFile;var addToPath;if(font.disableFontFace||isAddToPathSet||patternFill){addToPath=font.getPathGenerator(this.commonObjs,character);}if(font.disableFontFace||patternFill){ctx.save();ctx.translate(x,y);ctx.beginPath();addToPath(ctx,fontSize);if(patternTransform){ctx.setTransform.apply(ctx,_toConsumableArray(patternTransform));}if(fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){ctx.fill();}if(fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){ctx.stroke();}ctx.restore();}else{if(fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){ctx.fillText(character,x,y);}if(fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){ctx.strokeText(character,x,y);}}if(isAddToPathSet){var paths=this.pendingTextPaths||(this.pendingTextPaths=[]);paths.push({transform:(0,_display_utils.getCurrentTransform)(ctx),x:x,y:y,fontSize:fontSize,addToPath:addToPath});}}},{key:"isFontSubpixelAAEnabled",get:function get(){var _this$cachedCanvases$=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10),ctx=_this$cachedCanvases$.context;ctx.scale(1.5,1);ctx.fillText("I",0,10);var data=ctx.getImageData(0,0,10,10).data;var enabled=false;for(var i=3;i<data.length;i+=4){if(data[i]>0&&data[i]<255){enabled=true;break;}}return(0,_util.shadow)(this,"isFontSubpixelAAEnabled",enabled);}},{key:"showText",value:function showText(glyphs){var current=this.current;var font=current.font;if(font.isType3Font){return this.showType3Text(glyphs);}var fontSize=current.fontSize;if(fontSize===0){return undefined;}var ctx=this.ctx;var fontSizeScale=current.fontSizeScale;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var fontDirection=current.fontDirection;var textHScale=current.textHScale*fontDirection;var glyphsLength=glyphs.length;var vertical=font.vertical;var spacingDir=vertical?1:-1;var defaultVMetrics=font.defaultVMetrics;var widthAdvanceScale=fontSize*current.fontMatrix[0];var simpleFillText=current.textRenderingMode===_util.TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;ctx.save();ctx.transform.apply(ctx,_toConsumableArray(current.textMatrix));ctx.translate(current.x,current.y+current.textRise);if(fontDirection>0){ctx.scale(textHScale,-1);}else{ctx.scale(textHScale,1);}var patternTransform;if(current.patternFill){ctx.save();var pattern=current.fillColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL);patternTransform=(0,_display_utils.getCurrentTransform)(ctx);ctx.restore();ctx.fillStyle=pattern;}var lineWidth=current.lineWidth;var scale=current.textMatrixScale;if(scale===0||lineWidth===0){var fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){lineWidth=this.getSinglePixelWidth();}}else{lineWidth/=scale;}if(fontSizeScale!==1.0){ctx.scale(fontSizeScale,fontSizeScale);lineWidth/=fontSizeScale;}ctx.lineWidth=lineWidth;if(font.isInvalidPDFjsFont){var chars=[];var width=0;var _iterator7=_createForOfIteratorHelper(glyphs),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var glyph=_step7.value;chars.push(glyph.unicode);width+=glyph.width;}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}ctx.fillText(chars.join(""),0,0);current.x+=width*widthAdvanceScale*textHScale;ctx.restore();this.compose();return undefined;}var x=0,i;for(i=0;i<glyphsLength;++i){var _glyph=glyphs[i];if(typeof _glyph==="number"){x+=spacingDir*_glyph*fontSize/1000;continue;}var restoreNeeded=false;var spacing=(_glyph.isSpace?wordSpacing:0)+charSpacing;var character=_glyph.fontChar;var accent=_glyph.accent;var scaledX=void 0,scaledY=void 0;var _width=_glyph.width;if(vertical){var vmetric=_glyph.vmetric||defaultVMetrics;var vx=-(_glyph.vmetric?vmetric[1]:_width*0.5)*widthAdvanceScale;var vy=vmetric[2]*widthAdvanceScale;_width=vmetric?-vmetric[0]:_width;scaledX=vx/fontSizeScale;scaledY=(x+vy)/fontSizeScale;}else{scaledX=x/fontSizeScale;scaledY=0;}if(font.remeasure&&_width>0){var measuredWidth=ctx.measureText(character).width*1000/fontSize*fontSizeScale;if(_width<measuredWidth&&this.isFontSubpixelAAEnabled){var characterScaleX=_width/measuredWidth;restoreNeeded=true;ctx.save();ctx.scale(characterScaleX,1);scaledX/=characterScaleX;}else if(_width!==measuredWidth){scaledX+=(_width-measuredWidth)/2000*fontSize/fontSizeScale;}}if(this.contentVisible&&(_glyph.isInFont||font.missingFile)){if(simpleFillText&&!accent){ctx.fillText(character,scaledX,scaledY);}else{this.paintChar(character,scaledX,scaledY,patternTransform);if(accent){var scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale;var scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform);}}}var charWidth=void 0;if(vertical){charWidth=_width*widthAdvanceScale-spacing*fontDirection;}else{charWidth=_width*widthAdvanceScale+spacing*fontDirection;}x+=charWidth;if(restoreNeeded){ctx.restore();}}if(vertical){current.y-=x;}else{current.x+=x*textHScale;}ctx.restore();this.compose();return undefined;}},{key:"showType3Text",value:function showType3Text(glyphs){var ctx=this.ctx;var current=this.current;var font=current.font;var fontSize=current.fontSize;var fontDirection=current.fontDirection;var spacingDir=font.vertical?1:-1;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var textHScale=current.textHScale*fontDirection;var fontMatrix=current.fontMatrix||_util.FONT_IDENTITY_MATRIX;var glyphsLength=glyphs.length;var isTextInvisible=current.textRenderingMode===_util.TextRenderingMode.INVISIBLE;var i,glyph,width,spacingLength;if(isTextInvisible||fontSize===0){return;}this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;ctx.save();ctx.transform.apply(ctx,_toConsumableArray(current.textMatrix));ctx.translate(current.x,current.y);ctx.scale(textHScale,fontDirection);for(i=0;i<glyphsLength;++i){glyph=glyphs[i];if(typeof glyph==="number"){spacingLength=spacingDir*glyph*fontSize/1000;this.ctx.translate(spacingLength,0);current.x+=spacingLength*textHScale;continue;}var spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;var operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){(0,_util.warn)("Type3 character \"".concat(glyph.operatorListId,"\" is not available."));continue;}if(this.contentVisible){this.processingType3=glyph;this.save();ctx.scale(fontSize,fontSize);ctx.transform.apply(ctx,_toConsumableArray(fontMatrix));this.executeOperatorList(operatorList);this.restore();}var transformed=_util.Util.applyTransform([glyph.width,0],fontMatrix);width=transformed[0]*fontSize+spacing;ctx.translate(width,0);current.x+=width*textHScale;}ctx.restore();this.processingType3=null;}},{key:"setCharWidth",value:function setCharWidth(xWidth,yWidth){}},{key:"setCharWidthAndBounds",value:function setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly);this.ctx.clip();this.endPath();}},{key:"getColorN_Pattern",value:function getColorN_Pattern(IR){var _this=this;var pattern;if(IR[0]==="TilingPattern"){var color=IR[1];var baseTransform=this.baseTransform||(0,_display_utils.getCurrentTransform)(this.ctx);var canvasGraphicsFactory={createCanvasGraphics:function createCanvasGraphics(ctx){return new CanvasGraphics(ctx,_this.commonObjs,_this.objs,_this.canvasFactory,_this.filterFactory,{optionalContentConfig:_this.optionalContentConfig,markedContentStack:_this.markedContentStack});}};pattern=new _pattern_helper.TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform);}else{pattern=this._getPattern(IR[1],IR[2]);}return pattern;}},{key:"setStrokeColorN",value:function setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments);}},{key:"setFillColorN",value:function setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=true;}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(r,g,b){var color=_util.Util.makeHexColor(r,g,b);this.ctx.strokeStyle=color;this.current.strokeColor=color;}},{key:"setFillRGBColor",value:function setFillRGBColor(r,g,b){var color=_util.Util.makeHexColor(r,g,b);this.ctx.fillStyle=color;this.current.fillColor=color;this.current.patternFill=false;}},{key:"_getPattern",value:function _getPattern(objId){var matrix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var pattern;if(this.cachedPatterns.has(objId)){pattern=this.cachedPatterns.get(objId);}else{pattern=(0,_pattern_helper.getShadingPattern)(this.getObject(objId));this.cachedPatterns.set(objId,pattern);}if(matrix){pattern.matrix=matrix;}return pattern;}},{key:"shadingFill",value:function shadingFill(objId){if(!this.contentVisible){return;}var ctx=this.ctx;this.save();var pattern=this._getPattern(objId);ctx.fillStyle=pattern.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.SHADING);var inv=(0,_display_utils.getCurrentTransformInverse)(ctx);if(inv){var canvas=ctx.canvas;var width=canvas.width;var height=canvas.height;var bl=_util.Util.applyTransform([0,0],inv);var br=_util.Util.applyTransform([0,height],inv);var ul=_util.Util.applyTransform([width,0],inv);var ur=_util.Util.applyTransform([width,height],inv);var x0=Math.min(bl[0],br[0],ul[0],ur[0]);var y0=Math.min(bl[1],br[1],ul[1],ur[1]);var x1=Math.max(bl[0],br[0],ul[0],ur[0]);var y1=Math.max(bl[1],br[1],ul[1],ur[1]);this.ctx.fillRect(x0,y0,x1-x0,y1-y0);}else{this.ctx.fillRect(-1e10,-1e10,2e10,2e10);}this.compose(this.current.getClippedPathBoundingBox());this.restore();}},{key:"beginInlineImage",value:function beginInlineImage(){(0,_util.unreachable)("Should not call beginInlineImage");}},{key:"beginImageData",value:function beginImageData(){(0,_util.unreachable)("Should not call beginImageData");}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(matrix,bbox){if(!this.contentVisible){return;}this.save();this.baseTransformStack.push(this.baseTransform);if(Array.isArray(matrix)&&matrix.length===6){this.transform.apply(this,_toConsumableArray(matrix));}this.baseTransform=(0,_display_utils.getCurrentTransform)(this.ctx);if(bbox){var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height);this.current.updateRectMinMax((0,_display_utils.getCurrentTransform)(this.ctx),bbox);this.clip();this.endPath();}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){if(!this.contentVisible){return;}this.restore();this.baseTransform=this.baseTransformStack.pop();}},{key:"beginGroup",value:function beginGroup(group){if(!this.contentVisible){return;}this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null;}var currentCtx=this.ctx;if(!group.isolated){(0,_util.info)("TODO: Support non-isolated groups.");}if(group.knockout){(0,_util.warn)("Knockout groups not supported.");}var currentTransform=(0,_display_utils.getCurrentTransform)(currentCtx);if(group.matrix){currentCtx.transform.apply(currentCtx,_toConsumableArray(group.matrix));}if(!group.bbox){throw new Error("Bounding box is required.");}var bounds=_util.Util.getAxialAlignedBoundingBox(group.bbox,(0,_display_utils.getCurrentTransform)(currentCtx));var canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=_util.Util.intersect(bounds,canvasBounds)||[0,0,0,0];var offsetX=Math.floor(bounds[0]);var offsetY=Math.floor(bounds[1]);var drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1);var drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1);var scaleX=1,scaleY=1;if(drawnWidth>MAX_GROUP_SIZE){scaleX=drawnWidth/MAX_GROUP_SIZE;drawnWidth=MAX_GROUP_SIZE;}if(drawnHeight>MAX_GROUP_SIZE){scaleY=drawnHeight/MAX_GROUP_SIZE;drawnHeight=MAX_GROUP_SIZE;}this.current.startNewPathAndClipBox([0,0,drawnWidth,drawnHeight]);var cacheId="groupAt"+this.groupLevel;if(group.smask){cacheId+="_smask_"+this.smaskCounter++%2;}var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);var groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY);groupCtx.translate(-offsetX,-offsetY);groupCtx.transform.apply(groupCtx,_toConsumableArray(currentTransform));if(group.smask){this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX:offsetX,offsetY:offsetY,scaleX:scaleX,scaleY:scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null});}else{currentCtx.setTransform(1,0,0,1,0,0);currentCtx.translate(offsetX,offsetY);currentCtx.scale(scaleX,scaleY);currentCtx.save();}copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(currentCtx);this.groupLevel++;}},{key:"endGroup",value:function endGroup(group){if(!this.contentVisible){return;}this.groupLevel--;var groupCtx=this.ctx;var ctx=this.groupStack.pop();this.ctx=ctx;this.ctx.imageSmoothingEnabled=false;if(group.smask){this.tempSMask=this.smaskStack.pop();this.restore();}else{var _this$ctx4;this.ctx.restore();var currentMtx=(0,_display_utils.getCurrentTransform)(this.ctx);this.restore();this.ctx.save();(_this$ctx4=this.ctx).setTransform.apply(_this$ctx4,_toConsumableArray(currentMtx));var dirtyBox=_util.Util.getAxialAlignedBoundingBox([0,0,groupCtx.canvas.width,groupCtx.canvas.height],currentMtx);this.ctx.drawImage(groupCtx.canvas,0,0);this.ctx.restore();this.compose(dirtyBox);}}},{key:"beginAnnotation",value:function beginAnnotation(id,rect,transform,matrix,hasOwnCanvas){_classPrivateMethodGet(this,_restoreInitialState,_restoreInitialState2).call(this);resetCtxToDefault(this.ctx);this.ctx.save();this.save();if(this.baseTransform){var _this$ctx5;(_this$ctx5=this.ctx).setTransform.apply(_this$ctx5,_toConsumableArray(this.baseTransform));}if(Array.isArray(rect)&&rect.length===4){var width=rect[2]-rect[0];var height=rect[3]-rect[1];if(hasOwnCanvas&&this.annotationCanvasMap){transform=transform.slice();transform[4]-=rect[0];transform[5]-=rect[1];rect=rect.slice();rect[0]=rect[1]=0;rect[2]=width;rect[3]=height;var _Util$singularValueDe=_util.Util.singularValueDecompose2dScale((0,_display_utils.getCurrentTransform)(this.ctx)),_Util$singularValueDe2=_slicedToArray(_Util$singularValueDe,2),scaleX=_Util$singularValueDe2[0],scaleY=_Util$singularValueDe2[1];var viewportScale=this.viewportScale;var canvasWidth=Math.ceil(width*this.outputScaleX*viewportScale);var canvasHeight=Math.ceil(height*this.outputScaleY*viewportScale);this.annotationCanvas=this.canvasFactory.create(canvasWidth,canvasHeight);var _this$annotationCanva=this.annotationCanvas,canvas=_this$annotationCanva.canvas,context=_this$annotationCanva.context;this.annotationCanvasMap.set(id,canvas);this.annotationCanvas.savedCtx=this.ctx;this.ctx=context;this.ctx.setTransform(scaleX,0,0,-scaleY,0,height*scaleY);resetCtxToDefault(this.ctx);}else{resetCtxToDefault(this.ctx);this.ctx.rect(rect[0],rect[1],width,height);this.ctx.clip();this.endPath();}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.transform.apply(this,_toConsumableArray(transform));this.transform.apply(this,_toConsumableArray(matrix));}},{key:"endAnnotation",value:function endAnnotation(){if(this.annotationCanvas){this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas;}}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(img){if(!this.contentVisible){return;}var count=img.count;img=this.getObject(img.data,img);img.count=count;var ctx=this.ctx;var glyph=this.processingType3;if(glyph){if(glyph.compiled===undefined){glyph.compiled=compileType3Glyph(img);}if(glyph.compiled){glyph.compiled(ctx);return;}}var mask=this._createMaskCanvas(img);var maskCanvas=mask.canvas;ctx.save();ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(maskCanvas,mask.offsetX,mask.offsetY);ctx.restore();this.compose();}},{key:"paintImageMaskXObjectRepeat",value:function paintImageMaskXObjectRepeat(img,scaleX){var skewX=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var skewY=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var scaleY=arguments.length>4?arguments[4]:undefined;var positions=arguments.length>5?arguments[5]:undefined;if(!this.contentVisible){return;}img=this.getObject(img.data,img);var ctx=this.ctx;ctx.save();var currentTransform=(0,_display_utils.getCurrentTransform)(ctx);ctx.transform(scaleX,skewX,skewY,scaleY,0,0);var mask=this._createMaskCanvas(img);ctx.setTransform(1,0,0,1,mask.offsetX-currentTransform[4],mask.offsetY-currentTransform[5]);for(var i=0,ii=positions.length;i<ii;i+=2){var trans=_util.Util.transform(currentTransform,[scaleX,skewX,skewY,scaleY,positions[i],positions[i+1]]);var _Util$applyTransform3=_util.Util.applyTransform([0,0],trans),_Util$applyTransform4=_slicedToArray(_Util$applyTransform3,2),x=_Util$applyTransform4[0],y=_Util$applyTransform4[1];ctx.drawImage(mask.canvas,x,y);}ctx.restore();this.compose();}},{key:"paintImageMaskXObjectGroup",value:function paintImageMaskXObjectGroup(images){if(!this.contentVisible){return;}var ctx=this.ctx;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var _iterator8=_createForOfIteratorHelper(images),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var image=_step8.value;var data=image.data,width=image.width,height=image.height,transform=image.transform;var maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height);var maskCtx=maskCanvas.context;maskCtx.save();var img=this.getObject(data,image);putBinaryImageMask(maskCtx,img);maskCtx.globalCompositeOperation="source-in";maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();ctx.save();ctx.transform.apply(ctx,_toConsumableArray(transform));ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore();}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}this.compose();}},{key:"paintImageXObject",value:function paintImageXObject(objId){if(!this.contentVisible){return;}var imgData=this.getObject(objId);if(!imgData){(0,_util.warn)("Dependent image isn't ready yet");return;}this.paintInlineImageXObject(imgData);}},{key:"paintImageXObjectRepeat",value:function paintImageXObjectRepeat(objId,scaleX,scaleY,positions){if(!this.contentVisible){return;}var imgData=this.getObject(objId);if(!imgData){(0,_util.warn)("Dependent image isn't ready yet");return;}var width=imgData.width;var height=imgData.height;var map=[];for(var i=0,ii=positions.length;i<ii;i+=2){map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});}this.paintInlineImageXObjectGroup(imgData,map);}},{key:"applyTransferMapsToCanvas",value:function applyTransferMapsToCanvas(ctx){if(this.current.transferMaps!=="none"){ctx.filter=this.current.transferMaps;ctx.drawImage(ctx.canvas,0,0);ctx.filter="none";}return ctx.canvas;}},{key:"applyTransferMapsToBitmap",value:function applyTransferMapsToBitmap(imgData){if(this.current.transferMaps==="none"){return imgData.bitmap;}var bitmap=imgData.bitmap,width=imgData.width,height=imgData.height;var tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height);var tmpCtx=tmpCanvas.context;tmpCtx.filter=this.current.transferMaps;tmpCtx.drawImage(bitmap,0,0);tmpCtx.filter="none";return tmpCanvas.canvas;}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(imgData){if(!this.contentVisible){return;}var width=imgData.width;var height=imgData.height;var ctx=this.ctx;this.save();if(!_is_node.isNodeJS){ctx.filter="none";}ctx.scale(1/width,-1/height);var imgToPaint;if(imgData.bitmap){imgToPaint=this.applyTransferMapsToBitmap(imgData);}else if(typeof HTMLElement==="function"&&imgData instanceof HTMLElement||!imgData.data){imgToPaint=imgData;}else{var tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}var scaled=this._scaleImage(imgToPaint,(0,_display_utils.getCurrentTransformInverse)(ctx));ctx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils.getCurrentTransform)(ctx),imgData.interpolate);drawImageAtIntegerCoords(ctx,scaled.img,0,0,scaled.paintWidth,scaled.paintHeight,0,-height,width,height);this.compose();this.restore();}},{key:"paintInlineImageXObjectGroup",value:function paintInlineImageXObjectGroup(imgData,map){if(!this.contentVisible){return;}var ctx=this.ctx;var imgToPaint;if(imgData.bitmap){imgToPaint=imgData.bitmap;}else{var w=imgData.width;var h=imgData.height;var tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",w,h);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}var _iterator9=_createForOfIteratorHelper(map),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var entry=_step9.value;ctx.save();ctx.transform.apply(ctx,_toConsumableArray(entry.transform));ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,imgToPaint,entry.x,entry.y,entry.w,entry.h,0,-1,1,1);ctx.restore();}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}this.compose();}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){if(!this.contentVisible){return;}this.ctx.fillRect(0,0,1,1);this.compose();}},{key:"markPoint",value:function markPoint(tag){}},{key:"markPointProps",value:function markPointProps(tag,properties){}},{key:"beginMarkedContent",value:function beginMarkedContent(tag){this.markedContentStack.push({visible:true});}},{key:"beginMarkedContentProps",value:function beginMarkedContentProps(tag,properties){if(tag==="OC"){this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties)});}else{this.markedContentStack.push({visible:true});}this.contentVisible=this.isContentVisible();}},{key:"endMarkedContent",value:function endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible();}},{key:"beginCompat",value:function beginCompat(){}},{key:"endCompat",value:function endCompat(){}},{key:"consumePath",value:function consumePath(clipBox){var isEmpty=this.current.isEmptyClip();if(this.pendingClip){this.current.updateClipFromPath();}if(!this.pendingClip){this.compose(clipBox);}var ctx=this.ctx;if(this.pendingClip){if(!isEmpty){if(this.pendingClip===EO_CLIP){ctx.clip("evenodd");}else{ctx.clip();}}this.pendingClip=null;}this.current.startNewPathAndClipBox(this.current.clipBox);ctx.beginPath();}},{key:"getSinglePixelWidth",value:function getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){var m=(0,_display_utils.getCurrentTransform)(this.ctx);if(m[1]===0&&m[2]===0){this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));}else{var absDet=Math.abs(m[0]*m[3]-m[2]*m[1]);var normX=Math.hypot(m[0],m[2]);var normY=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(normX,normY)/absDet;}}return this._cachedGetSinglePixelWidth;}},{key:"getScaleForStroking",value:function getScaleForStroking(){if(!this._cachedScaleForStroking){var lineWidth=this.current.lineWidth;var m=(0,_display_utils.getCurrentTransform)(this.ctx);var scaleX,scaleY;if(m[1]===0&&m[2]===0){var normX=Math.abs(m[0]);var normY=Math.abs(m[3]);if(lineWidth===0){scaleX=1/normX;scaleY=1/normY;}else{var scaledXLineWidth=normX*lineWidth;var scaledYLineWidth=normY*lineWidth;scaleX=scaledXLineWidth<1?1/scaledXLineWidth:1;scaleY=scaledYLineWidth<1?1/scaledYLineWidth:1;}}else{var absDet=Math.abs(m[0]*m[3]-m[2]*m[1]);var _normX=Math.hypot(m[0],m[1]);var _normY=Math.hypot(m[2],m[3]);if(lineWidth===0){scaleX=_normY/absDet;scaleY=_normX/absDet;}else{var baseArea=lineWidth*absDet;scaleX=_normY>baseArea?_normY/baseArea:1;scaleY=_normX>baseArea?_normX/baseArea:1;}}this._cachedScaleForStroking=[scaleX,scaleY];}return this._cachedScaleForStroking;}},{key:"rescaleAndStroke",value:function rescaleAndStroke(saveRestore){var ctx=this.ctx;var lineWidth=this.current.lineWidth;var _this$getScaleForStro=this.getScaleForStroking(),_this$getScaleForStro2=_slicedToArray(_this$getScaleForStro,2),scaleX=_this$getScaleForStro2[0],scaleY=_this$getScaleForStro2[1];ctx.lineWidth=lineWidth||1;if(scaleX===1&&scaleY===1){ctx.stroke();return;}var savedMatrix,savedDashes,savedDashOffset;if(saveRestore){savedMatrix=(0,_display_utils.getCurrentTransform)(ctx);savedDashes=ctx.getLineDash().slice();savedDashOffset=ctx.lineDashOffset;}ctx.scale(scaleX,scaleY);var scale=Math.max(scaleX,scaleY);ctx.setLineDash(ctx.getLineDash().map(function(x){return x/scale;}));ctx.lineDashOffset/=scale;ctx.stroke();if(saveRestore){ctx.setTransform.apply(ctx,_toConsumableArray(savedMatrix));ctx.setLineDash(savedDashes);ctx.lineDashOffset=savedDashOffset;}}},{key:"isContentVisible",value:function isContentVisible(){for(var i=this.markedContentStack.length-1;i>=0;i--){if(!this.markedContentStack[i].visible){return false;}}return true;}}]);return CanvasGraphics;}();exports.CanvasGraphics=CanvasGraphics;function _restoreInitialState2(){while(this.stateStack.length||this.inSMaskMode){this.restore();}this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null;}}for(var op in _util.OPS){if(CanvasGraphics.prototype[op]!==undefined){CanvasGraphics.prototype[_util.OPS[op]]=CanvasGraphics.prototype[op];}}

/***/ }),
/* 147 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.TilingPattern=exports.PathType=void 0;exports.getShadingPattern=getShadingPattern;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(141);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};exports.PathType=PathType;function applyBoundingBox(ctx,bbox){if(!bbox){return;}var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];var region=new Path2D();region.rect(bbox[0],bbox[1],width,height);ctx.clip(region);}var BaseShadingPattern=/*#__PURE__*/function(){function BaseShadingPattern(){_classCallCheck(this,BaseShadingPattern);if(this.constructor===BaseShadingPattern){(0,_util.unreachable)("Cannot initialize BaseShadingPattern.");}}_createClass(BaseShadingPattern,[{key:"getPattern",value:function getPattern(){(0,_util.unreachable)("Abstract method `getPattern` called.");}}]);return BaseShadingPattern;}();var RadialAxialShadingPattern=/*#__PURE__*/function(_BaseShadingPattern){_inherits(RadialAxialShadingPattern,_BaseShadingPattern);var _super=_createSuper(RadialAxialShadingPattern);function RadialAxialShadingPattern(IR){var _this;_classCallCheck(this,RadialAxialShadingPattern);_this=_super.call(this);_this._type=IR[1];_this._bbox=IR[2];_this._colorStops=IR[3];_this._p0=IR[4];_this._p1=IR[5];_this._r0=IR[6];_this._r1=IR[7];_this.matrix=null;return _this;}_createClass(RadialAxialShadingPattern,[{key:"_createGradient",value:function _createGradient(ctx){var grad;if(this._type==="axial"){grad=ctx.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]);}else if(this._type==="radial"){grad=ctx.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1);}var _iterator=_createForOfIteratorHelper(this._colorStops),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var colorStop=_step.value;grad.addColorStop(colorStop[0],colorStop[1]);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return grad;}},{key:"getPattern",value:function getPattern(ctx,owner,inverse,pathType){var pattern;if(pathType===PathType.STROKE||pathType===PathType.FILL){var ownerBBox=owner.current.getClippedPathBoundingBox(pathType,(0,_display_utils.getCurrentTransform)(ctx))||[0,0,0,0];var width=Math.ceil(ownerBBox[2]-ownerBBox[0])||1;var height=Math.ceil(ownerBBox[3]-ownerBBox[1])||1;var tmpCanvas=owner.cachedCanvases.getCanvas("pattern",width,height,true);var tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.beginPath();tmpCtx.rect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.translate(-ownerBBox[0],-ownerBBox[1]);inverse=_util.Util.transform(inverse,[1,0,0,1,ownerBBox[0],ownerBBox[1]]);tmpCtx.transform.apply(tmpCtx,_toConsumableArray(owner.baseTransform));if(this.matrix){tmpCtx.transform.apply(tmpCtx,_toConsumableArray(this.matrix));}applyBoundingBox(tmpCtx,this._bbox);tmpCtx.fillStyle=this._createGradient(tmpCtx);tmpCtx.fill();pattern=ctx.createPattern(tmpCanvas.canvas,"no-repeat");var domMatrix=new DOMMatrix(inverse);pattern.setTransform(domMatrix);}else{applyBoundingBox(ctx,this._bbox);pattern=this._createGradient(ctx);}return pattern;}}]);return RadialAxialShadingPattern;}(BaseShadingPattern);function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){var coords=context.coords,colors=context.colors;var bytes=data.data,rowSize=data.width*4;var tmp;if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}if(coords[p2+1]>coords[p3+1]){tmp=p2;p2=p3;p3=tmp;tmp=c2;c2=c3;c3=tmp;}if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}var x1=(coords[p1]+context.offsetX)*context.scaleX;var y1=(coords[p1+1]+context.offsetY)*context.scaleY;var x2=(coords[p2]+context.offsetX)*context.scaleX;var y2=(coords[p2+1]+context.offsetY)*context.scaleY;var x3=(coords[p3]+context.offsetX)*context.scaleX;var y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3){return;}var c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2];var c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2];var c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2];var minY=Math.round(y1),maxY=Math.round(y3);var xa,car,cag,cab;var xb,cbr,cbg,cbb;for(var y=minY;y<=maxY;y++){if(y<y2){var _k=void 0;if(y<y1){_k=0;}else{_k=(y1-y)/(y1-y2);}xa=x1-(x1-x2)*_k;car=c1r-(c1r-c2r)*_k;cag=c1g-(c1g-c2g)*_k;cab=c1b-(c1b-c2b)*_k;}else{var _k2=void 0;if(y>y3){_k2=1;}else if(y2===y3){_k2=0;}else{_k2=(y2-y)/(y2-y3);}xa=x2-(x2-x3)*_k2;car=c2r-(c2r-c3r)*_k2;cag=c2g-(c2g-c3g)*_k2;cab=c2b-(c2b-c3b)*_k2;}var k=void 0;if(y<y1){k=0;}else if(y>y3){k=1;}else{k=(y1-y)/(y1-y3);}xb=x1-(x1-x3)*k;cbr=c1r-(c1r-c3r)*k;cbg=c1g-(c1g-c3g)*k;cbb=c1b-(c1b-c3b)*k;var x1_=Math.round(Math.min(xa,xb));var x2_=Math.round(Math.max(xa,xb));var j=rowSize*y+x1_*4;for(var x=x1_;x<=x2_;x++){k=(xa-x)/(xa-xb);if(k<0){k=0;}else if(k>1){k=1;}bytes[j++]=car-(car-cbr)*k|0;bytes[j++]=cag-(cag-cbg)*k|0;bytes[j++]=cab-(cab-cbb)*k|0;bytes[j++]=255;}}}function drawFigure(data,figure,context){var ps=figure.coords;var cs=figure.colors;var i,ii;switch(figure.type){case"lattice":var verticesPerRow=figure.verticesPerRow;var rows=Math.floor(ps.length/verticesPerRow)-1;var cols=verticesPerRow-1;for(i=0;i<rows;i++){var q=i*verticesPerRow;for(var j=0;j<cols;j++,q++){drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]);drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow]);}}break;case"triangles":for(i=0,ii=ps.length;i<ii;i+=3){drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);}break;default:throw new Error("illegal figure");}}var MeshShadingPattern=/*#__PURE__*/function(_BaseShadingPattern2){_inherits(MeshShadingPattern,_BaseShadingPattern2);var _super2=_createSuper(MeshShadingPattern);function MeshShadingPattern(IR){var _this2;_classCallCheck(this,MeshShadingPattern);_this2=_super2.call(this);_this2._coords=IR[2];_this2._colors=IR[3];_this2._figures=IR[4];_this2._bounds=IR[5];_this2._bbox=IR[7];_this2._background=IR[8];_this2.matrix=null;return _this2;}_createClass(MeshShadingPattern,[{key:"_createMeshCanvas",value:function _createMeshCanvas(combinedScale,backgroundColor,cachedCanvases){var EXPECTED_SCALE=1.1;var MAX_PATTERN_SIZE=3000;var BORDER_SIZE=2;var offsetX=Math.floor(this._bounds[0]);var offsetY=Math.floor(this._bounds[1]);var boundsWidth=Math.ceil(this._bounds[2])-offsetX;var boundsHeight=Math.ceil(this._bounds[3])-offsetY;var width=Math.min(Math.ceil(Math.abs(boundsWidth*combinedScale[0]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var height=Math.min(Math.ceil(Math.abs(boundsHeight*combinedScale[1]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var scaleX=boundsWidth/width;var scaleY=boundsHeight/height;var context={coords:this._coords,colors:this._colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY};var paddedWidth=width+BORDER_SIZE*2;var paddedHeight=height+BORDER_SIZE*2;var tmpCanvas=cachedCanvases.getCanvas("mesh",paddedWidth,paddedHeight,false);var tmpCtx=tmpCanvas.context;var data=tmpCtx.createImageData(width,height);if(backgroundColor){var bytes=data.data;for(var i=0,ii=bytes.length;i<ii;i+=4){bytes[i]=backgroundColor[0];bytes[i+1]=backgroundColor[1];bytes[i+2]=backgroundColor[2];bytes[i+3]=255;}}var _iterator2=_createForOfIteratorHelper(this._figures),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var figure=_step2.value;drawFigure(data,figure,context);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}tmpCtx.putImageData(data,BORDER_SIZE,BORDER_SIZE);var canvas=tmpCanvas.canvas;return{canvas:canvas,offsetX:offsetX-BORDER_SIZE*scaleX,offsetY:offsetY-BORDER_SIZE*scaleY,scaleX:scaleX,scaleY:scaleY};}},{key:"getPattern",value:function getPattern(ctx,owner,inverse,pathType){applyBoundingBox(ctx,this._bbox);var scale;if(pathType===PathType.SHADING){scale=_util.Util.singularValueDecompose2dScale((0,_display_utils.getCurrentTransform)(ctx));}else{scale=_util.Util.singularValueDecompose2dScale(owner.baseTransform);if(this.matrix){var matrixScale=_util.Util.singularValueDecompose2dScale(this.matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]];}}var temporaryPatternCanvas=this._createMeshCanvas(scale,pathType===PathType.SHADING?null:this._background,owner.cachedCanvases);if(pathType!==PathType.SHADING){ctx.setTransform.apply(ctx,_toConsumableArray(owner.baseTransform));if(this.matrix){ctx.transform.apply(ctx,_toConsumableArray(this.matrix));}}ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY);return ctx.createPattern(temporaryPatternCanvas.canvas,"no-repeat");}}]);return MeshShadingPattern;}(BaseShadingPattern);var DummyShadingPattern=/*#__PURE__*/function(_BaseShadingPattern3){_inherits(DummyShadingPattern,_BaseShadingPattern3);var _super3=_createSuper(DummyShadingPattern);function DummyShadingPattern(){_classCallCheck(this,DummyShadingPattern);return _super3.apply(this,arguments);}_createClass(DummyShadingPattern,[{key:"getPattern",value:function getPattern(){return"hotpink";}}]);return DummyShadingPattern;}(BaseShadingPattern);function getShadingPattern(IR){switch(IR[0]){case"RadialAxial":return new RadialAxialShadingPattern(IR);case"Mesh":return new MeshShadingPattern(IR);case"Dummy":return new DummyShadingPattern();}throw new Error("Unknown IR type: ".concat(IR[0]));}var PaintType={COLORED:1,UNCOLORED:2};var TilingPattern=/*#__PURE__*/function(){function TilingPattern(IR,color,ctx,canvasGraphicsFactory,baseTransform){_classCallCheck(this,TilingPattern);this.operatorList=IR[2];this.matrix=IR[3]||[1,0,0,1,0,0];this.bbox=IR[4];this.xstep=IR[5];this.ystep=IR[6];this.paintType=IR[7];this.tilingType=IR[8];this.color=color;this.ctx=ctx;this.canvasGraphicsFactory=canvasGraphicsFactory;this.baseTransform=baseTransform;}_createClass(TilingPattern,[{key:"createPatternCanvas",value:function createPatternCanvas(owner){var operatorList=this.operatorList;var bbox=this.bbox;var xstep=this.xstep;var ystep=this.ystep;var paintType=this.paintType;var tilingType=this.tilingType;var color=this.color;var canvasGraphicsFactory=this.canvasGraphicsFactory;(0,_util.info)("TilingType: "+tilingType);var x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3];var matrixScale=_util.Util.singularValueDecompose2dScale(this.matrix);var curMatrixScale=_util.Util.singularValueDecompose2dScale(this.baseTransform);var combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]];var dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]);var dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]);var tmpCanvas=owner.cachedCanvases.getCanvas("pattern",dimx.size,dimy.size,true);var tmpCtx=tmpCanvas.context;var graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel;this.setFillAndStrokeStyleToContext(graphics,paintType,color);var adjustedX0=x0;var adjustedY0=y0;var adjustedX1=x1;var adjustedY1=y1;if(x0<0){adjustedX0=0;adjustedX1+=Math.abs(x0);}if(y0<0){adjustedY0=0;adjustedY1+=Math.abs(y0);}tmpCtx.translate(-(dimx.scale*adjustedX0),-(dimy.scale*adjustedY0));graphics.transform(dimx.scale,0,0,dimy.scale,0,0);tmpCtx.save();this.clipBbox(graphics,adjustedX0,adjustedY0,adjustedX1,adjustedY1);graphics.baseTransform=(0,_display_utils.getCurrentTransform)(graphics.ctx);graphics.executeOperatorList(operatorList);graphics.endDrawing();return{canvas:tmpCanvas.canvas,scaleX:dimx.scale,scaleY:dimy.scale,offsetX:adjustedX0,offsetY:adjustedY0};}},{key:"getSizeAndScale",value:function getSizeAndScale(step,realOutputSize,scale){step=Math.abs(step);var maxSize=Math.max(TilingPattern.MAX_PATTERN_SIZE,realOutputSize);var size=Math.ceil(step*scale);if(size>=maxSize){size=maxSize;}else{scale=size/step;}return{scale:scale,size:size};}},{key:"clipBbox",value:function clipBbox(graphics,x0,y0,x1,y1){var bboxWidth=x1-x0;var bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight);graphics.current.updateRectMinMax((0,_display_utils.getCurrentTransform)(graphics.ctx),[x0,y0,x1,y1]);graphics.clip();graphics.endPath();}},{key:"setFillAndStrokeStyleToContext",value:function setFillAndStrokeStyleToContext(graphics,paintType,color){var context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType.COLORED:var ctx=this.ctx;context.fillStyle=ctx.fillStyle;context.strokeStyle=ctx.strokeStyle;current.fillColor=ctx.fillStyle;current.strokeColor=ctx.strokeStyle;break;case PaintType.UNCOLORED:var cssColor=_util.Util.makeHexColor(color[0],color[1],color[2]);context.fillStyle=cssColor;context.strokeStyle=cssColor;current.fillColor=cssColor;current.strokeColor=cssColor;break;default:throw new _util.FormatError("Unsupported paint type: ".concat(paintType));}}},{key:"getPattern",value:function getPattern(ctx,owner,inverse,pathType){var matrix=inverse;if(pathType!==PathType.SHADING){matrix=_util.Util.transform(matrix,owner.baseTransform);if(this.matrix){matrix=_util.Util.transform(matrix,this.matrix);}}var temporaryPatternCanvas=this.createPatternCanvas(owner);var domMatrix=new DOMMatrix(matrix);domMatrix=domMatrix.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);domMatrix=domMatrix.scale(1/temporaryPatternCanvas.scaleX,1/temporaryPatternCanvas.scaleY);var pattern=ctx.createPattern(temporaryPatternCanvas.canvas,"repeat");pattern.setTransform(domMatrix);return pattern;}}],[{key:"MAX_PATTERN_SIZE",get:function get(){return(0,_util.shadow)(this,"MAX_PATTERN_SIZE",3000);}}]);return TilingPattern;}();exports.TilingPattern=TilingPattern;

/***/ }),
/* 148 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.convertBlackAndWhiteToRGBA=convertBlackAndWhiteToRGBA;exports.convertToRGBA=convertToRGBA;exports.grayToRGBA=grayToRGBA;var _util=__w_pdfjs_require__(1);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function convertToRGBA(params){switch(params.kind){case _util.ImageKind.GRAYSCALE_1BPP:return convertBlackAndWhiteToRGBA(params);case _util.ImageKind.RGB_24BPP:return convertRGBToRGBA(params);}return null;}function convertBlackAndWhiteToRGBA(_ref){var src=_ref.src,_ref$srcPos=_ref.srcPos,srcPos=_ref$srcPos===void 0?0:_ref$srcPos,dest=_ref.dest,width=_ref.width,height=_ref.height,_ref$nonBlackColor=_ref.nonBlackColor,nonBlackColor=_ref$nonBlackColor===void 0?0xffffffff:_ref$nonBlackColor,_ref$inverseDecode=_ref.inverseDecode,inverseDecode=_ref$inverseDecode===void 0?false:_ref$inverseDecode;var black=_util.FeatureTest.isLittleEndian?0xff000000:0x000000ff;var _ref2=inverseDecode?[nonBlackColor,black]:[black,nonBlackColor],_ref3=_slicedToArray(_ref2,2),zeroMapping=_ref3[0],oneMapping=_ref3[1];var widthInSource=width>>3;var widthRemainder=width&7;var srcLength=src.length;dest=new Uint32Array(dest.buffer);var destPos=0;for(var i=0;i<height;i++){for(var max=srcPos+widthInSource;srcPos<max;srcPos++){var _elem=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=_elem&128?oneMapping:zeroMapping;dest[destPos++]=_elem&64?oneMapping:zeroMapping;dest[destPos++]=_elem&32?oneMapping:zeroMapping;dest[destPos++]=_elem&16?oneMapping:zeroMapping;dest[destPos++]=_elem&8?oneMapping:zeroMapping;dest[destPos++]=_elem&4?oneMapping:zeroMapping;dest[destPos++]=_elem&2?oneMapping:zeroMapping;dest[destPos++]=_elem&1?oneMapping:zeroMapping;}if(widthRemainder===0){continue;}var elem=srcPos<srcLength?src[srcPos++]:255;for(var j=0;j<widthRemainder;j++){dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping;}}return{srcPos:srcPos,destPos:destPos};}function convertRGBToRGBA(_ref4){var src=_ref4.src,_ref4$srcPos=_ref4.srcPos,srcPos=_ref4$srcPos===void 0?0:_ref4$srcPos,dest=_ref4.dest,_ref4$destPos=_ref4.destPos,destPos=_ref4$destPos===void 0?0:_ref4$destPos,width=_ref4.width,height=_ref4.height;var i=0;var len32=src.length>>2;var src32=new Uint32Array(src.buffer,srcPos,len32);if(_util.FeatureTest.isLittleEndian){for(;i<len32-2;i+=3,destPos+=4){var s1=src32[i];var s2=src32[i+1];var s3=src32[i+2];dest[destPos]=s1|0xff000000;dest[destPos+1]=s1>>>24|s2<<8|0xff000000;dest[destPos+2]=s2>>>16|s3<<16|0xff000000;dest[destPos+3]=s3>>>8|0xff000000;}for(var j=i*4,jj=src.length;j<jj;j+=3){dest[destPos++]=src[j]|src[j+1]<<8|src[j+2]<<16|0xff000000;}}else{for(;i<len32-2;i+=3,destPos+=4){var _s2=src32[i];var _s3=src32[i+1];var _s4=src32[i+2];dest[destPos]=_s2|0xff;dest[destPos+1]=_s2<<24|_s3>>>8|0xff;dest[destPos+2]=_s3<<16|_s4>>>16|0xff;dest[destPos+3]=_s4<<8|0xff;}for(var _j=i*4,_jj=src.length;_j<_jj;_j+=3){dest[destPos++]=src[_j]<<24|src[_j+1]<<16|src[_j+2]<<8|0xff;}}return{srcPos:srcPos,destPos:destPos};}function grayToRGBA(src,dest){if(_util.FeatureTest.isLittleEndian){for(var i=0,ii=src.length;i<ii;i++){dest[i]=src[i]*0x10101|0xff000000;}}else{for(var _i2=0,_ii=src.length;_i2<_ii;_i2++){dest[_i2]=src[_i2]*0x1010100|0x000000ff;}}}

/***/ }),
/* 149 */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.GlobalWorkerOptions=void 0;var GlobalWorkerOptions=Object.create(null);exports.GlobalWorkerOptions=GlobalWorkerOptions;GlobalWorkerOptions.workerPort=null;GlobalWorkerOptions.workerSrc="";

/***/ }),
/* 150 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.MessageHandler=void 0;var _util=__w_pdfjs_require__(1);function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},"");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg);}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,"toString",function(){return"[object Generator]";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}var CallbackKind={UNKNOWN:0,DATA:1,ERROR:2};var StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){if(!(reason instanceof Error||_typeof(reason)==="object"&&reason!==null)){(0,_util.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.');}switch(reason.name){case"AbortException":return new _util.AbortException(reason.message);case"MissingPDFException":return new _util.MissingPDFException(reason.message);case"PasswordException":return new _util.PasswordException(reason.message,reason.code);case"UnexpectedResponseException":return new _util.UnexpectedResponseException(reason.message,reason.status);case"UnknownErrorException":return new _util.UnknownErrorException(reason.message,reason.details);default:return new _util.UnknownErrorException(reason.message,reason.toString());}}var MessageHandler=/*#__PURE__*/function(){function MessageHandler(sourceName,targetName,comObj){var _this=this;_classCallCheck(this,MessageHandler);this.sourceName=sourceName;this.targetName=targetName;this.comObj=comObj;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=function(event){var data=event.data;if(data.targetName!==_this.sourceName){return;}if(data.stream){_this._processStreamMessage(data);return;}if(data.callback){var callbackId=data.callbackId;var capability=_this.callbackCapabilities[callbackId];if(!capability){throw new Error("Cannot resolve callback ".concat(callbackId));}delete _this.callbackCapabilities[callbackId];if(data.callback===CallbackKind.DATA){capability.resolve(data.data);}else if(data.callback===CallbackKind.ERROR){capability.reject(wrapReason(data.reason));}else{throw new Error("Unexpected callback case");}return;}var action=_this.actionHandler[data.action];if(!action){throw new Error("Unknown action from worker: ".concat(data.action));}if(data.callbackId){var cbSourceName=_this.sourceName;var cbTargetName=data.sourceName;new Promise(function(resolve){resolve(action(data.data));}).then(function(result){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result});},function(reason){comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)});});return;}if(data.streamId){_this._createStreamSink(data);return;}action(data.data);};comObj.addEventListener("message",this._onComObjOnMessage);}_createClass(MessageHandler,[{key:"on",value:function on(actionName,handler){var ah=this.actionHandler;if(ah[actionName]){throw new Error("There is already an actionName called \"".concat(actionName,"\""));}ah[actionName]=handler;}},{key:"send",value:function send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data},transfers);}},{key:"sendWithPromise",value:function sendWithPromise(actionName,data,transfers){var callbackId=this.callbackId++;var capability=(0,_util.createPromiseCapability)();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId:callbackId,data:data},transfers);}catch(ex){capability.reject(ex);}return capability.promise;}},{key:"sendWithStream",value:function sendWithStream(actionName,data,queueingStrategy,transfers){var _this2=this;var streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:function start(controller){var startCapability=(0,_util.createPromiseCapability)();_this2.streamControllers[streamId]={controller:controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:false};comObj.postMessage({sourceName:sourceName,targetName:targetName,action:actionName,streamId:streamId,data:data,desiredSize:controller.desiredSize},transfers);return startCapability.promise;},pull:function pull(controller){var pullCapability=(0,_util.createPromiseCapability)();_this2.streamControllers[streamId].pullCall=pullCapability;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL,streamId:streamId,desiredSize:controller.desiredSize});return pullCapability.promise;},cancel:function cancel(reason){(0,_util.assert)(reason instanceof Error,"cancel must have a valid reason");var cancelCapability=(0,_util.createPromiseCapability)();_this2.streamControllers[streamId].cancelCall=cancelCapability;_this2.streamControllers[streamId].isClosed=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL,streamId:streamId,reason:wrapReason(reason)});return cancelCapability.promise;}},queueingStrategy);}},{key:"_createStreamSink",value:function _createStreamSink(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;var self=this,action=this.actionHandler[data.action];var streamSink={enqueue:function enqueue(chunk){var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var transfers=arguments.length>2?arguments[2]:undefined;if(this.isCancelled){return;}var lastDesiredSize=this.desiredSize;this.desiredSize-=size;if(lastDesiredSize>0&&this.desiredSize<=0){this.sinkCapability=(0,_util.createPromiseCapability)();this.ready=this.sinkCapability.promise;}comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.ENQUEUE,streamId:streamId,chunk:chunk},transfers);},close:function close(){if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CLOSE,streamId:streamId});delete self.streamSinks[streamId];},error:function error(reason){(0,_util.assert)(reason instanceof Error,"error must have a valid reason");if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.ERROR,streamId:streamId,reason:wrapReason(reason)});},sinkCapability:(0,_util.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:false,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve();streamSink.ready=streamSink.sinkCapability.promise;this.streamSinks[streamId]=streamSink;new Promise(function(resolve){resolve(action(data.data,streamSink));}).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.START_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.START_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});}},{key:"_processStreamMessage",value:function _processStreamMessage(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;var streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:if(data.success){streamController.startCall.resolve();}else{streamController.startCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL_COMPLETE:if(data.success){streamController.pullCall.resolve();}else{streamController.pullCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,success:true});break;}if(streamSink.desiredSize<=0&&data.desiredSize>0){streamSink.sinkCapability.resolve();}streamSink.desiredSize=data.desiredSize;new Promise(function(resolve){resolve(streamSink.onPull&&streamSink.onPull());}).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});break;case StreamKind.ENQUEUE:(0,_util.assert)(streamController,"enqueue should have stream controller");if(streamController.isClosed){break;}streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:(0,_util.assert)(streamController,"close should have stream controller");if(streamController.isClosed){break;}streamController.isClosed=true;streamController.controller.close();this._deleteStreamController(streamController,streamId);break;case StreamKind.ERROR:(0,_util.assert)(streamController,"error should have stream controller");streamController.controller.error(wrapReason(data.reason));this._deleteStreamController(streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:if(data.success){streamController.cancelCall.resolve();}else{streamController.cancelCall.reject(wrapReason(data.reason));}this._deleteStreamController(streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink){break;}new Promise(function(resolve){resolve(streamSink.onCancel&&streamSink.onCancel(wrapReason(data.reason)));}).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});streamSink.sinkCapability.reject(wrapReason(data.reason));streamSink.isCancelled=true;delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case");}}},{key:"_deleteStreamController",value:function(){var _deleteStreamController2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(streamController,streamId){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.allSettled([streamController.startCall&&streamController.startCall.promise,streamController.pullCall&&streamController.pullCall.promise,streamController.cancelCall&&streamController.cancelCall.promise]);case 2:delete this.streamControllers[streamId];case 3:case"end":return _context.stop();}},_callee,this);}));function _deleteStreamController(_x,_x2){return _deleteStreamController2.apply(this,arguments);}return _deleteStreamController;}()},{key:"destroy",value:function destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage);}}]);return MessageHandler;}();exports.MessageHandler=MessageHandler;

/***/ }),
/* 151 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}Object.defineProperty(exports, "__esModule", ({value:true}));exports.Metadata=void 0;var _util=__w_pdfjs_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}var _metadataMap=/*#__PURE__*/new WeakMap();var _data=/*#__PURE__*/new WeakMap();var Metadata=/*#__PURE__*/function(){function Metadata(_ref){var parsedData=_ref.parsedData,rawData=_ref.rawData;_classCallCheck(this,Metadata);_classPrivateFieldInitSpec(this,_metadataMap,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_data,{writable:true,value:void 0});_classPrivateFieldSet(this,_metadataMap,parsedData);_classPrivateFieldSet(this,_data,rawData);}_createClass(Metadata,[{key:"getRaw",value:function getRaw(){return _classPrivateFieldGet(this,_data);}},{key:"get",value:function get(name){var _classPrivateFieldGet2;return(_classPrivateFieldGet2=_classPrivateFieldGet(this,_metadataMap).get(name))!==null&&_classPrivateFieldGet2!==void 0?_classPrivateFieldGet2:null;}},{key:"getAll",value:function getAll(){return(0,_util.objectFromMap)(_classPrivateFieldGet(this,_metadataMap));}},{key:"has",value:function has(name){return _classPrivateFieldGet(this,_metadataMap).has(name);}}]);return Metadata;}();exports.Metadata=Metadata;

/***/ }),
/* 152 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}Object.defineProperty(exports, "__esModule", ({value:true}));exports.OptionalContentConfig=void 0;var _util=__w_pdfjs_require__(1);var _murmurhash=__w_pdfjs_require__(143);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}var INTERNAL=Symbol("INTERNAL");var _visible=/*#__PURE__*/new WeakMap();var OptionalContentGroup=/*#__PURE__*/function(){function OptionalContentGroup(name,intent){_classCallCheck(this,OptionalContentGroup);_classPrivateFieldInitSpec(this,_visible,{writable:true,value:true});this.name=name;this.intent=intent;}_createClass(OptionalContentGroup,[{key:"visible",get:function get(){return _classPrivateFieldGet(this,_visible);}},{key:"_setVisible",value:function _setVisible(internal,visible){if(internal!==INTERNAL){(0,_util.unreachable)("Internal method `_setVisible` called.");}_classPrivateFieldSet(this,_visible,visible);}}]);return OptionalContentGroup;}();var _cachedGetHash=/*#__PURE__*/new WeakMap();var _groups=/*#__PURE__*/new WeakMap();var _initialHash=/*#__PURE__*/new WeakMap();var _order=/*#__PURE__*/new WeakMap();var _evaluateVisibilityExpression=/*#__PURE__*/new WeakSet();var OptionalContentConfig=/*#__PURE__*/function(){function OptionalContentConfig(data){_classCallCheck(this,OptionalContentConfig);_classPrivateMethodInitSpec(this,_evaluateVisibilityExpression);_classPrivateFieldInitSpec(this,_cachedGetHash,{writable:true,value:null});_classPrivateFieldInitSpec(this,_groups,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_initialHash,{writable:true,value:null});_classPrivateFieldInitSpec(this,_order,{writable:true,value:null});this.name=null;this.creator=null;if(data===null){return;}this.name=data.name;this.creator=data.creator;_classPrivateFieldSet(this,_order,data.order);var _iterator=_createForOfIteratorHelper(data.groups),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _group=_step.value;_classPrivateFieldGet(this,_groups).set(_group.id,new OptionalContentGroup(_group.name,_group.intent));}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(data.baseState==="OFF"){var _iterator2=_createForOfIteratorHelper(_classPrivateFieldGet(this,_groups).values()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var group=_step2.value;group._setVisible(INTERNAL,false);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}var _iterator3=_createForOfIteratorHelper(data.on),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var on=_step3.value;_classPrivateFieldGet(this,_groups).get(on)._setVisible(INTERNAL,true);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var _iterator4=_createForOfIteratorHelper(data.off),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var off=_step4.value;_classPrivateFieldGet(this,_groups).get(off)._setVisible(INTERNAL,false);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_classPrivateFieldSet(this,_initialHash,this.getHash());}_createClass(OptionalContentConfig,[{key:"isVisible",value:function isVisible(group){if(_classPrivateFieldGet(this,_groups).size===0){return true;}if(!group){(0,_util.warn)("Optional content group not defined.");return true;}if(group.type==="OCG"){if(!_classPrivateFieldGet(this,_groups).has(group.id)){(0,_util.warn)("Optional content group not found: ".concat(group.id));return true;}return _classPrivateFieldGet(this,_groups).get(group.id).visible;}else if(group.type==="OCMD"){if(group.expression){return _classPrivateMethodGet(this,_evaluateVisibilityExpression,_evaluateVisibilityExpression2).call(this,group.expression);}if(!group.policy||group.policy==="AnyOn"){var _iterator5=_createForOfIteratorHelper(group.ids),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var id=_step5.value;if(!_classPrivateFieldGet(this,_groups).has(id)){(0,_util.warn)("Optional content group not found: ".concat(id));return true;}if(_classPrivateFieldGet(this,_groups).get(id).visible){return true;}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}return false;}else if(group.policy==="AllOn"){var _iterator6=_createForOfIteratorHelper(group.ids),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _id=_step6.value;if(!_classPrivateFieldGet(this,_groups).has(_id)){(0,_util.warn)("Optional content group not found: ".concat(_id));return true;}if(!_classPrivateFieldGet(this,_groups).get(_id).visible){return false;}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}return true;}else if(group.policy==="AnyOff"){var _iterator7=_createForOfIteratorHelper(group.ids),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _id2=_step7.value;if(!_classPrivateFieldGet(this,_groups).has(_id2)){(0,_util.warn)("Optional content group not found: ".concat(_id2));return true;}if(!_classPrivateFieldGet(this,_groups).get(_id2).visible){return true;}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return false;}else if(group.policy==="AllOff"){var _iterator8=_createForOfIteratorHelper(group.ids),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _id3=_step8.value;if(!_classPrivateFieldGet(this,_groups).has(_id3)){(0,_util.warn)("Optional content group not found: ".concat(_id3));return true;}if(_classPrivateFieldGet(this,_groups).get(_id3).visible){return false;}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}return true;}(0,_util.warn)("Unknown optional content policy ".concat(group.policy,"."));return true;}(0,_util.warn)("Unknown group type ".concat(group.type,"."));return true;}},{key:"setVisibility",value:function setVisibility(id){var visible=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!_classPrivateFieldGet(this,_groups).has(id)){(0,_util.warn)("Optional content group not found: ".concat(id));return;}_classPrivateFieldGet(this,_groups).get(id)._setVisible(INTERNAL,!!visible);_classPrivateFieldSet(this,_cachedGetHash,null);}},{key:"hasInitialVisibility",get:function get(){return this.getHash()===_classPrivateFieldGet(this,_initialHash);}},{key:"getOrder",value:function getOrder(){if(!_classPrivateFieldGet(this,_groups).size){return null;}if(_classPrivateFieldGet(this,_order)){return _classPrivateFieldGet(this,_order).slice();}return _toConsumableArray(_classPrivateFieldGet(this,_groups).keys());}},{key:"getGroups",value:function getGroups(){return _classPrivateFieldGet(this,_groups).size>0?(0,_util.objectFromMap)(_classPrivateFieldGet(this,_groups)):null;}},{key:"getGroup",value:function getGroup(id){return _classPrivateFieldGet(this,_groups).get(id)||null;}},{key:"getHash",value:function getHash(){if(_classPrivateFieldGet(this,_cachedGetHash)!==null){return _classPrivateFieldGet(this,_cachedGetHash);}var hash=new _murmurhash.MurmurHash3_64();var _iterator9=_createForOfIteratorHelper(_classPrivateFieldGet(this,_groups)),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step9$value=_slicedToArray(_step9.value,2),id=_step9$value[0],group=_step9$value[1];hash.update("".concat(id,":").concat(group.visible));}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}return _classPrivateFieldSet(this,_cachedGetHash,hash.hexdigest());}}]);return OptionalContentConfig;}();exports.OptionalContentConfig=OptionalContentConfig;function _evaluateVisibilityExpression2(array){var length=array.length;if(length<2){return true;}var operator=array[0];for(var i=1;i<length;i++){var element=array[i];var state=void 0;if(Array.isArray(element)){state=_classPrivateMethodGet(this,_evaluateVisibilityExpression,_evaluateVisibilityExpression2).call(this,element);}else if(_classPrivateFieldGet(this,_groups).has(element)){state=_classPrivateFieldGet(this,_groups).get(element).visible;}else{(0,_util.warn)("Optional content group not found: ".concat(element));return true;}switch(operator){case"And":if(!state){return false;}break;case"Or":if(state){return true;}break;case"Not":return!state;default:return true;}}return operator==="And";}

/***/ }),
/* 153 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.PDFDataTransportStream=void 0;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(141);function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},"");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg);}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,"toString",function(){return"[object Generator]";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var PDFDataTransportStream=/*#__PURE__*/function(){function PDFDataTransportStream(_ref,pdfDataRangeTransport){var _this=this;var length=_ref.length,initialData=_ref.initialData,_ref$progressiveDone=_ref.progressiveDone,progressiveDone=_ref$progressiveDone===void 0?false:_ref$progressiveDone,_ref$contentDispositi=_ref.contentDispositionFilename,contentDispositionFilename=_ref$contentDispositi===void 0?null:_ref$contentDispositi,_ref$disableRange=_ref.disableRange,disableRange=_ref$disableRange===void 0?false:_ref$disableRange,_ref$disableStream=_ref.disableStream,disableStream=_ref$disableStream===void 0?false:_ref$disableStream;_classCallCheck(this,PDFDataTransportStream);(0,_util.assert)(pdfDataRangeTransport,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');this._queuedChunks=[];this._progressiveDone=progressiveDone;this._contentDispositionFilename=contentDispositionFilename;if((initialData===null||initialData===void 0?void 0:initialData.length)>0){var buffer=initialData instanceof Uint8Array&&initialData.byteLength===initialData.buffer.byteLength?initialData.buffer:new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer);}this._pdfDataRangeTransport=pdfDataRangeTransport;this._isStreamingSupported=!disableStream;this._isRangeSupported=!disableRange;this._contentLength=length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener(function(begin,chunk){_this._onReceiveData({begin:begin,chunk:chunk});});this._pdfDataRangeTransport.addProgressListener(function(loaded,total){_this._onProgress({loaded:loaded,total:total});});this._pdfDataRangeTransport.addProgressiveReadListener(function(chunk){_this._onReceiveData({chunk:chunk});});this._pdfDataRangeTransport.addProgressiveDoneListener(function(){_this._onProgressiveDone();});this._pdfDataRangeTransport.transportReady();}_createClass(PDFDataTransportStream,[{key:"_onReceiveData",value:function _onReceiveData(_ref2){var begin=_ref2.begin,chunk=_ref2.chunk;var buffer=chunk instanceof Uint8Array&&chunk.byteLength===chunk.buffer.byteLength?chunk.buffer:new Uint8Array(chunk).buffer;if(begin===undefined){if(this._fullRequestReader){this._fullRequestReader._enqueue(buffer);}else{this._queuedChunks.push(buffer);}}else{var found=this._rangeReaders.some(function(rangeReader){if(rangeReader._begin!==begin){return false;}rangeReader._enqueue(buffer);return true;});(0,_util.assert)(found,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.");}}},{key:"_progressiveDataLength",get:function get(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0;}},{key:"_onProgress",value:function _onProgress(evt){if(evt.total===undefined){var _this$_rangeReaders$,_this$_rangeReaders$$;(_this$_rangeReaders$=this._rangeReaders[0])===null||_this$_rangeReaders$===void 0?void 0:(_this$_rangeReaders$$=_this$_rangeReaders$.onProgress)===null||_this$_rangeReaders$$===void 0?void 0:_this$_rangeReaders$$.call(_this$_rangeReaders$,{loaded:evt.loaded});}else{var _this$_fullRequestRea3,_this$_fullRequestRea4;(_this$_fullRequestRea3=this._fullRequestReader)===null||_this$_fullRequestRea3===void 0?void 0:(_this$_fullRequestRea4=_this$_fullRequestRea3.onProgress)===null||_this$_fullRequestRea4===void 0?void 0:_this$_fullRequestRea4.call(_this$_fullRequestRea3,{loaded:evt.loaded,total:evt.total});}}},{key:"_onProgressiveDone",value:function _onProgressiveDone(){var _this$_fullRequestRea5;(_this$_fullRequestRea5=this._fullRequestReader)===null||_this$_fullRequestRea5===void 0?void 0:_this$_fullRequestRea5.progressiveDone();this._progressiveDone=true;}},{key:"_removeRangeReader",value:function _removeRangeReader(reader){var i=this._rangeReaders.indexOf(reader);if(i>=0){this._rangeReaders.splice(i,1);}}},{key:"getFullReader",value:function getFullReader(){(0,_util.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var queuedChunks=this._queuedChunks;this._queuedChunks=null;return new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone,this._contentDispositionFilename);}},{key:"getRangeReader",value:function getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}var reader=new PDFDataTransportStreamRangeReader(this,begin,end);this._pdfDataRangeTransport.requestDataRange(begin,end);this._rangeReaders.push(reader);return reader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea6;(_this$_fullRequestRea6=this._fullRequestReader)===null||_this$_fullRequestRea6===void 0?void 0:_this$_fullRequestRea6.cancel(reason);var _iterator=_createForOfIteratorHelper(this._rangeReaders.slice(0)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var reader=_step.value;reader.cancel(reason);}}catch(err){_iterator.e(err);}finally{_iterator.f();}this._pdfDataRangeTransport.abort();}}]);return PDFDataTransportStream;}();exports.PDFDataTransportStream=PDFDataTransportStream;var PDFDataTransportStreamReader=/*#__PURE__*/function(){function PDFDataTransportStreamReader(stream,queuedChunks){var progressiveDone=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var contentDispositionFilename=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;_classCallCheck(this,PDFDataTransportStreamReader);this._stream=stream;this._done=progressiveDone||false;this._filename=(0,_display_utils.isPdfFile)(contentDispositionFilename)?contentDispositionFilename:null;this._queuedChunks=queuedChunks||[];this._loaded=0;var _iterator2=_createForOfIteratorHelper(this._queuedChunks),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var chunk=_step2.value;this._loaded+=chunk.byteLength;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this._requests=[];this._headersReady=Promise.resolve();stream._fullRequestReader=this;this.onProgress=null;}_createClass(PDFDataTransportStreamReader,[{key:"_enqueue",value:function _enqueue(chunk){if(this._done){return;}if(this._requests.length>0){var requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunks.push(chunk);}this._loaded+=chunk.byteLength;}},{key:"headersReady",get:function get(){return this._headersReady;}},{key:"filename",get:function get(){return this._filename;}},{key:"isRangeSupported",get:function get(){return this._stream._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._stream._isStreamingSupported;}},{key:"contentLength",get:function get(){return this._stream._contentLength;}},{key:"read",value:function(){var _read=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var chunk,requestCapability;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(this._queuedChunks.length>0)){_context.next=3;break;}chunk=this._queuedChunks.shift();return _context.abrupt("return",{value:chunk,done:false});case 3:if(!this._done){_context.next=5;break;}return _context.abrupt("return",{value:undefined,done:true});case 5:requestCapability=(0,_util.createPromiseCapability)();this._requests.push(requestCapability);return _context.abrupt("return",requestCapability.promise);case 8:case"end":return _context.stop();}},_callee,this);}));function read(){return _read.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;var _iterator3=_createForOfIteratorHelper(this._requests),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var requestCapability=_step3.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}this._requests.length=0;}},{key:"progressiveDone",value:function progressiveDone(){if(this._done){return;}this._done=true;}}]);return PDFDataTransportStreamReader;}();var PDFDataTransportStreamRangeReader=/*#__PURE__*/function(){function PDFDataTransportStreamRangeReader(stream,begin,end){_classCallCheck(this,PDFDataTransportStreamRangeReader);this._stream=stream;this._begin=begin;this._end=end;this._queuedChunk=null;this._requests=[];this._done=false;this.onProgress=null;}_createClass(PDFDataTransportStreamRangeReader,[{key:"_enqueue",value:function _enqueue(chunk){if(this._done){return;}if(this._requests.length===0){this._queuedChunk=chunk;}else{var requestsCapability=this._requests.shift();requestsCapability.resolve({value:chunk,done:false});var _iterator4=_createForOfIteratorHelper(this._requests),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var requestCapability=_step4.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}this._requests.length=0;}this._done=true;this._stream._removeRangeReader(this);}},{key:"isStreamingSupported",get:function get(){return false;}},{key:"read",value:function(){var _read2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var chunk,requestCapability;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!this._queuedChunk){_context2.next=4;break;}chunk=this._queuedChunk;this._queuedChunk=null;return _context2.abrupt("return",{value:chunk,done:false});case 4:if(!this._done){_context2.next=6;break;}return _context2.abrupt("return",{value:undefined,done:true});case 6:requestCapability=(0,_util.createPromiseCapability)();this._requests.push(requestCapability);return _context2.abrupt("return",requestCapability.promise);case 9:case"end":return _context2.stop();}},_callee2,this);}));function read(){return _read2.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;var _iterator5=_createForOfIteratorHelper(this._requests),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var requestCapability=_step5.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}this._requests.length=0;this._stream._removeRangeReader(this);}}]);return PDFDataTransportStreamRangeReader;}();

/***/ }),
/* 154 */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.XfaText=void 0;function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var XfaText=/*#__PURE__*/function(){function XfaText(){_classCallCheck(this,XfaText);}_createClass(XfaText,null,[{key:"textContent",value:function textContent(xfa){var items=[];var output={items:items,styles:Object.create(null)};function walk(node){var _node$attributes;if(!node){return;}var str=null;var name=node.name;if(name==="#text"){str=node.value;}else if(!XfaText.shouldBuildText(name)){return;}else if(node!==null&&node!==void 0&&(_node$attributes=node.attributes)!==null&&_node$attributes!==void 0&&_node$attributes.textContent){str=node.attributes.textContent;}else if(node.value){str=node.value;}if(str!==null){items.push({str:str});}if(!node.children){return;}var _iterator=_createForOfIteratorHelper(node.children),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;walk(child);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}walk(xfa);return output;}},{key:"shouldBuildText",value:function shouldBuildText(name){return!(name==="textarea"||name==="input"||name==="option"||name==="select");}}]);return XfaText;}();exports.XfaText=XfaText;

/***/ }),
/* 155 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}Object.defineProperty(exports, "__esModule", ({value:true}));exports.NodeStandardFontDataFactory=exports.NodeFilterFactory=exports.NodeCanvasFactory=exports.NodeCMapReaderFactory=void 0;var _base_factory=__w_pdfjs_require__(142);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);};var fetchData=function fetchData(url){return new Promise(function(resolve,reject){var fs=require("fs");fs.readFile(url,function(error,data){if(error||!data){reject(new Error(error));return;}resolve(new Uint8Array(data));});});};var NodeFilterFactory=/*#__PURE__*/function(_BaseFilterFactory){_inherits(NodeFilterFactory,_BaseFilterFactory);var _super=_createSuper(NodeFilterFactory);function NodeFilterFactory(){_classCallCheck(this,NodeFilterFactory);return _super.apply(this,arguments);}return _createClass(NodeFilterFactory);}(_base_factory.BaseFilterFactory);exports.NodeFilterFactory=NodeFilterFactory;var NodeCanvasFactory=/*#__PURE__*/function(_BaseCanvasFactory){_inherits(NodeCanvasFactory,_BaseCanvasFactory);var _super2=_createSuper(NodeCanvasFactory);function NodeCanvasFactory(){_classCallCheck(this,NodeCanvasFactory);return _super2.apply(this,arguments);}_createClass(NodeCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(width,height){var Canvas=require("canvas");return Canvas.createCanvas(width,height);}}]);return NodeCanvasFactory;}(_base_factory.BaseCanvasFactory);exports.NodeCanvasFactory=NodeCanvasFactory;var NodeCMapReaderFactory=/*#__PURE__*/function(_BaseCMapReaderFactor){_inherits(NodeCMapReaderFactory,_BaseCMapReaderFactor);var _super3=_createSuper(NodeCMapReaderFactory);function NodeCMapReaderFactory(){_classCallCheck(this,NodeCMapReaderFactory);return _super3.apply(this,arguments);}_createClass(NodeCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(url,compressionType){return fetchData(url).then(function(data){return{cMapData:data,compressionType:compressionType};});}}]);return NodeCMapReaderFactory;}(_base_factory.BaseCMapReaderFactory);exports.NodeCMapReaderFactory=NodeCMapReaderFactory;var NodeStandardFontDataFactory=/*#__PURE__*/function(_BaseStandardFontData){_inherits(NodeStandardFontDataFactory,_BaseStandardFontData);var _super4=_createSuper(NodeStandardFontDataFactory);function NodeStandardFontDataFactory(){_classCallCheck(this,NodeStandardFontDataFactory);return _super4.apply(this,arguments);}_createClass(NodeStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(url){return fetchData(url);}}]);return NodeStandardFontDataFactory;}(_base_factory.BaseStandardFontDataFactory);exports.NodeStandardFontDataFactory=NodeStandardFontDataFactory;

/***/ }),
/* 156 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.PDFNodeStream=void 0;var _util=__w_pdfjs_require__(1);var _network_utils=__w_pdfjs_require__(157);function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},"");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg);}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,"toString",function(){return"[object Generator]";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);};var fs=require("fs");var http=require("http");var https=require("https");var url=require("url");var fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//;function parseUrl(sourceUrl){var parsedUrl=url.parse(sourceUrl);if(parsedUrl.protocol==="file:"||parsedUrl.host){return parsedUrl;}if(/^[a-z]:[/\\]/i.test(sourceUrl)){return url.parse("file:///".concat(sourceUrl));}if(!parsedUrl.host){parsedUrl.protocol="file:";}return parsedUrl;}var PDFNodeStream=/*#__PURE__*/function(){function PDFNodeStream(source){_classCallCheck(this,PDFNodeStream);this.source=source;this.url=parseUrl(source.url);this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:"||this.url.protocol==="capacitor:";this.isFsUrl=this.url.protocol==="file:";this.httpHeaders=this.isHttp&&source.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[];}_createClass(PDFNodeStream,[{key:"_progressiveDataLength",get:function get(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0;}},{key:"getFullReader",value:function getFullReader(){(0,_util.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once.");this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this);return this._fullRequestReader;}},{key:"getRangeReader",value:function getRangeReader(start,end){if(end<=this._progressiveDataLength){return null;}var rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start,end):new PDFNodeStreamRangeReader(this,start,end);this._rangeRequestReaders.push(rangeReader);return rangeReader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea3;(_this$_fullRequestRea3=this._fullRequestReader)===null||_this$_fullRequestRea3===void 0?void 0:_this$_fullRequestRea3.cancel(reason);var _iterator=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var reader=_step.value;reader.cancel(reason);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}]);return PDFNodeStream;}();exports.PDFNodeStream=PDFNodeStream;var BaseFullReader=/*#__PURE__*/function(){function BaseFullReader(stream){_classCallCheck(this,BaseFullReader);this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;var source=stream.source;this._contentLength=source.length;this._loaded=0;this._filename=null;this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;this._readableStream=null;this._readCapability=(0,_util.createPromiseCapability)();this._headersCapability=(0,_util.createPromiseCapability)();}_createClass(BaseFullReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise;}},{key:"filename",get:function get(){return this._filename;}},{key:"contentLength",get:function get(){return this._contentLength;}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _this$onProgress;var chunk,buffer;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return this._readCapability.promise;case 2:if(!this._done){_context.next=4;break;}return _context.abrupt("return",{value:undefined,done:true});case 4:if(!this._storedError){_context.next=6;break;}throw this._storedError;case 6:chunk=this._readableStream.read();if(!(chunk===null)){_context.next=10;break;}this._readCapability=(0,_util.createPromiseCapability)();return _context.abrupt("return",this.read());case 10:this._loaded+=chunk.length;(_this$onProgress=this.onProgress)===null||_this$onProgress===void 0?void 0:_this$onProgress.call(this,{loaded:this._loaded,total:this._contentLength});buffer=new Uint8Array(chunk).buffer;return _context.abrupt("return",{value:buffer,done:false});case 14:case"end":return _context.stop();}},_callee,this);}));function read(){return _read.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}},{key:"_error",value:function _error(reason){this._storedError=reason;this._readCapability.resolve();}},{key:"_setReadableStream",value:function _setReadableStream(readableStream){var _this=this;this._readableStream=readableStream;readableStream.on("readable",function(){_this._readCapability.resolve();});readableStream.on("end",function(){readableStream.destroy();_this._done=true;_this._readCapability.resolve();});readableStream.on("error",function(reason){_this._error(reason);});if(!this._isStreamingSupported&&this._isRangeSupported){this._error(new _util.AbortException("streaming is disabled"));}if(this._storedError){this._readableStream.destroy(this._storedError);}}}]);return BaseFullReader;}();var BaseRangeReader=/*#__PURE__*/function(){function BaseRangeReader(stream){_classCallCheck(this,BaseRangeReader);this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=(0,_util.createPromiseCapability)();var source=stream.source;this._isStreamingSupported=!source.disableStream;}_createClass(BaseRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _this$onProgress2;var chunk,buffer;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this._readCapability.promise;case 2:if(!this._done){_context2.next=4;break;}return _context2.abrupt("return",{value:undefined,done:true});case 4:if(!this._storedError){_context2.next=6;break;}throw this._storedError;case 6:chunk=this._readableStream.read();if(!(chunk===null)){_context2.next=10;break;}this._readCapability=(0,_util.createPromiseCapability)();return _context2.abrupt("return",this.read());case 10:this._loaded+=chunk.length;(_this$onProgress2=this.onProgress)===null||_this$onProgress2===void 0?void 0:_this$onProgress2.call(this,{loaded:this._loaded});buffer=new Uint8Array(chunk).buffer;return _context2.abrupt("return",{value:buffer,done:false});case 14:case"end":return _context2.stop();}},_callee2,this);}));function read(){return _read2.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}},{key:"_error",value:function _error(reason){this._storedError=reason;this._readCapability.resolve();}},{key:"_setReadableStream",value:function _setReadableStream(readableStream){var _this2=this;this._readableStream=readableStream;readableStream.on("readable",function(){_this2._readCapability.resolve();});readableStream.on("end",function(){readableStream.destroy();_this2._done=true;_this2._readCapability.resolve();});readableStream.on("error",function(reason){_this2._error(reason);});if(this._storedError){this._readableStream.destroy(this._storedError);}}}]);return BaseRangeReader;}();function createRequestOptions(parsedUrl,headers){return{protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.hostname,port:parsedUrl.port,path:parsedUrl.path,method:"GET",headers:headers};}var PDFNodeStreamFullReader=/*#__PURE__*/function(_BaseFullReader){_inherits(PDFNodeStreamFullReader,_BaseFullReader);var _super=_createSuper(PDFNodeStreamFullReader);function PDFNodeStreamFullReader(stream){var _this3;_classCallCheck(this,PDFNodeStreamFullReader);_this3=_super.call(this,stream);var handleResponse=function handleResponse(response){if(response.statusCode===404){var error=new _util.MissingPDFException("Missing PDF \"".concat(_this3._url,"\"."));_this3._storedError=error;_this3._headersCapability.reject(error);return;}_this3._headersCapability.resolve();_this3._setReadableStream(response);var getResponseHeader=function getResponseHeader(name){return _this3._readableStream.headers[name.toLowerCase()];};var _validateRangeRequest=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:_this3._rangeChunkSize,disableRange:_this3._disableRange}),allowRangeRequests=_validateRangeRequest.allowRangeRequests,suggestedLength=_validateRangeRequest.suggestedLength;_this3._isRangeSupported=allowRangeRequests;_this3._contentLength=suggestedLength||_this3._contentLength;_this3._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader);};_this3._request=null;if(_this3._url.protocol==="http:"){_this3._request=http.request(createRequestOptions(_this3._url,stream.httpHeaders),handleResponse);}else{_this3._request=https.request(createRequestOptions(_this3._url,stream.httpHeaders),handleResponse);}_this3._request.on("error",function(reason){_this3._storedError=reason;_this3._headersCapability.reject(reason);});_this3._request.end();return _this3;}return _createClass(PDFNodeStreamFullReader);}(BaseFullReader);var PDFNodeStreamRangeReader=/*#__PURE__*/function(_BaseRangeReader){_inherits(PDFNodeStreamRangeReader,_BaseRangeReader);var _super2=_createSuper(PDFNodeStreamRangeReader);function PDFNodeStreamRangeReader(stream,start,end){var _this4;_classCallCheck(this,PDFNodeStreamRangeReader);_this4=_super2.call(this,stream);_this4._httpHeaders={};for(var property in stream.httpHeaders){var value=stream.httpHeaders[property];if(value===undefined){continue;}_this4._httpHeaders[property]=value;}_this4._httpHeaders.Range="bytes=".concat(start,"-").concat(end-1);var handleResponse=function handleResponse(response){if(response.statusCode===404){var error=new _util.MissingPDFException("Missing PDF \"".concat(_this4._url,"\"."));_this4._storedError=error;return;}_this4._setReadableStream(response);};_this4._request=null;if(_this4._url.protocol==="http:"){_this4._request=http.request(createRequestOptions(_this4._url,_this4._httpHeaders),handleResponse);}else{_this4._request=https.request(createRequestOptions(_this4._url,_this4._httpHeaders),handleResponse);}_this4._request.on("error",function(reason){_this4._storedError=reason;});_this4._request.end();return _this4;}return _createClass(PDFNodeStreamRangeReader);}(BaseRangeReader);var PDFNodeStreamFsFullReader=/*#__PURE__*/function(_BaseFullReader2){_inherits(PDFNodeStreamFsFullReader,_BaseFullReader2);var _super3=_createSuper(PDFNodeStreamFsFullReader);function PDFNodeStreamFsFullReader(stream){var _this5;_classCallCheck(this,PDFNodeStreamFsFullReader);_this5=_super3.call(this,stream);var path=decodeURIComponent(_this5._url.path);if(fileUriRegex.test(_this5._url.href)){path=path.replace(/^\//,"");}fs.lstat(path,function(error,stat){if(error){if(error.code==="ENOENT"){error=new _util.MissingPDFException("Missing PDF \"".concat(path,"\"."));}_this5._storedError=error;_this5._headersCapability.reject(error);return;}_this5._contentLength=stat.size;_this5._setReadableStream(fs.createReadStream(path));_this5._headersCapability.resolve();});return _this5;}return _createClass(PDFNodeStreamFsFullReader);}(BaseFullReader);var PDFNodeStreamFsRangeReader=/*#__PURE__*/function(_BaseRangeReader2){_inherits(PDFNodeStreamFsRangeReader,_BaseRangeReader2);var _super4=_createSuper(PDFNodeStreamFsRangeReader);function PDFNodeStreamFsRangeReader(stream,start,end){var _this6;_classCallCheck(this,PDFNodeStreamFsRangeReader);_this6=_super4.call(this,stream);var path=decodeURIComponent(_this6._url.path);if(fileUriRegex.test(_this6._url.href)){path=path.replace(/^\//,"");}_this6._setReadableStream(fs.createReadStream(path,{start:start,end:end-1}));return _this6;}return _createClass(PDFNodeStreamFsRangeReader);}(BaseRangeReader);

/***/ }),
/* 157 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.createResponseStatusError=createResponseStatusError;exports.extractFilenameFromHeader=extractFilenameFromHeader;exports.validateRangeRequestCapabilities=validateRangeRequestCapabilities;exports.validateResponseStatus=validateResponseStatus;var _util=__w_pdfjs_require__(1);var _content_disposition=__w_pdfjs_require__(158);var _display_utils=__w_pdfjs_require__(141);function validateRangeRequestCapabilities(_ref){var getResponseHeader=_ref.getResponseHeader,isHttp=_ref.isHttp,rangeChunkSize=_ref.rangeChunkSize,disableRange=_ref.disableRange;var returnValues={allowRangeRequests:false,suggestedLength:undefined};var length=parseInt(getResponseHeader("Content-Length"),10);if(!Number.isInteger(length)){return returnValues;}returnValues.suggestedLength=length;if(length<=2*rangeChunkSize){return returnValues;}if(disableRange||!isHttp){return returnValues;}if(getResponseHeader("Accept-Ranges")!=="bytes"){return returnValues;}var contentEncoding=getResponseHeader("Content-Encoding")||"identity";if(contentEncoding!=="identity"){return returnValues;}returnValues.allowRangeRequests=true;return returnValues;}function extractFilenameFromHeader(getResponseHeader){var contentDisposition=getResponseHeader("Content-Disposition");if(contentDisposition){var filename=(0,_content_disposition.getFilenameFromContentDispositionHeader)(contentDisposition);if(filename.includes("%")){try{filename=decodeURIComponent(filename);}catch(ex){}}if((0,_display_utils.isPdfFile)(filename)){return filename;}}return null;}function createResponseStatusError(status,url){if(status===404||status===0&&url.startsWith("file:")){return new _util.MissingPDFException('Missing PDF "'+url+'".');}return new _util.UnexpectedResponseException("Unexpected server response (".concat(status,") while retrieving PDF \"").concat(url,"\"."),status);}function validateResponseStatus(status){return status===200||status===206;}

/***/ }),
/* 158 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.getFilenameFromContentDispositionHeader=getFilenameFromContentDispositionHeader;var _util=__w_pdfjs_require__(1);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function getFilenameFromContentDispositionHeader(contentDisposition){var needsEncodingFixup=true;var tmp=toParamRegExp("filename\\*","i").exec(contentDisposition);if(tmp){tmp=tmp[1];var filename=rfc2616unquote(tmp);filename=unescape(filename);filename=rfc5987decode(filename);filename=rfc2047decode(filename);return fixupEncoding(filename);}tmp=rfc2231getparam(contentDisposition);if(tmp){var _filename=rfc2047decode(tmp);return fixupEncoding(_filename);}tmp=toParamRegExp("filename","i").exec(contentDisposition);if(tmp){tmp=tmp[1];var _filename2=rfc2616unquote(tmp);_filename2=rfc2047decode(_filename2);return fixupEncoding(_filename2);}function toParamRegExp(attributePattern,flags){return new RegExp("(?:^|;)\\s*"+attributePattern+"\\s*=\\s*"+"("+'[^";\\s][^;\\s]*'+"|"+'"(?:[^"\\\\]|\\\\"?)+"?'+")",flags);}function textdecode(encoding,value){if(encoding){if(!/^[\x00-\xFF]+$/.test(value)){return value;}try{var decoder=new TextDecoder(encoding,{fatal:true});var buffer=(0,_util.stringToBytes)(value);value=decoder.decode(buffer);needsEncodingFixup=false;}catch(e){}}return value;}function fixupEncoding(value){if(needsEncodingFixup&&/[\x80-\xff]/.test(value)){value=textdecode("utf-8",value);if(needsEncodingFixup){value=textdecode("iso-8859-1",value);}}return value;}function rfc2231getparam(contentDispositionStr){var matches=[];var match;var iter=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");while((match=iter.exec(contentDispositionStr))!==null){var _match=match,_match2=_slicedToArray(_match,4),n=_match2[1],quot=_match2[2],part=_match2[3];n=parseInt(n,10);if(n in matches){if(n===0){break;}continue;}matches[n]=[quot,part];}var parts=[];for(var _n2=0;_n2<matches.length;++_n2){if(!(_n2 in matches)){break;}var _matches$_n=_slicedToArray(matches[_n2],2),_quot=_matches$_n[0],_part=_matches$_n[1];_part=rfc2616unquote(_part);if(_quot){_part=unescape(_part);if(_n2===0){_part=rfc5987decode(_part);}}parts.push(_part);}return parts.join("");}function rfc2616unquote(value){if(value.startsWith('"')){var parts=value.slice(1).split('\\"');for(var i=0;i<parts.length;++i){var quotindex=parts[i].indexOf('"');if(quotindex!==-1){parts[i]=parts[i].slice(0,quotindex);parts.length=i+1;}parts[i]=parts[i].replaceAll(/\\(.)/g,"$1");}value=parts.join('"');}return value;}function rfc5987decode(extvalue){var encodingend=extvalue.indexOf("'");if(encodingend===-1){return extvalue;}var encoding=extvalue.slice(0,encodingend);var langvalue=extvalue.slice(encodingend+1);var value=langvalue.replace(/^[^']*'/,"");return textdecode(encoding,value);}function rfc2047decode(value){if(!value.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(value)){return value;}return value.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(matches,charset,encoding,text){if(encoding==="q"||encoding==="Q"){text=text.replaceAll("_"," ");text=text.replaceAll(/=([0-9a-fA-F]{2})/g,function(match,hex){return String.fromCharCode(parseInt(hex,16));});return textdecode(charset,text);}try{text=atob(text);}catch(e){}return textdecode(charset,text);});}return"";}

/***/ }),
/* 159 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.PDFNetworkStream=void 0;var _util=__w_pdfjs_require__(1);var _network_utils=__w_pdfjs_require__(157);function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},"");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg);}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,"toString",function(){return"[object Generator]";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);};var OK_RESPONSE=200;var PARTIAL_CONTENT_RESPONSE=206;function getArrayBuffer(xhr){var data=xhr.response;if(typeof data!=="string"){return data;}return(0,_util.stringToBytes)(data).buffer;}var NetworkManager=/*#__PURE__*/function(){function NetworkManager(url){var args=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,NetworkManager);this.url=url;this.isHttp=/^https?:/i.test(url);this.httpHeaders=this.isHttp&&args.httpHeaders||Object.create(null);this.withCredentials=args.withCredentials||false;this.getXhr=args.getXhr||function NetworkManager_getXhr(){return new XMLHttpRequest();};this.currXhrId=0;this.pendingRequests=Object.create(null);}_createClass(NetworkManager,[{key:"requestRange",value:function requestRange(begin,end,listeners){var args={begin:begin,end:end};for(var prop in listeners){args[prop]=listeners[prop];}return this.request(args);}},{key:"requestFull",value:function requestFull(listeners){return this.request(listeners);}},{key:"request",value:function request(args){var xhr=this.getXhr();var xhrId=this.currXhrId++;var pendingRequest=this.pendingRequests[xhrId]={xhr:xhr};xhr.open("GET",this.url);xhr.withCredentials=this.withCredentials;for(var property in this.httpHeaders){var value=this.httpHeaders[property];if(value===undefined){continue;}xhr.setRequestHeader(property,value);}if(this.isHttp&&"begin"in args&&"end"in args){xhr.setRequestHeader("Range","bytes=".concat(args.begin,"-").concat(args.end-1));pendingRequest.expectedStatus=PARTIAL_CONTENT_RESPONSE;}else{pendingRequest.expectedStatus=OK_RESPONSE;}xhr.responseType="arraybuffer";if(args.onError){xhr.onerror=function(evt){args.onError(xhr.status);};}xhr.onreadystatechange=this.onStateChange.bind(this,xhrId);xhr.onprogress=this.onProgress.bind(this,xhrId);pendingRequest.onHeadersReceived=args.onHeadersReceived;pendingRequest.onDone=args.onDone;pendingRequest.onError=args.onError;pendingRequest.onProgress=args.onProgress;xhr.send(null);return xhrId;}},{key:"onProgress",value:function onProgress(xhrId,evt){var _pendingRequest$onPro;var pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}(_pendingRequest$onPro=pendingRequest.onProgress)===null||_pendingRequest$onPro===void 0?void 0:_pendingRequest$onPro.call(pendingRequest,evt);}},{key:"onStateChange",value:function onStateChange(xhrId,evt){var pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}var xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived){pendingRequest.onHeadersReceived();delete pendingRequest.onHeadersReceived;}if(xhr.readyState!==4){return;}if(!(xhrId in this.pendingRequests)){return;}delete this.pendingRequests[xhrId];if(xhr.status===0&&this.isHttp){var _pendingRequest$onErr;(_pendingRequest$onErr=pendingRequest.onError)===null||_pendingRequest$onErr===void 0?void 0:_pendingRequest$onErr.call(pendingRequest,xhr.status);return;}var xhrStatus=xhr.status||OK_RESPONSE;var ok_response_on_range_request=xhrStatus===OK_RESPONSE&&pendingRequest.expectedStatus===PARTIAL_CONTENT_RESPONSE;if(!ok_response_on_range_request&&xhrStatus!==pendingRequest.expectedStatus){var _pendingRequest$onErr2;(_pendingRequest$onErr2=pendingRequest.onError)===null||_pendingRequest$onErr2===void 0?void 0:_pendingRequest$onErr2.call(pendingRequest,xhr.status);return;}var chunk=getArrayBuffer(xhr);if(xhrStatus===PARTIAL_CONTENT_RESPONSE){var rangeHeader=xhr.getResponseHeader("Content-Range");var matches=/bytes (\d+)-(\d+)\/(\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk:chunk});}else if(chunk){pendingRequest.onDone({begin:0,chunk:chunk});}else{var _pendingRequest$onErr3;(_pendingRequest$onErr3=pendingRequest.onError)===null||_pendingRequest$onErr3===void 0?void 0:_pendingRequest$onErr3.call(pendingRequest,xhr.status);}}},{key:"getRequestXhr",value:function getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr;}},{key:"isPendingRequest",value:function isPendingRequest(xhrId){return xhrId in this.pendingRequests;}},{key:"abortRequest",value:function abortRequest(xhrId){var xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId];xhr.abort();}}]);return NetworkManager;}();var PDFNetworkStream=/*#__PURE__*/function(){function PDFNetworkStream(source){_classCallCheck(this,PDFNetworkStream);this._source=source;this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials});this._rangeChunkSize=source.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[];}_createClass(PDFNetworkStream,[{key:"_onRangeRequestReaderClosed",value:function _onRangeRequestReaderClosed(reader){var i=this._rangeRequestReaders.indexOf(reader);if(i>=0){this._rangeRequestReaders.splice(i,1);}}},{key:"getFullReader",value:function getFullReader(){(0,_util.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once.");this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source);return this._fullRequestReader;}},{key:"getRangeReader",value:function getRangeReader(begin,end){var reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);reader.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(reader);return reader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea;(_this$_fullRequestRea=this._fullRequestReader)===null||_this$_fullRequestRea===void 0?void 0:_this$_fullRequestRea.cancel(reason);var _iterator=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var reader=_step.value;reader.cancel(reason);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}]);return PDFNetworkStream;}();exports.PDFNetworkStream=PDFNetworkStream;var PDFNetworkStreamFullRequestReader=/*#__PURE__*/function(){function PDFNetworkStreamFullRequestReader(manager,source){_classCallCheck(this,PDFNetworkStreamFullRequestReader);this._manager=manager;var args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url;this._fullRequestId=manager.requestFull(args);this._headersReceivedCapability=(0,_util.createPromiseCapability)();this._disableRange=source.disableRange||false;this._contentLength=source.length;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=false;this._isRangeSupported=false;this._cachedChunks=[];this._requests=[];this._done=false;this._storedError=undefined;this._filename=null;this.onProgress=null;}_createClass(PDFNetworkStreamFullRequestReader,[{key:"_onHeadersReceived",value:function _onHeadersReceived(){var fullRequestXhrId=this._fullRequestId;var fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId);var getResponseHeader=function getResponseHeader(name){return fullRequestXhr.getResponseHeader(name);};var _validateRangeRequest=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),allowRangeRequests=_validateRangeRequest.allowRangeRequests,suggestedLength=_validateRangeRequest.suggestedLength;if(allowRangeRequests){this._isRangeSupported=true;}this._contentLength=suggestedLength||this._contentLength;this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader);if(this._isRangeSupported){this._manager.abortRequest(fullRequestXhrId);}this._headersReceivedCapability.resolve();}},{key:"_onDone",value:function _onDone(data){if(data){if(this._requests.length>0){var requestCapability=this._requests.shift();requestCapability.resolve({value:data.chunk,done:false});}else{this._cachedChunks.push(data.chunk);}}this._done=true;if(this._cachedChunks.length>0){return;}var _iterator2=_createForOfIteratorHelper(this._requests),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _requestCapability=_step2.value;_requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this._requests.length=0;}},{key:"_onError",value:function _onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url);this._headersReceivedCapability.reject(this._storedError);var _iterator3=_createForOfIteratorHelper(this._requests),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var requestCapability=_step3.value;requestCapability.reject(this._storedError);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}this._requests.length=0;this._cachedChunks.length=0;}},{key:"_onProgress",value:function _onProgress(evt){var _this$onProgress;(_this$onProgress=this.onProgress)===null||_this$onProgress===void 0?void 0:_this$onProgress.call(this,{loaded:evt.loaded,total:evt.lengthComputable?evt.total:this._contentLength});}},{key:"filename",get:function get(){return this._filename;}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"contentLength",get:function get(){return this._contentLength;}},{key:"headersReady",get:function get(){return this._headersReceivedCapability.promise;}},{key:"read",value:function(){var _read=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var chunk,requestCapability;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!this._storedError){_context.next=2;break;}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){_context.next=5;break;}chunk=this._cachedChunks.shift();return _context.abrupt("return",{value:chunk,done:false});case 5:if(!this._done){_context.next=7;break;}return _context.abrupt("return",{value:undefined,done:true});case 7:requestCapability=(0,_util.createPromiseCapability)();this._requests.push(requestCapability);return _context.abrupt("return",requestCapability.promise);case 10:case"end":return _context.stop();}},_callee,this);}));function read(){return _read.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;this._headersReceivedCapability.reject(reason);var _iterator4=_createForOfIteratorHelper(this._requests),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var requestCapability=_step4.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}this._requests.length=0;if(this._manager.isPendingRequest(this._fullRequestId)){this._manager.abortRequest(this._fullRequestId);}this._fullRequestReader=null;}}]);return PDFNetworkStreamFullRequestReader;}();var PDFNetworkStreamRangeRequestReader=/*#__PURE__*/function(){function PDFNetworkStreamRangeRequestReader(manager,begin,end){_classCallCheck(this,PDFNetworkStreamRangeRequestReader);this._manager=manager;var args={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=manager.url;this._requestId=manager.requestRange(begin,end,args);this._requests=[];this._queuedChunk=null;this._done=false;this._storedError=undefined;this.onProgress=null;this.onClosed=null;}_createClass(PDFNetworkStreamRangeRequestReader,[{key:"_close",value:function _close(){var _this$onClosed;(_this$onClosed=this.onClosed)===null||_this$onClosed===void 0?void 0:_this$onClosed.call(this,this);}},{key:"_onDone",value:function _onDone(data){var chunk=data.chunk;if(this._requests.length>0){var requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunk=chunk;}this._done=true;var _iterator5=_createForOfIteratorHelper(this._requests),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _requestCapability2=_step5.value;_requestCapability2.resolve({value:undefined,done:true});}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}this._requests.length=0;this._close();}},{key:"_onError",value:function _onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url);var _iterator6=_createForOfIteratorHelper(this._requests),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var requestCapability=_step6.value;requestCapability.reject(this._storedError);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}this._requests.length=0;this._queuedChunk=null;}},{key:"_onProgress",value:function _onProgress(evt){if(!this.isStreamingSupported){var _this$onProgress2;(_this$onProgress2=this.onProgress)===null||_this$onProgress2===void 0?void 0:_this$onProgress2.call(this,{loaded:evt.loaded});}}},{key:"isStreamingSupported",get:function get(){return false;}},{key:"read",value:function(){var _read2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var chunk,requestCapability;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!this._storedError){_context2.next=2;break;}throw this._storedError;case 2:if(!(this._queuedChunk!==null)){_context2.next=6;break;}chunk=this._queuedChunk;this._queuedChunk=null;return _context2.abrupt("return",{value:chunk,done:false});case 6:if(!this._done){_context2.next=8;break;}return _context2.abrupt("return",{value:undefined,done:true});case 8:requestCapability=(0,_util.createPromiseCapability)();this._requests.push(requestCapability);return _context2.abrupt("return",requestCapability.promise);case 11:case"end":return _context2.stop();}},_callee2,this);}));function read(){return _read2.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;var _iterator7=_createForOfIteratorHelper(this._requests),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var requestCapability=_step7.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}this._requests.length=0;if(this._manager.isPendingRequest(this._requestId)){this._manager.abortRequest(this._requestId);}this._close();}}]);return PDFNetworkStreamRangeRequestReader;}();

/***/ }),
/* 160 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.PDFFetchStream=void 0;var _util=__w_pdfjs_require__(1);var _network_utils=__w_pdfjs_require__(157);function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},"");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg);}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,"toString",function(){return"[object Generator]";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);};function createFetchOptions(headers,withCredentials,abortController){return{method:"GET",headers:headers,signal:abortController.signal,mode:"cors",credentials:withCredentials?"include":"same-origin",redirect:"follow"};}function createHeaders(httpHeaders){var headers=new Headers();for(var property in httpHeaders){var value=httpHeaders[property];if(value===undefined){continue;}headers.append(property,value);}return headers;}function getArrayBuffer(val){if(val instanceof Uint8Array){return val.buffer;}if(val instanceof ArrayBuffer){return val;}(0,_util.warn)("getArrayBuffer - unexpected data format: ".concat(val));return new Uint8Array(val).buffer;}var PDFFetchStream=/*#__PURE__*/function(){function PDFFetchStream(source){_classCallCheck(this,PDFFetchStream);this.source=source;this.isHttp=/^https?:/i.test(source.url);this.httpHeaders=this.isHttp&&source.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[];}_createClass(PDFFetchStream,[{key:"_progressiveDataLength",get:function get(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0;}},{key:"getFullReader",value:function getFullReader(){(0,_util.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once.");this._fullRequestReader=new PDFFetchStreamReader(this);return this._fullRequestReader;}},{key:"getRangeReader",value:function getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}var reader=new PDFFetchStreamRangeReader(this,begin,end);this._rangeRequestReaders.push(reader);return reader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea3;(_this$_fullRequestRea3=this._fullRequestReader)===null||_this$_fullRequestRea3===void 0?void 0:_this$_fullRequestRea3.cancel(reason);var _iterator=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var reader=_step.value;reader.cancel(reason);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}]);return PDFFetchStream;}();exports.PDFFetchStream=PDFFetchStream;var PDFFetchStreamReader=/*#__PURE__*/function(){function PDFFetchStreamReader(stream){var _this=this;_classCallCheck(this,PDFFetchStreamReader);this._stream=stream;this._reader=null;this._loaded=0;this._filename=null;var source=stream.source;this._withCredentials=source.withCredentials||false;this._contentLength=source.length;this._headersCapability=(0,_util.createPromiseCapability)();this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._abortController=new AbortController();this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;this._headers=createHeaders(this._stream.httpHeaders);var url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(function(response){if(!(0,_network_utils.validateResponseStatus)(response.status)){throw(0,_network_utils.createResponseStatusError)(response.status,url);}_this._reader=response.body.getReader();_this._headersCapability.resolve();var getResponseHeader=function getResponseHeader(name){return response.headers.get(name);};var _validateRangeRequest=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:_this._stream.isHttp,rangeChunkSize:_this._rangeChunkSize,disableRange:_this._disableRange}),allowRangeRequests=_validateRangeRequest.allowRangeRequests,suggestedLength=_validateRangeRequest.suggestedLength;_this._isRangeSupported=allowRangeRequests;_this._contentLength=suggestedLength||_this._contentLength;_this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader);if(!_this._isStreamingSupported&&_this._isRangeSupported){_this.cancel(new _util.AbortException("Streaming is disabled."));}}).catch(this._headersCapability.reject);this.onProgress=null;}_createClass(PDFFetchStreamReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise;}},{key:"filename",get:function get(){return this._filename;}},{key:"contentLength",get:function get(){return this._contentLength;}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _this$onProgress;var _yield$this$_reader$r,value,done;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return this._headersCapability.promise;case 2:_context.next=4;return this._reader.read();case 4:_yield$this$_reader$r=_context.sent;value=_yield$this$_reader$r.value;done=_yield$this$_reader$r.done;if(!done){_context.next=9;break;}return _context.abrupt("return",{value:value,done:done});case 9:this._loaded+=value.byteLength;(_this$onProgress=this.onProgress)===null||_this$onProgress===void 0?void 0:_this$onProgress.call(this,{loaded:this._loaded,total:this._contentLength});return _context.abrupt("return",{value:getArrayBuffer(value),done:false});case 12:case"end":return _context.stop();}},_callee,this);}));function read(){return _read.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){var _this$_reader;(_this$_reader=this._reader)===null||_this$_reader===void 0?void 0:_this$_reader.cancel(reason);this._abortController.abort();}}]);return PDFFetchStreamReader;}();var PDFFetchStreamRangeReader=/*#__PURE__*/function(){function PDFFetchStreamRangeReader(stream,begin,end){var _this2=this;_classCallCheck(this,PDFFetchStreamRangeReader);this._stream=stream;this._reader=null;this._loaded=0;var source=stream.source;this._withCredentials=source.withCredentials||false;this._readCapability=(0,_util.createPromiseCapability)();this._isStreamingSupported=!source.disableStream;this._abortController=new AbortController();this._headers=createHeaders(this._stream.httpHeaders);this._headers.append("Range","bytes=".concat(begin,"-").concat(end-1));var url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(function(response){if(!(0,_network_utils.validateResponseStatus)(response.status)){throw(0,_network_utils.createResponseStatusError)(response.status,url);}_this2._readCapability.resolve();_this2._reader=response.body.getReader();}).catch(this._readCapability.reject);this.onProgress=null;}_createClass(PDFFetchStreamRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _this$onProgress2;var _yield$this$_reader$r2,value,done;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this._readCapability.promise;case 2:_context2.next=4;return this._reader.read();case 4:_yield$this$_reader$r2=_context2.sent;value=_yield$this$_reader$r2.value;done=_yield$this$_reader$r2.done;if(!done){_context2.next=9;break;}return _context2.abrupt("return",{value:value,done:done});case 9:this._loaded+=value.byteLength;(_this$onProgress2=this.onProgress)===null||_this$onProgress2===void 0?void 0:_this$onProgress2.call(this,{loaded:this._loaded});return _context2.abrupt("return",{value:getArrayBuffer(value),done:false});case 12:case"end":return _context2.stop();}},_callee2,this);}));function read(){return _read2.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){var _this$_reader2;(_this$_reader2=this._reader)===null||_this$_reader2===void 0?void 0:_this$_reader2.cancel(reason);this._abortController.abort();}}]);return PDFFetchStreamRangeReader;}();

/***/ }),
/* 161 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}Object.defineProperty(exports, "__esModule", ({value:true}));exports.TextLayerRenderTask=void 0;exports.renderTextLayer=renderTextLayer;exports.updateTextLayer=updateTextLayer;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(141);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}var MAX_TEXT_DIVS_TO_RENDER=100000;var DEFAULT_FONT_SIZE=30;var DEFAULT_FONT_ASCENT=0.8;var ascentCache=new Map();function getCtx(size,isOffscreenCanvasSupported){var ctx;var options=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:true,alpha:false}:{alpha:false};if(isOffscreenCanvasSupported&&_util.FeatureTest.isOffscreenCanvasSupported){ctx=new OffscreenCanvas(size,size).getContext("2d",options);}else{var canvas=document.createElement("canvas");canvas.width=canvas.height=size;ctx=canvas.getContext("2d",options);}return ctx;}function getAscent(fontFamily,isOffscreenCanvasSupported){var cachedAscent=ascentCache.get(fontFamily);if(cachedAscent){return cachedAscent;}var ctx=getCtx(DEFAULT_FONT_SIZE,isOffscreenCanvasSupported);ctx.font="".concat(DEFAULT_FONT_SIZE,"px ").concat(fontFamily);var metrics=ctx.measureText("");var ascent=metrics===null||metrics===void 0?void 0:metrics.fontBoundingBoxAscent;var descent=Math.abs(metrics===null||metrics===void 0?void 0:metrics.fontBoundingBoxDescent);if(ascent){var ratio=ascent/(ascent+descent);ascentCache.set(fontFamily,ratio);ctx.canvas.width=ctx.canvas.height=0;return ratio;}ctx.strokeStyle="red";ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE);ctx.strokeText("g",0,0);var pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;descent=0;for(var i=pixels.length-1-3;i>=0;i-=4){if(pixels[i]>0){descent=Math.ceil(i/4/DEFAULT_FONT_SIZE);break;}}ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE);ctx.strokeText("A",0,DEFAULT_FONT_SIZE);pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;ascent=0;for(var _i=0,ii=pixels.length;_i<ii;_i+=4){if(pixels[_i]>0){ascent=DEFAULT_FONT_SIZE-Math.floor(_i/4/DEFAULT_FONT_SIZE);break;}}ctx.canvas.width=ctx.canvas.height=0;if(ascent){var _ratio=ascent/(ascent+descent);ascentCache.set(fontFamily,_ratio);return _ratio;}ascentCache.set(fontFamily,DEFAULT_FONT_ASCENT);return DEFAULT_FONT_ASCENT;}function appendText(task,geom,styles){var textDiv=document.createElement("span");var textDivProperties={angle:0,canvasWidth:0,hasText:geom.str!=="",hasEOL:geom.hasEOL,fontSize:0};task._textDivs.push(textDiv);var tx=_util.Util.transform(task._transform,geom.transform);var angle=Math.atan2(tx[1],tx[0]);var style=styles[geom.fontName];if(style.vertical){angle+=Math.PI/2;}var fontHeight=Math.hypot(tx[2],tx[3]);var fontAscent=fontHeight*getAscent(style.fontFamily,task._isOffscreenCanvasSupported);var left,top;if(angle===0){left=tx[4];top=tx[5]-fontAscent;}else{left=tx[4]+fontAscent*Math.sin(angle);top=tx[5]-fontAscent*Math.cos(angle);}var scaleFactorStr="calc(var(--scale-factor)*";var divStyle=textDiv.style;if(task._container===task._rootContainer){divStyle.left="".concat((100*left/task._pageWidth).toFixed(2),"%");divStyle.top="".concat((100*top/task._pageHeight).toFixed(2),"%");}else{divStyle.left="".concat(scaleFactorStr).concat(left.toFixed(2),"px)");divStyle.top="".concat(scaleFactorStr).concat(top.toFixed(2),"px)");}divStyle.fontSize="".concat(scaleFactorStr).concat(fontHeight.toFixed(2),"px)");divStyle.fontFamily=style.fontFamily;textDivProperties.fontSize=fontHeight;textDiv.setAttribute("role","presentation");textDiv.textContent=geom.str;textDiv.dir=geom.dir;if(task._fontInspectorEnabled){textDiv.dataset.fontName=geom.fontName;}if(angle!==0){textDivProperties.angle=angle*(180/Math.PI);}var shouldScaleText=false;if(geom.str.length>1){shouldScaleText=true;}else if(geom.str!==" "&&geom.transform[0]!==geom.transform[3]){var absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);if(absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5){shouldScaleText=true;}}if(shouldScaleText){textDivProperties.canvasWidth=style.vertical?geom.height:geom.width;}task._textDivProperties.set(textDiv,textDivProperties);if(task._isReadableStream){task._layoutText(textDiv);}}function layout(params){var div=params.div,scale=params.scale,properties=params.properties,ctx=params.ctx,prevFontSize=params.prevFontSize,prevFontFamily=params.prevFontFamily;var style=div.style;var transform="";if(properties.canvasWidth!==0&&properties.hasText){var fontFamily=style.fontFamily;var canvasWidth=properties.canvasWidth,fontSize=properties.fontSize;if(prevFontSize!==fontSize||prevFontFamily!==fontFamily){ctx.font="".concat(fontSize*scale,"px ").concat(fontFamily);params.prevFontSize=fontSize;params.prevFontFamily=fontFamily;}try{var _ctx$measureText=ctx.measureText(div.textContent),width=_ctx$measureText.width;if(width>0){transform="scaleX(".concat(canvasWidth*scale/width,")");}}catch(fingerprintIsBlockedException){}}if(properties.angle!==0){transform="rotate(".concat(properties.angle,"deg) ").concat(transform);}if(transform.length>0){style.transform=transform;}}function render(task){if(task._canceled){return;}var textDivs=task._textDivs;var capability=task._capability;var textDivsLength=textDivs.length;if(textDivsLength>MAX_TEXT_DIVS_TO_RENDER){capability.resolve();return;}if(!task._isReadableStream){var _iterator=_createForOfIteratorHelper(textDivs),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var textDiv=_step.value;task._layoutText(textDiv);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}capability.resolve();}var TextLayerRenderTask=/*#__PURE__*/function(){function TextLayerRenderTask(_ref){var _globalThis$FontInspe,_this=this;var textContentSource=_ref.textContentSource,container=_ref.container,viewport=_ref.viewport,textDivs=_ref.textDivs,textDivProperties=_ref.textDivProperties,textContentItemsStr=_ref.textContentItemsStr,isOffscreenCanvasSupported=_ref.isOffscreenCanvasSupported;_classCallCheck(this,TextLayerRenderTask);this._textContentSource=textContentSource;this._isReadableStream=textContentSource instanceof ReadableStream;this._container=this._rootContainer=container;this._textDivs=textDivs||[];this._textContentItemsStr=textContentItemsStr||[];this._isOffscreenCanvasSupported=isOffscreenCanvasSupported;this._fontInspectorEnabled=!!((_globalThis$FontInspe=globalThis.FontInspector)!==null&&_globalThis$FontInspe!==void 0&&_globalThis$FontInspe.enabled);this._reader=null;this._textDivProperties=textDivProperties||new WeakMap();this._canceled=false;this._capability=(0,_util.createPromiseCapability)();this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:viewport.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:getCtx(0,isOffscreenCanvasSupported)};var _viewport$rawDims=viewport.rawDims,pageWidth=_viewport$rawDims.pageWidth,pageHeight=_viewport$rawDims.pageHeight,pageX=_viewport$rawDims.pageX,pageY=_viewport$rawDims.pageY;this._transform=[1,0,0,-1,-pageX,pageY+pageHeight];this._pageWidth=pageWidth;this._pageHeight=pageHeight;(0,_display_utils.setLayerDimensions)(container,viewport);this._capability.promise.finally(function(){_this._layoutTextParams=null;}).catch(function(){});}_createClass(TextLayerRenderTask,[{key:"promise",get:function get(){return this._capability.promise;}},{key:"cancel",value:function cancel(){this._canceled=true;if(this._reader){this._reader.cancel(new _util.AbortException("TextLayer task cancelled.")).catch(function(){});this._reader=null;}this._capability.reject(new _util.AbortException("TextLayer task cancelled."));}},{key:"_processItems",value:function _processItems(items,styleCache){var _iterator2=_createForOfIteratorHelper(items),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var item=_step2.value;if(item.str===undefined){if(item.type==="beginMarkedContentProps"||item.type==="beginMarkedContent"){var parent=this._container;this._container=document.createElement("span");this._container.classList.add("markedContent");if(item.id!==null){this._container.setAttribute("id","".concat(item.id));}parent.append(this._container);}else if(item.type==="endMarkedContent"){this._container=this._container.parentNode;}continue;}this._textContentItemsStr.push(item.str);appendText(this,item,styleCache);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}},{key:"_layoutText",value:function _layoutText(textDiv){var textDivProperties=this._layoutTextParams.properties=this._textDivProperties.get(textDiv);this._layoutTextParams.div=textDiv;layout(this._layoutTextParams);if(textDivProperties.hasText){this._container.append(textDiv);}if(textDivProperties.hasEOL){var br=document.createElement("br");br.setAttribute("role","presentation");this._container.append(br);}}},{key:"_render",value:function _render(){var _this2=this;var capability=(0,_util.createPromiseCapability)();var styleCache=Object.create(null);if(this._isReadableStream){var pump=function pump(){_this2._reader.read().then(function(_ref2){var value=_ref2.value,done=_ref2.done;if(done){capability.resolve();return;}Object.assign(styleCache,value.styles);_this2._processItems(value.items,styleCache);pump();},capability.reject);};this._reader=this._textContentSource.getReader();pump();}else if(this._textContentSource){var _this$_textContentSou=this._textContentSource,items=_this$_textContentSou.items,styles=_this$_textContentSou.styles;this._processItems(items,styles);capability.resolve();}else{throw new Error('No "textContentSource" parameter specified.');}capability.promise.then(function(){styleCache=null;render(_this2);},this._capability.reject);}}]);return TextLayerRenderTask;}();exports.TextLayerRenderTask=TextLayerRenderTask;function renderTextLayer(params){if(!params.textContentSource&&(params.textContent||params.textContentStream)){(0,_display_utils.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters "+"will be removed in the future, please use `textContentSource` instead.");params.textContentSource=params.textContent||params.textContentStream;}var container=params.container,viewport=params.viewport;var style=getComputedStyle(container);var visibility=style.getPropertyValue("visibility");var scaleFactor=parseFloat(style.getPropertyValue("--scale-factor"));if(visibility==="visible"&&(!scaleFactor||Math.abs(scaleFactor-viewport.scale)>1e-15)){console.error("The `--scale-factor` CSS-variable must be set, "+"to the same value as `viewport.scale`, "+"either on the `container`-element itself or higher up in the DOM.");}var task=new TextLayerRenderTask(params);task._render();return task;}function updateTextLayer(_ref3){var container=_ref3.container,viewport=_ref3.viewport,textDivs=_ref3.textDivs,textDivProperties=_ref3.textDivProperties,isOffscreenCanvasSupported=_ref3.isOffscreenCanvasSupported,_ref3$mustRotate=_ref3.mustRotate,mustRotate=_ref3$mustRotate===void 0?true:_ref3$mustRotate,_ref3$mustRescale=_ref3.mustRescale,mustRescale=_ref3$mustRescale===void 0?true:_ref3$mustRescale;if(mustRotate){(0,_display_utils.setLayerDimensions)(container,{rotation:viewport.rotation});}if(mustRescale){var ctx=getCtx(0,isOffscreenCanvasSupported);var scale=viewport.scale*(globalThis.devicePixelRatio||1);var params={prevFontSize:null,prevFontFamily:null,div:null,scale:scale,properties:null,ctx:ctx};var _iterator3=_createForOfIteratorHelper(textDivs),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var div=_step3.value;params.properties=textDivProperties.get(div);params.div=div;layout(params);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}

/***/ }),
/* 162 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}Object.defineProperty(exports, "__esModule", ({value:true}));exports.AnnotationEditorLayer=void 0;var _util=__w_pdfjs_require__(1);var _tools=__w_pdfjs_require__(140);var _freetext=__w_pdfjs_require__(163);var _ink=__w_pdfjs_require__(164);var _display_utils=__w_pdfjs_require__(141);function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}var _accessibilityManager=/*#__PURE__*/new WeakMap();var _allowClick=/*#__PURE__*/new WeakMap();var _boundPointerup=/*#__PURE__*/new WeakMap();var _boundPointerdown=/*#__PURE__*/new WeakMap();var _editors=/*#__PURE__*/new WeakMap();var _hadPointerDown=/*#__PURE__*/new WeakMap();var _isCleaningUp=/*#__PURE__*/new WeakMap();var _uiManager=/*#__PURE__*/new WeakMap();var _changeParent=/*#__PURE__*/new WeakSet();var _createNewEditor=/*#__PURE__*/new WeakSet();var _createAndAddNewEditor=/*#__PURE__*/new WeakSet();var _cleanup=/*#__PURE__*/new WeakSet();var AnnotationEditorLayer=/*#__PURE__*/function(){function AnnotationEditorLayer(options){_classCallCheck(this,AnnotationEditorLayer);_classPrivateMethodInitSpec(this,_cleanup);_classPrivateMethodInitSpec(this,_createAndAddNewEditor);_classPrivateMethodInitSpec(this,_createNewEditor);_classPrivateMethodInitSpec(this,_changeParent);_classPrivateFieldInitSpec(this,_accessibilityManager,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_allowClick,{writable:true,value:false});_classPrivateFieldInitSpec(this,_boundPointerup,{writable:true,value:this.pointerup.bind(this)});_classPrivateFieldInitSpec(this,_boundPointerdown,{writable:true,value:this.pointerdown.bind(this)});_classPrivateFieldInitSpec(this,_editors,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_hadPointerDown,{writable:true,value:false});_classPrivateFieldInitSpec(this,_isCleaningUp,{writable:true,value:false});_classPrivateFieldInitSpec(this,_uiManager,{writable:true,value:void 0});if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=true;_freetext.FreeTextEditor.initialize(options.l10n);_ink.InkEditor.initialize(options.l10n);}options.uiManager.registerEditorTypes([_freetext.FreeTextEditor,_ink.InkEditor]);_classPrivateFieldSet(this,_uiManager,options.uiManager);this.pageIndex=options.pageIndex;this.div=options.div;_classPrivateFieldSet(this,_accessibilityManager,options.accessibilityManager);_classPrivateFieldGet(this,_uiManager).addLayer(this);}_createClass(AnnotationEditorLayer,[{key:"isEmpty",get:function get(){return _classPrivateFieldGet(this,_editors).size===0;}},{key:"updateToolbar",value:function updateToolbar(mode){_classPrivateFieldGet(this,_uiManager).updateToolbar(mode);}},{key:"updateMode",value:function updateMode(){var mode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_classPrivateFieldGet(this,_uiManager).getMode();_classPrivateMethodGet(this,_cleanup,_cleanup2).call(this);if(mode===_util.AnnotationEditorType.INK){this.addInkEditorIfNeeded(false);this.disableClick();}else{this.enableClick();}_classPrivateFieldGet(this,_uiManager).unselectAll();if(mode!==_util.AnnotationEditorType.NONE){this.div.classList.toggle("freeTextEditing",mode===_util.AnnotationEditorType.FREETEXT);this.div.classList.toggle("inkEditing",mode===_util.AnnotationEditorType.INK);this.div.hidden=false;}}},{key:"addInkEditorIfNeeded",value:function addInkEditorIfNeeded(isCommitting){if(!isCommitting&&_classPrivateFieldGet(this,_uiManager).getMode()!==_util.AnnotationEditorType.INK){return;}if(!isCommitting){var _iterator=_createForOfIteratorHelper(_classPrivateFieldGet(this,_editors).values()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _editor=_step.value;if(_editor.isEmpty()){_editor.setInBackground();return;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}var editor=_classPrivateMethodGet(this,_createAndAddNewEditor,_createAndAddNewEditor2).call(this,{offsetX:0,offsetY:0});editor.setInBackground();}},{key:"setEditingState",value:function setEditingState(isEditing){_classPrivateFieldGet(this,_uiManager).setEditingState(isEditing);}},{key:"addCommands",value:function addCommands(params){_classPrivateFieldGet(this,_uiManager).addCommands(params);}},{key:"enable",value:function enable(){this.div.style.pointerEvents="auto";var _iterator2=_createForOfIteratorHelper(_classPrivateFieldGet(this,_editors).values()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var editor=_step2.value;editor.enableEditing();}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}},{key:"disable",value:function disable(){this.div.style.pointerEvents="none";var _iterator3=_createForOfIteratorHelper(_classPrivateFieldGet(this,_editors).values()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var editor=_step3.value;editor.disableEditing();}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_classPrivateMethodGet(this,_cleanup,_cleanup2).call(this);if(this.isEmpty){this.div.hidden=true;}}},{key:"setActiveEditor",value:function setActiveEditor(editor){var currentActive=_classPrivateFieldGet(this,_uiManager).getActive();if(currentActive===editor){return;}_classPrivateFieldGet(this,_uiManager).setActiveEditor(editor);}},{key:"enableClick",value:function enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(this,_boundPointerdown));this.div.addEventListener("pointerup",_classPrivateFieldGet(this,_boundPointerup));}},{key:"disableClick",value:function disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(this,_boundPointerdown));this.div.removeEventListener("pointerup",_classPrivateFieldGet(this,_boundPointerup));}},{key:"attach",value:function attach(editor){_classPrivateFieldGet(this,_editors).set(editor.id,editor);}},{key:"detach",value:function detach(editor){var _classPrivateFieldGet2;_classPrivateFieldGet(this,_editors).delete(editor.id);(_classPrivateFieldGet2=_classPrivateFieldGet(this,_accessibilityManager))===null||_classPrivateFieldGet2===void 0?void 0:_classPrivateFieldGet2.removePointerInTextLayer(editor.contentDiv);}},{key:"remove",value:function remove(editor){var _this=this;_classPrivateFieldGet(this,_uiManager).removeEditor(editor);this.detach(editor);editor.div.style.display="none";setTimeout(function(){editor.div.style.display="";editor.div.remove();editor.isAttachedToDOM=false;if(document.activeElement===document.body){_classPrivateFieldGet(_this,_uiManager).focusMainContainer();}},0);if(!_classPrivateFieldGet(this,_isCleaningUp)){this.addInkEditorIfNeeded(false);}}},{key:"add",value:function add(editor){_classPrivateMethodGet(this,_changeParent,_changeParent2).call(this,editor);_classPrivateFieldGet(this,_uiManager).addEditor(editor);this.attach(editor);if(!editor.isAttachedToDOM){var div=editor.render();this.div.append(div);editor.isAttachedToDOM=true;}this.moveEditorInDOM(editor);editor.onceAdded();_classPrivateFieldGet(this,_uiManager).addToAnnotationStorage(editor);}},{key:"moveEditorInDOM",value:function moveEditorInDOM(editor){var _classPrivateFieldGet3;(_classPrivateFieldGet3=_classPrivateFieldGet(this,_accessibilityManager))===null||_classPrivateFieldGet3===void 0?void 0:_classPrivateFieldGet3.moveElementInDOM(this.div,editor.div,editor.contentDiv,true);}},{key:"addOrRebuild",value:function addOrRebuild(editor){if(editor.needsToBeRebuilt()){editor.rebuild();}else{this.add(editor);}}},{key:"addANewEditor",value:function addANewEditor(editor){var _this2=this;var cmd=function cmd(){_this2.addOrRebuild(editor);};var undo=function undo(){editor.remove();};this.addCommands({cmd:cmd,undo:undo,mustExec:true});}},{key:"addUndoableEditor",value:function addUndoableEditor(editor){var _this3=this;var cmd=function cmd(){_this3.addOrRebuild(editor);};var undo=function undo(){editor.remove();};this.addCommands({cmd:cmd,undo:undo,mustExec:false});}},{key:"getNextId",value:function getNextId(){return _classPrivateFieldGet(this,_uiManager).getId();}},{key:"deserialize",value:function deserialize(data){switch(data.annotationType){case _util.AnnotationEditorType.FREETEXT:return _freetext.FreeTextEditor.deserialize(data,this,_classPrivateFieldGet(this,_uiManager));case _util.AnnotationEditorType.INK:return _ink.InkEditor.deserialize(data,this,_classPrivateFieldGet(this,_uiManager));}return null;}},{key:"setSelected",value:function setSelected(editor){_classPrivateFieldGet(this,_uiManager).setSelected(editor);}},{key:"toggleSelected",value:function toggleSelected(editor){_classPrivateFieldGet(this,_uiManager).toggleSelected(editor);}},{key:"isSelected",value:function isSelected(editor){return _classPrivateFieldGet(this,_uiManager).isSelected(editor);}},{key:"unselect",value:function unselect(editor){_classPrivateFieldGet(this,_uiManager).unselect(editor);}},{key:"pointerup",value:function pointerup(event){var isMac=_util.FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}if(!_classPrivateFieldGet(this,_hadPointerDown)){return;}_classPrivateFieldSet(this,_hadPointerDown,false);if(!_classPrivateFieldGet(this,_allowClick)){_classPrivateFieldSet(this,_allowClick,true);return;}_classPrivateMethodGet(this,_createAndAddNewEditor,_createAndAddNewEditor2).call(this,event);}},{key:"pointerdown",value:function pointerdown(event){var isMac=_util.FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}_classPrivateFieldSet(this,_hadPointerDown,true);var editor=_classPrivateFieldGet(this,_uiManager).getActive();_classPrivateFieldSet(this,_allowClick,!editor||editor.isEmpty());}},{key:"drop",value:function drop(event){var id=event.dataTransfer.getData("text/plain");var editor=_classPrivateFieldGet(this,_uiManager).getEditor(id);if(!editor){return;}event.preventDefault();event.dataTransfer.dropEffect="move";_classPrivateMethodGet(this,_changeParent,_changeParent2).call(this,editor);var rect=this.div.getBoundingClientRect();var endX=event.clientX-rect.x;var endY=event.clientY-rect.y;editor.translate(endX-editor.startX,endY-editor.startY);this.moveEditorInDOM(editor);editor.div.focus();}},{key:"dragover",value:function dragover(event){event.preventDefault();}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet4;if(((_classPrivateFieldGet4=_classPrivateFieldGet(this,_uiManager).getActive())===null||_classPrivateFieldGet4===void 0?void 0:_classPrivateFieldGet4.parent)===this){_classPrivateFieldGet(this,_uiManager).setActiveEditor(null);}var _iterator4=_createForOfIteratorHelper(_classPrivateFieldGet(this,_editors).values()),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _classPrivateFieldGet5;var editor=_step4.value;(_classPrivateFieldGet5=_classPrivateFieldGet(this,_accessibilityManager))===null||_classPrivateFieldGet5===void 0?void 0:_classPrivateFieldGet5.removePointerInTextLayer(editor.contentDiv);editor.setParent(null);editor.isAttachedToDOM=false;editor.div.remove();}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}this.div=null;_classPrivateFieldGet(this,_editors).clear();_classPrivateFieldGet(this,_uiManager).removeLayer(this);}},{key:"render",value:function render(_ref){var viewport=_ref.viewport;this.viewport=viewport;(0,_display_utils.setLayerDimensions)(this.div,viewport);(0,_tools.bindEvents)(this,this.div,["dragover","drop"]);var _iterator5=_createForOfIteratorHelper(_classPrivateFieldGet(this,_uiManager).getEditors(this.pageIndex)),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var editor=_step5.value;this.add(editor);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}this.updateMode();}},{key:"update",value:function update(_ref2){var viewport=_ref2.viewport;_classPrivateFieldGet(this,_uiManager).commitOrRemove();this.viewport=viewport;(0,_display_utils.setLayerDimensions)(this.div,{rotation:viewport.rotation});this.updateMode();}},{key:"pageDimensions",get:function get(){var _this$viewport$rawDim=this.viewport.rawDims,pageWidth=_this$viewport$rawDim.pageWidth,pageHeight=_this$viewport$rawDim.pageHeight;return[pageWidth,pageHeight];}}]);return AnnotationEditorLayer;}();exports.AnnotationEditorLayer=AnnotationEditorLayer;function _changeParent2(editor){var _editor$parent;if(editor.parent===this){return;}this.attach(editor);(_editor$parent=editor.parent)===null||_editor$parent===void 0?void 0:_editor$parent.detach(editor);editor.setParent(this);if(editor.div&&editor.isAttachedToDOM){editor.div.remove();this.div.append(editor.div);}}function _createNewEditor2(params){switch(_classPrivateFieldGet(this,_uiManager).getMode()){case _util.AnnotationEditorType.FREETEXT:return new _freetext.FreeTextEditor(params);case _util.AnnotationEditorType.INK:return new _ink.InkEditor(params);}return null;}function _createAndAddNewEditor2(event){var id=this.getNextId();var editor=_classPrivateMethodGet(this,_createNewEditor,_createNewEditor2).call(this,{parent:this,id:id,x:event.offsetX,y:event.offsetY,uiManager:_classPrivateFieldGet(this,_uiManager)});if(editor){this.add(editor);}return editor;}function _cleanup2(){_classPrivateFieldSet(this,_isCleaningUp,true);var _iterator6=_createForOfIteratorHelper(_classPrivateFieldGet(this,_editors).values()),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var editor=_step6.value;if(editor.isEmpty()){editor.remove();}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}_classPrivateFieldSet(this,_isCleaningUp,false);}_defineProperty(AnnotationEditorLayer,"_initialized",false);

/***/ }),
/* 163 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}Object.defineProperty(exports, "__esModule", ({value:true}));exports.FreeTextEditor=void 0;var _util=__w_pdfjs_require__(1);var _tools=__w_pdfjs_require__(140);var _editor=__w_pdfjs_require__(139);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _get(){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get.bind();}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}var _boundEditorDivBlur=/*#__PURE__*/new WeakMap();var _boundEditorDivFocus=/*#__PURE__*/new WeakMap();var _boundEditorDivInput=/*#__PURE__*/new WeakMap();var _boundEditorDivKeydown=/*#__PURE__*/new WeakMap();var _color=/*#__PURE__*/new WeakMap();var _content=/*#__PURE__*/new WeakMap();var _editorDivId=/*#__PURE__*/new WeakMap();var _hasAlreadyBeenCommitted=/*#__PURE__*/new WeakMap();var _fontSize=/*#__PURE__*/new WeakMap();var _updateFontSize=/*#__PURE__*/new WeakSet();var _updateColor=/*#__PURE__*/new WeakSet();var _extractText=/*#__PURE__*/new WeakSet();var _setEditorDimensions=/*#__PURE__*/new WeakSet();var FreeTextEditor=/*#__PURE__*/function(_AnnotationEditor){_inherits(FreeTextEditor,_AnnotationEditor);var _super=_createSuper(FreeTextEditor);function FreeTextEditor(params){var _this;_classCallCheck(this,FreeTextEditor);_this=_super.call(this,_objectSpread(_objectSpread({},params),{},{name:"freeTextEditor"}));_classPrivateMethodInitSpec(_assertThisInitialized(_this),_setEditorDimensions);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_extractText);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_updateColor);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_updateFontSize);_classPrivateFieldInitSpec(_assertThisInitialized(_this),_boundEditorDivBlur,{writable:true,value:_this.editorDivBlur.bind(_assertThisInitialized(_this))});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_boundEditorDivFocus,{writable:true,value:_this.editorDivFocus.bind(_assertThisInitialized(_this))});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_boundEditorDivInput,{writable:true,value:_this.editorDivInput.bind(_assertThisInitialized(_this))});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_boundEditorDivKeydown,{writable:true,value:_this.editorDivKeydown.bind(_assertThisInitialized(_this))});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_color,{writable:true,value:void 0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_content,{writable:true,value:""});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_editorDivId,{writable:true,value:"".concat(_this.id,"-editor")});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_hasAlreadyBeenCommitted,{writable:true,value:false});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_fontSize,{writable:true,value:void 0});_classPrivateFieldSet(_assertThisInitialized(_this),_color,params.color||FreeTextEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor);_classPrivateFieldSet(_assertThisInitialized(_this),_fontSize,params.fontSize||FreeTextEditor._defaultFontSize);return _this;}_createClass(FreeTextEditor,[{key:"updateParams",value:function updateParams(type,value){switch(type){case _util.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet(this,_updateFontSize,_updateFontSize2).call(this,value);break;case _util.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet(this,_updateColor,_updateColor2).call(this,value);break;}}},{key:"propertiesToUpdate",get:function get(){return[[_util.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(this,_fontSize)],[_util.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(this,_color)]];}},{key:"getInitialTranslation",value:function getInitialTranslation(){var scale=this.parentScale;return[-FreeTextEditor._internalPadding*scale,-(FreeTextEditor._internalPadding+_classPrivateFieldGet(this,_fontSize))*scale];}},{key:"rebuild",value:function rebuild(){_get(_getPrototypeOf(FreeTextEditor.prototype),"rebuild",this).call(this);if(this.div===null){return;}if(!this.isAttachedToDOM){this.parent.add(this);}}},{key:"enableEditMode",value:function enableEditMode(){if(this.isInEditMode()){return;}this.parent.setEditingState(false);this.parent.updateToolbar(_util.AnnotationEditorType.FREETEXT);_get(_getPrototypeOf(FreeTextEditor.prototype),"enableEditMode",this).call(this);this.overlayDiv.classList.remove("enabled");this.editorDiv.contentEditable=true;this.div.draggable=false;this.div.removeAttribute("aria-activedescendant");this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(this,_boundEditorDivKeydown));this.editorDiv.addEventListener("focus",_classPrivateFieldGet(this,_boundEditorDivFocus));this.editorDiv.addEventListener("blur",_classPrivateFieldGet(this,_boundEditorDivBlur));this.editorDiv.addEventListener("input",_classPrivateFieldGet(this,_boundEditorDivInput));}},{key:"disableEditMode",value:function disableEditMode(){if(!this.isInEditMode()){return;}this.parent.setEditingState(true);_get(_getPrototypeOf(FreeTextEditor.prototype),"disableEditMode",this).call(this);this.overlayDiv.classList.add("enabled");this.editorDiv.contentEditable=false;this.div.setAttribute("aria-activedescendant",_classPrivateFieldGet(this,_editorDivId));this.div.draggable=true;this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(this,_boundEditorDivKeydown));this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(this,_boundEditorDivFocus));this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(this,_boundEditorDivBlur));this.editorDiv.removeEventListener("input",_classPrivateFieldGet(this,_boundEditorDivInput));this.div.focus({preventScroll:true});this.isEditing=false;this.parent.div.classList.add("freeTextEditing");}},{key:"focusin",value:function focusin(event){_get(_getPrototypeOf(FreeTextEditor.prototype),"focusin",this).call(this,event);if(event.target!==this.editorDiv){this.editorDiv.focus();}}},{key:"onceAdded",value:function onceAdded(){if(this.width){return;}this.enableEditMode();this.editorDiv.focus();}},{key:"isEmpty",value:function isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()==="";}},{key:"remove",value:function remove(){this.isEditing=false;this.parent.setEditingState(true);this.parent.div.classList.add("freeTextEditing");_get(_getPrototypeOf(FreeTextEditor.prototype),"remove",this).call(this);}},{key:"commit",value:function commit(){if(!this.isInEditMode()){return;}_get(_getPrototypeOf(FreeTextEditor.prototype),"commit",this).call(this);if(!_classPrivateFieldGet(this,_hasAlreadyBeenCommitted)){_classPrivateFieldSet(this,_hasAlreadyBeenCommitted,true);this.parent.addUndoableEditor(this);}this.disableEditMode();_classPrivateFieldSet(this,_content,_classPrivateMethodGet(this,_extractText,_extractText2).call(this).trimEnd());_classPrivateMethodGet(this,_setEditorDimensions,_setEditorDimensions2).call(this);}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return this.isInEditMode();}},{key:"dblclick",value:function dblclick(event){this.enableEditMode();this.editorDiv.focus();}},{key:"keydown",value:function keydown(event){if(event.target===this.div&&event.key==="Enter"){this.enableEditMode();this.editorDiv.focus();}}},{key:"editorDivKeydown",value:function editorDivKeydown(event){FreeTextEditor._keyboardManager.exec(this,event);}},{key:"editorDivFocus",value:function editorDivFocus(event){this.isEditing=true;}},{key:"editorDivBlur",value:function editorDivBlur(event){this.isEditing=false;}},{key:"editorDivInput",value:function editorDivInput(event){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty());}},{key:"disableEditing",value:function disableEditing(){this.editorDiv.setAttribute("role","comment");this.editorDiv.removeAttribute("aria-multiline");}},{key:"enableEditing",value:function enableEditing(){this.editorDiv.setAttribute("role","textbox");this.editorDiv.setAttribute("aria-multiline",true);}},{key:"render",value:function render(){var _this2=this;if(this.div){return this.div;}var baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}_get(_getPrototypeOf(FreeTextEditor.prototype),"render",this).call(this);this.editorDiv=document.createElement("div");this.editorDiv.className="internal";this.editorDiv.setAttribute("id",_classPrivateFieldGet(this,_editorDivId));this.enableEditing();FreeTextEditor._l10nPromise.get("editor_free_text2_aria_label").then(function(msg){var _this2$editorDiv;return(_this2$editorDiv=_this2.editorDiv)===null||_this2$editorDiv===void 0?void 0:_this2$editorDiv.setAttribute("aria-label",msg);});FreeTextEditor._l10nPromise.get("free_text2_default_content").then(function(msg){var _this2$editorDiv2;return(_this2$editorDiv2=_this2.editorDiv)===null||_this2$editorDiv2===void 0?void 0:_this2$editorDiv2.setAttribute("default-content",msg);});this.editorDiv.contentEditable=true;var style=this.editorDiv.style;style.fontSize="calc(".concat(_classPrivateFieldGet(this,_fontSize),"px * var(--scale-factor))");style.color=_classPrivateFieldGet(this,_color);this.div.append(this.editorDiv);this.overlayDiv=document.createElement("div");this.overlayDiv.classList.add("overlay","enabled");this.div.append(this.overlayDiv);(0,_tools.bindEvents)(this,this.div,["dblclick","keydown"]);if(this.width){var _this$parentDimension=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension[0],parentHeight=_this$parentDimension[1];this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);var _iterator=_createForOfIteratorHelper(_classPrivateFieldGet(this,_content).split("\n")),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var line=_step.value;var div=document.createElement("div");div.append(line?document.createTextNode(line):document.createElement("br"));this.editorDiv.append(div);}}catch(err){_iterator.e(err);}finally{_iterator.f();}this.div.draggable=true;this.editorDiv.contentEditable=false;}else{this.div.draggable=false;this.editorDiv.contentEditable=true;}return this.div;}},{key:"contentDiv",get:function get(){return this.editorDiv;}},{key:"serialize",value:function serialize(){if(this.isEmpty()){return null;}var padding=FreeTextEditor._internalPadding*this.parentScale;var rect=this.getRect(padding,padding);var color=_editor.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:_classPrivateFieldGet(this,_color));return{annotationType:_util.AnnotationEditorType.FREETEXT,color:color,fontSize:_classPrivateFieldGet(this,_fontSize),value:_classPrivateFieldGet(this,_content),pageIndex:this.pageIndex,rect:rect,rotation:this.rotation};}}],[{key:"initialize",value:function initialize(l10n){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(function(str){return[str,l10n.get(str)];}));var style=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(style.getPropertyValue("--freetext-padding"));}},{key:"updateDefaultParams",value:function updateDefaultParams(type,value){switch(type){case _util.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=value;break;case _util.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=value;break;}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[_util.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[_util.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor]];}},{key:"deserialize",value:function deserialize(data,parent,uiManager){var editor=_get(_getPrototypeOf(FreeTextEditor),"deserialize",this).call(this,data,parent,uiManager);_classPrivateFieldSet(editor,_fontSize,data.fontSize);_classPrivateFieldSet(editor,_color,_util.Util.makeHexColor.apply(_util.Util,_toConsumableArray(data.color)));_classPrivateFieldSet(editor,_content,data.value);return editor;}}]);return FreeTextEditor;}(_editor.AnnotationEditor);exports.FreeTextEditor=FreeTextEditor;function _updateFontSize2(fontSize){var _this3=this;var setFontsize=function setFontsize(size){_this3.editorDiv.style.fontSize="calc(".concat(size,"px * var(--scale-factor))");_this3.translate(0,-(size-_classPrivateFieldGet(_this3,_fontSize))*_this3.parentScale);_classPrivateFieldSet(_this3,_fontSize,size);_classPrivateMethodGet(_this3,_setEditorDimensions,_setEditorDimensions2).call(_this3);};var savedFontsize=_classPrivateFieldGet(this,_fontSize);this.addCommands({cmd:function cmd(){setFontsize(fontSize);},undo:function undo(){setFontsize(savedFontsize);},mustExec:true,type:_util.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:true,keepUndo:true});}function _updateColor2(color){var _this4=this;var savedColor=_classPrivateFieldGet(this,_color);this.addCommands({cmd:function cmd(){_classPrivateFieldSet(_this4,_color,_this4.editorDiv.style.color=color);},undo:function undo(){_classPrivateFieldSet(_this4,_color,_this4.editorDiv.style.color=savedColor);},mustExec:true,type:_util.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:true,keepUndo:true});}function _extractText2(){var divs=this.editorDiv.getElementsByTagName("div");if(divs.length===0){return this.editorDiv.innerText;}var buffer=[];var _iterator2=_createForOfIteratorHelper(divs),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var div=_step2.value;buffer.push(div.innerText.replace(/\r\n?|\n/,""));}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return buffer.join("\n");}function _setEditorDimensions2(){var _this$parentDimension2=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension2[0],parentHeight=_this$parentDimension2[1];var rect;if(this.isAttachedToDOM){rect=this.div.getBoundingClientRect();}else{var currentLayer=this.currentLayer,div=this.div;var savedDisplay=div.style.display;div.style.display="hidden";currentLayer.div.append(this.div);rect=div.getBoundingClientRect();div.remove();div.style.display=savedDisplay;}this.width=rect.width/parentWidth;this.height=rect.height/parentHeight;}_defineProperty(FreeTextEditor,"_freeTextDefaultContent","");_defineProperty(FreeTextEditor,"_l10nPromise",void 0);_defineProperty(FreeTextEditor,"_internalPadding",0);_defineProperty(FreeTextEditor,"_defaultColor",null);_defineProperty(FreeTextEditor,"_defaultFontSize",10);_defineProperty(FreeTextEditor,"_keyboardManager",new _tools.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],FreeTextEditor.prototype.commitOrRemove]]));_defineProperty(FreeTextEditor,"_type","freetext");

/***/ }),
/* 164 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}Object.defineProperty(exports, "__esModule", ({value:true}));exports.InkEditor=void 0;Object.defineProperty(exports, "fitCurve", ({enumerable:true,get:function get(){return _pdfjsFitCurve.fitCurve;}}));var _util=__w_pdfjs_require__(1);var _editor=__w_pdfjs_require__(139);var _pdfjsFitCurve=__w_pdfjs_require__(165);var _tools=__w_pdfjs_require__(140);function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _get(){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get.bind();}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classStaticPrivateMethodGet(receiver,classConstructor,method){_classCheckPrivateStaticAccess(receiver,classConstructor);return method;}function _classCheckPrivateStaticAccess(receiver,classConstructor){if(receiver!==classConstructor){throw new TypeError("Private static access of wrong provenance");}}function _classPrivateFieldSet(receiver,privateMap,value){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"set");_classApplyDescriptorSet(receiver,descriptor,value);return value;}function _classApplyDescriptorSet(receiver,descriptor,value){if(descriptor.set){descriptor.set.call(receiver,value);}else{if(!descriptor.writable){throw new TypeError("attempted to set read only private field");}descriptor.value=value;}}function _classPrivateFieldGet(receiver,privateMap){var descriptor=_classExtractFieldDescriptor(receiver,privateMap,"get");return _classApplyDescriptorGet(receiver,descriptor);}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver)){throw new TypeError("attempted to "+action+" private field on non-instance");}return privateMap.get(receiver);}function _classApplyDescriptorGet(receiver,descriptor){if(descriptor.get){return descriptor.get.call(receiver);}return descriptor.value;}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}var RESIZER_SIZE=16;var _aspectRatio=/*#__PURE__*/new WeakMap();var _baseHeight=/*#__PURE__*/new WeakMap();var _baseWidth=/*#__PURE__*/new WeakMap();var _boundCanvasPointermove=/*#__PURE__*/new WeakMap();var _boundCanvasPointerleave=/*#__PURE__*/new WeakMap();var _boundCanvasPointerup=/*#__PURE__*/new WeakMap();var _boundCanvasPointerdown=/*#__PURE__*/new WeakMap();var _disableEditing=/*#__PURE__*/new WeakMap();var _isCanvasInitialized=/*#__PURE__*/new WeakMap();var _lastPoint=/*#__PURE__*/new WeakMap();var _observer=/*#__PURE__*/new WeakMap();var _realWidth=/*#__PURE__*/new WeakMap();var _realHeight=/*#__PURE__*/new WeakMap();var _requestFrameCallback=/*#__PURE__*/new WeakMap();var _updateThickness=/*#__PURE__*/new WeakSet();var _updateColor=/*#__PURE__*/new WeakSet();var _updateOpacity=/*#__PURE__*/new WeakSet();var _getInitialBBox=/*#__PURE__*/new WeakSet();var _setStroke=/*#__PURE__*/new WeakSet();var _startDrawing=/*#__PURE__*/new WeakSet();var _draw=/*#__PURE__*/new WeakSet();var _stopDrawing=/*#__PURE__*/new WeakSet();var _redraw=/*#__PURE__*/new WeakSet();var _endDrawing=/*#__PURE__*/new WeakSet();var _createCanvas=/*#__PURE__*/new WeakSet();var _createObserver=/*#__PURE__*/new WeakSet();var _setCanvasDims=/*#__PURE__*/new WeakSet();var _setScaleFactor=/*#__PURE__*/new WeakSet();var _updateTransform=/*#__PURE__*/new WeakSet();var _serializePaths=/*#__PURE__*/new WeakSet();var _extractPointsOnBezier=/*#__PURE__*/new WeakSet();var _isAlmostFlat=/*#__PURE__*/new WeakSet();var _getBbox=/*#__PURE__*/new WeakSet();var _getPadding=/*#__PURE__*/new WeakSet();var _fitToContent=/*#__PURE__*/new WeakSet();var _setMinDims=/*#__PURE__*/new WeakSet();var InkEditor=/*#__PURE__*/function(_AnnotationEditor){_inherits(InkEditor,_AnnotationEditor);var _super=_createSuper(InkEditor);function InkEditor(params){var _this;_classCallCheck(this,InkEditor);_this=_super.call(this,_objectSpread(_objectSpread({},params),{},{name:"inkEditor"}));_classPrivateMethodInitSpec(_assertThisInitialized(_this),_setMinDims);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_fitToContent);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_getPadding);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_getBbox);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_isAlmostFlat);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_extractPointsOnBezier);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_serializePaths);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_updateTransform);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_setScaleFactor);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_setCanvasDims);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_createObserver);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_createCanvas);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_endDrawing);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_redraw);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_stopDrawing);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_draw);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_startDrawing);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_setStroke);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_getInitialBBox);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_updateOpacity);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_updateColor);_classPrivateMethodInitSpec(_assertThisInitialized(_this),_updateThickness);_classPrivateFieldInitSpec(_assertThisInitialized(_this),_aspectRatio,{writable:true,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_baseHeight,{writable:true,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_baseWidth,{writable:true,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_boundCanvasPointermove,{writable:true,value:_this.canvasPointermove.bind(_assertThisInitialized(_this))});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_boundCanvasPointerleave,{writable:true,value:_this.canvasPointerleave.bind(_assertThisInitialized(_this))});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_boundCanvasPointerup,{writable:true,value:_this.canvasPointerup.bind(_assertThisInitialized(_this))});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_boundCanvasPointerdown,{writable:true,value:_this.canvasPointerdown.bind(_assertThisInitialized(_this))});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_disableEditing,{writable:true,value:false});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_isCanvasInitialized,{writable:true,value:false});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_lastPoint,{writable:true,value:null});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_observer,{writable:true,value:null});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_realWidth,{writable:true,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_realHeight,{writable:true,value:0});_classPrivateFieldInitSpec(_assertThisInitialized(_this),_requestFrameCallback,{writable:true,value:null});_this.color=params.color||null;_this.thickness=params.thickness||null;_this.opacity=params.opacity||null;_this.paths=[];_this.bezierPath2D=[];_this.currentPath=[];_this.scaleFactor=1;_this.translationX=_this.translationY=0;_this.x=0;_this.y=0;return _this;}_createClass(InkEditor,[{key:"updateParams",value:function updateParams(type,value){switch(type){case _util.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet(this,_updateThickness,_updateThickness2).call(this,value);break;case _util.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet(this,_updateColor,_updateColor2).call(this,value);break;case _util.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet(this,_updateOpacity,_updateOpacity2).call(this,value);break;}}},{key:"propertiesToUpdate",get:function get(){var _this$opacity;return[[_util.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[_util.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((_this$opacity=this.opacity)!==null&&_this$opacity!==void 0?_this$opacity:InkEditor._defaultOpacity))]];}},{key:"rebuild",value:function rebuild(){_get(_getPrototypeOf(InkEditor.prototype),"rebuild",this).call(this);if(this.div===null){return;}if(!this.canvas){_classPrivateMethodGet(this,_createCanvas,_createCanvas2).call(this);_classPrivateMethodGet(this,_createObserver,_createObserver2).call(this);}if(!this.isAttachedToDOM){this.parent.add(this);_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this);}_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this);}},{key:"remove",value:function remove(){if(this.canvas===null){return;}if(!this.isEmpty()){this.commit();}this.canvas.width=this.canvas.height=0;this.canvas.remove();this.canvas=null;_classPrivateFieldGet(this,_observer).disconnect();_classPrivateFieldSet(this,_observer,null);_get(_getPrototypeOf(InkEditor.prototype),"remove",this).call(this);}},{key:"setParent",value:function setParent(parent){if(!this.parent&&parent){this._uiManager.removeShouldRescale(this);}else if(this.parent&&parent===null){this._uiManager.addShouldRescale(this);}_get(_getPrototypeOf(InkEditor.prototype),"setParent",this).call(this,parent);}},{key:"onScaleChanging",value:function onScaleChanging(){var _this$parentDimension=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension[0],parentHeight=_this$parentDimension[1];var width=this.width*parentWidth;var height=this.height*parentHeight;this.setDimensions(width,height);}},{key:"enableEditMode",value:function enableEditMode(){if(_classPrivateFieldGet(this,_disableEditing)||this.canvas===null){return;}_get(_getPrototypeOf(InkEditor.prototype),"enableEditMode",this).call(this);this.div.draggable=false;this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(this,_boundCanvasPointerdown));this.canvas.addEventListener("pointerup",_classPrivateFieldGet(this,_boundCanvasPointerup));}},{key:"disableEditMode",value:function disableEditMode(){if(!this.isInEditMode()||this.canvas===null){return;}_get(_getPrototypeOf(InkEditor.prototype),"disableEditMode",this).call(this);this.div.draggable=!this.isEmpty();this.div.classList.remove("editing");this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(this,_boundCanvasPointerdown));this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(this,_boundCanvasPointerup));}},{key:"onceAdded",value:function onceAdded(){this.div.draggable=!this.isEmpty();}},{key:"isEmpty",value:function isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0;}},{key:"commit",value:function commit(){if(_classPrivateFieldGet(this,_disableEditing)){return;}_get(_getPrototypeOf(InkEditor.prototype),"commit",this).call(this);this.isEditing=false;this.disableEditMode();this.setInForeground();_classPrivateFieldSet(this,_disableEditing,true);this.div.classList.add("disabled");_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this,true);this.parent.addInkEditorIfNeeded(true);this.parent.moveEditorInDOM(this);this.div.focus({preventScroll:true});}},{key:"focusin",value:function focusin(event){_get(_getPrototypeOf(InkEditor.prototype),"focusin",this).call(this,event);this.enableEditMode();}},{key:"canvasPointerdown",value:function canvasPointerdown(event){if(event.button!==0||!this.isInEditMode()||_classPrivateFieldGet(this,_disableEditing)){return;}this.setInForeground();if(event.type!=="mouse"){this.div.focus({preventScroll:true});}event.stopPropagation();this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(this,_boundCanvasPointerleave));this.canvas.addEventListener("pointermove",_classPrivateFieldGet(this,_boundCanvasPointermove));_classPrivateMethodGet(this,_startDrawing,_startDrawing2).call(this,event.offsetX,event.offsetY);}},{key:"canvasPointermove",value:function canvasPointermove(event){event.stopPropagation();_classPrivateMethodGet(this,_draw,_draw2).call(this,event.offsetX,event.offsetY);}},{key:"canvasPointerup",value:function canvasPointerup(event){if(event.button!==0){return;}if(this.isInEditMode()&&this.currentPath.length!==0){event.stopPropagation();_classPrivateMethodGet(this,_endDrawing,_endDrawing2).call(this,event);this.setInBackground();}}},{key:"canvasPointerleave",value:function canvasPointerleave(event){_classPrivateMethodGet(this,_endDrawing,_endDrawing2).call(this,event);this.setInBackground();}},{key:"render",value:function render(){var _this2=this;if(this.div){return this.div;}var baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}_get(_getPrototypeOf(InkEditor.prototype),"render",this).call(this);InkEditor._l10nPromise.get("editor_ink2_aria_label").then(function(msg){var _this2$div;return(_this2$div=_this2.div)===null||_this2$div===void 0?void 0:_this2$div.setAttribute("aria-label",msg);});var _classPrivateMethodGe=_classPrivateMethodGet(this,_getInitialBBox,_getInitialBBox2).call(this),_classPrivateMethodGe2=_slicedToArray(_classPrivateMethodGe,4),x=_classPrivateMethodGe2[0],y=_classPrivateMethodGe2[1],w=_classPrivateMethodGe2[2],h=_classPrivateMethodGe2[3];this.setAt(x,y,0,0);this.setDims(w,h);_classPrivateMethodGet(this,_createCanvas,_createCanvas2).call(this);if(this.width){var _this$parentDimension2=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension2[0],parentHeight=_this$parentDimension2[1];this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);_classPrivateFieldSet(this,_isCanvasInitialized,true);_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this);this.setDims(this.width*parentWidth,this.height*parentHeight);_classPrivateMethodGet(this,_redraw,_redraw2).call(this);_classPrivateMethodGet(this,_setMinDims,_setMinDims2).call(this);this.div.classList.add("disabled");}else{this.div.classList.add("editing");this.enableEditMode();}_classPrivateMethodGet(this,_createObserver,_createObserver2).call(this);return this.div;}},{key:"setDimensions",value:function setDimensions(width,height){var roundedWidth=Math.round(width);var roundedHeight=Math.round(height);if(_classPrivateFieldGet(this,_realWidth)===roundedWidth&&_classPrivateFieldGet(this,_realHeight)===roundedHeight){return;}_classPrivateFieldSet(this,_realWidth,roundedWidth);_classPrivateFieldSet(this,_realHeight,roundedHeight);this.canvas.style.visibility="hidden";if(_classPrivateFieldGet(this,_aspectRatio)&&Math.abs(_classPrivateFieldGet(this,_aspectRatio)-width/height)>1e-2){height=Math.ceil(width/_classPrivateFieldGet(this,_aspectRatio));this.setDims(width,height);}var _this$parentDimension3=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension3[0],parentHeight=_this$parentDimension3[1];this.width=width/parentWidth;this.height=height/parentHeight;if(_classPrivateFieldGet(this,_disableEditing)){_classPrivateMethodGet(this,_setScaleFactor,_setScaleFactor2).call(this,width,height);}_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this);_classPrivateMethodGet(this,_redraw,_redraw2).call(this);this.canvas.style.visibility="visible";this.fixDims();}},{key:"serialize",value:function serialize(){if(this.isEmpty()){return null;}var rect=this.getRect(0,0);var height=this.rotation%180===0?rect[3]-rect[1]:rect[2]-rect[0];var color=_editor.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:_util.AnnotationEditorType.INK,color:color,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,_serializePaths,_serializePaths2).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,height),pageIndex:this.pageIndex,rect:rect,rotation:this.rotation};}}],[{key:"initialize",value:function initialize(l10n){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(function(str){return[str,l10n.get(str)];}));}},{key:"updateDefaultParams",value:function updateDefaultParams(type,value){switch(type){case _util.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=value;break;case _util.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=value;break;case _util.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=value/100;break;}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[_util.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[_util.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util.AnnotationEditorParamsType.INK_OPACITY,Math.round(InkEditor._defaultOpacity*100)]];}},{key:"deserialize",value:function deserialize(data,parent,uiManager){var editor=_get(_getPrototypeOf(InkEditor),"deserialize",this).call(this,data,parent,uiManager);editor.thickness=data.thickness;editor.color=_util.Util.makeHexColor.apply(_util.Util,_toConsumableArray(data.color));editor.opacity=data.opacity;var _editor$pageDimension=_slicedToArray(editor.pageDimensions,2),pageWidth=_editor$pageDimension[0],pageHeight=_editor$pageDimension[1];var width=editor.width*pageWidth;var height=editor.height*pageHeight;var scaleFactor=editor.parentScale;var padding=data.thickness/2;_classPrivateFieldSet(editor,_aspectRatio,width/height);_classPrivateFieldSet(editor,_disableEditing,true);_classPrivateFieldSet(editor,_realWidth,Math.round(width));_classPrivateFieldSet(editor,_realHeight,Math.round(height));var _iterator=_createForOfIteratorHelper(data.paths),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var bezier=_step.value.bezier;var path=[];editor.paths.push(path);var p0=scaleFactor*(bezier[0]-padding);var p1=scaleFactor*(height-bezier[1]-padding);for(var i=2,ii=bezier.length;i<ii;i+=6){var p10=scaleFactor*(bezier[i]-padding);var p11=scaleFactor*(height-bezier[i+1]-padding);var p20=scaleFactor*(bezier[i+2]-padding);var p21=scaleFactor*(height-bezier[i+3]-padding);var p30=scaleFactor*(bezier[i+4]-padding);var p31=scaleFactor*(height-bezier[i+5]-padding);path.push([[p0,p1],[p10,p11],[p20,p21],[p30,p31]]);p0=p30;p1=p31;}var path2D=_classStaticPrivateMethodGet(this,InkEditor,_buildPath2D).call(this,path);editor.bezierPath2D.push(path2D);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var bbox=_classPrivateMethodGet(editor,_getBbox,_getBbox2).call(editor);_classPrivateFieldSet(editor,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0]));_classPrivateFieldSet(editor,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1]));_classPrivateMethodGet(editor,_setScaleFactor,_setScaleFactor2).call(editor,width,height);return editor;}}]);return InkEditor;}(_editor.AnnotationEditor);exports.InkEditor=InkEditor;function _updateThickness2(thickness){var _this3=this;var savedThickness=this.thickness;this.addCommands({cmd:function cmd(){_this3.thickness=thickness;_classPrivateMethodGet(_this3,_fitToContent,_fitToContent2).call(_this3);},undo:function undo(){_this3.thickness=savedThickness;_classPrivateMethodGet(_this3,_fitToContent,_fitToContent2).call(_this3);},mustExec:true,type:_util.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:true,keepUndo:true});}function _updateColor2(color){var _this4=this;var savedColor=this.color;this.addCommands({cmd:function cmd(){_this4.color=color;_classPrivateMethodGet(_this4,_redraw,_redraw2).call(_this4);},undo:function undo(){_this4.color=savedColor;_classPrivateMethodGet(_this4,_redraw,_redraw2).call(_this4);},mustExec:true,type:_util.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:true,keepUndo:true});}function _updateOpacity2(opacity){var _this5=this;opacity/=100;var savedOpacity=this.opacity;this.addCommands({cmd:function cmd(){_this5.opacity=opacity;_classPrivateMethodGet(_this5,_redraw,_redraw2).call(_this5);},undo:function undo(){_this5.opacity=savedOpacity;_classPrivateMethodGet(_this5,_redraw,_redraw2).call(_this5);},mustExec:true,type:_util.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:true,keepUndo:true});}function _getInitialBBox2(){var parentRotation=this.parentRotation,_this$parentDimension4=_slicedToArray(this.parentDimensions,2),width=_this$parentDimension4[0],height=_this$parentDimension4[1];switch(parentRotation){case 90:return[0,height,height,width];case 180:return[width,height,width,height];case 270:return[width,0,height,width];default:return[0,0,width,height];}}function _setStroke2(){var ctx=this.ctx,color=this.color,opacity=this.opacity,thickness=this.thickness,parentScale=this.parentScale,scaleFactor=this.scaleFactor;ctx.lineWidth=thickness*parentScale/scaleFactor;ctx.lineCap="round";ctx.lineJoin="round";ctx.miterLimit=10;ctx.strokeStyle="".concat(color).concat((0,_tools.opacityToHex)(opacity));}function _startDrawing2(x,y){var _this6=this;this.isEditing=true;if(!_classPrivateFieldGet(this,_isCanvasInitialized)){var _this$opacity2;_classPrivateFieldSet(this,_isCanvasInitialized,true);_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this);this.thickness||(this.thickness=InkEditor._defaultThickness);this.color||(this.color=InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor);(_this$opacity2=this.opacity)!==null&&_this$opacity2!==void 0?_this$opacity2:this.opacity=InkEditor._defaultOpacity;}this.currentPath.push([x,y]);_classPrivateFieldSet(this,_lastPoint,null);_classPrivateMethodGet(this,_setStroke,_setStroke2).call(this);this.ctx.beginPath();this.ctx.moveTo(x,y);_classPrivateFieldSet(this,_requestFrameCallback,function(){if(!_classPrivateFieldGet(_this6,_requestFrameCallback)){return;}if(_classPrivateFieldGet(_this6,_lastPoint)){var _this6$ctx;if(_this6.isEmpty()){_this6.ctx.setTransform(1,0,0,1,0,0);_this6.ctx.clearRect(0,0,_this6.canvas.width,_this6.canvas.height);}else{_classPrivateMethodGet(_this6,_redraw,_redraw2).call(_this6);}(_this6$ctx=_this6.ctx).lineTo.apply(_this6$ctx,_toConsumableArray(_classPrivateFieldGet(_this6,_lastPoint)));_classPrivateFieldSet(_this6,_lastPoint,null);_this6.ctx.stroke();}window.requestAnimationFrame(_classPrivateFieldGet(_this6,_requestFrameCallback));});window.requestAnimationFrame(_classPrivateFieldGet(this,_requestFrameCallback));}function _draw2(x,y){var _this$currentPath$at=this.currentPath.at(-1),_this$currentPath$at2=_slicedToArray(_this$currentPath$at,2),lastX=_this$currentPath$at2[0],lastY=_this$currentPath$at2[1];if(x===lastX&&y===lastY){return;}this.currentPath.push([x,y]);_classPrivateFieldSet(this,_lastPoint,[x,y]);}function _stopDrawing2(x,y){var _this7=this;this.ctx.closePath();_classPrivateFieldSet(this,_requestFrameCallback,null);x=Math.min(Math.max(x,0),this.canvas.width);y=Math.min(Math.max(y,0),this.canvas.height);var _this$currentPath$at3=this.currentPath.at(-1),_this$currentPath$at4=_slicedToArray(_this$currentPath$at3,2),lastX=_this$currentPath$at4[0],lastY=_this$currentPath$at4[1];if(x!==lastX||y!==lastY){this.currentPath.push([x,y]);}var bezier;if(this.currentPath.length!==1){bezier=(0,_pdfjsFitCurve.fitCurve)(this.currentPath,30,null);}else{var xy=[x,y];bezier=[[xy,xy.slice(),xy.slice(),xy]];}var path2D=_classStaticPrivateMethodGet(InkEditor,InkEditor,_buildPath2D).call(InkEditor,bezier);this.currentPath.length=0;var cmd=function cmd(){_this7.paths.push(bezier);_this7.bezierPath2D.push(path2D);_this7.rebuild();};var undo=function undo(){_this7.paths.pop();_this7.bezierPath2D.pop();if(_this7.paths.length===0){_this7.remove();}else{if(!_this7.canvas){_classPrivateMethodGet(_this7,_createCanvas,_createCanvas2).call(_this7);_classPrivateMethodGet(_this7,_createObserver,_createObserver2).call(_this7);}_classPrivateMethodGet(_this7,_fitToContent,_fitToContent2).call(_this7);}};this.addCommands({cmd:cmd,undo:undo,mustExec:true});}function _redraw2(){if(this.isEmpty()){_classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this);return;}_classPrivateMethodGet(this,_setStroke,_setStroke2).call(this);var canvas=this.canvas,ctx=this.ctx;ctx.setTransform(1,0,0,1,0,0);ctx.clearRect(0,0,canvas.width,canvas.height);_classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this);var _iterator2=_createForOfIteratorHelper(this.bezierPath2D),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var path=_step2.value;ctx.stroke(path);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}function _endDrawing2(event){_classPrivateMethodGet(this,_stopDrawing,_stopDrawing2).call(this,event.offsetX,event.offsetY);this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(this,_boundCanvasPointerleave));this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(this,_boundCanvasPointermove));this.addToAnnotationStorage();}function _createCanvas2(){var _this8=this;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=0;this.canvas.className="inkEditorCanvas";InkEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(function(msg){var _this8$canvas;return(_this8$canvas=_this8.canvas)===null||_this8$canvas===void 0?void 0:_this8$canvas.setAttribute("aria-label",msg);});this.div.append(this.canvas);var options=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:true}:undefined;this.ctx=this.canvas.getContext("2d",options);}function _createObserver2(){var _this9=this;_classPrivateFieldSet(this,_observer,new ResizeObserver(function(entries){var rect=entries[0].contentRect;if(rect.width&&rect.height){_this9.setDimensions(rect.width,rect.height);}}));_classPrivateFieldGet(this,_observer).observe(this.div);}function _setCanvasDims2(){if(!_classPrivateFieldGet(this,_isCanvasInitialized)){return;}var _this$parentDimension5=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension5[0],parentHeight=_this$parentDimension5[1];this.canvas.width=Math.ceil(this.width*parentWidth);this.canvas.height=Math.ceil(this.height*parentHeight);_classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this);}function _setScaleFactor2(width,height){var padding=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this);var scaleFactorW=(width-padding)/_classPrivateFieldGet(this,_baseWidth);var scaleFactorH=(height-padding)/_classPrivateFieldGet(this,_baseHeight);this.scaleFactor=Math.min(scaleFactorW,scaleFactorH);}function _updateTransform2(){var padding=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+padding,this.translationY*this.scaleFactor+padding);}function _buildPath2D(bezier){var path2D=new Path2D();for(var i=0,ii=bezier.length;i<ii;i++){var _bezier$i=_slicedToArray(bezier[i],4),first=_bezier$i[0],control1=_bezier$i[1],control2=_bezier$i[2],second=_bezier$i[3];if(i===0){path2D.moveTo.apply(path2D,_toConsumableArray(first));}path2D.bezierCurveTo(control1[0],control1[1],control2[0],control2[1],second[0],second[1]);}return path2D;}function _serializePaths2(s,tx,ty,h){var NUMBER_OF_POINTS_ON_BEZIER_CURVE=4;var paths=[];var padding=this.thickness/2;var buffer,points;var _iterator3=_createForOfIteratorHelper(this.paths),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var bezier=_step3.value;buffer=[];points=[];for(var i=0,ii=bezier.length;i<ii;i++){var _bezier$i2=_slicedToArray(bezier[i],4),first=_bezier$i2[0],control1=_bezier$i2[1],control2=_bezier$i2[2],second=_bezier$i2[3];var p10=s*(first[0]+tx)+padding;var p11=h-s*(first[1]+ty)-padding;var p20=s*(control1[0]+tx)+padding;var p21=h-s*(control1[1]+ty)-padding;var p30=s*(control2[0]+tx)+padding;var p31=h-s*(control2[1]+ty)-padding;var p40=s*(second[0]+tx)+padding;var p41=h-s*(second[1]+ty)-padding;if(i===0){buffer.push(p10,p11);points.push(p10,p11);}buffer.push(p20,p21,p30,p31,p40,p41);_classPrivateMethodGet(this,_extractPointsOnBezier,_extractPointsOnBezier2).call(this,p10,p11,p20,p21,p30,p31,p40,p41,NUMBER_OF_POINTS_ON_BEZIER_CURVE,points);}paths.push({bezier:buffer,points:points});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return paths;}function _extractPointsOnBezier2(p10,p11,p20,p21,p30,p31,p40,p41,n,points){if(_classPrivateMethodGet(this,_isAlmostFlat,_isAlmostFlat2).call(this,p10,p11,p20,p21,p30,p31,p40,p41)){points.push(p40,p41);return;}for(var i=1;i<n-1;i++){var t=i/n;var mt=1-t;var q10=t*p10+mt*p20;var q11=t*p11+mt*p21;var q20=t*p20+mt*p30;var q21=t*p21+mt*p31;var q30=t*p30+mt*p40;var q31=t*p31+mt*p41;q10=t*q10+mt*q20;q11=t*q11+mt*q21;q20=t*q20+mt*q30;q21=t*q21+mt*q31;q10=t*q10+mt*q20;q11=t*q11+mt*q21;points.push(q10,q11);}points.push(p40,p41);}function _isAlmostFlat2(p10,p11,p20,p21,p30,p31,p40,p41){var tol=10;var ax=Math.pow(3*p20-2*p10-p40,2);var ay=Math.pow(3*p21-2*p11-p41,2);var bx=Math.pow(3*p30-p10-2*p40,2);var by=Math.pow(3*p31-p11-2*p41,2);return Math.max(ax,bx)+Math.max(ay,by)<=tol;}function _getBbox2(){var xMin=Infinity;var xMax=-Infinity;var yMin=Infinity;var yMax=-Infinity;var _iterator4=_createForOfIteratorHelper(this.paths),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var path=_step4.value;var _iterator5=_createForOfIteratorHelper(path),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _step5$value=_slicedToArray(_step5.value,4),first=_step5$value[0],control1=_step5$value[1],control2=_step5$value[2],second=_step5$value[3];var bbox=_util.Util.bezierBoundingBox.apply(_util.Util,_toConsumableArray(first).concat(_toConsumableArray(control1),_toConsumableArray(control2),_toConsumableArray(second)));xMin=Math.min(xMin,bbox[0]);yMin=Math.min(yMin,bbox[1]);xMax=Math.max(xMax,bbox[2]);yMax=Math.max(yMax,bbox[3]);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return[xMin,yMin,xMax,yMax];}function _getPadding2(){return _classPrivateFieldGet(this,_disableEditing)?Math.ceil(this.thickness*this.parentScale):0;}function _fitToContent2(){var firstTime=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()){return;}if(!_classPrivateFieldGet(this,_disableEditing)){_classPrivateMethodGet(this,_redraw,_redraw2).call(this);return;}var bbox=_classPrivateMethodGet(this,_getBbox,_getBbox2).call(this);var padding=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this);_classPrivateFieldSet(this,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0]));_classPrivateFieldSet(this,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1]));var width=Math.ceil(padding+_classPrivateFieldGet(this,_baseWidth)*this.scaleFactor);var height=Math.ceil(padding+_classPrivateFieldGet(this,_baseHeight)*this.scaleFactor);var _this$parentDimension6=_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension6[0],parentHeight=_this$parentDimension6[1];this.width=width/parentWidth;this.height=height/parentHeight;_classPrivateFieldSet(this,_aspectRatio,width/height);_classPrivateMethodGet(this,_setMinDims,_setMinDims2).call(this);var prevTranslationX=this.translationX;var prevTranslationY=this.translationY;this.translationX=-bbox[0];this.translationY=-bbox[1];_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this);_classPrivateMethodGet(this,_redraw,_redraw2).call(this);_classPrivateFieldSet(this,_realWidth,width);_classPrivateFieldSet(this,_realHeight,height);this.setDims(width,height);var unscaledPadding=firstTime?padding/this.scaleFactor/2:0;this.translate(prevTranslationX-this.translationX-unscaledPadding,prevTranslationY-this.translationY-unscaledPadding);}function _setMinDims2(){var style=this.div.style;if(_classPrivateFieldGet(this,_aspectRatio)>=1){style.minHeight="".concat(RESIZER_SIZE,"px");style.minWidth="".concat(Math.round(_classPrivateFieldGet(this,_aspectRatio)*RESIZER_SIZE),"px");}else{style.minWidth="".concat(RESIZER_SIZE,"px");style.minHeight="".concat(Math.round(RESIZER_SIZE/_classPrivateFieldGet(this,_aspectRatio)),"px");}}_defineProperty(InkEditor,"_defaultColor",null);_defineProperty(InkEditor,"_defaultOpacity",1);_defineProperty(InkEditor,"_defaultThickness",1);_defineProperty(InkEditor,"_l10nPromise",void 0);_defineProperty(InkEditor,"_type","ink");

/***/ }),
/* 165 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.fitCurve=void 0;var fitCurve=__w_pdfjs_require__(166);exports.fitCurve=fitCurve;

/***/ }),
/* 166 */
/***/ ((module) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function fitCurve(points,maxError,progressCallback){if(!Array.isArray(points)){throw new TypeError("First argument should be an array");}points.forEach(function(point){if(!Array.isArray(point)||point.some(function(item){return typeof item!=='number';})||point.length!==points[0].length){throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.");}});points=points.filter(function(point,i){return i===0||!point.every(function(val,j){return val===points[i-1][j];});});if(points.length<2){return[];}var len=points.length;var leftTangent=createTangent(points[1],points[0]);var rightTangent=createTangent(points[len-2],points[len-1]);return fitCubic(points,leftTangent,rightTangent,maxError,progressCallback);}function fitCubic(points,leftTangent,rightTangent,error,progressCallback){var MaxIterations=20;var bezCurve,u,uPrime,maxError,prevErr,splitPoint,prevSplit,centerVector,toCenterTangent,fromCenterTangent,beziers,dist,i;if(points.length===2){dist=maths.vectorLen(maths.subtract(points[0],points[1]))/3.0;bezCurve=[points[0],maths.addArrays(points[0],maths.mulItems(leftTangent,dist)),maths.addArrays(points[1],maths.mulItems(rightTangent,dist)),points[1]];return[bezCurve];}u=chordLengthParameterize(points);var _generateAndReport=generateAndReport(points,u,u,leftTangent,rightTangent,progressCallback);var _generateAndReport2=_slicedToArray(_generateAndReport,3);bezCurve=_generateAndReport2[0];maxError=_generateAndReport2[1];splitPoint=_generateAndReport2[2];if(maxError===0||maxError<error){return[bezCurve];}if(maxError<error*error){uPrime=u;prevErr=maxError;prevSplit=splitPoint;for(i=0;i<MaxIterations;i++){uPrime=reparameterize(bezCurve,points,uPrime);var _generateAndReport3=generateAndReport(points,u,uPrime,leftTangent,rightTangent,progressCallback);var _generateAndReport4=_slicedToArray(_generateAndReport3,3);bezCurve=_generateAndReport4[0];maxError=_generateAndReport4[1];splitPoint=_generateAndReport4[2];if(maxError<error){return[bezCurve];}else if(splitPoint===prevSplit){var errChange=maxError/prevErr;if(errChange>.9999&&errChange<1.0001){break;}}prevErr=maxError;prevSplit=splitPoint;}}beziers=[];centerVector=maths.subtract(points[splitPoint-1],points[splitPoint+1]);if(centerVector.every(function(val){return val===0;})){centerVector=maths.subtract(points[splitPoint-1],points[splitPoint]);var _ref=[-centerVector[1],centerVector[0]];centerVector[0]=_ref[0];centerVector[1]=_ref[1];}toCenterTangent=maths.normalize(centerVector);fromCenterTangent=maths.mulItems(toCenterTangent,-1);beziers=beziers.concat(fitCubic(points.slice(0,splitPoint+1),leftTangent,toCenterTangent,error,progressCallback));beziers=beziers.concat(fitCubic(points.slice(splitPoint),fromCenterTangent,rightTangent,error,progressCallback));return beziers;};function generateAndReport(points,paramsOrig,paramsPrime,leftTangent,rightTangent,progressCallback){var bezCurve,maxError,splitPoint;bezCurve=generateBezier(points,paramsPrime,leftTangent,rightTangent,progressCallback);var _computeMaxError=computeMaxError(points,bezCurve,paramsOrig);var _computeMaxError2=_slicedToArray(_computeMaxError,2);maxError=_computeMaxError2[0];splitPoint=_computeMaxError2[1];if(progressCallback){progressCallback({bez:bezCurve,points:points,params:paramsOrig,maxErr:maxError,maxPoint:splitPoint});}return[bezCurve,maxError,splitPoint];}function generateBezier(points,parameters,leftTangent,rightTangent){var bezCurve,A,a,C,X,det_C0_C1,det_C0_X,det_X_C1,alpha_l,alpha_r,epsilon,segLength,i,len,tmp,u,ux,firstPoint=points[0],lastPoint=points[points.length-1];bezCurve=[firstPoint,null,null,lastPoint];A=maths.zeros_Xx2x2(parameters.length);for(i=0,len=parameters.length;i<len;i++){u=parameters[i];ux=1-u;a=A[i];a[0]=maths.mulItems(leftTangent,3*u*(ux*ux));a[1]=maths.mulItems(rightTangent,3*ux*(u*u));}C=[[0,0],[0,0]];X=[0,0];for(i=0,len=points.length;i<len;i++){u=parameters[i];a=A[i];C[0][0]+=maths.dot(a[0],a[0]);C[0][1]+=maths.dot(a[0],a[1]);C[1][0]+=maths.dot(a[0],a[1]);C[1][1]+=maths.dot(a[1],a[1]);tmp=maths.subtract(points[i],bezier.q([firstPoint,firstPoint,lastPoint,lastPoint],u));X[0]+=maths.dot(a[0],tmp);X[1]+=maths.dot(a[1],tmp);}det_C0_C1=C[0][0]*C[1][1]-C[1][0]*C[0][1];det_C0_X=C[0][0]*X[1]-C[1][0]*X[0];det_X_C1=X[0]*C[1][1]-X[1]*C[0][1];alpha_l=det_C0_C1===0?0:det_X_C1/det_C0_C1;alpha_r=det_C0_C1===0?0:det_C0_X/det_C0_C1;segLength=maths.vectorLen(maths.subtract(firstPoint,lastPoint));epsilon=1.0e-6*segLength;if(alpha_l<epsilon||alpha_r<epsilon){bezCurve[1]=maths.addArrays(firstPoint,maths.mulItems(leftTangent,segLength/3.0));bezCurve[2]=maths.addArrays(lastPoint,maths.mulItems(rightTangent,segLength/3.0));}else{bezCurve[1]=maths.addArrays(firstPoint,maths.mulItems(leftTangent,alpha_l));bezCurve[2]=maths.addArrays(lastPoint,maths.mulItems(rightTangent,alpha_r));}return bezCurve;};function reparameterize(bezier,points,parameters){return parameters.map(function(p,i){return newtonRaphsonRootFind(bezier,points[i],p);});};function newtonRaphsonRootFind(bez,point,u){var d=maths.subtract(bezier.q(bez,u),point),qprime=bezier.qprime(bez,u),numerator=maths.mulMatrix(d,qprime),denominator=maths.sum(maths.squareItems(qprime))+2*maths.mulMatrix(d,bezier.qprimeprime(bez,u));if(denominator===0){return u;}else{return u-numerator/denominator;}};function chordLengthParameterize(points){var u=[],currU,prevU,prevP;points.forEach(function(p,i){currU=i?prevU+maths.vectorLen(maths.subtract(p,prevP)):0;u.push(currU);prevU=currU;prevP=p;});u=u.map(function(x){return x/prevU;});return u;};function computeMaxError(points,bez,parameters){var dist,maxDist,splitPoint,v,i,count,point,t;maxDist=0;splitPoint=Math.floor(points.length/2);var t_distMap=mapTtoRelativeDistances(bez,10);for(i=0,count=points.length;i<count;i++){point=points[i];t=find_t(bez,parameters[i],t_distMap,10);v=maths.subtract(bezier.q(bez,t),point);dist=v[0]*v[0]+v[1]*v[1];if(dist>maxDist){maxDist=dist;splitPoint=i;}}return[maxDist,splitPoint];};var mapTtoRelativeDistances=function mapTtoRelativeDistances(bez,B_parts){var B_t_curr;var B_t_dist=[0];var B_t_prev=bez[0];var sumLen=0;for(var i=1;i<=B_parts;i++){B_t_curr=bezier.q(bez,i/B_parts);sumLen+=maths.vectorLen(maths.subtract(B_t_curr,B_t_prev));B_t_dist.push(sumLen);B_t_prev=B_t_curr;}B_t_dist=B_t_dist.map(function(x){return x/sumLen;});return B_t_dist;};function find_t(bez,param,t_distMap,B_parts){if(param<0){return 0;}if(param>1){return 1;}var lenMax,lenMin,tMax,tMin,t;for(var i=1;i<=B_parts;i++){if(param<=t_distMap[i]){tMin=(i-1)/B_parts;tMax=i/B_parts;lenMin=t_distMap[i-1];lenMax=t_distMap[i];t=(param-lenMin)/(lenMax-lenMin)*(tMax-tMin)+tMin;break;}}return t;}function createTangent(pointA,pointB){return maths.normalize(maths.subtract(pointA,pointB));}var maths=/*#__PURE__*/function(){function maths(){_classCallCheck(this,maths);}_createClass(maths,null,[{key:"zeros_Xx2x2",value:function zeros_Xx2x2(x){var zs=[];while(x--){zs.push([0,0]);}return zs;}},{key:"mulItems",value:function mulItems(items,multiplier){return items.map(function(x){return x*multiplier;});}},{key:"mulMatrix",value:function mulMatrix(m1,m2){return m1.reduce(function(sum,x1,i){return sum+x1*m2[i];},0);}},{key:"subtract",value:function subtract(arr1,arr2){return arr1.map(function(x1,i){return x1-arr2[i];});}},{key:"addArrays",value:function addArrays(arr1,arr2){return arr1.map(function(x1,i){return x1+arr2[i];});}},{key:"addItems",value:function addItems(items,addition){return items.map(function(x){return x+addition;});}},{key:"sum",value:function sum(items){return items.reduce(function(sum,x){return sum+x;});}},{key:"dot",value:function dot(m1,m2){return maths.mulMatrix(m1,m2);}},{key:"vectorLen",value:function vectorLen(v){return Math.hypot.apply(Math,_toConsumableArray(v));}},{key:"divItems",value:function divItems(items,divisor){return items.map(function(x){return x/divisor;});}},{key:"squareItems",value:function squareItems(items){return items.map(function(x){return x*x;});}},{key:"normalize",value:function normalize(v){return this.divItems(v,this.vectorLen(v));}}]);return maths;}();var bezier=/*#__PURE__*/function(){function bezier(){_classCallCheck(this,bezier);}_createClass(bezier,null,[{key:"q",value:function q(ctrlPoly,t){var tx=1.0-t;var pA=maths.mulItems(ctrlPoly[0],tx*tx*tx),pB=maths.mulItems(ctrlPoly[1],3*tx*tx*t),pC=maths.mulItems(ctrlPoly[2],3*tx*t*t),pD=maths.mulItems(ctrlPoly[3],t*t*t);return maths.addArrays(maths.addArrays(pA,pB),maths.addArrays(pC,pD));}},{key:"qprime",value:function qprime(ctrlPoly,t){var tx=1.0-t;var pA=maths.mulItems(maths.subtract(ctrlPoly[1],ctrlPoly[0]),3*tx*tx),pB=maths.mulItems(maths.subtract(ctrlPoly[2],ctrlPoly[1]),6*tx*t),pC=maths.mulItems(maths.subtract(ctrlPoly[3],ctrlPoly[2]),3*t*t);return maths.addArrays(maths.addArrays(pA,pB),pC);}},{key:"qprimeprime",value:function qprimeprime(ctrlPoly,t){return maths.addArrays(maths.mulItems(maths.addArrays(maths.subtract(ctrlPoly[2],maths.mulItems(ctrlPoly[1],2)),ctrlPoly[0]),6*(1.0-t)),maths.mulItems(maths.addArrays(maths.subtract(ctrlPoly[3],maths.mulItems(ctrlPoly[2],2)),ctrlPoly[1]),6*t));}}]);return bezier;}();globalThis["pdfjs-dist/build/pdf"]=module.exports=fitCurve;module.exports.fitCubic=fitCubic;module.exports.createTangent=createTangent;

/***/ }),
/* 167 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.AnnotationLayer=void 0;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(141);var _annotation_storage=__w_pdfjs_require__(138);var _scripting_utils=__w_pdfjs_require__(168);var _xfa_layer=__w_pdfjs_require__(169);function _classStaticPrivateMethodGet(receiver,classConstructor,method){_classCheckPrivateStaticAccess(receiver,classConstructor);return method;}function _classCheckPrivateStaticAccess(receiver,classConstructor){if(receiver!==classConstructor){throw new TypeError("Private static access of wrong provenance");}}function _get(){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get.bind();}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return fn;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var DEFAULT_TAB_INDEX=1000;var DEFAULT_FONT_SIZE=9;var GetElementsByNameSet=new WeakSet();function getRectDims(rect){return{width:rect[2]-rect[0],height:rect[3]-rect[1]};}var AnnotationElementFactory=/*#__PURE__*/function(){function AnnotationElementFactory(){_classCallCheck(this,AnnotationElementFactory);}_createClass(AnnotationElementFactory,null,[{key:"create",value:function create(parameters){var subtype=parameters.data.annotationType;switch(subtype){case _util.AnnotationType.LINK:return new LinkAnnotationElement(parameters);case _util.AnnotationType.TEXT:return new TextAnnotationElement(parameters);case _util.AnnotationType.WIDGET:var fieldType=parameters.data.fieldType;switch(fieldType){case"Tx":return new TextWidgetAnnotationElement(parameters);case"Btn":if(parameters.data.radioButton){return new RadioButtonWidgetAnnotationElement(parameters);}else if(parameters.data.checkBox){return new CheckboxWidgetAnnotationElement(parameters);}return new PushButtonWidgetAnnotationElement(parameters);case"Ch":return new ChoiceWidgetAnnotationElement(parameters);}return new WidgetAnnotationElement(parameters);case _util.AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case _util.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case _util.AnnotationType.LINE:return new LineAnnotationElement(parameters);case _util.AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case _util.AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case _util.AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case _util.AnnotationType.CARET:return new CaretAnnotationElement(parameters);case _util.AnnotationType.INK:return new InkAnnotationElement(parameters);case _util.AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case _util.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case _util.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case _util.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case _util.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case _util.AnnotationType.STAMP:return new StampAnnotationElement(parameters);case _util.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters);}}}]);return AnnotationElementFactory;}();var AnnotationElement=/*#__PURE__*/function(){function AnnotationElement(parameters){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$isRenderable=_ref.isRenderable,isRenderable=_ref$isRenderable===void 0?false:_ref$isRenderable,_ref$ignoreBorder=_ref.ignoreBorder,ignoreBorder=_ref$ignoreBorder===void 0?false:_ref$ignoreBorder,_ref$createQuadrilate=_ref.createQuadrilaterals,createQuadrilaterals=_ref$createQuadrilate===void 0?false:_ref$createQuadrilate;_classCallCheck(this,AnnotationElement);this.isRenderable=isRenderable;this.data=parameters.data;this.layer=parameters.layer;this.page=parameters.page;this.viewport=parameters.viewport;this.linkService=parameters.linkService;this.downloadManager=parameters.downloadManager;this.imageResourcesPath=parameters.imageResourcesPath;this.renderForms=parameters.renderForms;this.svgFactory=parameters.svgFactory;this.annotationStorage=parameters.annotationStorage;this.enableScripting=parameters.enableScripting;this.hasJSActions=parameters.hasJSActions;this._fieldObjects=parameters.fieldObjects;if(isRenderable){this.container=this._createContainer(ignoreBorder);}if(createQuadrilaterals){this.quadrilaterals=this._createQuadrilaterals(ignoreBorder);}}_createClass(AnnotationElement,[{key:"_createContainer",value:function _createContainer(){var ignoreBorder=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var data=this.data,page=this.page,viewport=this.viewport;var container=document.createElement("section");container.setAttribute("data-annotation-id",data.id);if(data.noRotate){container.classList.add("norotate");}var _viewport$rawDims=viewport.rawDims,pageWidth=_viewport$rawDims.pageWidth,pageHeight=_viewport$rawDims.pageHeight,pageX=_viewport$rawDims.pageX,pageY=_viewport$rawDims.pageY;var _getRectDims=getRectDims(data.rect),width=_getRectDims.width,height=_getRectDims.height;var rect=_util.Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);if(!ignoreBorder&&data.borderStyle.width>0){container.style.borderWidth="".concat(data.borderStyle.width,"px");var horizontalRadius=data.borderStyle.horizontalCornerRadius;var verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){var radius="calc(".concat(horizontalRadius,"px * var(--scale-factor)) / calc(").concat(verticalRadius,"px * var(--scale-factor))");container.style.borderRadius=radius;}else if(this instanceof RadioButtonWidgetAnnotationElement){var _radius="calc(".concat(width,"px * var(--scale-factor)) / calc(").concat(height,"px * var(--scale-factor))");container.style.borderRadius=_radius;}switch(data.borderStyle.style){case _util.AnnotationBorderStyleType.SOLID:container.style.borderStyle="solid";break;case _util.AnnotationBorderStyleType.DASHED:container.style.borderStyle="dashed";break;case _util.AnnotationBorderStyleType.BEVELED:(0,_util.warn)("Unimplemented border style: beveled");break;case _util.AnnotationBorderStyleType.INSET:(0,_util.warn)("Unimplemented border style: inset");break;case _util.AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle="solid";break;default:break;}var borderColor=data.borderColor||null;if(borderColor){container.style.borderColor=_util.Util.makeHexColor(borderColor[0]|0,borderColor[1]|0,borderColor[2]|0);}else{container.style.borderWidth=0;}}container.style.left="".concat(100*(rect[0]-pageX)/pageWidth,"%");container.style.top="".concat(100*(rect[1]-pageY)/pageHeight,"%");var rotation=data.rotation;if(data.hasOwnCanvas||rotation===0){container.style.width="".concat(100*width/pageWidth,"%");container.style.height="".concat(100*height/pageHeight,"%");}else{this.setRotation(rotation,container);}return container;}},{key:"setRotation",value:function setRotation(angle){var container=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.container;var _this$viewport$rawDim=this.viewport.rawDims,pageWidth=_this$viewport$rawDim.pageWidth,pageHeight=_this$viewport$rawDim.pageHeight;var _getRectDims2=getRectDims(this.data.rect),width=_getRectDims2.width,height=_getRectDims2.height;var elementWidth,elementHeight;if(angle%180===0){elementWidth=100*width/pageWidth;elementHeight=100*height/pageHeight;}else{elementWidth=100*height/pageWidth;elementHeight=100*width/pageHeight;}container.style.width="".concat(elementWidth,"%");container.style.height="".concat(elementHeight,"%");container.setAttribute("data-main-rotation",(360-angle)%360);}},{key:"_commonActions",get:function get(){var _this=this;var setColor=function setColor(jsName,styleName,event){var color=event.detail[jsName];event.target.style[styleName]=_scripting_utils.ColorConverters["".concat(color[0],"_HTML")](color.slice(1));};return(0,_util.shadow)(this,"_commonActions",{display:function display(event){var hidden=event.detail.display%2===1;_this.container.style.visibility=hidden?"hidden":"visible";_this.annotationStorage.setValue(_this.data.id,{hidden:hidden,print:event.detail.display===0||event.detail.display===3});},print:function print(event){_this.annotationStorage.setValue(_this.data.id,{print:event.detail.print});},hidden:function hidden(event){_this.container.style.visibility=event.detail.hidden?"hidden":"visible";_this.annotationStorage.setValue(_this.data.id,{hidden:event.detail.hidden});},focus:function focus(event){setTimeout(function(){return event.target.focus({preventScroll:false});},0);},userName:function userName(event){event.target.title=event.detail.userName;},readonly:function readonly(event){if(event.detail.readonly){event.target.setAttribute("readonly","");}else{event.target.removeAttribute("readonly");}},required:function required(event){_this._setRequired(event.target,event.detail.required);},bgColor:function bgColor(event){setColor("bgColor","backgroundColor",event);},fillColor:function fillColor(event){setColor("fillColor","backgroundColor",event);},fgColor:function fgColor(event){setColor("fgColor","color",event);},textColor:function textColor(event){setColor("textColor","color",event);},borderColor:function borderColor(event){setColor("borderColor","borderColor",event);},strokeColor:function strokeColor(event){setColor("strokeColor","borderColor",event);},rotation:function rotation(event){var angle=event.detail.rotation;_this.setRotation(angle);_this.annotationStorage.setValue(_this.data.id,{rotation:angle});}});}},{key:"_dispatchEventFromSandbox",value:function _dispatchEventFromSandbox(actions,jsEvent){var commonActions=this._commonActions;for(var _i=0,_Object$keys=Object.keys(jsEvent.detail);_i<_Object$keys.length;_i++){var name=_Object$keys[_i];var action=actions[name]||commonActions[name];action===null||action===void 0?void 0:action(jsEvent);}}},{key:"_setDefaultPropertiesFromJS",value:function _setDefaultPropertiesFromJS(element){if(!this.enableScripting){return;}var storedData=this.annotationStorage.getRawValue(this.data.id);if(!storedData){return;}var commonActions=this._commonActions;for(var _i2=0,_Object$entries=Object.entries(storedData);_i2<_Object$entries.length;_i2++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i2],2),actionName=_Object$entries$_i[0],detail=_Object$entries$_i[1];var action=commonActions[actionName];if(action){var eventProxy={detail:_defineProperty({},actionName,detail),target:element};action(eventProxy);delete storedData[actionName];}}}},{key:"_createQuadrilaterals",value:function _createQuadrilaterals(){var ignoreBorder=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!this.data.quadPoints){return null;}var quadrilaterals=[];var savedRect=this.data.rect;var _iterator=_createForOfIteratorHelper(this.data.quadPoints),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var quadPoint=_step.value;this.data.rect=[quadPoint[2].x,quadPoint[2].y,quadPoint[1].x,quadPoint[1].y];quadrilaterals.push(this._createContainer(ignoreBorder));}}catch(err){_iterator.e(err);}finally{_iterator.f();}this.data.rect=savedRect;return quadrilaterals;}},{key:"_createPopup",value:function _createPopup(trigger,data){var container=this.container;if(this.quadrilaterals){trigger=trigger||this.quadrilaterals;container=this.quadrilaterals[0];}if(!trigger){trigger=document.createElement("div");trigger.classList.add("popupTriggerArea");container.append(trigger);}var popupElement=new PopupElement({container:container,trigger:trigger,color:data.color,titleObj:data.titleObj,modificationDate:data.modificationDate,contentsObj:data.contentsObj,richText:data.richText,hideWrapper:true});var popup=popupElement.render();popup.style.left="100%";container.append(popup);}},{key:"_renderQuadrilaterals",value:function _renderQuadrilaterals(className){var _iterator2=_createForOfIteratorHelper(this.quadrilaterals),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var quadrilateral=_step2.value;quadrilateral.classList.add(className);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return this.quadrilaterals;}},{key:"render",value:function render(){(0,_util.unreachable)("Abstract method `AnnotationElement.render` called");}},{key:"_getElementsByName",value:function _getElementsByName(name){var skipId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var fields=[];if(this._fieldObjects){var fieldObj=this._fieldObjects[name];if(fieldObj){var _iterator3=_createForOfIteratorHelper(fieldObj),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step3$value=_step3.value,page=_step3$value.page,id=_step3$value.id,exportValues=_step3$value.exportValues;if(page===-1){continue;}if(id===skipId){continue;}var exportValue=typeof exportValues==="string"?exportValues:null;var domElement=document.querySelector("[data-element-id=\"".concat(id,"\"]"));if(domElement&&!GetElementsByNameSet.has(domElement)){(0,_util.warn)("_getElementsByName - element not allowed: ".concat(id));continue;}fields.push({id:id,exportValue:exportValue,domElement:domElement});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}return fields;}var _iterator4=_createForOfIteratorHelper(document.getElementsByName(name)),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _domElement=_step4.value;var _exportValue=_domElement.exportValue;var _id=_domElement.getAttribute("data-element-id");if(_id===skipId){continue;}if(!GetElementsByNameSet.has(_domElement)){continue;}fields.push({id:_id,exportValue:_exportValue,domElement:_domElement});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return fields;}}]);return AnnotationElement;}();var _setInternalLink=/*#__PURE__*/new WeakSet();var _bindSetOCGState=/*#__PURE__*/new WeakSet();var LinkAnnotationElement=/*#__PURE__*/function(_AnnotationElement){_inherits(LinkAnnotationElement,_AnnotationElement);var _super=_createSuper(LinkAnnotationElement);function LinkAnnotationElement(parameters){var _this2;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,LinkAnnotationElement);_this2=_super.call(this,parameters,{isRenderable:true,ignoreBorder:!!(options!==null&&options!==void 0&&options.ignoreBorder),createQuadrilaterals:true});_classPrivateMethodInitSpec(_assertThisInitialized(_this2),_bindSetOCGState);_classPrivateMethodInitSpec(_assertThisInitialized(_this2),_setInternalLink);_this2.isTooltipOnly=parameters.data.isTooltipOnly;return _this2;}_createClass(LinkAnnotationElement,[{key:"render",value:function render(){var data=this.data,linkService=this.linkService;var link=document.createElement("a");link.setAttribute("data-element-id",data.id);var isBound=false;if(data.url){linkService.addLinkAttributes(link,data.url,data.newWindow);isBound=true;}else if(data.action){this._bindNamedAction(link,data.action);isBound=true;}else if(data.attachment){this._bindAttachment(link,data.attachment);isBound=true;}else if(data.setOCGState){_classPrivateMethodGet(this,_bindSetOCGState,_bindSetOCGState2).call(this,link,data.setOCGState);isBound=true;}else if(data.dest){this._bindLink(link,data.dest);isBound=true;}else{if(data.actions&&(data.actions.Action||data.actions["Mouse Up"]||data.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(link,data);isBound=true;}if(data.resetForm){this._bindResetFormAction(link,data.resetForm);isBound=true;}else if(this.isTooltipOnly&&!isBound){this._bindLink(link,"");isBound=true;}}if(this.quadrilaterals){return this._renderQuadrilaterals("linkAnnotation").map(function(quadrilateral,index){var linkElement=index===0?link:link.cloneNode();quadrilateral.append(linkElement);return quadrilateral;});}this.container.classList.add("linkAnnotation");if(isBound){this.container.append(link);}return this.container;}},{key:"_bindLink",value:function _bindLink(link,destination){var _this3=this;link.href=this.linkService.getDestinationHash(destination);link.onclick=function(){if(destination){_this3.linkService.goToDestination(destination);}return false;};if(destination||destination===""){_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);}}},{key:"_bindNamedAction",value:function _bindNamedAction(link,action){var _this4=this;link.href=this.linkService.getAnchorUrl("");link.onclick=function(){_this4.linkService.executeNamedAction(action);return false;};_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);}},{key:"_bindAttachment",value:function _bindAttachment(link,attachment){var _this5=this;link.href=this.linkService.getAnchorUrl("");link.onclick=function(){var _this5$downloadManage;(_this5$downloadManage=_this5.downloadManager)===null||_this5$downloadManage===void 0?void 0:_this5$downloadManage.openOrDownloadData(_this5.container,attachment.content,attachment.filename);return false;};_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);}},{key:"_bindJSAction",value:function _bindJSAction(link,data){var _this6=this;link.href=this.linkService.getAnchorUrl("");var map=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);var _loop=function _loop(){var name=_Object$keys2[_i3];var jsName=map.get(name);if(!jsName){return"continue";}link[jsName]=function(){var _this6$linkService$ev;(_this6$linkService$ev=_this6.linkService.eventBus)===null||_this6$linkService$ev===void 0?void 0:_this6$linkService$ev.dispatch("dispatcheventinsandbox",{source:_this6,detail:{id:data.id,name:name}});return false;};};for(var _i3=0,_Object$keys2=Object.keys(data.actions);_i3<_Object$keys2.length;_i3++){var _ret=_loop();if(_ret==="continue")continue;}if(!link.onclick){link.onclick=function(){return false;};}_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);}},{key:"_bindResetFormAction",value:function _bindResetFormAction(link,resetForm){var _this7=this;var otherClickAction=link.onclick;if(!otherClickAction){link.href=this.linkService.getAnchorUrl("");}_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);if(!this._fieldObjects){(0,_util.warn)("_bindResetFormAction - \"resetForm\" action not supported, "+"ensure that the `fieldObjects` parameter is provided.");if(!otherClickAction){link.onclick=function(){return false;};}return;}link.onclick=function(){otherClickAction===null||otherClickAction===void 0?void 0:otherClickAction();var resetFormFields=resetForm.fields,resetFormRefs=resetForm.refs,include=resetForm.include;var allFields=[];if(resetFormFields.length!==0||resetFormRefs.length!==0){var fieldIds=new Set(resetFormRefs);var _iterator5=_createForOfIteratorHelper(resetFormFields),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var fieldName=_step5.value;var _fields=_this7._fieldObjects[fieldName]||[];var _iterator7=_createForOfIteratorHelper(_fields),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var id=_step7.value.id;fieldIds.add(id);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}for(var _i4=0,_Object$values=Object.values(_this7._fieldObjects);_i4<_Object$values.length;_i4++){var fields=_Object$values[_i4];var _iterator6=_createForOfIteratorHelper(fields),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var field=_step6.value;if(fieldIds.has(field.id)===include){allFields.push(field);}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}}else{for(var _i5=0,_Object$values2=Object.values(_this7._fieldObjects);_i5<_Object$values2.length;_i5++){var _fields2=_Object$values2[_i5];allFields.push.apply(allFields,_toConsumableArray(_fields2));}}var storage=_this7.annotationStorage;var allIds=[];for(var _i6=0,_allFields=allFields;_i6<_allFields.length;_i6++){var _field=_allFields[_i6];var _id2=_field.id;allIds.push(_id2);switch(_field.type){case"text":{var value=_field.defaultValue||"";storage.setValue(_id2,{value:value});window.updateAngularFormValue(_id2,{value:value});break;}case"checkbox":case"radiobutton":{var _value=_field.defaultValue===_field.exportValues;storage.setValue(_id2,{value:_value});window.updateAngularFormValue(_id2,{value:_value});break;}case"combobox":case"listbox":{var _value2=_field.defaultValue||"";storage.setValue(_id2,{value:_value2});window.updateAngularFormValue(_id2,{value:_value2});break;}default:continue;}var domElement=document.querySelector("[data-element-id=\"".concat(_id2,"\"]"));if(!domElement){continue;}else if(!GetElementsByNameSet.has(domElement)){(0,_util.warn)("_bindResetFormAction - element not allowed: ".concat(_id2));continue;}domElement.dispatchEvent(new Event("resetform"));}if(_this7.enableScripting){var _this7$linkService$ev;(_this7$linkService$ev=_this7.linkService.eventBus)===null||_this7$linkService$ev===void 0?void 0:_this7$linkService$ev.dispatch("dispatcheventinsandbox",{source:_this7,detail:{id:"app",ids:allIds,name:"ResetForm"}});}return false;};}}]);return LinkAnnotationElement;}(AnnotationElement);function _setInternalLink2(){this.container.setAttribute("data-internal-link","");}function _bindSetOCGState2(link,action){var _this19=this;link.href=this.linkService.getAnchorUrl("");link.onclick=function(){_this19.linkService.executeSetOCGState(action);return false;};_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);}var TextAnnotationElement=/*#__PURE__*/function(_AnnotationElement2){_inherits(TextAnnotationElement,_AnnotationElement2);var _super2=_createSuper(TextAnnotationElement);function TextAnnotationElement(parameters){var _parameters$data$titl,_parameters$data$cont,_parameters$data$rich;_classCallCheck(this,TextAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl=parameters.data.titleObj)!==null&&_parameters$data$titl!==void 0&&_parameters$data$titl.str||(_parameters$data$cont=parameters.data.contentsObj)!==null&&_parameters$data$cont!==void 0&&_parameters$data$cont.str||(_parameters$data$rich=parameters.data.richText)!==null&&_parameters$data$rich!==void 0&&_parameters$data$rich.str);return _super2.call(this,parameters,{isRenderable:isRenderable});}_createClass(TextAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("textAnnotation");var image=document.createElement("img");image.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";image.alt="[{{type}} Annotation]";image.dataset.l10nId="text_annotation_type";image.dataset.l10nArgs=JSON.stringify({type:this.data.name});if(!this.data.hasPopup){this._createPopup(image,this.data);}this.container.append(image);return this.container;}}]);return TextAnnotationElement;}(AnnotationElement);var WidgetAnnotationElement=/*#__PURE__*/function(_AnnotationElement3){_inherits(WidgetAnnotationElement,_AnnotationElement3);var _super3=_createSuper(WidgetAnnotationElement);function WidgetAnnotationElement(){_classCallCheck(this,WidgetAnnotationElement);return _super3.apply(this,arguments);}_createClass(WidgetAnnotationElement,[{key:"render",value:function render(){if(this.data.alternativeText){this.container.title=this.data.alternativeText;}return this.container;}},{key:"_getKeyModifier",value:function _getKeyModifier(event){var _FeatureTest$platform=_util.FeatureTest.platform,isWin=_FeatureTest$platform.isWin,isMac=_FeatureTest$platform.isMac;return isWin&&event.ctrlKey||isMac&&event.metaKey;}},{key:"_setEventListener",value:function _setEventListener(element,baseName,eventName,valueGetter){var _this8=this;if(baseName.includes("mouse")){element.addEventListener(baseName,function(event){var _this8$linkService$ev;(_this8$linkService$ev=_this8.linkService.eventBus)===null||_this8$linkService$ev===void 0?void 0:_this8$linkService$ev.dispatch("dispatcheventinsandbox",{source:_this8,detail:{id:_this8.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:_this8._getKeyModifier(event)}});});}else{element.addEventListener(baseName,function(event){var _this8$linkService$ev2;(_this8$linkService$ev2=_this8.linkService.eventBus)===null||_this8$linkService$ev2===void 0?void 0:_this8$linkService$ev2.dispatch("dispatcheventinsandbox",{source:_this8,detail:{id:_this8.data.id,name:eventName,value:valueGetter(event)}});});}}},{key:"_setEventListeners",value:function _setEventListeners(element,names,getter){var _iterator8=_createForOfIteratorHelper(names),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _this$data$actions;var _step8$value=_slicedToArray(_step8.value,2),baseName=_step8$value[0],eventName=_step8$value[1];if(eventName==="Action"||(_this$data$actions=this.data.actions)!==null&&_this$data$actions!==void 0&&_this$data$actions[eventName]){this._setEventListener(element,baseName,eventName,getter);}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}},{key:"_setBackgroundColor",value:function _setBackgroundColor(element){var color=this.data.backgroundColor||null;element.style.backgroundColor=color===null?"transparent":_util.Util.makeHexColor(color[0],color[1],color[2]);}},{key:"_setTextStyle",value:function _setTextStyle(element){var TEXT_ALIGNMENT=["left","center","right"];var fontColor=this.data.defaultAppearanceData.fontColor;var fontSize=this.data.defaultAppearanceData.fontSize||DEFAULT_FONT_SIZE;var style=element.style;var computedFontSize;var BORDER_SIZE=2;var roundToOneDecimal=function roundToOneDecimal(x){return Math.round(10*x)/10;};if(this.data.multiLine){var height=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);var numberOfLines=Math.round(height/(_util.LINE_FACTOR*fontSize))||1;var lineHeight=height/numberOfLines;computedFontSize=Math.min(fontSize,roundToOneDecimal(lineHeight/_util.LINE_FACTOR));}else{var _height=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);computedFontSize=Math.min(fontSize,roundToOneDecimal(_height/_util.LINE_FACTOR));}style.fontSize="calc(".concat(computedFontSize,"px * var(--scale-factor))");style.color=_util.Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]);if(this.data.textAlignment!==null){style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment];}}},{key:"_setRequired",value:function _setRequired(element,isRequired){if(isRequired){element.setAttribute("required",true);}else{element.removeAttribute("required");}element.setAttribute("aria-required",isRequired);}}]);return WidgetAnnotationElement;}(AnnotationElement);var TextWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem){_inherits(TextWidgetAnnotationElement,_WidgetAnnotationElem);var _super4=_createSuper(TextWidgetAnnotationElement);function TextWidgetAnnotationElement(parameters){_classCallCheck(this,TextWidgetAnnotationElement);var isRenderable=parameters.renderForms||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;return _super4.call(this,parameters,{isRenderable:isRenderable});}_createClass(TextWidgetAnnotationElement,[{key:"setPropertyOnSiblings",value:function setPropertyOnSiblings(base,key,value,keyInStorage){var storage=this.annotationStorage;var _iterator9=_createForOfIteratorHelper(this._getElementsByName(base.name,base.id)),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var element=_step9.value;if(element.domElement){element.domElement[key]=value;}storage.setValue(element.id,_defineProperty({},keyInStorage,value));}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}},{key:"render",value:function render(){var _this9=this;var storage=this.annotationStorage;var id=this.data.id;this.container.classList.add("textWidgetAnnotation");var element=null;if(this.renderForms){var angularData=window.getFormValueFromAngular(this.data.fieldName);var storedData=angularData.value?angularData:storage.getValue(id,{value:this.data.fieldValue});var textContent=storedData.formattedValue||storedData.value||"";var maxLen=storage.getValue(id,{charLimit:this.data.maxLen}).charLimit;if(maxLen&&textContent.length>maxLen){textContent=textContent.slice(0,maxLen);}var elementData={userValue:textContent,formattedValue:null,lastCommittedValue:null,commitKey:1};if(this.data.multiLine){element=document.createElement("textarea");element.textContent=textContent;if(this.data.doNotScroll){element.style.overflowY="hidden";}}else{element=document.createElement("input");element.type="text";element.setAttribute("value",textContent);if(this.data.doNotScroll){element.style.overflowX="hidden";}}GetElementsByNameSet.add(element);element.setAttribute("data-element-id",id);element.disabled=this.data.readOnly;element.name=this.data.fieldName;element.tabIndex=DEFAULT_TAB_INDEX;this._setRequired(element,this.data.required);if(maxLen){element.maxLength=maxLen;}element.addEventListener("input",function(event){storage.setValue(id,{value:event.target.value});window.updateAngularFormValue(id,{value:event.target.value});_this9.setPropertyOnSiblings(element,"value",event.target.value,"value");});element.addEventListener("resetform",function(event){var _this9$data$defaultFi;var defaultValue=(_this9$data$defaultFi=_this9.data.defaultFieldValue)!==null&&_this9$data$defaultFi!==void 0?_this9$data$defaultFi:"";element.value=elementData.userValue=defaultValue;elementData.formattedValue=null;});var blurListener=function blurListener(event){var formattedValue=elementData.formattedValue;if(formattedValue!==null&&formattedValue!==undefined){event.target.value=formattedValue;}event.target.scrollLeft=0;};window.registerAcroformField(id,element,storedData.value);element.addEventListener("updateFromAngular",function(newvalue){return storage.setValue(id,{value:newvalue.detail});});if(this.enableScripting&&this.hasJSActions){var _this$data$actions2;element.addEventListener("focus",function(event){var target=event.target;if(elementData.userValue){target.value=elementData.userValue;}elementData.lastCommittedValue=target.value;elementData.commitKey=1;});element.addEventListener("updatefromsandbox",function(jsEvent){var actions={value:function value(event){var _event$detail$value;elementData.userValue=(_event$detail$value=event.detail.value)!==null&&_event$detail$value!==void 0?_event$detail$value:"";storage.setValue(id,{value:elementData.userValue.toString()});window.updateAngularFormValue(id,{value:elementData.userValue.toString()});event.target.value=elementData.userValue;},formattedValue:function formattedValue(event){var formattedValue=event.detail.formattedValue;elementData.formattedValue=formattedValue;if(formattedValue!==null&&formattedValue!==undefined&&event.target!==document.activeElement){event.target.value=formattedValue;}storage.setValue(id,{formattedValue:formattedValue});window.updateAngularFormValue(id,{formattedValue:formattedValue});},selRange:function selRange(event){var _event$target;(_event$target=event.target).setSelectionRange.apply(_event$target,_toConsumableArray(event.detail.selRange));},charLimit:function charLimit(event){var _this9$linkService$ev;var charLimit=event.detail.charLimit;var target=event.target;if(charLimit===0){target.removeAttribute("maxLength");return;}target.setAttribute("maxLength",charLimit);var value=elementData.userValue;if(!value||value.length<=charLimit){return;}value=value.slice(0,charLimit);target.value=elementData.userValue=value;storage.setValue(id,{value:value});window.updateAngularFormValue(id,{value:value});(_this9$linkService$ev=_this9.linkService.eventBus)===null||_this9$linkService$ev===void 0?void 0:_this9$linkService$ev.dispatch("dispatcheventinsandbox",{source:_this9,detail:{id:id,name:"Keystroke",value:value,willCommit:true,commitKey:1,selStart:target.selectionStart,selEnd:target.selectionEnd}});}};_this9._dispatchEventFromSandbox(actions,jsEvent);});element.addEventListener("keydown",function(event){var _this9$linkService$ev2;elementData.commitKey=1;var commitKey=-1;if(event.key==="Escape"){commitKey=0;}else if(event.key==="Enter"&&!_this9.data.multiLine){commitKey=2;}else if(event.key==="Tab"){elementData.commitKey=3;}if(commitKey===-1){return;}var value=event.target.value;if(elementData.lastCommittedValue===value){return;}elementData.lastCommittedValue=value;elementData.userValue=value;(_this9$linkService$ev2=_this9.linkService.eventBus)===null||_this9$linkService$ev2===void 0?void 0:_this9$linkService$ev2.dispatch("dispatcheventinsandbox",{source:_this9,detail:{id:id,name:"Keystroke",value:value,willCommit:true,commitKey:commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});});var _blurListener=blurListener;blurListener=null;element.addEventListener("blur",function(event){if(!event.relatedTarget){return;}var value=event.target.value;elementData.userValue=value;if(elementData.lastCommittedValue!==value){var _this9$linkService$ev3;(_this9$linkService$ev3=_this9.linkService.eventBus)===null||_this9$linkService$ev3===void 0?void 0:_this9$linkService$ev3.dispatch("dispatcheventinsandbox",{source:_this9,detail:{id:id,name:"Keystroke",value:value,willCommit:true,commitKey:elementData.commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});}_blurListener(event);});if((_this$data$actions2=this.data.actions)!==null&&_this$data$actions2!==void 0&&_this$data$actions2.Keystroke){element.addEventListener("beforeinput",function(event){var _this9$linkService$ev4;elementData.lastCommittedValue=null;var data=event.data,target=event.target;var value=target.value,selectionStart=target.selectionStart,selectionEnd=target.selectionEnd;var selStart=selectionStart,selEnd=selectionEnd;switch(event.inputType){case"deleteWordBackward":{var match=value.substring(0,selectionStart).match(/\w*[^\w]*$/);if(match){selStart-=match[0].length;}break;}case"deleteWordForward":{var _match=value.substring(selectionStart).match(/^[^\w]*\w*/);if(_match){selEnd+=_match[0].length;}break;}case"deleteContentBackward":if(selectionStart===selectionEnd){selStart-=1;}break;case"deleteContentForward":if(selectionStart===selectionEnd){selEnd+=1;}break;}event.preventDefault();(_this9$linkService$ev4=_this9.linkService.eventBus)===null||_this9$linkService$ev4===void 0?void 0:_this9$linkService$ev4.dispatch("dispatcheventinsandbox",{source:_this9,detail:{id:id,name:"Keystroke",value:value,change:data||"",willCommit:false,selStart:selStart,selEnd:selEnd}});});}this._setEventListeners(element,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(event){return event.target.value;});}if(blurListener){element.addEventListener("blur",blurListener);}if(this.data.comb){var fieldWidth=this.data.rect[2]-this.data.rect[0];var combWidth=fieldWidth/maxLen;element.classList.add("comb");element.style.letterSpacing="calc(".concat(combWidth,"px * var(--scale-factor) - 1ch)");}}else{element=document.createElement("div");element.textContent=this.data.fieldValue;element.style.verticalAlign="middle";element.style.display="table-cell";}this._setTextStyle(element);this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}]);return TextWidgetAnnotationElement;}(WidgetAnnotationElement);var CheckboxWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem2){_inherits(CheckboxWidgetAnnotationElement,_WidgetAnnotationElem2);var _super5=_createSuper(CheckboxWidgetAnnotationElement);function CheckboxWidgetAnnotationElement(parameters){_classCallCheck(this,CheckboxWidgetAnnotationElement);return _super5.call(this,parameters,{isRenderable:parameters.renderForms});}_createClass(CheckboxWidgetAnnotationElement,[{key:"render",value:function render(){var _this10=this;var storage=this.annotationStorage;var data=this.data;var id=data.id;var angularData=window.getFormValueFromAngular(this.data.fieldName);var angularValue=undefined;if(angularData.value){angularValue=angularData.value===true||angularData.value===data.exportValue;}var value=angularValue!==undefined?angularValue:storage.getValue(id,{value:data.exportValue===data.fieldValue}).value;if(typeof value==="string"){value=value!=="Off";storage.setValue(id,{value:value});window.updateAngularFormValue(id,{value:value});}this.container.classList.add("buttonWidgetAnnotation","checkBox");var element=document.createElement("input");GetElementsByNameSet.add(element);element.setAttribute("data-element-id",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type="checkbox";element.name=data.fieldName;if(value){element.setAttribute("checked",true);}element.setAttribute("exportValue",data.exportValue);element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener("change",function(event){var _event$target2=event.target,name=_event$target2.name,checked=_event$target2.checked;var _iterator10=_createForOfIteratorHelper(_this10._getElementsByName(name,id)),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var checkbox=_step10.value;var curChecked=checked&&checkbox.exportValue===data.exportValue;if(checkbox.domElement){checkbox.domElement.checked=curChecked;}storage.setValue(checkbox.id,{value:curChecked});window.updateAngularFormValue(id,{value:curChecked});}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}storage.setValue(id,{value:checked});window.updateAngularFormValue(id,{value:checked});});element.addEventListener("resetform",function(event){var defaultValue=data.defaultFieldValue||"Off";event.target.checked=defaultValue===data.exportValue;});window.registerAcroformField(id,element,value?data.exportValue:false);element.addEventListener("updateFromAngular",function(newvalue){return storage.setValue(id,{value:newvalue.detail});});if(this.enableScripting&&this.hasJSActions){element.addEventListener("updatefromsandbox",function(jsEvent){var actions={value:function value(event){event.target.checked=event.detail.value!=="Off";storage.setValue(id,{value:event.target.checked});window.updateAngularFormValue(id,{value:event.target.value});}};_this10._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(event){return event.target.checked;});}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}]);return CheckboxWidgetAnnotationElement;}(WidgetAnnotationElement);var RadioButtonWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem3){_inherits(RadioButtonWidgetAnnotationElement,_WidgetAnnotationElem3);var _super6=_createSuper(RadioButtonWidgetAnnotationElement);function RadioButtonWidgetAnnotationElement(parameters){_classCallCheck(this,RadioButtonWidgetAnnotationElement);return _super6.call(this,parameters,{isRenderable:parameters.renderForms});}_createClass(RadioButtonWidgetAnnotationElement,[{key:"render",value:function render(){var _angularData$value,_this11=this;this.container.classList.add("buttonWidgetAnnotation","radioButton");var storage=this.annotationStorage;var data=this.data;var id=data.id;var angularData=window.getFormValueFromAngular(this.data.fieldName);var value=(_angularData$value=angularData.value)!==null&&_angularData$value!==void 0?_angularData$value:storage.getValue(id,{value:data.fieldValue===data.buttonValue}).value;if(typeof value==="string"){value=value===data.buttonValue;storage.setValue(id,{value:value});}else if(value){window.updateAngularFormValue(id,{value:data.buttonValue});}var element=document.createElement("input");GetElementsByNameSet.add(element);element.setAttribute("data-element-id",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type="radio";element.name=data.fieldName;if(value){element.setAttribute("checked",true);}element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener("change",function(event){var _event$target3=event.target,name=_event$target3.name,checked=_event$target3.checked;var _iterator11=_createForOfIteratorHelper(_this11._getElementsByName(name,id)),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var radio=_step11.value;storage.setValue(radio.id,{value:false});window.updateAngularFormValue(radio.id,{value:false});}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}storage.setValue(id,{value:checked});window.updateAngularFormValue(id,{value:checked});});element.addEventListener("resetform",function(event){var defaultValue=data.defaultFieldValue;event.target.checked=defaultValue!==null&&defaultValue!==undefined&&defaultValue===data.buttonValue;});window.registerAcroformField(id,element,value?data.buttonValue:undefined,data.buttonValue);element.addEventListener("updateFromAngular",function(newvalue){return storage.setValue(id,{value:newvalue.detail});});if(this.enableScripting&&this.hasJSActions){var pdfButtonValue=data.buttonValue;element.addEventListener("updatefromsandbox",function(jsEvent){var actions={value:function value(event){var checked=pdfButtonValue===event.detail.value;var _iterator12=_createForOfIteratorHelper(_this11._getElementsByName(event.target.name)),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var radio=_step12.value;var curChecked=checked&&radio.id===id;if(radio.domElement){radio.domElement.checked=curChecked;}storage.setValue(radio.id,{value:curChecked});window.updateAngularFormValue(id,{value:curChecked});}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}};_this11._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(event){return event.target.checked;});}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}]);return RadioButtonWidgetAnnotationElement;}(WidgetAnnotationElement);var PushButtonWidgetAnnotationElement=/*#__PURE__*/function(_LinkAnnotationElemen){_inherits(PushButtonWidgetAnnotationElement,_LinkAnnotationElemen);var _super7=_createSuper(PushButtonWidgetAnnotationElement);function PushButtonWidgetAnnotationElement(parameters){_classCallCheck(this,PushButtonWidgetAnnotationElement);return _super7.call(this,parameters,{ignoreBorder:parameters.data.hasAppearance});}_createClass(PushButtonWidgetAnnotationElement,[{key:"render",value:function render(){var _this12=this;var container=_get(_getPrototypeOf(PushButtonWidgetAnnotationElement.prototype),"render",this).call(this);container.classList.add("buttonWidgetAnnotation","pushButton");if(this.data.alternativeText){container.title=this.data.alternativeText;}var linkElement=container.lastChild;if(this.enableScripting&&this.hasJSActions&&linkElement){this._setDefaultPropertiesFromJS(linkElement);linkElement.addEventListener("updatefromsandbox",function(jsEvent){_this12._dispatchEventFromSandbox({},jsEvent);});}return container;}}]);return PushButtonWidgetAnnotationElement;}(LinkAnnotationElement);var ChoiceWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem4){_inherits(ChoiceWidgetAnnotationElement,_WidgetAnnotationElem4);var _super8=_createSuper(ChoiceWidgetAnnotationElement);function ChoiceWidgetAnnotationElement(parameters){_classCallCheck(this,ChoiceWidgetAnnotationElement);return _super8.call(this,parameters,{isRenderable:parameters.renderForms});}_createClass(ChoiceWidgetAnnotationElement,[{key:"render",value:function render(){var _this13=this;this.container.classList.add("choiceWidgetAnnotation");var storage=this.annotationStorage;var id=this.data.id;var angularData=window.getFormValueFromAngular(this.data.fieldName);var storedData=angularData.value?angularData:storage.getValue(id,{value:this.data.fieldValue});var selectElement=document.createElement("select");GetElementsByNameSet.add(selectElement);selectElement.setAttribute("data-element-id",id);selectElement.disabled=this.data.readOnly;this._setRequired(selectElement,this.data.required);selectElement.name=this.data.fieldName;selectElement.tabIndex=DEFAULT_TAB_INDEX;var addAnEmptyEntry=this.data.combo&&this.data.options.length>0;if(!this.data.combo){selectElement.size=this.data.options.length;if(this.data.multiSelect){selectElement.multiple=true;}}selectElement.addEventListener("resetform",function(event){var defaultValue=_this13.data.defaultFieldValue;var _iterator13=_createForOfIteratorHelper(selectElement.options),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var option=_step13.value;option.selected=option.value===defaultValue;}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}});var _iterator14=_createForOfIteratorHelper(this.data.options),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var option=_step14.value;var optionElement=document.createElement("option");optionElement.textContent=option.displayValue;optionElement.value=option.exportValue;if(storedData.value.includes(option.exportValue)){optionElement.setAttribute("selected",true);addAnEmptyEntry=false;}selectElement.append(optionElement);}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}var _removeEmptyEntry=null;if(addAnEmptyEntry){var noneOptionElement=document.createElement("option");noneOptionElement.value=" ";noneOptionElement.setAttribute("hidden",true);noneOptionElement.setAttribute("selected",true);selectElement.prepend(noneOptionElement);_removeEmptyEntry=function removeEmptyEntry(){noneOptionElement.remove();selectElement.removeEventListener("input",_removeEmptyEntry);_removeEmptyEntry=null;};selectElement.addEventListener("input",_removeEmptyEntry);}var getValue=function getValue(isExport){var name=isExport?"value":"textContent";var options=selectElement.options,multiple=selectElement.multiple;if(!multiple){return options.selectedIndex===-1?null:options[options.selectedIndex][name];}return Array.prototype.filter.call(options,function(option){return option.selected;}).map(function(option){return option[name];});};var selectedValues=getValue(false);var getItems=function getItems(event){var options=event.target.options;return Array.prototype.map.call(options,function(option){return{displayValue:option.textContent,exportValue:option.value};});};window.registerAcroformField(id,selectElement,selectedValues);selectElement.addEventListener("updateFromAngular",function(newvalue){return storage.setValue(id,{value:newvalue.detail});});if(this.enableScripting&&this.hasJSActions){selectElement.addEventListener("updatefromsandbox",function(jsEvent){var actions={value:function value(event){var _removeEmptyEntry2;(_removeEmptyEntry2=_removeEmptyEntry)===null||_removeEmptyEntry2===void 0?void 0:_removeEmptyEntry2();var value=event.detail.value;var values=new Set(Array.isArray(value)?value:[value]);var _iterator15=_createForOfIteratorHelper(selectElement.options),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var option=_step15.value;option.selected=values.has(option.value);}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);window.updateAngularFormValue(id,{value:selectedValues});},multipleSelection:function multipleSelection(event){selectElement.multiple=true;},remove:function remove(event){var options=selectElement.options;var index=event.detail.remove;options[index].selected=false;selectElement.remove(index);if(options.length>0){var i=Array.prototype.findIndex.call(options,function(option){return option.selected;});if(i===-1){options[0].selected=true;}}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},clear:function clear(event){while(selectElement.length!==0){selectElement.remove(0);}storage.setValue(id,{value:null,items:[]});selectedValues=getValue(false);window.updateAngularFormValue(id,{value:selectedValues});},insert:function insert(event){var _event$detail$insert=event.detail.insert,index=_event$detail$insert.index,displayValue=_event$detail$insert.displayValue,exportValue=_event$detail$insert.exportValue;var selectChild=selectElement.children[index];var optionElement=document.createElement("option");optionElement.textContent=displayValue;optionElement.value=exportValue;if(selectChild){selectChild.before(optionElement);}else{selectElement.append(optionElement);}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);window.updateAngularFormValue(id,{value:selectedValues});},items:function items(event){var items=event.detail.items;while(selectElement.length!==0){selectElement.remove(0);}var _iterator16=_createForOfIteratorHelper(items),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var item=_step16.value;var displayValue=item.displayValue,exportValue=item.exportValue;var optionElement=document.createElement("option");optionElement.textContent=displayValue;optionElement.value=exportValue;selectElement.append(optionElement);}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}if(selectElement.options.length>0){selectElement.options[0].selected=true;}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);window.updateAngularFormValue(id,{value:selectedValues});},indices:function indices(event){var indices=new Set(event.detail.indices);var _iterator17=_createForOfIteratorHelper(event.target.options),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var option=_step17.value;option.selected=indices.has(option.index);}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);window.updateAngularFormValue(id,{value:selectedValues});},editable:function editable(event){event.target.disabled=!event.detail.editable;}};_this13._dispatchEventFromSandbox(actions,jsEvent);});selectElement.addEventListener("input",function(event){var _this13$linkService$e;var exportValue=getValue(true);storage.setValue(id,{value:exportValue});window.updateAngularFormValue(id,{value:exportValue});event.preventDefault();(_this13$linkService$e=_this13.linkService.eventBus)===null||_this13$linkService$e===void 0?void 0:_this13$linkService$e.dispatch("dispatcheventinsandbox",{source:_this13,detail:{id:id,name:"Keystroke",value:selectedValues,changeEx:exportValue,willCommit:false,commitKey:1,keyDown:false}});});this._setEventListeners(selectElement,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],function(event){return event.target.value;});}else{selectElement.addEventListener("input",function(event){storage.setValue(id,{value:getValue(true)});window.updateAngularFormValue(id,{value:getValue(true)});});}if(this.data.combo){this._setTextStyle(selectElement);}else{}this._setBackgroundColor(selectElement);this._setDefaultPropertiesFromJS(selectElement);this.container.append(selectElement);return this.container;}}]);return ChoiceWidgetAnnotationElement;}(WidgetAnnotationElement);var PopupAnnotationElement=/*#__PURE__*/function(_AnnotationElement4){_inherits(PopupAnnotationElement,_AnnotationElement4);var _super9=_createSuper(PopupAnnotationElement);function PopupAnnotationElement(parameters){var _data$titleObj,_data$contentsObj,_data$richText;_classCallCheck(this,PopupAnnotationElement);var data=parameters.data;var isRenderable=!PopupAnnotationElement.IGNORE_TYPES.has(data.parentType)&&!!((_data$titleObj=data.titleObj)!==null&&_data$titleObj!==void 0&&_data$titleObj.str||(_data$contentsObj=data.contentsObj)!==null&&_data$contentsObj!==void 0&&_data$contentsObj.str||(_data$richText=data.richText)!==null&&_data$richText!==void 0&&_data$richText.str);return _super9.call(this,parameters,{isRenderable:isRenderable});}_createClass(PopupAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("popupAnnotation");var parentElements=this.layer.querySelectorAll("[data-annotation-id=\"".concat(this.data.parentId,"\"]"));if(parentElements.length===0){return this.container;}var popup=new PopupElement({container:this.container,trigger:Array.from(parentElements),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText});var page=this.page;var rect=_util.Util.normalizeRect([this.data.parentRect[0],page.view[3]-this.data.parentRect[1]+page.view[1],this.data.parentRect[2],page.view[3]-this.data.parentRect[3]+page.view[1]]);var popupLeft=rect[0]+this.data.parentRect[2]-this.data.parentRect[0];var popupTop=rect[1];var _this$viewport$rawDim2=this.viewport.rawDims,pageWidth=_this$viewport$rawDim2.pageWidth,pageHeight=_this$viewport$rawDim2.pageHeight,pageX=_this$viewport$rawDim2.pageX,pageY=_this$viewport$rawDim2.pageY;this.container.style.left="".concat(100*(popupLeft-pageX)/pageWidth,"%");this.container.style.top="".concat(100*(popupTop-pageY)/pageHeight,"%");this.container.append(popup.render());return this.container;}}]);return PopupAnnotationElement;}(AnnotationElement);_defineProperty(PopupAnnotationElement,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));var PopupElement=/*#__PURE__*/function(){function PopupElement(parameters){_classCallCheck(this,PopupElement);this.container=parameters.container;this.trigger=parameters.trigger;this.color=parameters.color;this.titleObj=parameters.titleObj;this.modificationDate=parameters.modificationDate;this.contentsObj=parameters.contentsObj;this.richText=parameters.richText;this.hideWrapper=parameters.hideWrapper||false;this.pinned=false;}_createClass(PopupElement,[{key:"render",value:function render(){var _this$richText,_this$contentsObj;var BACKGROUND_ENLIGHT=0.7;var wrapper=document.createElement("div");wrapper.classList.add("popupWrapper");this.hideElement=this.hideWrapper?wrapper:this.container;this.hideElement.hidden=true;var popup=document.createElement("div");popup.classList.add("popup");var color=this.color;if(color){var r=BACKGROUND_ENLIGHT*(255-color[0])+color[0];var g=BACKGROUND_ENLIGHT*(255-color[1])+color[1];var b=BACKGROUND_ENLIGHT*(255-color[2])+color[2];popup.style.backgroundColor=_util.Util.makeHexColor(r|0,g|0,b|0);}var title=document.createElement("h1");title.dir=this.titleObj.dir;title.textContent=this.titleObj.str;popup.append(title);var dateObject=_display_utils.PDFDateString.toDateObject(this.modificationDate);if(dateObject){var modificationDate=document.createElement("span");modificationDate.classList.add("popupDate");modificationDate.textContent="{{date}}, {{time}}";modificationDate.dataset.l10nId="annotation_date_string";modificationDate.dataset.l10nArgs=JSON.stringify({date:dateObject.toLocaleDateString(),time:dateObject.toLocaleTimeString()});popup.append(modificationDate);}if((_this$richText=this.richText)!==null&&_this$richText!==void 0&&_this$richText.str&&(!((_this$contentsObj=this.contentsObj)!==null&&_this$contentsObj!==void 0&&_this$contentsObj.str)||this.contentsObj.str===this.richText.str)){_xfa_layer.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:popup});popup.lastChild.classList.add("richText","popupContent");}else{var contents=this._formatContents(this.contentsObj);popup.append(contents);}if(!Array.isArray(this.trigger)){this.trigger=[this.trigger];}var _iterator18=_createForOfIteratorHelper(this.trigger),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var element=_step18.value;element.addEventListener("click",this._toggle.bind(this));element.addEventListener("mouseover",this._show.bind(this,false));element.addEventListener("mouseout",this._hide.bind(this,false));}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}popup.addEventListener("click",this._hide.bind(this,true));wrapper.append(popup);return wrapper;}},{key:"_formatContents",value:function _formatContents(_ref2){var str=_ref2.str,dir=_ref2.dir;var p=document.createElement("p");p.classList.add("popupContent");p.dir=dir;var lines=str.split(/(?:\r\n?|\n)/);for(var i=0,ii=lines.length;i<ii;++i){var line=lines[i];p.append(document.createTextNode(line));if(i<ii-1){p.append(document.createElement("br"));}}return p;}},{key:"_toggle",value:function _toggle(){if(this.pinned){this._hide(true);}else{this._show(true);}}},{key:"_show",value:function _show(){var pin=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(pin){this.pinned=true;}if(this.hideElement.hidden){this.hideElement.hidden=false;this.container.style.zIndex=parseInt(this.container.style.zIndex)+1000;}}},{key:"_hide",value:function _hide(){var unpin=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(unpin){this.pinned=false;}if(!this.hideElement.hidden&&!this.pinned){this.hideElement.hidden=true;this.container.style.zIndex=parseInt(this.container.style.zIndex)-1000;}}}]);return PopupElement;}();var FreeTextAnnotationElement=/*#__PURE__*/function(_AnnotationElement5){_inherits(FreeTextAnnotationElement,_AnnotationElement5);var _super10=_createSuper(FreeTextAnnotationElement);function FreeTextAnnotationElement(parameters){var _parameters$data$titl2,_parameters$data$cont2,_parameters$data$rich2;var _this14;_classCallCheck(this,FreeTextAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl2=parameters.data.titleObj)!==null&&_parameters$data$titl2!==void 0&&_parameters$data$titl2.str||(_parameters$data$cont2=parameters.data.contentsObj)!==null&&_parameters$data$cont2!==void 0&&_parameters$data$cont2.str||(_parameters$data$rich2=parameters.data.richText)!==null&&_parameters$data$rich2!==void 0&&_parameters$data$rich2.str);_this14=_super10.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true});_this14.textContent=parameters.data.textContent;return _this14;}_createClass(FreeTextAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("freeTextAnnotation");if(this.textContent){var content=document.createElement("div");content.classList.add("annotationTextContent");content.setAttribute("role","comment");var _iterator19=_createForOfIteratorHelper(this.textContent),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var line=_step19.value;var lineSpan=document.createElement("span");lineSpan.textContent=line;content.append(lineSpan);}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}this.container.append(content);}if(!this.data.hasPopup){this._createPopup(null,this.data);}return this.container;}}]);return FreeTextAnnotationElement;}(AnnotationElement);var LineAnnotationElement=/*#__PURE__*/function(_AnnotationElement6){_inherits(LineAnnotationElement,_AnnotationElement6);var _super11=_createSuper(LineAnnotationElement);function LineAnnotationElement(parameters){var _parameters$data$titl3,_parameters$data$cont3,_parameters$data$rich3;_classCallCheck(this,LineAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl3=parameters.data.titleObj)!==null&&_parameters$data$titl3!==void 0&&_parameters$data$titl3.str||(_parameters$data$cont3=parameters.data.contentsObj)!==null&&_parameters$data$cont3!==void 0&&_parameters$data$cont3.str||(_parameters$data$rich3=parameters.data.richText)!==null&&_parameters$data$rich3!==void 0&&_parameters$data$rich3.str);return _super11.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true});}_createClass(LineAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("lineAnnotation");var data=this.data;var _getRectDims3=getRectDims(data.rect),width=_getRectDims3.width,height=_getRectDims3.height;var svg=this.svgFactory.create(width,height,true);var line=this.svgFactory.createElement("svg:line");line.setAttribute("x1",data.rect[2]-data.lineCoordinates[0]);line.setAttribute("y1",data.rect[3]-data.lineCoordinates[1]);line.setAttribute("x2",data.rect[2]-data.lineCoordinates[2]);line.setAttribute("y2",data.rect[3]-data.lineCoordinates[3]);line.setAttribute("stroke-width",data.borderStyle.width||1);line.setAttribute("stroke","transparent");line.setAttribute("fill","transparent");svg.append(line);this.container.append(svg);this._createPopup(line,data);return this.container;}}]);return LineAnnotationElement;}(AnnotationElement);var SquareAnnotationElement=/*#__PURE__*/function(_AnnotationElement7){_inherits(SquareAnnotationElement,_AnnotationElement7);var _super12=_createSuper(SquareAnnotationElement);function SquareAnnotationElement(parameters){var _parameters$data$titl4,_parameters$data$cont4,_parameters$data$rich4;_classCallCheck(this,SquareAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl4=parameters.data.titleObj)!==null&&_parameters$data$titl4!==void 0&&_parameters$data$titl4.str||(_parameters$data$cont4=parameters.data.contentsObj)!==null&&_parameters$data$cont4!==void 0&&_parameters$data$cont4.str||(_parameters$data$rich4=parameters.data.richText)!==null&&_parameters$data$rich4!==void 0&&_parameters$data$rich4.str);return _super12.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true});}_createClass(SquareAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("squareAnnotation");var data=this.data;var _getRectDims4=getRectDims(data.rect),width=_getRectDims4.width,height=_getRectDims4.height;var svg=this.svgFactory.create(width,height,true);var borderWidth=data.borderStyle.width;var square=this.svgFactory.createElement("svg:rect");square.setAttribute("x",borderWidth/2);square.setAttribute("y",borderWidth/2);square.setAttribute("width",width-borderWidth);square.setAttribute("height",height-borderWidth);square.setAttribute("stroke-width",borderWidth||1);square.setAttribute("stroke","transparent");square.setAttribute("fill","transparent");svg.append(square);this.container.append(svg);this._createPopup(square,data);return this.container;}}]);return SquareAnnotationElement;}(AnnotationElement);var CircleAnnotationElement=/*#__PURE__*/function(_AnnotationElement8){_inherits(CircleAnnotationElement,_AnnotationElement8);var _super13=_createSuper(CircleAnnotationElement);function CircleAnnotationElement(parameters){var _parameters$data$titl5,_parameters$data$cont5,_parameters$data$rich5;_classCallCheck(this,CircleAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl5=parameters.data.titleObj)!==null&&_parameters$data$titl5!==void 0&&_parameters$data$titl5.str||(_parameters$data$cont5=parameters.data.contentsObj)!==null&&_parameters$data$cont5!==void 0&&_parameters$data$cont5.str||(_parameters$data$rich5=parameters.data.richText)!==null&&_parameters$data$rich5!==void 0&&_parameters$data$rich5.str);return _super13.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true});}_createClass(CircleAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("circleAnnotation");var data=this.data;var _getRectDims5=getRectDims(data.rect),width=_getRectDims5.width,height=_getRectDims5.height;var svg=this.svgFactory.create(width,height,true);var borderWidth=data.borderStyle.width;var circle=this.svgFactory.createElement("svg:ellipse");circle.setAttribute("cx",width/2);circle.setAttribute("cy",height/2);circle.setAttribute("rx",width/2-borderWidth/2);circle.setAttribute("ry",height/2-borderWidth/2);circle.setAttribute("stroke-width",borderWidth||1);circle.setAttribute("stroke","transparent");circle.setAttribute("fill","transparent");svg.append(circle);this.container.append(svg);this._createPopup(circle,data);return this.container;}}]);return CircleAnnotationElement;}(AnnotationElement);var PolylineAnnotationElement=/*#__PURE__*/function(_AnnotationElement9){_inherits(PolylineAnnotationElement,_AnnotationElement9);var _super14=_createSuper(PolylineAnnotationElement);function PolylineAnnotationElement(parameters){var _parameters$data$titl6,_parameters$data$cont6,_parameters$data$rich6;var _this15;_classCallCheck(this,PolylineAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl6=parameters.data.titleObj)!==null&&_parameters$data$titl6!==void 0&&_parameters$data$titl6.str||(_parameters$data$cont6=parameters.data.contentsObj)!==null&&_parameters$data$cont6!==void 0&&_parameters$data$cont6.str||(_parameters$data$rich6=parameters.data.richText)!==null&&_parameters$data$rich6!==void 0&&_parameters$data$rich6.str);_this15=_super14.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true});_this15.containerClassName="polylineAnnotation";_this15.svgElementName="svg:polyline";return _this15;}_createClass(PolylineAnnotationElement,[{key:"render",value:function render(){this.container.classList.add(this.containerClassName);var data=this.data;var _getRectDims6=getRectDims(data.rect),width=_getRectDims6.width,height=_getRectDims6.height;var svg=this.svgFactory.create(width,height,true);var points=[];var _iterator20=_createForOfIteratorHelper(data.vertices),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var coordinate=_step20.value;var x=coordinate.x-data.rect[0];var y=data.rect[3]-coordinate.y;points.push(x+","+y);}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}points=points.join(" ");var polyline=this.svgFactory.createElement(this.svgElementName);polyline.setAttribute("points",points);polyline.setAttribute("stroke-width",data.borderStyle.width||1);polyline.setAttribute("stroke","transparent");polyline.setAttribute("fill","transparent");svg.append(polyline);this.container.append(svg);this._createPopup(polyline,data);return this.container;}}]);return PolylineAnnotationElement;}(AnnotationElement);var PolygonAnnotationElement=/*#__PURE__*/function(_PolylineAnnotationEl){_inherits(PolygonAnnotationElement,_PolylineAnnotationEl);var _super15=_createSuper(PolygonAnnotationElement);function PolygonAnnotationElement(parameters){var _this16;_classCallCheck(this,PolygonAnnotationElement);_this16=_super15.call(this,parameters);_this16.containerClassName="polygonAnnotation";_this16.svgElementName="svg:polygon";return _this16;}return _createClass(PolygonAnnotationElement);}(PolylineAnnotationElement);var CaretAnnotationElement=/*#__PURE__*/function(_AnnotationElement10){_inherits(CaretAnnotationElement,_AnnotationElement10);var _super16=_createSuper(CaretAnnotationElement);function CaretAnnotationElement(parameters){var _parameters$data$titl7,_parameters$data$cont7,_parameters$data$rich7;_classCallCheck(this,CaretAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl7=parameters.data.titleObj)!==null&&_parameters$data$titl7!==void 0&&_parameters$data$titl7.str||(_parameters$data$cont7=parameters.data.contentsObj)!==null&&_parameters$data$cont7!==void 0&&_parameters$data$cont7.str||(_parameters$data$rich7=parameters.data.richText)!==null&&_parameters$data$rich7!==void 0&&_parameters$data$rich7.str);return _super16.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true});}_createClass(CaretAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("caretAnnotation");if(!this.data.hasPopup){this._createPopup(null,this.data);}return this.container;}}]);return CaretAnnotationElement;}(AnnotationElement);var InkAnnotationElement=/*#__PURE__*/function(_AnnotationElement11){_inherits(InkAnnotationElement,_AnnotationElement11);var _super17=_createSuper(InkAnnotationElement);function InkAnnotationElement(parameters){var _parameters$data$titl8,_parameters$data$cont8,_parameters$data$rich8;var _this17;_classCallCheck(this,InkAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl8=parameters.data.titleObj)!==null&&_parameters$data$titl8!==void 0&&_parameters$data$titl8.str||(_parameters$data$cont8=parameters.data.contentsObj)!==null&&_parameters$data$cont8!==void 0&&_parameters$data$cont8.str||(_parameters$data$rich8=parameters.data.richText)!==null&&_parameters$data$rich8!==void 0&&_parameters$data$rich8.str);_this17=_super17.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true});_this17.containerClassName="inkAnnotation";_this17.svgElementName="svg:polyline";return _this17;}_createClass(InkAnnotationElement,[{key:"render",value:function render(){this.container.classList.add(this.containerClassName);var data=this.data;var _getRectDims7=getRectDims(data.rect),width=_getRectDims7.width,height=_getRectDims7.height;var svg=this.svgFactory.create(width,height,true);var _iterator21=_createForOfIteratorHelper(data.inkLists),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var inkList=_step21.value;var points=[];var _iterator22=_createForOfIteratorHelper(inkList),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var coordinate=_step22.value;var x=coordinate.x-data.rect[0];var y=data.rect[3]-coordinate.y;points.push("".concat(x,",").concat(y));}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}points=points.join(" ");var polyline=this.svgFactory.createElement(this.svgElementName);polyline.setAttribute("points",points);polyline.setAttribute("stroke-width",data.borderStyle.width||1);polyline.setAttribute("stroke","transparent");polyline.setAttribute("fill","transparent");this._createPopup(polyline,data);svg.append(polyline);}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}this.container.append(svg);return this.container;}}]);return InkAnnotationElement;}(AnnotationElement);var HighlightAnnotationElement=/*#__PURE__*/function(_AnnotationElement12){_inherits(HighlightAnnotationElement,_AnnotationElement12);var _super18=_createSuper(HighlightAnnotationElement);function HighlightAnnotationElement(parameters){var _parameters$data$titl9,_parameters$data$cont9,_parameters$data$rich9;_classCallCheck(this,HighlightAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl9=parameters.data.titleObj)!==null&&_parameters$data$titl9!==void 0&&_parameters$data$titl9.str||(_parameters$data$cont9=parameters.data.contentsObj)!==null&&_parameters$data$cont9!==void 0&&_parameters$data$cont9.str||(_parameters$data$rich9=parameters.data.richText)!==null&&_parameters$data$rich9!==void 0&&_parameters$data$rich9.str);return _super18.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true,createQuadrilaterals:true});}_createClass(HighlightAnnotationElement,[{key:"render",value:function render(){if(!this.data.hasPopup){this._createPopup(null,this.data);}if(this.quadrilaterals){return this._renderQuadrilaterals("highlightAnnotation");}this.container.classList.add("highlightAnnotation");return this.container;}}]);return HighlightAnnotationElement;}(AnnotationElement);var UnderlineAnnotationElement=/*#__PURE__*/function(_AnnotationElement13){_inherits(UnderlineAnnotationElement,_AnnotationElement13);var _super19=_createSuper(UnderlineAnnotationElement);function UnderlineAnnotationElement(parameters){var _parameters$data$titl10,_parameters$data$cont10,_parameters$data$rich10;_classCallCheck(this,UnderlineAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl10=parameters.data.titleObj)!==null&&_parameters$data$titl10!==void 0&&_parameters$data$titl10.str||(_parameters$data$cont10=parameters.data.contentsObj)!==null&&_parameters$data$cont10!==void 0&&_parameters$data$cont10.str||(_parameters$data$rich10=parameters.data.richText)!==null&&_parameters$data$rich10!==void 0&&_parameters$data$rich10.str);return _super19.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true,createQuadrilaterals:true});}_createClass(UnderlineAnnotationElement,[{key:"render",value:function render(){if(!this.data.hasPopup){this._createPopup(null,this.data);}if(this.quadrilaterals){return this._renderQuadrilaterals("underlineAnnotation");}this.container.classList.add("underlineAnnotation");return this.container;}}]);return UnderlineAnnotationElement;}(AnnotationElement);var SquigglyAnnotationElement=/*#__PURE__*/function(_AnnotationElement14){_inherits(SquigglyAnnotationElement,_AnnotationElement14);var _super20=_createSuper(SquigglyAnnotationElement);function SquigglyAnnotationElement(parameters){var _parameters$data$titl11,_parameters$data$cont11,_parameters$data$rich11;_classCallCheck(this,SquigglyAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl11=parameters.data.titleObj)!==null&&_parameters$data$titl11!==void 0&&_parameters$data$titl11.str||(_parameters$data$cont11=parameters.data.contentsObj)!==null&&_parameters$data$cont11!==void 0&&_parameters$data$cont11.str||(_parameters$data$rich11=parameters.data.richText)!==null&&_parameters$data$rich11!==void 0&&_parameters$data$rich11.str);return _super20.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true,createQuadrilaterals:true});}_createClass(SquigglyAnnotationElement,[{key:"render",value:function render(){if(!this.data.hasPopup){this._createPopup(null,this.data);}if(this.quadrilaterals){return this._renderQuadrilaterals("squigglyAnnotation");}this.container.classList.add("squigglyAnnotation");return this.container;}}]);return SquigglyAnnotationElement;}(AnnotationElement);var StrikeOutAnnotationElement=/*#__PURE__*/function(_AnnotationElement15){_inherits(StrikeOutAnnotationElement,_AnnotationElement15);var _super21=_createSuper(StrikeOutAnnotationElement);function StrikeOutAnnotationElement(parameters){var _parameters$data$titl12,_parameters$data$cont12,_parameters$data$rich12;_classCallCheck(this,StrikeOutAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl12=parameters.data.titleObj)!==null&&_parameters$data$titl12!==void 0&&_parameters$data$titl12.str||(_parameters$data$cont12=parameters.data.contentsObj)!==null&&_parameters$data$cont12!==void 0&&_parameters$data$cont12.str||(_parameters$data$rich12=parameters.data.richText)!==null&&_parameters$data$rich12!==void 0&&_parameters$data$rich12.str);return _super21.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true,createQuadrilaterals:true});}_createClass(StrikeOutAnnotationElement,[{key:"render",value:function render(){if(!this.data.hasPopup){this._createPopup(null,this.data);}if(this.quadrilaterals){return this._renderQuadrilaterals("strikeoutAnnotation");}this.container.classList.add("strikeoutAnnotation");return this.container;}}]);return StrikeOutAnnotationElement;}(AnnotationElement);var StampAnnotationElement=/*#__PURE__*/function(_AnnotationElement16){_inherits(StampAnnotationElement,_AnnotationElement16);var _super22=_createSuper(StampAnnotationElement);function StampAnnotationElement(parameters){var _parameters$data$titl13,_parameters$data$cont13,_parameters$data$rich13;_classCallCheck(this,StampAnnotationElement);var isRenderable=!!(parameters.data.hasPopup||(_parameters$data$titl13=parameters.data.titleObj)!==null&&_parameters$data$titl13!==void 0&&_parameters$data$titl13.str||(_parameters$data$cont13=parameters.data.contentsObj)!==null&&_parameters$data$cont13!==void 0&&_parameters$data$cont13.str||(_parameters$data$rich13=parameters.data.richText)!==null&&_parameters$data$rich13!==void 0&&_parameters$data$rich13.str);return _super22.call(this,parameters,{isRenderable:isRenderable,ignoreBorder:true});}_createClass(StampAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("stampAnnotation");if(!this.data.hasPopup){this._createPopup(null,this.data);}return this.container;}}]);return StampAnnotationElement;}(AnnotationElement);var FileAttachmentAnnotationElement=/*#__PURE__*/function(_AnnotationElement17){_inherits(FileAttachmentAnnotationElement,_AnnotationElement17);var _super23=_createSuper(FileAttachmentAnnotationElement);function FileAttachmentAnnotationElement(parameters){var _this18$linkService$e;var _this18;_classCallCheck(this,FileAttachmentAnnotationElement);_this18=_super23.call(this,parameters,{isRenderable:true});var _this18$data$file=_this18.data.file,filename=_this18$data$file.filename,content=_this18$data$file.content;_this18.filename=(0,_display_utils.getFilenameFromUrl)(filename,true);_this18.content=content;(_this18$linkService$e=_this18.linkService.eventBus)===null||_this18$linkService$e===void 0?void 0:_this18$linkService$e.dispatch("fileattachmentannotation",{source:_assertThisInitialized(_this18),filename:filename,content:content});return _this18;}_createClass(FileAttachmentAnnotationElement,[{key:"render",value:function render(){var _this$data$titleObj,_this$data$contentsOb;this.container.classList.add("fileAttachmentAnnotation");var trigger;if(this.data.hasAppearance){trigger=document.createElement("div");}else{trigger=document.createElement("img");trigger.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(this.data.name)?"paperclip":"pushpin",".svg");}trigger.classList.add("popupTriggerArea");trigger.addEventListener("dblclick",this._download.bind(this));if(!this.data.hasPopup&&((_this$data$titleObj=this.data.titleObj)!==null&&_this$data$titleObj!==void 0&&_this$data$titleObj.str||(_this$data$contentsOb=this.data.contentsObj)!==null&&_this$data$contentsOb!==void 0&&_this$data$contentsOb.str||this.data.richText)){this._createPopup(trigger,this.data);}this.container.append(trigger);return this.container;}},{key:"_download",value:function _download(){var _this$downloadManager;(_this$downloadManager=this.downloadManager)===null||_this$downloadManager===void 0?void 0:_this$downloadManager.openOrDownloadData(this.container,this.content,this.filename);}}]);return FileAttachmentAnnotationElement;}(AnnotationElement);var AnnotationLayer=/*#__PURE__*/function(){function AnnotationLayer(){_classCallCheck(this,AnnotationLayer);}_createClass(AnnotationLayer,null,[{key:"render",value:function render(params){var annotations=params.annotations,div=params.div,viewport=params.viewport,accessibilityManager=params.accessibilityManager;(0,_display_utils.setLayerDimensions)(div,viewport);var elementParams={data:null,layer:div,page:params.page,viewport:viewport,linkService:params.linkService,downloadManager:params.downloadManager,imageResourcesPath:params.imageResourcesPath||"",renderForms:params.renderForms!==false,svgFactory:new _display_utils.DOMSVGFactory(),annotationStorage:params.annotationStorage||new _annotation_storage.AnnotationStorage(),enableScripting:params.enableScripting===true,hasJSActions:params.hasJSActions,fieldObjects:params.fieldObjects};var zIndex=0;var _iterator23=_createForOfIteratorHelper(annotations),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var data=_step23.value;if(data.noHTML){continue;}if(data.annotationType!==_util.AnnotationType.POPUP){var _getRectDims8=getRectDims(data.rect),width=_getRectDims8.width,height=_getRectDims8.height;if(width<=0||height<=0){continue;}}elementParams.data=data;var element=AnnotationElementFactory.create(elementParams);if(!element.isRenderable){continue;}var rendered=element.render();if(data.hidden){rendered.style.visibility="hidden";}if(Array.isArray(rendered)){var _iterator24=_createForOfIteratorHelper(rendered),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var renderedElement=_step24.value;renderedElement.style.zIndex=zIndex++;_classStaticPrivateMethodGet(AnnotationLayer,AnnotationLayer,_appendElement).call(AnnotationLayer,renderedElement,data.id,div,accessibilityManager);}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}}else{rendered.style.zIndex=zIndex++;if(element instanceof PopupAnnotationElement){div.prepend(rendered);}else{_classStaticPrivateMethodGet(AnnotationLayer,AnnotationLayer,_appendElement).call(AnnotationLayer,rendered,data.id,div,accessibilityManager);}}}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,div,params.annotationCanvasMap);}},{key:"update",value:function update(params){var annotationCanvasMap=params.annotationCanvasMap,div=params.div,viewport=params.viewport;(0,_display_utils.setLayerDimensions)(div,{rotation:viewport.rotation});_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,div,annotationCanvasMap);div.hidden=false;}}]);return AnnotationLayer;}();exports.AnnotationLayer=AnnotationLayer;function _appendElement(element,id,div,accessibilityManager){var contentElement=element.firstChild||element;contentElement.id="".concat(_display_utils.AnnotationPrefix).concat(id);div.append(element);accessibilityManager===null||accessibilityManager===void 0?void 0:accessibilityManager.moveElementInDOM(div,element,contentElement,false);}function _setAnnotationCanvasMap(div,annotationCanvasMap){if(!annotationCanvasMap){return;}var _iterator25=_createForOfIteratorHelper(annotationCanvasMap),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var _step25$value=_slicedToArray(_step25.value,2),id=_step25$value[0],canvas=_step25$value[1];var element=div.querySelector("[data-annotation-id=\"".concat(id,"\"]"));if(!element){continue;}var firstChild=element.firstChild;if(!firstChild){element.append(canvas);}else if(firstChild.nodeName==="CANVAS"){firstChild.replaceWith(canvas);}else{firstChild.before(canvas);}}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}annotationCanvasMap.clear();}

/***/ }),
/* 168 */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.ColorConverters=void 0;function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function makeColorComp(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0");}var ColorConverters=/*#__PURE__*/function(){function ColorConverters(){_classCallCheck(this,ColorConverters);}_createClass(ColorConverters,null,[{key:"CMYK_G",value:function CMYK_G(_ref){var _ref2=_slicedToArray(_ref,4),c=_ref2[0],y=_ref2[1],m=_ref2[2],k=_ref2[3];return["G",1-Math.min(1,0.3*c+0.59*m+0.11*y+k)];}},{key:"G_CMYK",value:function G_CMYK(_ref3){var _ref4=_slicedToArray(_ref3,1),g=_ref4[0];return["CMYK",0,0,0,1-g];}},{key:"G_RGB",value:function G_RGB(_ref5){var _ref6=_slicedToArray(_ref5,1),g=_ref6[0];return["RGB",g,g,g];}},{key:"G_HTML",value:function G_HTML(_ref7){var _ref8=_slicedToArray(_ref7,1),g=_ref8[0];var G=makeColorComp(g);return"#".concat(G).concat(G).concat(G);}},{key:"RGB_G",value:function RGB_G(_ref9){var _ref10=_slicedToArray(_ref9,3),r=_ref10[0],g=_ref10[1],b=_ref10[2];return["G",0.3*r+0.59*g+0.11*b];}},{key:"RGB_HTML",value:function RGB_HTML(_ref11){var _ref12=_slicedToArray(_ref11,3),r=_ref12[0],g=_ref12[1],b=_ref12[2];var R=makeColorComp(r);var G=makeColorComp(g);var B=makeColorComp(b);return"#".concat(R).concat(G).concat(B);}},{key:"T_HTML",value:function T_HTML(){return"#00000000";}},{key:"CMYK_RGB",value:function CMYK_RGB(_ref13){var _ref14=_slicedToArray(_ref13,4),c=_ref14[0],y=_ref14[1],m=_ref14[2],k=_ref14[3];return["RGB",1-Math.min(1,c+k),1-Math.min(1,m+k),1-Math.min(1,y+k)];}},{key:"CMYK_HTML",value:function CMYK_HTML(components){var rgb=this.CMYK_RGB(components).slice(1);return this.RGB_HTML(rgb);}},{key:"RGB_CMYK",value:function RGB_CMYK(_ref15){var _ref16=_slicedToArray(_ref15,3),r=_ref16[0],g=_ref16[1],b=_ref16[2];var c=1-r;var m=1-g;var y=1-b;var k=Math.min(c,m,y);return["CMYK",c,m,y,k];}}]);return ColorConverters;}();exports.ColorConverters=ColorConverters;

/***/ }),
/* 169 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
Object.defineProperty(exports, "__esModule", ({value:true}));exports.XfaLayer=void 0;var _xfa_text=__w_pdfjs_require__(154);function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var XfaLayer=/*#__PURE__*/function(){function XfaLayer(){_classCallCheck(this,XfaLayer);}_createClass(XfaLayer,null,[{key:"setupStorage",value:function setupStorage(html,id,element,storage,intent){var angularData=window.getFormValueFromAngular(html);if(angularData.value){storage.setValue(id,angularData);}var storedData=angularData.value?angularData:storage.getValue(id,{value:null});window.registerXFAField(html,storedData);html.addEventListener("updateFromAngular",function(value){return storage.setValue(id,{value:value.detail});});switch(element.name){case"textarea":if(storedData.value!==null){html.textContent=storedData.value;}if(intent==="print"){break;}html.addEventListener("input",function(event){window.updateAngularFormValue(html,{value:event.target.value});storage.setValue(id,{value:event.target.value});});break;case"input":if(element.attributes.type==="radio"||element.attributes.type==="checkbox"){if(storedData.value===element.attributes.xfaOn){html.setAttribute("checked",true);}else{html.removeAttribute("checked");}if(intent==="print"){break;}html.addEventListener("change",function(event){window.updateAngularFormValue(html,{value:event.target.checked?event.target.getAttribute("xfaOn"):event.target.getAttribute("xfaOff")});storage.setValue(id,{value:event.target.checked?event.target.getAttribute("xfaOn"):event.target.getAttribute("xfaOff")});});}else{if(storedData.value!==null){html.setAttribute("value",storedData.value);}if(intent==="print"){break;}html.addEventListener("input",function(event){window.updateAngularFormValue(html,{value:event.target.value});storage.setValue(id,{value:event.target.value});});}break;case"select":if(storedData.value!==null){element.attributes.value=storedData.value;var _iterator=_createForOfIteratorHelper(element.children),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var option=_step.value;if(option.attributes.value===storedData.value){option.attributes.selected=true;}else{delete option.attributes.selected;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}html.addEventListener("input",function(event){var options=event.target.options;var value=options.selectedIndex===-1?"":options[options.selectedIndex].value;window.updateAngularFormValue(html,{value:value});storage.setValue(id,{value:value});});break;}}},{key:"setAttributes",value:function setAttributes(_ref){var html=_ref.html,element=_ref.element,_ref$storage=_ref.storage,storage=_ref$storage===void 0?null:_ref$storage,intent=_ref.intent,linkService=_ref.linkService;var attributes=element.attributes;var isHTMLAnchorElement=html instanceof HTMLAnchorElement;if(attributes.type==="radio"){attributes.name="".concat(attributes.name,"-").concat(intent);}for(var _i=0,_Object$entries=Object.entries(attributes);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];if(value===null||value===undefined){continue;}switch(key){case"class":if(value.length){html.setAttribute(key,value.join(" "));}break;case"dataId":break;case"id":html.setAttribute("data-element-id",value);break;case"style":Object.assign(html.style,value);break;case"textContent":html.textContent=value;break;default:if(!isHTMLAnchorElement||key!=="href"&&key!=="newWindow"){html.setAttribute(key,value);}}}if(isHTMLAnchorElement){linkService.addLinkAttributes(html,attributes.href,attributes.newWindow);}if(storage&&attributes.dataId){this.setupStorage(html,attributes.dataId,element,storage);}}},{key:"render",value:function render(parameters){var storage=parameters.annotationStorage;var linkService=parameters.linkService;var root=parameters.xfaHtml;var intent=parameters.intent||"display";var rootHtml=document.createElement(root.name);if(root.attributes){this.setAttributes({html:rootHtml,element:root,intent:intent,linkService:linkService});}var stack=[[root,-1,rootHtml]];var rootDiv=parameters.div;rootDiv.append(rootHtml);if(parameters.viewport){var transform="matrix(".concat(parameters.viewport.transform.join(","),")");rootDiv.style.transform=transform;}if(intent!=="richText"){rootDiv.setAttribute("class","xfaLayer xfaFont");}var textDivs=[];while(stack.length>0){var _child$attributes;var _stack$at=stack.at(-1),_stack$at2=_slicedToArray(_stack$at,3),parent=_stack$at2[0],i=_stack$at2[1],html=_stack$at2[2];if(i+1===parent.children.length){stack.pop();continue;}var child=parent.children[++stack.at(-1)[1]];if(child===null){continue;}var name=child.name;if(name==="#text"){var node=document.createTextNode(child.value);textDivs.push(node);html.append(node);continue;}var childHtml=void 0;if(child!==null&&child!==void 0&&(_child$attributes=child.attributes)!==null&&_child$attributes!==void 0&&_child$attributes.xmlns){childHtml=document.createElementNS(child.attributes.xmlns,name);}else{childHtml=document.createElement(name);}html.append(childHtml);if(child.attributes){this.setAttributes({html:childHtml,element:child,storage:storage,intent:intent,linkService:linkService});}if(child.children&&child.children.length>0){stack.push([child,-1,childHtml]);}else if(child.value){var _node=document.createTextNode(child.value);if(_xfa_text.XfaText.shouldBuildText(name)){textDivs.push(_node);}childHtml.append(_node);}}var _iterator2=_createForOfIteratorHelper(rootDiv.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea")),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var el=_step2.value;el.setAttribute("readOnly",true);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return{textDivs:textDivs};}},{key:"update",value:function update(parameters){var transform="matrix(".concat(parameters.viewport.transform.join(","),")");parameters.div.style.transform=transform;parameters.div.hidden=false;}}]);return XfaLayer;}();exports.XfaLayer=XfaLayer;

/***/ }),
/* 170 */
/***/ ((__unused_webpack_module, exports, __w_pdfjs_require__) => {

"use strict";
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}Object.defineProperty(exports, "__esModule", ({value:true}));exports.SVGGraphics=void 0;var _display_utils=__w_pdfjs_require__(141);var _util=__w_pdfjs_require__(1);var _is_node=__w_pdfjs_require__(145);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var SVGGraphics=/*#__PURE__*/_createClass(function SVGGraphics(){_classCallCheck(this,SVGGraphics);(0,_util.unreachable)("Not implemented: SVGGraphics");});exports.SVGGraphics=SVGGraphics;{var opListToTree=function opListToTree(opList){var opTree=[];var tmp=[];var _iterator=_createForOfIteratorHelper(opList),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var opListElement=_step.value;if(opListElement.fn==="save"){opTree.push({fnId:92,fn:"group",items:[]});tmp.push(opTree);opTree=opTree.at(-1).items;continue;}if(opListElement.fn==="restore"){opTree=tmp.pop();}else{opTree.push(opListElement);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return opTree;};var pf=function pf(value){if(Number.isInteger(value)){return value.toString();}var s=value.toFixed(10);var i=s.length-1;if(s[i]!=="0"){return s;}do{i--;}while(s[i]==="0");return s.substring(0,s[i]==="."?i:i+1);};var pm=function pm(m){if(m[4]===0&&m[5]===0){if(m[1]===0&&m[2]===0){if(m[0]===1&&m[3]===1){return"";}return"scale(".concat(pf(m[0])," ").concat(pf(m[3]),")");}if(m[0]===m[3]&&m[1]===-m[2]){var a=Math.acos(m[0])*180/Math.PI;return"rotate(".concat(pf(a),")");}}else{if(m[0]===1&&m[1]===0&&m[2]===0&&m[3]===1){return"translate(".concat(pf(m[4])," ").concat(pf(m[5]),")");}}return"matrix(".concat(pf(m[0])," ").concat(pf(m[1])," ").concat(pf(m[2])," ").concat(pf(m[3])," ").concat(pf(m[4])," ")+"".concat(pf(m[5]),")");};var SVG_DEFAULTS={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"};var XML_NS="http://www.w3.org/XML/1998/namespace";var XLINK_NS="http://www.w3.org/1999/xlink";var LINE_CAP_STYLES=["butt","round","square"];var LINE_JOIN_STYLES=["miter","round","bevel"];var createObjectURL=function createObjectURL(data){var contentType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var forceDataSchema=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(URL.createObjectURL&&typeof Blob!=="undefined"&&!forceDataSchema){return URL.createObjectURL(new Blob([data],{type:contentType}));}var digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var buffer="data:".concat(contentType,";base64,");for(var i=0,ii=data.length;i<ii;i+=3){var b1=data[i]&0xff;var b2=data[i+1]&0xff;var b3=data[i+2]&0xff;var d1=b1>>2,d2=(b1&3)<<4|b2>>4;var d3=i+1<ii?(b2&0xf)<<2|b3>>6:64;var d4=i+2<ii?b3&0x3f:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4];}return buffer;};var convertImgDataToPng=function(){var PNG_HEADER=new Uint8Array([0x89,0x50,0x4e,0x47,0x0d,0x0a,0x1a,0x0a]);var CHUNK_WRAPPER_SIZE=12;var crcTable=new Int32Array(256);for(var i=0;i<256;i++){var c=i;for(var h=0;h<8;h++){if(c&1){c=0xedb88320^c>>1&0x7fffffff;}else{c=c>>1&0x7fffffff;}}crcTable[i]=c;}function crc32(data,start,end){var crc=-1;for(var _i=start;_i<end;_i++){var a=(crc^data[_i])&0xff;var b=crcTable[a];crc=crc>>>8^b;}return crc^-1;}function writePngChunk(type,body,data,offset){var p=offset;var len=body.length;data[p]=len>>24&0xff;data[p+1]=len>>16&0xff;data[p+2]=len>>8&0xff;data[p+3]=len&0xff;p+=4;data[p]=type.charCodeAt(0)&0xff;data[p+1]=type.charCodeAt(1)&0xff;data[p+2]=type.charCodeAt(2)&0xff;data[p+3]=type.charCodeAt(3)&0xff;p+=4;data.set(body,p);p+=body.length;var crc=crc32(data,offset+4,p);data[p]=crc>>24&0xff;data[p+1]=crc>>16&0xff;data[p+2]=crc>>8&0xff;data[p+3]=crc&0xff;}function adler32(data,start,end){var a=1;var b=0;for(var _i2=start;_i2<end;++_i2){a=(a+(data[_i2]&0xff))%65521;b=(b+a)%65521;}return b<<16|a;}function deflateSync(literals){return deflateSyncUncompressed(literals);}function deflateSyncUncompressed(literals){var len=literals.length;var maxBlockLength=0xffff;var deflateBlocks=Math.ceil(len/maxBlockLength);var idat=new Uint8Array(2+len+deflateBlocks*5+4);var pi=0;idat[pi++]=0x78;idat[pi++]=0x9c;var pos=0;while(len>maxBlockLength){idat[pi++]=0x00;idat[pi++]=0xff;idat[pi++]=0xff;idat[pi++]=0x00;idat[pi++]=0x00;idat.set(literals.subarray(pos,pos+maxBlockLength),pi);pi+=maxBlockLength;pos+=maxBlockLength;len-=maxBlockLength;}idat[pi++]=0x01;idat[pi++]=len&0xff;idat[pi++]=len>>8&0xff;idat[pi++]=~len&0xffff&0xff;idat[pi++]=(~len&0xffff)>>8&0xff;idat.set(literals.subarray(pos),pi);pi+=literals.length-pos;var adler=adler32(literals,0,literals.length);idat[pi++]=adler>>24&0xff;idat[pi++]=adler>>16&0xff;idat[pi++]=adler>>8&0xff;idat[pi++]=adler&0xff;return idat;}function encode(imgData,kind,forceDataSchema,isMask){var width=imgData.width;var height=imgData.height;var bitDepth,colorType,lineSize;var bytes=imgData.data;switch(kind){case _util.ImageKind.GRAYSCALE_1BPP:colorType=0;bitDepth=1;lineSize=width+7>>3;break;case _util.ImageKind.RGB_24BPP:colorType=2;bitDepth=8;lineSize=width*3;break;case _util.ImageKind.RGBA_32BPP:colorType=6;bitDepth=8;lineSize=width*4;break;default:throw new Error("invalid format");}var literals=new Uint8Array((1+lineSize)*height);var offsetLiterals=0,offsetBytes=0;for(var y=0;y<height;++y){literals[offsetLiterals++]=0;literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals);offsetBytes+=lineSize;offsetLiterals+=lineSize;}if(kind===_util.ImageKind.GRAYSCALE_1BPP&&isMask){offsetLiterals=0;for(var _y=0;_y<height;_y++){offsetLiterals++;for(var _i3=0;_i3<lineSize;_i3++){literals[offsetLiterals++]^=0xff;}}}var ihdr=new Uint8Array([width>>24&0xff,width>>16&0xff,width>>8&0xff,width&0xff,height>>24&0xff,height>>16&0xff,height>>8&0xff,height&0xff,bitDepth,colorType,0x00,0x00,0x00]);var idat=deflateSync(literals);var pngLength=PNG_HEADER.length+CHUNK_WRAPPER_SIZE*3+ihdr.length+idat.length;var data=new Uint8Array(pngLength);var offset=0;data.set(PNG_HEADER,offset);offset+=PNG_HEADER.length;writePngChunk("IHDR",ihdr,data,offset);offset+=CHUNK_WRAPPER_SIZE+ihdr.length;writePngChunk("IDATA",idat,data,offset);offset+=CHUNK_WRAPPER_SIZE+idat.length;writePngChunk("IEND",new Uint8Array(0),data,offset);return createObjectURL(data,"image/png",forceDataSchema);}return function convertImgDataToPng(imgData,forceDataSchema,isMask){var kind=imgData.kind===undefined?_util.ImageKind.GRAYSCALE_1BPP:imgData.kind;return encode(imgData,kind,forceDataSchema,isMask);};}();var SVGExtraState=/*#__PURE__*/function(){function SVGExtraState(){_classCallCheck(this,SVGExtraState);this.fontSizeScale=1;this.fontWeight=SVG_DEFAULTS.fontWeight;this.fontSize=0;this.textMatrix=_util.IDENTITY_MATRIX;this.fontMatrix=_util.FONT_IDENTITY_MATRIX;this.leading=0;this.textRenderingMode=_util.TextRenderingMode.FILL;this.textMatrixScale=1;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=SVG_DEFAULTS.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;this.clipGroup=null;this.maskId="";}_createClass(SVGExtraState,[{key:"clone",value:function clone(){return Object.create(this);}},{key:"setCurrentPoint",value:function setCurrentPoint(x,y){this.x=x;this.y=y;}}]);return SVGExtraState;}();var clipCount=0;var maskCount=0;var shadingCount=0;exports.SVGGraphics=SVGGraphics=/*#__PURE__*/function(){function SVGGraphics(commonObjs,objs){var forceDataSchema=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,SVGGraphics);(0,_display_utils.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future.");this.svgFactory=new _display_utils.DOMSVGFactory();this.current=new SVGExtraState();this.transformMatrix=_util.IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=commonObjs;this.objs=objs;this.pendingClip=null;this.pendingEOFill=false;this.embedFonts=false;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!forceDataSchema;this._operatorIdMapping=[];for(var op in _util.OPS){this._operatorIdMapping[_util.OPS[op]]=op;}}_createClass(SVGGraphics,[{key:"getObject",value:function getObject(data){var fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(typeof data==="string"){return data.startsWith("g_")?this.commonObjs.get(data):this.objs.get(data);}return fallback;}},{key:"save",value:function save(){this.transformStack.push(this.transformMatrix);var old=this.current;this.extraStack.push(old);this.current=old.clone();}},{key:"restore",value:function restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.pendingClip=null;this.tgrp=null;}},{key:"group",value:function group(items){this.save();this.executeOpTree(items);this.restore();}},{key:"loadDependencies",value:function loadDependencies(operatorList){var _this=this;var fnArray=operatorList.fnArray;var argsArray=operatorList.argsArray;for(var i=0,ii=fnArray.length;i<ii;i++){if(fnArray[i]!==_util.OPS.dependency){continue;}var _iterator2=_createForOfIteratorHelper(argsArray[i]),_step2;try{var _loop=function _loop(){var obj=_step2.value;var objsPool=obj.startsWith("g_")?_this.commonObjs:_this.objs;var promise=new Promise(function(resolve){objsPool.get(obj,resolve);});_this.current.dependencies.push(promise);};for(_iterator2.s();!(_step2=_iterator2.n()).done;){_loop();}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}return Promise.all(this.current.dependencies);}},{key:"transform",value:function transform(a,b,c,d,e,f){var transformMatrix=[a,b,c,d,e,f];this.transformMatrix=_util.Util.transform(this.transformMatrix,transformMatrix);this.tgrp=null;}},{key:"getSVG",value:function getSVG(operatorList,viewport){var _this2=this;this.viewport=viewport;var svgElement=this._initialize(viewport);return this.loadDependencies(operatorList).then(function(){_this2.transformMatrix=_util.IDENTITY_MATRIX;_this2.executeOpTree(_this2.convertOpList(operatorList));return svgElement;});}},{key:"convertOpList",value:function convertOpList(operatorList){var operatorIdMapping=this._operatorIdMapping;var argsArray=operatorList.argsArray;var fnArray=operatorList.fnArray;var opList=[];for(var i=0,ii=fnArray.length;i<ii;i++){var fnId=fnArray[i];opList.push({fnId:fnId,fn:operatorIdMapping[fnId],args:argsArray[i]});}return opListToTree(opList);}},{key:"executeOpTree",value:function executeOpTree(opTree){var _iterator3=_createForOfIteratorHelper(opTree),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var opTreeElement=_step3.value;var fn=opTreeElement.fn;var fnId=opTreeElement.fnId;var args=opTreeElement.args;switch(fnId|0){case _util.OPS.beginText:this.beginText();break;case _util.OPS.dependency:break;case _util.OPS.setLeading:this.setLeading(args);break;case _util.OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case _util.OPS.setFont:this.setFont(args);break;case _util.OPS.showText:this.showText(args[0]);break;case _util.OPS.showSpacedText:this.showText(args[0]);break;case _util.OPS.endText:this.endText();break;case _util.OPS.moveText:this.moveText(args[0],args[1]);break;case _util.OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case _util.OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case _util.OPS.setHScale:this.setHScale(args[0]);break;case _util.OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.setTextRise:this.setTextRise(args[0]);break;case _util.OPS.setTextRenderingMode:this.setTextRenderingMode(args[0]);break;case _util.OPS.setLineWidth:this.setLineWidth(args[0]);break;case _util.OPS.setLineJoin:this.setLineJoin(args[0]);break;case _util.OPS.setLineCap:this.setLineCap(args[0]);break;case _util.OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case _util.OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeColorN:this.setStrokeColorN(args);break;case _util.OPS.setFillColorN:this.setFillColorN(args);break;case _util.OPS.shadingFill:this.shadingFill(args[0]);break;case _util.OPS.setDash:this.setDash(args[0],args[1]);break;case _util.OPS.setRenderingIntent:this.setRenderingIntent(args[0]);break;case _util.OPS.setFlatness:this.setFlatness(args[0]);break;case _util.OPS.setGState:this.setGState(args[0]);break;case _util.OPS.fill:this.fill();break;case _util.OPS.eoFill:this.eoFill();break;case _util.OPS.stroke:this.stroke();break;case _util.OPS.fillStroke:this.fillStroke();break;case _util.OPS.eoFillStroke:this.eoFillStroke();break;case _util.OPS.clip:this.clip("nonzero");break;case _util.OPS.eoClip:this.clip("evenodd");break;case _util.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _util.OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case _util.OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case _util.OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case _util.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case _util.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _util.OPS.closePath:this.closePath();break;case _util.OPS.closeStroke:this.closeStroke();break;case _util.OPS.closeFillStroke:this.closeFillStroke();break;case _util.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _util.OPS.nextLine:this.nextLine();break;case _util.OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.constructPath:this.constructPath(args[0],args[1]);break;case _util.OPS.endPath:this.endPath();break;case 92:this.group(opTreeElement.items);break;default:(0,_util.warn)("Unimplemented operator ".concat(fn));break;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}},{key:"setWordSpacing",value:function setWordSpacing(wordSpacing){this.current.wordSpacing=wordSpacing;}},{key:"setCharSpacing",value:function setCharSpacing(charSpacing){this.current.charSpacing=charSpacing;}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading);}},{key:"setTextMatrix",value:function setTextMatrix(a,b,c,d,e,f){var current=this.current;current.textMatrix=current.lineMatrix=[a,b,c,d,e,f];current.textMatrixScale=Math.hypot(a,b);current.x=current.lineX=0;current.y=current.lineY=0;current.xcoords=[];current.ycoords=[];current.tspan=this.svgFactory.createElement("svg:tspan");current.tspan.setAttributeNS(null,"font-family",current.fontFamily);current.tspan.setAttributeNS(null,"font-size","".concat(pf(current.fontSize),"px"));current.tspan.setAttributeNS(null,"y",pf(-current.y));current.txtElement=this.svgFactory.createElement("svg:text");current.txtElement.append(current.tspan);}},{key:"beginText",value:function beginText(){var current=this.current;current.x=current.lineX=0;current.y=current.lineY=0;current.textMatrix=_util.IDENTITY_MATRIX;current.lineMatrix=_util.IDENTITY_MATRIX;current.textMatrixScale=1;current.tspan=this.svgFactory.createElement("svg:tspan");current.txtElement=this.svgFactory.createElement("svg:text");current.txtgrp=this.svgFactory.createElement("svg:g");current.xcoords=[];current.ycoords=[];}},{key:"moveText",value:function moveText(x,y){var current=this.current;current.x=current.lineX+=x;current.y=current.lineY+=y;current.xcoords=[];current.ycoords=[];current.tspan=this.svgFactory.createElement("svg:tspan");current.tspan.setAttributeNS(null,"font-family",current.fontFamily);current.tspan.setAttributeNS(null,"font-size","".concat(pf(current.fontSize),"px"));current.tspan.setAttributeNS(null,"y",pf(-current.y));}},{key:"showText",value:function showText(glyphs){var current=this.current;var font=current.font;var fontSize=current.fontSize;if(fontSize===0){return;}var fontSizeScale=current.fontSizeScale;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var fontDirection=current.fontDirection;var textHScale=current.textHScale*fontDirection;var vertical=font.vertical;var spacingDir=vertical?1:-1;var defaultVMetrics=font.defaultVMetrics;var widthAdvanceScale=fontSize*current.fontMatrix[0];var x=0;var _iterator4=_createForOfIteratorHelper(glyphs),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var glyph=_step4.value;if(glyph===null){x+=fontDirection*wordSpacing;continue;}else if(typeof glyph==="number"){x+=spacingDir*glyph*fontSize/1000;continue;}var spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;var character=glyph.fontChar;var scaledX=void 0,scaledY=void 0;var width=glyph.width;if(vertical){var vx=void 0;var vmetric=glyph.vmetric||defaultVMetrics;vx=glyph.vmetric?vmetric[1]:width*0.5;vx=-vx*widthAdvanceScale;var vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width;scaledX=vx/fontSizeScale;scaledY=(x+vy)/fontSizeScale;}else{scaledX=x/fontSizeScale;scaledY=0;}if(glyph.isInFont||font.missingFile){current.xcoords.push(current.x+scaledX);if(vertical){current.ycoords.push(-current.y+scaledY);}current.tspan.textContent+=character;}else{}var charWidth=void 0;if(vertical){charWidth=width*widthAdvanceScale-spacing*fontDirection;}else{charWidth=width*widthAdvanceScale+spacing*fontDirection;}x+=charWidth;}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}current.tspan.setAttributeNS(null,"x",current.xcoords.map(pf).join(" "));if(vertical){current.tspan.setAttributeNS(null,"y",current.ycoords.map(pf).join(" "));}else{current.tspan.setAttributeNS(null,"y",pf(-current.y));}if(vertical){current.y-=x;}else{current.x+=x*textHScale;}current.tspan.setAttributeNS(null,"font-family",current.fontFamily);current.tspan.setAttributeNS(null,"font-size","".concat(pf(current.fontSize),"px"));if(current.fontStyle!==SVG_DEFAULTS.fontStyle){current.tspan.setAttributeNS(null,"font-style",current.fontStyle);}if(current.fontWeight!==SVG_DEFAULTS.fontWeight){current.tspan.setAttributeNS(null,"font-weight",current.fontWeight);}var fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){if(current.fillColor!==SVG_DEFAULTS.fillColor){current.tspan.setAttributeNS(null,"fill",current.fillColor);}if(current.fillAlpha<1){current.tspan.setAttributeNS(null,"fill-opacity",current.fillAlpha);}}else if(current.textRenderingMode===_util.TextRenderingMode.ADD_TO_PATH){current.tspan.setAttributeNS(null,"fill","transparent");}else{current.tspan.setAttributeNS(null,"fill","none");}if(fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){var lineWidthScale=1/(current.textMatrixScale||1);this._setStrokeAttributes(current.tspan,lineWidthScale);}var textMatrix=current.textMatrix;if(current.textRise!==0){textMatrix=textMatrix.slice();textMatrix[5]+=current.textRise;}current.txtElement.setAttributeNS(null,"transform","".concat(pm(textMatrix)," scale(").concat(pf(textHScale),", -1)"));current.txtElement.setAttributeNS(XML_NS,"xml:space","preserve");current.txtElement.append(current.tspan);current.txtgrp.append(current.txtElement);this._ensureTransformGroup().append(current.txtElement);}},{key:"setLeadingMoveText",value:function setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y);}},{key:"addFontStyle",value:function addFontStyle(fontObj){if(!fontObj.data){throw new Error("addFontStyle: No font data available, "+'ensure that the "fontExtraProperties" API parameter is set.');}if(!this.cssStyle){this.cssStyle=this.svgFactory.createElement("svg:style");this.cssStyle.setAttributeNS(null,"type","text/css");this.defs.append(this.cssStyle);}var url=createObjectURL(fontObj.data,fontObj.mimetype,this.forceDataSchema);this.cssStyle.textContent+="@font-face { font-family: \"".concat(fontObj.loadedName,"\";")+" src: url(".concat(url,"); }\n");}},{key:"setFont",value:function setFont(details){var current=this.current;var fontObj=this.commonObjs.get(details[0]);var size=details[1];current.font=fontObj;if(this.embedFonts&&!fontObj.missingFile&&!this.embeddedFonts[fontObj.loadedName]){this.addFontStyle(fontObj);this.embeddedFonts[fontObj.loadedName]=fontObj;}current.fontMatrix=fontObj.fontMatrix||_util.FONT_IDENTITY_MATRIX;var bold="normal";if(fontObj.black){bold="900";}else if(fontObj.bold){bold="bold";}var italic=fontObj.italic?"italic":"normal";if(size<0){size=-size;current.fontDirection=-1;}else{current.fontDirection=1;}current.fontSize=size;current.fontFamily=fontObj.loadedName;current.fontWeight=bold;current.fontStyle=italic;current.tspan=this.svgFactory.createElement("svg:tspan");current.tspan.setAttributeNS(null,"y",pf(-current.y));current.xcoords=[];current.ycoords=[];}},{key:"endText",value:function endText(){var _current$txtElement;var current=this.current;if(current.textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG&&(_current$txtElement=current.txtElement)!==null&&_current$txtElement!==void 0&&_current$txtElement.hasChildNodes()){current.element=current.txtElement;this.clip("nonzero");this.endPath();}}},{key:"setLineWidth",value:function setLineWidth(width){if(width>0){this.current.lineWidth=width;}}},{key:"setLineCap",value:function setLineCap(style){this.current.lineCap=LINE_CAP_STYLES[style];}},{key:"setLineJoin",value:function setLineJoin(style){this.current.lineJoin=LINE_JOIN_STYLES[style];}},{key:"setMiterLimit",value:function setMiterLimit(limit){this.current.miterLimit=limit;}},{key:"setStrokeAlpha",value:function setStrokeAlpha(strokeAlpha){this.current.strokeAlpha=strokeAlpha;}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(r,g,b){this.current.strokeColor=_util.Util.makeHexColor(r,g,b);}},{key:"setFillAlpha",value:function setFillAlpha(fillAlpha){this.current.fillAlpha=fillAlpha;}},{key:"setFillRGBColor",value:function setFillRGBColor(r,g,b){this.current.fillColor=_util.Util.makeHexColor(r,g,b);this.current.tspan=this.svgFactory.createElement("svg:tspan");this.current.xcoords=[];this.current.ycoords=[];}},{key:"setStrokeColorN",value:function setStrokeColorN(args){this.current.strokeColor=this._makeColorN_Pattern(args);}},{key:"setFillColorN",value:function setFillColorN(args){this.current.fillColor=this._makeColorN_Pattern(args);}},{key:"shadingFill",value:function shadingFill(args){var width=this.viewport.width;var height=this.viewport.height;var inv=_util.Util.inverseTransform(this.transformMatrix);var bl=_util.Util.applyTransform([0,0],inv);var br=_util.Util.applyTransform([0,height],inv);var ul=_util.Util.applyTransform([width,0],inv);var ur=_util.Util.applyTransform([width,height],inv);var x0=Math.min(bl[0],br[0],ul[0],ur[0]);var y0=Math.min(bl[1],br[1],ul[1],ur[1]);var x1=Math.max(bl[0],br[0],ul[0],ur[0]);var y1=Math.max(bl[1],br[1],ul[1],ur[1]);var rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x",x0);rect.setAttributeNS(null,"y",y0);rect.setAttributeNS(null,"width",x1-x0);rect.setAttributeNS(null,"height",y1-y0);rect.setAttributeNS(null,"fill",this._makeShadingPattern(args));if(this.current.fillAlpha<1){rect.setAttributeNS(null,"fill-opacity",this.current.fillAlpha);}this._ensureTransformGroup().append(rect);}},{key:"_makeColorN_Pattern",value:function _makeColorN_Pattern(args){if(args[0]==="TilingPattern"){return this._makeTilingPattern(args);}return this._makeShadingPattern(args);}},{key:"_makeTilingPattern",value:function _makeTilingPattern(args){var color=args[1];var operatorList=args[2];var matrix=args[3]||_util.IDENTITY_MATRIX;var _args$=_slicedToArray(args[4],4),x0=_args$[0],y0=_args$[1],x1=_args$[2],y1=_args$[3];var xstep=args[5];var ystep=args[6];var paintType=args[7];var tilingId="shading".concat(shadingCount++);var _Util$normalizeRect=_util.Util.normalizeRect([].concat(_toConsumableArray(_util.Util.applyTransform([x0,y0],matrix)),_toConsumableArray(_util.Util.applyTransform([x1,y1],matrix)))),_Util$normalizeRect2=_slicedToArray(_Util$normalizeRect,4),tx0=_Util$normalizeRect2[0],ty0=_Util$normalizeRect2[1],tx1=_Util$normalizeRect2[2],ty1=_Util$normalizeRect2[3];var _Util$singularValueDe=_util.Util.singularValueDecompose2dScale(matrix),_Util$singularValueDe2=_slicedToArray(_Util$singularValueDe,2),xscale=_Util$singularValueDe2[0],yscale=_Util$singularValueDe2[1];var txstep=xstep*xscale;var tystep=ystep*yscale;var tiling=this.svgFactory.createElement("svg:pattern");tiling.setAttributeNS(null,"id",tilingId);tiling.setAttributeNS(null,"patternUnits","userSpaceOnUse");tiling.setAttributeNS(null,"width",txstep);tiling.setAttributeNS(null,"height",tystep);tiling.setAttributeNS(null,"x","".concat(tx0));tiling.setAttributeNS(null,"y","".concat(ty0));var svg=this.svg;var transformMatrix=this.transformMatrix;var fillColor=this.current.fillColor;var strokeColor=this.current.strokeColor;var bbox=this.svgFactory.create(tx1-tx0,ty1-ty0);this.svg=bbox;this.transformMatrix=matrix;if(paintType===2){var cssColor=_util.Util.makeHexColor.apply(_util.Util,_toConsumableArray(color));this.current.fillColor=cssColor;this.current.strokeColor=cssColor;}this.executeOpTree(this.convertOpList(operatorList));this.svg=svg;this.transformMatrix=transformMatrix;this.current.fillColor=fillColor;this.current.strokeColor=strokeColor;tiling.append(bbox.childNodes[0]);this.defs.append(tiling);return"url(#".concat(tilingId,")");}},{key:"_makeShadingPattern",value:function _makeShadingPattern(args){if(typeof args==="string"){args=this.objs.get(args);}switch(args[0]){case"RadialAxial":var shadingId="shading".concat(shadingCount++);var colorStops=args[3];var gradient;switch(args[1]){case"axial":var point0=args[4];var point1=args[5];gradient=this.svgFactory.createElement("svg:linearGradient");gradient.setAttributeNS(null,"id",shadingId);gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse");gradient.setAttributeNS(null,"x1",point0[0]);gradient.setAttributeNS(null,"y1",point0[1]);gradient.setAttributeNS(null,"x2",point1[0]);gradient.setAttributeNS(null,"y2",point1[1]);break;case"radial":var focalPoint=args[4];var circlePoint=args[5];var focalRadius=args[6];var circleRadius=args[7];gradient=this.svgFactory.createElement("svg:radialGradient");gradient.setAttributeNS(null,"id",shadingId);gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse");gradient.setAttributeNS(null,"cx",circlePoint[0]);gradient.setAttributeNS(null,"cy",circlePoint[1]);gradient.setAttributeNS(null,"r",circleRadius);gradient.setAttributeNS(null,"fx",focalPoint[0]);gradient.setAttributeNS(null,"fy",focalPoint[1]);gradient.setAttributeNS(null,"fr",focalRadius);break;default:throw new Error("Unknown RadialAxial type: ".concat(args[1]));}var _iterator5=_createForOfIteratorHelper(colorStops),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var colorStop=_step5.value;var stop=this.svgFactory.createElement("svg:stop");stop.setAttributeNS(null,"offset",colorStop[0]);stop.setAttributeNS(null,"stop-color",colorStop[1]);gradient.append(stop);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}this.defs.append(gradient);return"url(#".concat(shadingId,")");case"Mesh":(0,_util.warn)("Unimplemented pattern Mesh");return null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(args[0]));}}},{key:"setDash",value:function setDash(dashArray,dashPhase){this.current.dashArray=dashArray;this.current.dashPhase=dashPhase;}},{key:"constructPath",value:function constructPath(ops,args){var current=this.current;var x=current.x,y=current.y;var d=[];var j=0;var _iterator6=_createForOfIteratorHelper(ops),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var op=_step6.value;switch(op|0){case _util.OPS.rectangle:x=args[j++];y=args[j++];var width=args[j++];var height=args[j++];var xw=x+width;var yh=y+height;d.push("M",pf(x),pf(y),"L",pf(xw),pf(y),"L",pf(xw),pf(yh),"L",pf(x),pf(yh),"Z");break;case _util.OPS.moveTo:x=args[j++];y=args[j++];d.push("M",pf(x),pf(y));break;case _util.OPS.lineTo:x=args[j++];y=args[j++];d.push("L",pf(x),pf(y));break;case _util.OPS.curveTo:x=args[j+4];y=args[j+5];d.push("C",pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]),pf(x),pf(y));j+=6;break;case _util.OPS.curveTo2:d.push("C",pf(x),pf(y),pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]));x=args[j+2];y=args[j+3];j+=4;break;case _util.OPS.curveTo3:x=args[j+2];y=args[j+3];d.push("C",pf(args[j]),pf(args[j+1]),pf(x),pf(y),pf(x),pf(y));j+=4;break;case _util.OPS.closePath:d.push("Z");break;}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}d=d.join(" ");if(current.path&&ops.length>0&&ops[0]!==_util.OPS.rectangle&&ops[0]!==_util.OPS.moveTo){d=current.path.getAttributeNS(null,"d")+d;}else{current.path=this.svgFactory.createElement("svg:path");this._ensureTransformGroup().append(current.path);}current.path.setAttributeNS(null,"d",d);current.path.setAttributeNS(null,"fill","none");current.element=current.path;current.setCurrentPoint(x,y);}},{key:"endPath",value:function endPath(){var current=this.current;current.path=null;if(!this.pendingClip){return;}if(!current.element){this.pendingClip=null;return;}var clipId="clippath".concat(clipCount++);var clipPath=this.svgFactory.createElement("svg:clipPath");clipPath.setAttributeNS(null,"id",clipId);clipPath.setAttributeNS(null,"transform",pm(this.transformMatrix));var clipElement=current.element.cloneNode(true);if(this.pendingClip==="evenodd"){clipElement.setAttributeNS(null,"clip-rule","evenodd");}else{clipElement.setAttributeNS(null,"clip-rule","nonzero");}this.pendingClip=null;clipPath.append(clipElement);this.defs.append(clipPath);if(current.activeClipUrl){current.clipGroup=null;var _iterator7=_createForOfIteratorHelper(this.extraStack),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var prev=_step7.value;prev.clipGroup=null;}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}clipPath.setAttributeNS(null,"clip-path",current.activeClipUrl);}current.activeClipUrl="url(#".concat(clipId,")");this.tgrp=null;}},{key:"clip",value:function clip(type){this.pendingClip=type;}},{key:"closePath",value:function closePath(){var current=this.current;if(current.path){var d="".concat(current.path.getAttributeNS(null,"d"),"Z");current.path.setAttributeNS(null,"d",d);}}},{key:"setLeading",value:function setLeading(leading){this.current.leading=-leading;}},{key:"setTextRise",value:function setTextRise(textRise){this.current.textRise=textRise;}},{key:"setTextRenderingMode",value:function setTextRenderingMode(textRenderingMode){this.current.textRenderingMode=textRenderingMode;}},{key:"setHScale",value:function setHScale(scale){this.current.textHScale=scale/100;}},{key:"setRenderingIntent",value:function setRenderingIntent(intent){}},{key:"setFlatness",value:function setFlatness(flatness){}},{key:"setGState",value:function setGState(states){var _iterator8=_createForOfIteratorHelper(states),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _step8$value=_slicedToArray(_step8.value,2),key=_step8$value[0],value=_step8$value[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value);break;case"CA":this.setStrokeAlpha(value);break;case"ca":this.setFillAlpha(value);break;default:(0,_util.warn)("Unimplemented graphic state operator ".concat(key));break;}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}},{key:"fill",value:function fill(){var current=this.current;if(current.element){current.element.setAttributeNS(null,"fill",current.fillColor);current.element.setAttributeNS(null,"fill-opacity",current.fillAlpha);this.endPath();}}},{key:"stroke",value:function stroke(){var current=this.current;if(current.element){this._setStrokeAttributes(current.element);current.element.setAttributeNS(null,"fill","none");this.endPath();}}},{key:"_setStrokeAttributes",value:function _setStrokeAttributes(element){var lineWidthScale=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var current=this.current;var dashArray=current.dashArray;if(lineWidthScale!==1&&dashArray.length>0){dashArray=dashArray.map(function(value){return lineWidthScale*value;});}element.setAttributeNS(null,"stroke",current.strokeColor);element.setAttributeNS(null,"stroke-opacity",current.strokeAlpha);element.setAttributeNS(null,"stroke-miterlimit",pf(current.miterLimit));element.setAttributeNS(null,"stroke-linecap",current.lineCap);element.setAttributeNS(null,"stroke-linejoin",current.lineJoin);element.setAttributeNS(null,"stroke-width",pf(lineWidthScale*current.lineWidth)+"px");element.setAttributeNS(null,"stroke-dasharray",dashArray.map(pf).join(" "));element.setAttributeNS(null,"stroke-dashoffset",pf(lineWidthScale*current.dashPhase)+"px");}},{key:"eoFill",value:function eoFill(){var _this$current$element;(_this$current$element=this.current.element)===null||_this$current$element===void 0?void 0:_this$current$element.setAttributeNS(null,"fill-rule","evenodd");this.fill();}},{key:"fillStroke",value:function fillStroke(){this.stroke();this.fill();}},{key:"eoFillStroke",value:function eoFillStroke(){var _this$current$element2;(_this$current$element2=this.current.element)===null||_this$current$element2===void 0?void 0:_this$current$element2.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke();}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke();}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke();}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.closePath();this.eoFillStroke();}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){var rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0");rect.setAttributeNS(null,"y","0");rect.setAttributeNS(null,"width","1px");rect.setAttributeNS(null,"height","1px");rect.setAttributeNS(null,"fill",this.current.fillColor);this._ensureTransformGroup().append(rect);}},{key:"paintImageXObject",value:function paintImageXObject(objId){var imgData=this.getObject(objId);if(!imgData){(0,_util.warn)("Dependent image with object ID ".concat(objId," is not ready yet"));return;}this.paintInlineImageXObject(imgData);}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(imgData,mask){var width=imgData.width;var height=imgData.height;var imgSrc=convertImgDataToPng(imgData,this.forceDataSchema,!!mask);var cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x","0");cliprect.setAttributeNS(null,"y","0");cliprect.setAttributeNS(null,"width",pf(width));cliprect.setAttributeNS(null,"height",pf(height));this.current.element=cliprect;this.clip("nonzero");var imgEl=this.svgFactory.createElement("svg:image");imgEl.setAttributeNS(XLINK_NS,"xlink:href",imgSrc);imgEl.setAttributeNS(null,"x","0");imgEl.setAttributeNS(null,"y",pf(-height));imgEl.setAttributeNS(null,"width",pf(width)+"px");imgEl.setAttributeNS(null,"height",pf(height)+"px");imgEl.setAttributeNS(null,"transform","scale(".concat(pf(1/width)," ").concat(pf(-1/height),")"));if(mask){mask.append(imgEl);}else{this._ensureTransformGroup().append(imgEl);}}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(img){var imgData=this.getObject(img.data,img);if(imgData.bitmap){(0,_util.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, "+"ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return;}var current=this.current;var width=imgData.width;var height=imgData.height;var fillColor=current.fillColor;current.maskId="mask".concat(maskCount++);var mask=this.svgFactory.createElement("svg:mask");mask.setAttributeNS(null,"id",current.maskId);var rect=this.svgFactory.createElement("svg:rect");rect.setAttributeNS(null,"x","0");rect.setAttributeNS(null,"y","0");rect.setAttributeNS(null,"width",pf(width));rect.setAttributeNS(null,"height",pf(height));rect.setAttributeNS(null,"fill",fillColor);rect.setAttributeNS(null,"mask","url(#".concat(current.maskId,")"));this.defs.append(mask);this._ensureTransformGroup().append(rect);this.paintInlineImageXObject(imgData,mask);}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(matrix,bbox){if(Array.isArray(matrix)&&matrix.length===6){this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]);}if(bbox){var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];var cliprect=this.svgFactory.createElement("svg:rect");cliprect.setAttributeNS(null,"x",bbox[0]);cliprect.setAttributeNS(null,"y",bbox[1]);cliprect.setAttributeNS(null,"width",pf(width));cliprect.setAttributeNS(null,"height",pf(height));this.current.element=cliprect;this.clip("nonzero");this.endPath();}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){}},{key:"_initialize",value:function _initialize(viewport){var svg=this.svgFactory.create(viewport.width,viewport.height);var definitions=this.svgFactory.createElement("svg:defs");svg.append(definitions);this.defs=definitions;var rootGroup=this.svgFactory.createElement("svg:g");rootGroup.setAttributeNS(null,"transform",pm(viewport.transform));svg.append(rootGroup);this.svg=rootGroup;return svg;}},{key:"_ensureClipGroup",value:function _ensureClipGroup(){if(!this.current.clipGroup){var clipGroup=this.svgFactory.createElement("svg:g");clipGroup.setAttributeNS(null,"clip-path",this.current.activeClipUrl);this.svg.append(clipGroup);this.current.clipGroup=clipGroup;}return this.current.clipGroup;}},{key:"_ensureTransformGroup",value:function _ensureTransformGroup(){if(!this.tgrp){this.tgrp=this.svgFactory.createElement("svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix));if(this.current.activeClipUrl){this._ensureClipGroup().append(this.tgrp);}else{this.svg.append(this.tgrp);}}return this.tgrp;}}]);return SVGGraphics;}();}

/***/ })
/******/ 	]);
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __w_pdfjs_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __w_pdfjs_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
var exports = __webpack_exports__;
Object.defineProperty(exports, "__esModule", ({value:true}));Object.defineProperty(exports, "AbortException", ({enumerable:true,get:function get(){return _util.AbortException;}}));Object.defineProperty(exports, "AnnotationEditorLayer", ({enumerable:true,get:function get(){return _annotation_editor_layer.AnnotationEditorLayer;}}));Object.defineProperty(exports, "AnnotationEditorParamsType", ({enumerable:true,get:function get(){return _util.AnnotationEditorParamsType;}}));Object.defineProperty(exports, "AnnotationEditorType", ({enumerable:true,get:function get(){return _util.AnnotationEditorType;}}));Object.defineProperty(exports, "AnnotationEditorUIManager", ({enumerable:true,get:function get(){return _tools.AnnotationEditorUIManager;}}));Object.defineProperty(exports, "AnnotationLayer", ({enumerable:true,get:function get(){return _annotation_layer.AnnotationLayer;}}));Object.defineProperty(exports, "AnnotationMode", ({enumerable:true,get:function get(){return _util.AnnotationMode;}}));Object.defineProperty(exports, "CMapCompressionType", ({enumerable:true,get:function get(){return _util.CMapCompressionType;}}));Object.defineProperty(exports, "FeatureTest", ({enumerable:true,get:function get(){return _util.FeatureTest;}}));Object.defineProperty(exports, "GlobalWorkerOptions", ({enumerable:true,get:function get(){return _worker_options.GlobalWorkerOptions;}}));Object.defineProperty(exports, "InvalidPDFException", ({enumerable:true,get:function get(){return _util.InvalidPDFException;}}));Object.defineProperty(exports, "MissingPDFException", ({enumerable:true,get:function get(){return _util.MissingPDFException;}}));Object.defineProperty(exports, "OPS", ({enumerable:true,get:function get(){return _util.OPS;}}));Object.defineProperty(exports, "PDFDataRangeTransport", ({enumerable:true,get:function get(){return _api.PDFDataRangeTransport;}}));Object.defineProperty(exports, "PDFDateString", ({enumerable:true,get:function get(){return _display_utils.PDFDateString;}}));Object.defineProperty(exports, "PDFWorker", ({enumerable:true,get:function get(){return _api.PDFWorker;}}));Object.defineProperty(exports, "PasswordResponses", ({enumerable:true,get:function get(){return _util.PasswordResponses;}}));Object.defineProperty(exports, "PermissionFlag", ({enumerable:true,get:function get(){return _util.PermissionFlag;}}));Object.defineProperty(exports, "PixelsPerInch", ({enumerable:true,get:function get(){return _display_utils.PixelsPerInch;}}));Object.defineProperty(exports, "RenderingCancelledException", ({enumerable:true,get:function get(){return _display_utils.RenderingCancelledException;}}));Object.defineProperty(exports, "SVGGraphics", ({enumerable:true,get:function get(){return _svg.SVGGraphics;}}));Object.defineProperty(exports, "UnexpectedResponseException", ({enumerable:true,get:function get(){return _util.UnexpectedResponseException;}}));Object.defineProperty(exports, "Util", ({enumerable:true,get:function get(){return _util.Util;}}));Object.defineProperty(exports, "VerbosityLevel", ({enumerable:true,get:function get(){return _util.VerbosityLevel;}}));Object.defineProperty(exports, "XfaLayer", ({enumerable:true,get:function get(){return _xfa_layer.XfaLayer;}}));Object.defineProperty(exports, "build", ({enumerable:true,get:function get(){return _api.build;}}));Object.defineProperty(exports, "createPromiseCapability", ({enumerable:true,get:function get(){return _util.createPromiseCapability;}}));Object.defineProperty(exports, "createValidAbsoluteUrl", ({enumerable:true,get:function get(){return _util.createValidAbsoluteUrl;}}));Object.defineProperty(exports, "getDocument", ({enumerable:true,get:function get(){return _api.getDocument;}}));Object.defineProperty(exports, "getFilenameFromUrl", ({enumerable:true,get:function get(){return _display_utils.getFilenameFromUrl;}}));Object.defineProperty(exports, "getPdfFilenameFromUrl", ({enumerable:true,get:function get(){return _display_utils.getPdfFilenameFromUrl;}}));Object.defineProperty(exports, "getXfaPageViewport", ({enumerable:true,get:function get(){return _display_utils.getXfaPageViewport;}}));Object.defineProperty(exports, "isDataScheme", ({enumerable:true,get:function get(){return _display_utils.isDataScheme;}}));Object.defineProperty(exports, "isPdfFile", ({enumerable:true,get:function get(){return _display_utils.isPdfFile;}}));Object.defineProperty(exports, "loadScript", ({enumerable:true,get:function get(){return _display_utils.loadScript;}}));Object.defineProperty(exports, "renderTextLayer", ({enumerable:true,get:function get(){return _text_layer.renderTextLayer;}}));Object.defineProperty(exports, "setLayerDimensions", ({enumerable:true,get:function get(){return _display_utils.setLayerDimensions;}}));Object.defineProperty(exports, "shadow", ({enumerable:true,get:function get(){return _util.shadow;}}));Object.defineProperty(exports, "updateTextLayer", ({enumerable:true,get:function get(){return _text_layer.updateTextLayer;}}));Object.defineProperty(exports, "version", ({enumerable:true,get:function get(){return _api.version;}}));var _util=__w_pdfjs_require__(1);var _api=__w_pdfjs_require__(137);var _display_utils=__w_pdfjs_require__(141);var _text_layer=__w_pdfjs_require__(161);var _annotation_editor_layer=__w_pdfjs_require__(162);var _tools=__w_pdfjs_require__(140);var _annotation_layer=__w_pdfjs_require__(167);var _worker_options=__w_pdfjs_require__(149);var _svg=__w_pdfjs_require__(170);var _xfa_layer=__w_pdfjs_require__(169);var pdfjsVersion='3.5.550';var pdfjsBuild='df5366593';
})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
});
