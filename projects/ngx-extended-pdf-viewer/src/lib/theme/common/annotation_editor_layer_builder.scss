/* Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

:root {
  --outline-width: 2px;
  --outline-color: #0060df;
  --outline-around-width: 1px;
  --outline-around-color: #f0f0f4;
  --hover-outline-around-color: var(--outline-around-color);
  --focus-outline: solid var(--outline-width) var(--outline-color);
  --unfocus-outline: solid var(--outline-width) transparent;
  --focus-outline-around: solid var(--outline-around-width) var(--outline-around-color);
  --hover-outline-color: #8f8f9d;
  --hover-outline: solid var(--outline-width) var(--hover-outline-color);
  --hover-outline-around: solid var(--outline-around-width) var(--hover-outline-around-color);
  --freetext-line-height: 1.35;
  --freetext-padding: 2px;
  --resizer-bg-color: var(--outline-color);
  --resizer-size: 6px;
  --resizer-shift: calc(0px - (var(--outline-width) + var(--resizer-size)) / 2 - var(--outline-around-width));
  --editorFreeText-editing-cursor: text;
  --editorInk-editing-cursor: url("data:image/svg+xml;charset=UTF-8,<svg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M2.49913 12.6251C2.61913 12.6251 2.73913 12.6051 2.85713 12.5661L6.29013 11.4201L13.2891 4.4221C14.0191 3.6911 14.0191 2.5011 13.2891 1.7701L12.2291 0.710098C11.4971 -0.0199023 10.3091 -0.0199023 9.57713 0.710098L2.57813 7.7091L1.43313 11.1451C1.29813 11.5511 1.40213 11.9931 1.70513 12.2951C1.92113 12.5101 2.20613 12.6251 2.49913 12.6251ZM10.4611 1.5951C10.7031 1.3511 11.1021 1.3511 11.3441 1.5951L12.4051 2.6561C12.6491 2.8991 12.6491 3.2961 12.4051 3.5391L11.3401 4.6051L9.39513 2.6601L10.4611 1.5951ZM3.67013 8.3851L8.51013 3.5451L10.4541 5.4891L5.61413 10.3301L2.69713 11.3031L3.67013 8.3851Z' fill='black'/><path d='M14.8169 13.314L13.0229 13.862C12.3309 14.073 11.5909 14.111 10.8859 13.968L8.80391 13.551C7.58491 13.308 6.29791 13.48 5.18491 14.036C3.95291 14.652 2.46691 14.412 1.49191 13.436L1.44091 13.385L0.60791 14.321C1.46291 15.175 2.59991 15.625 3.75291 15.625C4.42891 15.625 5.10991 15.471 5.74391 15.153C6.60891 14.721 7.60891 14.586 8.55891 14.777L10.6409 15.194C11.5509 15.376 12.5009 15.327 13.3879 15.056L15.1819 14.508L14.8169 13.314Z' fill='black'/></svg>");
  --editorHighlight-editing-cursor: url('data:image/svg+xml;charset=UTF-8,<svg width="28" height="31" viewBox="0 0 28 31" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.1743 5.20761L14.1743 5.20757L14.1691 5.2127L7.41914 11.9627C7.37184 12.01 7.30858 12.0362 7.2427 12.0362C7.17681 12.0362 7.11355 12.01 7.06625 11.9627L6.47126 11.3677L6.11771 11.0142L5.76415 11.3677L5.04559 12.0863H2.21734L4.34746 9.95L4.7 9.59644L4.34695 9.2434L3.75625 8.6527C3.66151 8.55796 3.66151 8.39454 3.75625 8.2998L10.5063 1.5498C10.7563 1.29979 11.0906 1.15625 11.4427 1.15625C11.801 1.15625 12.1306 1.29401 12.3741 1.54464L12.374 1.54468L12.3791 1.5498L14.1691 3.3398L14.1691 3.33984L14.1743 3.34489C14.4249 3.58836 14.5627 3.91791 14.5627 4.27625C14.5627 4.63459 14.4249 4.96414 14.1743 5.20761ZM4.4927 8.47625V8.68336L4.63914 8.8298L6.88914 11.0798L7.2427 11.4334L7.59625 11.0798L10.0769 8.59918L10.4304 8.24563L10.0769 7.89207L7.82187 5.63707L7.46832 5.28352L7.11477 5.63707L4.63914 8.1127L4.4927 8.25914V8.46625V8.47625ZM10.4304 7.53852L10.784 7.89207L11.1375 7.53852L13.8162 4.8598C14.1415 4.53454 14.1415 4.01796 13.8162 3.6927L12.0262 1.9027C11.8313 1.70771 11.5919 1.65625 11.4427 1.65625H11.426L11.4094 1.65736L11.4427 2.15625C11.4094 1.65736 11.4093 1.65737 11.4092 1.65737L11.4089 1.65739L11.4084 1.65742L11.4074 1.6575L11.4051 1.65767L11.3997 1.65809L11.3859 1.65936C11.3755 1.66041 11.3624 1.66192 11.3473 1.66409C11.3176 1.66833 11.2769 1.6755 11.2305 1.68771C11.1523 1.70827 10.9924 1.75942 10.8591 1.8927L8.17543 4.57641L7.82187 4.92997L8.17543 5.28352L10.4304 7.53852ZM0.512695 16.1562V15.1562H14.5127V16.1562H0.512695Z" stroke="#15141A"/><path d="M23.6377 17.9742C23.6377 17.7572 23.7477 17.5592 23.9307 17.4442L25.0387 16.7522C25.1387 16.6902 25.2527 16.6572 25.3707 16.6572H27.0127V15.4072H25.3707C25.0187 15.4072 24.6757 15.5062 24.3767 15.6922L23.2687 16.3852C23.1737 16.4442 23.0937 16.5202 23.0127 16.5942C22.9307 16.5202 22.8517 16.4442 22.7567 16.3852L21.6477 15.6922C21.3487 15.5062 21.0057 15.4072 20.6547 15.4072H19.0127V16.6572H20.6547C20.7717 16.6572 20.8867 16.6902 20.9867 16.7522L22.0947 17.4442C22.2787 17.5592 22.3887 17.7572 22.3887 17.9742V23.0322V28.0902C22.3887 28.3072 22.2787 28.5052 22.0947 28.6202L20.9857 29.3122C20.8857 29.3742 20.7717 29.4072 20.6537 29.4072H19.0127V30.6572H20.6547C21.0067 30.6572 21.3497 30.5582 21.6487 30.3722L22.7567 29.6802C22.8527 29.6202 22.9317 29.5442 23.0127 29.4712C23.0937 29.5442 23.1737 29.6202 23.2687 29.6802L24.3777 30.3732C24.6767 30.5592 25.0197 30.6582 25.3717 30.6582H27.0127V29.4082H25.3707C25.2537 29.4082 25.1387 29.3752 25.0387 29.3132L23.9307 28.6212C23.7467 28.5062 23.6377 28.3082 23.6377 28.0912V23.0322V17.9742Z" fill="black"/></svg>') 23 23,
    text;
  --editorFreeHighlight-editing-cursor: url('data:image/svg+xml;charset=UTF-8,<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g><path fill-rule="evenodd" clip-rule="evenodd" d="M7.10918 11.66C7.24918 11.8 7.43918 11.88 7.63918 11.88C7.83918 11.88 8.02918 11.8 8.16918 11.66L14.9192 4.91C15.2692 4.57 15.4592 4.11 15.4592 3.62C15.4592 3.13 15.2692 2.67 14.9192 2.33L13.1292 0.54C12.7892 0.19 12.3292 0 11.8392 0C11.3492 0 10.8892 0.2 10.5492 0.54L3.79918 7.29C3.50918 7.58 3.50918 8.06 3.79918 8.35L4.38988 8.9407L1.40918 11.93H5.64918L6.51419 11.065L7.10918 11.66ZM7.63918 10.07L5.38918 7.82V7.81L7.8648 5.33438L10.1198 7.58938L7.63918 10.07ZM11.1805 6.52872L13.8592 3.85C13.9892 3.72 13.9892 3.52 13.8592 3.39L12.0692 1.6C11.9892 1.52 11.8892 1.5 11.8392 1.5C11.8392 1.5 11.6892 1.51 11.6092 1.59L8.92546 4.27372L11.1805 6.52872Z" fill="#000"/><path d="M0.40918 14H15.4092V16H0.40918V14Z" fill="#000"/></g></svg>') 0 16,
    pointer;
  --editorFreeText-editing-cursor: url("data:image/svg+xml;charset=UTF-8,<svg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M12 2.75H12.5V2.25V1V0.5H12H10.358C9.91165 0.5 9.47731 0.625661 9.09989 0.860442L9.09886 0.861087L8 1.54837L6.89997 0.860979L6.89911 0.860443C6.5218 0.625734 6.08748 0.5 5.642 0.5H4H3.5V1V2.25V2.75H4H5.642C5.66478 2.75 5.6885 2.75641 5.71008 2.76968C5.71023 2.76977 5.71038 2.76986 5.71053 2.76995L6.817 3.461C6.81704 3.46103 6.81709 3.46105 6.81713 3.46108C6.81713 3.46108 6.81713 3.46108 6.81714 3.46109C6.8552 3.48494 6.876 3.52285 6.876 3.567V8V12.433C6.876 12.4771 6.85523 12.515 6.81722 12.5389C6.81715 12.5389 6.81707 12.539 6.817 12.539L5.70953 13.23C5.70941 13.2301 5.70929 13.2302 5.70917 13.2303C5.68723 13.2438 5.6644 13.25 5.641 13.25H4H3.5V13.75V15V15.5H4H5.642C6.08835 15.5 6.52269 15.3743 6.90011 15.1396L6.90086 15.1391L8 14.4526L9.10003 15.14L9.10089 15.1406C9.47831 15.3753 9.91265 15.501 10.359 15.501H12H12.5V15.001V13.751V13.251H12H10.358C10.3352 13.251 10.3115 13.2446 10.2899 13.2313C10.2897 13.2312 10.2896 13.2311 10.2895 13.231L9.183 12.54C9.18298 12.54 9.18295 12.54 9.18293 12.54C9.18291 12.5399 9.18288 12.5399 9.18286 12.5399C9.14615 12.5169 9.125 12.4797 9.125 12.434V8V3.567C9.125 3.52266 9.14603 3.48441 9.18364 3.4606C9.18377 3.46052 9.1839 3.46043 9.18404 3.46035L10.2895 2.76995C10.2896 2.76985 10.2898 2.76975 10.2899 2.76966C10.3119 2.75619 10.3346 2.75 10.358 2.75H12Z' fill='black' stroke='white'/></svg>") 0 16,
    pointer;
}

ngx-extended-pdf-viewer {

  /* The following class is used to hide an element but keep it available to
 * for screen readers. */
  .visuallyHidden {
    position: absolute;
    top: 0;
    left: 0;
    border: 0;
    margin: 0;
    padding: 0;
    width: 0;
    height: 0;
    overflow: hidden;
    white-space: nowrap;
    font-size: 0;
  }

  .textLayer.highlighting {
    cursor: var(--editorFreeHighlight-editing-cursor);

    &:not(.free) span {
      cursor: var(--editorHighlight-editing-cursor);
    }

    &.free span {
      cursor: var(--editorFreeHighlight-editing-cursor);
    }
  }

  @media (min-resolution: 1.1dppx) {
    :root {
      --editorFreeText-editing-cursor: url('data:image/svg+xml;charset=UTF-8,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.75H12.5V2.25V1V0.5H12H10.358C9.91165 0.5 9.47731 0.625661 9.09989 0.860442L9.09886 0.861087L8 1.54837L6.89997 0.860979L6.89911 0.860443C6.5218 0.625734 6.08748 0.5 5.642 0.5H4H3.5V1V2.25V2.75H4H5.642C5.66478 2.75 5.6885 2.75641 5.71008 2.76968C5.71023 2.76977 5.71038 2.76986 5.71053 2.76995L6.817 3.461C6.81704 3.46103 6.81709 3.46105 6.81713 3.46108C6.81713 3.46108 6.81713 3.46108 6.81714 3.46109C6.8552 3.48494 6.876 3.52285 6.876 3.567V8V12.433C6.876 12.4771 6.85523 12.515 6.81722 12.5389C6.81715 12.5389 6.81707 12.539 6.817 12.539L5.70953 13.23C5.70941 13.2301 5.70929 13.2302 5.70917 13.2303C5.68723 13.2438 5.6644 13.25 5.641 13.25H4H3.5V13.75V15V15.5H4H5.642C6.08835 15.5 6.52269 15.3743 6.90011 15.1396L6.90086 15.1391L8 14.4526L9.10003 15.14L9.10089 15.1406C9.47831 15.3753 9.91265 15.501 10.359 15.501H12H12.5V15.001V13.751V13.251H12H10.358C10.3352 13.251 10.3115 13.2446 10.2899 13.2313C10.2897 13.2312 10.2896 13.2311 10.2895 13.231L9.183 12.54C9.18298 12.54 9.18295 12.54 9.18293 12.54C9.18291 12.5399 9.18288 12.5399 9.18286 12.5399C9.14615 12.5169 9.125 12.4797 9.125 12.434V8V3.567C9.125 3.52266 9.14603 3.48441 9.18364 3.4606C9.18377 3.46052 9.1839 3.46043 9.18404 3.46035L10.2895 2.76995C10.2896 2.76985 10.2898 2.76975 10.2899 2.76966C10.3119 2.75619 10.3346 2.75 10.358 2.75H12Z" fill="black" stroke="white"/></svg>') 0 16,
        text;
    }
  }

  @media screen and (forced-colors: active) {
    :root {
      --outline-color: CanvasText;
      --outline-around-color: ButtonFace;
      --resizer-bg-color: ButtonText;
      --hover-outline-color: Highlight;
      --hover-outline-around-color: SelectedItemText;
    }
  }

  [data-editor-rotation="90"] {
    transform: rotate(90deg);
  }

  [data-editor-rotation="180"] {
    transform: rotate(180deg);
  }

  [data-editor-rotation="270"] {
    transform: rotate(270deg);
  }

  .annotationEditorLayer {
    background: transparent;
    position: absolute;
    inset: 0;
    font-size: calc(100px * var(--scale-factor));
    transform-origin: 0 0;
    cursor: auto;
    z-index: 4; // needed to edit annotations on top of the viewer
  }

  .annotationEditorLayer.waiting {
    content: "";
    cursor: wait;
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
  }

  .annotationEditorLayer.disabled {
    pointer-events: none;
  }

  .annotationEditorLayer.freetextEditing {
    cursor: var(--editorFreeText-editing-cursor);
  }

  .annotationEditorLayer.inkEditing {
    cursor: var(--editorInk-editing-cursor);
  }

  /* added by ngx-extended-pdf-viewer */
  .ngx-extended-pdf-viewer-prevent-touch-move #viewerContainer {
    touch-action: none;
  }

  /* end of addition by ngx-extended-pdf-viewer */

  .annotationEditorLayer :is(.freeTextEditor, .inkEditor, .stampEditor) {
    position: absolute;
    background: transparent;
    z-index: 1;
    transform-origin: 0 0;
    cursor: auto;
    max-width: 100%;
    max-height: 100%;
    border: var(--unfocus-outline);

    &.draggable.selectedEditor {
      cursor: move;
    }

    &.moving {
      touch-action: none;
    }

    &.selectedEditor {
      border: var(--focus-outline);
      outline: var(--focus-outline-around);

      &::before {
        /*
        This is a workaround for the lack of support for stripes(...) (see
        https://drafts.csswg.org/css-images-4/#stripes).
        The outline should be composed of 1px white, 2px blue and 1px white.
        This could be achieved in different ways:
          - using a linear-gradient;
          - using a box-shadow;
          - using an outline on the selected element and an outline+border on
            the ::before pseudo-element.
        All these options lead to incorrect rendering likely due to rounding
        issues.
        That said it doesn't mean that the current is ideal, but it's the best
        we could come up with for the moment.
        One drawback of this approach is that we use a border on the selected
        element which means that we must take care of it when positioning the
        div in js (see AnnotationEditor._borderLineWidth in editor.js).
      */
        content: "";
        position: absolute;
        inset: 0;
        border: var(--focus-outline-around);
        pointer-events: none;
      }
    }

    &:hover:not(.selectedEditor) {
      border: var(--hover-outline);
      outline: var(--hover-outline-around);

      &::before {
        content: "";
        position: absolute;
        inset: 0;
        border: var(--focus-outline-around);
      }
    }
  }

  .annotationEditorLayer :is(.freeTextEditor, .inkEditor, .stampEditor, .highlightEditor) {
    .editToolbar {
      --editor-toolbar-delete-image: url("data:image/svg+xml; utf8, <svg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' clip-rule='evenodd' d='M11 3H13.6C14 3 14.3 3.3 14.3 3.6C14.3 3.9 14 4.2 13.7 4.2H13.3V14C13.3 15.1 12.4 16 11.3 16H4.80005C3.70005 16 2.80005 15.1 2.80005 14V4.2H2.40005C2.00005 4.2 1.80005 4 1.80005 3.6C1.80005 3.2 2.00005 3 2.40005 3H5.00005V2C5.00005 0.9 5.90005 0 7.00005 0H9.00005C10.1 0 11 0.9 11 2V3ZM6.90005 1.2L6.30005 1.8V3H9.80005V1.8L9.20005 1.2H6.90005ZM11.4 14.7L12 14.1V4.2H4.00005V14.1L4.60005 14.7H11.4ZM7.00005 12.4C7.00005 12.7 6.70005 13 6.40005 13C6.10005 13 5.80005 12.7 5.80005 12.4V7.6C5.70005 7.3 6.00005 7 6.40005 7C6.80005 7 7.00005 7.3 7.00005 7.6V12.4ZM10.2001 12.4C10.2001 12.7 9.90006 13 9.60006 13C9.30006 13 9.00006 12.7 9.00006 12.4V7.6C9.00006 7.3 9.30006 7 9.60006 7C9.90006 7 10.2001 7.3 10.2001 7.6V12.4Z' fill='black' /></svg>");
      --editor-toolbar-bg-color: #f0f0f4;
      --editor-toolbar-fg-color: #2e2e56;
      --editor-toolbar-border-color: #8f8f9d;
      --editor-toolbar-hover-border-color: var(--editor-toolbar-border-color);
      --editor-toolbar-hover-bg-color: #e0e0e6;
      --editor-toolbar-hover-fg-color: var(--editor-toolbar-fg-color);
      --editor-toolbar-hover-outline: none;
      --editor-toolbar-focus-outline-color: #0060df;
      --editor-toolbar-shadow: 0 2px 6px 0 rgb(58 57 68 / 0.2);
      --editor-toolbar-vert-offset: 6px;
      --editor-toolbar-height: 28px;
      --editor-toolbar-padding: 2px;

      @media (prefers-color-scheme: dark) {
        --editor-toolbar-bg-color: #2b2a33;
        --editor-toolbar-fg-color: #fbfbfe;
        --editor-toolbar-hover-bg-color: #52525e;
        --editor-toolbar-focus-outline-color: #0df;
      }

      @media screen and (forced-colors: active) {
        --editor-toolbar-bg-color: ButtonFace;
        --editor-toolbar-fg-color: ButtonText;
        --editor-toolbar-border-color: ButtonText;
        --editor-toolbar-hover-border-color: AccentColor;
        --editor-toolbar-hover-bg-color: ButtonFace;
        --editor-toolbar-hover-fg-color: AccentColor;
        --editor-toolbar-hover-outline: 2px solid var(--editor-toolbar-hover-border-color);
        --editor-toolbar-focus-outline-color: ButtonBorder;
        --editor-toolbar-shadow: none;
      }

      display: flex;
      width: fit-content;
      height: var(--editor-toolbar-height);
      flex-direction: column;
      justify-content: center;
      align-items: center;
      cursor: default;
      pointer-events: auto;
      box-sizing: content-box;
      padding: var(--editor-toolbar-padding);

      position: absolute;
      inset-inline-end: 0;
      inset-block-start: calc(100% + var(--editor-toolbar-vert-offset));

      border-radius: 6px;
      background-color: var(--editor-toolbar-bg-color);
      border: 1px solid var(--editor-toolbar-border-color);
      box-shadow: var(--editor-toolbar-shadow);

      &.hidden {
        display: none;
      }

      &:has(:focus-visible) {
        border-color: transparent;
      }

      &:dir(ltr) {
        transform-origin: 100% 0;
      }

      &:dir(rtl) {
        transform-origin: 0 0;
      }

      .buttons {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0;
        height: 100%;

        .divider {
          width: 1px;
          height: calc(2 * var(--editor-toolbar-padding) + var(--editor-toolbar-height));
          background-color: var(--editor-toolbar-border-color);
          display: inline-block;
          margin-inline: 2px;
        }

        .delete {
          width: var(--editor-toolbar-height);

          &::before {
            content: "";
            mask-image: var(--editor-toolbar-delete-image);
            mask-repeat: no-repeat;
            mask-position: center;
            display: inline-block;
            background-color: var(--editor-toolbar-fg-color);
            width: 100%;
            height: 100%;
          }

          &:hover::before {
            background-color: var(--editor-toolbar-hover-fg-color);
          }
        }

        >* {
          height: var(--editor-toolbar-height);
        }

        > :not(.divider) {
          border: none;
          background-color: transparent;
          cursor: pointer;

          &:hover {
            border-radius: 2px;
            background-color: var(--editor-toolbar-hover-bg-color);
            color: var(--editor-toolbar-hover-fg-color);
            outline: var(--editor-toolbar-hover-outline);
            outline-offset: 1px;

            &:active {
              outline: none;
            }
          }

          &:focus-visible {
            border-radius: 2px;
            outline: 2px solid var(--editor-toolbar-focus-outline-color);
          }
        }

        .altText {
          --alt-text-add-image: url('data:image/svg+xml;charset=UTF-8,<svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.375 7.625V11.875C5.375 12.0408 5.44085 12.1997 5.55806 12.3169C5.67527 12.4342 5.83424 12.5 6 12.5C6.16576 12.5 6.32473 12.4342 6.44194 12.3169C6.55915 12.1997 6.625 12.0408 6.625 11.875V7.625L7.125 7.125H11.375C11.5408 7.125 11.6997 7.05915 11.8169 6.94194C11.9342 6.82473 12 6.66576 12 6.5C12 6.33424 11.9342 6.17527 11.8169 6.05806C11.6997 5.94085 11.5408 5.875 11.375 5.875H7.125L6.625 5.375V1.125C6.625 0.95924 6.55915 0.800269 6.44194 0.683058C6.32473 0.565848 6.16576 0.5 6 0.5C5.83424 0.5 5.67527 0.565848 5.55806 0.683058C5.44085 0.800269 5.375 0.95924 5.375 1.125V5.375L4.875 5.875H0.625C0.45924 5.875 0.300269 5.94085 0.183058 6.05806C0.065848 6.17527 0 6.33424 0 6.5C0 6.66576 0.065848 6.82473 0.183058 6.94194C0.300269 7.05915 0.45924 7.125 0.625 7.125H4.762L5.375 7.625Z" fill="black"/></svg>');
          --alt-text-done-image: url('data:image/svg+xml;charset=UTF-8,<svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 0.5C5.21207 0.5 4.43185 0.655195 3.7039 0.956723C2.97595 1.25825 2.31451 1.70021 1.75736 2.25736C1.20021 2.81451 0.758251 3.47595 0.456723 4.2039C0.155195 4.93185 0 5.71207 0 6.5C0 7.28793 0.155195 8.06815 0.456723 8.7961C0.758251 9.52405 1.20021 10.1855 1.75736 10.7426C2.31451 11.2998 2.97595 11.7417 3.7039 12.0433C4.43185 12.3448 5.21207 12.5 6 12.5C7.5913 12.5 9.11742 11.8679 10.2426 10.7426C11.3679 9.61742 12 8.0913 12 6.5C12 4.9087 11.3679 3.38258 10.2426 2.25736C9.11742 1.13214 7.5913 0.5 6 0.5ZM5.06 8.9L2.9464 6.7856C2.85273 6.69171 2.80018 6.56446 2.80033 6.43183C2.80048 6.29921 2.85331 6.17207 2.9472 6.0784C3.04109 5.98473 3.16834 5.93218 3.30097 5.93233C3.43359 5.93248 3.56073 5.98531 3.6544 6.0792L5.3112 7.7368L8.3464 4.7008C8.44109 4.6109 8.56715 4.56153 8.69771 4.56322C8.82827 4.56492 8.95301 4.61754 9.04534 4.70986C9.13766 4.80219 9.19028 4.92693 9.19198 5.05749C9.19367 5.18805 9.1443 5.31411 9.0544 5.4088L5.5624 8.9H5.06Z" fill="#FBFBFE"/></svg>');

          display: flex;
          align-items: center;
          justify-content: center;
          width: max-content;
          padding-inline: 8px;
          pointer-events: all;
          font: menu;
          font-weight: 590;
          font-size: 12px;
          color: var(--editor-toolbar-fg-color);

          &:disabled {
            pointer-events: none;
          }

          &::before {
            content: "";
            mask-image: var(--alt-text-add-image);
            mask-repeat: no-repeat;
            mask-position: center;
            display: inline-block;
            width: 12px;
            height: 13px;
            background-color: var(--editor-toolbar-fg-color);
            margin-inline-end: 4px;
          }

          &:hover::before {
            background-color: var(--editor-toolbar-hover-fg-color);
          }

          &.done::before {
            mask-image: var(--alt-text-done-image);
          }

          .tooltip {
            display: none;

            &.show {
              --alt-text-tooltip-bg: #f0f0f4;
              --alt-text-tooltip-fg: #15141a;
              --alt-text-tooltip-border: #8f8f9d;
              --alt-text-tooltip-shadow: 0px 2px 6px 0px rgb(58 57 68 / 0.2);

              @media (prefers-color-scheme: dark) {
                --alt-text-tooltip-bg: #1c1b22;
                --alt-text-tooltip-fg: #fbfbfe;
                --alt-text-tooltip-shadow: 0px 2px 6px 0px #15141a;
              }

              @media screen and (forced-colors: active) {
                --alt-text-tooltip-bg: Canvas;
                --alt-text-tooltip-fg: CanvasText;
                --alt-text-tooltip-border: CanvasText;
                --alt-text-tooltip-shadow: none;
              }

              display: inline-flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              position: absolute;
              top: calc(100% + 2px);
              inset-inline-start: 0;
              padding-block: 2px 3px;
              padding-inline: 3px;
              max-width: 300px;
              width: max-content;
              height: auto;
              font-size: 12px;

              border: 0.5px solid var(--alt-text-tooltip-border);
              background: var(--alt-text-tooltip-bg);
              box-shadow: var(--alt-text-tooltip-shadow);
              color: var(--alt-text-tooltip-fg);

              pointer-events: none;
            }
          }
        }
      }
    }
  }

  .annotationEditorLayer .freeTextEditor {
    padding: calc(var(--freetext-padding) * var(--scale-factor));
    width: auto;
    height: auto;
    touch-action: none;
  }

  .annotationEditorLayer .freeTextEditor .internal {
    background: transparent;
    border: none;
    inset: 0;
    overflow: visible;
    white-space: nowrap;
    font: 10px sans-serif;
    line-height: var(--freetext-line-height);
    user-select: none;
  }

  .annotationEditorLayer .freeTextEditor .overlay {
    position: absolute;
    display: none;
    background: transparent;
    inset: 0;
    width: 100%;
    height: 100%;
  }

  .annotationEditorLayer .freeTextEditor .overlay.enabled {
    display: block;
  }

  .annotationEditorLayer .freeTextEditor .internal:empty::before {
    content: attr(default-content);
    color: gray;
  }

  .annotationEditorLayer .freeTextEditor .internal:focus {
    outline: none;
    user-select: auto;
  }

  .annotationEditorLayer :is(.freeTextEditor, .inkEditor, .stampEditor):hover:not(.selectedEditor) {
    outline: var(--hover-outline);
  }

  .annotationEditorLayer .inkEditor {
    width: 100%;
    height: 100%;
  }

  .annotationEditorLayer .inkEditor.editing {
    cursor: inherit;
  }

  .annotationEditorLayer .inkEditor .inkEditorCanvas {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    touch-action: none;
  }

  .annotationEditorLayer .stampEditor {
    width: auto;
    height: auto;
  }

  .annotationEditorLayer .stampEditor canvas {
    width: 100%;
    height: 100%;
  }

  .annotationEditorLayer {
    :is(.freeTextEditor, .inkEditor, .stampEditor) {
      &>.resizers {
        width: 100%;
        height: 100%;
        position: absolute;
        inset: 0;

        &.hidden {
          display: none;
        }

        &>.resizer {
          width: var(--resizer-size);
          height: var(--resizer-size);
          background: content-box var(--resizer-bg-color);
          border: var(--focus-outline-around);
          border-radius: 2px;
          position: absolute;

          &.topLeft {
            top: var(--resizer-shift);
            left: var(--resizer-shift);
          }

          &.topMiddle {
            top: var(--resizer-shift);
            left: calc(50% + var(--resizer-shift));
          }

          &.topRight {
            top: var(--resizer-shift);
            right: var(--resizer-shift);
          }

          &.middleRight {
            top: calc(50% + var(--resizer-shift));
            right: var(--resizer-shift);
          }

          &.bottomRight {
            bottom: var(--resizer-shift);
            right: var(--resizer-shift);
          }

          &.bottomMiddle {
            bottom: var(--resizer-shift);
            left: calc(50% + var(--resizer-shift));
          }

          &.bottomLeft {
            bottom: var(--resizer-shift);
            left: var(--resizer-shift);
          }

          &.middleLeft {
            top: calc(50% + var(--resizer-shift));
            left: var(--resizer-shift);
          }
        }
      }
    }

    &[data-main-rotation="0"] :is([data-editor-rotation="0"], [data-editor-rotation="180"]),
    &[data-main-rotation="90"] :is([data-editor-rotation="270"], [data-editor-rotation="90"]),
    &[data-main-rotation="180"] :is([data-editor-rotation="180"], [data-editor-rotation="0"]),
    &[data-main-rotation="270"] :is([data-editor-rotation="90"], [data-editor-rotation="270"]) {
      &>.resizers>.resizer {

        &.topLeft,
        &.bottomRight {
          cursor: nwse-resize;
        }

        &.topMiddle,
        &.bottomMiddle {
          cursor: ns-resize;
        }

        &.topRight,
        &.bottomLeft {
          cursor: nesw-resize;
        }

        &.middleRight,
        &.middleLeft {
          cursor: ew-resize;
        }
      }
    }

    &[data-main-rotation="0"] :is([data-editor-rotation="90"], [data-editor-rotation="270"]),
    &[data-main-rotation="90"] :is([data-editor-rotation="0"], [data-editor-rotation="180"]),
    &[data-main-rotation="180"] :is([data-editor-rotation="270"], [data-editor-rotation="90"]),
    &[data-main-rotation="270"] :is([data-editor-rotation="180"], [data-editor-rotation="0"]) {
      &>.resizers>.resizer {

        &.topLeft,
        &.bottomRight {
          cursor: nesw-resize;
        }

        &.topMiddle,
        &.bottomMiddle {
          cursor: ew-resize;
        }

        &.topRight,
        &.bottomLeft {
          cursor: nwse-resize;
        }

        &.middleRight,
        &.middleLeft {
          cursor: ns-resize;
        }
      }
    }

    & :is([data-main-rotation="0"] [data-editor-rotation="90"],
      [data-main-rotation="90"] [data-editor-rotation="0"],
      [data-main-rotation="180"] [data-editor-rotation="270"],
      [data-main-rotation="270"] [data-editor-rotation="180"]) {
      .editToolbar {
        rotate: 270deg;

        &:dir(ltr) {
          inset-inline-end: calc(0px - var(--editor-toolbar-vert-offset));
          inset-block-start: 0;
        }

        &:dir(rtl) {
          inset-inline-end: calc(100% + var(--editor-toolbar-vert-offset));
          inset-block-start: 0;
        }
      }
    }

    & :is([data-main-rotation="0"] [data-editor-rotation="180"],
      [data-main-rotation="90"] [data-editor-rotation="90"],
      [data-main-rotation="180"] [data-editor-rotation="0"],
      [data-main-rotation="270"] [data-editor-rotation="270"]) {
      .editToolbar {
        rotate: 180deg;
        inset-inline-end: 100%;
        inset-block-start: calc(0pc - var(--editor-toolbar-vert-offset));
      }
    }

    & :is([data-main-rotation="0"] [data-editor-rotation="270"],
      [data-main-rotation="90"] [data-editor-rotation="180"],
      [data-main-rotation="180"] [data-editor-rotation="90"],
      [data-main-rotation="270"] [data-editor-rotation="0"]) {
      .editToolbar {
        rotate: 90deg;

        &:dir(ltr) {
          inset-inline-end: calc(100% + var(--editor-toolbar-vert-offset));
          inset-block-start: 100%;
        }

        &:dir(rtl) {
          inset-inline-start: calc(0px - var(--editor-toolbar-vert-offset));
          inset-block-start: 0;
        }
      }
    }
  }

  #altTextDialog {
    --dialog-bg-color: white;
    --dialog-border-color: white;
    --dialog-shadow: 0 2px 14px 0 rgb(58 57 68 / 0.2);
    --text-primary-color: #15141a;
    --text-secondary-color: #5b5b66;
    --hover-filter: brightness(0.9);
    --focus-ring-color: #0060df;
    --focus-ring-outline: 2px solid var(--focus-ring-color);

    --textarea-border-color: #8f8f9d;
    --textarea-bg-color: white;
    --textarea-fg-color: var(--text-secondary-color);

    --radio-bg-color: #f0f0f4;
    --radio-checked-bg-color: #fbfbfe;
    --radio-border-color: #8f8f9d;
    --radio-checked-border-color: #0060df;

    --button-cancel-bg-color: #f0f0f4;
    --button-cancel-fg-color: var(--text-primary-color);
    --button-cancel-border-color: var(--button-cancel-bg-color);
    --button-cancel-hover-bg-color: var(--button-cancel-bg-color);
    --button-cancel-hover-fg-color: var(--button-cancel-fg-color);
    --button-cancel-hover-border-color: var(--button-cancel-hover-bg-color);

    --button-save-bg-color: #0060df;
    --button-save-fg-color: #fbfbfe;
    --button-save-hover-bg-color: var(--button-save-bg-color);
    --button-save-hover-fg-color: var(--button-save-fg-color);
    --button-save-hover-border-color: var(--button-save-hover-bg-color);

    @media (prefers-color-scheme: dark) {
      --dialog-bg-color: #1c1b22;
      --dialog-border-color: #1c1b22;
      --dialog-shadow: 0 2px 14px 0 #15141a;
      --text-primary-color: #fbfbfe;
      --text-secondary-color: #cfcfd8;
      --focus-ring-color: #0df;
      --hover-filter: brightness(1.4);

      --textarea-bg-color: #42414d;

      --radio-bg-color: #2b2a33;
      --radio-checked-bg-color: #15141a;
      --radio-checked-border-color: #0df;

      --button-cancel-bg-color: #2b2a33;
      --button-save-bg-color: #0df;
      --button-save-fg-color: #15141a;
    }

    @media screen and (forced-colors: active) {
      --dialog-bg-color: Canvas;
      --dialog-border-color: CanvasText;
      --dialog-shadow: none;
      --text-primary-color: CanvasText;
      --text-secondary-color: CanvasText;
      --hover-filter: none;
      --focus-ring-color: ButtonBorder;

      --textarea-border-color: ButtonBorder;
      --textarea-bg-color: Field;
      --textarea-fg-color: ButtonText;

      --radio-bg-color: ButtonFace;
      --radio-checked-bg-color: ButtonFace;
      --radio-border-color: ButtonText;
      --radio-checked-border-color: ButtonText;

      --button-cancel-bg-color: ButtonFace;
      --button-cancel-fg-color: ButtonText;
      --button-cancel-border-color: ButtonText;
      --button-cancel-hover-bg-color: AccentColor;
      --button-cancel-hover-fg-color: AccentColorText;

      --button-save-bg-color: ButtonText;
      --button-save-fg-color: ButtonFace;
      --button-save-hover-bg-color: AccentColor;
      --button-save-hover-fg-color: AccentColorText;
    }

    font: message-box;
    font-size: 13px;
    font-weight: 400;
    line-height: 150%;
    border-radius: 4px;
    padding: 12px 16px;
    border: 1px solid var(--dialog-border-color);
    background: var(--dialog-bg-color);
    color: var(--text-primary-color);
    box-shadow: var(--dialog-shadow);

    &::backdrop {
      /* This is needed to avoid to darken the image the user want to describe. */
      mask: url(#alttext-manager-mask);
    }

    &.positioned {
      margin: 0;
    }

    & #altTextContainer {
      width: 300px;
      height: fit-content;
      display: inline-flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 16px;

      & *:focus-visible {
        outline: var(--focus-ring-outline);
        outline-offset: 2px;
      }

      & .radio {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;

        & .radioButton {
          display: flex;
          gap: 8px;
          align-self: stretch;
          align-items: center;

          & input {
            appearance: none;
            box-sizing: border-box;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: var(--radio-bg-color);
            border: 1px solid var(--radio-border-color);

            &:hover {
              filter: var(--hover-filter);
            }

            &:checked {
              background-color: var(--radio-checked-bg-color);
              border: 4px solid var(--radio-checked-border-color);
            }
          }
        }

        & .radioLabel {
          display: flex;
          padding-inline-start: 24px;
          align-items: flex-start;
          gap: 10px;
          align-self: stretch;

          & span {
            flex: 1 0 0;
            font-size: 11px;
            color: var(--text-secondary-color);
          }
        }
      }

      & #overallDescription {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
        align-self: stretch;

        & span {
          align-self: stretch;
        }

        & .title {
          font-size: 13px;
          font-style: normal;
          font-weight: 590;
        }
      }

      & #addDescription {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 8px;

        & .descriptionArea {
          flex: 1;
          padding-inline: 24px 10px;

          textarea {
            font: inherit;
            width: 100%;
            min-height: 75px;
            padding: 8px;
            resize: none;
            margin: 0;
            box-sizing: border-box;
            border-radius: 4px;
            border: 1px solid var(--textarea-border-color);
            background: var(--textarea-bg-color);
            color: var(--textarea-fg-color);

            &:focus {
              outline-offset: 0;
              border-color: transparent;
            }

            &:disabled {
              pointer-events: none;
              opacity: 0.4;
            }
          }
        }
      }

      & #buttons {
        display: flex;
        justify-content: flex-end;
        align-items: flex-start;
        gap: 8px;
        align-self: stretch;

        button {
          border-radius: 4px;
          border: 1px solid;
          font: menu;
          font-weight: 600;
          padding: 4px 16px;
          width: auto;
          height: 32px;

          &:hover {
            cursor: pointer;
            filter: var(--hover-filter);
          }

          &#altTextCancel {
            color: var(--button-cancel-fg-color);
            background-color: var(--button-cancel-bg-color);
            border-color: var(--button-cancel-border-color);

            &:hover {
              color: var(--button-cancel-hover-fg-color);
              background-color: var(--button-cancel-hover-bg-color);
              border-color: var(--button-cancel-hover-border-color);
            }
          }

          &#altTextSave {
            color: var(--button-save-hover-fg-color);
            background-color: var(--button-save-hover-bg-color);
            border-color: var(--button-save-hover-border-color);
            opacity: 1;

            &:hover {
              color: var(--button-save-hover-fg-color);
              background-color: var(--button-save-hover-bg-color);
              border-color: var(--button-save-hover-border-color);
            }
          }
        }
      }
    }
  }

  .colorPicker {
    --hover-outline-color: #0250bb;
    --selected-outline-color: #0060df;
    --swatch-border-color: #cfcfd8;

    @media (prefers-color-scheme: dark) {
      --hover-outline-color: #80ebff;
      --selected-outline-color: #aaf2ff;
      --swatch-border-color: #52525e;
    }

    @media screen and (forced-colors: active) {
      --hover-outline-color: Highlight;
      --selected-outline-color: var(--hover-outline-color);
      --swatch-border-color: ButtonText;
    }

    .swatch {
      width: 16px;
      height: 16px;
      border: 1px solid var(--swatch-border-color);
      border-radius: 100%;
      outline-offset: 2px;
      box-sizing: border-box;
      forced-color-adjust: none;
    }

    button:is(:hover, .selected)>.swatch {
      border: none;
    }
  }

  .annotationEditorLayer {
    &[data-main-rotation="0"] {
      .highlightEditor:not(.free)>.editToolbar {
        rotate: 0deg;
      }
    }

    &[data-main-rotation="90"] {
      .highlightEditor:not(.free)>.editToolbar {
        rotate: 270deg;
      }
    }

    &[data-main-rotation="180"] {
      .highlightEditor:not(.free)>.editToolbar {
        rotate: 180deg;
      }
    }

    &[data-main-rotation="270"] {
      .highlightEditor:not(.free)>.editToolbar {
        rotate: 90deg;
      }
    }

    .highlightEditor {
      position: absolute;
      background: transparent;
      z-index: 1;
      cursor: auto;
      max-width: 100%;
      max-height: 100%;
      border: none;
      outline: none;
      pointer-events: none;
      transform-origin: 0 0;

      &:not(.free) {
        transform: none;
      }

      .internal {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: auto;
      }

      &.disabled .internal {
        pointer-events: none;
      }

      &.selectedEditor {
        .internal {
          cursor: pointer;
        }
      }

      .editToolbar {
        --editor-toolbar-colorpicker-arrow-image: url('data:image/svg+xml;charset=UTF-8,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.23336 10.4664L11.8474 6.85339C11.894 6.8071 11.931 6.75203 11.9563 6.69136C11.9816 6.63069 11.9946 6.56562 11.9946 6.49989C11.9946 6.43417 11.9816 6.3691 11.9563 6.30843C11.931 6.24776 11.894 6.19269 11.8474 6.14639C11.7536 6.05266 11.6264 6 11.4939 6C11.3613 6 11.2341 6.05266 11.1404 6.14639L7.99236 9.29339L4.84736 6.14739C4.75305 6.05631 4.62675 6.00592 4.49566 6.00706C4.36456 6.0082 4.23915 6.06078 4.14645 6.15348C4.05374 6.24619 4.00116 6.37159 4.00002 6.50269C3.99888 6.63379 4.04928 6.76009 4.14036 6.85439L7.75236 10.4674L8.23336 10.4664Z" fill="black"/></svg>');

        transform-origin: center !important;

        .buttons {
          .colorPicker {
            position: relative;
            width: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4px;
            padding: 4px;

            &::after {
              content: "";
              mask-image: var(--editor-toolbar-colorpicker-arrow-image);
              mask-repeat: no-repeat;
              mask-position: center;
              display: inline-block;
              background-color: var(--editor-toolbar-fg-color);
              width: 12px;
              height: 12px;
            }

            &:hover::after {
              background-color: var(--editor-toolbar-hover-fg-color);
            }

            &:has(.dropdown:not(.hidden)) {
              background-color: var(--editor-toolbar-hover-bg-color);

              &::after {
                scale: -1;
              }
            }

            .dropdown {
              position: absolute;
              display: flex;
              justify-content: center;
              align-items: center;
              flex-direction: column;
              gap: 11px;
              padding-block: 8px;
              border-radius: 6px;
              background-color: var(--editor-toolbar-bg-color);
              border: 1px solid var(--editor-toolbar-border-color);
              box-shadow: var(--editor-toolbar-shadow);
              inset-block-start: calc(100% + 4px);
              width: calc(100% + 2 * var(--editor-toolbar-padding));

              button {
                width: 100%;
                height: auto;
                border: none;
                cursor: pointer;
                display: flex;
                justify-content: center;
                align-items: center;
                background: none;

                &:is(:active, :focus-visible) {
                  outline: none;
                }

                >.swatch {
                  outline-offset: 2px;
                }

                &[aria-selected="true"]>.swatch {
                  outline: 2px solid var(--selected-outline-color);
                }

                &:is(:hover, :active, :focus-visible)>.swatch {
                  outline: 2px solid var(--hover-outline-color);
                }
              }
            }
          }
        }
      }
    }
  }

  .editorParamsToolbar:has(#highlightParamsToolbarContainer) {
    padding: unset;
  }

  #highlightParamsToolbarContainer {
    height: auto;
    padding-inline: 10px;
    padding-block: 10px 16px;
    gap: 16px;
    display: flex;
    flex-direction: column;
    box-sizing: border-box;

    .editorParamsLabel {
      width: fit-content;
      inset-inline-start: 0;
    }

    .colorPicker {
      display: flex;
      flex-direction: column;
      gap: 8px;

      .dropdown {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-direction: row;
        height: auto;

        button {
          width: auto;
          height: auto;
          border: none;
          cursor: pointer;
          display: flex;
          justify-content: center;
          align-items: center;
          background: none;
          flex: 0 0 auto;

          .swatch {
            width: 24px;
            height: 24px;
          }

          &:is(:active, :focus-visible) {
            outline: none;
          }

          &[aria-selected="true"]>.swatch {
            outline: 2px solid var(--selected-outline-color);
          }

          &:is(:hover, :active, :focus-visible)>.swatch {
            outline: 2px solid var(--hover-outline-color);
          }
        }
      }
    }

    #editorHighlightThickness {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      align-self: stretch;

      .editorParamsLabel {
        width: 100%;
        height: auto;
        align-self: stretch;
      }

      .thicknessPicker {
        display: flex;
        justify-content: space-between;
        align-items: center;
        align-self: stretch;

        --example-color: #bfbfc9;

        @media (prefers-color-scheme: dark) {
          --example-color: #80808e;
        }

        @media screen and (forced-colors: active) {
          --example-color: HighlightText;
        }

        &::before {
          content: "";
          width: 8px;
          aspect-ratio: 1;
          display: block;
          border-radius: 100%;
          background-color: var(--example-color);
        }

        .editorParamsSlider {
          width: unset;
          height: 14px;
        }

        &::after {
          content: "";
          width: 24px;
          aspect-ratio: 1;
          display: block;
          border-radius: 100%;
          background-color: var(--example-color);
        }
      }
    }
  }

  /* #2282 improved compatibility to ng-zorro-antd */
  .annotationEditorLayer button {
    font-size: 13px;
  }
}